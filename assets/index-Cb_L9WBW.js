var $pe=Object.defineProperty;var Upe=(n,e,t)=>e in n?$pe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Bi=(n,e,t)=>Upe(n,typeof e!="symbol"?e+"":e,t);function YJ(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var RS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ow(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ZJ={exports:{}},lI={},XJ={exports:{}},Un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw=Symbol.for("react.element"),jpe=Symbol.for("react.portal"),Kpe=Symbol.for("react.fragment"),qpe=Symbol.for("react.strict_mode"),Gpe=Symbol.for("react.profiler"),Ype=Symbol.for("react.provider"),Zpe=Symbol.for("react.context"),Xpe=Symbol.for("react.forward_ref"),Qpe=Symbol.for("react.suspense"),Jpe=Symbol.for("react.memo"),eme=Symbol.for("react.lazy"),Vz=Symbol.iterator;function tme(n){return n===null||typeof n!="object"?null:(n=Vz&&n[Vz]||n["@@iterator"],typeof n=="function"?n:null)}var QJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JJ=Object.assign,eee={};function q1(n,e,t){this.props=n,this.context=e,this.refs=eee,this.updater=t||QJ}q1.prototype.isReactComponent={};q1.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};q1.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function tee(){}tee.prototype=q1.prototype;function b9(n,e,t){this.props=n,this.context=e,this.refs=eee,this.updater=t||QJ}var _9=b9.prototype=new tee;_9.constructor=b9;JJ(_9,q1.prototype);_9.isPureReactComponent=!0;var zz=Array.isArray,nee=Object.prototype.hasOwnProperty,C9={current:null},iee={key:!0,ref:!0,__self:!0,__source:!0};function ree(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)nee.call(e,i)&&!iee.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Pw,type:n,key:s,ref:o,props:r,_owner:C9.current}}function nme(n,e){return{$$typeof:Pw,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function y9(n){return typeof n=="object"&&n!==null&&n.$$typeof===Pw}function ime(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Wz=/\/+/g;function IM(n,e){return typeof n=="object"&&n!==null&&n.key!=null?ime(""+n.key):e.toString(36)}function Ok(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Pw:case jpe:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+IM(o,0):i,zz(r)?(t="",n!=null&&(t=n.replace(Wz,"$&/")+"/"),Ok(r,e,t,"",function(c){return c})):r!=null&&(y9(r)&&(r=nme(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Wz,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",zz(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+IM(s,a);o+=Ok(s,e,t,l,r)}else if(l=tme(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+IM(s,a++),o+=Ok(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function AS(n,e,t){if(n==null)return n;var i=[],r=0;return Ok(n,i,"","",function(s){return e.call(t,s,r++)}),i}function rme(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Fo={current:null},Pk={transition:null},sme={ReactCurrentDispatcher:Fo,ReactCurrentBatchConfig:Pk,ReactCurrentOwner:C9};function see(){throw Error("act(...) is not supported in production builds of React.")}Un.Children={map:AS,forEach:function(n,e,t){AS(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return AS(n,function(){e++}),e},toArray:function(n){return AS(n,function(e){return e})||[]},only:function(n){if(!y9(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Un.Component=q1;Un.Fragment=Kpe;Un.Profiler=Gpe;Un.PureComponent=b9;Un.StrictMode=qpe;Un.Suspense=Qpe;Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sme;Un.act=see;Un.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=JJ({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=C9.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)nee.call(e,l)&&!iee.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Pw,type:n.type,key:r,ref:s,props:i,_owner:o}};Un.createContext=function(n){return n={$$typeof:Zpe,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Ype,_context:n},n.Consumer=n};Un.createElement=ree;Un.createFactory=function(n){var e=ree.bind(null,n);return e.type=n,e};Un.createRef=function(){return{current:null}};Un.forwardRef=function(n){return{$$typeof:Xpe,render:n}};Un.isValidElement=y9;Un.lazy=function(n){return{$$typeof:eme,_payload:{_status:-1,_result:n},_init:rme}};Un.memo=function(n,e){return{$$typeof:Jpe,type:n,compare:e===void 0?null:e}};Un.startTransition=function(n){var e=Pk.transition;Pk.transition={};try{n()}finally{Pk.transition=e}};Un.unstable_act=see;Un.useCallback=function(n,e){return Fo.current.useCallback(n,e)};Un.useContext=function(n){return Fo.current.useContext(n)};Un.useDebugValue=function(){};Un.useDeferredValue=function(n){return Fo.current.useDeferredValue(n)};Un.useEffect=function(n,e){return Fo.current.useEffect(n,e)};Un.useId=function(){return Fo.current.useId()};Un.useImperativeHandle=function(n,e,t){return Fo.current.useImperativeHandle(n,e,t)};Un.useInsertionEffect=function(n,e){return Fo.current.useInsertionEffect(n,e)};Un.useLayoutEffect=function(n,e){return Fo.current.useLayoutEffect(n,e)};Un.useMemo=function(n,e){return Fo.current.useMemo(n,e)};Un.useReducer=function(n,e,t){return Fo.current.useReducer(n,e,t)};Un.useRef=function(n){return Fo.current.useRef(n)};Un.useState=function(n){return Fo.current.useState(n)};Un.useSyncExternalStore=function(n,e,t){return Fo.current.useSyncExternalStore(n,e,t)};Un.useTransition=function(){return Fo.current.useTransition()};Un.version="18.3.1";XJ.exports=Un;var m=XJ.exports;const Ue=Ow(m),ome=YJ({__proto__:null,default:Ue},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ame=m,lme=Symbol.for("react.element"),cme=Symbol.for("react.fragment"),ume=Object.prototype.hasOwnProperty,dme=ame.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hme={key:!0,ref:!0,__self:!0,__source:!0};function oee(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)ume.call(e,i)&&!hme.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:lme,type:n,key:s,ref:o,props:r,_owner:dme.current}}lI.Fragment=cme;lI.jsx=oee;lI.jsxs=oee;ZJ.exports=lI;var P=ZJ.exports,aee={exports:{}},Ba={},lee={exports:{}},cee={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,B){var $=N.length;N.push(B);e:for(;0<$;){var j=$-1>>>1,Y=N[j];if(0<r(Y,B))N[j]=B,N[$]=Y,$=j;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var B=N[0],$=N.pop();if($!==B){N[0]=$;e:for(var j=0,Y=N.length,G=Y>>>1;j<G;){var X=2*(j+1)-1,q=N[X],re=X+1,ge=N[re];if(0>r(q,$))re<Y&&0>r(ge,q)?(N[j]=ge,N[re]=$,j=re):(N[j]=q,N[X]=$,j=X);else if(re<Y&&0>r(ge,$))N[j]=ge,N[re]=$,j=re;else break e}}return B}function r(N,B){var $=N.sortIndex-B.sortIndex;return $!==0?$:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,g=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(N){for(var B=t(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=N)i(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(c)}}function C(N){if(p=!1,y(N),!g)if(t(l)!==null)g=!0,F(w);else{var B=t(c);B!==null&&T(C,B.startTime-N)}}function w(N,B){g=!1,p&&(p=!1,b(E),E=-1),f=!0;var $=h;try{for(y(B),d=t(l);d!==null&&(!(d.expirationTime>B)||N&&!D());){var j=d.callback;if(typeof j=="function"){d.callback=null,h=d.priorityLevel;var Y=j(d.expirationTime<=B);B=n.unstable_now(),typeof Y=="function"?d.callback=Y:d===t(l)&&i(l),y(B)}else i(l);d=t(l)}if(d!==null)var G=!0;else{var X=t(c);X!==null&&T(C,X.startTime-B),G=!1}return G}finally{d=null,h=$,f=!1}}var x=!1,k=null,E=-1,L=5,M=-1;function D(){return!(n.unstable_now()-M<L)}function O(){if(k!==null){var N=n.unstable_now();M=N;var B=!0;try{B=k(!0,N)}finally{B?A():(x=!1,k=null)}}else x=!1}var A;if(typeof _=="function")A=function(){_(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,V=R.port2;R.port1.onmessage=O,A=function(){V.postMessage(null)}}else A=function(){v(O,0)};function F(N){k=N,x||(x=!0,A())}function T(N,B){E=v(function(){N(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){g||f||(g=!0,F(w))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var $=h;h=B;try{return N()}finally{h=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=h;h=N;try{return B()}finally{h=$}},n.unstable_scheduleCallback=function(N,B,$){var j=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?j+$:j):$=j,N){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=$+Y,N={id:u++,callback:B,priorityLevel:N,startTime:$,expirationTime:Y,sortIndex:-1},$>j?(N.sortIndex=$,e(c,N),t(l)===null&&N===t(c)&&(p?(b(E),E=-1):p=!0,T(C,$-j))):(N.sortIndex=Y,e(l,N),g||f||(g=!0,F(w))),N},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(N){var B=h;return function(){var $=h;h=B;try{return N.apply(this,arguments)}finally{h=$}}}})(cee);lee.exports=cee;var fme=lee.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gme=m,Aa=fme;function ot(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uee=new Set,sy={};function lm(n,e){J0(n,e),J0(n+"Capture",e)}function J0(n,e){for(sy[n]=e,n=0;n<e.length;n++)uee.add(e[n])}var Md=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),GA=Object.prototype.hasOwnProperty,pme=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$z={},Uz={};function mme(n){return GA.call(Uz,n)?!0:GA.call($z,n)?!1:pme.test(n)?Uz[n]=!0:($z[n]=!0,!1)}function vme(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function bme(n,e,t,i){if(e===null||typeof e>"u"||vme(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bo(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Bs[n]=new Bo(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Bs[e]=new Bo(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Bs[n]=new Bo(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Bs[n]=new Bo(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Bs[n]=new Bo(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Bs[n]=new Bo(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Bs[n]=new Bo(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Bs[n]=new Bo(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Bs[n]=new Bo(n,5,!1,n.toLowerCase(),null,!1,!1)});var w9=/[\-:]([a-z])/g;function S9(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(w9,S9);Bs[e]=new Bo(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(w9,S9);Bs[e]=new Bo(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(w9,S9);Bs[e]=new Bo(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Bs[n]=new Bo(n,1,!1,n.toLowerCase(),null,!1,!1)});Bs.xlinkHref=new Bo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Bs[n]=new Bo(n,1,!1,n.toLowerCase(),null,!0,!0)});function x9(n,e,t,i){var r=Bs.hasOwnProperty(e)?Bs[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bme(e,t,r,i)&&(t=null),i||r===null?mme(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Ud=gme.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,OS=Symbol.for("react.element"),fv=Symbol.for("react.portal"),gv=Symbol.for("react.fragment"),k9=Symbol.for("react.strict_mode"),YA=Symbol.for("react.profiler"),dee=Symbol.for("react.provider"),hee=Symbol.for("react.context"),E9=Symbol.for("react.forward_ref"),ZA=Symbol.for("react.suspense"),XA=Symbol.for("react.suspense_list"),L9=Symbol.for("react.memo"),fh=Symbol.for("react.lazy"),fee=Symbol.for("react.offscreen"),jz=Symbol.iterator;function Nb(n){return n===null||typeof n!="object"?null:(n=jz&&n[jz]||n["@@iterator"],typeof n=="function"?n:null)}var sr=Object.assign,DM;function b_(n){if(DM===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);DM=e&&e[1]||""}return`
`+DM+n}var MM=!1;function RM(n,e){if(!n||MM)return"";MM=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{MM=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?b_(n):""}function _me(n){switch(n.tag){case 5:return b_(n.type);case 16:return b_("Lazy");case 13:return b_("Suspense");case 19:return b_("SuspenseList");case 0:case 2:case 15:return n=RM(n.type,!1),n;case 11:return n=RM(n.type.render,!1),n;case 1:return n=RM(n.type,!0),n;default:return""}}function QA(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case gv:return"Fragment";case fv:return"Portal";case YA:return"Profiler";case k9:return"StrictMode";case ZA:return"Suspense";case XA:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case hee:return(n.displayName||"Context")+".Consumer";case dee:return(n._context.displayName||"Context")+".Provider";case E9:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case L9:return e=n.displayName||null,e!==null?e:QA(n.type)||"Memo";case fh:e=n._payload,n=n._init;try{return QA(n(e))}catch{}}return null}function Cme(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return QA(e);case 8:return e===k9?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bf(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function gee(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yme(n){var e=gee(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function PS(n){n._valueTracker||(n._valueTracker=yme(n))}function pee(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=gee(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function WE(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function JA(n,e){var t=e.checked;return sr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Kz(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=bf(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mee(n,e){e=e.checked,e!=null&&x9(n,"checked",e,!1)}function eO(n,e){mee(n,e);var t=bf(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?tO(n,e.type,t):e.hasOwnProperty("defaultValue")&&tO(n,e.type,bf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function qz(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function tO(n,e,t){(e!=="number"||WE(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var __=Array.isArray;function h0(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+bf(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function nO(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ot(91));return sr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Gz(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ot(92));if(__(t)){if(1<t.length)throw Error(ot(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:bf(t)}}function vee(n,e){var t=bf(e.value),i=bf(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function Yz(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function bee(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iO(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?bee(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var FS,_ee=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(FS=FS||document.createElement("div"),FS.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=FS.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function oy(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var H_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wme=["Webkit","ms","Moz","O"];Object.keys(H_).forEach(function(n){wme.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),H_[e]=H_[n]})});function Cee(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||H_.hasOwnProperty(n)&&H_[n]?(""+e).trim():e+"px"}function yee(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=Cee(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var Sme=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rO(n,e){if(e){if(Sme[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ot(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ot(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ot(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ot(62))}}function sO(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oO=null;function N9(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var aO=null,f0=null,g0=null;function Zz(n){if(n=Hw(n)){if(typeof aO!="function")throw Error(ot(280));var e=n.stateNode;e&&(e=fI(e),aO(n.stateNode,n.type,e))}}function wee(n){f0?g0?g0.push(n):g0=[n]:f0=n}function See(){if(f0){var n=f0,e=g0;if(g0=f0=null,Zz(n),e)for(n=0;n<e.length;n++)Zz(e[n])}}function xee(n,e){return n(e)}function kee(){}var AM=!1;function Eee(n,e,t){if(AM)return n(e,t);AM=!0;try{return xee(n,e,t)}finally{AM=!1,(f0!==null||g0!==null)&&(kee(),See())}}function ay(n,e){var t=n.stateNode;if(t===null)return null;var i=fI(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ot(231,e,typeof t));return t}var lO=!1;if(Md)try{var Tb={};Object.defineProperty(Tb,"passive",{get:function(){lO=!0}}),window.addEventListener("test",Tb,Tb),window.removeEventListener("test",Tb,Tb)}catch{lO=!1}function xme(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var V_=!1,$E=null,UE=!1,cO=null,kme={onError:function(n){V_=!0,$E=n}};function Eme(n,e,t,i,r,s,o,a,l){V_=!1,$E=null,xme.apply(kme,arguments)}function Lme(n,e,t,i,r,s,o,a,l){if(Eme.apply(this,arguments),V_){if(V_){var c=$E;V_=!1,$E=null}else throw Error(ot(198));UE||(UE=!0,cO=c)}}function cm(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Lee(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Xz(n){if(cm(n)!==n)throw Error(ot(188))}function Nme(n){var e=n.alternate;if(!e){if(e=cm(n),e===null)throw Error(ot(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return Xz(r),n;if(s===i)return Xz(r),e;s=s.sibling}throw Error(ot(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(ot(189))}}if(t.alternate!==i)throw Error(ot(190))}if(t.tag!==3)throw Error(ot(188));return t.stateNode.current===t?n:e}function Nee(n){return n=Nme(n),n!==null?Tee(n):null}function Tee(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Tee(n);if(e!==null)return e;n=n.sibling}return null}var Iee=Aa.unstable_scheduleCallback,Qz=Aa.unstable_cancelCallback,Tme=Aa.unstable_shouldYield,Ime=Aa.unstable_requestPaint,wr=Aa.unstable_now,Dme=Aa.unstable_getCurrentPriorityLevel,T9=Aa.unstable_ImmediatePriority,Dee=Aa.unstable_UserBlockingPriority,jE=Aa.unstable_NormalPriority,Mme=Aa.unstable_LowPriority,Mee=Aa.unstable_IdlePriority,cI=null,ou=null;function Rme(n){if(ou&&typeof ou.onCommitFiberRoot=="function")try{ou.onCommitFiberRoot(cI,n,void 0,(n.current.flags&128)===128)}catch{}}var rc=Math.clz32?Math.clz32:Pme,Ame=Math.log,Ome=Math.LN2;function Pme(n){return n>>>=0,n===0?32:31-(Ame(n)/Ome|0)|0}var BS=64,HS=4194304;function C_(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function KE(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=C_(a):(s&=o,s!==0&&(i=C_(s)))}else o=t&~r,o!==0?i=C_(o):s!==0&&(i=C_(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-rc(e),r=1<<t,i|=n[t],e&=~r;return i}function Fme(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bme(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-rc(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=Fme(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function uO(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ree(){var n=BS;return BS<<=1,!(BS&4194240)&&(BS=64),n}function OM(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Fw(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-rc(e),n[e]=t}function Hme(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-rc(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function I9(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-rc(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var _i=0;function Aee(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Oee,D9,Pee,Fee,Bee,dO=!1,VS=[],Jh=null,ef=null,tf=null,ly=new Map,cy=new Map,xh=[],Vme="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jz(n,e){switch(n){case"focusin":case"focusout":Jh=null;break;case"dragenter":case"dragleave":ef=null;break;case"mouseover":case"mouseout":tf=null;break;case"pointerover":case"pointerout":ly.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cy.delete(e.pointerId)}}function Ib(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Hw(e),e!==null&&D9(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function zme(n,e,t,i,r){switch(e){case"focusin":return Jh=Ib(Jh,n,e,t,i,r),!0;case"dragenter":return ef=Ib(ef,n,e,t,i,r),!0;case"mouseover":return tf=Ib(tf,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return ly.set(s,Ib(ly.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,cy.set(s,Ib(cy.get(s)||null,n,e,t,i,r)),!0}return!1}function Hee(n){var e=Bg(n.target);if(e!==null){var t=cm(e);if(t!==null){if(e=t.tag,e===13){if(e=Lee(t),e!==null){n.blockedOn=e,Bee(n.priority,function(){Pee(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fk(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=hO(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);oO=i,t.target.dispatchEvent(i),oO=null}else return e=Hw(t),e!==null&&D9(e),n.blockedOn=t,!1;e.shift()}return!0}function eW(n,e,t){Fk(n)&&t.delete(e)}function Wme(){dO=!1,Jh!==null&&Fk(Jh)&&(Jh=null),ef!==null&&Fk(ef)&&(ef=null),tf!==null&&Fk(tf)&&(tf=null),ly.forEach(eW),cy.forEach(eW)}function Db(n,e){n.blockedOn===e&&(n.blockedOn=null,dO||(dO=!0,Aa.unstable_scheduleCallback(Aa.unstable_NormalPriority,Wme)))}function uy(n){function e(r){return Db(r,n)}if(0<VS.length){Db(VS[0],n);for(var t=1;t<VS.length;t++){var i=VS[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Jh!==null&&Db(Jh,n),ef!==null&&Db(ef,n),tf!==null&&Db(tf,n),ly.forEach(e),cy.forEach(e),t=0;t<xh.length;t++)i=xh[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<xh.length&&(t=xh[0],t.blockedOn===null);)Hee(t),t.blockedOn===null&&xh.shift()}var p0=Ud.ReactCurrentBatchConfig,qE=!0;function $me(n,e,t,i){var r=_i,s=p0.transition;p0.transition=null;try{_i=1,M9(n,e,t,i)}finally{_i=r,p0.transition=s}}function Ume(n,e,t,i){var r=_i,s=p0.transition;p0.transition=null;try{_i=4,M9(n,e,t,i)}finally{_i=r,p0.transition=s}}function M9(n,e,t,i){if(qE){var r=hO(n,e,t,i);if(r===null)jM(n,e,i,GE,t),Jz(n,i);else if(zme(r,n,e,t,i))i.stopPropagation();else if(Jz(n,i),e&4&&-1<Vme.indexOf(n)){for(;r!==null;){var s=Hw(r);if(s!==null&&Oee(s),s=hO(n,e,t,i),s===null&&jM(n,e,i,GE,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else jM(n,e,i,null,t)}}var GE=null;function hO(n,e,t,i){if(GE=null,n=N9(i),n=Bg(n),n!==null)if(e=cm(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Lee(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return GE=n,null}function Vee(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dme()){case T9:return 1;case Dee:return 4;case jE:case Mme:return 16;case Mee:return 536870912;default:return 16}default:return 16}}var Oh=null,R9=null,Bk=null;function zee(){if(Bk)return Bk;var n,e=R9,t=e.length,i,r="value"in Oh?Oh.value:Oh.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Bk=r.slice(n,1<i?1-i:void 0)}function Hk(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function zS(){return!0}function tW(){return!1}function Ha(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zS:tW,this.isPropagationStopped=tW,this}return sr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=zS)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=zS)},persist:function(){},isPersistent:zS}),e}var G1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A9=Ha(G1),Bw=sr({},G1,{view:0,detail:0}),jme=Ha(Bw),PM,FM,Mb,uI=sr({},Bw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:O9,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mb&&(Mb&&n.type==="mousemove"?(PM=n.screenX-Mb.screenX,FM=n.screenY-Mb.screenY):FM=PM=0,Mb=n),PM)},movementY:function(n){return"movementY"in n?n.movementY:FM}}),nW=Ha(uI),Kme=sr({},uI,{dataTransfer:0}),qme=Ha(Kme),Gme=sr({},Bw,{relatedTarget:0}),BM=Ha(Gme),Yme=sr({},G1,{animationName:0,elapsedTime:0,pseudoElement:0}),Zme=Ha(Yme),Xme=sr({},G1,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Qme=Ha(Xme),Jme=sr({},G1,{data:0}),iW=Ha(Jme),eve={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tve={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nve={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ive(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=nve[n])?!!e[n]:!1}function O9(){return ive}var rve=sr({},Bw,{key:function(n){if(n.key){var e=eve[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Hk(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tve[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:O9,charCode:function(n){return n.type==="keypress"?Hk(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hk(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sve=Ha(rve),ove=sr({},uI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rW=Ha(ove),ave=sr({},Bw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:O9}),lve=Ha(ave),cve=sr({},G1,{propertyName:0,elapsedTime:0,pseudoElement:0}),uve=Ha(cve),dve=sr({},uI,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),hve=Ha(dve),fve=[9,13,27,32],P9=Md&&"CompositionEvent"in window,z_=null;Md&&"documentMode"in document&&(z_=document.documentMode);var gve=Md&&"TextEvent"in window&&!z_,Wee=Md&&(!P9||z_&&8<z_&&11>=z_),sW=" ",oW=!1;function $ee(n,e){switch(n){case"keyup":return fve.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uee(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var pv=!1;function pve(n,e){switch(n){case"compositionend":return Uee(e);case"keypress":return e.which!==32?null:(oW=!0,sW);case"textInput":return n=e.data,n===sW&&oW?null:n;default:return null}}function mve(n,e){if(pv)return n==="compositionend"||!P9&&$ee(n,e)?(n=zee(),Bk=R9=Oh=null,pv=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wee&&e.locale!=="ko"?null:e.data;default:return null}}var vve={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aW(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!vve[n.type]:e==="textarea"}function jee(n,e,t,i){wee(i),e=YE(e,"onChange"),0<e.length&&(t=new A9("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var W_=null,dy=null;function bve(n){nte(n,0)}function dI(n){var e=bv(n);if(pee(e))return n}function _ve(n,e){if(n==="change")return e}var Kee=!1;if(Md){var HM;if(Md){var VM="oninput"in document;if(!VM){var lW=document.createElement("div");lW.setAttribute("oninput","return;"),VM=typeof lW.oninput=="function"}HM=VM}else HM=!1;Kee=HM&&(!document.documentMode||9<document.documentMode)}function cW(){W_&&(W_.detachEvent("onpropertychange",qee),dy=W_=null)}function qee(n){if(n.propertyName==="value"&&dI(dy)){var e=[];jee(e,dy,n,N9(n)),Eee(bve,e)}}function Cve(n,e,t){n==="focusin"?(cW(),W_=e,dy=t,W_.attachEvent("onpropertychange",qee)):n==="focusout"&&cW()}function yve(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return dI(dy)}function wve(n,e){if(n==="click")return dI(e)}function Sve(n,e){if(n==="input"||n==="change")return dI(e)}function xve(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var cc=typeof Object.is=="function"?Object.is:xve;function hy(n,e){if(cc(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!GA.call(e,r)||!cc(n[r],e[r]))return!1}return!0}function uW(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function dW(n,e){var t=uW(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=uW(t)}}function Gee(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Gee(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Yee(){for(var n=window,e=WE();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=WE(n.document)}return e}function F9(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function kve(n){var e=Yee(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Gee(t.ownerDocument.documentElement,t)){if(i!==null&&F9(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=dW(t,s);var o=dW(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Eve=Md&&"documentMode"in document&&11>=document.documentMode,mv=null,fO=null,$_=null,gO=!1;function hW(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;gO||mv==null||mv!==WE(i)||(i=mv,"selectionStart"in i&&F9(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),$_&&hy($_,i)||($_=i,i=YE(fO,"onSelect"),0<i.length&&(e=new A9("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=mv)))}function WS(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var vv={animationend:WS("Animation","AnimationEnd"),animationiteration:WS("Animation","AnimationIteration"),animationstart:WS("Animation","AnimationStart"),transitionend:WS("Transition","TransitionEnd")},zM={},Zee={};Md&&(Zee=document.createElement("div").style,"AnimationEvent"in window||(delete vv.animationend.animation,delete vv.animationiteration.animation,delete vv.animationstart.animation),"TransitionEvent"in window||delete vv.transitionend.transition);function hI(n){if(zM[n])return zM[n];if(!vv[n])return n;var e=vv[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Zee)return zM[n]=e[t];return n}var Xee=hI("animationend"),Qee=hI("animationiteration"),Jee=hI("animationstart"),ete=hI("transitionend"),tte=new Map,fW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Of(n,e){tte.set(n,e),lm(e,[n])}for(var WM=0;WM<fW.length;WM++){var $M=fW[WM],Lve=$M.toLowerCase(),Nve=$M[0].toUpperCase()+$M.slice(1);Of(Lve,"on"+Nve)}Of(Xee,"onAnimationEnd");Of(Qee,"onAnimationIteration");Of(Jee,"onAnimationStart");Of("dblclick","onDoubleClick");Of("focusin","onFocus");Of("focusout","onBlur");Of(ete,"onTransitionEnd");J0("onMouseEnter",["mouseout","mouseover"]);J0("onMouseLeave",["mouseout","mouseover"]);J0("onPointerEnter",["pointerout","pointerover"]);J0("onPointerLeave",["pointerout","pointerover"]);lm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lm("onBeforeInput",["compositionend","keypress","textInput","paste"]);lm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var y_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tve=new Set("cancel close invalid load scroll toggle".split(" ").concat(y_));function gW(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,Lme(i,e,void 0,n),n.currentTarget=null}function nte(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;gW(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;gW(r,a,c),s=l}}}if(UE)throw n=cO,UE=!1,cO=null,n}function $i(n,e){var t=e[_O];t===void 0&&(t=e[_O]=new Set);var i=n+"__bubble";t.has(i)||(ite(e,n,2,!1),t.add(i))}function UM(n,e,t){var i=0;e&&(i|=4),ite(t,n,i,e)}var $S="_reactListening"+Math.random().toString(36).slice(2);function fy(n){if(!n[$S]){n[$S]=!0,uee.forEach(function(t){t!=="selectionchange"&&(Tve.has(t)||UM(t,!1,n),UM(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[$S]||(e[$S]=!0,UM("selectionchange",!1,e))}}function ite(n,e,t,i){switch(Vee(e)){case 1:var r=$me;break;case 4:r=Ume;break;default:r=M9}t=r.bind(null,e,t,n),r=void 0,!lO||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function jM(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Bg(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Eee(function(){var c=s,u=N9(t),d=[];e:{var h=tte.get(n);if(h!==void 0){var f=A9,g=n;switch(n){case"keypress":if(Hk(t)===0)break e;case"keydown":case"keyup":f=sve;break;case"focusin":g="focus",f=BM;break;case"focusout":g="blur",f=BM;break;case"beforeblur":case"afterblur":f=BM;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=nW;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=qme;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=lve;break;case Xee:case Qee:case Jee:f=Zme;break;case ete:f=uve;break;case"scroll":f=jme;break;case"wheel":f=hve;break;case"copy":case"cut":case"paste":f=Qme;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=rW}var p=(e&4)!==0,v=!p&&n==="scroll",b=p?h!==null?h+"Capture":null:h;p=[];for(var _=c,y;_!==null;){y=_;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,b!==null&&(C=ay(_,b),C!=null&&p.push(gy(_,C,y)))),v)break;_=_.return}0<p.length&&(h=new f(h,g,null,t,u),d.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",h&&t!==oO&&(g=t.relatedTarget||t.fromElement)&&(Bg(g)||g[Rd]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=t.relatedTarget||t.toElement,f=c,g=g?Bg(g):null,g!==null&&(v=cm(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(p=nW,C="onMouseLeave",b="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(p=rW,C="onPointerLeave",b="onPointerEnter",_="pointer"),v=f==null?h:bv(f),y=g==null?h:bv(g),h=new p(C,_+"leave",f,t,u),h.target=v,h.relatedTarget=y,C=null,Bg(u)===c&&(p=new p(b,_+"enter",g,t,u),p.target=y,p.relatedTarget=v,C=p),v=C,f&&g)t:{for(p=f,b=g,_=0,y=p;y;y=Dm(y))_++;for(y=0,C=b;C;C=Dm(C))y++;for(;0<_-y;)p=Dm(p),_--;for(;0<y-_;)b=Dm(b),y--;for(;_--;){if(p===b||b!==null&&p===b.alternate)break t;p=Dm(p),b=Dm(b)}p=null}else p=null;f!==null&&pW(d,h,f,p,!1),g!==null&&v!==null&&pW(d,v,g,p,!0)}}e:{if(h=c?bv(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var w=_ve;else if(aW(h))if(Kee)w=Sve;else{w=yve;var x=Cve}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=wve);if(w&&(w=w(n,c))){jee(d,w,t,u);break e}x&&x(n,h,c),n==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&tO(h,"number",h.value)}switch(x=c?bv(c):window,n){case"focusin":(aW(x)||x.contentEditable==="true")&&(mv=x,fO=c,$_=null);break;case"focusout":$_=fO=mv=null;break;case"mousedown":gO=!0;break;case"contextmenu":case"mouseup":case"dragend":gO=!1,hW(d,t,u);break;case"selectionchange":if(Eve)break;case"keydown":case"keyup":hW(d,t,u)}var k;if(P9)e:{switch(n){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else pv?$ee(n,t)&&(E="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(Wee&&t.locale!=="ko"&&(pv||E!=="onCompositionStart"?E==="onCompositionEnd"&&pv&&(k=zee()):(Oh=u,R9="value"in Oh?Oh.value:Oh.textContent,pv=!0)),x=YE(c,E),0<x.length&&(E=new iW(E,n,null,t,u),d.push({event:E,listeners:x}),k?E.data=k:(k=Uee(t),k!==null&&(E.data=k)))),(k=gve?pve(n,t):mve(n,t))&&(c=YE(c,"onBeforeInput"),0<c.length&&(u=new iW("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=k))}nte(d,e)})}function gy(n,e,t){return{instance:n,listener:e,currentTarget:t}}function YE(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ay(n,t),s!=null&&i.unshift(gy(n,s,r)),s=ay(n,e),s!=null&&i.push(gy(n,s,r))),n=n.return}return i}function Dm(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function pW(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=ay(t,s),l!=null&&o.unshift(gy(t,l,a))):r||(l=ay(t,s),l!=null&&o.push(gy(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Ive=/\r\n?/g,Dve=/\u0000|\uFFFD/g;function mW(n){return(typeof n=="string"?n:""+n).replace(Ive,`
`).replace(Dve,"")}function US(n,e,t){if(e=mW(e),mW(n)!==e&&t)throw Error(ot(425))}function ZE(){}var pO=null,mO=null;function vO(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bO=typeof setTimeout=="function"?setTimeout:void 0,Mve=typeof clearTimeout=="function"?clearTimeout:void 0,vW=typeof Promise=="function"?Promise:void 0,Rve=typeof queueMicrotask=="function"?queueMicrotask:typeof vW<"u"?function(n){return vW.resolve(null).then(n).catch(Ave)}:bO;function Ave(n){setTimeout(function(){throw n})}function KM(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),uy(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);uy(e)}function nf(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function bW(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Y1=Math.random().toString(36).slice(2),eu="__reactFiber$"+Y1,py="__reactProps$"+Y1,Rd="__reactContainer$"+Y1,_O="__reactEvents$"+Y1,Ove="__reactListeners$"+Y1,Pve="__reactHandles$"+Y1;function Bg(n){var e=n[eu];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Rd]||t[eu]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=bW(n);n!==null;){if(t=n[eu])return t;n=bW(n)}return e}n=t,t=n.parentNode}return null}function Hw(n){return n=n[eu]||n[Rd],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function bv(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ot(33))}function fI(n){return n[py]||null}var CO=[],_v=-1;function Pf(n){return{current:n}}function Ui(n){0>_v||(n.current=CO[_v],CO[_v]=null,_v--)}function Vi(n,e){_v++,CO[_v]=n.current,n.current=e}var _f={},ao=Pf(_f),ta=Pf(!1),Rp=_f;function e1(n,e){var t=n.type.contextTypes;if(!t)return _f;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function na(n){return n=n.childContextTypes,n!=null}function XE(){Ui(ta),Ui(ao)}function _W(n,e,t){if(ao.current!==_f)throw Error(ot(168));Vi(ao,e),Vi(ta,t)}function rte(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ot(108,Cme(n)||"Unknown",r));return sr({},t,i)}function QE(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||_f,Rp=ao.current,Vi(ao,n),Vi(ta,ta.current),!0}function CW(n,e,t){var i=n.stateNode;if(!i)throw Error(ot(169));t?(n=rte(n,e,Rp),i.__reactInternalMemoizedMergedChildContext=n,Ui(ta),Ui(ao),Vi(ao,n)):Ui(ta),Vi(ta,t)}var ed=null,gI=!1,qM=!1;function ste(n){ed===null?ed=[n]:ed.push(n)}function Fve(n){gI=!0,ste(n)}function Ff(){if(!qM&&ed!==null){qM=!0;var n=0,e=_i;try{var t=ed;for(_i=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}ed=null,gI=!1}catch(r){throw ed!==null&&(ed=ed.slice(n+1)),Iee(T9,Ff),r}finally{_i=e,qM=!1}}return null}var Cv=[],yv=0,JE=null,e2=0,Ja=[],el=0,Ap=null,dd=1,hd="";function sg(n,e){Cv[yv++]=e2,Cv[yv++]=JE,JE=n,e2=e}function ote(n,e,t){Ja[el++]=dd,Ja[el++]=hd,Ja[el++]=Ap,Ap=n;var i=dd;n=hd;var r=32-rc(i)-1;i&=~(1<<r),t+=1;var s=32-rc(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,dd=1<<32-rc(e)+r|t<<r|i,hd=s+n}else dd=1<<s|t<<r|i,hd=n}function B9(n){n.return!==null&&(sg(n,1),ote(n,1,0))}function H9(n){for(;n===JE;)JE=Cv[--yv],Cv[yv]=null,e2=Cv[--yv],Cv[yv]=null;for(;n===Ap;)Ap=Ja[--el],Ja[el]=null,hd=Ja[--el],Ja[el]=null,dd=Ja[--el],Ja[el]=null}var Da=null,Ea=null,qi=!1,Kl=null;function ate(n,e){var t=sl(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function yW(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Da=n,Ea=nf(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Da=n,Ea=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ap!==null?{id:dd,overflow:hd}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=sl(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Da=n,Ea=null,!0):!1;default:return!1}}function yO(n){return(n.mode&1)!==0&&(n.flags&128)===0}function wO(n){if(qi){var e=Ea;if(e){var t=e;if(!yW(n,e)){if(yO(n))throw Error(ot(418));e=nf(t.nextSibling);var i=Da;e&&yW(n,e)?ate(i,t):(n.flags=n.flags&-4097|2,qi=!1,Da=n)}}else{if(yO(n))throw Error(ot(418));n.flags=n.flags&-4097|2,qi=!1,Da=n}}}function wW(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Da=n}function jS(n){if(n!==Da)return!1;if(!qi)return wW(n),qi=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!vO(n.type,n.memoizedProps)),e&&(e=Ea)){if(yO(n))throw lte(),Error(ot(418));for(;e;)ate(n,e),e=nf(e.nextSibling)}if(wW(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ot(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ea=nf(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ea=null}}else Ea=Da?nf(n.stateNode.nextSibling):null;return!0}function lte(){for(var n=Ea;n;)n=nf(n.nextSibling)}function t1(){Ea=Da=null,qi=!1}function V9(n){Kl===null?Kl=[n]:Kl.push(n)}var Bve=Ud.ReactCurrentBatchConfig;function Rb(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ot(309));var i=t.stateNode}if(!i)throw Error(ot(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ot(284));if(!t._owner)throw Error(ot(290,n))}return n}function KS(n,e){throw n=Object.prototype.toString.call(e),Error(ot(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function SW(n){var e=n._init;return e(n._payload)}function cte(n){function e(b,_){if(n){var y=b.deletions;y===null?(b.deletions=[_],b.flags|=16):y.push(_)}}function t(b,_){if(!n)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function i(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function r(b,_){return b=af(b,_),b.index=0,b.sibling=null,b}function s(b,_,y){return b.index=y,n?(y=b.alternate,y!==null?(y=y.index,y<_?(b.flags|=2,_):y):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return n&&b.alternate===null&&(b.flags|=2),b}function a(b,_,y,C){return _===null||_.tag!==6?(_=e4(y,b.mode,C),_.return=b,_):(_=r(_,y),_.return=b,_)}function l(b,_,y,C){var w=y.type;return w===gv?u(b,_,y.props.children,C,y.key):_!==null&&(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===fh&&SW(w)===_.type)?(C=r(_,y.props),C.ref=Rb(b,_,y),C.return=b,C):(C=Kk(y.type,y.key,y.props,null,b.mode,C),C.ref=Rb(b,_,y),C.return=b,C)}function c(b,_,y,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==y.containerInfo||_.stateNode.implementation!==y.implementation?(_=t4(y,b.mode,C),_.return=b,_):(_=r(_,y.children||[]),_.return=b,_)}function u(b,_,y,C,w){return _===null||_.tag!==7?(_=ep(y,b.mode,C,w),_.return=b,_):(_=r(_,y),_.return=b,_)}function d(b,_,y){if(typeof _=="string"&&_!==""||typeof _=="number")return _=e4(""+_,b.mode,y),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case OS:return y=Kk(_.type,_.key,_.props,null,b.mode,y),y.ref=Rb(b,null,_),y.return=b,y;case fv:return _=t4(_,b.mode,y),_.return=b,_;case fh:var C=_._init;return d(b,C(_._payload),y)}if(__(_)||Nb(_))return _=ep(_,b.mode,y,null),_.return=b,_;KS(b,_)}return null}function h(b,_,y,C){var w=_!==null?_.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:a(b,_,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case OS:return y.key===w?l(b,_,y,C):null;case fv:return y.key===w?c(b,_,y,C):null;case fh:return w=y._init,h(b,_,w(y._payload),C)}if(__(y)||Nb(y))return w!==null?null:u(b,_,y,C,null);KS(b,y)}return null}function f(b,_,y,C,w){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(y)||null,a(_,b,""+C,w);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case OS:return b=b.get(C.key===null?y:C.key)||null,l(_,b,C,w);case fv:return b=b.get(C.key===null?y:C.key)||null,c(_,b,C,w);case fh:var x=C._init;return f(b,_,y,x(C._payload),w)}if(__(C)||Nb(C))return b=b.get(y)||null,u(_,b,C,w,null);KS(_,C)}return null}function g(b,_,y,C){for(var w=null,x=null,k=_,E=_=0,L=null;k!==null&&E<y.length;E++){k.index>E?(L=k,k=null):L=k.sibling;var M=h(b,k,y[E],C);if(M===null){k===null&&(k=L);break}n&&k&&M.alternate===null&&e(b,k),_=s(M,_,E),x===null?w=M:x.sibling=M,x=M,k=L}if(E===y.length)return t(b,k),qi&&sg(b,E),w;if(k===null){for(;E<y.length;E++)k=d(b,y[E],C),k!==null&&(_=s(k,_,E),x===null?w=k:x.sibling=k,x=k);return qi&&sg(b,E),w}for(k=i(b,k);E<y.length;E++)L=f(k,b,E,y[E],C),L!==null&&(n&&L.alternate!==null&&k.delete(L.key===null?E:L.key),_=s(L,_,E),x===null?w=L:x.sibling=L,x=L);return n&&k.forEach(function(D){return e(b,D)}),qi&&sg(b,E),w}function p(b,_,y,C){var w=Nb(y);if(typeof w!="function")throw Error(ot(150));if(y=w.call(y),y==null)throw Error(ot(151));for(var x=w=null,k=_,E=_=0,L=null,M=y.next();k!==null&&!M.done;E++,M=y.next()){k.index>E?(L=k,k=null):L=k.sibling;var D=h(b,k,M.value,C);if(D===null){k===null&&(k=L);break}n&&k&&D.alternate===null&&e(b,k),_=s(D,_,E),x===null?w=D:x.sibling=D,x=D,k=L}if(M.done)return t(b,k),qi&&sg(b,E),w;if(k===null){for(;!M.done;E++,M=y.next())M=d(b,M.value,C),M!==null&&(_=s(M,_,E),x===null?w=M:x.sibling=M,x=M);return qi&&sg(b,E),w}for(k=i(b,k);!M.done;E++,M=y.next())M=f(k,b,E,M.value,C),M!==null&&(n&&M.alternate!==null&&k.delete(M.key===null?E:M.key),_=s(M,_,E),x===null?w=M:x.sibling=M,x=M);return n&&k.forEach(function(O){return e(b,O)}),qi&&sg(b,E),w}function v(b,_,y,C){if(typeof y=="object"&&y!==null&&y.type===gv&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case OS:e:{for(var w=y.key,x=_;x!==null;){if(x.key===w){if(w=y.type,w===gv){if(x.tag===7){t(b,x.sibling),_=r(x,y.props.children),_.return=b,b=_;break e}}else if(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===fh&&SW(w)===x.type){t(b,x.sibling),_=r(x,y.props),_.ref=Rb(b,x,y),_.return=b,b=_;break e}t(b,x);break}else e(b,x);x=x.sibling}y.type===gv?(_=ep(y.props.children,b.mode,C,y.key),_.return=b,b=_):(C=Kk(y.type,y.key,y.props,null,b.mode,C),C.ref=Rb(b,_,y),C.return=b,b=C)}return o(b);case fv:e:{for(x=y.key;_!==null;){if(_.key===x)if(_.tag===4&&_.stateNode.containerInfo===y.containerInfo&&_.stateNode.implementation===y.implementation){t(b,_.sibling),_=r(_,y.children||[]),_.return=b,b=_;break e}else{t(b,_);break}else e(b,_);_=_.sibling}_=t4(y,b.mode,C),_.return=b,b=_}return o(b);case fh:return x=y._init,v(b,_,x(y._payload),C)}if(__(y))return g(b,_,y,C);if(Nb(y))return p(b,_,y,C);KS(b,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,_!==null&&_.tag===6?(t(b,_.sibling),_=r(_,y),_.return=b,b=_):(t(b,_),_=e4(y,b.mode,C),_.return=b,b=_),o(b)):t(b,_)}return v}var n1=cte(!0),ute=cte(!1),t2=Pf(null),n2=null,wv=null,z9=null;function W9(){z9=wv=n2=null}function $9(n){var e=t2.current;Ui(t2),n._currentValue=e}function SO(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function m0(n,e){n2=n,z9=wv=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Xo=!0),n.firstContext=null)}function pl(n){var e=n._currentValue;if(z9!==n)if(n={context:n,memoizedValue:e,next:null},wv===null){if(n2===null)throw Error(ot(308));wv=n,n2.dependencies={lanes:0,firstContext:n}}else wv=wv.next=n;return e}var Hg=null;function U9(n){Hg===null?Hg=[n]:Hg.push(n)}function dte(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,U9(e)):(t.next=r.next,r.next=t),e.interleaved=t,Ad(n,i)}function Ad(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var gh=!1;function j9(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hte(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function wd(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function rf(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,li&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ad(n,t)}return r=i.interleaved,r===null?(e.next=e,U9(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ad(n,t)}function Vk(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,I9(n,t)}}function xW(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function i2(n,e,t,i){var r=n.updateQueue;gh=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,p=a;switch(h=e,f=t,p.tag){case 1:if(g=p.payload,typeof g=="function"){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(f,d,h):g,h==null)break e;d=sr({},d,h);break e;case 2:gh=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Pp|=o,n.lanes=o,n.memoizedState=d}}function kW(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(ot(191,r));r.call(i)}}}var Vw={},au=Pf(Vw),my=Pf(Vw),vy=Pf(Vw);function Vg(n){if(n===Vw)throw Error(ot(174));return n}function K9(n,e){switch(Vi(vy,e),Vi(my,n),Vi(au,Vw),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iO(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=iO(e,n)}Ui(au),Vi(au,e)}function i1(){Ui(au),Ui(my),Ui(vy)}function fte(n){Vg(vy.current);var e=Vg(au.current),t=iO(e,n.type);e!==t&&(Vi(my,n),Vi(au,t))}function q9(n){my.current===n&&(Ui(au),Ui(my))}var Qi=Pf(0);function r2(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var GM=[];function G9(){for(var n=0;n<GM.length;n++)GM[n]._workInProgressVersionPrimary=null;GM.length=0}var zk=Ud.ReactCurrentDispatcher,YM=Ud.ReactCurrentBatchConfig,Op=0,ir=null,jr=null,as=null,s2=!1,U_=!1,by=0,Hve=0;function qs(){throw Error(ot(321))}function Y9(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!cc(n[t],e[t]))return!1;return!0}function Z9(n,e,t,i,r,s){if(Op=s,ir=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zk.current=n===null||n.memoizedState===null?$ve:Uve,n=t(i,r),U_){s=0;do{if(U_=!1,by=0,25<=s)throw Error(ot(301));s+=1,as=jr=null,e.updateQueue=null,zk.current=jve,n=t(i,r)}while(U_)}if(zk.current=o2,e=jr!==null&&jr.next!==null,Op=0,as=jr=ir=null,s2=!1,e)throw Error(ot(300));return n}function X9(){var n=by!==0;return by=0,n}function Fc(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return as===null?ir.memoizedState=as=n:as=as.next=n,as}function ml(){if(jr===null){var n=ir.alternate;n=n!==null?n.memoizedState:null}else n=jr.next;var e=as===null?ir.memoizedState:as.next;if(e!==null)as=e,jr=n;else{if(n===null)throw Error(ot(310));jr=n,n={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},as===null?ir.memoizedState=as=n:as=as.next=n}return as}function _y(n,e){return typeof e=="function"?e(n):e}function ZM(n){var e=ml(),t=e.queue;if(t===null)throw Error(ot(311));t.lastRenderedReducer=n;var i=jr,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Op&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,ir.lanes|=u,Pp|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,cc(i,e.memoizedState)||(Xo=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,ir.lanes|=s,Pp|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function XM(n){var e=ml(),t=e.queue;if(t===null)throw Error(ot(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);cc(s,e.memoizedState)||(Xo=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function gte(){}function pte(n,e){var t=ir,i=ml(),r=e(),s=!cc(i.memoizedState,r);if(s&&(i.memoizedState=r,Xo=!0),i=i.queue,Q9(bte.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||as!==null&&as.memoizedState.tag&1){if(t.flags|=2048,Cy(9,vte.bind(null,t,i,r,e),void 0,null),gs===null)throw Error(ot(349));Op&30||mte(t,e,r)}return r}function mte(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ir.updateQueue,e===null?(e={lastEffect:null,stores:null},ir.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function vte(n,e,t,i){e.value=t,e.getSnapshot=i,_te(e)&&Cte(n)}function bte(n,e,t){return t(function(){_te(e)&&Cte(n)})}function _te(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!cc(n,t)}catch{return!0}}function Cte(n){var e=Ad(n,1);e!==null&&sc(e,n,1,-1)}function EW(n){var e=Fc();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:n},e.queue=n,n=n.dispatch=Wve.bind(null,ir,n),[e.memoizedState,n]}function Cy(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=ir.updateQueue,e===null?(e={lastEffect:null,stores:null},ir.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function yte(){return ml().memoizedState}function Wk(n,e,t,i){var r=Fc();ir.flags|=n,r.memoizedState=Cy(1|e,t,void 0,i===void 0?null:i)}function pI(n,e,t,i){var r=ml();i=i===void 0?null:i;var s=void 0;if(jr!==null){var o=jr.memoizedState;if(s=o.destroy,i!==null&&Y9(i,o.deps)){r.memoizedState=Cy(e,t,s,i);return}}ir.flags|=n,r.memoizedState=Cy(1|e,t,s,i)}function LW(n,e){return Wk(8390656,8,n,e)}function Q9(n,e){return pI(2048,8,n,e)}function wte(n,e){return pI(4,2,n,e)}function Ste(n,e){return pI(4,4,n,e)}function xte(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function kte(n,e,t){return t=t!=null?t.concat([n]):null,pI(4,4,xte.bind(null,e,n),t)}function J9(){}function Ete(n,e){var t=ml();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Y9(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Lte(n,e){var t=ml();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Y9(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function Nte(n,e,t){return Op&21?(cc(t,e)||(t=Ree(),ir.lanes|=t,Pp|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Xo=!0),n.memoizedState=t)}function Vve(n,e){var t=_i;_i=t!==0&&4>t?t:4,n(!0);var i=YM.transition;YM.transition={};try{n(!1),e()}finally{_i=t,YM.transition=i}}function Tte(){return ml().memoizedState}function zve(n,e,t){var i=of(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},Ite(n))Dte(e,t);else if(t=dte(n,e,t,i),t!==null){var r=Lo();sc(t,n,i,r),Mte(t,e,i)}}function Wve(n,e,t){var i=of(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(Ite(n))Dte(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,cc(a,o)){var l=e.interleaved;l===null?(r.next=r,U9(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=dte(n,e,r,i),t!==null&&(r=Lo(),sc(t,n,i,r),Mte(t,e,i))}}function Ite(n){var e=n.alternate;return n===ir||e!==null&&e===ir}function Dte(n,e){U_=s2=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Mte(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,I9(n,t)}}var o2={readContext:pl,useCallback:qs,useContext:qs,useEffect:qs,useImperativeHandle:qs,useInsertionEffect:qs,useLayoutEffect:qs,useMemo:qs,useReducer:qs,useRef:qs,useState:qs,useDebugValue:qs,useDeferredValue:qs,useTransition:qs,useMutableSource:qs,useSyncExternalStore:qs,useId:qs,unstable_isNewReconciler:!1},$ve={readContext:pl,useCallback:function(n,e){return Fc().memoizedState=[n,e===void 0?null:e],n},useContext:pl,useEffect:LW,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Wk(4194308,4,xte.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Wk(4194308,4,n,e)},useInsertionEffect:function(n,e){return Wk(4,2,n,e)},useMemo:function(n,e){var t=Fc();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Fc();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=zve.bind(null,ir,n),[i.memoizedState,n]},useRef:function(n){var e=Fc();return n={current:n},e.memoizedState=n},useState:EW,useDebugValue:J9,useDeferredValue:function(n){return Fc().memoizedState=n},useTransition:function(){var n=EW(!1),e=n[0];return n=Vve.bind(null,n[1]),Fc().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=ir,r=Fc();if(qi){if(t===void 0)throw Error(ot(407));t=t()}else{if(t=e(),gs===null)throw Error(ot(349));Op&30||mte(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,LW(bte.bind(null,i,s,n),[n]),i.flags|=2048,Cy(9,vte.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Fc(),e=gs.identifierPrefix;if(qi){var t=hd,i=dd;t=(i&~(1<<32-rc(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=by++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Hve++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Uve={readContext:pl,useCallback:Ete,useContext:pl,useEffect:Q9,useImperativeHandle:kte,useInsertionEffect:wte,useLayoutEffect:Ste,useMemo:Lte,useReducer:ZM,useRef:yte,useState:function(){return ZM(_y)},useDebugValue:J9,useDeferredValue:function(n){var e=ml();return Nte(e,jr.memoizedState,n)},useTransition:function(){var n=ZM(_y)[0],e=ml().memoizedState;return[n,e]},useMutableSource:gte,useSyncExternalStore:pte,useId:Tte,unstable_isNewReconciler:!1},jve={readContext:pl,useCallback:Ete,useContext:pl,useEffect:Q9,useImperativeHandle:kte,useInsertionEffect:wte,useLayoutEffect:Ste,useMemo:Lte,useReducer:XM,useRef:yte,useState:function(){return XM(_y)},useDebugValue:J9,useDeferredValue:function(n){var e=ml();return jr===null?e.memoizedState=n:Nte(e,jr.memoizedState,n)},useTransition:function(){var n=XM(_y)[0],e=ml().memoizedState;return[n,e]},useMutableSource:gte,useSyncExternalStore:pte,useId:Tte,unstable_isNewReconciler:!1};function Vl(n,e){if(n&&n.defaultProps){e=sr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function xO(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:sr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var mI={isMounted:function(n){return(n=n._reactInternals)?cm(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Lo(),r=of(n),s=wd(i,r);s.payload=e,t!=null&&(s.callback=t),e=rf(n,s,r),e!==null&&(sc(e,n,r,i),Vk(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Lo(),r=of(n),s=wd(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=rf(n,s,r),e!==null&&(sc(e,n,r,i),Vk(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Lo(),i=of(n),r=wd(t,i);r.tag=2,e!=null&&(r.callback=e),e=rf(n,r,i),e!==null&&(sc(e,n,i,t),Vk(e,n,i))}};function NW(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!hy(t,i)||!hy(r,s):!0}function Rte(n,e,t){var i=!1,r=_f,s=e.contextType;return typeof s=="object"&&s!==null?s=pl(s):(r=na(e)?Rp:ao.current,i=e.contextTypes,s=(i=i!=null)?e1(n,r):_f),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mI,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function TW(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&mI.enqueueReplaceState(e,e.state,null)}function kO(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},j9(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=pl(s):(s=na(e)?Rp:ao.current,r.context=e1(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(xO(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&mI.enqueueReplaceState(r,r.state,null),i2(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function r1(n,e){try{var t="",i=e;do t+=_me(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function QM(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function EO(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Kve=typeof WeakMap=="function"?WeakMap:Map;function Ate(n,e,t){t=wd(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){l2||(l2=!0,PO=i),EO(n,e)},t}function Ote(n,e,t){t=wd(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){EO(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){EO(n,e),typeof i!="function"&&(sf===null?sf=new Set([this]):sf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function IW(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new Kve;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=o0e.bind(null,n,e,t),e.then(n,n))}function DW(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function MW(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=wd(-1,1),e.tag=2,rf(t,e,1))),t.lanes|=1),n)}var qve=Ud.ReactCurrentOwner,Xo=!1;function yo(n,e,t,i){e.child=n===null?ute(e,null,t,i):n1(e,n.child,t,i)}function RW(n,e,t,i,r){t=t.render;var s=e.ref;return m0(e,r),i=Z9(n,e,t,i,s,r),t=X9(),n!==null&&!Xo?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Od(n,e,r)):(qi&&t&&B9(e),e.flags|=1,yo(n,e,i,r),e.child)}function AW(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!aF(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Pte(n,e,s,i,r)):(n=Kk(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:hy,t(o,i)&&n.ref===e.ref)return Od(n,e,r)}return e.flags|=1,n=af(s,i),n.ref=e.ref,n.return=e,e.child=n}function Pte(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(hy(s,i)&&n.ref===e.ref)if(Xo=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Xo=!0);else return e.lanes=n.lanes,Od(n,e,r)}return LO(n,e,t,i,r)}function Fte(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vi(xv,ya),ya|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Vi(xv,ya),ya|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Vi(xv,ya),ya|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Vi(xv,ya),ya|=i;return yo(n,e,r,t),e.child}function Bte(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function LO(n,e,t,i,r){var s=na(t)?Rp:ao.current;return s=e1(e,s),m0(e,r),t=Z9(n,e,t,i,s,r),i=X9(),n!==null&&!Xo?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Od(n,e,r)):(qi&&i&&B9(e),e.flags|=1,yo(n,e,t,r),e.child)}function OW(n,e,t,i,r){if(na(t)){var s=!0;QE(e)}else s=!1;if(m0(e,r),e.stateNode===null)$k(n,e),Rte(e,t,i),kO(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=pl(c):(c=na(t)?Rp:ao.current,c=e1(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&TW(e,o,i,c),gh=!1;var h=e.memoizedState;o.state=h,i2(e,i,o,r),l=e.memoizedState,a!==i||h!==l||ta.current||gh?(typeof u=="function"&&(xO(e,t,u,i),l=e.memoizedState),(a=gh||NW(e,t,a,i,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,hte(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Vl(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=pl(l):(l=na(t)?Rp:ao.current,l=e1(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&TW(e,o,i,l),gh=!1,h=e.memoizedState,o.state=h,i2(e,i,o,r);var g=e.memoizedState;a!==d||h!==g||ta.current||gh?(typeof f=="function"&&(xO(e,t,f,i),g=e.memoizedState),(c=gh||NW(e,t,c,i,h,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return NO(n,e,t,i,s,r)}function NO(n,e,t,i,r,s){Bte(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&CW(e,t,!1),Od(n,e,s);i=e.stateNode,qve.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=n1(e,n.child,null,s),e.child=n1(e,null,a,s)):yo(n,e,a,s),e.memoizedState=i.state,r&&CW(e,t,!0),e.child}function Hte(n){var e=n.stateNode;e.pendingContext?_W(n,e.pendingContext,e.pendingContext!==e.context):e.context&&_W(n,e.context,!1),K9(n,e.containerInfo)}function PW(n,e,t,i,r){return t1(),V9(r),e.flags|=256,yo(n,e,t,i),e.child}var TO={dehydrated:null,treeContext:null,retryLane:0};function IO(n){return{baseLanes:n,cachePool:null,transitions:null}}function Vte(n,e,t){var i=e.pendingProps,r=Qi.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Vi(Qi,r&1),n===null)return wO(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=_I(o,i,0,null),n=ep(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=IO(t),e.memoizedState=TO,n):eF(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Gve(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=af(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=af(a,s):(s=ep(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?IO(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=TO,i}return s=n.child,n=s.sibling,i=af(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function eF(n,e){return e=_I({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function qS(n,e,t,i){return i!==null&&V9(i),n1(e,n.child,null,t),n=eF(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Gve(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=QM(Error(ot(422))),qS(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=_I({mode:"visible",children:i.children},r,0,null),s=ep(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&n1(e,n.child,null,o),e.child.memoizedState=IO(o),e.memoizedState=TO,s);if(!(e.mode&1))return qS(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ot(419)),i=QM(s,i,void 0),qS(n,e,o,i)}if(a=(o&n.childLanes)!==0,Xo||a){if(i=gs,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ad(n,r),sc(i,n,r,-1))}return oF(),i=QM(Error(ot(421))),qS(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=a0e.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Ea=nf(r.nextSibling),Da=e,qi=!0,Kl=null,n!==null&&(Ja[el++]=dd,Ja[el++]=hd,Ja[el++]=Ap,dd=n.id,hd=n.overflow,Ap=e),e=eF(e,i.children),e.flags|=4096,e)}function FW(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),SO(n.return,e,t)}function JM(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function zte(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(yo(n,e,i.children,t),i=Qi.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&FW(n,t,e);else if(n.tag===19)FW(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Vi(Qi,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&r2(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),JM(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&r2(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}JM(e,!0,t,null,s);break;case"together":JM(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $k(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Od(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Pp|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ot(153));if(e.child!==null){for(n=e.child,t=af(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=af(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Yve(n,e,t){switch(e.tag){case 3:Hte(e),t1();break;case 5:fte(e);break;case 1:na(e.type)&&QE(e);break;case 4:K9(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Vi(t2,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Vi(Qi,Qi.current&1),e.flags|=128,null):t&e.child.childLanes?Vte(n,e,t):(Vi(Qi,Qi.current&1),n=Od(n,e,t),n!==null?n.sibling:null);Vi(Qi,Qi.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return zte(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Vi(Qi,Qi.current),i)break;return null;case 22:case 23:return e.lanes=0,Fte(n,e,t)}return Od(n,e,t)}var Wte,DO,$te,Ute;Wte=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};DO=function(){};$te=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Vg(au.current);var s=null;switch(t){case"input":r=JA(n,r),i=JA(n,i),s=[];break;case"select":r=sr({},r,{value:void 0}),i=sr({},i,{value:void 0}),s=[];break;case"textarea":r=nO(n,r),i=nO(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=ZE)}rO(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sy.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sy.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&$i("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Ute=function(n,e,t,i){t!==i&&(e.flags|=4)};function Ab(n,e){if(!qi)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Gs(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function Zve(n,e,t){var i=e.pendingProps;switch(H9(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(e),null;case 1:return na(e.type)&&XE(),Gs(e),null;case 3:return i=e.stateNode,i1(),Ui(ta),Ui(ao),G9(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(jS(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kl!==null&&(HO(Kl),Kl=null))),DO(n,e),Gs(e),null;case 5:q9(e);var r=Vg(vy.current);if(t=e.type,n!==null&&e.stateNode!=null)$te(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ot(166));return Gs(e),null}if(n=Vg(au.current),jS(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[eu]=e,i[py]=s,n=(e.mode&1)!==0,t){case"dialog":$i("cancel",i),$i("close",i);break;case"iframe":case"object":case"embed":$i("load",i);break;case"video":case"audio":for(r=0;r<y_.length;r++)$i(y_[r],i);break;case"source":$i("error",i);break;case"img":case"image":case"link":$i("error",i),$i("load",i);break;case"details":$i("toggle",i);break;case"input":Kz(i,s),$i("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},$i("invalid",i);break;case"textarea":Gz(i,s),$i("invalid",i)}rO(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&US(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&US(i.textContent,a,n),r=["children",""+a]):sy.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&$i("scroll",i)}switch(t){case"input":PS(i),qz(i,s,!0);break;case"textarea":PS(i),Yz(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=ZE)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=bee(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[eu]=e,n[py]=i,Wte(n,e,!1,!1),e.stateNode=n;e:{switch(o=sO(t,i),t){case"dialog":$i("cancel",n),$i("close",n),r=i;break;case"iframe":case"object":case"embed":$i("load",n),r=i;break;case"video":case"audio":for(r=0;r<y_.length;r++)$i(y_[r],n);r=i;break;case"source":$i("error",n),r=i;break;case"img":case"image":case"link":$i("error",n),$i("load",n),r=i;break;case"details":$i("toggle",n),r=i;break;case"input":Kz(n,i),r=JA(n,i),$i("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=sr({},i,{value:void 0}),$i("invalid",n);break;case"textarea":Gz(n,i),r=nO(n,i),$i("invalid",n);break;default:r=i}rO(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?yee(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_ee(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&oy(n,l):typeof l=="number"&&oy(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sy.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$i("scroll",n):l!=null&&x9(n,s,l,o))}switch(t){case"input":PS(n),qz(n,i,!1);break;case"textarea":PS(n),Yz(n);break;case"option":i.value!=null&&n.setAttribute("value",""+bf(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?h0(n,!!i.multiple,s,!1):i.defaultValue!=null&&h0(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=ZE)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gs(e),null;case 6:if(n&&e.stateNode!=null)Ute(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ot(166));if(t=Vg(vy.current),Vg(au.current),jS(e)){if(i=e.stateNode,t=e.memoizedProps,i[eu]=e,(s=i.nodeValue!==t)&&(n=Da,n!==null))switch(n.tag){case 3:US(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&US(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[eu]=e,e.stateNode=i}return Gs(e),null;case 13:if(Ui(Qi),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(qi&&Ea!==null&&e.mode&1&&!(e.flags&128))lte(),t1(),e.flags|=98560,s=!1;else if(s=jS(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(ot(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ot(317));s[eu]=e}else t1(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gs(e),s=!1}else Kl!==null&&(HO(Kl),Kl=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Qi.current&1?qr===0&&(qr=3):oF())),e.updateQueue!==null&&(e.flags|=4),Gs(e),null);case 4:return i1(),DO(n,e),n===null&&fy(e.stateNode.containerInfo),Gs(e),null;case 10:return $9(e.type._context),Gs(e),null;case 17:return na(e.type)&&XE(),Gs(e),null;case 19:if(Ui(Qi),s=e.memoizedState,s===null)return Gs(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Ab(s,!1);else{if(qr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=r2(n),o!==null){for(e.flags|=128,Ab(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Vi(Qi,Qi.current&1|2),e.child}n=n.sibling}s.tail!==null&&wr()>s1&&(e.flags|=128,i=!0,Ab(s,!1),e.lanes=4194304)}else{if(!i)if(n=r2(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ab(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!qi)return Gs(e),null}else 2*wr()-s.renderingStartTime>s1&&t!==1073741824&&(e.flags|=128,i=!0,Ab(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wr(),e.sibling=null,t=Qi.current,Vi(Qi,i?t&1|2:t&1),e):(Gs(e),null);case 22:case 23:return sF(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ya&1073741824&&(Gs(e),e.subtreeFlags&6&&(e.flags|=8192)):Gs(e),null;case 24:return null;case 25:return null}throw Error(ot(156,e.tag))}function Xve(n,e){switch(H9(e),e.tag){case 1:return na(e.type)&&XE(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return i1(),Ui(ta),Ui(ao),G9(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return q9(e),null;case 13:if(Ui(Qi),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ot(340));t1()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ui(Qi),null;case 4:return i1(),null;case 10:return $9(e.type._context),null;case 22:case 23:return sF(),null;case 24:return null;default:return null}}var GS=!1,Js=!1,Qve=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function Sv(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){dr(n,e,i)}else t.current=null}function MO(n,e,t){try{t()}catch(i){dr(n,e,i)}}var BW=!1;function Jve(n,e){if(pO=qE,n=Yee(),F9(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=n,h=null;t:for(;;){for(var f;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===n)break t;if(h===t&&++c===r&&(a=o),h===s&&++u===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(mO={focusedElem:n,selectionRange:t},qE=!1,Tt=e;Tt!==null;)if(e=Tt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Tt=n;else for(;Tt!==null;){e=Tt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,v=g.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?p:Vl(e.type,p),v);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(C){dr(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,Tt=n;break}Tt=e.return}return g=BW,BW=!1,g}function j_(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&MO(e,t,s)}r=r.next}while(r!==i)}}function vI(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function RO(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function jte(n){var e=n.alternate;e!==null&&(n.alternate=null,jte(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[eu],delete e[py],delete e[_O],delete e[Ove],delete e[Pve])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Kte(n){return n.tag===5||n.tag===3||n.tag===4}function HW(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Kte(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function AO(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ZE));else if(i!==4&&(n=n.child,n!==null))for(AO(n,e,t),n=n.sibling;n!==null;)AO(n,e,t),n=n.sibling}function OO(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(OO(n,e,t),n=n.sibling;n!==null;)OO(n,e,t),n=n.sibling}var Es=null,$l=!1;function nh(n,e,t){for(t=t.child;t!==null;)qte(n,e,t),t=t.sibling}function qte(n,e,t){if(ou&&typeof ou.onCommitFiberUnmount=="function")try{ou.onCommitFiberUnmount(cI,t)}catch{}switch(t.tag){case 5:Js||Sv(t,e);case 6:var i=Es,r=$l;Es=null,nh(n,e,t),Es=i,$l=r,Es!==null&&($l?(n=Es,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Es.removeChild(t.stateNode));break;case 18:Es!==null&&($l?(n=Es,t=t.stateNode,n.nodeType===8?KM(n.parentNode,t):n.nodeType===1&&KM(n,t),uy(n)):KM(Es,t.stateNode));break;case 4:i=Es,r=$l,Es=t.stateNode.containerInfo,$l=!0,nh(n,e,t),Es=i,$l=r;break;case 0:case 11:case 14:case 15:if(!Js&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&MO(t,e,o),r=r.next}while(r!==i)}nh(n,e,t);break;case 1:if(!Js&&(Sv(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){dr(t,e,a)}nh(n,e,t);break;case 21:nh(n,e,t);break;case 22:t.mode&1?(Js=(i=Js)||t.memoizedState!==null,nh(n,e,t),Js=i):nh(n,e,t);break;default:nh(n,e,t)}}function VW(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Qve),e.forEach(function(i){var r=l0e.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Il(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Es=a.stateNode,$l=!1;break e;case 3:Es=a.stateNode.containerInfo,$l=!0;break e;case 4:Es=a.stateNode.containerInfo,$l=!0;break e}a=a.return}if(Es===null)throw Error(ot(160));qte(s,o,r),Es=null,$l=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){dr(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gte(e,n),e=e.sibling}function Gte(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Il(e,n),Ic(n),i&4){try{j_(3,n,n.return),vI(3,n)}catch(p){dr(n,n.return,p)}try{j_(5,n,n.return)}catch(p){dr(n,n.return,p)}}break;case 1:Il(e,n),Ic(n),i&512&&t!==null&&Sv(t,t.return);break;case 5:if(Il(e,n),Ic(n),i&512&&t!==null&&Sv(t,t.return),n.flags&32){var r=n.stateNode;try{oy(r,"")}catch(p){dr(n,n.return,p)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&mee(r,s),sO(a,o);var c=sO(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?yee(r,d):u==="dangerouslySetInnerHTML"?_ee(r,d):u==="children"?oy(r,d):x9(r,u,d,c)}switch(a){case"input":eO(r,s);break;case"textarea":vee(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?h0(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?h0(r,!!s.multiple,s.defaultValue,!0):h0(r,!!s.multiple,s.multiple?[]:"",!1))}r[py]=s}catch(p){dr(n,n.return,p)}}break;case 6:if(Il(e,n),Ic(n),i&4){if(n.stateNode===null)throw Error(ot(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(p){dr(n,n.return,p)}}break;case 3:if(Il(e,n),Ic(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{uy(e.containerInfo)}catch(p){dr(n,n.return,p)}break;case 4:Il(e,n),Ic(n);break;case 13:Il(e,n),Ic(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(iF=wr())),i&4&&VW(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Js=(c=Js)||u,Il(e,n),Js=c):Il(e,n),Ic(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Tt=n,u=n.child;u!==null;){for(d=Tt=u;Tt!==null;){switch(h=Tt,f=h.child,h.tag){case 0:case 11:case 14:case 15:j_(4,h,h.return);break;case 1:Sv(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(p){dr(i,t,p)}}break;case 5:Sv(h,h.return);break;case 22:if(h.memoizedState!==null){WW(d);continue}}f!==null?(f.return=h,Tt=f):WW(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Cee("display",o))}catch(p){dr(n,n.return,p)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(p){dr(n,n.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Il(e,n),Ic(n),i&4&&VW(n);break;case 21:break;default:Il(e,n),Ic(n)}}function Ic(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Kte(t)){var i=t;break e}t=t.return}throw Error(ot(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(oy(r,""),i.flags&=-33);var s=HW(n);OO(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=HW(n);AO(n,a,o);break;default:throw Error(ot(161))}}catch(l){dr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function e0e(n,e,t){Tt=n,Yte(n)}function Yte(n,e,t){for(var i=(n.mode&1)!==0;Tt!==null;){var r=Tt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||GS;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Js;a=GS;var c=Js;if(GS=o,(Js=l)&&!c)for(Tt=r;Tt!==null;)o=Tt,l=o.child,o.tag===22&&o.memoizedState!==null?$W(r):l!==null?(l.return=o,Tt=l):$W(r);for(;s!==null;)Tt=s,Yte(s),s=s.sibling;Tt=r,GS=a,Js=c}zW(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Tt=s):zW(n)}}function zW(n){for(;Tt!==null;){var e=Tt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Js||vI(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Js)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Vl(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&kW(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}kW(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&uy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ot(163))}Js||e.flags&512&&RO(e)}catch(h){dr(e,e.return,h)}}if(e===n){Tt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Tt=t;break}Tt=e.return}}function WW(n){for(;Tt!==null;){var e=Tt;if(e===n){Tt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Tt=t;break}Tt=e.return}}function $W(n){for(;Tt!==null;){var e=Tt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{vI(4,e)}catch(l){dr(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){dr(e,r,l)}}var s=e.return;try{RO(e)}catch(l){dr(e,s,l)}break;case 5:var o=e.return;try{RO(e)}catch(l){dr(e,o,l)}}}catch(l){dr(e,e.return,l)}if(e===n){Tt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Tt=a;break}Tt=e.return}}var t0e=Math.ceil,a2=Ud.ReactCurrentDispatcher,tF=Ud.ReactCurrentOwner,ul=Ud.ReactCurrentBatchConfig,li=0,gs=null,Pr=null,As=0,ya=0,xv=Pf(0),qr=0,yy=null,Pp=0,bI=0,nF=0,K_=null,Ko=null,iF=0,s1=1/0,$u=null,l2=!1,PO=null,sf=null,YS=!1,Ph=null,c2=0,q_=0,FO=null,Uk=-1,jk=0;function Lo(){return li&6?wr():Uk!==-1?Uk:Uk=wr()}function of(n){return n.mode&1?li&2&&As!==0?As&-As:Bve.transition!==null?(jk===0&&(jk=Ree()),jk):(n=_i,n!==0||(n=window.event,n=n===void 0?16:Vee(n.type)),n):1}function sc(n,e,t,i){if(50<q_)throw q_=0,FO=null,Error(ot(185));Fw(n,t,i),(!(li&2)||n!==gs)&&(n===gs&&(!(li&2)&&(bI|=t),qr===4&&kh(n,As)),ia(n,i),t===1&&li===0&&!(e.mode&1)&&(s1=wr()+500,gI&&Ff()))}function ia(n,e){var t=n.callbackNode;Bme(n,e);var i=KE(n,n===gs?As:0);if(i===0)t!==null&&Qz(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&Qz(t),e===1)n.tag===0?Fve(UW.bind(null,n)):ste(UW.bind(null,n)),Rve(function(){!(li&6)&&Ff()}),t=null;else{switch(Aee(i)){case 1:t=T9;break;case 4:t=Dee;break;case 16:t=jE;break;case 536870912:t=Mee;break;default:t=jE}t=ine(t,Zte.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Zte(n,e){if(Uk=-1,jk=0,li&6)throw Error(ot(327));var t=n.callbackNode;if(v0()&&n.callbackNode!==t)return null;var i=KE(n,n===gs?As:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=u2(n,i);else{e=i;var r=li;li|=2;var s=Qte();(gs!==n||As!==e)&&($u=null,s1=wr()+500,Jg(n,e));do try{r0e();break}catch(a){Xte(n,a)}while(!0);W9(),a2.current=s,li=r,Pr!==null?e=0:(gs=null,As=0,e=qr)}if(e!==0){if(e===2&&(r=uO(n),r!==0&&(i=r,e=BO(n,r))),e===1)throw t=yy,Jg(n,0),kh(n,i),ia(n,wr()),t;if(e===6)kh(n,i);else{if(r=n.current.alternate,!(i&30)&&!n0e(r)&&(e=u2(n,i),e===2&&(s=uO(n),s!==0&&(i=s,e=BO(n,s))),e===1))throw t=yy,Jg(n,0),kh(n,i),ia(n,wr()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(ot(345));case 2:og(n,Ko,$u);break;case 3:if(kh(n,i),(i&130023424)===i&&(e=iF+500-wr(),10<e)){if(KE(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Lo(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=bO(og.bind(null,n,Ko,$u),e);break}og(n,Ko,$u);break;case 4:if(kh(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-rc(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=wr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*t0e(i/1960))-i,10<i){n.timeoutHandle=bO(og.bind(null,n,Ko,$u),i);break}og(n,Ko,$u);break;case 5:og(n,Ko,$u);break;default:throw Error(ot(329))}}}return ia(n,wr()),n.callbackNode===t?Zte.bind(null,n):null}function BO(n,e){var t=K_;return n.current.memoizedState.isDehydrated&&(Jg(n,e).flags|=256),n=u2(n,e),n!==2&&(e=Ko,Ko=t,e!==null&&HO(e)),n}function HO(n){Ko===null?Ko=n:Ko.push.apply(Ko,n)}function n0e(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!cc(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kh(n,e){for(e&=~nF,e&=~bI,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-rc(e),i=1<<t;n[t]=-1,e&=~i}}function UW(n){if(li&6)throw Error(ot(327));v0();var e=KE(n,0);if(!(e&1))return ia(n,wr()),null;var t=u2(n,e);if(n.tag!==0&&t===2){var i=uO(n);i!==0&&(e=i,t=BO(n,i))}if(t===1)throw t=yy,Jg(n,0),kh(n,e),ia(n,wr()),t;if(t===6)throw Error(ot(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,og(n,Ko,$u),ia(n,wr()),null}function rF(n,e){var t=li;li|=1;try{return n(e)}finally{li=t,li===0&&(s1=wr()+500,gI&&Ff())}}function Fp(n){Ph!==null&&Ph.tag===0&&!(li&6)&&v0();var e=li;li|=1;var t=ul.transition,i=_i;try{if(ul.transition=null,_i=1,n)return n()}finally{_i=i,ul.transition=t,li=e,!(li&6)&&Ff()}}function sF(){ya=xv.current,Ui(xv)}function Jg(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Mve(t)),Pr!==null)for(t=Pr.return;t!==null;){var i=t;switch(H9(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&XE();break;case 3:i1(),Ui(ta),Ui(ao),G9();break;case 5:q9(i);break;case 4:i1();break;case 13:Ui(Qi);break;case 19:Ui(Qi);break;case 10:$9(i.type._context);break;case 22:case 23:sF()}t=t.return}if(gs=n,Pr=n=af(n.current,null),As=ya=e,qr=0,yy=null,nF=bI=Pp=0,Ko=K_=null,Hg!==null){for(e=0;e<Hg.length;e++)if(t=Hg[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Hg=null}return n}function Xte(n,e){do{var t=Pr;try{if(W9(),zk.current=o2,s2){for(var i=ir.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}s2=!1}if(Op=0,as=jr=ir=null,U_=!1,by=0,tF.current=null,t===null||t.return===null){qr=1,yy=e,Pr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=As,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=DW(o);if(f!==null){f.flags&=-257,MW(f,o,a,s,e),f.mode&1&&IW(s,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var p=new Set;p.add(l),e.updateQueue=p}else g.add(l);break e}else{if(!(e&1)){IW(s,c,e),oF();break e}l=Error(ot(426))}}else if(qi&&a.mode&1){var v=DW(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),MW(v,o,a,s,e),V9(r1(l,a));break e}}s=l=r1(l,a),qr!==4&&(qr=2),K_===null?K_=[s]:K_.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=Ate(s,l,e);xW(s,b);break e;case 1:a=l;var _=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(sf===null||!sf.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=Ote(s,a,e);xW(s,C);break e}}s=s.return}while(s!==null)}ene(t)}catch(w){e=w,Pr===t&&t!==null&&(Pr=t=t.return);continue}break}while(!0)}function Qte(){var n=a2.current;return a2.current=o2,n===null?o2:n}function oF(){(qr===0||qr===3||qr===2)&&(qr=4),gs===null||!(Pp&268435455)&&!(bI&268435455)||kh(gs,As)}function u2(n,e){var t=li;li|=2;var i=Qte();(gs!==n||As!==e)&&($u=null,Jg(n,e));do try{i0e();break}catch(r){Xte(n,r)}while(!0);if(W9(),li=t,a2.current=i,Pr!==null)throw Error(ot(261));return gs=null,As=0,qr}function i0e(){for(;Pr!==null;)Jte(Pr)}function r0e(){for(;Pr!==null&&!Tme();)Jte(Pr)}function Jte(n){var e=nne(n.alternate,n,ya);n.memoizedProps=n.pendingProps,e===null?ene(n):Pr=e,tF.current=null}function ene(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Xve(t,e),t!==null){t.flags&=32767,Pr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{qr=6,Pr=null;return}}else if(t=Zve(t,e,ya),t!==null){Pr=t;return}if(e=e.sibling,e!==null){Pr=e;return}Pr=e=n}while(e!==null);qr===0&&(qr=5)}function og(n,e,t){var i=_i,r=ul.transition;try{ul.transition=null,_i=1,s0e(n,e,t,i)}finally{ul.transition=r,_i=i}return null}function s0e(n,e,t,i){do v0();while(Ph!==null);if(li&6)throw Error(ot(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ot(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Hme(n,s),n===gs&&(Pr=gs=null,As=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||YS||(YS=!0,ine(jE,function(){return v0(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ul.transition,ul.transition=null;var o=_i;_i=1;var a=li;li|=4,tF.current=null,Jve(n,t),Gte(t,n),kve(mO),qE=!!pO,mO=pO=null,n.current=t,e0e(t),Ime(),li=a,_i=o,ul.transition=s}else n.current=t;if(YS&&(YS=!1,Ph=n,c2=r),s=n.pendingLanes,s===0&&(sf=null),Rme(t.stateNode),ia(n,wr()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(l2)throw l2=!1,n=PO,PO=null,n;return c2&1&&n.tag!==0&&v0(),s=n.pendingLanes,s&1?n===FO?q_++:(q_=0,FO=n):q_=0,Ff(),null}function v0(){if(Ph!==null){var n=Aee(c2),e=ul.transition,t=_i;try{if(ul.transition=null,_i=16>n?16:n,Ph===null)var i=!1;else{if(n=Ph,Ph=null,c2=0,li&6)throw Error(ot(331));var r=li;for(li|=4,Tt=n.current;Tt!==null;){var s=Tt,o=s.child;if(Tt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Tt=c;Tt!==null;){var u=Tt;switch(u.tag){case 0:case 11:case 15:j_(8,u,s)}var d=u.child;if(d!==null)d.return=u,Tt=d;else for(;Tt!==null;){u=Tt;var h=u.sibling,f=u.return;if(jte(u),u===c){Tt=null;break}if(h!==null){h.return=f,Tt=h;break}Tt=f}}}var g=s.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}Tt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Tt=o;else e:for(;Tt!==null;){if(s=Tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:j_(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,Tt=b;break e}Tt=s.return}}var _=n.current;for(Tt=_;Tt!==null;){o=Tt;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,Tt=y;else e:for(o=_;Tt!==null;){if(a=Tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vI(9,a)}}catch(w){dr(a,a.return,w)}if(a===o){Tt=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Tt=C;break e}Tt=a.return}}if(li=r,Ff(),ou&&typeof ou.onPostCommitFiberRoot=="function")try{ou.onPostCommitFiberRoot(cI,n)}catch{}i=!0}return i}finally{_i=t,ul.transition=e}}return!1}function jW(n,e,t){e=r1(t,e),e=Ate(n,e,1),n=rf(n,e,1),e=Lo(),n!==null&&(Fw(n,1,e),ia(n,e))}function dr(n,e,t){if(n.tag===3)jW(n,n,t);else for(;e!==null;){if(e.tag===3){jW(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(sf===null||!sf.has(i))){n=r1(t,n),n=Ote(e,n,1),e=rf(e,n,1),n=Lo(),e!==null&&(Fw(e,1,n),ia(e,n));break}}e=e.return}}function o0e(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Lo(),n.pingedLanes|=n.suspendedLanes&t,gs===n&&(As&t)===t&&(qr===4||qr===3&&(As&130023424)===As&&500>wr()-iF?Jg(n,0):nF|=t),ia(n,e)}function tne(n,e){e===0&&(n.mode&1?(e=HS,HS<<=1,!(HS&130023424)&&(HS=4194304)):e=1);var t=Lo();n=Ad(n,e),n!==null&&(Fw(n,e,t),ia(n,t))}function a0e(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),tne(n,t)}function l0e(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ot(314))}i!==null&&i.delete(e),tne(n,t)}var nne;nne=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ta.current)Xo=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Xo=!1,Yve(n,e,t);Xo=!!(n.flags&131072)}else Xo=!1,qi&&e.flags&1048576&&ote(e,e2,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;$k(n,e),n=e.pendingProps;var r=e1(e,ao.current);m0(e,t),r=Z9(null,e,i,n,r,t);var s=X9();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,na(i)?(s=!0,QE(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,j9(e),r.updater=mI,e.stateNode=r,r._reactInternals=e,kO(e,i,n,t),e=NO(null,e,i,!0,s,t)):(e.tag=0,qi&&s&&B9(e),yo(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch($k(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=u0e(i),n=Vl(i,n),r){case 0:e=LO(null,e,i,n,t);break e;case 1:e=OW(null,e,i,n,t);break e;case 11:e=RW(null,e,i,n,t);break e;case 14:e=AW(null,e,i,Vl(i.type,n),t);break e}throw Error(ot(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vl(i,r),LO(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vl(i,r),OW(n,e,i,r,t);case 3:e:{if(Hte(e),n===null)throw Error(ot(387));i=e.pendingProps,s=e.memoizedState,r=s.element,hte(n,e),i2(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=r1(Error(ot(423)),e),e=PW(n,e,i,t,r);break e}else if(i!==r){r=r1(Error(ot(424)),e),e=PW(n,e,i,t,r);break e}else for(Ea=nf(e.stateNode.containerInfo.firstChild),Da=e,qi=!0,Kl=null,t=ute(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(t1(),i===r){e=Od(n,e,t);break e}yo(n,e,i,t)}e=e.child}return e;case 5:return fte(e),n===null&&wO(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,vO(i,r)?o=null:s!==null&&vO(i,s)&&(e.flags|=32),Bte(n,e),yo(n,e,o,t),e.child;case 6:return n===null&&wO(e),null;case 13:return Vte(n,e,t);case 4:return K9(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=n1(e,null,i,t):yo(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vl(i,r),RW(n,e,i,r,t);case 7:return yo(n,e,e.pendingProps,t),e.child;case 8:return yo(n,e,e.pendingProps.children,t),e.child;case 12:return yo(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Vi(t2,i._currentValue),i._currentValue=o,s!==null)if(cc(s.value,o)){if(s.children===r.children&&!ta.current){e=Od(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=wd(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),SO(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ot(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),SO(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yo(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,m0(e,t),r=pl(r),i=i(r),e.flags|=1,yo(n,e,i,t),e.child;case 14:return i=e.type,r=Vl(i,e.pendingProps),r=Vl(i.type,r),AW(n,e,i,r,t);case 15:return Pte(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vl(i,r),$k(n,e),e.tag=1,na(i)?(n=!0,QE(e)):n=!1,m0(e,t),Rte(e,i,r),kO(e,i,r,t),NO(null,e,i,!0,n,t);case 19:return zte(n,e,t);case 22:return Fte(n,e,t)}throw Error(ot(156,e.tag))};function ine(n,e){return Iee(n,e)}function c0e(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sl(n,e,t,i){return new c0e(n,e,t,i)}function aF(n){return n=n.prototype,!(!n||!n.isReactComponent)}function u0e(n){if(typeof n=="function")return aF(n)?1:0;if(n!=null){if(n=n.$$typeof,n===E9)return 11;if(n===L9)return 14}return 2}function af(n,e){var t=n.alternate;return t===null?(t=sl(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Kk(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")aF(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case gv:return ep(t.children,r,s,e);case k9:o=8,r|=8;break;case YA:return n=sl(12,t,e,r|2),n.elementType=YA,n.lanes=s,n;case ZA:return n=sl(13,t,e,r),n.elementType=ZA,n.lanes=s,n;case XA:return n=sl(19,t,e,r),n.elementType=XA,n.lanes=s,n;case fee:return _I(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case dee:o=10;break e;case hee:o=9;break e;case E9:o=11;break e;case L9:o=14;break e;case fh:o=16,i=null;break e}throw Error(ot(130,n==null?n:typeof n,""))}return e=sl(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function ep(n,e,t,i){return n=sl(7,n,i,e),n.lanes=t,n}function _I(n,e,t,i){return n=sl(22,n,i,e),n.elementType=fee,n.lanes=t,n.stateNode={isHidden:!1},n}function e4(n,e,t){return n=sl(6,n,null,e),n.lanes=t,n}function t4(n,e,t){return e=sl(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function d0e(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=OM(0),this.expirationTimes=OM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=OM(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function lF(n,e,t,i,r,s,o,a,l){return n=new d0e(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=sl(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},j9(s),n}function h0e(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fv,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function rne(n){if(!n)return _f;n=n._reactInternals;e:{if(cm(n)!==n||n.tag!==1)throw Error(ot(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(na(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ot(171))}if(n.tag===1){var t=n.type;if(na(t))return rte(n,t,e)}return e}function sne(n,e,t,i,r,s,o,a,l){return n=lF(t,i,!0,n,r,s,o,a,l),n.context=rne(null),t=n.current,i=Lo(),r=of(t),s=wd(i,r),s.callback=e??null,rf(t,s,r),n.current.lanes=r,Fw(n,r,i),ia(n,i),n}function CI(n,e,t,i){var r=e.current,s=Lo(),o=of(r);return t=rne(t),e.context===null?e.context=t:e.pendingContext=t,e=wd(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=rf(r,e,o),n!==null&&(sc(n,r,o,s),Vk(n,r,o)),o}function d2(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function KW(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function cF(n,e){KW(n,e),(n=n.alternate)&&KW(n,e)}function f0e(){return null}var one=typeof reportError=="function"?reportError:function(n){console.error(n)};function uF(n){this._internalRoot=n}yI.prototype.render=uF.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ot(409));CI(n,e,null,null)};yI.prototype.unmount=uF.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Fp(function(){CI(null,n,null,null)}),e[Rd]=null}};function yI(n){this._internalRoot=n}yI.prototype.unstable_scheduleHydration=function(n){if(n){var e=Fee();n={blockedOn:null,target:n,priority:e};for(var t=0;t<xh.length&&e!==0&&e<xh[t].priority;t++);xh.splice(t,0,n),t===0&&Hee(n)}};function dF(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function wI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function qW(){}function g0e(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=d2(o);s.call(c)}}var o=sne(e,i,n,0,null,!1,!1,"",qW);return n._reactRootContainer=o,n[Rd]=o.current,fy(n.nodeType===8?n.parentNode:n),Fp(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=d2(l);a.call(c)}}var l=lF(n,0,!1,null,null,!1,!1,"",qW);return n._reactRootContainer=l,n[Rd]=l.current,fy(n.nodeType===8?n.parentNode:n),Fp(function(){CI(e,l,t,i)}),l}function SI(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=d2(o);a.call(l)}}CI(e,o,n,r)}else o=g0e(t,e,n,r,i);return d2(o)}Oee=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=C_(e.pendingLanes);t!==0&&(I9(e,t|1),ia(e,wr()),!(li&6)&&(s1=wr()+500,Ff()))}break;case 13:Fp(function(){var i=Ad(n,1);if(i!==null){var r=Lo();sc(i,n,1,r)}}),cF(n,1)}};D9=function(n){if(n.tag===13){var e=Ad(n,134217728);if(e!==null){var t=Lo();sc(e,n,134217728,t)}cF(n,134217728)}};Pee=function(n){if(n.tag===13){var e=of(n),t=Ad(n,e);if(t!==null){var i=Lo();sc(t,n,e,i)}cF(n,e)}};Fee=function(){return _i};Bee=function(n,e){var t=_i;try{return _i=n,e()}finally{_i=t}};aO=function(n,e,t){switch(e){case"input":if(eO(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=fI(i);if(!r)throw Error(ot(90));pee(i),eO(i,r)}}}break;case"textarea":vee(n,t);break;case"select":e=t.value,e!=null&&h0(n,!!t.multiple,e,!1)}};xee=rF;kee=Fp;var p0e={usingClientEntryPoint:!1,Events:[Hw,bv,fI,wee,See,rF]},Ob={findFiberByHostInstance:Bg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m0e={bundleType:Ob.bundleType,version:Ob.version,rendererPackageName:Ob.rendererPackageName,rendererConfig:Ob.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ud.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Nee(n),n===null?null:n.stateNode},findFiberByHostInstance:Ob.findFiberByHostInstance||f0e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ZS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ZS.isDisabled&&ZS.supportsFiber)try{cI=ZS.inject(m0e),ou=ZS}catch{}}Ba.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p0e;Ba.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dF(e))throw Error(ot(200));return h0e(n,e,null,t)};Ba.createRoot=function(n,e){if(!dF(n))throw Error(ot(299));var t=!1,i="",r=one;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=lF(n,1,!1,null,null,t,!1,i,r),n[Rd]=e.current,fy(n.nodeType===8?n.parentNode:n),new uF(e)};Ba.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ot(188)):(n=Object.keys(n).join(","),Error(ot(268,n)));return n=Nee(e),n=n===null?null:n.stateNode,n};Ba.flushSync=function(n){return Fp(n)};Ba.hydrate=function(n,e,t){if(!wI(e))throw Error(ot(200));return SI(null,n,e,!0,t)};Ba.hydrateRoot=function(n,e,t){if(!dF(n))throw Error(ot(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=one;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=sne(e,null,n,1,t??null,r,!1,s,o),n[Rd]=e.current,fy(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new yI(e)};Ba.render=function(n,e,t){if(!wI(e))throw Error(ot(200));return SI(null,n,e,!1,t)};Ba.unmountComponentAtNode=function(n){if(!wI(n))throw Error(ot(40));return n._reactRootContainer?(Fp(function(){SI(null,null,n,!1,function(){n._reactRootContainer=null,n[Rd]=null})}),!0):!1};Ba.unstable_batchedUpdates=rF;Ba.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!wI(t))throw Error(ot(200));if(n==null||n._reactInternals===void 0)throw Error(ot(38));return SI(n,e,t,!1,i)};Ba.version="18.3.1-next-f1338f8080-20240426";function ane(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ane)}catch(n){console.error(n)}}ane(),aee.exports=Ba;var uc=aee.exports;const Pd=Ow(uc),v0e=YJ({__proto__:null,default:Pd},[uc]);var lne,GW=uc;lne=GW.createRoot,GW.hydrateRoot;function J(){return J=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},J.apply(null,arguments)}function Rt(n){"@babel/helpers - typeof";return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(n)}function b0e(n,e){if(Rt(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(Rt(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cne(n){var e=b0e(n,"string");return Rt(e)=="symbol"?e:e+""}function z(n,e,t){return(e=cne(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ys(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function YW(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,cne(i.key),i)}}function ws(n,e,t){return e&&YW(n.prototype,e),t&&YW(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function kt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zw(n,e){if(e&&(Rt(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kt(n)}function Z1(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z1=function(){return!!n})()}function vl(n){return vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vl(n)}function VO(n,e){return VO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},VO(n,e)}function Va(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&VO(n,e)}var une={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(une);var _0e=une.exports;const Ee=Ow(_0e);var C0e=Symbol.for("react.element"),y0e=Symbol.for("react.transitional.element"),w0e=Symbol.for("react.fragment");function dne(n){return n&&Rt(n)==="object"&&(n.$$typeof===C0e||n.$$typeof===y0e)&&n.type===w0e}function gu(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[];return Ue.Children.forEach(n,function(i){i==null&&!e.keepEmpty||(Array.isArray(i)?t=t.concat(gu(i)):dne(i)&&i.props?t=t.concat(gu(i.props.children,e)):t.push(i))}),t}var zO={},S0e=function(e){};function x0e(n,e){}function k0e(n,e){}function E0e(){zO={}}function hne(n,e,t){!e&&!zO[t]&&(n(!1,t),zO[t]=!0)}function ps(n,e){hne(x0e,n,e)}function L0e(n,e){hne(k0e,n,e)}ps.preMessage=S0e;ps.resetWarned=E0e;ps.noteOnce=L0e;function ZW(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ne(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZW(Object(t),!0).forEach(function(i){z(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZW(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function XW(n){return n instanceof HTMLElement||n instanceof SVGElement}function N0e(n){return n&&Rt(n)==="object"&&XW(n.nativeElement)?n.nativeElement:XW(n)?n:null}function G_(n){var e=N0e(n);if(e)return e;if(n instanceof Ue.Component){var t;return(t=Pd.findDOMNode)===null||t===void 0?void 0:t.call(Pd,n)}return null}var fne={exports:{}},Ci={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hF=Symbol.for("react.element"),fF=Symbol.for("react.portal"),xI=Symbol.for("react.fragment"),kI=Symbol.for("react.strict_mode"),EI=Symbol.for("react.profiler"),LI=Symbol.for("react.provider"),NI=Symbol.for("react.context"),T0e=Symbol.for("react.server_context"),TI=Symbol.for("react.forward_ref"),II=Symbol.for("react.suspense"),DI=Symbol.for("react.suspense_list"),MI=Symbol.for("react.memo"),RI=Symbol.for("react.lazy"),I0e=Symbol.for("react.offscreen"),gne;gne=Symbol.for("react.module.reference");function Ll(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case hF:switch(n=n.type,n){case xI:case EI:case kI:case II:case DI:return n;default:switch(n=n&&n.$$typeof,n){case T0e:case NI:case TI:case RI:case MI:case LI:return n;default:return e}}case fF:return e}}}Ci.ContextConsumer=NI;Ci.ContextProvider=LI;Ci.Element=hF;Ci.ForwardRef=TI;Ci.Fragment=xI;Ci.Lazy=RI;Ci.Memo=MI;Ci.Portal=fF;Ci.Profiler=EI;Ci.StrictMode=kI;Ci.Suspense=II;Ci.SuspenseList=DI;Ci.isAsyncMode=function(){return!1};Ci.isConcurrentMode=function(){return!1};Ci.isContextConsumer=function(n){return Ll(n)===NI};Ci.isContextProvider=function(n){return Ll(n)===LI};Ci.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===hF};Ci.isForwardRef=function(n){return Ll(n)===TI};Ci.isFragment=function(n){return Ll(n)===xI};Ci.isLazy=function(n){return Ll(n)===RI};Ci.isMemo=function(n){return Ll(n)===MI};Ci.isPortal=function(n){return Ll(n)===fF};Ci.isProfiler=function(n){return Ll(n)===EI};Ci.isStrictMode=function(n){return Ll(n)===kI};Ci.isSuspense=function(n){return Ll(n)===II};Ci.isSuspenseList=function(n){return Ll(n)===DI};Ci.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===xI||n===EI||n===kI||n===II||n===DI||n===I0e||typeof n=="object"&&n!==null&&(n.$$typeof===RI||n.$$typeof===MI||n.$$typeof===LI||n.$$typeof===NI||n.$$typeof===TI||n.$$typeof===gne||n.getModuleId!==void 0)};Ci.typeOf=Ll;fne.exports=Ci;var n4=fne.exports;function AI(n,e,t){var i=m.useRef({});return(!("value"in i.current)||t(i.current.condition,e))&&(i.current.value=n(),i.current.condition=e),i.current.value}var D0e=Number(m.version.split(".")[0]),pne=function(e,t){typeof e=="function"?e(t):Rt(e)==="object"&&e&&"current"in e&&(e.current=t)},jd=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.filter(Boolean);return r.length<=1?r[0]:function(s){t.forEach(function(o){pne(o,s)})}},Ww=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return AI(function(){return jd.apply(void 0,t)},t,function(r,s){return r.length!==s.length||r.every(function(o,a){return o!==s[a]})})},$w=function(e){var t,i;if(!e)return!1;if(mne(e)&&D0e>=19)return!0;var r=n4.isMemo(e)?e.type.type:e.type;return!(typeof r=="function"&&!((t=r.prototype)!==null&&t!==void 0&&t.render)&&r.$$typeof!==n4.ForwardRef||typeof e=="function"&&!((i=e.prototype)!==null&&i!==void 0&&i.render)&&e.$$typeof!==n4.ForwardRef)};function mne(n){return m.isValidElement(n)&&!dne(n)}var vne=function(e){if(e&&mne(e)){var t=e;return t.props.propertyIsEnumerable("ref")?t.props.ref:t.ref}return null},WO=m.createContext(null);function M0e(n){var e=n.children,t=n.onBatchResize,i=m.useRef(0),r=m.useRef([]),s=m.useContext(WO),o=m.useCallback(function(a,l,c){i.current+=1;var u=i.current;r.current.push({size:a,element:l,data:c}),Promise.resolve().then(function(){u===i.current&&(t==null||t(r.current),r.current=[])}),s==null||s(a,l,c)},[t,s]);return m.createElement(WO.Provider,{value:o},e)}var bne=function(){if(typeof Map<"u")return Map;function n(e,t){var i=-1;return e.some(function(r,s){return r[0]===t?(i=s,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var i=n(this.__entries__,t),r=this.__entries__[i];return r&&r[1]},e.prototype.set=function(t,i){var r=n(this.__entries__,t);~r?this.__entries__[r][1]=i:this.__entries__.push([t,i])},e.prototype.delete=function(t){var i=this.__entries__,r=n(i,t);~r&&i.splice(r,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,i){i===void 0&&(i=null);for(var r=0,s=this.__entries__;r<s.length;r++){var o=s[r];t.call(i,o[1],o[0])}},e}()}(),$O=typeof window<"u"&&typeof document<"u"&&window.document===document,h2=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),R0e=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(h2):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),A0e=2;function O0e(n,e){var t=!1,i=!1,r=0;function s(){t&&(t=!1,n()),i&&a()}function o(){R0e(s)}function a(){var l=Date.now();if(t){if(l-r<A0e)return;i=!0}else t=!0,i=!1,setTimeout(o,e);r=l}return a}var P0e=20,F0e=["top","right","bottom","left","width","height","size","weight"],B0e=typeof MutationObserver<"u",H0e=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=O0e(this.refresh.bind(this),P0e)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!$O||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),B0e?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!$O||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,i=t===void 0?"":t,r=F0e.some(function(s){return!!~i.indexOf(s)});r&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),_ne=function(n,e){for(var t=0,i=Object.keys(e);t<i.length;t++){var r=i[t];Object.defineProperty(n,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return n},o1=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||h2},Cne=OI(0,0,0,0);function f2(n){return parseFloat(n)||0}function QW(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(i,r){var s=n["border-"+r+"-width"];return i+f2(s)},0)}function V0e(n){for(var e=["top","right","bottom","left"],t={},i=0,r=e;i<r.length;i++){var s=r[i],o=n["padding-"+s];t[s]=f2(o)}return t}function z0e(n){var e=n.getBBox();return OI(0,0,e.width,e.height)}function W0e(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return Cne;var i=o1(n).getComputedStyle(n),r=V0e(i),s=r.left+r.right,o=r.top+r.bottom,a=f2(i.width),l=f2(i.height);if(i.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=QW(i,"left","right")+s),Math.round(l+o)!==t&&(l-=QW(i,"top","bottom")+o)),!U0e(n)){var c=Math.round(a+s)-e,u=Math.round(l+o)-t;Math.abs(c)!==1&&(a-=c),Math.abs(u)!==1&&(l-=u)}return OI(r.left,r.top,a,l)}var $0e=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof o1(n).SVGGraphicsElement}:function(n){return n instanceof o1(n).SVGElement&&typeof n.getBBox=="function"}}();function U0e(n){return n===o1(n).document.documentElement}function j0e(n){return $O?$0e(n)?z0e(n):W0e(n):Cne}function K0e(n){var e=n.x,t=n.y,i=n.width,r=n.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return _ne(o,{x:e,y:t,width:i,height:r,top:t,right:e+i,bottom:r+t,left:e}),o}function OI(n,e,t,i){return{x:n,y:e,width:t,height:i}}var q0e=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=OI(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=j0e(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),G0e=function(){function n(e,t){var i=K0e(t);_ne(this,{target:e,contentRect:i})}return n}(),Y0e=function(){function n(e,t,i){if(this.activeObservations_=[],this.observations_=new bne,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof o1(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new q0e(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof o1(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(i){return new G0e(i.target,i.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),yne=typeof WeakMap<"u"?new WeakMap:new bne,wne=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=H0e.getInstance(),i=new Y0e(e,t,this);yne.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){wne.prototype[n]=function(){var e;return(e=yne.get(this))[n].apply(e,arguments)}});var Sne=function(){return typeof h2.ResizeObserver<"u"?h2.ResizeObserver:wne}(),Fh=new Map;function Z0e(n){n.forEach(function(e){var t,i=e.target;(t=Fh.get(i))===null||t===void 0||t.forEach(function(r){return r(i)})})}var xne=new Sne(Z0e);function X0e(n,e){Fh.has(n)||(Fh.set(n,new Set),xne.observe(n)),Fh.get(n).add(e)}function Q0e(n,e){Fh.has(n)&&(Fh.get(n).delete(e),Fh.get(n).size||(xne.unobserve(n),Fh.delete(n)))}function Kd(n){var e=Z1();return function(){var t,i=vl(n);if(e){var r=vl(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return zw(this,t)}}var J0e=function(n){Va(t,n);var e=Kd(t);function t(){return ys(this,t),e.apply(this,arguments)}return ws(t,[{key:"render",value:function(){return this.props.children}}]),t}(m.Component);function e1e(n,e){var t=n.children,i=n.disabled,r=m.useRef(null),s=m.useRef(null),o=m.useContext(WO),a=typeof t=="function",l=a?t(r):t,c=m.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),u=!a&&m.isValidElement(l)&&$w(l),d=u?vne(l):null,h=Ww(d,r),f=function(){var b;return G_(r.current)||(r.current&&Rt(r.current)==="object"?G_((b=r.current)===null||b===void 0?void 0:b.nativeElement):null)||G_(s.current)};m.useImperativeHandle(e,function(){return f()});var g=m.useRef(n);g.current=n;var p=m.useCallback(function(v){var b=g.current,_=b.onResize,y=b.data,C=v.getBoundingClientRect(),w=C.width,x=C.height,k=v.offsetWidth,E=v.offsetHeight,L=Math.floor(w),M=Math.floor(x);if(c.current.width!==L||c.current.height!==M||c.current.offsetWidth!==k||c.current.offsetHeight!==E){var D={width:L,height:M,offsetWidth:k,offsetHeight:E};c.current=D;var O=k===Math.round(w)?w:k,A=E===Math.round(x)?x:E,R=ne(ne({},D),{},{offsetWidth:O,offsetHeight:A});o==null||o(R,v,y),_&&Promise.resolve().then(function(){_(R,v)})}},[]);return m.useEffect(function(){var v=f();return v&&!i&&X0e(v,p),function(){return Q0e(v,p)}},[r.current,i]),m.createElement(J0e,{ref:s},u?m.cloneElement(l,{ref:h}):l)}var t1e=m.forwardRef(e1e),n1e="rc-observer-key";function i1e(n,e){var t=n.children,i=typeof t=="function"?[t]:gu(t);return i.map(function(r,s){var o=(r==null?void 0:r.key)||"".concat(n1e,"-").concat(s);return m.createElement(t1e,J({},n,{key:o,ref:s===0?e:void 0}),r)})}var Cf=m.forwardRef(i1e);Cf.Collection=M0e;function fo(n,e){var t=Object.assign({},n);return Array.isArray(e)&&e.forEach(function(i){delete t[i]}),t}var gF=m.createContext({});function UO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function r1e(n){if(Array.isArray(n))return UO(n)}function kne(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function pF(n,e){if(n){if(typeof n=="string")return UO(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?UO(n,e):void 0}}function s1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Et(n){return r1e(n)||kne(n)||pF(n)||s1e()}function Ene(n){if(Array.isArray(n))return n}function Lne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nne(n){return Ene(n)||kne(n)||pF(n)||Lne()}function ec(n,e){for(var t=n,i=0;i<e.length;i+=1){if(t==null)return;t=t[e[i]]}return t}function Tne(n,e,t,i){if(!e.length)return t;var r=Nne(e),s=r[0],o=r.slice(1),a;return!n&&typeof s=="number"?a=[]:Array.isArray(n)?a=Et(n):a=ne({},n),i&&t===void 0&&o.length===1?delete a[s][o[0]]:a[s]=Tne(a[s],o,t,i),a}function Ul(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&i&&t===void 0&&!ec(n,e.slice(0,-1))?n:Tne(n,e,t,i)}function o1e(n){return Rt(n)==="object"&&n!==null&&Object.getPrototypeOf(n)===Object.prototype}function JW(n){return Array.isArray(n)?[]:{}}var a1e=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function kv(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=JW(e[0]);return e.forEach(function(r){function s(o,a){var l=new Set(a),c=ec(r,o),u=Array.isArray(c);if(u||o1e(c)){if(!l.has(c)){l.add(c);var d=ec(i,o);u?i=Ul(i,o,[]):(!d||Rt(d)!=="object")&&(i=Ul(i,o,JW(c))),a1e(c).forEach(function(h){s([].concat(Et(o),[h]),l)})}}else i=Ul(i,o,c)}s([])}),i}const l1e=m.createContext(void 0),c1e={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var u1e={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},Ine={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},e$={lang:J({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},u1e),timePickerLocale:J({},Ine)},pa="${label} is not a valid ${type}",yf={locale:"en",Pagination:c1e,DatePicker:e$,TimePicker:Ine,Calendar:e$,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:pa,method:pa,array:pa,object:pa,number:pa,date:pa,boolean:pa,integer:pa,float:pa,regexp:pa,email:pa,url:pa,hex:pa},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},qk=J({},yf.Modal);function t$(n){n?qk=J(J({},qk),n):qk=J({},yf.Modal)}function Dne(){return qk}var Mne=m.createContext(void 0),d1e="internalMark",h1e=function(e){var t=e.locale,i=t===void 0?{}:t,r=e.children;e._ANT_MARK__,m.useEffect(function(){return t$(i&&i.Modal),function(){t$()}},[i]);var s=m.useMemo(function(){return J(J({},i),{exist:!0})},[i]);return m.createElement(Mne.Provider,{value:s},r)},PI=function(e){var t=e.componentName,i=t===void 0?"global":t,r=e.defaultLocale,s=e.children,o=m.useContext(Mne),a=m.useMemo(function(){var c,u=r||yf[i],d=(c=o==null?void 0:o[i])!==null&&c!==void 0?c:{};return J(J({},u instanceof Function?u():u),d||{})},[i,r,o]),l=m.useMemo(function(){var c=o&&o.locale;return o&&o.exist&&!c?yf.locale:c},[o]);return s(a,l,o)},f1e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function g1e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function Ce(n,e){return Ene(n)||g1e(n,e)||pF(n,e)||Lne()}function p1e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function sn(n,e){if(n==null)return{};var t,i,r=p1e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Os(n,e){m1e(n)&&(n="100%");var t=v1e(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function XS(n){return Math.min(1,Math.max(0,n))}function m1e(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function v1e(n){return typeof n=="string"&&n.indexOf("%")!==-1}function Rne(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function QS(n){return n<=1?"".concat(Number(n)*100,"%"):n}function zg(n){return n.length===1?"0"+n:String(n)}function b1e(n,e,t){return{r:Os(n,255)*255,g:Os(e,255)*255,b:Os(t,255)*255}}function n$(n,e,t){n=Os(n,255),e=Os(e,255),t=Os(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,o=0,a=(i+r)/2;if(i===r)o=0,s=0;else{var l=i-r;switch(o=a>.5?l/(2-i-r):l/(i+r),i){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function i4(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function _1e(n,e,t){var i,r,s;if(n=Os(n,360),e=Os(e,100),t=Os(t,100),e===0)r=t,s=t,i=t;else{var o=t<.5?t*(1+e):t+e-t*e,a=2*t-o;i=i4(a,o,n+1/3),r=i4(a,o,n),s=i4(a,o,n-1/3)}return{r:i*255,g:r*255,b:s*255}}function jO(n,e,t){n=Os(n,255),e=Os(e,255),t=Os(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,o=i,a=i-r,l=i===0?0:a/i;if(i===r)s=0;else{switch(i){case n:s=(e-t)/a+(e<t?6:0);break;case e:s=(t-n)/a+2;break;case t:s=(n-e)/a+4;break}s/=6}return{h:s,s:l,v:o}}function C1e(n,e,t){n=Os(n,360)*6,e=Os(e,100),t=Os(t,100);var i=Math.floor(n),r=n-i,s=t*(1-e),o=t*(1-r*e),a=t*(1-(1-r)*e),l=i%6,c=[t,o,s,s,a,t][l],u=[a,t,t,o,s,s][l],d=[s,s,a,t,t,o][l];return{r:c*255,g:u*255,b:d*255}}function KO(n,e,t,i){var r=[zg(Math.round(n).toString(16)),zg(Math.round(e).toString(16)),zg(Math.round(t).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function y1e(n,e,t,i,r){var s=[zg(Math.round(n).toString(16)),zg(Math.round(e).toString(16)),zg(Math.round(t).toString(16)),zg(w1e(i))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function w1e(n){return Math.round(parseFloat(n)*255).toString(16)}function i$(n){return ba(n)/255}function ba(n){return parseInt(n,16)}function S1e(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var qO={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function nv(n){var e={r:0,g:0,b:0},t=1,i=null,r=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=E1e(n)),typeof n=="object"&&(Du(n.r)&&Du(n.g)&&Du(n.b)?(e=b1e(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Du(n.h)&&Du(n.s)&&Du(n.v)?(i=QS(n.s),r=QS(n.v),e=C1e(n.h,i,r),o=!0,a="hsv"):Du(n.h)&&Du(n.s)&&Du(n.l)&&(i=QS(n.s),s=QS(n.l),e=_1e(n.h,i,s),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=Rne(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var x1e="[-\\+]?\\d+%?",k1e="[-\\+]?\\d*\\.\\d+%?",Bh="(?:".concat(k1e,")|(?:").concat(x1e,")"),r4="[\\s|\\(]+(".concat(Bh,")[,|\\s]+(").concat(Bh,")[,|\\s]+(").concat(Bh,")\\s*\\)?"),s4="[\\s|\\(]+(".concat(Bh,")[,|\\s]+(").concat(Bh,")[,|\\s]+(").concat(Bh,")[,|\\s]+(").concat(Bh,")\\s*\\)?"),Rl={CSS_UNIT:new RegExp(Bh),rgb:new RegExp("rgb"+r4),rgba:new RegExp("rgba"+s4),hsl:new RegExp("hsl"+r4),hsla:new RegExp("hsla"+s4),hsv:new RegExp("hsv"+r4),hsva:new RegExp("hsva"+s4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function E1e(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(qO[n])n=qO[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=Rl.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=Rl.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Rl.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=Rl.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Rl.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=Rl.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Rl.hex8.exec(n),t?{r:ba(t[1]),g:ba(t[2]),b:ba(t[3]),a:i$(t[4]),format:e?"name":"hex8"}:(t=Rl.hex6.exec(n),t?{r:ba(t[1]),g:ba(t[2]),b:ba(t[3]),format:e?"name":"hex"}:(t=Rl.hex4.exec(n),t?{r:ba(t[1]+t[1]),g:ba(t[2]+t[2]),b:ba(t[3]+t[3]),a:i$(t[4]+t[4]),format:e?"name":"hex8"}:(t=Rl.hex3.exec(n),t?{r:ba(t[1]+t[1]),g:ba(t[2]+t[2]),b:ba(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function Du(n){return!!Rl.CSS_UNIT.exec(String(n))}var o4=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var i;if(e instanceof n)return e;typeof e=="number"&&(e=S1e(e)),this.originalInput=e;var r=nv(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=t.format)!==null&&i!==void 0?i:r.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,i,r,s=e.r/255,o=e.g/255,a=e.b/255;return s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),.2126*t+.7152*i+.0722*r},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=Rne(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=jO(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=jO(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=n$(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=n$(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),KO(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),y1e(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(Os(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(Os(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+KO(this.r,this.g,this.b,!1),t=0,i=Object.entries(qO);t<i.length;t++){var r=i[t],s=r[0],o=r[1];if(e===o)return s}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var i=!1,r=this.a<1&&this.a>=0,s=!t&&r&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=XS(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=XS(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=XS(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=XS(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var i=this.toRgb(),r=new n(e).toRgb(),s=t/100,o={r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a};return new n(o)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var i=this.toHsl(),r=360/t,s=[this];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(new n(i));return s},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),i=t.h,r=t.s,s=t.v,o=[],a=1/e;e--;)o.push(new n({h:i,s:r,v:s})),s=(s+a)%1;return o},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),i=new n(e).toRgb(),r=t.a+i.a*(1-t.a);return new n({r:(t.r*t.a+i.r*i.a*(1-t.a))/r,g:(t.g*t.a+i.g*i.a*(1-t.a))/r,b:(t.b*t.a+i.b*i.a*(1-t.a))/r,a:r})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,r=[this],s=360/e,o=1;o<e;o++)r.push(new n({h:(i+o*s)%360,s:t.s,l:t.l}));return r},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}(),JS=2,r$=.16,L1e=.05,N1e=.05,T1e=.15,Ane=5,One=4,I1e=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function s$(n){var e=n.r,t=n.g,i=n.b,r=jO(e,t,i);return{h:r.h*360,s:r.s,v:r.v}}function ex(n){var e=n.r,t=n.g,i=n.b;return"#".concat(KO(e,t,i,!1))}function D1e(n,e,t){var i=t/100,r={r:(e.r-n.r)*i+n.r,g:(e.g-n.g)*i+n.g,b:(e.b-n.b)*i+n.b};return r}function o$(n,e,t){var i;return Math.round(n.h)>=60&&Math.round(n.h)<=240?i=t?Math.round(n.h)-JS*e:Math.round(n.h)+JS*e:i=t?Math.round(n.h)+JS*e:Math.round(n.h)-JS*e,i<0?i+=360:i>=360&&(i-=360),i}function a$(n,e,t){if(n.h===0&&n.s===0)return n.s;var i;return t?i=n.s-r$*e:e===One?i=n.s+r$:i=n.s+L1e*e,i>1&&(i=1),t&&e===Ane&&i>.1&&(i=.1),i<.06&&(i=.06),Number(i.toFixed(2))}function l$(n,e,t){var i;return t?i=n.v+N1e*e:i=n.v-T1e*e,i>1&&(i=1),Number(i.toFixed(2))}function wy(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],i=nv(n),r=Ane;r>0;r-=1){var s=s$(i),o=ex(nv({h:o$(s,r,!0),s:a$(s,r,!0),v:l$(s,r,!0)}));t.push(o)}t.push(ex(i));for(var a=1;a<=One;a+=1){var l=s$(i),c=ex(nv({h:o$(l,a),s:a$(l,a),v:l$(l,a)}));t.push(c)}return e.theme==="dark"?I1e.map(function(u){var d=u.index,h=u.opacity,f=ex(D1e(nv(e.backgroundColor||"#141414"),nv(t[d]),h*100));return f}):t}var b0={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},a4={},l4={};Object.keys(b0).forEach(function(n){a4[n]=wy(b0[n]),a4[n].primary=a4[n][5],l4[n]=wy(b0[n],{theme:"dark",backgroundColor:"#141414"}),l4[n].primary=l4[n][5]});function da(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function tp(n,e){if(!n)return!1;if(n.contains)return n.contains(e);for(var t=e;t;){if(t===n)return!0;t=t.parentNode}return!1}var c$="data-rc-order",u$="data-rc-priority",M1e="rc-util-key",GO=new Map;function Pne(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.mark;return e?e.startsWith("data-")?e:"data-".concat(e):M1e}function FI(n){if(n.attachTo)return n.attachTo;var e=document.querySelector("head");return e||document.body}function R1e(n){return n==="queue"?"prependQueue":n?"prepend":"append"}function mF(n){return Array.from((GO.get(n)||n).children).filter(function(e){return e.tagName==="STYLE"})}function Fne(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!da())return null;var t=e.csp,i=e.prepend,r=e.priority,s=r===void 0?0:r,o=R1e(i),a=o==="prependQueue",l=document.createElement("style");l.setAttribute(c$,o),a&&s&&l.setAttribute(u$,"".concat(s)),t!=null&&t.nonce&&(l.nonce=t==null?void 0:t.nonce),l.innerHTML=n;var c=FI(e),u=c.firstChild;if(i){if(a){var d=(e.styles||mF(c)).filter(function(h){if(!["prepend","prependQueue"].includes(h.getAttribute(c$)))return!1;var f=Number(h.getAttribute(u$)||0);return s>=f});if(d.length)return c.insertBefore(l,d[d.length-1].nextSibling),l}c.insertBefore(l,u)}else c.appendChild(l);return l}function Bne(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=FI(e);return(e.styles||mF(t)).find(function(i){return i.getAttribute(Pne(e))===n})}function YO(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=Bne(n,e);if(t){var i=FI(e);i.removeChild(t)}}function A1e(n,e){var t=GO.get(n);if(!t||!tp(document,t)){var i=Fne("",e),r=i.parentNode;GO.set(n,r),n.removeChild(i)}}function X1(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=FI(t),r=mF(i),s=ne(ne({},t),{},{styles:r});A1e(i,s);var o=Bne(e,s);if(o){var a,l;if((a=s.csp)!==null&&a!==void 0&&a.nonce&&o.nonce!==((l=s.csp)===null||l===void 0?void 0:l.nonce)){var c;o.nonce=(c=s.csp)===null||c===void 0?void 0:c.nonce}return o.innerHTML!==n&&(o.innerHTML=n),o}var u=Fne(n,s);return u.setAttribute(Pne(s),e),u}var O1e=typeof RS=="object"&&RS&&RS.Object===Object&&RS,P1e=O1e,F1e=P1e,B1e=typeof self=="object"&&self&&self.Object===Object&&self,H1e=F1e||B1e||Function("return this")(),V1e=H1e,z1e=V1e,W1e=z1e.Symbol,vF=W1e;function $1e(n,e){for(var t=-1,i=n==null?0:n.length,r=Array(i);++t<i;)r[t]=e(n[t],t,n);return r}var U1e=$1e,j1e=Array.isArray,K1e=j1e,d$=vF,Hne=Object.prototype,q1e=Hne.hasOwnProperty,G1e=Hne.toString,Pb=d$?d$.toStringTag:void 0;function Y1e(n){var e=q1e.call(n,Pb),t=n[Pb];try{n[Pb]=void 0;var i=!0}catch{}var r=G1e.call(n);return i&&(e?n[Pb]=t:delete n[Pb]),r}var Z1e=Y1e,X1e=Object.prototype,Q1e=X1e.toString;function J1e(n){return Q1e.call(n)}var ebe=J1e,h$=vF,tbe=Z1e,nbe=ebe,ibe="[object Null]",rbe="[object Undefined]",f$=h$?h$.toStringTag:void 0;function sbe(n){return n==null?n===void 0?rbe:ibe:f$&&f$ in Object(n)?tbe(n):nbe(n)}var obe=sbe;function abe(n){return n!=null&&typeof n=="object"}var lbe=abe,cbe=obe,ube=lbe,dbe="[object Symbol]";function hbe(n){return typeof n=="symbol"||ube(n)&&cbe(n)==dbe}var fbe=hbe,g$=vF,gbe=U1e,pbe=K1e,mbe=fbe,vbe=1/0,p$=g$?g$.prototype:void 0,m$=p$?p$.toString:void 0;function Vne(n){if(typeof n=="string")return n;if(pbe(n))return gbe(n,Vne)+"";if(mbe(n))return m$?m$.call(n):"";var e=n+"";return e=="0"&&1/n==-vbe?"-0":e}var bbe=Vne,_be=bbe;function Cbe(n){return n==null?"":_be(n)}var BI=Cbe;function ybe(n,e,t){var i=-1,r=n.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=n[i+e];return s}var wbe=ybe,Sbe=wbe;function xbe(n,e,t){var i=n.length;return t=t===void 0?i:t,!e&&t>=i?n:Sbe(n,e,t)}var kbe=xbe,Ebe="\\ud800-\\udfff",Lbe="\\u0300-\\u036f",Nbe="\\ufe20-\\ufe2f",Tbe="\\u20d0-\\u20ff",Ibe=Lbe+Nbe+Tbe,Dbe="\\ufe0e\\ufe0f",Mbe="\\u200d",Rbe=RegExp("["+Mbe+Ebe+Ibe+Dbe+"]");function Abe(n){return Rbe.test(n)}var zne=Abe;function Obe(n){return n.split("")}var Pbe=Obe,Wne="\\ud800-\\udfff",Fbe="\\u0300-\\u036f",Bbe="\\ufe20-\\ufe2f",Hbe="\\u20d0-\\u20ff",Vbe=Fbe+Bbe+Hbe,zbe="\\ufe0e\\ufe0f",Wbe="["+Wne+"]",ZO="["+Vbe+"]",XO="\\ud83c[\\udffb-\\udfff]",$be="(?:"+ZO+"|"+XO+")",$ne="[^"+Wne+"]",Une="(?:\\ud83c[\\udde6-\\uddff]){2}",jne="[\\ud800-\\udbff][\\udc00-\\udfff]",Ube="\\u200d",Kne=$be+"?",qne="["+zbe+"]?",jbe="(?:"+Ube+"(?:"+[$ne,Une,jne].join("|")+")"+qne+Kne+")*",Kbe=qne+Kne+jbe,qbe="(?:"+[$ne+ZO+"?",ZO,Une,jne,Wbe].join("|")+")",Gbe=RegExp(XO+"(?="+XO+")|"+qbe+Kbe,"g");function Ybe(n){return n.match(Gbe)||[]}var Zbe=Ybe,Xbe=Pbe,Qbe=zne,Jbe=Zbe;function e_e(n){return Qbe(n)?Jbe(n):Xbe(n)}var t_e=e_e,n_e=kbe,i_e=zne,r_e=t_e,s_e=BI;function o_e(n){return function(e){e=s_e(e);var t=i_e(e)?r_e(e):void 0,i=t?t[0]:e.charAt(0),r=t?n_e(t,1).join(""):e.slice(1);return i[n]()+r}}var a_e=o_e,l_e=a_e,c_e=l_e("toUpperCase"),u_e=c_e,d_e=BI,h_e=u_e;function f_e(n){return h_e(d_e(n).toLowerCase())}var g_e=f_e;function p_e(n,e,t,i){var r=-1,s=n==null?0:n.length;for(i&&s&&(t=n[++r]);++r<s;)t=e(t,n[r],r,n);return t}var m_e=p_e;function v_e(n){return function(e){return n==null?void 0:n[e]}}var b_e=v_e,__e=b_e,C_e={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},y_e=__e(C_e),w_e=y_e,S_e=w_e,x_e=BI,k_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,E_e="\\u0300-\\u036f",L_e="\\ufe20-\\ufe2f",N_e="\\u20d0-\\u20ff",T_e=E_e+L_e+N_e,I_e="["+T_e+"]",D_e=RegExp(I_e,"g");function M_e(n){return n=x_e(n),n&&n.replace(k_e,S_e).replace(D_e,"")}var R_e=M_e,A_e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function O_e(n){return n.match(A_e)||[]}var P_e=O_e,F_e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function B_e(n){return F_e.test(n)}var H_e=B_e,Gne="\\ud800-\\udfff",V_e="\\u0300-\\u036f",z_e="\\ufe20-\\ufe2f",W_e="\\u20d0-\\u20ff",$_e=V_e+z_e+W_e,Yne="\\u2700-\\u27bf",Zne="a-z\\xdf-\\xf6\\xf8-\\xff",U_e="\\xac\\xb1\\xd7\\xf7",j_e="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",K_e="\\u2000-\\u206f",q_e=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xne="A-Z\\xc0-\\xd6\\xd8-\\xde",G_e="\\ufe0e\\ufe0f",Qne=U_e+j_e+K_e+q_e,Jne="[']",v$="["+Qne+"]",Y_e="["+$_e+"]",eie="\\d+",Z_e="["+Yne+"]",tie="["+Zne+"]",nie="[^"+Gne+Qne+eie+Yne+Zne+Xne+"]",X_e="\\ud83c[\\udffb-\\udfff]",Q_e="(?:"+Y_e+"|"+X_e+")",J_e="[^"+Gne+"]",iie="(?:\\ud83c[\\udde6-\\uddff]){2}",rie="[\\ud800-\\udbff][\\udc00-\\udfff]",iv="["+Xne+"]",eCe="\\u200d",b$="(?:"+tie+"|"+nie+")",tCe="(?:"+iv+"|"+nie+")",_$="(?:"+Jne+"(?:d|ll|m|re|s|t|ve))?",C$="(?:"+Jne+"(?:D|LL|M|RE|S|T|VE))?",sie=Q_e+"?",oie="["+G_e+"]?",nCe="(?:"+eCe+"(?:"+[J_e,iie,rie].join("|")+")"+oie+sie+")*",iCe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rCe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sCe=oie+sie+nCe,oCe="(?:"+[Z_e,iie,rie].join("|")+")"+sCe,aCe=RegExp([iv+"?"+tie+"+"+_$+"(?="+[v$,iv,"$"].join("|")+")",tCe+"+"+C$+"(?="+[v$,iv+b$,"$"].join("|")+")",iv+"?"+b$+"+"+_$,iv+"+"+C$,rCe,iCe,eie,oCe].join("|"),"g");function lCe(n){return n.match(aCe)||[]}var cCe=lCe,uCe=P_e,dCe=H_e,hCe=BI,fCe=cCe;function gCe(n,e,t){return n=hCe(n),e=t?void 0:e,e===void 0?dCe(n)?fCe(n):uCe(n):n.match(e)||[]}var pCe=gCe,mCe=m_e,vCe=R_e,bCe=pCe,_Ce="[']",CCe=RegExp(_Ce,"g");function yCe(n){return function(e){return mCe(bCe(vCe(e).replace(CCe,"")),n,"")}}var wCe=yCe,SCe=g_e,xCe=wCe,kCe=xCe(function(n,e,t){return e=e.toLowerCase(),n+(t?SCe(e):e)}),ECe=kCe;const LCe=Ow(ECe);function NCe(n,e){ps(n,"[@ant-design/icons] ".concat(e))}function y$(n){return Rt(n)==="object"&&typeof n.name=="string"&&typeof n.theme=="string"&&(Rt(n.icon)==="object"||typeof n.icon=="function")}function w$(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(n).reduce(function(e,t){var i=n[t];switch(t){case"class":e.className=i,delete e.class;break;default:delete e[t],e[LCe(t)]=i}return e},{})}function QO(n,e,t){return t?Ue.createElement(n.tag,ne(ne({key:e},w$(n.attrs)),t),(n.children||[]).map(function(i,r){return QO(i,"".concat(e,"-").concat(n.tag,"-").concat(r))})):Ue.createElement(n.tag,ne({key:e},w$(n.attrs)),(n.children||[]).map(function(i,r){return QO(i,"".concat(e,"-").concat(n.tag,"-").concat(r))}))}function aie(n){return wy(n)[0]}function lie(n){return n?Array.isArray(n)?n:[n]:[]}var TCe=`
.anticon {
  display: inline-flex;
  alignItems: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,ICe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:TCe,t=m.useContext(gF),i=t.csp;m.useEffect(function(){X1(e,"@ant-design-icons",{prepend:!0,csp:i})},[])},DCe=["icon","className","onClick","style","primaryColor","secondaryColor"],Y_={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function MCe(n){var e=n.primaryColor,t=n.secondaryColor;Y_.primaryColor=e,Y_.secondaryColor=t||aie(e),Y_.calculated=!!t}function RCe(){return ne({},Y_)}var Q1=function(e){var t=e.icon,i=e.className,r=e.onClick,s=e.style,o=e.primaryColor,a=e.secondaryColor,l=sn(e,DCe),c=Y_;if(o&&(c={primaryColor:o,secondaryColor:a||aie(o)}),ICe(),NCe(y$(t),"icon should be icon definiton, but got ".concat(t)),!y$(t))return null;var u=t;return u&&typeof u.icon=="function"&&(u=ne(ne({},u),{},{icon:u.icon(c.primaryColor,c.secondaryColor)})),QO(u.icon,"svg-".concat(u.name),ne({className:i,onClick:r,style:s,"data-icon":u.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l))};Q1.displayName="IconReact";Q1.getTwoToneColors=RCe;Q1.setTwoToneColors=MCe;function cie(n){var e=lie(n),t=Ce(e,2),i=t[0],r=t[1];return Q1.setTwoToneColors({primaryColor:i,secondaryColor:r})}function ACe(){var n=Q1.getTwoToneColors();return n.calculated?[n.primaryColor,n.secondaryColor]:n.primaryColor}var OCe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];cie("#1890ff");var yi=m.forwardRef(function(n,e){var t=n.className,i=n.icon,r=n.spin,s=n.rotate,o=n.tabIndex,a=n.onClick,l=n.twoToneColor,c=sn(n,OCe),u=m.useContext(gF),d=u.prefixCls,h=d===void 0?"anticon":d,f=u.rootClassName,g=Ee(f,h,z(z({},"".concat(h,"-").concat(i.name),!!i.name),"".concat(h,"-spin"),!!r||i.name==="loading"),t),p=o;p===void 0&&a&&(p=-1);var v=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,b=lie(l),_=Ce(b,2),y=_[0],C=_[1];return m.createElement("span",ne(ne({role:"img","aria-label":i.name},c),{},{ref:e,tabIndex:p,onClick:a,className:g}),m.createElement(Q1,{icon:i,primaryColor:y,secondaryColor:C,style:v}))});yi.displayName="AntdIcon";yi.getTwoToneColor=ACe;yi.setTwoToneColor=cie;var PCe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:f1e}))},uie=m.forwardRef(PCe),FCe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},BCe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:FCe}))},Uw=m.forwardRef(BCe),HCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},VCe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:HCe}))},zCe=m.forwardRef(VCe),WCe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},$Ce=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:WCe}))},UCe=m.forwardRef($Ce),jCe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},KCe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:jCe}))},g2=m.forwardRef(KCe);function Hs(){Hs=function(){return e};var n,e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(F,T,N){F[T]=N.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(F,T,N){return Object.defineProperty(F,T,{value:N,enumerable:!0,configurable:!0,writable:!0}),F[T]}try{c({},"")}catch{c=function(N,B,$){return N[B]=$}}function u(F,T,N,B){var $=T&&T.prototype instanceof b?T:b,j=Object.create($.prototype),Y=new R(B||[]);return r(j,"_invoke",{value:M(F,N,Y)}),j}function d(F,T,N){try{return{type:"normal",arg:F.call(T,N)}}catch(B){return{type:"throw",arg:B}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",g="executing",p="completed",v={};function b(){}function _(){}function y(){}var C={};c(C,o,function(){return this});var w=Object.getPrototypeOf,x=w&&w(w(V([])));x&&x!==t&&i.call(x,o)&&(C=x);var k=y.prototype=b.prototype=Object.create(C);function E(F){["next","throw","return"].forEach(function(T){c(F,T,function(N){return this._invoke(T,N)})})}function L(F,T){function N($,j,Y,G){var X=d(F[$],F,j);if(X.type!=="throw"){var q=X.arg,re=q.value;return re&&Rt(re)=="object"&&i.call(re,"__await")?T.resolve(re.__await).then(function(ge){N("next",ge,Y,G)},function(ge){N("throw",ge,Y,G)}):T.resolve(re).then(function(ge){q.value=ge,Y(q)},function(ge){return N("throw",ge,Y,G)})}G(X.arg)}var B;r(this,"_invoke",{value:function(j,Y){function G(){return new T(function(X,q){N(j,Y,X,q)})}return B=B?B.then(G,G):G()}})}function M(F,T,N){var B=h;return function($,j){if(B===g)throw Error("Generator is already running");if(B===p){if($==="throw")throw j;return{value:n,done:!0}}for(N.method=$,N.arg=j;;){var Y=N.delegate;if(Y){var G=D(Y,N);if(G){if(G===v)continue;return G}}if(N.method==="next")N.sent=N._sent=N.arg;else if(N.method==="throw"){if(B===h)throw B=p,N.arg;N.dispatchException(N.arg)}else N.method==="return"&&N.abrupt("return",N.arg);B=g;var X=d(F,T,N);if(X.type==="normal"){if(B=N.done?p:f,X.arg===v)continue;return{value:X.arg,done:N.done}}X.type==="throw"&&(B=p,N.method="throw",N.arg=X.arg)}}}function D(F,T){var N=T.method,B=F.iterator[N];if(B===n)return T.delegate=null,N==="throw"&&F.iterator.return&&(T.method="return",T.arg=n,D(F,T),T.method==="throw")||N!=="return"&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+N+"' method")),v;var $=d(B,F.iterator,T.arg);if($.type==="throw")return T.method="throw",T.arg=$.arg,T.delegate=null,v;var j=$.arg;return j?j.done?(T[F.resultName]=j.value,T.next=F.nextLoc,T.method!=="return"&&(T.method="next",T.arg=n),T.delegate=null,v):j:(T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,v)}function O(F){var T={tryLoc:F[0]};1 in F&&(T.catchLoc=F[1]),2 in F&&(T.finallyLoc=F[2],T.afterLoc=F[3]),this.tryEntries.push(T)}function A(F){var T=F.completion||{};T.type="normal",delete T.arg,F.completion=T}function R(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(O,this),this.reset(!0)}function V(F){if(F||F===""){var T=F[o];if(T)return T.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var N=-1,B=function $(){for(;++N<F.length;)if(i.call(F,N))return $.value=F[N],$.done=!1,$;return $.value=n,$.done=!0,$};return B.next=B}}throw new TypeError(Rt(F)+" is not iterable")}return _.prototype=y,r(k,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:_,configurable:!0}),_.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(F){var T=typeof F=="function"&&F.constructor;return!!T&&(T===_||(T.displayName||T.name)==="GeneratorFunction")},e.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,y):(F.__proto__=y,c(F,l,"GeneratorFunction")),F.prototype=Object.create(k),F},e.awrap=function(F){return{__await:F}},E(L.prototype),c(L.prototype,a,function(){return this}),e.AsyncIterator=L,e.async=function(F,T,N,B,$){$===void 0&&($=Promise);var j=new L(u(F,T,N,B),$);return e.isGeneratorFunction(T)?j:j.next().then(function(Y){return Y.done?Y.value:j.next()})},E(k),c(k,l,"Generator"),c(k,o,function(){return this}),c(k,"toString",function(){return"[object Generator]"}),e.keys=function(F){var T=Object(F),N=[];for(var B in T)N.push(B);return N.reverse(),function $(){for(;N.length;){var j=N.pop();if(j in T)return $.value=j,$.done=!1,$}return $.done=!0,$}},e.values=V,R.prototype={constructor:R,reset:function(T){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!T)for(var N in this)N.charAt(0)==="t"&&i.call(this,N)&&!isNaN(+N.slice(1))&&(this[N]=n)},stop:function(){this.done=!0;var T=this.tryEntries[0].completion;if(T.type==="throw")throw T.arg;return this.rval},dispatchException:function(T){if(this.done)throw T;var N=this;function B(q,re){return Y.type="throw",Y.arg=T,N.next=q,re&&(N.method="next",N.arg=n),!!re}for(var $=this.tryEntries.length-1;$>=0;--$){var j=this.tryEntries[$],Y=j.completion;if(j.tryLoc==="root")return B("end");if(j.tryLoc<=this.prev){var G=i.call(j,"catchLoc"),X=i.call(j,"finallyLoc");if(G&&X){if(this.prev<j.catchLoc)return B(j.catchLoc,!0);if(this.prev<j.finallyLoc)return B(j.finallyLoc)}else if(G){if(this.prev<j.catchLoc)return B(j.catchLoc,!0)}else{if(!X)throw Error("try statement without catch or finally");if(this.prev<j.finallyLoc)return B(j.finallyLoc)}}}},abrupt:function(T,N){for(var B=this.tryEntries.length-1;B>=0;--B){var $=this.tryEntries[B];if($.tryLoc<=this.prev&&i.call($,"finallyLoc")&&this.prev<$.finallyLoc){var j=$;break}}j&&(T==="break"||T==="continue")&&j.tryLoc<=N&&N<=j.finallyLoc&&(j=null);var Y=j?j.completion:{};return Y.type=T,Y.arg=N,j?(this.method="next",this.next=j.finallyLoc,v):this.complete(Y)},complete:function(T,N){if(T.type==="throw")throw T.arg;return T.type==="break"||T.type==="continue"?this.next=T.arg:T.type==="return"?(this.rval=this.arg=T.arg,this.method="return",this.next="end"):T.type==="normal"&&N&&(this.next=N),v},finish:function(T){for(var N=this.tryEntries.length-1;N>=0;--N){var B=this.tryEntries[N];if(B.finallyLoc===T)return this.complete(B.completion,B.afterLoc),A(B),v}},catch:function(T){for(var N=this.tryEntries.length-1;N>=0;--N){var B=this.tryEntries[N];if(B.tryLoc===T){var $=B.completion;if($.type==="throw"){var j=$.arg;A(B)}return j}}throw Error("illegal catch attempt")},delegateYield:function(T,N,B){return this.delegate={iterator:V(T),resultName:N,nextLoc:B},this.method==="next"&&(this.arg=n),v}},e}function S$(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function Bf(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){S$(s,i,r,o,a,"next",l)}function a(l){S$(s,i,r,o,a,"throw",l)}o(void 0)})}}var jw=ne({},v0e),qCe=jw.version,c4=jw.render,GCe=jw.unmountComponentAtNode,HI;try{var YCe=Number((qCe||"").split(".")[0]);YCe>=18&&(HI=jw.createRoot)}catch{}function x$(n){var e=jw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&Rt(e)==="object"&&(e.usingClientEntryPoint=n)}var p2="__rc_react_root__";function ZCe(n,e){x$(!0);var t=e[p2]||HI(e);x$(!1),t.render(n),e[p2]=t}function XCe(n,e){c4==null||c4(n,e)}function die(n,e){if(HI){ZCe(n,e);return}XCe(n,e)}function QCe(n){return JO.apply(this,arguments)}function JO(){return JO=Bf(Hs().mark(function n(e){return Hs().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.resolve().then(function(){var r;(r=e[p2])===null||r===void 0||r.unmount(),delete e[p2]}));case 1:case"end":return i.stop()}},n)})),JO.apply(this,arguments)}function JCe(n){GCe(n)}function hie(n){return e3.apply(this,arguments)}function e3(){return e3=Bf(Hs().mark(function n(e){return Hs().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(HI===void 0){i.next=2;break}return i.abrupt("return",QCe(e));case 2:JCe(e);case 3:case"end":return i.stop()}},n)})),e3.apply(this,arguments)}var eye=m.createContext({}),tye=function(n){Va(t,n);var e=Kd(t);function t(){return ys(this,t),e.apply(this,arguments)}return ws(t,[{key:"render",value:function(){return this.props.children}}]),t}(m.Component);function dc(n){var e=m.useRef();e.current=n;var t=m.useCallback(function(){for(var i,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(i=e.current)===null||i===void 0?void 0:i.call.apply(i,[e].concat(s))},[]);return t}var k$=da()?m.useLayoutEffect:m.useEffect,oo=function(e,t){var i=m.useRef(!0);k$(function(){return e(i.current)},t),k$(function(){return i.current=!1,function(){i.current=!0}},[])},_0=function(e,t){oo(function(i){if(!i)return e()},t)};function Bp(n){var e=m.useRef(!1),t=m.useState(n),i=Ce(t,2),r=i[0],s=i[1];m.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function o(a,l){l&&e.current||s(a)}return[r,o]}function u4(n){return n!==void 0}function Ps(n,e){var t=e||{},i=t.defaultValue,r=t.value,s=t.onChange,o=t.postState,a=Bp(function(){return u4(r)?r:u4(i)?typeof i=="function"?i():i:typeof n=="function"?n():n}),l=Ce(a,2),c=l[0],u=l[1],d=r!==void 0?r:c,h=o?o(d):d,f=dc(s),g=Bp([d]),p=Ce(g,2),v=p[0],b=p[1];_0(function(){var y=v[0];c!==y&&f(c,y)},[v]),_0(function(){u4(r)||u(r)},[r]);var _=dc(function(y,C){u(y,C),b([d],C)});return[h,_]}function nye(n){var e=m.useReducer(function(a){return a+1},0),t=Ce(e,2),i=t[1],r=m.useRef(n),s=dc(function(){return r.current}),o=dc(function(a){r.current=typeof a=="function"?a(r.current):a,i()});return[s,o]}var lh="none",tx="appear",nx="enter",ix="leave",E$="none",jl="prepare",Ev="start",Lv="active",bF="end",fie="prepared";function L$(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(n)]="webkit".concat(e),t["Moz".concat(n)]="moz".concat(e),t["ms".concat(n)]="MS".concat(e),t["O".concat(n)]="o".concat(e.toLowerCase()),t}function iye(n,e){var t={animationend:L$("Animation","AnimationEnd"),transitionend:L$("Transition","TransitionEnd")};return n&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var rye=iye(da(),typeof window<"u"?window:{}),gie={};if(da()){var sye=document.createElement("div");gie=sye.style}var rx={};function pie(n){if(rx[n])return rx[n];var e=rye[n];if(e)for(var t=Object.keys(e),i=t.length,r=0;r<i;r+=1){var s=t[r];if(Object.prototype.hasOwnProperty.call(e,s)&&s in gie)return rx[n]=e[s],rx[n]}return""}var mie=pie("animationend"),vie=pie("transitionend"),bie=!!(mie&&vie),N$=mie||"animationend",T$=vie||"transitionend";function I$(n,e){if(!n)return null;if(Rt(n)==="object"){var t=e.replace(/-\w/g,function(i){return i[1].toUpperCase()});return n[t]}return"".concat(n,"-").concat(e)}const oye=function(n){var e=m.useRef();function t(r){r&&(r.removeEventListener(T$,n),r.removeEventListener(N$,n))}function i(r){e.current&&e.current!==r&&t(e.current),r&&r!==e.current&&(r.addEventListener(T$,n),r.addEventListener(N$,n),e.current=r)}return m.useEffect(function(){return function(){t(e.current)}},[]),[i,t]};var _ie=da()?m.useLayoutEffect:m.useEffect,Cie=function(e){return+setTimeout(e,16)},yie=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(Cie=function(e){return window.requestAnimationFrame(e)},yie=function(e){return window.cancelAnimationFrame(e)});var D$=0,_F=new Map;function wie(n){_F.delete(n)}var On=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;D$+=1;var i=D$;function r(s){if(s===0)wie(i),e();else{var o=Cie(function(){r(s-1)});_F.set(i,o)}}return r(t),i};On.cancel=function(n){var e=_F.get(n);return wie(n),yie(e)};const aye=function(){var n=m.useRef(null);function e(){On.cancel(n.current)}function t(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=On(function(){r<=1?i({isCanceled:function(){return s!==n.current}}):t(i,r-1)});n.current=s}return m.useEffect(function(){return function(){e()}},[]),[t,e]};var lye=[jl,Ev,Lv,bF],cye=[jl,fie],Sie=!1,uye=!0;function xie(n){return n===Lv||n===bF}const dye=function(n,e,t){var i=Bp(E$),r=Ce(i,2),s=r[0],o=r[1],a=aye(),l=Ce(a,2),c=l[0],u=l[1];function d(){o(jl,!0)}var h=e?cye:lye;return _ie(function(){if(s!==E$&&s!==bF){var f=h.indexOf(s),g=h[f+1],p=t(s);p===Sie?o(g,!0):g&&c(function(v){function b(){v.isCanceled()||o(g,!0)}p===!0?b():Promise.resolve(p).then(b)})}},[n,s]),m.useEffect(function(){return function(){u()}},[]),[d,s]};function hye(n,e,t,i){var r=i.motionEnter,s=r===void 0?!0:r,o=i.motionAppear,a=o===void 0?!0:o,l=i.motionLeave,c=l===void 0?!0:l,u=i.motionDeadline,d=i.motionLeaveImmediately,h=i.onAppearPrepare,f=i.onEnterPrepare,g=i.onLeavePrepare,p=i.onAppearStart,v=i.onEnterStart,b=i.onLeaveStart,_=i.onAppearActive,y=i.onEnterActive,C=i.onLeaveActive,w=i.onAppearEnd,x=i.onEnterEnd,k=i.onLeaveEnd,E=i.onVisibleChanged,L=Bp(),M=Ce(L,2),D=M[0],O=M[1],A=nye(lh),R=Ce(A,2),V=R[0],F=R[1],T=Bp(null),N=Ce(T,2),B=N[0],$=N[1],j=V(),Y=m.useRef(!1),G=m.useRef(null);function X(){return t()}var q=m.useRef(!1);function re(){F(lh),$(null,!0)}var ge=dc(function(Oe){var xe=V();if(xe!==lh){var at=X();if(!(Oe&&!Oe.deadline&&Oe.target!==at)){var gt=q.current,Ct;xe===tx&&gt?Ct=w==null?void 0:w(at,Oe):xe===nx&&gt?Ct=x==null?void 0:x(at,Oe):xe===ix&&gt&&(Ct=k==null?void 0:k(at,Oe)),gt&&Ct!==!1&&re()}}}),ye=oye(ge),we=Ce(ye,1),Ie=we[0],Fe=function(xe){switch(xe){case tx:return z(z(z({},jl,h),Ev,p),Lv,_);case nx:return z(z(z({},jl,f),Ev,v),Lv,y);case ix:return z(z(z({},jl,g),Ev,b),Lv,C);default:return{}}},ze=m.useMemo(function(){return Fe(j)},[j]),Me=dye(j,!n,function(Oe){if(Oe===jl){var xe=ze[jl];return xe?xe(X()):Sie}if(Ae in ze){var at;$(((at=ze[Ae])===null||at===void 0?void 0:at.call(ze,X(),null))||null)}return Ae===Lv&&j!==lh&&(Ie(X()),u>0&&(clearTimeout(G.current),G.current=setTimeout(function(){ge({deadline:!0})},u))),Ae===fie&&re(),uye}),Pe=Ce(Me,2),tt=Pe[0],Ae=Pe[1],mt=xie(Ae);q.current=mt;var ft=m.useRef(null);_ie(function(){if(!(Y.current&&ft.current===e)){O(e);var Oe=Y.current;Y.current=!0;var xe;!Oe&&e&&a&&(xe=tx),Oe&&e&&s&&(xe=nx),(Oe&&!e&&c||!Oe&&d&&!e&&c)&&(xe=ix);var at=Fe(xe);xe&&(n||at[jl])?(F(xe),tt()):F(lh),ft.current=e}},[e]),m.useEffect(function(){(j===tx&&!a||j===nx&&!s||j===ix&&!c)&&F(lh)},[a,s,c]),m.useEffect(function(){return function(){Y.current=!1,clearTimeout(G.current)}},[]);var Le=m.useRef(!1);m.useEffect(function(){D&&(Le.current=!0),D!==void 0&&j===lh&&((Le.current||D)&&(E==null||E(D)),Le.current=!0)},[D,j]);var Ge=B;return ze[jl]&&Ae===Ev&&(Ge=ne({transition:"none"},Ge)),[j,Ae,Ge,D??e]}function fye(n){var e=n;Rt(n)==="object"&&(e=n.transitionSupport);function t(r,s){return!!(r.motionName&&e&&s!==!1)}var i=m.forwardRef(function(r,s){var o=r.visible,a=o===void 0?!0:o,l=r.removeOnLeave,c=l===void 0?!0:l,u=r.forceRender,d=r.children,h=r.motionName,f=r.leavedClassName,g=r.eventProps,p=m.useContext(eye),v=p.motion,b=t(r,v),_=m.useRef(),y=m.useRef();function C(){try{return _.current instanceof HTMLElement?_.current:G_(y.current)}catch{return null}}var w=hye(b,a,C,r),x=Ce(w,4),k=x[0],E=x[1],L=x[2],M=x[3],D=m.useRef(M);M&&(D.current=!0);var O=m.useCallback(function(N){_.current=N,pne(s,N)},[s]),A,R=ne(ne({},g),{},{visible:a});if(!d)A=null;else if(k===lh)M?A=d(ne({},R),O):!c&&D.current&&f?A=d(ne(ne({},R),{},{className:f}),O):u||!c&&!f?A=d(ne(ne({},R),{},{style:{display:"none"}}),O):A=null;else{var V;E===jl?V="prepare":xie(E)?V="active":E===Ev&&(V="start");var F=I$(h,"".concat(k,"-").concat(V));A=d(ne(ne({},R),{},{className:Ee(I$(h,k),z(z({},F,F&&V),h,typeof h=="string")),style:L}),O)}if(m.isValidElement(A)&&$w(A)){var T=vne(A);T||(A=m.cloneElement(A,{ref:O}))}return m.createElement(tye,{ref:y},A)});return i.displayName="CSSMotion",i}const yc=fye(bie);var t3="add",n3="keep",i3="remove",d4="removed";function gye(n){var e;return n&&Rt(n)==="object"&&"key"in n?e=n:e={key:n},ne(ne({},e),{},{key:String(e.key)})}function r3(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.map(gye)}function pye(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],i=0,r=e.length,s=r3(n),o=r3(e);s.forEach(function(c){for(var u=!1,d=i;d<r;d+=1){var h=o[d];if(h.key===c.key){i<d&&(t=t.concat(o.slice(i,d).map(function(f){return ne(ne({},f),{},{status:t3})})),i=d),t.push(ne(ne({},h),{},{status:n3})),i+=1,u=!0;break}}u||t.push(ne(ne({},c),{},{status:i3}))}),i<r&&(t=t.concat(o.slice(i).map(function(c){return ne(ne({},c),{},{status:t3})})));var a={};t.forEach(function(c){var u=c.key;a[u]=(a[u]||0)+1});var l=Object.keys(a).filter(function(c){return a[c]>1});return l.forEach(function(c){t=t.filter(function(u){var d=u.key,h=u.status;return d!==c||h!==i3}),t.forEach(function(u){u.key===c&&(u.status=n3)})}),t}var mye=["component","children","onVisibleChanged","onAllRemoved"],vye=["status"],bye=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function _ye(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yc,t=function(i){Va(s,i);var r=Kd(s);function s(){var o;ys(this,s);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o=r.call.apply(r,[this].concat(l)),z(kt(o),"state",{keyEntities:[]}),z(kt(o),"removeKey",function(u){o.setState(function(d){var h=d.keyEntities.map(function(f){return f.key!==u?f:ne(ne({},f),{},{status:d4})});return{keyEntities:h}},function(){var d=o.state.keyEntities,h=d.filter(function(f){var g=f.status;return g!==d4}).length;h===0&&o.props.onAllRemoved&&o.props.onAllRemoved()})}),o}return ws(s,[{key:"render",value:function(){var a=this,l=this.state.keyEntities,c=this.props,u=c.component,d=c.children,h=c.onVisibleChanged;c.onAllRemoved;var f=sn(c,mye),g=u||m.Fragment,p={};return bye.forEach(function(v){p[v]=f[v],delete f[v]}),delete f.keys,m.createElement(g,f,l.map(function(v,b){var _=v.status,y=sn(v,vye),C=_===t3||_===n3;return m.createElement(e,J({},p,{key:y.key,visible:C,eventProps:y,onVisibleChanged:function(x){h==null||h(x,{key:y.key}),x||a.removeKey(y.key)}}),function(w,x){return d(ne(ne({},w),{},{index:b}),x)})}))}}],[{key:"getDerivedStateFromProps",value:function(a,l){var c=a.keys,u=l.keyEntities,d=r3(c),h=pye(u,d);return{keyEntities:h.filter(function(f){var g=u.find(function(p){var v=p.key;return f.key===v});return!(g&&g.status===d4&&f.status===i3)})}}}]),s}(m.Component);return z(t,"defaultProps",{component:"div"}),t}const Cye=_ye(bie);var CF=function(n){Va(t,n);var e=Kd(t);function t(){var i;ys(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=e.call.apply(e,[this].concat(s)),i.closeTimer=null,i.close=function(a){a&&a.stopPropagation(),i.clearCloseTimer();var l=i.props,c=l.onClose,u=l.noticeKey;c&&c(u)},i.startCloseTimer=function(){i.props.duration&&(i.closeTimer=window.setTimeout(function(){i.close()},i.props.duration*1e3))},i.clearCloseTimer=function(){i.closeTimer&&(clearTimeout(i.closeTimer),i.closeTimer=null)},i}return ws(t,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(r){(this.props.duration!==r.duration||this.props.updateMark!==r.updateMark||this.props.visible!==r.visible&&this.props.visible)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var r=this,s=this.props,o=s.prefixCls,a=s.className,l=s.closable,c=s.closeIcon,u=s.style,d=s.onClick,h=s.children,f=s.holder,g="".concat(o,"-notice"),p=Object.keys(this.props).reduce(function(b,_){return(_.substr(0,5)==="data-"||_.substr(0,5)==="aria-"||_==="role")&&(b[_]=r.props[_]),b},{}),v=m.createElement("div",J({className:Ee(g,a,z({},"".concat(g,"-closable"),l)),style:u,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:d},p),m.createElement("div",{className:"".concat(g,"-content")},h),l?m.createElement("a",{tabIndex:0,onClick:this.close,className:"".concat(g,"-close")},c||m.createElement("span",{className:"".concat(g,"-close-x")})):null);return f?Pd.createPortal(v,f):v}}]),t}(m.Component);CF.defaultProps={onClose:function(){},duration:1.5};function yF(n){var e=m.useRef({}),t=m.useState([]),i=Ce(t,2),r=i[0],s=i[1];function o(a){var l=!0;n.add(a,function(c,u){var d=u.key;if(c&&(!e.current[d]||l)){var h=m.createElement(CF,J({},u,{holder:c}));e.current[d]=h,s(function(f){var g=f.findIndex(function(v){return v.key===u.key});if(g===-1)return[].concat(Et(f),[h]);var p=Et(f);return p[g]=h,p})}l=!1})}return[o,m.createElement(m.Fragment,null,r)]}var yye=["getContainer"],M$=0,wye=Date.now();function R$(){var n=M$;return M$+=1,"rcNotification_".concat(wye,"_").concat(n)}var a1=function(n){Va(t,n);var e=Kd(t);function t(){var i;ys(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=e.call.apply(e,[this].concat(s)),i.state={notices:[]},i.hookRefs=new Map,i.add=function(a,l){var c,u=(c=a.key)!==null&&c!==void 0?c:R$(),d=ne(ne({},a),{},{key:u}),h=i.props.maxCount;i.setState(function(f){var g=f.notices,p=g.map(function(b){return b.notice.key}).indexOf(u),v=g.concat();return p!==-1?v.splice(p,1,{notice:d,holderCallback:l}):(h&&g.length>=h&&(d.key=v[0].notice.key,d.updateMark=R$(),d.userPassKey=u,v.shift()),v.push({notice:d,holderCallback:l})),{notices:v}})},i.remove=function(a){i.setState(function(l){var c=l.notices;return{notices:c.filter(function(u){var d=u.notice,h=d.key,f=d.userPassKey,g=f??h;return g!==a})}})},i.noticePropsMap={},i}return ws(t,[{key:"getTransitionName",value:function(){var r=this.props,s=r.prefixCls,o=r.animation,a=this.props.transitionName;return!a&&o&&(a="".concat(s,"-").concat(o)),a}},{key:"render",value:function(){var r=this,s=this.state.notices,o=this.props,a=o.prefixCls,l=o.className,c=o.closeIcon,u=o.style,d=[];return s.forEach(function(h,f){var g=h.notice,p=h.holderCallback,v=f===s.length-1?g.updateMark:void 0,b=g.key,_=g.userPassKey,y=ne(ne(ne({prefixCls:a,closeIcon:c},g),g.props),{},{key:b,noticeKey:_||b,updateMark:v,onClose:function(w){var x;r.remove(w),(x=g.onClose)===null||x===void 0||x.call(g)},onClick:g.onClick,children:g.content});d.push(b),r.noticePropsMap[b]={props:y,holderCallback:p}}),m.createElement("div",{className:Ee(a,l),style:u},m.createElement(Cye,{keys:d,motionName:this.getTransitionName(),onVisibleChanged:function(f,g){var p=g.key;f||delete r.noticePropsMap[p]}},function(h){var f=h.key,g=h.className,p=h.style,v=h.visible,b=r.noticePropsMap[f],_=b.props,y=b.holderCallback;return y?m.createElement("div",{key:f,className:Ee(g,"".concat(a,"-hook-holder")),style:ne({},p),ref:function(w){typeof f>"u"||(w?(r.hookRefs.set(f,w),y(w,_)):r.hookRefs.delete(f))}}):m.createElement(CF,J({},_,{className:Ee(g,_==null?void 0:_.className),style:ne(ne({},p),_==null?void 0:_.style),visible:v}))}))}}]),t}(m.Component);a1.newInstance=void 0;a1.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}};a1.newInstance=function(e,t){var i=e||{},r=i.getContainer,s=sn(i,yye),o=document.createElement("div");if(r){var a=r();a.appendChild(o)}else document.body.appendChild(o);var l=!1;function c(u){l||(l=!0,t({notice:function(h){u.add(h)},removeNotice:function(h){u.remove(h)},component:u,destroy:function(){hie(o),o.parentNode&&o.parentNode.removeChild(o)},useNotification:function(){return yF(u)}}))}die(m.createElement(a1,J({},s,{ref:c})),o)};function Sye(n,e){var t=function(){var r,s,o=null,a={add:function(p,v){o==null||o.component.add(p,v)}},l=yF(a),c=Ce(l,2),u=c[0],d=c[1];function h(g){var p=g.prefixCls,v=r("message",p),b=r(),_=g.key||Mie(),y=new Promise(function(w){var x=function(){return typeof g.onClose=="function"&&g.onClose(),w(!0)};n(J(J({},g),{prefixCls:v,rootPrefixCls:b,getPopupContainer:s}),function(k){var E=k.prefixCls,L=k.instance;o=L,u(e(J(J({},g),{key:_,onClose:x}),E))})}),C=function(){o&&o.removeNotice(_)};return C.then=function(w,x){return y.then(w,x)},C.promise=y,C}var f=m.useRef({});return f.current.open=h,Oie.forEach(function(g){return Fie(f.current,g)}),[f.current,m.createElement(Hf,{key:"holder"},function(g){return r=g.getPrefixCls,s=g.getPopupContainer,d})]};return t}var So,kie=3,Eie,xye=1,Lie="",s3="move-up",Nie=!1,Tie,Iie,Die=!1;function Mie(){return xye++}function kye(n){n.top!==void 0&&(Eie=n.top,So=null),n.duration!==void 0&&(kie=n.duration),n.prefixCls!==void 0&&(Lie=n.prefixCls),n.getContainer!==void 0&&(Tie=n.getContainer,So=null),n.transitionName!==void 0&&(s3=n.transitionName,So=null,Nie=!0),n.maxCount!==void 0&&(Iie=n.maxCount,So=null),n.rtl!==void 0&&(Die=n.rtl)}function Rie(n,e){var t=n.prefixCls,i=n.getPopupContainer,r=SF(),s=r.getPrefixCls,o=r.getRootPrefixCls,a=r.getIconPrefixCls,l=s("message",t||Lie),c=o(n.rootPrefixCls,l),u=a();if(So){e({prefixCls:l,rootPrefixCls:c,iconPrefixCls:u,instance:So});return}var d={prefixCls:l,transitionName:Nie?s3:"".concat(c,"-").concat(s3),style:{top:Eie},getContainer:Tie||i,maxCount:Iie};a1.newInstance(d,function(h){if(So){e({prefixCls:l,rootPrefixCls:c,iconPrefixCls:u,instance:So});return}So=h,e({prefixCls:l,rootPrefixCls:c,iconPrefixCls:u,instance:h})})}var Aie={info:UCe,success:uie,error:Uw,warning:zCe,loading:g2},Oie=Object.keys(Aie);function Pie(n,e,t){var i=n.duration!==void 0?n.duration:kie,r=Aie[n.type],s=Ee("".concat(e,"-custom-content"),z(z({},"".concat(e,"-").concat(n.type),n.type),"".concat(e,"-rtl"),Die===!0));return{key:n.key,duration:i,style:n.style||{},className:n.className,content:m.createElement(eb,{iconPrefixCls:t},m.createElement("div",{className:s},n.icon||r&&m.createElement(r,null),m.createElement("span",null,n.content))),onClose:n.onClose,onClick:n.onClick}}function Eye(n){var e=n.key||Mie(),t=new Promise(function(r){var s=function(){return typeof n.onClose=="function"&&n.onClose(),r(!0)};Rie(n,function(o){var a=o.prefixCls,l=o.iconPrefixCls,c=o.instance;c.notice(Pie(J(J({},n),{key:e,onClose:s}),a,l))})}),i=function(){var s;So&&(So.removeNotice(e),(s=n.onClose)===null||s===void 0||s.call(n))};return i.then=function(r,s){return t.then(r,s)},i.promise=t,i}function Lye(n){return Object.prototype.toString.call(n)==="[object Object]"&&!!n.content}var bl={open:Eye,config:kye,destroy:function(e){if(So)if(e){var t=So,i=t.removeNotice;i(e)}else{var r=So,s=r.destroy;s(),So=null}}};function Fie(n,e){n[e]=function(t,i,r){return Lye(t)?n.open(J(J({},t),{type:e})):(typeof i=="function"&&(r=i,i=void 0),n.open({content:t,duration:i,type:e,onClose:r}))}}Oie.forEach(function(n){return Fie(bl,n)});bl.warn=bl.warning;bl.useMessage=Sye(Rie,Pie);var Nye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},Tye=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:Nye}))},Bie=m.forwardRef(Tye),Iye={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},Dye=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:Iye}))},Hie=m.forwardRef(Dye),Vie={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},Mye=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:Vie}))},J1=m.forwardRef(Mye),Rye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},Aye=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:Rye}))},wF=m.forwardRef(Aye),zie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},Oye=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:zie}))},Wie=m.forwardRef(Oye);function Pye(n,e){var t=function(){var r,s=null,o={add:function(g,p){s==null||s.component.add(g,p)}},a=yF(o),l=Ce(a,2),c=l[0],u=l[1];function d(f){var g=f.prefixCls,p=r("notification",g);n(J(J({},f),{prefixCls:p}),function(v){var b=v.prefixCls,_=v.instance;s=_,c(e(f,b))})}var h=m.useRef({});return h.current.open=d,["success","info","warning","error"].forEach(function(f){h.current[f]=function(g){return h.current.open(J(J({},g),{type:f}))}}),[h.current,m.createElement(Hf,{key:"holder"},function(f){return r=f.getPrefixCls,u})]};return t}var pg={},$ie=4.5,Uie=24,jie=24,Kie="",o3="topRight",qie,Gie,Yie=!1,Zie;function Fye(n){var e=n.duration,t=n.placement,i=n.bottom,r=n.top,s=n.getContainer,o=n.closeIcon,a=n.prefixCls;a!==void 0&&(Kie=a),e!==void 0&&($ie=e),t!==void 0?o3=t:n.rtl&&(o3="topLeft"),i!==void 0&&(jie=i),r!==void 0&&(Uie=r),s!==void 0&&(qie=s),o!==void 0&&(Gie=o),n.rtl!==void 0&&(Yie=n.rtl),n.maxCount!==void 0&&(Zie=n.maxCount)}function Bye(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Uie,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jie,i;switch(n){case"top":i={left:"50%",transform:"translateX(-50%)",right:"auto",top:e,bottom:"auto"};break;case"topLeft":i={left:0,top:e,bottom:"auto"};break;case"topRight":i={right:0,top:e,bottom:"auto"};break;case"bottom":i={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:t};break;case"bottomLeft":i={left:0,top:"auto",bottom:t};break;default:i={right:0,top:"auto",bottom:t};break}return i}function Xie(n,e){var t=n.placement,i=t===void 0?o3:t,r=n.top,s=n.bottom,o=n.getContainer,a=o===void 0?qie:o,l=n.prefixCls,c=SF(),u=c.getPrefixCls,d=c.getIconPrefixCls,h=u("notification",l||Kie),f=d(),g="".concat(h,"-").concat(i),p=pg[g];if(p){Promise.resolve(p).then(function(b){e({prefixCls:"".concat(h,"-notice"),iconPrefixCls:f,instance:b})});return}var v=Ee("".concat(h,"-").concat(i),z({},"".concat(h,"-rtl"),Yie===!0));pg[g]=new Promise(function(b){a1.newInstance({prefixCls:h,className:v,style:Bye(i,r,s),getContainer:a,maxCount:Zie},function(_){b(_),e({prefixCls:"".concat(h,"-notice"),iconPrefixCls:f,instance:_})})})}var Hye={success:Bie,info:Wie,error:Hie,warning:wF};function Qie(n,e,t){var i=n.duration,r=n.icon,s=n.type,o=n.description,a=n.message,l=n.btn,c=n.onClose,u=n.onClick,d=n.key,h=n.style,f=n.className,g=n.closeIcon,p=g===void 0?Gie:g,v=n.props,b=i===void 0?$ie:i,_=null;r?_=m.createElement("span",{className:"".concat(e,"-icon")},n.icon):s&&(_=m.createElement(Hye[s]||null,{className:"".concat(e,"-icon ").concat(e,"-icon-").concat(s)}));var y=typeof p>"u"?m.createElement("span",{className:"".concat(e,"-close-x")},m.createElement(J1,{className:"".concat(e,"-close-icon")})):p,C=!o&&_?m.createElement("span",{className:"".concat(e,"-message-single-line-auto-margin")}):null;return{content:m.createElement(eb,{iconPrefixCls:t},m.createElement("div",{className:_?"".concat(e,"-with-icon"):"",role:"alert"},_,m.createElement("div",{className:"".concat(e,"-message")},C,a),m.createElement("div",{className:"".concat(e,"-description")},o),l?m.createElement("span",{className:"".concat(e,"-btn")},l):null)),duration:b,closable:!0,closeIcon:y,onClose:c,onClick:u,key:d,style:h||{},className:Ee(f,z({},"".concat(e,"-").concat(s),!!s)),props:v}}function Vye(n){Xie(n,function(e){var t=e.prefixCls,i=e.iconPrefixCls,r=e.instance;r.notice(Qie(n,t,i))})}var l1={open:Vye,close:function(e){Object.keys(pg).forEach(function(t){return Promise.resolve(pg[t]).then(function(i){i.removeNotice(e)})})},config:Fye,destroy:function(){Object.keys(pg).forEach(function(e){Promise.resolve(pg[e]).then(function(t){t.destroy()}),delete pg[e]})}};["success","info","warning","error"].forEach(function(n){l1[n]=function(e){return l1.open(J(J({},e),{type:n}))}});l1.warn=l1.warning;l1.useNotification=Pye(Xie,Qie);var zye=function(e,t){return t||(e?"ant-".concat(e):"ant")},Bn=m.createContext({getPrefixCls:zye}),Hf=Bn.Consumer,Wye="-ant-".concat(Date.now(),"-").concat(Math.random());function $ye(n,e){var t={},i=function(u,d){var h=u.clone();return h=(d==null?void 0:d(h))||h,h.toRgbString()},r=function(u,d){var h=new o4(u),f=wy(h.toRgbString());t["".concat(d,"-color")]=i(h),t["".concat(d,"-color-disabled")]=f[1],t["".concat(d,"-color-hover")]=f[4],t["".concat(d,"-color-active")]=f[6],t["".concat(d,"-color-outline")]=h.clone().setAlpha(.2).toRgbString(),t["".concat(d,"-color-deprecated-bg")]=f[0],t["".concat(d,"-color-deprecated-border")]=f[2]};if(e.primaryColor){r(e.primaryColor,"primary");var s=new o4(e.primaryColor),o=wy(s.toRgbString());o.forEach(function(c,u){t["primary-".concat(u+1)]=c}),t["primary-color-deprecated-l-35"]=i(s,function(c){return c.lighten(35)}),t["primary-color-deprecated-l-20"]=i(s,function(c){return c.lighten(20)}),t["primary-color-deprecated-t-20"]=i(s,function(c){return c.tint(20)}),t["primary-color-deprecated-t-50"]=i(s,function(c){return c.tint(50)}),t["primary-color-deprecated-f-12"]=i(s,function(c){return c.setAlpha(c.getAlpha()*.12)});var a=new o4(o[0]);t["primary-color-active-deprecated-f-30"]=i(a,function(c){return c.setAlpha(c.getAlpha()*.3)}),t["primary-color-active-deprecated-d-02"]=i(a,function(c){return c.darken(2)})}e.successColor&&r(e.successColor,"success"),e.warningColor&&r(e.warningColor,"warning"),e.errorColor&&r(e.errorColor,"error"),e.infoColor&&r(e.infoColor,"info");var l=Object.keys(t).map(function(c){return"--".concat(n,"-").concat(c,": ").concat(t[c],";")});return`
  :root {
    `.concat(l.join(`
`),`
  }
  `).trim()}function Uye(n,e){var t=$ye(n,e);da()&&X1(t,"".concat(Wye,"-dynamic-theme"))}var Hp=m.createContext(!1),jye=function(e){var t=e.children,i=e.disabled,r=m.useContext(Hp);return m.createElement(Hp.Provider,{value:i??r},t)},hc=m.createContext(void 0),Kye=function(e){var t=e.children,i=e.size;return m.createElement(hc.Consumer,null,function(r){return m.createElement(hc.Provider,{value:i||r},t)})},qye=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form"],Gye="ant",Yye="anticon",m2,Jie;function Gk(){return m2||Gye}function Zye(){return Jie||Yye}var Xye=function(e){var t=e.prefixCls,i=e.iconPrefixCls,r=e.theme;t!==void 0&&(m2=t),i!==void 0&&(Jie=i),r&&Uye(Gk(),r)},SF=function(){return{getPrefixCls:function(t,i){return i||(t?"".concat(Gk(),"-").concat(t):Gk())},getIconPrefixCls:Zye,getRootPrefixCls:function(t,i){return t||m2||(i&&i.includes("-")?i.replace(/^(.*)-[^-]*$/,"$1"):Gk())}}},Qye=function(e){var t=e.children,i=e.csp,r=e.autoInsertSpaceInButton,s=e.form,o=e.locale,a=e.componentSize,l=e.direction,c=e.space,u=e.virtual,d=e.dropdownMatchSelectWidth,h=e.legacyLocale,f=e.parentContext,g=e.iconPrefixCls,p=e.componentDisabled,v=m.useCallback(function(x,k){var E=e.prefixCls;if(k)return k;var L=E||f.getPrefixCls("");return x?"".concat(L,"-").concat(x):L},[f.getPrefixCls,e.prefixCls]),b=J(J({},f),{csp:i,autoInsertSpaceInButton:r,locale:o||h,direction:l,space:c,virtual:u,dropdownMatchSelectWidth:d,getPrefixCls:v});qye.forEach(function(x){var k=e[x];k&&(b[x]=k)});var _=AI(function(){return b},b,function(x,k){var E=Object.keys(x),L=Object.keys(k);return E.length!==L.length||E.some(function(M){return x[M]!==k[M]})}),y=m.useMemo(function(){return{prefixCls:g,csp:i}},[g,i]),C=t,w=m.useMemo(function(){var x,k,E,L;return kv(((x=yf.Form)===null||x===void 0?void 0:x.defaultValidateMessages)||{},((E=(k=_.locale)===null||k===void 0?void 0:k.Form)===null||E===void 0?void 0:E.defaultValidateMessages)||{},((L=_.form)===null||L===void 0?void 0:L.validateMessages)||{},(s==null?void 0:s.validateMessages)||{})},[_,s==null?void 0:s.validateMessages]);return Object.keys(w).length>0&&(C=m.createElement(l1e.Provider,{value:w},t)),o&&(C=m.createElement(h1e,{locale:o,_ANT_MARK__:d1e},C)),(g||i)&&(C=m.createElement(gF.Provider,{value:y},C)),a&&(C=m.createElement(Kye,{size:a},C)),p!==void 0&&(C=m.createElement(jye,{disabled:p},C)),m.createElement(Bn.Provider,{value:_},C)},eb=function(e){return m.useEffect(function(){e.direction&&(bl.config({rtl:e.direction==="rtl"}),l1.config({rtl:e.direction==="rtl"}))},[e.direction]),m.createElement(PI,null,function(t,i,r){return m.createElement(Hf,null,function(s){return m.createElement(Qye,J({parentContext:s,legacyLocale:r},e))})})};eb.ConfigContext=Bn;eb.SizeContext=hc;eb.config=Xye;function Jye(n){var e,t=function(s){return function(){e=null,n.apply(void 0,Et(s))}},i=function(){if(e==null){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];e=On(t(o))}};return i.cancel=function(){On.cancel(e),e=null},i}function Ql(n,e,t,i){var r=Pd.unstable_batchedUpdates?function(o){Pd.unstable_batchedUpdates(t,o)}:t;return n!=null&&n.addEventListener&&n.addEventListener(e,r,i),{remove:function(){n!=null&&n.removeEventListener&&n.removeEventListener(e,r,i)}}}var Vp=m.isValidElement;function ere(n){return n&&Vp(n)&&n.type===m.Fragment}function ewe(n,e,t){return Vp(n)?m.cloneElement(n,typeof t=="function"?t(n.props||{}):t):e}function Io(n,e){return ewe(n,n,e)}function a3(n){return n!=null&&n===n.window}function tre(n,e){var t,i;if(typeof window>"u")return 0;var r="scrollTop",s=0;return a3(n)?s=n.pageYOffset:n instanceof Document?s=n.documentElement[r]:(n instanceof HTMLElement||n)&&(s=n[r]),n&&!a3(n)&&typeof s!="number"&&(s=(i=((t=n.ownerDocument)!==null&&t!==void 0?t:n).documentElement)===null||i===void 0?void 0:i[r]),s}function twe(n,e,t,i){var r=t-e;return n/=i/2,n<1?r/2*n*n*n+e:r/2*((n-=2)*n*n+2)+e}function nwe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.getContainer,i=t===void 0?function(){return window}:t,r=e.callback,s=e.duration,o=s===void 0?450:s,a=i(),l=tre(a),c=Date.now(),u=function d(){var h=Date.now(),f=h-c,g=twe(f>o?o:f,l,n,o);a3(a)?a.scrollTo(window.pageXOffset,g):a instanceof Document||a.constructor.name==="HTMLDocument"?a.documentElement.scrollTop=g:a.scrollTop=g,f<o?On(d):typeof r=="function"&&r()};On(u)}const VI=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var n=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n==null?void 0:n.substr(0,4))};var je={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=je.F1&&t<=je.F12)return!1;switch(t){case je.ALT:case je.CAPS_LOCK:case je.CONTEXT_MENU:case je.CTRL:case je.DOWN:case je.END:case je.ESC:case je.HOME:case je.INSERT:case je.LEFT:case je.MAC_FF_META:case je.META:case je.NUMLOCK:case je.NUM_CENTER:case je.PAGE_DOWN:case je.PAGE_UP:case je.PAUSE:case je.PRINT_SCREEN:case je.RIGHT:case je.SHIFT:case je.UP:case je.WIN_KEY:case je.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=je.ZERO&&e<=je.NINE||e>=je.NUM_ZERO&&e<=je.NUM_MULTIPLY||e>=je.A&&e<=je.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case je.SPACE:case je.QUESTION_MARK:case je.NUM_PLUS:case je.NUM_MINUS:case je.NUM_PERIOD:case je.NUM_DIVISION:case je.SEMICOLON:case je.DASH:case je.EQUALS:case je.COMMA:case je.PERIOD:case je.SLASH:case je.APOSTROPHE:case je.SINGLE_QUOTE:case je.OPEN_SQUARE_BRACKET:case je.BACKSLASH:case je.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},nre=m.createContext(null);function iwe(){return m.useContext(nre)}function rwe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=m.useState(!1),t=Ce(e,2),i=t[0],r=t[1],s=m.useRef(null),o=function(){window.clearTimeout(s.current)};m.useEffect(function(){return o},[]);var a=function(c,u){o(),s.current=window.setTimeout(function(){r(c),u&&u()},n)};return[i,a,o]}function ire(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=m.useRef(null),t=m.useRef(null);m.useEffect(function(){return function(){window.clearTimeout(t.current)}},[]);function i(r){(r||e.current===null)&&(e.current=r),window.clearTimeout(t.current),t.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},i]}function swe(n,e,t,i){var r=m.useRef(null);r.current={open:e,triggerOpen:t,customizedTrigger:i},m.useEffect(function(){function s(o){var a;if(!((a=r.current)!==null&&a!==void 0&&a.customizedTrigger)){var l=o.target;l.shadowRoot&&o.composed&&(l=o.composedPath()[0]||l),r.current.open&&n().filter(function(c){return c}).every(function(c){return!c.contains(l)&&c!==l})&&r.current.triggerOpen(!1)}}return window.addEventListener("mousedown",s),function(){return window.removeEventListener("mousedown",s)}},[])}var owe=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,awe=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,lwe="".concat(owe," ").concat(awe).split(/[\s\n]+/),cwe="aria-",uwe="data-";function A$(n,e){return n.indexOf(e)===0}function Sy(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t;e===!1?t={aria:!0,data:!0,attr:!0}:e===!0?t={aria:!0}:t=ne({},e);var i={};return Object.keys(n).forEach(function(r){(t.aria&&(r==="role"||A$(r,cwe))||t.data&&A$(r,uwe)||t.attr&&lwe.includes(r))&&(i[r]=n[r])}),i}var dwe=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Mm=void 0;function hwe(n,e){var t=n.prefixCls,i=n.invalidate,r=n.item,s=n.renderItem,o=n.responsive,a=n.responsiveDisabled,l=n.registerSize,c=n.itemKey,u=n.className,d=n.style,h=n.children,f=n.display,g=n.order,p=n.component,v=p===void 0?"div":p,b=sn(n,dwe),_=o&&!f;function y(E){l(c,E)}m.useEffect(function(){return function(){y(null)}},[]);var C=s&&r!==Mm?s(r,{index:g}):h,w;i||(w={opacity:_?0:1,height:_?0:Mm,overflowY:_?"hidden":Mm,order:o?g:Mm,pointerEvents:_?"none":Mm,position:_?"absolute":Mm});var x={};_&&(x["aria-hidden"]=!0);var k=m.createElement(v,J({className:Ee(!i&&t,u),style:ne(ne({},w),d)},x,b,{ref:e}),C);return o&&(k=m.createElement(Cf,{onResize:function(L){var M=L.offsetWidth;y(M)},disabled:a},k)),k}var Z_=m.forwardRef(hwe);Z_.displayName="Item";function fwe(n){if(typeof MessageChannel>"u")On(n);else{var e=new MessageChannel;e.port1.onmessage=function(){return n()},e.port2.postMessage(void 0)}}function gwe(){var n=m.useRef(null),e=function(i){n.current||(n.current=[],fwe(function(){uc.unstable_batchedUpdates(function(){n.current.forEach(function(r){r()}),n.current=null})})),n.current.push(i)};return e}function Fb(n,e){var t=m.useState(e),i=Ce(t,2),r=i[0],s=i[1],o=dc(function(a){n(function(){s(a)})});return[r,o]}var v2=Ue.createContext(null),pwe=["component"],mwe=["className"],vwe=["className"],bwe=function(e,t){var i=m.useContext(v2);if(!i){var r=e.component,s=r===void 0?"div":r,o=sn(e,pwe);return m.createElement(s,J({},o,{ref:t}))}var a=i.className,l=sn(i,mwe),c=e.className,u=sn(e,vwe);return m.createElement(v2.Provider,{value:null},m.createElement(Z_,J({ref:t,className:Ee(a,c)},l,u)))},rre=m.forwardRef(bwe);rre.displayName="RawItem";var _we=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],sre="responsive",ore="invalidate";function Cwe(n){return"+ ".concat(n.length," ...")}function ywe(n,e){var t=n.prefixCls,i=t===void 0?"rc-overflow":t,r=n.data,s=r===void 0?[]:r,o=n.renderItem,a=n.renderRawItem,l=n.itemKey,c=n.itemWidth,u=c===void 0?10:c,d=n.ssr,h=n.style,f=n.className,g=n.maxCount,p=n.renderRest,v=n.renderRawRest,b=n.suffix,_=n.component,y=_===void 0?"div":_,C=n.itemComponent,w=n.onVisibleChange,x=sn(n,_we),k=d==="full",E=gwe(),L=Fb(E,null),M=Ce(L,2),D=M[0],O=M[1],A=D||0,R=Fb(E,new Map),V=Ce(R,2),F=V[0],T=V[1],N=Fb(E,0),B=Ce(N,2),$=B[0],j=B[1],Y=Fb(E,0),G=Ce(Y,2),X=G[0],q=G[1],re=Fb(E,0),ge=Ce(re,2),ye=ge[0],we=ge[1],Ie=m.useState(null),Fe=Ce(Ie,2),ze=Fe[0],Me=Fe[1],Pe=m.useState(null),tt=Ce(Pe,2),Ae=tt[0],mt=tt[1],ft=m.useMemo(function(){return Ae===null&&k?Number.MAX_SAFE_INTEGER:Ae||0},[Ae,D]),Le=m.useState(!1),Ge=Ce(Le,2),Oe=Ge[0],xe=Ge[1],at="".concat(i,"-item"),gt=Math.max($,X),Ct=g===sre,nt=s.length&&Ct,se=g===ore,fe=nt||typeof g=="number"&&s.length>g,Ne=m.useMemo(function(){var be=s;return nt?D===null&&k?be=s:be=s.slice(0,Math.min(s.length,A/u)):typeof g=="number"&&(be=s.slice(0,g)),be},[s,u,D,g,nt]),Ve=m.useMemo(function(){return nt?s.slice(ft+1):s.slice(Ne.length)},[s,Ne,nt,ft]),lt=m.useCallback(function(be,H){var W;return typeof l=="function"?l(be):(W=l&&(be==null?void 0:be[l]))!==null&&W!==void 0?W:H},[l]),Dt=m.useCallback(o||function(be){return be},[o]);function Qt(be,H,W){Ae===be&&(H===void 0||H===ze)||(mt(be),W||(xe(be<s.length-1),w==null||w(be)),H!==void 0&&Me(H))}function he(be,H){O(H.clientWidth)}function Ke(be,H){T(function(W){var K=new Map(W);return H===null?K.delete(be):K.set(be,H),K})}function ue(be,H){q(H),j(X)}function ee(be,H){we(H)}function oe(be){return F.get(lt(Ne[be],be))}oo(function(){if(A&&typeof gt=="number"&&Ne){var be=ye,H=Ne.length,W=H-1;if(!H){Qt(0,null);return}for(var K=0;K<H;K+=1){var Q=oe(K);if(k&&(Q=Q||0),Q===void 0){Qt(K-1,void 0,!0);break}if(be+=Q,W===0&&be<=A||K===W-1&&be+oe(W)<=A){Qt(W,null);break}else if(be+gt>A){Qt(K-1,be-Q-ye+X);break}}b&&oe(0)+ye>A&&Me(null)}},[A,F,X,ye,lt,Ne]);var pe=Oe&&!!Ve.length,le={};ze!==null&&nt&&(le={position:"absolute",left:ze,top:0});var ve={prefixCls:at,responsive:nt,component:C,invalidate:se},He=a?function(be,H){var W=lt(be,H);return m.createElement(v2.Provider,{key:W,value:ne(ne({},ve),{},{order:H,item:be,itemKey:W,registerSize:Ke,display:H<=ft})},a(be,H))}:function(be,H){var W=lt(be,H);return m.createElement(Z_,J({},ve,{order:H,key:W,item:be,renderItem:Dt,itemKey:W,registerSize:Ke,display:H<=ft}))},Qe={order:pe?ft:Number.MAX_SAFE_INTEGER,className:"".concat(at,"-rest"),registerSize:ue,display:pe},ut=p||Cwe,St=v?m.createElement(v2.Provider,{value:ne(ne({},ve),Qe)},v(Ve)):m.createElement(Z_,J({},ve,Qe),typeof ut=="function"?ut(Ve):ut),Lt=m.createElement(y,J({className:Ee(!se&&i,f),style:h,ref:e},x),Ne.map(He),fe?St:null,b&&m.createElement(Z_,J({},ve,{responsive:Ct,responsiveDisabled:!nt,order:ft,className:"".concat(at,"-suffix"),registerSize:ee,display:!0,style:le}),b));return Ct?m.createElement(Cf,{onResize:he,disabled:!nt},Lt):Lt}var lu=m.forwardRef(ywe);lu.displayName="Overflow";lu.Item=rre;lu.RESPONSIVE=sre;lu.INVALIDATE=ore;var b2=function(e){var t=e.className,i=e.customizeIcon,r=e.customizeIconProps,s=e.onMouseDown,o=e.onClick,a=e.children,l;return typeof i=="function"?l=i(r):l=i,m.createElement("span",{className:t,onMouseDown:function(u){u.preventDefault(),s&&s(u)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:o,"aria-hidden":!0},l!==void 0?l:m.createElement("span",{className:Ee(t.split(/\s+/).map(function(c){return"".concat(c,"-icon")}))},a))},wwe=function(e,t){var i,r,s=e.prefixCls,o=e.id,a=e.inputElement,l=e.disabled,c=e.tabIndex,u=e.autoFocus,d=e.autoComplete,h=e.editable,f=e.activeDescendantId,g=e.value,p=e.maxLength,v=e.onKeyDown,b=e.onMouseDown,_=e.onChange,y=e.onPaste,C=e.onCompositionStart,w=e.onCompositionEnd,x=e.open,k=e.attrs,E=a||m.createElement("input",null),L=E,M=L.ref,D=L.props,O=D.onKeyDown,A=D.onChange,R=D.onMouseDown,V=D.onCompositionStart,F=D.onCompositionEnd,T=D.style;return"maxLength"in E.props,E=m.cloneElement(E,ne(ne(ne({type:"search"},D),{},{id:o,ref:jd(t,M),disabled:l,tabIndex:c,autoComplete:d||"off",autoFocus:u,className:Ee("".concat(s,"-selection-search-input"),(i=E)===null||i===void 0||(r=i.props)===null||r===void 0?void 0:r.className),role:"combobox","aria-expanded":x,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":f},k),{},{value:h?g:"",maxLength:p,readOnly:!h,unselectable:h?null:"on",style:ne(ne({},T),{},{opacity:h?null:0}),onKeyDown:function(B){v(B),O&&O(B)},onMouseDown:function(B){b(B),R&&R(B)},onChange:function(B){_(B),A&&A(B)},onCompositionStart:function(B){C(B),V&&V(B)},onCompositionEnd:function(B){w(B),F&&F(B)},onPaste:y})),E},xF=m.forwardRef(wwe);xF.displayName="Input";function are(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var Swe=typeof window<"u"&&window.document&&window.document.documentElement,xwe=Swe;function kwe(n){return n!=null}function O$(n){return["string","number"].includes(Rt(n))}function lre(n){var e=void 0;return n&&(O$(n.title)?e=n.title.toString():O$(n.label)&&(e=n.label.toString())),e}function Ewe(n,e){xwe?m.useLayoutEffect(n,e):m.useEffect(n,e)}function Lwe(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var P$=function(e){e.preventDefault(),e.stopPropagation()},Nwe=function(e){var t=e.id,i=e.prefixCls,r=e.values,s=e.open,o=e.searchValue,a=e.autoClearSearchValue,l=e.inputRef,c=e.placeholder,u=e.disabled,d=e.mode,h=e.showSearch,f=e.autoFocus,g=e.autoComplete,p=e.activeDescendantId,v=e.tabIndex,b=e.removeIcon,_=e.maxTagCount,y=e.maxTagTextLength,C=e.maxTagPlaceholder,w=C===void 0?function(Me){return"+ ".concat(Me.length," ...")}:C,x=e.tagRender,k=e.onToggleOpen,E=e.onRemove,L=e.onInputChange,M=e.onInputPaste,D=e.onInputKeyDown,O=e.onInputMouseDown,A=e.onInputCompositionStart,R=e.onInputCompositionEnd,V=m.useRef(null),F=m.useState(0),T=Ce(F,2),N=T[0],B=T[1],$=m.useState(!1),j=Ce($,2),Y=j[0],G=j[1],X="".concat(i,"-selection"),q=s||d==="multiple"&&a===!1||d==="tags"?o:"",re=d==="tags"||d==="multiple"&&a===!1||h&&(s||Y);Ewe(function(){B(V.current.scrollWidth)},[q]);function ge(Me,Pe,tt,Ae,mt){return m.createElement("span",{className:Ee("".concat(X,"-item"),z({},"".concat(X,"-item-disabled"),tt)),title:lre(Me)},m.createElement("span",{className:"".concat(X,"-item-content")},Pe),Ae&&m.createElement(b2,{className:"".concat(X,"-item-remove"),onMouseDown:P$,onClick:mt,customizeIcon:b},""))}function ye(Me,Pe,tt,Ae,mt){var ft=function(Ge){P$(Ge),k(!s)};return m.createElement("span",{onMouseDown:ft},x({label:Pe,value:Me,disabled:tt,closable:Ae,onClose:mt}))}function we(Me){var Pe=Me.disabled,tt=Me.label,Ae=Me.value,mt=!u&&!Pe,ft=tt;if(typeof y=="number"&&(typeof tt=="string"||typeof tt=="number")){var Le=String(ft);Le.length>y&&(ft="".concat(Le.slice(0,y),"..."))}var Ge=function(xe){xe&&xe.stopPropagation(),E(Me)};return typeof x=="function"?ye(Ae,ft,Pe,mt,Ge):ge(Me,ft,Pe,mt,Ge)}function Ie(Me){var Pe=typeof w=="function"?w(Me):w;return ge({title:Pe},Pe,!1)}var Fe=m.createElement("div",{className:"".concat(X,"-search"),style:{width:N},onFocus:function(){G(!0)},onBlur:function(){G(!1)}},m.createElement(xF,{ref:l,open:s,prefixCls:i,id:t,inputElement:null,disabled:u,autoFocus:f,autoComplete:g,editable:re,activeDescendantId:p,value:q,onKeyDown:D,onMouseDown:O,onChange:L,onPaste:M,onCompositionStart:A,onCompositionEnd:R,tabIndex:v,attrs:Sy(e,!0)}),m.createElement("span",{ref:V,className:"".concat(X,"-search-mirror"),"aria-hidden":!0},q,"")),ze=m.createElement(lu,{prefixCls:"".concat(X,"-overflow"),data:r,renderItem:we,renderRest:Ie,suffix:Fe,itemKey:Lwe,maxCount:_});return m.createElement(m.Fragment,null,ze,!r.length&&!q&&m.createElement("span",{className:"".concat(X,"-placeholder")},c))},Twe=function(e){var t=e.inputElement,i=e.prefixCls,r=e.id,s=e.inputRef,o=e.disabled,a=e.autoFocus,l=e.autoComplete,c=e.activeDescendantId,u=e.mode,d=e.open,h=e.values,f=e.placeholder,g=e.tabIndex,p=e.showSearch,v=e.searchValue,b=e.activeValue,_=e.maxLength,y=e.onInputKeyDown,C=e.onInputMouseDown,w=e.onInputChange,x=e.onInputPaste,k=e.onInputCompositionStart,E=e.onInputCompositionEnd,L=m.useState(!1),M=Ce(L,2),D=M[0],O=M[1],A=u==="combobox",R=A||p,V=h[0],F=v||"";A&&b&&!D&&(F=b),m.useEffect(function(){A&&O(!1)},[A,b]);var T=u!=="combobox"&&!d&&!p?!1:!!F,N=lre(V),B=function(){if(V)return null;var j=T?{visibility:"hidden"}:void 0;return m.createElement("span",{className:"".concat(i,"-selection-placeholder"),style:j},f)};return m.createElement(m.Fragment,null,m.createElement("span",{className:"".concat(i,"-selection-search")},m.createElement(xF,{ref:s,prefixCls:i,id:r,open:d,inputElement:t,disabled:o,autoFocus:a,autoComplete:l,editable:R,activeDescendantId:c,value:F,onKeyDown:y,onMouseDown:C,onChange:function(j){O(!0),w(j)},onPaste:x,onCompositionStart:k,onCompositionEnd:E,tabIndex:g,attrs:Sy(e,!0),maxLength:A?_:void 0})),!A&&V?m.createElement("span",{className:"".concat(i,"-selection-item"),title:N,style:T?{visibility:"hidden"}:void 0},V.label):null,B())};function Iwe(n){return![je.ESC,je.SHIFT,je.BACKSPACE,je.TAB,je.WIN_KEY,je.ALT,je.META,je.WIN_KEY_RIGHT,je.CTRL,je.SEMICOLON,je.EQUALS,je.CAPS_LOCK,je.CONTEXT_MENU,je.F1,je.F2,je.F3,je.F4,je.F5,je.F6,je.F7,je.F8,je.F9,je.F10,je.F11,je.F12].includes(n)}var Dwe=function(e,t){var i=m.useRef(null),r=m.useRef(!1),s=e.prefixCls,o=e.open,a=e.mode,l=e.showSearch,c=e.tokenWithEnter,u=e.autoClearSearchValue,d=e.onSearch,h=e.onSearchSubmit,f=e.onToggleOpen,g=e.onInputKeyDown,p=e.domRef;m.useImperativeHandle(t,function(){return{focus:function(){i.current.focus()},blur:function(){i.current.blur()}}});var v=ire(0),b=Ce(v,2),_=b[0],y=b[1],C=function(T){var N=T.which;(N===je.UP||N===je.DOWN)&&T.preventDefault(),g&&g(T),N===je.ENTER&&a==="tags"&&!r.current&&!o&&(h==null||h(T.target.value)),Iwe(N)&&f(!0)},w=function(){y(!0)},x=m.useRef(null),k=function(T){d(T,!0,r.current)!==!1&&f(!0)},E=function(){r.current=!0},L=function(T){r.current=!1,a!=="combobox"&&k(T.target.value)},M=function(T){var N=T.target.value;if(c&&x.current&&/[\r\n]/.test(x.current)){var B=x.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");N=N.replace(B,x.current)}x.current=null,k(N)},D=function(T){var N=T.clipboardData,B=N.getData("text");x.current=B},O=function(T){var N=T.target;if(N!==i.current){var B=document.body.style.msTouchAction!==void 0;B?setTimeout(function(){i.current.focus()}):i.current.focus()}},A=function(T){var N=_();T.target!==i.current&&!N&&a!=="combobox"&&T.preventDefault(),(a!=="combobox"&&(!l||!N)||!o)&&(o&&u!==!1&&d("",!0,!1),f())},R={inputRef:i,onInputKeyDown:C,onInputMouseDown:w,onInputChange:M,onInputPaste:D,onInputCompositionStart:E,onInputCompositionEnd:L},V=a==="multiple"||a==="tags"?m.createElement(Nwe,J({},e,R)):m.createElement(Twe,J({},e,R));return m.createElement("div",{ref:p,className:"".concat(s,"-selector"),onClick:O,onMouseDown:A},V)},cre=m.forwardRef(Dwe);cre.displayName="Selector";var Mwe=m.forwardRef(function(n,e){var t=n.didUpdate,i=n.getContainer,r=n.children,s=m.useRef(),o=m.useRef();m.useImperativeHandle(e,function(){return{}});var a=m.useRef(!1);return!a.current&&da()&&(o.current=i(),s.current=o.current.parentNode,a.current=!0),m.useEffect(function(){t==null||t(n)}),m.useEffect(function(){return o.current.parentNode===null&&s.current!==null&&s.current.appendChild(o.current),function(){var l;(l=o.current)===null||l===void 0||(l=l.parentNode)===null||l===void 0||l.removeChild(o.current)}},[]),o.current?Pd.createPortal(r,o.current):null});function Rwe(n,e,t){return t?n[0]===e[0]:n[0]===e[0]&&n[1]===e[1]}function Awe(n,e,t){var i=n[e]||{};return ne(ne({},i),t)}function Owe(n,e,t,i){for(var r=t.points,s=Object.keys(n),o=0;o<s.length;o+=1){var a=s[o];if(Rwe(n[a].points,r,i))return"".concat(e,"-placement-").concat(a)}return""}function ure(n){var e=n.prefixCls,t=n.motion,i=n.animation,r=n.transitionName;return t||(i?{motionName:"".concat(e,"-").concat(i)}:r?{motionName:r}:null)}function Pwe(n){var e=n.prefixCls,t=n.visible,i=n.zIndex,r=n.mask,s=n.maskMotion,o=n.maskAnimation,a=n.maskTransitionName;if(!r)return null;var l={};return(s||a||o)&&(l=ne({motionAppear:!0},ure({motion:s,prefixCls:e,transitionName:a,animation:o}))),m.createElement(yc,J({},l,{visible:t,removeOnLeave:!0}),function(c){var u=c.className;return m.createElement("div",{style:{zIndex:i},className:Ee("".concat(e,"-mask"),u)})})}function F$(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function B$(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(t),!0).forEach(function(i){Fwe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):F$(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function l3(n){"@babel/helpers - typeof";return l3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l3(n)}function Fwe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Bb,Bwe={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function _2(){if(Bb!==void 0)return Bb;Bb="";var n=document.createElement("p").style,e="Transform";for(var t in Bwe)t+e in n&&(Bb=t);return Bb}function dre(){return _2()?"".concat(_2(),"TransitionProperty"):"transitionProperty"}function zI(){return _2()?"".concat(_2(),"Transform"):"transform"}function H$(n,e){var t=dre();t&&(n.style[t]=e,t!=="transitionProperty"&&(n.style.transitionProperty=e))}function h4(n,e){var t=zI();t&&(n.style[t]=e,t!=="transform"&&(n.style.transform=e))}function Hwe(n){return n.style.transitionProperty||n.style[dre()]}function Vwe(n){var e=window.getComputedStyle(n,null),t=e.getPropertyValue("transform")||e.getPropertyValue(zI());if(t&&t!=="none"){var i=t.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(i[12]||i[4],0),y:parseFloat(i[13]||i[5],0)}}return{x:0,y:0}}var zwe=/matrix\((.*)\)/,Wwe=/matrix3d\((.*)\)/;function $we(n,e){var t=window.getComputedStyle(n,null),i=t.getPropertyValue("transform")||t.getPropertyValue(zI());if(i&&i!=="none"){var r,s=i.match(zwe);if(s)s=s[1],r=s.split(",").map(function(a){return parseFloat(a,10)}),r[4]=e.x,r[5]=e.y,h4(n,"matrix(".concat(r.join(","),")"));else{var o=i.match(Wwe)[1];r=o.split(",").map(function(a){return parseFloat(a,10)}),r[12]=e.x,r[13]=e.y,h4(n,"matrix3d(".concat(r.join(","),")"))}}else h4(n,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var Uwe=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Kw;function V$(n){var e=n.style.display;n.style.display="none",n.offsetHeight,n.style.display=e}function C0(n,e,t){var i=t;if(l3(e)==="object"){for(var r in e)e.hasOwnProperty(r)&&C0(n,r,e[r]);return}if(typeof i<"u"){typeof i=="number"&&(i="".concat(i,"px")),n.style[e]=i;return}return Kw(n,e)}function jwe(n){var e,t,i,r=n.ownerDocument,s=r.body,o=r&&r.documentElement;return e=n.getBoundingClientRect(),t=Math.floor(e.left),i=Math.floor(e.top),t-=o.clientLeft||s.clientLeft||0,i-=o.clientTop||s.clientTop||0,{left:t,top:i}}function hre(n,e){var t=n["page".concat(e?"Y":"X","Offset")],i="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var r=n.document;t=r.documentElement[i],typeof t!="number"&&(t=r.body[i])}return t}function fre(n){return hre(n)}function gre(n){return hre(n,!0)}function xy(n){var e=jwe(n),t=n.ownerDocument,i=t.defaultView||t.parentWindow;return e.left+=fre(i),e.top+=gre(i),e}function kF(n){return n!=null&&n==n.window}function pre(n){return kF(n)?n.document:n.nodeType===9?n:n.ownerDocument}function Kwe(n,e,t){var i=t,r="",s=pre(n);return i=i||s.defaultView.getComputedStyle(n,null),i&&(r=i.getPropertyValue(e)||i[e]),r}var qwe=new RegExp("^(".concat(Uwe,")(?!px)[a-z%]+$"),"i"),Gwe=/^(top|right|bottom|left)$/,f4="currentStyle",g4="runtimeStyle",Zf="left",Ywe="px";function Zwe(n,e){var t=n[f4]&&n[f4][e];if(qwe.test(t)&&!Gwe.test(e)){var i=n.style,r=i[Zf],s=n[g4][Zf];n[g4][Zf]=n[f4][Zf],i[Zf]=e==="fontSize"?"1em":t||0,t=i.pixelLeft+Ywe,i[Zf]=r,n[g4][Zf]=s}return t===""?"auto":t}typeof window<"u"&&(Kw=window.getComputedStyle?Kwe:Zwe);function sx(n,e){return n==="left"?e.useCssRight?"right":n:e.useCssBottom?"bottom":n}function z$(n){if(n==="left")return"right";if(n==="right")return"left";if(n==="top")return"bottom";if(n==="bottom")return"top"}function W$(n,e,t){C0(n,"position")==="static"&&(n.style.position="relative");var i=-999,r=-999,s=sx("left",t),o=sx("top",t),a=z$(s),l=z$(o);s!=="left"&&(i=999),o!=="top"&&(r=999);var c="",u=xy(n);("left"in e||"top"in e)&&(c=Hwe(n)||"",H$(n,"none")),"left"in e&&(n.style[a]="",n.style[s]="".concat(i,"px")),"top"in e&&(n.style[l]="",n.style[o]="".concat(r,"px")),V$(n);var d=xy(n),h={};for(var f in e)if(e.hasOwnProperty(f)){var g=sx(f,t),p=f==="left"?i:r,v=u[f]-d[f];g===f?h[g]=p+v:h[g]=p-v}C0(n,h),V$(n),("left"in e||"top"in e)&&H$(n,c);var b={};for(var _ in e)if(e.hasOwnProperty(_)){var y=sx(_,t),C=e[_]-u[_];_===y?b[y]=h[y]+C:b[y]=h[y]-C}C0(n,b)}function Xwe(n,e){var t=xy(n),i=Vwe(n),r={x:i.x,y:i.y};"left"in e&&(r.x=i.x+e.left-t.left),"top"in e&&(r.y=i.y+e.top-t.top),$we(n,r)}function Qwe(n,e,t){if(t.ignoreShake){var i=xy(n),r=i.left.toFixed(0),s=i.top.toFixed(0),o=e.left.toFixed(0),a=e.top.toFixed(0);if(r===o&&s===a)return}t.useCssRight||t.useCssBottom?W$(n,e,t):t.useCssTransform&&zI()in document.body.style?Xwe(n,e):W$(n,e,t)}function EF(n,e){for(var t=0;t<n.length;t++)e(n[t])}function mre(n){return Kw(n,"boxSizing")==="border-box"}var Jwe=["margin","border","padding"],c3=-1,eSe=2,u3=1,tSe=0;function nSe(n,e,t){var i={},r=n.style,s;for(s in e)e.hasOwnProperty(s)&&(i[s]=r[s],r[s]=e[s]);t.call(n);for(s in e)e.hasOwnProperty(s)&&(r[s]=i[s])}function w_(n,e,t){var i=0,r,s,o;for(s=0;s<e.length;s++)if(r=e[s],r)for(o=0;o<t.length;o++){var a=void 0;r==="border"?a="".concat(r).concat(t[o],"Width"):a=r+t[o],i+=parseFloat(Kw(n,a))||0}return i}var ru={getParent:function(e){var t=e;do t.nodeType===11&&t.host?t=t.host:t=t.parentNode;while(t&&t.nodeType!==1&&t.nodeType!==9);return t}};EF(["Width","Height"],function(n){ru["doc".concat(n)]=function(e){var t=e.document;return Math.max(t.documentElement["scroll".concat(n)],t.body["scroll".concat(n)],ru["viewport".concat(n)](t))},ru["viewport".concat(n)]=function(e){var t="client".concat(n),i=e.document,r=i.body,s=i.documentElement,o=s[t];return i.compatMode==="CSS1Compat"&&o||r&&r[t]||o}});function $$(n,e,t){var i=t;if(kF(n))return e==="width"?ru.viewportWidth(n):ru.viewportHeight(n);if(n.nodeType===9)return e==="width"?ru.docWidth(n):ru.docHeight(n);var r=e==="width"?["Left","Right"]:["Top","Bottom"],s=Math.floor(e==="width"?n.getBoundingClientRect().width:n.getBoundingClientRect().height),o=mre(n),a=0;(s==null||s<=0)&&(s=void 0,a=Kw(n,e),(a==null||Number(a)<0)&&(a=n.style[e]||0),a=Math.floor(parseFloat(a))||0),i===void 0&&(i=o?u3:c3);var l=s!==void 0||o,c=s||a;return i===c3?l?c-w_(n,["border","padding"],r):a:l?i===u3?c:c+(i===eSe?-w_(n,["border"],r):w_(n,["margin"],r)):a+w_(n,Jwe.slice(i),r)}var iSe={position:"absolute",visibility:"hidden",display:"block"};function U$(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i,r=e[0];return r.offsetWidth!==0?i=$$.apply(void 0,e):nSe(r,iSe,function(){i=$$.apply(void 0,e)}),i}EF(["width","height"],function(n){var e=n.charAt(0).toUpperCase()+n.slice(1);ru["outer".concat(e)]=function(i,r){return i&&U$(i,n,r?tSe:u3)};var t=n==="width"?["Left","Right"]:["Top","Bottom"];ru[n]=function(i,r){var s=r;if(s!==void 0){if(i){var o=mre(i);return o&&(s+=w_(i,["padding","border"],t)),C0(i,n,s)}return}return i&&U$(i,n,c3)}});function vre(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}var wn={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:pre,offset:function(e,t,i){if(typeof t<"u")Qwe(e,t,i||{});else return xy(e)},isWindow:kF,each:EF,css:C0,clone:function(e){var t,i={};for(t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);var r=e.overflow;if(r)for(t in e)e.hasOwnProperty(t)&&(i.overflow[t]=e.overflow[t]);return i},mix:vre,getWindowScrollLeft:function(e){return fre(e)},getWindowScrollTop:function(e){return gre(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)wn.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};vre(wn,ru);var p4=wn.getParent;function d3(n){if(wn.isWindow(n)||n.nodeType===9)return null;var e=wn.getDocument(n),t=e.body,i,r=wn.css(n,"position"),s=r==="fixed"||r==="absolute";if(!s)return n.nodeName.toLowerCase()==="html"?null:p4(n);for(i=p4(n);i&&i!==t&&i.nodeType!==9;i=p4(i))if(r=wn.css(i,"position"),r!=="static")return i;return null}var j$=wn.getParent;function rSe(n){if(wn.isWindow(n)||n.nodeType===9)return!1;var e=wn.getDocument(n),t=e.body,i=null;for(i=j$(n);i&&i!==t&&i!==e;i=j$(i)){var r=wn.css(i,"position");if(r==="fixed")return!0}return!1}function LF(n,e){for(var t={left:0,right:1/0,top:0,bottom:1/0},i=d3(n),r=wn.getDocument(n),s=r.defaultView||r.parentWindow,o=r.body,a=r.documentElement;i;){if((navigator.userAgent.indexOf("MSIE")===-1||i.clientWidth!==0)&&i!==o&&i!==a&&wn.css(i,"overflow")!=="visible"){var l=wn.offset(i);l.left+=i.clientLeft,l.top+=i.clientTop,t.top=Math.max(t.top,l.top),t.right=Math.min(t.right,l.left+i.clientWidth),t.bottom=Math.min(t.bottom,l.top+i.clientHeight),t.left=Math.max(t.left,l.left)}else if(i===o||i===a)break;i=d3(i)}var c=null;if(!wn.isWindow(n)&&n.nodeType!==9){c=n.style.position;var u=wn.css(n,"position");u==="absolute"&&(n.style.position="fixed")}var d=wn.getWindowScrollLeft(s),h=wn.getWindowScrollTop(s),f=wn.viewportWidth(s),g=wn.viewportHeight(s),p=a.scrollWidth,v=a.scrollHeight,b=window.getComputedStyle(o);if(b.overflowX==="hidden"&&(p=s.innerWidth),b.overflowY==="hidden"&&(v=s.innerHeight),n.style&&(n.style.position=c),e||rSe(n))t.left=Math.max(t.left,d),t.top=Math.max(t.top,h),t.right=Math.min(t.right,d+f),t.bottom=Math.min(t.bottom,h+g);else{var _=Math.max(p,d+f);t.right=Math.min(t.right,_);var y=Math.max(v,h+g);t.bottom=Math.min(t.bottom,y)}return t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}function sSe(n,e,t,i){var r=wn.clone(n),s={width:e.width,height:e.height};return i.adjustX&&r.left<t.left&&(r.left=t.left),i.resizeWidth&&r.left>=t.left&&r.left+s.width>t.right&&(s.width-=r.left+s.width-t.right),i.adjustX&&r.left+s.width>t.right&&(r.left=Math.max(t.right-s.width,t.left)),i.adjustY&&r.top<t.top&&(r.top=t.top),i.resizeHeight&&r.top>=t.top&&r.top+s.height>t.bottom&&(s.height-=r.top+s.height-t.bottom),i.adjustY&&r.top+s.height>t.bottom&&(r.top=Math.max(t.bottom-s.height,t.top)),wn.mix(r,s)}function NF(n){var e,t,i;if(!wn.isWindow(n)&&n.nodeType!==9)e=wn.offset(n),t=wn.outerWidth(n),i=wn.outerHeight(n);else{var r=wn.getWindow(n);e={left:wn.getWindowScrollLeft(r),top:wn.getWindowScrollTop(r)},t=wn.viewportWidth(r),i=wn.viewportHeight(r)}return e.width=t,e.height=i,e}function K$(n,e){var t=e.charAt(0),i=e.charAt(1),r=n.width,s=n.height,o=n.left,a=n.top;return t==="c"?a+=s/2:t==="b"&&(a+=s),i==="c"?o+=r/2:i==="r"&&(o+=r),{left:o,top:a}}function ox(n,e,t,i,r){var s=K$(e,t[1]),o=K$(n,t[0]),a=[o.left-s.left,o.top-s.top];return{left:Math.round(n.left-a[0]+i[0]-r[0]),top:Math.round(n.top-a[1]+i[1]-r[1])}}function q$(n,e,t){return n.left<t.left||n.left+e.width>t.right}function G$(n,e,t){return n.top<t.top||n.top+e.height>t.bottom}function oSe(n,e,t){return n.left>t.right||n.left+e.width<t.left}function aSe(n,e,t){return n.top>t.bottom||n.top+e.height<t.top}function ax(n,e,t){var i=[];return wn.each(n,function(r){i.push(r.replace(e,function(s){return t[s]}))}),i}function lx(n,e){return n[e]=-n[e],n}function Y$(n,e){var t;return/%$/.test(n)?t=parseInt(n.substring(0,n.length-1),10)/100*e:t=parseInt(n,10),t||0}function Z$(n,e){n[0]=Y$(n[0],e.width),n[1]=Y$(n[1],e.height)}function bre(n,e,t,i){var r=t.points,s=t.offset||[0,0],o=t.targetOffset||[0,0],a=t.overflow,l=t.source||n;s=[].concat(s),o=[].concat(o),a=a||{};var c={},u=0,d=!!(a&&a.alwaysByViewport),h=LF(l,d),f=NF(l);Z$(s,f),Z$(o,e);var g=ox(f,e,r,s,o),p=wn.merge(f,g);if(h&&(a.adjustX||a.adjustY)&&i){if(a.adjustX&&q$(g,f,h)){var v=ax(r,/[lr]/gi,{l:"r",r:"l"}),b=lx(s,0),_=lx(o,0),y=ox(f,e,v,b,_);oSe(y,f,h)||(u=1,r=v,s=b,o=_)}if(a.adjustY&&G$(g,f,h)){var C=ax(r,/[tb]/gi,{t:"b",b:"t"}),w=lx(s,1),x=lx(o,1),k=ox(f,e,C,w,x);aSe(k,f,h)||(u=1,r=C,s=w,o=x)}u&&(g=ox(f,e,r,s,o),wn.mix(p,g));var E=q$(g,f,h),L=G$(g,f,h);if(E||L){var M=r;E&&(M=ax(r,/[lr]/gi,{l:"r",r:"l"})),L&&(M=ax(r,/[tb]/gi,{t:"b",b:"t"})),r=M,s=t.offset||[0,0],o=t.targetOffset||[0,0]}c.adjustX=a.adjustX&&E,c.adjustY=a.adjustY&&L,(c.adjustX||c.adjustY)&&(p=sSe(g,f,h,c))}return p.width!==f.width&&wn.css(l,"width",wn.width(l)+p.width-f.width),p.height!==f.height&&wn.css(l,"height",wn.height(l)+p.height-f.height),wn.offset(l,{left:p.left,top:p.top},{useCssRight:t.useCssRight,useCssBottom:t.useCssBottom,useCssTransform:t.useCssTransform,ignoreShake:t.ignoreShake}),{points:r,offset:s,targetOffset:o,overflow:c}}function lSe(n,e){var t=LF(n,e),i=NF(n);return!t||i.left+i.width<=t.left||i.top+i.height<=t.top||i.left>=t.right||i.top>=t.bottom}function TF(n,e,t){var i=t.target||e,r=NF(i),s=!lSe(i,t.overflow&&t.overflow.alwaysByViewport);return bre(n,r,t,s)}TF.__getOffsetParent=d3;TF.__getVisibleRectForElement=LF;function cSe(n,e,t){var i,r,s=wn.getDocument(n),o=s.defaultView||s.parentWindow,a=wn.getWindowScrollLeft(o),l=wn.getWindowScrollTop(o),c=wn.viewportWidth(o),u=wn.viewportHeight(o);"pageX"in e?i=e.pageX:i=a+e.clientX,"pageY"in e?r=e.pageY:r=l+e.clientY;var d={left:i,top:r,width:0,height:0},h=i>=0&&i<=a+c&&r>=0&&r<=l+u,f=[t.points[0],"cc"];return bre(n,d,B$(B$({},t),{},{points:f}),h)}function WI(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=new Set;function r(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=i.has(s);if(ps(!l,"Warning: There may be circular references"),l)return!1;if(s===o)return!0;if(t&&a>1)return!1;i.add(s);var c=a+1;if(Array.isArray(s)){if(!Array.isArray(o)||s.length!==o.length)return!1;for(var u=0;u<s.length;u++)if(!r(s[u],o[u],c))return!1;return!0}if(s&&o&&Rt(s)==="object"&&Rt(o)==="object"){var d=Object.keys(s);return d.length!==Object.keys(o).length?!1:d.every(function(h){return r(s[h],o[h],c)})}return!1}return r(n,e)}const _re=function(n){if(!n)return!1;if(n instanceof Element){if(n.offsetParent)return!0;if(n.getBBox){var e=n.getBBox(),t=e.width,i=e.height;if(t||i)return!0}if(n.getBoundingClientRect){var r=n.getBoundingClientRect(),s=r.width,o=r.height;if(s||o)return!0}}return!1},uSe=function(n,e){var t=Ue.useRef(!1),i=Ue.useRef(null);function r(){window.clearTimeout(i.current)}function s(o){if(r(),!t.current||o===!0){if(n(o)===!1)return;t.current=!0,i.current=window.setTimeout(function(){t.current=!1},e)}else i.current=window.setTimeout(function(){t.current=!1,s()},e)}return[s,function(){t.current=!1,r()}]};function dSe(n,e){return n===e?!0:!n||!e?!1:"pageX"in e&&"pageY"in e?n.pageX===e.pageX&&n.pageY===e.pageY:"clientX"in e&&"clientY"in e?n.clientX===e.clientX&&n.clientY===e.clientY:!1}function hSe(n,e){n!==document.activeElement&&tp(e,n)&&typeof n.focus=="function"&&n.focus()}function X$(n,e){var t=null,i=null;function r(o){var a=Ce(o,1),l=a[0].target;if(document.documentElement.contains(l)){var c=l.getBoundingClientRect(),u=c.width,d=c.height,h=Math.floor(u),f=Math.floor(d);(t!==h||i!==f)&&Promise.resolve().then(function(){e({width:h,height:f})}),t=h,i=f}}var s=new Sne(r);return n&&s.observe(n),function(){s.disconnect()}}function Q$(n){return typeof n!="function"?null:n()}function J$(n){return Rt(n)!=="object"||!n?null:n}var fSe=function(e,t){var i=e.children,r=e.disabled,s=e.target,o=e.align,a=e.onAlign,l=e.monitorWindowResize,c=e.monitorBufferTime,u=c===void 0?0:c,d=Ue.useRef({}),h=Ue.useRef(),f=Ue.Children.only(i),g=Ue.useRef({});g.current.disabled=r,g.current.target=s,g.current.align=o,g.current.onAlign=a;var p=uSe(function(){var D=g.current,O=D.disabled,A=D.target,R=D.align,V=D.onAlign,F=h.current;if(!O&&A&&F){var T,N=Q$(A),B=J$(A);d.current.element=N,d.current.point=B,d.current.align=R;var $=document,j=$.activeElement;return N&&_re(N)?T=TF(F,N,R):B&&(T=cSe(F,B,R)),hSe(j,F),V&&T&&V(F,T),!0}return!1},u),v=Ce(p,2),b=v[0],_=v[1],y=Ue.useState(),C=Ce(y,2),w=C[0],x=C[1],k=Ue.useState(),E=Ce(k,2),L=E[0],M=E[1];return oo(function(){x(Q$(s)),M(J$(s))}),Ue.useEffect(function(){(d.current.element!==w||!dSe(d.current.point,L)||!WI(d.current.align,o))&&b()}),Ue.useEffect(function(){var D=X$(h.current,b);return D},[h.current]),Ue.useEffect(function(){var D=X$(w,b);return D},[w]),Ue.useEffect(function(){r?_():b()},[r]),Ue.useEffect(function(){if(l){var D=Ql(window,"resize",b);return D.remove}},[l]),Ue.useEffect(function(){return function(){_()}},[]),Ue.useImperativeHandle(t,function(){return{forceAlign:function(){return b(!0)}}}),Ue.isValidElement(f)&&(f=Ue.cloneElement(f,{ref:jd(f.ref,h)})),f},Cre=Ue.forwardRef(fSe);Cre.displayName="Align";var eU=["measure","alignPre","align",null,"motion"];const gSe=function(n,e){var t=Bp(null),i=Ce(t,2),r=i[0],s=i[1],o=m.useRef();function a(u){s(u,!0)}function l(){On.cancel(o.current)}function c(u){l(),o.current=On(function(){a(function(d){switch(r){case"align":return"motion";case"motion":return"stable"}return d}),u==null||u()})}return m.useEffect(function(){a("measure")},[n]),m.useEffect(function(){switch(r){case"measure":e();break}r&&(o.current=On(Bf(Hs().mark(function u(){var d,h;return Hs().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:d=eU.indexOf(r),h=eU[d+1],h&&d!==-1&&a(h);case 3:case"end":return g.stop()}},u)}))))},[r]),m.useEffect(function(){return function(){l()}},[]),[r,c]},pSe=function(n){var e=m.useState({width:0,height:0}),t=Ce(e,2),i=t[0],r=t[1];function s(a){var l=a.offsetWidth,c=a.offsetHeight,u=a.getBoundingClientRect(),d=u.width,h=u.height;Math.abs(l-d)<1&&Math.abs(c-h)<1&&(l=d,c=h),r({width:l,height:c})}var o=m.useMemo(function(){var a={};if(n){var l=i.width,c=i.height;n.indexOf("height")!==-1&&c?a.height=c:n.indexOf("minHeight")!==-1&&c&&(a.minHeight=c),n.indexOf("width")!==-1&&l?a.width=l:n.indexOf("minWidth")!==-1&&l&&(a.minWidth=l)}return a},[n,i]);return[o,s]};var yre=m.forwardRef(function(n,e){var t=n.visible,i=n.prefixCls,r=n.className,s=n.style,o=n.children,a=n.zIndex,l=n.stretch,c=n.destroyPopupOnHide,u=n.forceRender,d=n.align,h=n.point,f=n.getRootDomNode,g=n.getClassNameFromAlign,p=n.onAlign,v=n.onMouseEnter,b=n.onMouseLeave,_=n.onMouseDown,y=n.onTouchStart,C=n.onClick,w=m.useRef(),x=m.useRef(),k=m.useState(),E=Ce(k,2),L=E[0],M=E[1],D=pSe(l),O=Ce(D,2),A=O[0],R=O[1];function V(){l&&R(f())}var F=gSe(t,V),T=Ce(F,2),N=T[0],B=T[1],$=m.useState(0),j=Ce($,2),Y=j[0],G=j[1],X=m.useRef();oo(function(){N==="alignPre"&&G(0)},[N]);function q(){return h||f}function re(){var Me;(Me=w.current)===null||Me===void 0||Me.forceAlign()}function ge(Me,Pe){var tt=g(Pe);L!==tt&&M(tt),G(function(Ae){return Ae+1}),N==="align"&&(p==null||p(Me,Pe))}oo(function(){N==="align"&&(Y<3?re():B(function(){var Me;(Me=X.current)===null||Me===void 0||Me.call(X)}))},[Y]);var ye=ne({},ure(n));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Me){var Pe=ye[Me];ye[Me]=function(tt,Ae){return B(),Pe==null?void 0:Pe(tt,Ae)}});function we(){return new Promise(function(Me){X.current=Me})}m.useEffect(function(){!ye.motionName&&N==="motion"&&B()},[ye.motionName,N]),m.useImperativeHandle(e,function(){return{forceAlign:re,getElement:function(){return x.current}}});var Ie=ne(ne({},A),{},{zIndex:a,opacity:N==="motion"||N==="stable"||!t?void 0:0,pointerEvents:!t&&N!=="stable"?"none":void 0},s),Fe=!0;d!=null&&d.points&&(N==="align"||N==="stable")&&(Fe=!1);var ze=o;return m.Children.count(o)>1&&(ze=m.createElement("div",{className:"".concat(i,"-content")},o)),m.createElement(yc,J({visible:t,ref:x,leavedClassName:"".concat(i,"-hidden")},ye,{onAppearPrepare:we,onEnterPrepare:we,removeOnLeave:c,forceRender:u}),function(Me,Pe){var tt=Me.className,Ae=Me.style,mt=Ee(i,r,L,tt);return m.createElement(Cre,{target:q(),key:"popup",ref:w,monitorWindowResize:!0,disabled:Fe,align:d,onAlign:ge},m.createElement("div",{ref:Pe,className:mt,onMouseEnter:v,onMouseLeave:b,onMouseDownCapture:_,onTouchStartCapture:y,onClick:C,style:ne(ne({},Ae),Ie)},ze))})});yre.displayName="PopupInner";var wre=m.forwardRef(function(n,e){var t=n.prefixCls,i=n.visible,r=n.zIndex,s=n.children,o=n.mobile;o=o===void 0?{}:o;var a=o.popupClassName,l=o.popupStyle,c=o.popupMotion,u=c===void 0?{}:c,d=o.popupRender,h=n.onClick,f=m.useRef();m.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return f.current}}});var g=ne({zIndex:r},l),p=s;return m.Children.count(s)>1&&(p=m.createElement("div",{className:"".concat(t,"-content")},s)),d&&(p=d(p)),m.createElement(yc,J({visible:i,ref:f,removeOnLeave:!0},u),function(v,b){var _=v.className,y=v.style,C=Ee(t,a,_);return m.createElement("div",{ref:b,className:C,onClick:h,style:ne(ne({},y),g)},p)})});wre.displayName="MobilePopupInner";var mSe=["visible","mobile"],Sre=m.forwardRef(function(n,e){var t=n.visible,i=n.mobile,r=sn(n,mSe),s=m.useState(t),o=Ce(s,2),a=o[0],l=o[1],c=m.useState(!1),u=Ce(c,2),d=u[0],h=u[1],f=ne(ne({},r),{},{visible:a});m.useEffect(function(){l(t),t&&i&&h(VI())},[t,i]);var g=d?m.createElement(wre,J({},f,{mobile:i,ref:e})):m.createElement(yre,J({},f,{ref:e}));return m.createElement("div",null,m.createElement(Pwe,f),g)});Sre.displayName="Popup";var tU=m.createContext(null);function m4(){}function vSe(){return""}function bSe(n){return n?n.ownerDocument:window.document}var _Se=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function CSe(n){var e=function(t){Va(r,t);var i=Kd(r);function r(s){var o;ys(this,r),o=i.call(this,s),z(kt(o),"popupRef",m.createRef()),z(kt(o),"triggerRef",m.createRef()),z(kt(o),"portalContainer",void 0),z(kt(o),"attachId",void 0),z(kt(o),"clickOutsideHandler",void 0),z(kt(o),"touchOutsideHandler",void 0),z(kt(o),"contextMenuOutsideHandler1",void 0),z(kt(o),"contextMenuOutsideHandler2",void 0),z(kt(o),"mouseDownTimeout",void 0),z(kt(o),"focusTime",void 0),z(kt(o),"preClickTime",void 0),z(kt(o),"preTouchTime",void 0),z(kt(o),"delayTimer",void 0),z(kt(o),"hasPopupMouseDown",void 0),z(kt(o),"onMouseEnter",function(l){var c=o.props.mouseEnterDelay;o.fireEvents("onMouseEnter",l),o.delaySetPopupVisible(!0,c,c?null:l)}),z(kt(o),"onMouseMove",function(l){o.fireEvents("onMouseMove",l),o.setPoint(l)}),z(kt(o),"onMouseLeave",function(l){o.fireEvents("onMouseLeave",l),o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)}),z(kt(o),"onPopupMouseEnter",function(){o.clearDelayTimer()}),z(kt(o),"onPopupMouseLeave",function(l){var c;l.relatedTarget&&!l.relatedTarget.setTimeout&&tp((c=o.popupRef.current)===null||c===void 0?void 0:c.getElement(),l.relatedTarget)||o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)}),z(kt(o),"onFocus",function(l){o.fireEvents("onFocus",l),o.clearDelayTimer(),o.isFocusToShow()&&(o.focusTime=Date.now(),o.delaySetPopupVisible(!0,o.props.focusDelay))}),z(kt(o),"onMouseDown",function(l){o.fireEvents("onMouseDown",l),o.preClickTime=Date.now()}),z(kt(o),"onTouchStart",function(l){o.fireEvents("onTouchStart",l),o.preTouchTime=Date.now()}),z(kt(o),"onBlur",function(l){o.fireEvents("onBlur",l),o.clearDelayTimer(),o.isBlurToHide()&&o.delaySetPopupVisible(!1,o.props.blurDelay)}),z(kt(o),"onContextMenu",function(l){l.preventDefault(),o.fireEvents("onContextMenu",l),o.setPopupVisible(!0,l)}),z(kt(o),"onContextMenuClose",function(){o.isContextMenuToShow()&&o.close()}),z(kt(o),"onClick",function(l){if(o.fireEvents("onClick",l),o.focusTime){var c;if(o.preClickTime&&o.preTouchTime?c=Math.min(o.preClickTime,o.preTouchTime):o.preClickTime?c=o.preClickTime:o.preTouchTime&&(c=o.preTouchTime),Math.abs(c-o.focusTime)<20)return;o.focusTime=0}o.preClickTime=0,o.preTouchTime=0,o.isClickToShow()&&(o.isClickToHide()||o.isBlurToHide())&&l&&l.preventDefault&&l.preventDefault();var u=!o.state.popupVisible;(o.isClickToHide()&&!u||u&&o.isClickToShow())&&o.setPopupVisible(!o.state.popupVisible,l)}),z(kt(o),"onPopupMouseDown",function(){if(o.hasPopupMouseDown=!0,clearTimeout(o.mouseDownTimeout),o.mouseDownTimeout=window.setTimeout(function(){o.hasPopupMouseDown=!1},0),o.context){var l;(l=o.context).onPopupMouseDown.apply(l,arguments)}}),z(kt(o),"onDocumentClick",function(l){if(!(o.props.mask&&!o.props.maskClosable)){var c=l.target,u=o.getRootDomNode(),d=o.getPopupDomNode();(!tp(u,c)||o.isContextMenuOnly())&&!tp(d,c)&&!o.hasPopupMouseDown&&o.close()}}),z(kt(o),"getRootDomNode",function(){var l=o.props.getTriggerDOMNode;if(l)return l(o.triggerRef.current);try{var c=G_(o.triggerRef.current);if(c)return c}catch{}return Pd.findDOMNode(kt(o))}),z(kt(o),"getPopupClassNameFromAlign",function(l){var c=[],u=o.props,d=u.popupPlacement,h=u.builtinPlacements,f=u.prefixCls,g=u.alignPoint,p=u.getPopupClassNameFromAlign;return d&&h&&c.push(Owe(h,f,l,g)),p&&c.push(p(l)),c.join(" ")}),z(kt(o),"getComponent",function(){var l=o.props,c=l.prefixCls,u=l.destroyPopupOnHide,d=l.popupClassName,h=l.onPopupAlign,f=l.popupMotion,g=l.popupAnimation,p=l.popupTransitionName,v=l.popupStyle,b=l.mask,_=l.maskAnimation,y=l.maskTransitionName,C=l.maskMotion,w=l.zIndex,x=l.popup,k=l.stretch,E=l.alignPoint,L=l.mobile,M=l.forceRender,D=l.onPopupClick,O=o.state,A=O.popupVisible,R=O.point,V=o.getPopupAlign(),F={};return o.isMouseEnterToShow()&&(F.onMouseEnter=o.onPopupMouseEnter),o.isMouseLeaveToHide()&&(F.onMouseLeave=o.onPopupMouseLeave),F.onMouseDown=o.onPopupMouseDown,F.onTouchStart=o.onPopupMouseDown,m.createElement(Sre,J({prefixCls:c,destroyPopupOnHide:u,visible:A,point:E&&R,className:d,align:V,onAlign:h,animation:g,getClassNameFromAlign:o.getPopupClassNameFromAlign},F,{stretch:k,getRootDomNode:o.getRootDomNode,style:v,mask:b,zIndex:w,transitionName:p,maskAnimation:_,maskTransitionName:y,maskMotion:C,ref:o.popupRef,motion:f,mobile:L,forceRender:M,onClick:D}),typeof x=="function"?x():x)}),z(kt(o),"attachParent",function(l){On.cancel(o.attachId);var c=o.props,u=c.getPopupContainer,d=c.getDocument,h=o.getRootDomNode(),f;u?(h||u.length===0)&&(f=u(h)):f=d(o.getRootDomNode()).body,f?f.appendChild(l):o.attachId=On(function(){o.attachParent(l)})}),z(kt(o),"getContainer",function(){if(!o.portalContainer){var l=o.props.getDocument,c=l(o.getRootDomNode()).createElement("div");c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.width="100%",o.portalContainer=c}return o.attachParent(o.portalContainer),o.portalContainer}),z(kt(o),"setPoint",function(l){var c=o.props.alignPoint;!c||!l||o.setState({point:{pageX:l.pageX,pageY:l.pageY}})}),z(kt(o),"handlePortalUpdate",function(){o.state.prevPopupVisible!==o.state.popupVisible&&o.props.afterPopupVisibleChange(o.state.popupVisible)}),z(kt(o),"triggerContextValue",{onPopupMouseDown:o.onPopupMouseDown});var a;return"popupVisible"in s?a=!!s.popupVisible:a=!!s.defaultPopupVisible,o.state={prevPopupVisible:a,popupVisible:a},_Se.forEach(function(l){o["fire".concat(l)]=function(c){o.fireEvents(l,c)}}),o}return ws(r,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var o=this.props,a=this.state;if(a.popupVisible){var l;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(l=o.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Ql(l,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(l=l||o.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Ql(l,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(l=l||o.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Ql(l,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Ql(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),On.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var o;return((o=this.popupRef.current)===null||o===void 0?void 0:o.getElement())||null}},{key:"getPopupAlign",value:function(){var o=this.props,a=o.popupPlacement,l=o.popupAlign,c=o.builtinPlacements;return a&&c?Awe(c,a,l):l}},{key:"setPopupVisible",value:function(o,a){var l=this.props.alignPoint,c=this.state.popupVisible;this.clearDelayTimer(),c!==o&&("popupVisible"in this.props||this.setState({popupVisible:o,prevPopupVisible:c}),this.props.onPopupVisibleChange(o)),l&&a&&o&&this.setPoint(a)}},{key:"delaySetPopupVisible",value:function(o,a,l){var c=this,u=a*1e3;if(this.clearDelayTimer(),u){var d=l?{pageX:l.pageX,pageY:l.pageY}:null;this.delayTimer=window.setTimeout(function(){c.setPopupVisible(o,d),c.clearDelayTimer()},u)}else this.setPopupVisible(o,l)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(o){var a=this.props.children.props,l=this.props;return a[o]&&l[o]?this["fire".concat(o)]:a[o]||l[o]}},{key:"isClickToShow",value:function(){var o=this.props,a=o.action,l=o.showAction;return a.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var o=this.props.action;return o==="contextMenu"||o.length===1&&o[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var o=this.props,a=o.action,l=o.showAction;return a.indexOf("contextMenu")!==-1||l.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var o=this.props,a=o.action,l=o.hideAction;return a.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var o=this.props,a=o.action,l=o.showAction;return a.indexOf("hover")!==-1||l.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var o=this.props,a=o.action,l=o.hideAction;return a.indexOf("hover")!==-1||l.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var o=this.props,a=o.action,l=o.showAction;return a.indexOf("focus")!==-1||l.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var o=this.props,a=o.action,l=o.hideAction;return a.indexOf("focus")!==-1||l.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var o;(o=this.popupRef.current)===null||o===void 0||o.forceAlign()}}},{key:"fireEvents",value:function(o,a){var l=this.props.children.props[o];l&&l(a);var c=this.props[o];c&&c(a)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var o=this.state.popupVisible,a=this.props,l=a.children,c=a.forceRender,u=a.alignPoint,d=a.className,h=a.autoDestroy,f=m.Children.only(l),g={key:"trigger"};this.isContextMenuToShow()?g.onContextMenu=this.onContextMenu:g.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(g.onClick=this.onClick,g.onMouseDown=this.onMouseDown,g.onTouchStart=this.onTouchStart):(g.onClick=this.createTwoChains("onClick"),g.onMouseDown=this.createTwoChains("onMouseDown"),g.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(g.onMouseEnter=this.onMouseEnter,u&&(g.onMouseMove=this.onMouseMove)):g.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?g.onMouseLeave=this.onMouseLeave:g.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(g.onFocus=this.onFocus,g.onBlur=this.onBlur):(g.onFocus=this.createTwoChains("onFocus"),g.onBlur=this.createTwoChains("onBlur"));var p=Ee(f&&f.props&&f.props.className,d);p&&(g.className=p);var v=ne({},g);$w(f)&&(v.ref=jd(this.triggerRef,f.ref));var b=m.cloneElement(f,v),_;return(o||this.popupRef.current||c)&&(_=m.createElement(n,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!o&&h&&(_=null),m.createElement(tU.Provider,{value:this.triggerContextValue},b,_)}}],[{key:"getDerivedStateFromProps",value:function(o,a){var l=o.popupVisible,c={};return l!==void 0&&a.popupVisible!==l&&(c.popupVisible=l,c.prevPopupVisible=a.popupVisible),c}}]),r}(m.Component);return z(e,"contextType",tU),z(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:vSe,getDocument:bSe,onPopupVisibleChange:m4,afterPopupVisibleChange:m4,onPopupAlign:m4,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}const $I=CSe(Mwe);var ySe=["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],wSe=function(e){var t=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}}}},SSe=function(e,t){var i=e.prefixCls;e.disabled;var r=e.visible,s=e.children,o=e.popupElement,a=e.containerWidth,l=e.animation,c=e.transitionName,u=e.dropdownStyle,d=e.dropdownClassName,h=e.direction,f=h===void 0?"ltr":h,g=e.placement,p=e.dropdownMatchSelectWidth,v=e.dropdownRender,b=e.dropdownAlign,_=e.getPopupContainer,y=e.empty,C=e.getTriggerDOMNode,w=e.onPopupVisibleChange,x=e.onPopupMouseEnter,k=sn(e,ySe),E="".concat(i,"-dropdown"),L=o;v&&(L=v(o));var M=m.useMemo(function(){return wSe(p)},[p]),D=l?"".concat(E,"-").concat(l):c,O=m.useRef(null);m.useImperativeHandle(t,function(){return{getPopupElement:function(){return O.current}}});var A=ne({minWidth:a},u);return typeof p=="number"?A.width=p:p&&(A.width=a),m.createElement($I,J({},k,{showAction:w?["click"]:[],hideAction:w?["click"]:[],popupPlacement:g||(f==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:M,prefixCls:E,popupTransitionName:D,popup:m.createElement("div",{ref:O,onMouseEnter:x},L),popupAlign:b,popupVisible:r,getPopupContainer:_,popupClassName:Ee(d,z({},"".concat(E,"-empty"),y)),popupStyle:A,getTriggerDOMNode:C,onPopupVisibleChange:w}),s)},xre=m.forwardRef(SSe);xre.displayName="SelectTrigger";function nU(n,e){var t=n.key,i;return"value"in n&&(i=n.value),t??(i!==void 0?i:"rc-index-key-".concat(e))}function kre(n,e){var t=n||{},i=t.label,r=t.value,s=t.options;return{label:i||(e?"children":"label"),value:r||"value",options:s||"options"}}function xSe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.fieldNames,i=e.childrenAsData,r=[],s=kre(t,!1),o=s.label,a=s.value,l=s.options;function c(u,d){u.forEach(function(h){var f=h[o];if(d||!(l in h)){var g=h[a];r.push({key:nU(h,r.length),groupOption:d,data:h,label:f,value:g})}else{var p=f;p===void 0&&i&&(p=h.label),r.push({key:nU(h,r.length),group:!0,data:h,label:p}),c(h[l],!0)}})}return c(n,!1),r}function h3(n){var e=ne({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return ps(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}function kSe(n,e){if(!e||!e.length)return null;var t=!1;function i(s,o){var a=Nne(o),l=a[0],c=a.slice(1);if(!l)return[s];var u=s.split(l);return t=t||u.length>1,u.reduce(function(d,h){return[].concat(Et(d),Et(i(h,c)))},[]).filter(function(d){return d})}var r=i(n,e);return t?r:null}var ESe=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","showArrow","inputIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],LSe=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function f3(n){return n==="tags"||n==="multiple"}var NSe=m.forwardRef(function(n,e){var t,i,r=n.id,s=n.prefixCls,o=n.className,a=n.showSearch,l=n.tagRender,c=n.direction,u=n.omitDomProps,d=n.displayValues,h=n.onDisplayValuesChange,f=n.emptyOptions,g=n.notFoundContent,p=g===void 0?"Not Found":g,v=n.onClear,b=n.mode,_=n.disabled,y=n.loading,C=n.getInputElement,w=n.getRawInputElement,x=n.open,k=n.defaultOpen,E=n.onDropdownVisibleChange,L=n.activeValue,M=n.onActiveValueChange,D=n.activeDescendantId,O=n.searchValue,A=n.autoClearSearchValue,R=n.onSearch,V=n.onSearchSplit,F=n.tokenSeparators,T=n.allowClear,N=n.showArrow,B=n.inputIcon,$=n.clearIcon,j=n.OptionList,Y=n.animation,G=n.transitionName,X=n.dropdownStyle,q=n.dropdownClassName,re=n.dropdownMatchSelectWidth,ge=n.dropdownRender,ye=n.dropdownAlign,we=n.placement,Ie=n.getPopupContainer,Fe=n.showAction,ze=Fe===void 0?[]:Fe,Me=n.onFocus,Pe=n.onBlur,tt=n.onKeyUp,Ae=n.onKeyDown,mt=n.onMouseDown,ft=sn(n,ESe),Le=f3(b),Ge=(a!==void 0?a:Le)||b==="combobox",Oe=ne({},ft);LSe.forEach(function(En){delete Oe[En]}),u==null||u.forEach(function(En){delete Oe[En]});var xe=m.useState(!1),at=Ce(xe,2),gt=at[0],Ct=at[1];m.useEffect(function(){Ct(VI())},[]);var nt=m.useRef(null),se=m.useRef(null),fe=m.useRef(null),Ne=m.useRef(null),Ve=m.useRef(null),lt=rwe(),Dt=Ce(lt,3),Qt=Dt[0],he=Dt[1],Ke=Dt[2];m.useImperativeHandle(e,function(){var En,un;return{focus:(En=Ne.current)===null||En===void 0?void 0:En.focus,blur:(un=Ne.current)===null||un===void 0?void 0:un.blur,scrollTo:function(js){var ar;return(ar=Ve.current)===null||ar===void 0?void 0:ar.scrollTo(js)}}});var ue=m.useMemo(function(){var En;if(b!=="combobox")return O;var un=(En=d[0])===null||En===void 0?void 0:En.value;return typeof un=="string"||typeof un=="number"?String(un):""},[O,b,d]),ee=b==="combobox"&&typeof C=="function"&&C()||null,oe=typeof w=="function"&&w(),pe=Ww(se,oe==null||(t=oe.props)===null||t===void 0?void 0:t.ref),le=Ps(void 0,{defaultValue:k,value:x}),ve=Ce(le,2),He=ve[0],Qe=ve[1],ut=He,St=!p&&f;(_||St&&ut&&b==="combobox")&&(ut=!1);var Lt=St?!1:ut,be=m.useCallback(function(En){var un=En!==void 0?En:!ut;_||(Qe(un),ut!==un&&(E==null||E(un)))},[_,ut,Qe,E]),H=m.useMemo(function(){return(F||[]).some(function(En){return[`
`,`\r
`].includes(En)})},[F]),W=function(un,Qr,js){var ar=!0,Kn=un;M==null||M(null);var Mn=js?null:kSe(un,F);return b!=="combobox"&&Mn&&(Kn="",V==null||V(Mn),be(!1),ar=!1),R&&ue!==Kn&&R(Kn,{source:Qr?"typing":"effect"}),ar},K=function(un){!un||!un.trim()||R(un,{source:"submit"})};m.useEffect(function(){!ut&&!Le&&b!=="combobox"&&W("",!1,!1)},[ut]),m.useEffect(function(){He&&_&&Qe(!1),_&&he(!1)},[_]);var Q=ire(),ie=Ce(Q,2),me=ie[0],Se=ie[1],Ze=function(un){var Qr=me(),js=un.which;if(js===je.ENTER&&(b!=="combobox"&&un.preventDefault(),ut||be(!0)),Se(!!ue),js===je.BACKSPACE&&!Qr&&Le&&!ue&&d.length){for(var ar=Et(d),Kn=null,Mn=ar.length-1;Mn>=0;Mn-=1){var di=ar[Mn];if(!di.disabled){ar.splice(Mn,1),Kn=di;break}}Kn&&h(ar,{type:"remove",values:[Kn]})}for(var Yi=arguments.length,Tr=new Array(Yi>1?Yi-1:0),Ks=1;Ks<Yi;Ks++)Tr[Ks-1]=arguments[Ks];if(ut&&Ve.current){var th;(th=Ve.current).onKeyDown.apply(th,[un].concat(Tr))}Ae==null||Ae.apply(void 0,[un].concat(Tr))},Je=function(un){for(var Qr=arguments.length,js=new Array(Qr>1?Qr-1:0),ar=1;ar<Qr;ar++)js[ar-1]=arguments[ar];if(ut&&Ve.current){var Kn;(Kn=Ve.current).onKeyUp.apply(Kn,[un].concat(js))}tt==null||tt.apply(void 0,[un].concat(js))},wt=function(un){var Qr=d.filter(function(js){return js!==un});h(Qr,{type:"remove",values:[un]})},zt=m.useRef(!1),Zt=function(){he(!0),_||(Me&&!zt.current&&Me.apply(void 0,arguments),ze.includes("focus")&&be(!0)),zt.current=!0},Dn=function(){he(!1,function(){zt.current=!1,be(!1)}),!_&&(ue&&(b==="tags"?R(ue,{source:"submit"}):b==="multiple"&&R("",{source:"blur"})),Pe&&Pe.apply(void 0,arguments))},on=[];m.useEffect(function(){return function(){on.forEach(function(En){return clearTimeout(En)}),on.splice(0,on.length)}},[]);var oi=function(un){var Qr,js=un.target,ar=(Qr=fe.current)===null||Qr===void 0?void 0:Qr.getPopupElement();if(ar&&ar.contains(js)){var Kn=setTimeout(function(){var Tr=on.indexOf(Kn);if(Tr!==-1&&on.splice(Tr,1),Ke(),!gt&&!ar.contains(document.activeElement)){var Ks;(Ks=Ne.current)===null||Ks===void 0||Ks.focus()}});on.push(Kn)}for(var Mn=arguments.length,di=new Array(Mn>1?Mn-1:0),Yi=1;Yi<Mn;Yi++)di[Yi-1]=arguments[Yi];mt==null||mt.apply(void 0,[un].concat(di))},nn=m.useState(null),bn=Ce(nn,2),pt=bn[0],ce=bn[1],Xe=m.useState({}),Re=Ce(Xe,2),st=Re[1];function Bt(){st({})}oo(function(){if(Lt){var En,un=Math.ceil((En=nt.current)===null||En===void 0?void 0:En.offsetWidth);pt!==un&&!Number.isNaN(un)&&ce(un)}},[Lt]);var fn;oe&&(fn=function(un){be(un)}),swe(function(){var En;return[nt.current,(En=fe.current)===null||En===void 0?void 0:En.getPopupElement()]},Lt,be,!!oe);var jn=m.useMemo(function(){return ne(ne({},n),{},{notFoundContent:p,open:ut,triggerOpen:Lt,id:r,showSearch:Ge,multiple:Le,toggleOpen:be})},[n,p,Lt,ut,r,Ge,Le,be]),Nr=N!==void 0?N:y||!Le&&b!=="combobox",$r;Nr&&($r=m.createElement(b2,{className:Ee("".concat(s,"-arrow"),z({},"".concat(s,"-arrow-loading"),y)),customizeIcon:B,customizeIconProps:{loading:y,searchValue:ue,open:ut,focused:Qt,showSearch:Ge}}));var Wi,eh=function(){var un;v==null||v(),(un=Ne.current)===null||un===void 0||un.focus(),h([],{type:"clear",values:d}),W("",!1,!1)};!_&&T&&(d.length||ue)&&!(b==="combobox"&&ue==="")&&(Wi=m.createElement(b2,{className:"".concat(s,"-clear"),onMouseDown:eh,customizeIcon:$},""));var Iu=m.createElement(j,{ref:Ve}),Yf=Ee(s,o,(i={},z(i,"".concat(s,"-focused"),Qt),z(i,"".concat(s,"-multiple"),Le),z(i,"".concat(s,"-single"),!Le),z(i,"".concat(s,"-allow-clear"),T),z(i,"".concat(s,"-show-arrow"),Nr),z(i,"".concat(s,"-disabled"),_),z(i,"".concat(s,"-loading"),y),z(i,"".concat(s,"-open"),ut),z(i,"".concat(s,"-customize-input"),ee),z(i,"".concat(s,"-show-search"),Ge),i)),Eb=m.createElement(xre,{ref:fe,disabled:_,prefixCls:s,visible:Lt,popupElement:Iu,containerWidth:pt,animation:Y,transitionName:G,dropdownStyle:X,dropdownClassName:q,direction:c,dropdownMatchSelectWidth:re,dropdownRender:ge,dropdownAlign:ye,placement:we,getPopupContainer:Ie,empty:f,getTriggerDOMNode:function(){return se.current},onPopupVisibleChange:fn,onPopupMouseEnter:Bt},oe?m.cloneElement(oe,{ref:pe}):m.createElement(cre,J({},n,{domRef:se,prefixCls:s,inputElement:ee,ref:Ne,id:r,showSearch:Ge,autoClearSearchValue:A,mode:b,activeDescendantId:D,tagRender:l,values:d,open:ut,onToggleOpen:be,activeValue:L,searchValue:ue,onSearch:W,onSearchSubmit:K,onRemove:wt,tokenWithEnter:H}))),Lb;return oe?Lb=Eb:Lb=m.createElement("div",J({className:Yf},Oe,{ref:nt,onMouseDown:oi,onKeyDown:Ze,onKeyUp:Je,onFocus:Zt,onBlur:Dn}),Qt&&!ut&&m.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(d.map(function(En){var un=En.label,Qr=En.value;return["number","string"].includes(Rt(un))?un:Qr}).join(", "))),Eb,$r,Wi),m.createElement(nre.Provider,{value:jn},Lb)});const TSe=function(n,e){var t=m.useRef({values:new Map,options:new Map}),i=m.useMemo(function(){var s=t.current,o=s.values,a=s.options,l=n.map(function(d){if(d.label===void 0){var h;return ne(ne({},d),{},{label:(h=o.get(d.value))===null||h===void 0?void 0:h.label})}return d}),c=new Map,u=new Map;return l.forEach(function(d){c.set(d.value,d),u.set(d.value,e.get(d.value)||a.get(d.value))}),t.current.values=c,t.current.options=u,l},[n,e]),r=m.useCallback(function(s){return e.get(s)||t.current.options.get(s)},[e]);return[i,r]};function v4(n,e){return are(n).join("").toUpperCase().includes(e)}const ISe=function(n,e,t,i,r){return m.useMemo(function(){if(!t||i===!1)return n;var s=e.options,o=e.label,a=e.value,l=[],c=typeof i=="function",u=t.toUpperCase(),d=c?i:function(f,g){return r?v4(g[r],u):g[s]?v4(g[o!=="children"?o:"label"],u):v4(g[a],u)},h=c?function(f){return h3(f)}:function(f){return f};return n.forEach(function(f){if(f[s]){var g=d(t,h(f));if(g)l.push(f);else{var p=f[s].filter(function(v){return d(t,h(v))});p.length&&l.push(ne(ne({},f),{},z({},s,p)))}return}d(t,h(f))&&l.push(f)}),l},[n,i,r,t,e])};var iU=0,DSe=da();function MSe(){var n;return DSe?(n=iU,iU+=1):n="TEST_OR_SSR",n}function RSe(n){var e=m.useState(),t=Ce(e,2),i=t[0],r=t[1];return m.useEffect(function(){r("rc_select_".concat(MSe()))},[]),n||i}var ASe=["children","value"],OSe=["children"];function PSe(n){var e=n,t=e.key,i=e.props,r=i.children,s=i.value,o=sn(i,ASe);return ne({key:t,value:s!==void 0?s:t,children:r},o)}function Ere(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return gu(n).map(function(t,i){if(!m.isValidElement(t)||!t.type)return null;var r=t,s=r.type.isSelectOptGroup,o=r.key,a=r.props,l=a.children,c=sn(a,OSe);return e||!s?PSe(t):ne(ne({key:"__RC_SELECT_GRP__".concat(o===null?i:o,"__"),label:o},c),{},{options:Ere(l)})}).filter(function(t){return t})}function FSe(n,e,t,i,r){return m.useMemo(function(){var s=n,o=!n;o&&(s=Ere(e));var a=new Map,l=new Map,c=function(h,f,g){g&&typeof g=="string"&&h.set(f[g],f)};function u(d){for(var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=0;f<d.length;f+=1){var g=d[f];!g[t.options]||h?(a.set(g[t.value],g),c(l,g,t.label),c(l,g,i),c(l,g,r)):u(g[t.options],!0)}}return u(s),{options:s,valueOptions:a,labelOptions:l}},[n,e,t,i,r])}function rU(n){var e=m.useRef();e.current=n;var t=m.useCallback(function(){return e.current.apply(e,arguments)},[]);return t}var IF=function(){return null};IF.isSelectOptGroup=!0;var DF=function(){return null};DF.isSelectOption=!0;var Lre=m.forwardRef(function(n,e){var t=n.height,i=n.offsetY,r=n.offsetX,s=n.children,o=n.prefixCls,a=n.onInnerResize,l=n.innerProps,c=n.rtl,u=n.extra,d={},h={display:"flex",flexDirection:"column"};return i!==void 0&&(d={height:t,position:"relative",overflow:"hidden"},h=ne(ne({},h),{},z(z(z(z(z({transform:"translateY(".concat(i,"px)")},c?"marginRight":"marginLeft",-r),"position","absolute"),"left",0),"right",0),"top",0))),m.createElement("div",{style:d},m.createElement(Cf,{onResize:function(g){var p=g.offsetHeight;p&&a&&a()}},m.createElement("div",J({style:h,className:Ee(z({},"".concat(o,"-holder-inner"),o)),ref:e},l),s,u)))});Lre.displayName="Filler";function BSe(n){var e=n.children,t=n.setRef,i=m.useCallback(function(r){t(r)},[]);return m.cloneElement(e,{ref:i})}function HSe(n,e,t,i,r,s,o,a){var l=a.getKey;return n.slice(e,t+1).map(function(c,u){var d=e+u,h=o(c,d,{style:{width:i},offsetX:r}),f=l(c);return m.createElement(BSe,{key:f,setRef:function(p){return s(c,p)}},h)})}function VSe(n,e,t){var i=n.length,r=e.length,s,o;if(i===0&&r===0)return null;i<r?(s=n,o=e):(s=e,o=n);var a={__EMPTY_ITEM__:!0};function l(g){return g!==void 0?t(g):a}for(var c=null,u=Math.abs(i-r)!==1,d=0;d<o.length;d+=1){var h=l(s[d]),f=l(o[d]);if(h!==f){c=d,u=u||h!==l(o[d+1]);break}}return c===null?null:{index:c,multiple:u}}function zSe(n,e,t){var i=m.useState(n),r=Ce(i,2),s=r[0],o=r[1],a=m.useState(null),l=Ce(a,2),c=l[0],u=l[1];return m.useEffect(function(){var d=VSe(s||[],n||[],e);(d==null?void 0:d.index)!==void 0&&u(n[d.index]),o(n)},[n]),[c]}var sU=(typeof navigator>"u"?"undefined":Rt(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const Nre=function(n,e,t,i){var r=m.useRef(!1),s=m.useRef(null);function o(){clearTimeout(s.current),r.current=!0,s.current=setTimeout(function(){r.current=!1},50)}var a=m.useRef({top:n,bottom:e,left:t,right:i});return a.current.top=n,a.current.bottom=e,a.current.left=t,a.current.right=i,function(l,c){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=l?c<0&&a.current.left||c>0&&a.current.right:c<0&&a.current.top||c>0&&a.current.bottom;return u&&d?(clearTimeout(s.current),r.current=!1):(!d||r.current)&&o(),!r.current&&d}};function WSe(n,e,t,i,r,s,o){var a=m.useRef(0),l=m.useRef(null),c=m.useRef(null),u=m.useRef(!1),d=Nre(e,t,i,r);function h(_,y){if(On.cancel(l.current),!d(!1,y)){var C=_;if(!C._virtualHandled)C._virtualHandled=!0;else return;a.current+=y,c.current=y,sU||C.preventDefault(),l.current=On(function(){var w=u.current?10:1;o(a.current*w,!1),a.current=0})}}function f(_,y){o(y,!0),sU||_.preventDefault()}var g=m.useRef(null),p=m.useRef(null);function v(_){if(n){On.cancel(p.current),p.current=On(function(){g.current=null},2);var y=_.deltaX,C=_.deltaY,w=_.shiftKey,x=y,k=C;(g.current==="sx"||!g.current&&w&&C&&!y)&&(x=C,k=0,g.current="sx");var E=Math.abs(x),L=Math.abs(k);g.current===null&&(g.current=s&&E>L?"x":"y"),g.current==="y"?h(_,k):f(_,x)}}function b(_){n&&(u.current=_.detail===c.current)}return[v,b]}function $Se(n,e,t,i){var r=m.useMemo(function(){return[new Map,[]]},[n,t.id,i]),s=Ce(r,2),o=s[0],a=s[1],l=function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u,h=o.get(u),f=o.get(d);if(h===void 0||f===void 0)for(var g=n.length,p=a.length;p<g;p+=1){var v,b=n[p],_=e(b);o.set(_,p);var y=(v=t.get(_))!==null&&v!==void 0?v:i;if(a[p]=(a[p-1]||0)+y,_===u&&(h=p),_===d&&(f=p),h!==void 0&&f!==void 0)break}return{top:a[h-1]||0,bottom:a[f]}};return l}var USe=function(){function n(){ys(this,n),z(this,"maps",void 0),z(this,"id",0),z(this,"diffKeys",new Set),this.maps=Object.create(null)}return ws(n,[{key:"set",value:function(t,i){this.maps[t]=i,this.id+=1,this.diffKeys.add(t)}},{key:"get",value:function(t){return this.maps[t]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),n}();function oU(n){var e=parseFloat(n);return isNaN(e)?0:e}function jSe(n,e,t){var i=m.useState(0),r=Ce(i,2),s=r[0],o=r[1],a=m.useRef(new Map),l=m.useRef(new USe),c=m.useRef(0);function u(){c.current+=1}function d(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;u();var g=function(){var b=!1;a.current.forEach(function(_,y){if(_&&_.offsetParent){var C=_.offsetHeight,w=getComputedStyle(_),x=w.marginTop,k=w.marginBottom,E=oU(x),L=oU(k),M=C+E+L;l.current.get(y)!==M&&(l.current.set(y,M),b=!0)}}),b&&o(function(_){return _+1})};if(f)g();else{c.current+=1;var p=c.current;Promise.resolve().then(function(){p===c.current&&g()})}}function h(f,g){var p=n(f);a.current.get(p),g?(a.current.set(p,g),d()):a.current.delete(p)}return m.useEffect(function(){return u},[]),[h,d,l.current,s]}var aU=14/15;function KSe(n,e,t){var i=m.useRef(!1),r=m.useRef(0),s=m.useRef(0),o=m.useRef(null),a=m.useRef(null),l,c=function(f){if(i.current){var g=Math.ceil(f.touches[0].pageX),p=Math.ceil(f.touches[0].pageY),v=r.current-g,b=s.current-p,_=Math.abs(v)>Math.abs(b);_?r.current=g:s.current=p;var y=t(_,_?v:b,!1,f);y&&f.preventDefault(),clearInterval(a.current),y&&(a.current=setInterval(function(){_?v*=aU:b*=aU;var C=Math.floor(_?v:b);(!t(_,C,!0)||Math.abs(C)<=.1)&&clearInterval(a.current)},16))}},u=function(){i.current=!1,l()},d=function(f){l(),f.touches.length===1&&!i.current&&(i.current=!0,r.current=Math.ceil(f.touches[0].pageX),s.current=Math.ceil(f.touches[0].pageY),o.current=f.target,o.current.addEventListener("touchmove",c,{passive:!1}),o.current.addEventListener("touchend",u,{passive:!0}))};l=function(){o.current&&(o.current.removeEventListener("touchmove",c),o.current.removeEventListener("touchend",u))},oo(function(){return n&&e.current.addEventListener("touchstart",d,{passive:!0}),function(){var h;(h=e.current)===null||h===void 0||h.removeEventListener("touchstart",d),l(),clearInterval(a.current)}},[n])}function lU(n){return Math.floor(Math.pow(n,.5))}function g3(n,e){var t="touches"in n?n.touches[0]:n;return t[e?"pageX":"pageY"]-window[e?"scrollX":"scrollY"]}function qSe(n,e,t){m.useEffect(function(){var i=e.current;if(n&&i){var r=!1,s,o,a=function(){On.cancel(s)},l=function h(){a(),s=On(function(){t(o),h()})},c=function(f){if(!f.target.draggable){var g=f;g._virtualHandled||(g._virtualHandled=!0,r=!0)}},u=function(){r=!1,a()},d=function(f){if(r){var g=g3(f,!1),p=i.getBoundingClientRect(),v=p.top,b=p.bottom;if(g<=v){var _=v-g;o=-lU(_),l()}else if(g>=b){var y=g-b;o=lU(y),l()}else a()}};return i.addEventListener("mousedown",c),i.ownerDocument.addEventListener("mouseup",u),i.ownerDocument.addEventListener("mousemove",d),function(){i.removeEventListener("mousedown",c),i.ownerDocument.removeEventListener("mouseup",u),i.ownerDocument.removeEventListener("mousemove",d),a()}}},[n])}var GSe=10;function YSe(n,e,t,i,r,s,o,a){var l=m.useRef(),c=m.useState(null),u=Ce(c,2),d=u[0],h=u[1];return oo(function(){if(d&&d.times<GSe){if(!n.current){h(function(B){return ne({},B)});return}s();var f=d.targetAlign,g=d.originAlign,p=d.index,v=d.offset,b=n.current.clientHeight,_=!1,y=f,C=null;if(b){for(var w=f||g,x=0,k=0,E=0,L=Math.min(e.length-1,p),M=0;M<=L;M+=1){var D=r(e[M]);k=x;var O=t.get(D);E=k+(O===void 0?i:O),x=E}for(var A=w==="top"?v:b-v,R=L;R>=0;R-=1){var V=r(e[R]),F=t.get(V);if(F===void 0){_=!0;break}if(A-=F,A<=0)break}switch(w){case"top":C=k-v;break;case"bottom":C=E-b+v;break;default:{var T=n.current.scrollTop,N=T+b;k<T?y="top":E>N&&(y="bottom")}}C!==null&&o(C),C!==d.lastTop&&(_=!0)}_&&h(ne(ne({},d),{},{times:d.times+1,targetAlign:y,lastTop:C}))}},[d,n.current]),function(f){if(f==null){a();return}if(On.cancel(l.current),typeof f=="number")o(f);else if(f&&Rt(f)==="object"){var g,p=f.align;"index"in f?g=f.index:g=e.findIndex(function(_){return r(_)===f.key});var v=f.offset,b=v===void 0?0:v;h({times:0,index:g,offset:b,originAlign:p})}}}var cU=m.forwardRef(function(n,e){var t=n.prefixCls,i=n.rtl,r=n.scrollOffset,s=n.scrollRange,o=n.onStartMove,a=n.onStopMove,l=n.onScroll,c=n.horizontal,u=n.spinSize,d=n.containerSize,h=n.style,f=n.thumbStyle,g=n.showScrollBar,p=m.useState(!1),v=Ce(p,2),b=v[0],_=v[1],y=m.useState(null),C=Ce(y,2),w=C[0],x=C[1],k=m.useState(null),E=Ce(k,2),L=E[0],M=E[1],D=!i,O=m.useRef(),A=m.useRef(),R=m.useState(g),V=Ce(R,2),F=V[0],T=V[1],N=m.useRef(),B=function(){g===!0||g===!1||(clearTimeout(N.current),T(!0),N.current=setTimeout(function(){T(!1)},3e3))},$=s-d||0,j=d-u||0,Y=m.useMemo(function(){if(r===0||$===0)return 0;var Fe=r/$;return Fe*j},[r,$,j]),G=function(ze){ze.stopPropagation(),ze.preventDefault()},X=m.useRef({top:Y,dragging:b,pageY:w,startTop:L});X.current={top:Y,dragging:b,pageY:w,startTop:L};var q=function(ze){_(!0),x(g3(ze,c)),M(X.current.top),o(),ze.stopPropagation(),ze.preventDefault()};m.useEffect(function(){var Fe=function(tt){tt.preventDefault()},ze=O.current,Me=A.current;return ze.addEventListener("touchstart",Fe,{passive:!1}),Me.addEventListener("touchstart",q,{passive:!1}),function(){ze.removeEventListener("touchstart",Fe),Me.removeEventListener("touchstart",q)}},[]);var re=m.useRef();re.current=$;var ge=m.useRef();ge.current=j,m.useEffect(function(){if(b){var Fe,ze=function(tt){var Ae=X.current,mt=Ae.dragging,ft=Ae.pageY,Le=Ae.startTop;On.cancel(Fe);var Ge=O.current.getBoundingClientRect(),Oe=d/(c?Ge.width:Ge.height);if(mt){var xe=(g3(tt,c)-ft)*Oe,at=Le;!D&&c?at-=xe:at+=xe;var gt=re.current,Ct=ge.current,nt=Ct?at/Ct:0,se=Math.ceil(nt*gt);se=Math.max(se,0),se=Math.min(se,gt),Fe=On(function(){l(se,c)})}},Me=function(){_(!1),a()};return window.addEventListener("mousemove",ze,{passive:!0}),window.addEventListener("touchmove",ze,{passive:!0}),window.addEventListener("mouseup",Me,{passive:!0}),window.addEventListener("touchend",Me,{passive:!0}),function(){window.removeEventListener("mousemove",ze),window.removeEventListener("touchmove",ze),window.removeEventListener("mouseup",Me),window.removeEventListener("touchend",Me),On.cancel(Fe)}}},[b]),m.useEffect(function(){return B(),function(){clearTimeout(N.current)}},[r]),m.useImperativeHandle(e,function(){return{delayHidden:B}});var ye="".concat(t,"-scrollbar"),we={position:"absolute",visibility:F?null:"hidden"},Ie={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return c?(we.height=8,we.left=0,we.right=0,we.bottom=0,Ie.height="100%",Ie.width=u,D?Ie.left=Y:Ie.right=Y):(we.width=8,we.top=0,we.bottom=0,D?we.right=0:we.left=0,Ie.width="100%",Ie.height=u,Ie.top=Y),m.createElement("div",{ref:O,className:Ee(ye,z(z(z({},"".concat(ye,"-horizontal"),c),"".concat(ye,"-vertical"),!c),"".concat(ye,"-visible"),F)),style:ne(ne({},we),h),onMouseDown:G,onMouseMove:B},m.createElement("div",{ref:A,className:Ee("".concat(ye,"-thumb"),z({},"".concat(ye,"-thumb-moving"),b)),style:ne(ne({},Ie),f),onMouseDown:q}))}),ZSe=20;function uU(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=n/e*n;return isNaN(t)&&(t=0),t=Math.max(t,ZSe),Math.floor(t)}var XSe=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],QSe=[],JSe={overflowY:"auto",overflowAnchor:"none"};function exe(n,e){var t=n.prefixCls,i=t===void 0?"rc-virtual-list":t,r=n.className,s=n.height,o=n.itemHeight,a=n.fullHeight,l=a===void 0?!0:a,c=n.style,u=n.data,d=n.children,h=n.itemKey,f=n.virtual,g=n.direction,p=n.scrollWidth,v=n.component,b=v===void 0?"div":v,_=n.onScroll,y=n.onVirtualScroll,C=n.onVisibleChange,w=n.innerProps,x=n.extraRender,k=n.styles,E=n.showScrollBar,L=E===void 0?"optional":E,M=sn(n,XSe),D=m.useCallback(function(Re){return typeof h=="function"?h(Re):Re==null?void 0:Re[h]},[h]),O=jSe(D),A=Ce(O,4),R=A[0],V=A[1],F=A[2],T=A[3],N=!!(f!==!1&&s&&o),B=m.useMemo(function(){return Object.values(F.maps).reduce(function(Re,st){return Re+st},0)},[F.id,F.maps]),$=N&&u&&(Math.max(o*u.length,B)>s||!!p),j=g==="rtl",Y=Ee(i,z({},"".concat(i,"-rtl"),j),r),G=u||QSe,X=m.useRef(),q=m.useRef(),re=m.useRef(),ge=m.useState(0),ye=Ce(ge,2),we=ye[0],Ie=ye[1],Fe=m.useState(0),ze=Ce(Fe,2),Me=ze[0],Pe=ze[1],tt=m.useState(!1),Ae=Ce(tt,2),mt=Ae[0],ft=Ae[1],Le=function(){ft(!0)},Ge=function(){ft(!1)},Oe={getKey:D};function xe(Re){Ie(function(st){var Bt;typeof Re=="function"?Bt=Re(st):Bt=Re;var fn=ut(Bt);return X.current.scrollTop=fn,fn})}var at=m.useRef({start:0,end:G.length}),gt=m.useRef(),Ct=zSe(G,D),nt=Ce(Ct,1),se=nt[0];gt.current=se;var fe=m.useMemo(function(){if(!N)return{scrollHeight:void 0,start:0,end:G.length-1,offset:void 0};if(!$){var Re;return{scrollHeight:((Re=q.current)===null||Re===void 0?void 0:Re.offsetHeight)||0,start:0,end:G.length-1,offset:void 0}}for(var st=0,Bt,fn,jn,Nr=G.length,$r=0;$r<Nr;$r+=1){var Wi=G[$r],eh=D(Wi),Iu=F.get(eh),Yf=st+(Iu===void 0?o:Iu);Yf>=we&&Bt===void 0&&(Bt=$r,fn=st),Yf>we+s&&jn===void 0&&(jn=$r),st=Yf}return Bt===void 0&&(Bt=0,fn=0,jn=Math.ceil(s/o)),jn===void 0&&(jn=G.length-1),jn=Math.min(jn+1,G.length-1),{scrollHeight:st,start:Bt,end:jn,offset:fn}},[$,N,we,G,T,s]),Ne=fe.scrollHeight,Ve=fe.start,lt=fe.end,Dt=fe.offset;at.current.start=Ve,at.current.end=lt,m.useLayoutEffect(function(){var Re=F.getRecord();if(Re.size===1){var st=Array.from(Re)[0],Bt=G[Ve];if(Bt){var fn=D(Bt);if(fn===st){var jn=F.get(st),Nr=jn-o;xe(function($r){return $r+Nr})}}}F.resetRecord()},[Ne]);var Qt=m.useState({width:0,height:s}),he=Ce(Qt,2),Ke=he[0],ue=he[1],ee=function(st){ue({width:st.offsetWidth,height:st.offsetHeight})},oe=m.useRef(),pe=m.useRef(),le=m.useMemo(function(){return uU(Ke.width,p)},[Ke.width,p]),ve=m.useMemo(function(){return uU(Ke.height,Ne)},[Ke.height,Ne]),He=Ne-s,Qe=m.useRef(He);Qe.current=He;function ut(Re){var st=Re;return Number.isNaN(Qe.current)||(st=Math.min(st,Qe.current)),st=Math.max(st,0),st}var St=we<=0,Lt=we>=He,be=Me<=0,H=Me>=p,W=Nre(St,Lt,be,H),K=function(){return{x:j?-Me:Me,y:we}},Q=m.useRef(K()),ie=dc(function(Re){if(y){var st=ne(ne({},K()),Re);(Q.current.x!==st.x||Q.current.y!==st.y)&&(y(st),Q.current=st)}});function me(Re,st){var Bt=Re;st?(uc.flushSync(function(){Pe(Bt)}),ie()):xe(Bt)}function Se(Re){var st=Re.currentTarget.scrollTop;st!==we&&xe(st),_==null||_(Re),ie()}var Ze=function(st){var Bt=st,fn=p?p-Ke.width:0;return Bt=Math.max(Bt,0),Bt=Math.min(Bt,fn),Bt},Je=dc(function(Re,st){st?(uc.flushSync(function(){Pe(function(Bt){var fn=Bt+(j?-Re:Re);return Ze(fn)})}),ie()):xe(function(Bt){var fn=Bt+Re;return fn})}),wt=WSe(N,St,Lt,be,H,!!p,Je),zt=Ce(wt,2),Zt=zt[0],Dn=zt[1];KSe(N,X,function(Re,st,Bt,fn){var jn=fn;return W(Re,st,Bt)?!1:!jn||!jn._virtualHandled?(jn&&(jn._virtualHandled=!0),Zt({preventDefault:function(){},deltaX:Re?st:0,deltaY:Re?0:st}),!0):!1}),qSe($,X,function(Re){xe(function(st){return st+Re})}),oo(function(){function Re(Bt){var fn=St&&Bt.detail<0,jn=Lt&&Bt.detail>0;N&&!fn&&!jn&&Bt.preventDefault()}var st=X.current;return st.addEventListener("wheel",Zt,{passive:!1}),st.addEventListener("DOMMouseScroll",Dn,{passive:!0}),st.addEventListener("MozMousePixelScroll",Re,{passive:!1}),function(){st.removeEventListener("wheel",Zt),st.removeEventListener("DOMMouseScroll",Dn),st.removeEventListener("MozMousePixelScroll",Re)}},[N,St,Lt]),oo(function(){if(p){var Re=Ze(Me);Pe(Re),ie({x:Re})}},[Ke.width,p]);var on=function(){var st,Bt;(st=oe.current)===null||st===void 0||st.delayHidden(),(Bt=pe.current)===null||Bt===void 0||Bt.delayHidden()},oi=YSe(X,G,F,o,D,function(){return V(!0)},xe,on);m.useImperativeHandle(e,function(){return{nativeElement:re.current,getScrollInfo:K,scrollTo:function(st){function Bt(fn){return fn&&Rt(fn)==="object"&&("left"in fn||"top"in fn)}Bt(st)?(st.left!==void 0&&Pe(Ze(st.left)),oi(st.top)):oi(st)}}}),oo(function(){if(C){var Re=G.slice(Ve,lt+1);C(Re,G)}},[Ve,lt,G]);var nn=$Se(G,D,F,o),bn=x==null?void 0:x({start:Ve,end:lt,virtual:$,offsetX:Me,offsetY:Dt,rtl:j,getSize:nn}),pt=HSe(G,Ve,lt,p,Me,R,d,Oe),ce=null;s&&(ce=ne(z({},l?"height":"maxHeight",s),JSe),N&&(ce.overflowY="hidden",p&&(ce.overflowX="hidden"),mt&&(ce.pointerEvents="none")));var Xe={};return j&&(Xe.dir="rtl"),m.createElement("div",J({ref:re,style:ne(ne({},c),{},{position:"relative"}),className:Y},Xe,M),m.createElement(Cf,{onResize:ee},m.createElement(b,{className:"".concat(i,"-holder"),style:ce,ref:X,onScroll:Se,onMouseEnter:on},m.createElement(Lre,{prefixCls:i,height:Ne,offsetX:Me,offsetY:Dt,scrollWidth:p,onInnerResize:V,ref:q,innerProps:w,rtl:j,extra:bn},pt))),$&&Ne>s&&m.createElement(cU,{ref:oe,prefixCls:i,scrollOffset:we,scrollRange:Ne,rtl:j,onScroll:me,onStartMove:Le,onStopMove:Ge,spinSize:ve,containerSize:Ke.height,style:k==null?void 0:k.verticalScrollBar,thumbStyle:k==null?void 0:k.verticalScrollBarThumb,showScrollBar:L}),$&&p>Ke.width&&m.createElement(cU,{ref:pe,prefixCls:i,scrollOffset:Me,scrollRange:p,rtl:j,onScroll:me,onStartMove:Le,onStopMove:Ge,spinSize:le,containerSize:Ke.width,horizontal:!0,style:k==null?void 0:k.horizontalScrollBar,thumbStyle:k==null?void 0:k.horizontalScrollBarThumb,showScrollBar:L}))}var Tre=m.forwardRef(exe);Tre.displayName="List";function txe(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Ire=m.createContext(null),nxe=["disabled","title","children","style","className"];function dU(n){return typeof n=="string"||typeof n=="number"}var ixe=function(e,t){var i=iwe(),r=i.prefixCls,s=i.id,o=i.open,a=i.multiple,l=i.mode,c=i.searchValue,u=i.toggleOpen,d=i.notFoundContent,h=i.onPopupScroll,f=m.useContext(Ire),g=f.flattenOptions,p=f.onActiveValue,v=f.defaultActiveFirstOption,b=f.onSelect,_=f.menuItemSelectedIcon,y=f.rawValues,C=f.fieldNames,w=f.virtual,x=f.listHeight,k=f.listItemHeight,E="".concat(r,"-item"),L=AI(function(){return g},[o,g],function(X,q){return q[0]&&X[1]!==q[1]}),M=m.useRef(null),D=function(q){q.preventDefault()},O=function(q){M.current&&M.current.scrollTo(typeof q=="number"?{index:q}:q)},A=function(q){for(var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ge=L.length,ye=0;ye<ge;ye+=1){var we=(q+ye*re+ge)%ge,Ie=L[we],Fe=Ie.group,ze=Ie.data;if(!Fe&&!ze.disabled)return we}return-1},R=m.useState(function(){return A(0)}),V=Ce(R,2),F=V[0],T=V[1],N=function(q){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;T(q);var ge={source:re?"keyboard":"mouse"},ye=L[q];if(!ye){p(null,-1,ge);return}p(ye.value,q,ge)};m.useEffect(function(){N(v!==!1?A(0):-1)},[L.length,c]);var B=m.useCallback(function(X){return y.has(X)&&l!=="combobox"},[l,Et(y).toString(),y.size]);m.useEffect(function(){var X=setTimeout(function(){if(!a&&o&&y.size===1){var re=Array.from(y)[0],ge=L.findIndex(function(ye){var we=ye.data;return we.value===re});ge!==-1&&(N(ge),O(ge))}});if(o){var q;(q=M.current)===null||q===void 0||q.scrollTo(void 0)}return function(){return clearTimeout(X)}},[o,c]);var $=function(q){q!==void 0&&b(q,{selected:!y.has(q)}),a||u(!1)};if(m.useImperativeHandle(t,function(){return{onKeyDown:function(q){var re=q.which,ge=q.ctrlKey;switch(re){case je.N:case je.P:case je.UP:case je.DOWN:{var ye=0;if(re===je.UP?ye=-1:re===je.DOWN?ye=1:txe()&&ge&&(re===je.N?ye=1:re===je.P&&(ye=-1)),ye!==0){var we=A(F+ye,ye);O(we),N(we,!0)}break}case je.ENTER:{var Ie=L[F];Ie&&!Ie.data.disabled?$(Ie.value):$(void 0),o&&q.preventDefault();break}case je.ESC:u(!1),o&&q.stopPropagation()}},onKeyUp:function(){},scrollTo:function(q){O(q)}}}),L.length===0)return m.createElement("div",{role:"listbox",id:"".concat(s,"_list"),className:"".concat(E,"-empty"),onMouseDown:D},d);var j=Object.keys(C).map(function(X){return C[X]}),Y=function(q){return q.label},G=function(q){var re=L[q];if(!re)return null;var ge=re.data||{},ye=ge.value,we=re.group,Ie=Sy(ge,!0),Fe=Y(re);return re?m.createElement("div",J({"aria-label":typeof Fe=="string"&&!we?Fe:null},Ie,{key:q,role:we?"presentation":"option",id:"".concat(s,"_list_").concat(q),"aria-selected":B(ye)}),ye):null};return m.createElement(m.Fragment,null,m.createElement("div",{role:"listbox",id:"".concat(s,"_list"),style:{height:0,width:0,overflow:"hidden"}},G(F-1),G(F),G(F+1)),m.createElement(Tre,{itemKey:"key",ref:M,data:L,height:x,itemHeight:k,fullHeight:!1,onMouseDown:D,onScroll:h,virtual:w},function(X,q){var re,ge=X.group,ye=X.groupOption,we=X.data,Ie=X.label,Fe=X.value,ze=we.key;if(ge){var Me,Pe=(Me=we.title)!==null&&Me!==void 0?Me:dU(Ie)?Ie.toString():void 0;return m.createElement("div",{className:Ee(E,"".concat(E,"-group")),title:Pe},Ie!==void 0?Ie:ze)}var tt=we.disabled,Ae=we.title;we.children;var mt=we.style,ft=we.className,Le=sn(we,nxe),Ge=fo(Le,j),Oe=B(Fe),xe="".concat(E,"-option"),at=Ee(E,xe,ft,(re={},z(re,"".concat(xe,"-grouped"),ye),z(re,"".concat(xe,"-active"),F===q&&!tt),z(re,"".concat(xe,"-disabled"),tt),z(re,"".concat(xe,"-selected"),Oe),re)),gt=Y(X),Ct=!_||typeof _=="function"||Oe,nt=typeof gt=="number"?gt:gt||Fe,se=dU(nt)?nt.toString():void 0;return Ae!==void 0&&(se=Ae),m.createElement("div",J({},Sy(Ge),{"aria-selected":Oe,className:at,title:se,onMouseMove:function(){F===q||tt||N(q)},onClick:function(){tt||$(Fe)},style:mt}),m.createElement("div",{className:"".concat(xe,"-content")},nt),m.isValidElement(_)||Oe,Ct&&m.createElement(b2,{className:"".concat(E,"-option-state"),customizeIcon:_,customizeIconProps:{isSelected:Oe}},Oe?"":null))}))},Dre=m.forwardRef(ixe);Dre.displayName="OptionList";var rxe=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],sxe=["inputValue"];function oxe(n){return!n||Rt(n)!=="object"}var axe=m.forwardRef(function(n,e){var t=n.id,i=n.mode,r=n.prefixCls,s=r===void 0?"rc-select":r,o=n.backfill,a=n.fieldNames,l=n.inputValue,c=n.searchValue,u=n.onSearch,d=n.autoClearSearchValue,h=d===void 0?!0:d,f=n.onSelect,g=n.onDeselect,p=n.dropdownMatchSelectWidth,v=p===void 0?!0:p,b=n.filterOption,_=n.filterSort,y=n.optionFilterProp,C=n.optionLabelProp,w=n.options,x=n.children,k=n.defaultActiveFirstOption,E=n.menuItemSelectedIcon,L=n.virtual,M=n.listHeight,D=M===void 0?200:M,O=n.listItemHeight,A=O===void 0?20:O,R=n.value,V=n.defaultValue,F=n.labelInValue,T=n.onChange,N=sn(n,rxe),B=RSe(t),$=f3(i),j=!!(!w&&x),Y=m.useMemo(function(){return b===void 0&&i==="combobox"?!1:b},[b,i]),G=m.useMemo(function(){return kre(a,j)},[JSON.stringify(a),j]),X=Ps("",{value:c!==void 0?c:l,postState:function(H){return H||""}}),q=Ce(X,2),re=q[0],ge=q[1],ye=FSe(w,x,G,y,C),we=ye.valueOptions,Ie=ye.labelOptions,Fe=ye.options,ze=m.useCallback(function(be){var H=are(be);return H.map(function(W){var K,Q,ie,me,Se;if(oxe(W))K=W;else{var Ze;ie=W.key,Q=W.label,K=(Ze=W.value)!==null&&Ze!==void 0?Ze:ie}var Je=we.get(K);if(Je){var wt;Q===void 0&&(Q=Je==null?void 0:Je[C||G.label]),ie===void 0&&(ie=(wt=Je==null?void 0:Je.key)!==null&&wt!==void 0?wt:K),me=Je==null?void 0:Je.disabled,Se=Je==null?void 0:Je.title}return{label:Q,value:K,key:ie,disabled:me,title:Se}})},[G,C,we]),Me=Ps(V,{value:R}),Pe=Ce(Me,2),tt=Pe[0],Ae=Pe[1],mt=m.useMemo(function(){var be,H=ze(tt);return i==="combobox"&&!((be=H[0])!==null&&be!==void 0&&be.value)?[]:H},[tt,ze,i]),ft=TSe(mt,we),Le=Ce(ft,2),Ge=Le[0],Oe=Le[1],xe=m.useMemo(function(){if(!i&&Ge.length===1){var be=Ge[0];if(be.value===null&&(be.label===null||be.label===void 0))return[]}return Ge.map(function(H){var W;return ne(ne({},H),{},{label:(W=H.label)!==null&&W!==void 0?W:H.value})})},[i,Ge]),at=m.useMemo(function(){return new Set(Ge.map(function(be){return be.value}))},[Ge]);m.useEffect(function(){if(i==="combobox"){var be,H=(be=Ge[0])===null||be===void 0?void 0:be.value;ge(kwe(H)?String(H):"")}},[Ge]);var gt=rU(function(be,H){var W,K=H??be;return W={},z(W,G.value,be),z(W,G.label,K),W}),Ct=m.useMemo(function(){if(i!=="tags")return Fe;var be=Et(Fe),H=function(K){return we.has(K)};return Et(Ge).sort(function(W,K){return W.value<K.value?-1:1}).forEach(function(W){var K=W.value;H(K)||be.push(gt(K,W.label))}),be},[gt,Fe,we,Ge,i]),nt=ISe(Ct,G,re,Y,y),se=m.useMemo(function(){return i!=="tags"||!re||nt.some(function(be){return be[y||"value"]===re})?nt:[gt(re)].concat(Et(nt))},[gt,y,i,nt,re]),fe=m.useMemo(function(){return _?Et(se).sort(function(be,H){return _(be,H)}):se},[se,_]),Ne=m.useMemo(function(){return xSe(fe,{fieldNames:G,childrenAsData:j})},[fe,G,j]),Ve=function(H){var W=ze(H);if(Ae(W),T&&(W.length!==Ge.length||W.some(function(ie,me){var Se;return((Se=Ge[me])===null||Se===void 0?void 0:Se.value)!==(ie==null?void 0:ie.value)}))){var K=F?W:W.map(function(ie){return ie.value}),Q=W.map(function(ie){return h3(Oe(ie.value))});T($?K:K[0],$?Q:Q[0])}},lt=m.useState(null),Dt=Ce(lt,2),Qt=Dt[0],he=Dt[1],Ke=m.useState(0),ue=Ce(Ke,2),ee=ue[0],oe=ue[1],pe=k!==void 0?k:i!=="combobox",le=m.useCallback(function(be,H){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},K=W.source,Q=K===void 0?"keyboard":K;oe(H),o&&i==="combobox"&&be!==null&&Q==="keyboard"&&he(String(be))},[o,i]),ve=function(H,W,K){var Q=function(){var on,oi=Oe(H);return[F?{label:oi==null?void 0:oi[G.label],value:H,key:(on=oi==null?void 0:oi.key)!==null&&on!==void 0?on:H}:H,h3(oi)]};if(W&&f){var ie=Q(),me=Ce(ie,2),Se=me[0],Ze=me[1];f(Se,Ze)}else if(!W&&g&&K!=="clear"){var Je=Q(),wt=Ce(Je,2),zt=wt[0],Zt=wt[1];g(zt,Zt)}},He=rU(function(be,H){var W,K=$?H.selected:!0;K?W=$?[].concat(Et(Ge),[be]):[be]:W=Ge.filter(function(Q){return Q.value!==be}),Ve(W),ve(be,K),i==="combobox"?he(""):(!f3||h)&&(ge(""),he(""))}),Qe=function(H,W){Ve(H);var K=W.type,Q=W.values;(K==="remove"||K==="clear")&&Q.forEach(function(ie){ve(ie.value,!1,K)})},ut=function(H,W){if(ge(H),he(null),W.source==="submit"){var K=(H||"").trim();if(K){var Q=Array.from(new Set([].concat(Et(at),[K])));Ve(Q),ve(K,!0),ge("")}return}W.source!=="blur"&&(i==="combobox"&&Ve(H),u==null||u(H))},St=function(H){var W=H;i!=="tags"&&(W=H.map(function(Q){var ie=Ie.get(Q);return ie==null?void 0:ie.value}).filter(function(Q){return Q!==void 0}));var K=Array.from(new Set([].concat(Et(at),Et(W))));Ve(K),K.forEach(function(Q){ve(Q,!0)})},Lt=m.useMemo(function(){var be=L!==!1&&v!==!1;return ne(ne({},ye),{},{flattenOptions:Ne,onActiveValue:le,defaultActiveFirstOption:pe,onSelect:He,menuItemSelectedIcon:E,rawValues:at,fieldNames:G,virtual:be,listHeight:D,listItemHeight:A,childrenAsData:j})},[ye,Ne,le,pe,He,E,at,G,L,v,D,A,j]);return m.createElement(Ire.Provider,{value:Lt},m.createElement(NSe,J({},N,{id:B,prefixCls:s,ref:e,omitDomProps:sxe,mode:i,displayValues:xe,onDisplayValuesChange:Qe,searchValue:re,onSearch:ut,autoClearSearchValue:h,onSearchSplit:St,dropdownMatchSelectWidth:v,OptionList:Dre,emptyOptions:!Ne.length,activeValue:Qt,activeDescendantId:"".concat(B,"_list_").concat(ee)})))}),MF=axe;MF.Option=DF;MF.OptGroup=IF;var lxe=function(){var e=m.useContext(Bn),t=e.getPrefixCls,i=t("empty-img-default");return m.createElement("svg",{className:i,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},m.createElement("g",{fill:"none",fillRule:"evenodd"},m.createElement("g",{transform:"translate(24 31.67)"},m.createElement("ellipse",{className:"".concat(i,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),m.createElement("path",{className:"".concat(i,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),m.createElement("path",{className:"".concat(i,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),m.createElement("path",{className:"".concat(i,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),m.createElement("path",{className:"".concat(i,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),m.createElement("path",{className:"".concat(i,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),m.createElement("g",{className:"".concat(i,"-g"),transform:"translate(149.65 15.383)"},m.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),m.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},cxe=function(){var e=m.useContext(Bn),t=e.getPrefixCls,i=t("empty-img-simple");return m.createElement("svg",{className:i,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},m.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},m.createElement("ellipse",{className:"".concat(i,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),m.createElement("g",{className:"".concat(i,"-g"),fillRule:"nonzero"},m.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),m.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(i,"-path")}))))},uxe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},Mre=m.createElement(lxe,null),Rre=m.createElement(cxe,null),mg=function(e){var t=e.className,i=e.prefixCls,r=e.image,s=r===void 0?Mre:r,o=e.description,a=e.children,l=e.imageStyle,c=uxe(e,["className","prefixCls","image","description","children","imageStyle"]),u=m.useContext(Bn),d=u.getPrefixCls,h=u.direction;return m.createElement(PI,{componentName:"Empty"},function(f){var g=d("empty",i),p=typeof o<"u"?o:f.description,v=typeof p=="string"?p:"empty",b=null;return typeof s=="string"?b=m.createElement("img",{alt:v,src:s}):b=s,m.createElement("div",J({className:Ee(g,z(z({},"".concat(g,"-normal"),s===Rre),"".concat(g,"-rtl"),h==="rtl"),t)},c),m.createElement("div",{className:"".concat(g,"-image"),style:l},b),p&&m.createElement("div",{className:"".concat(g,"-description")},p),a&&m.createElement("div",{className:"".concat(g,"-footer")},a))})};mg.PRESENTED_IMAGE_DEFAULT=Mre;mg.PRESENTED_IMAGE_SIMPLE=Rre;var dxe=function(e){return m.createElement(Hf,null,function(t){var i=t.getPrefixCls,r=i("empty");switch(e){case"Table":case"List":return m.createElement(mg,{image:mg.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return m.createElement(mg,{image:mg.PRESENTED_IMAGE_SIMPLE,className:"".concat(r,"-small")});default:return m.createElement(mg,null)}})},Wg="RC_FORM_INTERNAL_HOOKS",wi=function(){ps(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},c1=m.createContext({getFieldValue:wi,getFieldsValue:wi,getFieldError:wi,getFieldWarning:wi,getFieldsError:wi,isFieldsTouched:wi,isFieldTouched:wi,isFieldValidating:wi,isFieldsValidating:wi,resetFields:wi,setFields:wi,setFieldValue:wi,setFieldsValue:wi,validateFields:wi,submit:wi,getInternalHooks:function(){return wi(),{dispatch:wi,initEntityValue:wi,registerField:wi,useSubscribe:wi,setInitialValues:wi,destroyForm:wi,setCallbacks:wi,registerWatch:wi,getFields:wi,setValidateMessages:wi,setPreserve:wi,getInitialValue:wi}}}),C2=m.createContext(null);function p3(n){return n==null?[]:Array.isArray(n)?n:[n]}function hxe(n){return n&&!!n._init}function $g(){return $g=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},$g.apply(this,arguments)}function fxe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,ky(n,e)}function m3(n){return m3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m3(n)}function ky(n,e){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},ky(n,e)}function gxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yk(n,e,t){return gxe()?Yk=Reflect.construct.bind():Yk=function(r,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(r,a),c=new l;return o&&ky(c,o.prototype),c},Yk.apply(null,arguments)}function pxe(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function v3(n){var e=typeof Map=="function"?new Map:void 0;return v3=function(i){if(i===null||!pxe(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return Yk(i,arguments,m3(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ky(r,i)},v3(n)}var mxe=/%[sdj%]/g,vxe=function(){};function b3(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var i=t.field;e[i]=e[i]||[],e[i].push(t)}),e}function La(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=0,s=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var o=n.replace(mxe,function(a){if(a==="%%")return"%";if(r>=s)return a;switch(a){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch{return"[Circular]"}break;default:return a}});return o}return n}function bxe(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function Yr(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||bxe(e)&&typeof n=="string"&&!n)}function _xe(n,e,t){var i=[],r=0,s=n.length;function o(a){i.push.apply(i,a||[]),r++,r===s&&t(i)}n.forEach(function(a){e(a,o)})}function hU(n,e,t){var i=0,r=n.length;function s(o){if(o&&o.length){t(o);return}var a=i;i=i+1,a<r?e(n[a],s):t([])}s([])}function Cxe(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var fU=function(n){fxe(e,n);function e(t,i){var r;return r=n.call(this,"Async Validation Error")||this,r.errors=t,r.fields=i,r}return e}(v3(Error));function yxe(n,e,t,i,r){if(e.first){var s=new Promise(function(h,f){var g=function(b){return i(b),b.length?f(new fU(b,b3(b))):h(r)},p=Cxe(n);hU(p,t,g)});return s.catch(function(h){return h}),s}var o=e.firstFields===!0?Object.keys(n):e.firstFields||[],a=Object.keys(n),l=a.length,c=0,u=[],d=new Promise(function(h,f){var g=function(v){if(u.push.apply(u,v),c++,c===l)return i(u),u.length?f(new fU(u,b3(u))):h(r)};a.length||(i(u),h(r)),a.forEach(function(p){var v=n[p];o.indexOf(p)!==-1?hU(v,t,g):_xe(v,t,g)})});return d.catch(function(h){return h}),d}function wxe(n){return!!(n&&n.message!==void 0)}function Sxe(n,e){for(var t=n,i=0;i<e.length;i++){if(t==null)return t;t=t[e[i]]}return t}function gU(n,e){return function(t){var i;return n.fullFields?i=Sxe(e,n.fullFields):i=e[t.field||n.fullField],wxe(t)?(t.field=t.field||n.fullField,t.fieldValue=i,t):{message:typeof t=="function"?t():t,fieldValue:i,field:t.field||n.fullField}}}function pU(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];typeof i=="object"&&typeof n[t]=="object"?n[t]=$g({},n[t],i):n[t]=i}}return n}var Are=function(e,t,i,r,s,o){e.required&&(!i.hasOwnProperty(e.field)||Yr(t,o||e.type))&&r.push(La(s.messages.required,e.fullField))},xxe=function(e,t,i,r,s){(/^\s+$/.test(t)||t==="")&&r.push(La(s.messages.whitespace,e.fullField))},cx,kxe=function(){if(cx)return cx;var n="[a-fA-F\\d:]",e=function(C){return C&&C.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",r=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+t+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+t+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+t+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+t+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+t+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+t+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+t+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+t+"$)|(?:^"+r+"$)"),o=new RegExp("^"+t+"$"),a=new RegExp("^"+r+"$"),l=function(C){return C&&C.exact?s:new RegExp("(?:"+e(C)+t+e(C)+")|(?:"+e(C)+r+e(C)+")","g")};l.v4=function(y){return y&&y.exact?o:new RegExp(""+e(y)+t+e(y),"g")},l.v6=function(y){return y&&y.exact?a:new RegExp(""+e(y)+r+e(y),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,h=l.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",g="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",p="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",b='(?:[/?#][^\\s"]*)?',_="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+h+"|"+f+g+p+")"+v+b;return cx=new RegExp("(?:^"+_+"$)","i"),cx},mU={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},S_={integer:function(e){return S_.number(e)&&parseInt(e,10)===e},float:function(e){return S_.number(e)&&!S_.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!S_.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(mU.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(kxe())},hex:function(e){return typeof e=="string"&&!!e.match(mU.hex)}},Exe=function(e,t,i,r,s){if(e.required&&t===void 0){Are(e,t,i,r,s);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?S_[a](t)||r.push(La(s.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&r.push(La(s.messages.types[a],e.fullField,e.type))},Lxe=function(e,t,i,r,s){var o=typeof e.len=="number",a=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=t,d=null,h=typeof t=="number",f=typeof t=="string",g=Array.isArray(t);if(h?d="number":f?d="string":g&&(d="array"),!d)return!1;g&&(u=t.length),f&&(u=t.replace(c,"_").length),o?u!==e.len&&r.push(La(s.messages[d].len,e.fullField,e.len)):a&&!l&&u<e.min?r.push(La(s.messages[d].min,e.fullField,e.min)):l&&!a&&u>e.max?r.push(La(s.messages[d].max,e.fullField,e.max)):a&&l&&(u<e.min||u>e.max)&&r.push(La(s.messages[d].range,e.fullField,e.min,e.max))},Rm="enum",Nxe=function(e,t,i,r,s){e[Rm]=Array.isArray(e[Rm])?e[Rm]:[],e[Rm].indexOf(t)===-1&&r.push(La(s.messages[Rm],e.fullField,e[Rm].join(", ")))},Txe=function(e,t,i,r,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(La(s.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(t)||r.push(La(s.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},qn={required:Are,whitespace:xxe,type:Exe,range:Lxe,enum:Nxe,pattern:Txe},Ixe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Yr(t,"string")&&!e.required)return i();qn.required(e,t,r,o,s,"string"),Yr(t,"string")||(qn.type(e,t,r,o,s),qn.range(e,t,r,o,s),qn.pattern(e,t,r,o,s),e.whitespace===!0&&qn.whitespace(e,t,r,o,s))}i(o)},Dxe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Yr(t)&&!e.required)return i();qn.required(e,t,r,o,s),t!==void 0&&qn.type(e,t,r,o,s)}i(o)},Mxe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(t===""&&(t=void 0),Yr(t)&&!e.required)return i();qn.required(e,t,r,o,s),t!==void 0&&(qn.type(e,t,r,o,s),qn.range(e,t,r,o,s))}i(o)},Rxe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Yr(t)&&!e.required)return i();qn.required(e,t,r,o,s),t!==void 0&&qn.type(e,t,r,o,s)}i(o)},Axe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Yr(t)&&!e.required)return i();qn.required(e,t,r,o,s),Yr(t)||qn.type(e,t,r,o,s)}i(o)},Oxe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Yr(t)&&!e.required)return i();qn.required(e,t,r,o,s),t!==void 0&&(qn.type(e,t,r,o,s),qn.range(e,t,r,o,s))}i(o)},Pxe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Yr(t)&&!e.required)return i();qn.required(e,t,r,o,s),t!==void 0&&(qn.type(e,t,r,o,s),qn.range(e,t,r,o,s))}i(o)},Fxe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(t==null&&!e.required)return i();qn.required(e,t,r,o,s,"array"),t!=null&&(qn.type(e,t,r,o,s),qn.range(e,t,r,o,s))}i(o)},Bxe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Yr(t)&&!e.required)return i();qn.required(e,t,r,o,s),t!==void 0&&qn.type(e,t,r,o,s)}i(o)},Hxe="enum",Vxe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Yr(t)&&!e.required)return i();qn.required(e,t,r,o,s),t!==void 0&&qn[Hxe](e,t,r,o,s)}i(o)},zxe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Yr(t,"string")&&!e.required)return i();qn.required(e,t,r,o,s),Yr(t,"string")||qn.pattern(e,t,r,o,s)}i(o)},Wxe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Yr(t,"date")&&!e.required)return i();if(qn.required(e,t,r,o,s),!Yr(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),qn.type(e,l,r,o,s),l&&qn.range(e,l.getTime(),r,o,s)}}i(o)},$xe=function(e,t,i,r,s){var o=[],a=Array.isArray(t)?"array":typeof t;qn.required(e,t,r,o,s,a),i(o)},b4=function(e,t,i,r,s){var o=e.type,a=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Yr(t,o)&&!e.required)return i();qn.required(e,t,r,a,s,o),Yr(t,o)||qn.type(e,t,r,a,s)}i(a)},Uxe=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Yr(t)&&!e.required)return i();qn.required(e,t,r,o,s)}i(o)},X_={string:Ixe,method:Dxe,number:Mxe,boolean:Rxe,regexp:Axe,integer:Oxe,float:Pxe,array:Fxe,object:Bxe,enum:Vxe,pattern:zxe,date:Wxe,url:b4,hex:b4,email:b4,required:$xe,any:Uxe};function _3(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var C3=_3(),qw=function(){function n(t){this.rules=null,this._messages=C3,this.define(t)}var e=n.prototype;return e.define=function(i){var r=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(s){var o=i[s];r.rules[s]=Array.isArray(o)?o:[o]})},e.messages=function(i){return i&&(this._messages=pU(_3(),i)),this._messages},e.validate=function(i,r,s){var o=this;r===void 0&&(r={}),s===void 0&&(s=function(){});var a=i,l=r,c=s;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,a),Promise.resolve(a);function u(p){var v=[],b={};function _(C){if(Array.isArray(C)){var w;v=(w=v).concat.apply(w,C)}else v.push(C)}for(var y=0;y<p.length;y++)_(p[y]);v.length?(b=b3(v),c(v,b)):c(null,a)}if(l.messages){var d=this.messages();d===C3&&(d=_3()),pU(d,l.messages),l.messages=d}else l.messages=this.messages();var h={},f=l.keys||Object.keys(this.rules);f.forEach(function(p){var v=o.rules[p],b=a[p];v.forEach(function(_){var y=_;typeof y.transform=="function"&&(a===i&&(a=$g({},a)),b=a[p]=y.transform(b)),typeof y=="function"?y={validator:y}:y=$g({},y),y.validator=o.getValidationMethod(y),y.validator&&(y.field=p,y.fullField=y.fullField||p,y.type=o.getType(y),h[p]=h[p]||[],h[p].push({rule:y,value:b,source:a,field:p}))})});var g={};return yxe(h,l,function(p,v){var b=p.rule,_=(b.type==="object"||b.type==="array")&&(typeof b.fields=="object"||typeof b.defaultField=="object");_=_&&(b.required||!b.required&&p.value),b.field=p.field;function y(x,k){return $g({},k,{fullField:b.fullField+"."+x,fullFields:b.fullFields?[].concat(b.fullFields,[x]):[x]})}function C(x){x===void 0&&(x=[]);var k=Array.isArray(x)?x:[x];!l.suppressWarning&&k.length&&n.warning("async-validator:",k),k.length&&b.message!==void 0&&(k=[].concat(b.message));var E=k.map(gU(b,a));if(l.first&&E.length)return g[b.field]=1,v(E);if(!_)v(E);else{if(b.required&&!p.value)return b.message!==void 0?E=[].concat(b.message).map(gU(b,a)):l.error&&(E=[l.error(b,La(l.messages.required,b.field))]),v(E);var L={};b.defaultField&&Object.keys(p.value).map(function(O){L[O]=b.defaultField}),L=$g({},L,p.rule.fields);var M={};Object.keys(L).forEach(function(O){var A=L[O],R=Array.isArray(A)?A:[A];M[O]=R.map(y.bind(null,O))});var D=new n(M);D.messages(l.messages),p.rule.options&&(p.rule.options.messages=l.messages,p.rule.options.error=l.error),D.validate(p.value,p.rule.options||l,function(O){var A=[];E&&E.length&&A.push.apply(A,E),O&&O.length&&A.push.apply(A,O),v(A.length?A:null)})}}var w;if(b.asyncValidator)w=b.asyncValidator(b,p.value,C,p.source,l);else if(b.validator){try{w=b.validator(b,p.value,C,p.source,l)}catch(x){console.error==null||console.error(x),l.suppressValidatorError||setTimeout(function(){throw x},0),C(x.message)}w===!0?C():w===!1?C(typeof b.message=="function"?b.message(b.fullField||b.field):b.message||(b.fullField||b.field)+" fails"):w instanceof Array?C(w):w instanceof Error&&C(w.message)}w&&w.then&&w.then(function(){return C()},function(x){return C(x)})},function(p){u(p)},a)},e.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!X_.hasOwnProperty(i.type))throw new Error(La("Unknown rule type %s",i.type));return i.type||"string"},e.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var r=Object.keys(i),s=r.indexOf("message");return s!==-1&&r.splice(s,1),r.length===1&&r[0]==="required"?X_.required:X_[this.getType(i)]||void 0},n}();qw.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");X_[e]=t};qw.warning=vxe;qw.messages=C3;qw.validators=X_;var ma="'${name}' is not a valid ${type}",Ore={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ma,method:ma,array:ma,object:ma,number:ma,date:ma,boolean:ma,integer:ma,float:ma,regexp:ma,email:ma,url:ma,hex:ma},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},vU=qw;function jxe(n,e){return n.replace(/\$\{\w+\}/g,function(t){var i=t.slice(2,-1);return e[i]})}var bU="CODE_LOGIC_ERROR";function y3(n,e,t,i,r){return w3.apply(this,arguments)}function w3(){return w3=Bf(Hs().mark(function n(e,t,i,r,s){var o,a,l,c,u,d,h,f,g;return Hs().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return o=ne({},i),delete o.ruleIndex,vU.warning=function(){},o.validator&&(a=o.validator,o.validator=function(){try{return a.apply(void 0,arguments)}catch(b){return console.error(b),Promise.reject(bU)}}),l=null,o&&o.type==="array"&&o.defaultField&&(l=o.defaultField,delete o.defaultField),c=new vU(z({},e,[o])),u=kv(Ore,r.validateMessages),c.messages(u),d=[],v.prev=10,v.next=13,Promise.resolve(c.validate(z({},e,t),ne({},r)));case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(10),v.t0.errors&&(d=v.t0.errors.map(function(b,_){var y=b.message,C=y===bU?u.default:y;return m.isValidElement(C)?m.cloneElement(C,{key:"error_".concat(_)}):C}));case 18:if(!(!d.length&&l)){v.next=23;break}return v.next=21,Promise.all(t.map(function(b,_){return y3("".concat(e,".").concat(_),b,l,r,s)}));case 21:return h=v.sent,v.abrupt("return",h.reduce(function(b,_){return[].concat(Et(b),Et(_))},[]));case 23:return f=ne(ne({},i),{},{name:e,enum:(i.enum||[]).join(", ")},s),g=d.map(function(b){return typeof b=="string"?jxe(b,f):b}),v.abrupt("return",g);case 26:case"end":return v.stop()}},n,null,[[10,15]])})),w3.apply(this,arguments)}function Kxe(n,e,t,i,r,s){var o=n.join("."),a=t.map(function(u,d){var h=u.validator,f=ne(ne({},u),{},{ruleIndex:d});return h&&(f.validator=function(g,p,v){var b=!1,_=function(){for(var w=arguments.length,x=new Array(w),k=0;k<w;k++)x[k]=arguments[k];Promise.resolve().then(function(){ps(!b,"Your validator function has already return a promise. `callback` will be ignored."),b||v.apply(void 0,x)})},y=h(g,p,_);b=y&&typeof y.then=="function"&&typeof y.catch=="function",ps(b,"`callback` is deprecated. Please return a promise instead."),b&&y.then(function(){v()}).catch(function(C){v(C||" ")})}),f}).sort(function(u,d){var h=u.warningOnly,f=u.ruleIndex,g=d.warningOnly,p=d.ruleIndex;return!!h==!!g?f-p:h?1:-1}),l;if(r===!0)l=new Promise(function(){var u=Bf(Hs().mark(function d(h,f){var g,p,v;return Hs().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:g=0;case 1:if(!(g<a.length)){_.next=12;break}return p=a[g],_.next=5,y3(o,e,p,i,s);case 5:if(v=_.sent,!v.length){_.next=9;break}return f([{errors:v,rule:p}]),_.abrupt("return");case 9:g+=1,_.next=1;break;case 12:h([]);case 13:case"end":return _.stop()}},d)}));return function(d,h){return u.apply(this,arguments)}}());else{var c=a.map(function(u){return y3(o,e,u,i,s).then(function(d){return{errors:d,rule:u}})});l=(r?Gxe(c):qxe(c)).then(function(u){return Promise.reject(u)})}return l.catch(function(u){return u}),l}function qxe(n){return S3.apply(this,arguments)}function S3(){return S3=Bf(Hs().mark(function n(e){return Hs().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(e).then(function(r){var s,o=(s=[]).concat.apply(s,Et(r));return o}));case 1:case"end":return i.stop()}},n)})),S3.apply(this,arguments)}function Gxe(n){return x3.apply(this,arguments)}function x3(){return x3=Bf(Hs().mark(function n(e){var t;return Hs().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=0,r.abrupt("return",new Promise(function(s){e.forEach(function(o){o.then(function(a){a.errors.length&&s([a]),t+=1,t===e.length&&s([])})})}));case 2:case"end":return r.stop()}},n)})),x3.apply(this,arguments)}function Cr(n){return p3(n)}function _U(n,e){var t={};return e.forEach(function(i){var r=ec(n,i);t=Ul(t,i,r)}),t}function y0(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return n&&n.some(function(i){return Pre(e,i,t)})}function Pre(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!n||!e||!t&&n.length!==e.length?!1:e.every(function(i,r){return n[r]===i})}function Yxe(n,e){if(n===e)return!0;if(!n&&e||n&&!e||!n||!e||Rt(n)!=="object"||Rt(e)!=="object")return!1;var t=Object.keys(n),i=Object.keys(e),r=new Set([].concat(t,i));return Et(r).every(function(s){var o=n[s],a=e[s];return typeof o=="function"&&typeof a=="function"?!0:o===a})}function Zxe(n){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&Rt(e.target)==="object"&&n in e.target?e.target[n]:e}function CU(n,e,t){var i=n.length;if(e<0||e>=i||t<0||t>=i)return n;var r=n[e],s=e-t;return s>0?[].concat(Et(n.slice(0,t)),[r],Et(n.slice(t,e)),Et(n.slice(e+1,i))):s<0?[].concat(Et(n.slice(0,e)),Et(n.slice(e+1,t+1)),[r],Et(n.slice(t+1,i))):n}var Xxe=["name"],$a=[];function yU(n,e,t,i,r,s){return typeof n=="function"?n(e,t,"source"in s?{source:s.source}:{}):i!==r}var RF=function(n){Va(t,n);var e=Kd(t);function t(i){var r;if(ys(this,t),r=e.call(this,i),z(kt(r),"state",{resetCount:0}),z(kt(r),"cancelRegisterFunc",null),z(kt(r),"mounted",!1),z(kt(r),"touched",!1),z(kt(r),"dirty",!1),z(kt(r),"validatePromise",void 0),z(kt(r),"prevValidating",void 0),z(kt(r),"errors",$a),z(kt(r),"warnings",$a),z(kt(r),"cancelRegister",function(){var l=r.props,c=l.preserve,u=l.isListField,d=l.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(u,c,Cr(d)),r.cancelRegisterFunc=null}),z(kt(r),"getNamePath",function(){var l=r.props,c=l.name,u=l.fieldContext,d=u.prefixName,h=d===void 0?[]:d;return c!==void 0?[].concat(Et(h),Et(c)):[]}),z(kt(r),"getRules",function(){var l=r.props,c=l.rules,u=c===void 0?[]:c,d=l.fieldContext;return u.map(function(h){return typeof h=="function"?h(d):h})}),z(kt(r),"refresh",function(){r.mounted&&r.setState(function(l){var c=l.resetCount;return{resetCount:c+1}})}),z(kt(r),"metaCache",null),z(kt(r),"triggerMetaEvent",function(l){var c=r.props.onMetaChange;if(c){var u=ne(ne({},r.getMeta()),{},{destroy:l});WI(r.metaCache,u)||c(u),r.metaCache=u}else r.metaCache=null}),z(kt(r),"onStoreChange",function(l,c,u){var d=r.props,h=d.shouldUpdate,f=d.dependencies,g=f===void 0?[]:f,p=d.onReset,v=u.store,b=r.getNamePath(),_=r.getValue(l),y=r.getValue(v),C=c&&y0(c,b);switch(u.type==="valueUpdate"&&u.source==="external"&&_!==y&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=$a,r.warnings=$a,r.triggerMetaEvent()),u.type){case"reset":if(!c||C){r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.errors=$a,r.warnings=$a,r.triggerMetaEvent(),p==null||p(),r.refresh();return}break;case"remove":{if(h){r.reRender();return}break}case"setField":{var w=u.data;if(C){"touched"in w&&(r.touched=w.touched),"validating"in w&&!("originRCField"in w)&&(r.validatePromise=w.validating?Promise.resolve([]):null),"errors"in w&&(r.errors=w.errors||$a),"warnings"in w&&(r.warnings=w.warnings||$a),r.dirty=!0,r.triggerMetaEvent(),r.reRender();return}else if("value"in w&&y0(c,b,!0)){r.reRender();return}if(h&&!b.length&&yU(h,l,v,_,y,u)){r.reRender();return}break}case"dependenciesUpdate":{var x=g.map(Cr);if(x.some(function(k){return y0(u.relatedFields,k)})){r.reRender();return}break}default:if(C||(!g.length||b.length||h)&&yU(h,l,v,_,y,u)){r.reRender();return}break}h===!0&&r.reRender()}),z(kt(r),"validateRules",function(l){var c=r.getNamePath(),u=r.getValue(),d=l||{},h=d.triggerName,f=d.validateOnly,g=f===void 0?!1:f,p=Promise.resolve().then(Bf(Hs().mark(function v(){var b,_,y,C,w,x,k;return Hs().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(r.mounted){L.next=2;break}return L.abrupt("return",[]);case 2:if(b=r.props,_=b.validateFirst,y=_===void 0?!1:_,C=b.messageVariables,w=b.validateDebounce,x=r.getRules(),h&&(x=x.filter(function(M){return M}).filter(function(M){var D=M.validateTrigger;if(!D)return!0;var O=p3(D);return O.includes(h)})),!(w&&h)){L.next=10;break}return L.next=8,new Promise(function(M){setTimeout(M,w)});case 8:if(r.validatePromise===p){L.next=10;break}return L.abrupt("return",[]);case 10:return k=Kxe(c,u,x,l,y,C),k.catch(function(M){return M}).then(function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$a;if(r.validatePromise===p){var D;r.validatePromise=null;var O=[],A=[];(D=M.forEach)===null||D===void 0||D.call(M,function(R){var V=R.rule.warningOnly,F=R.errors,T=F===void 0?$a:F;V?A.push.apply(A,Et(T)):O.push.apply(O,Et(T))}),r.errors=O,r.warnings=A,r.triggerMetaEvent(),r.reRender()}}),L.abrupt("return",k);case 13:case"end":return L.stop()}},v)})));return g||(r.validatePromise=p,r.dirty=!0,r.errors=$a,r.warnings=$a,r.triggerMetaEvent(),r.reRender()),p}),z(kt(r),"isFieldValidating",function(){return!!r.validatePromise}),z(kt(r),"isFieldTouched",function(){return r.touched}),z(kt(r),"isFieldDirty",function(){if(r.dirty||r.props.initialValue!==void 0)return!0;var l=r.props.fieldContext,c=l.getInternalHooks(Wg),u=c.getInitialValue;return u(r.getNamePath())!==void 0}),z(kt(r),"getErrors",function(){return r.errors}),z(kt(r),"getWarnings",function(){return r.warnings}),z(kt(r),"isListField",function(){return r.props.isListField}),z(kt(r),"isList",function(){return r.props.isList}),z(kt(r),"isPreserve",function(){return r.props.preserve}),z(kt(r),"getMeta",function(){r.prevValidating=r.isFieldValidating();var l={touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath(),validated:r.validatePromise===null};return l}),z(kt(r),"getOnlyChild",function(l){if(typeof l=="function"){var c=r.getMeta();return ne(ne({},r.getOnlyChild(l(r.getControlled(),c,r.props.fieldContext))),{},{isFunction:!0})}var u=gu(l);return u.length!==1||!m.isValidElement(u[0])?{child:u,isFunction:!1}:{child:u[0],isFunction:!1}}),z(kt(r),"getValue",function(l){var c=r.props.fieldContext.getFieldsValue,u=r.getNamePath();return ec(l||c(!0),u)}),z(kt(r),"getControlled",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=r.props,u=c.trigger,d=c.validateTrigger,h=c.getValueFromEvent,f=c.normalize,g=c.valuePropName,p=c.getValueProps,v=c.fieldContext,b=d!==void 0?d:v.validateTrigger,_=r.getNamePath(),y=v.getInternalHooks,C=v.getFieldsValue,w=y(Wg),x=w.dispatch,k=r.getValue(),E=p||function(O){return z({},g,O)},L=l[u],M=ne(ne({},l),E(k));M[u]=function(){r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var O,A=arguments.length,R=new Array(A),V=0;V<A;V++)R[V]=arguments[V];h?O=h.apply(void 0,R):O=Zxe.apply(void 0,[g].concat(R)),f&&(O=f(O,k,C(!0))),x({type:"updateValue",namePath:_,value:O}),L&&L.apply(void 0,R)};var D=p3(b||[]);return D.forEach(function(O){var A=M[O];M[O]=function(){A&&A.apply(void 0,arguments);var R=r.props.rules;R&&R.length&&x({type:"validateField",namePath:_,triggerName:O})}}),M}),i.fieldContext){var s=i.fieldContext.getInternalHooks,o=s(Wg),a=o.initEntityValue;a(kt(r))}return r}return ws(t,[{key:"componentDidMount",value:function(){var r=this.props,s=r.shouldUpdate,o=r.fieldContext;if(this.mounted=!0,o){var a=o.getInternalHooks,l=a(Wg),c=l.registerField;this.cancelRegisterFunc=c(this)}s===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var r=this.state.resetCount,s=this.props.children,o=this.getOnlyChild(s),a=o.child,l=o.isFunction,c;return l?c=a:m.isValidElement(a)?c=m.cloneElement(a,this.getControlled(a.props)):(ps(!a,"`children` of Field is not validate ReactElement."),c=a),m.createElement(m.Fragment,{key:r},c)}}]),t}(m.Component);z(RF,"contextType",c1);z(RF,"defaultProps",{trigger:"onChange",valuePropName:"value"});function Fre(n){var e=n.name,t=sn(n,Xxe),i=m.useContext(c1),r=m.useContext(C2),s=e!==void 0?Cr(e):void 0,o="keep";return t.isListField||(o="_".concat((s||[]).join("_"))),m.createElement(RF,J({key:o,name:s,isListField:!!r},t,{fieldContext:i}))}function Qxe(n){var e=n.name,t=n.initialValue,i=n.children,r=n.rules,s=n.validateTrigger,o=n.isListField,a=m.useContext(c1),l=m.useContext(C2),c=m.useRef({keys:[],id:0}),u=c.current,d=m.useMemo(function(){var p=Cr(a.prefixName)||[];return[].concat(Et(p),Et(Cr(e)))},[a.prefixName,e]),h=m.useMemo(function(){return ne(ne({},a),{},{prefixName:d})},[a,d]),f=m.useMemo(function(){return{getKey:function(v){var b=d.length,_=v[b];return[u.keys[_],v.slice(b+1)]}}},[d]);if(typeof i!="function")return ps(!1,"Form.List only accepts function as children."),null;var g=function(v,b,_){var y=_.source;return y==="internal"?!1:v!==b};return m.createElement(C2.Provider,{value:f},m.createElement(c1.Provider,{value:h},m.createElement(Fre,{name:[],shouldUpdate:g,rules:r,validateTrigger:s,initialValue:t,isList:!0,isListField:o??!!l},function(p,v){var b=p.value,_=b===void 0?[]:b,y=p.onChange,C=a.getFieldValue,w=function(){var L=C(d||[]);return L||[]},x={add:function(L,M){var D=w();M>=0&&M<=D.length?(u.keys=[].concat(Et(u.keys.slice(0,M)),[u.id],Et(u.keys.slice(M))),y([].concat(Et(D.slice(0,M)),[L],Et(D.slice(M))))):(u.keys=[].concat(Et(u.keys),[u.id]),y([].concat(Et(D),[L]))),u.id+=1},remove:function(L){var M=w(),D=new Set(Array.isArray(L)?L:[L]);D.size<=0||(u.keys=u.keys.filter(function(O,A){return!D.has(A)}),y(M.filter(function(O,A){return!D.has(A)})))},move:function(L,M){if(L!==M){var D=w();L<0||L>=D.length||M<0||M>=D.length||(u.keys=CU(u.keys,L,M),y(CU(D,L,M)))}}},k=_||[];return Array.isArray(k)||(k=[]),i(k.map(function(E,L){var M=u.keys[L];return M===void 0&&(u.keys[L]=u.id,M=u.keys[L],u.id+=1),{name:L,key:M,isListField:!0}}),x,v)})))}function Jxe(n){var e=!1,t=n.length,i=[];return n.length?new Promise(function(r,s){n.forEach(function(o,a){o.catch(function(l){return e=!0,l}).then(function(l){t-=1,i[a]=l,!(t>0)&&(e&&s(i),r(i))})})}):Promise.resolve([])}var Bre="__@field_split__";function _4(n){return n.map(function(e){return"".concat(Rt(e),":").concat(e)}).join(Bre)}var Am=function(){function n(){ys(this,n),z(this,"kvs",new Map)}return ws(n,[{key:"set",value:function(t,i){this.kvs.set(_4(t),i)}},{key:"get",value:function(t){return this.kvs.get(_4(t))}},{key:"update",value:function(t,i){var r=this.get(t),s=i(r);s?this.set(t,s):this.delete(t)}},{key:"delete",value:function(t){this.kvs.delete(_4(t))}},{key:"map",value:function(t){return Et(this.kvs.entries()).map(function(i){var r=Ce(i,2),s=r[0],o=r[1],a=s.split(Bre);return t({key:a.map(function(l){var c=l.match(/^([^:]*):(.*)$/),u=Ce(c,3),d=u[1],h=u[2];return d==="number"?Number(h):h}),value:o})})}},{key:"toJSON",value:function(){var t={};return this.map(function(i){var r=i.key,s=i.value;return t[r.join(".")]=s,null}),t}}]),n}(),eke=["name"],tke=ws(function n(e){var t=this;ys(this,n),z(this,"formHooked",!1),z(this,"forceRootUpdate",void 0),z(this,"subscribable",!0),z(this,"store",{}),z(this,"fieldEntities",[]),z(this,"initialValues",{}),z(this,"callbacks",{}),z(this,"validateMessages",null),z(this,"preserve",null),z(this,"lastValidatePromise",null),z(this,"getForm",function(){return{getFieldValue:t.getFieldValue,getFieldsValue:t.getFieldsValue,getFieldError:t.getFieldError,getFieldWarning:t.getFieldWarning,getFieldsError:t.getFieldsError,isFieldsTouched:t.isFieldsTouched,isFieldTouched:t.isFieldTouched,isFieldValidating:t.isFieldValidating,isFieldsValidating:t.isFieldsValidating,resetFields:t.resetFields,setFields:t.setFields,setFieldValue:t.setFieldValue,setFieldsValue:t.setFieldsValue,validateFields:t.validateFields,submit:t.submit,_init:!0,getInternalHooks:t.getInternalHooks}}),z(this,"getInternalHooks",function(i){return i===Wg?(t.formHooked=!0,{dispatch:t.dispatch,initEntityValue:t.initEntityValue,registerField:t.registerField,useSubscribe:t.useSubscribe,setInitialValues:t.setInitialValues,destroyForm:t.destroyForm,setCallbacks:t.setCallbacks,setValidateMessages:t.setValidateMessages,getFields:t.getFields,setPreserve:t.setPreserve,getInitialValue:t.getInitialValue,registerWatch:t.registerWatch}):(ps(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),z(this,"useSubscribe",function(i){t.subscribable=i}),z(this,"prevWithoutPreserves",null),z(this,"setInitialValues",function(i,r){if(t.initialValues=i||{},r){var s,o=kv(i,t.store);(s=t.prevWithoutPreserves)===null||s===void 0||s.map(function(a){var l=a.key;o=Ul(o,l,ec(i,l))}),t.prevWithoutPreserves=null,t.updateStore(o)}}),z(this,"destroyForm",function(){var i=new Am;t.getFieldEntities(!0).forEach(function(r){t.isMergedPreserve(r.isPreserve())||i.set(r.getNamePath(),!0)}),t.prevWithoutPreserves=i}),z(this,"getInitialValue",function(i){var r=ec(t.initialValues,i);return i.length?kv(r):r}),z(this,"setCallbacks",function(i){t.callbacks=i}),z(this,"setValidateMessages",function(i){t.validateMessages=i}),z(this,"setPreserve",function(i){t.preserve=i}),z(this,"watchList",[]),z(this,"registerWatch",function(i){return t.watchList.push(i),function(){t.watchList=t.watchList.filter(function(r){return r!==i})}}),z(this,"notifyWatch",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(t.watchList.length){var r=t.getFieldsValue(),s=t.getFieldsValue(!0);t.watchList.forEach(function(o){o(r,s,i)})}}),z(this,"timeoutId",null),z(this,"warningUnhooked",function(){}),z(this,"updateStore",function(i){t.store=i}),z(this,"getFieldEntities",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return i?t.fieldEntities.filter(function(r){return r.getNamePath().length}):t.fieldEntities}),z(this,"getFieldsMap",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=new Am;return t.getFieldEntities(i).forEach(function(s){var o=s.getNamePath();r.set(o,s)}),r}),z(this,"getFieldEntitiesForNamePathList",function(i){if(!i)return t.getFieldEntities(!0);var r=t.getFieldsMap(!0);return i.map(function(s){var o=Cr(s);return r.get(o)||{INVALIDATE_NAME_PATH:Cr(s)}})}),z(this,"getFieldsValue",function(i,r){t.warningUnhooked();var s,o,a;if(i===!0||Array.isArray(i)?(s=i,o=r):i&&Rt(i)==="object"&&(a=i.strict,o=i.filter),s===!0&&!o)return t.store;var l=t.getFieldEntitiesForNamePathList(Array.isArray(s)?s:null),c=[];return l.forEach(function(u){var d,h,f="INVALIDATE_NAME_PATH"in u?u.INVALIDATE_NAME_PATH:u.getNamePath();if(a){var g,p;if((g=(p=u).isList)!==null&&g!==void 0&&g.call(p))return}else if(!s&&(d=(h=u).isListField)!==null&&d!==void 0&&d.call(h))return;if(!o)c.push(f);else{var v="getMeta"in u?u.getMeta():null;o(v)&&c.push(f)}}),_U(t.store,c.map(Cr))}),z(this,"getFieldValue",function(i){t.warningUnhooked();var r=Cr(i);return ec(t.store,r)}),z(this,"getFieldsError",function(i){t.warningUnhooked();var r=t.getFieldEntitiesForNamePathList(i);return r.map(function(s,o){return s&&!("INVALIDATE_NAME_PATH"in s)?{name:s.getNamePath(),errors:s.getErrors(),warnings:s.getWarnings()}:{name:Cr(i[o]),errors:[],warnings:[]}})}),z(this,"getFieldError",function(i){t.warningUnhooked();var r=Cr(i),s=t.getFieldsError([r])[0];return s.errors}),z(this,"getFieldWarning",function(i){t.warningUnhooked();var r=Cr(i),s=t.getFieldsError([r])[0];return s.warnings}),z(this,"isFieldsTouched",function(){t.warningUnhooked();for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r[0],a=r[1],l,c=!1;r.length===0?l=null:r.length===1?Array.isArray(o)?(l=o.map(Cr),c=!1):(l=null,c=o):(l=o.map(Cr),c=a);var u=t.getFieldEntities(!0),d=function(v){return v.isFieldTouched()};if(!l)return c?u.every(d):u.some(d);var h=new Am;l.forEach(function(p){h.set(p,[])}),u.forEach(function(p){var v=p.getNamePath();l.forEach(function(b){b.every(function(_,y){return v[y]===_})&&h.update(b,function(_){return[].concat(Et(_),[p])})})});var f=function(v){return v.some(d)},g=h.map(function(p){var v=p.value;return v});return c?g.every(f):g.some(f)}),z(this,"isFieldTouched",function(i){return t.warningUnhooked(),t.isFieldsTouched([i])}),z(this,"isFieldsValidating",function(i){t.warningUnhooked();var r=t.getFieldEntities();if(!i)return r.some(function(o){return o.isFieldValidating()});var s=i.map(Cr);return r.some(function(o){var a=o.getNamePath();return y0(s,a)&&o.isFieldValidating()})}),z(this,"isFieldValidating",function(i){return t.warningUnhooked(),t.isFieldsValidating([i])}),z(this,"resetWithFieldInitialValue",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=new Am,s=t.getFieldEntities(!0);s.forEach(function(l){var c=l.props.initialValue,u=l.getNamePath();if(c!==void 0){var d=r.get(u)||new Set;d.add({entity:l,value:c}),r.set(u,d)}});var o=function(c){c.forEach(function(u){var d=u.props.initialValue;if(d!==void 0){var h=u.getNamePath(),f=t.getInitialValue(h);if(f!==void 0)ps(!1,"Form already set 'initialValues' with path '".concat(h.join("."),"'. Field can not overwrite it."));else{var g=r.get(h);if(g&&g.size>1)ps(!1,"Multiple Field with path '".concat(h.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(g){var p=t.getFieldValue(h);(!i.skipExist||p===void 0)&&t.updateStore(Ul(t.store,h,Et(g)[0].value))}}}})},a;i.entities?a=i.entities:i.namePathList?(a=[],i.namePathList.forEach(function(l){var c=r.get(l);if(c){var u;(u=a).push.apply(u,Et(Et(c).map(function(d){return d.entity})))}})):a=s,o(a)}),z(this,"resetFields",function(i){t.warningUnhooked();var r=t.store;if(!i){t.updateStore(kv(t.initialValues)),t.resetWithFieldInitialValue(),t.notifyObservers(r,null,{type:"reset"}),t.notifyWatch();return}var s=i.map(Cr);s.forEach(function(o){var a=t.getInitialValue(o);t.updateStore(Ul(t.store,o,a))}),t.resetWithFieldInitialValue({namePathList:s}),t.notifyObservers(r,s,{type:"reset"}),t.notifyWatch(s)}),z(this,"setFields",function(i){t.warningUnhooked();var r=t.store,s=[];i.forEach(function(o){var a=o.name,l=sn(o,eke),c=Cr(a);s.push(c),"value"in l&&t.updateStore(Ul(t.store,c,l.value)),t.notifyObservers(r,[c],{type:"setField",data:o})}),t.notifyWatch(s)}),z(this,"getFields",function(){var i=t.getFieldEntities(!0),r=i.map(function(s){var o=s.getNamePath(),a=s.getMeta(),l=ne(ne({},a),{},{name:o,value:t.getFieldValue(o)});return Object.defineProperty(l,"originRCField",{value:!0}),l});return r}),z(this,"initEntityValue",function(i){var r=i.props.initialValue;if(r!==void 0){var s=i.getNamePath(),o=ec(t.store,s);o===void 0&&t.updateStore(Ul(t.store,s,r))}}),z(this,"isMergedPreserve",function(i){var r=i!==void 0?i:t.preserve;return r??!0}),z(this,"registerField",function(i){t.fieldEntities.push(i);var r=i.getNamePath();if(t.notifyWatch([r]),i.props.initialValue!==void 0){var s=t.store;t.resetWithFieldInitialValue({entities:[i],skipExist:!0}),t.notifyObservers(s,[i.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(o,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(t.fieldEntities=t.fieldEntities.filter(function(d){return d!==i}),!t.isMergedPreserve(a)&&(!o||l.length>1)){var c=o?void 0:t.getInitialValue(r);if(r.length&&t.getFieldValue(r)!==c&&t.fieldEntities.every(function(d){return!Pre(d.getNamePath(),r)})){var u=t.store;t.updateStore(Ul(u,r,c,!0)),t.notifyObservers(u,[r],{type:"remove"}),t.triggerDependenciesUpdate(u,r)}}t.notifyWatch([r])}}),z(this,"dispatch",function(i){switch(i.type){case"updateValue":{var r=i.namePath,s=i.value;t.updateValue(r,s);break}case"validateField":{var o=i.namePath,a=i.triggerName;t.validateFields([o],{triggerName:a});break}}}),z(this,"notifyObservers",function(i,r,s){if(t.subscribable){var o=ne(ne({},s),{},{store:t.getFieldsValue(!0)});t.getFieldEntities().forEach(function(a){var l=a.onStoreChange;l(i,r,o)})}else t.forceRootUpdate()}),z(this,"triggerDependenciesUpdate",function(i,r){var s=t.getDependencyChildrenFields(r);return s.length&&t.validateFields(s),t.notifyObservers(i,s,{type:"dependenciesUpdate",relatedFields:[r].concat(Et(s))}),s}),z(this,"updateValue",function(i,r){var s=Cr(i),o=t.store;t.updateStore(Ul(t.store,s,r)),t.notifyObservers(o,[s],{type:"valueUpdate",source:"internal"}),t.notifyWatch([s]);var a=t.triggerDependenciesUpdate(o,s),l=t.callbacks.onValuesChange;if(l){var c=_U(t.store,[s]);l(c,t.getFieldsValue())}t.triggerOnFieldsChange([s].concat(Et(a)))}),z(this,"setFieldsValue",function(i){t.warningUnhooked();var r=t.store;if(i){var s=kv(t.store,i);t.updateStore(s)}t.notifyObservers(r,null,{type:"valueUpdate",source:"external"}),t.notifyWatch()}),z(this,"setFieldValue",function(i,r){t.setFields([{name:i,value:r}])}),z(this,"getDependencyChildrenFields",function(i){var r=new Set,s=[],o=new Am;t.getFieldEntities().forEach(function(l){var c=l.props.dependencies;(c||[]).forEach(function(u){var d=Cr(u);o.update(d,function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return h.add(l),h})})});var a=function l(c){var u=o.get(c)||new Set;u.forEach(function(d){if(!r.has(d)){r.add(d);var h=d.getNamePath();d.isFieldDirty()&&h.length&&(s.push(h),l(h))}})};return a(i),s}),z(this,"triggerOnFieldsChange",function(i,r){var s=t.callbacks.onFieldsChange;if(s){var o=t.getFields();if(r){var a=new Am;r.forEach(function(c){var u=c.name,d=c.errors;a.set(u,d)}),o.forEach(function(c){c.errors=a.get(c.name)||c.errors})}var l=o.filter(function(c){var u=c.name;return y0(i,u)});l.length&&s(l,o)}}),z(this,"validateFields",function(i,r){var s;t.warningUnhooked();var o,a;Array.isArray(i)||typeof i=="string"||typeof r=="string"?(o=i,a=r):a=i;var l=!!o,c=l?o.map(Cr):[],u=[],d=String(Date.now()),h=new Set,f=(s=a)===null||s===void 0?void 0:s.recursive;t.getFieldEntities(!0).forEach(function(b){if(l||c.push(b.getNamePath()),!(!b.props.rules||!b.props.rules.length)){var _=b.getNamePath();if(h.add(_.join(d)),!l||y0(c,_,f)){var y=b.validateRules(ne({validateMessages:ne(ne({},Ore),t.validateMessages)},a));u.push(y.then(function(){return{name:_,errors:[],warnings:[]}}).catch(function(C){var w,x=[],k=[];return(w=C.forEach)===null||w===void 0||w.call(C,function(E){var L=E.rule.warningOnly,M=E.errors;L?k.push.apply(k,Et(M)):x.push.apply(x,Et(M))}),x.length?Promise.reject({name:_,errors:x,warnings:k}):{name:_,errors:x,warnings:k}}))}}});var g=Jxe(u);t.lastValidatePromise=g,g.catch(function(b){return b}).then(function(b){var _=b.map(function(y){var C=y.name;return C});t.notifyObservers(t.store,_,{type:"validateFinish"}),t.triggerOnFieldsChange(_,b)});var p=g.then(function(){return t.lastValidatePromise===g?Promise.resolve(t.getFieldsValue(c)):Promise.reject([])}).catch(function(b){var _=b.filter(function(y){return y&&y.errors.length});return Promise.reject({values:t.getFieldsValue(c),errorFields:_,outOfDate:t.lastValidatePromise!==g})});p.catch(function(b){return b});var v=c.filter(function(b){return h.has(b.join(d))});return t.triggerOnFieldsChange(v),p}),z(this,"submit",function(){t.warningUnhooked(),t.validateFields().then(function(i){var r=t.callbacks.onFinish;if(r)try{r(i)}catch(s){console.error(s)}}).catch(function(i){var r=t.callbacks.onFinishFailed;r&&r(i)})}),this.forceRootUpdate=e});function Hre(n){var e=m.useRef(),t=m.useState({}),i=Ce(t,2),r=i[1];if(!e.current)if(n)e.current=n;else{var s=function(){r({})},o=new tke(s);e.current=o.getForm()}return[e.current]}var k3=m.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),nke=function(e){var t=e.validateMessages,i=e.onFormChange,r=e.onFormFinish,s=e.children,o=m.useContext(k3),a=m.useRef({});return m.createElement(k3.Provider,{value:ne(ne({},o),{},{validateMessages:ne(ne({},o.validateMessages),t),triggerFormChange:function(c,u){i&&i(c,{changedFields:u,forms:a.current}),o.triggerFormChange(c,u)},triggerFormFinish:function(c,u){r&&r(c,{values:u,forms:a.current}),o.triggerFormFinish(c,u)},registerForm:function(c,u){c&&(a.current=ne(ne({},a.current),{},z({},c,u))),o.registerForm(c,u)},unregisterForm:function(c){var u=ne({},a.current);delete u[c],a.current=u,o.unregisterForm(c)}})},s)},ike=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],rke=function(e,t){var i=e.name,r=e.initialValues,s=e.fields,o=e.form,a=e.preserve,l=e.children,c=e.component,u=c===void 0?"form":c,d=e.validateMessages,h=e.validateTrigger,f=h===void 0?"onChange":h,g=e.onValuesChange,p=e.onFieldsChange,v=e.onFinish,b=e.onFinishFailed,_=sn(e,ike),y=m.useContext(k3),C=Hre(o),w=Ce(C,1),x=w[0],k=x.getInternalHooks(Wg),E=k.useSubscribe,L=k.setInitialValues,M=k.setCallbacks,D=k.setValidateMessages,O=k.setPreserve,A=k.destroyForm;m.useImperativeHandle(t,function(){return x}),m.useEffect(function(){return y.registerForm(i,x),function(){y.unregisterForm(i)}},[y,x,i]),D(ne(ne({},y.validateMessages),d)),M({onValuesChange:g,onFieldsChange:function(Y){if(y.triggerFormChange(i,Y),p){for(var G=arguments.length,X=new Array(G>1?G-1:0),q=1;q<G;q++)X[q-1]=arguments[q];p.apply(void 0,[Y].concat(X))}},onFinish:function(Y){y.triggerFormFinish(i,Y),v&&v(Y)},onFinishFailed:b}),O(a);var R=m.useRef(null);L(r,!R.current),R.current||(R.current=!0),m.useEffect(function(){return A},[]);var V,F=typeof l=="function";if(F){var T=x.getFieldsValue(!0);V=l(T,x)}else V=l;E(!F);var N=m.useRef();m.useEffect(function(){Yxe(N.current||[],s||[])||x.setFields(s||[]),N.current=s},[s,x]);var B=m.useMemo(function(){return ne(ne({},x),{},{validateTrigger:f})},[x,f]),$=m.createElement(C2.Provider,{value:null},m.createElement(c1.Provider,{value:B},V));return u===!1?$:m.createElement(u,J({},_,{onSubmit:function(Y){Y.preventDefault(),Y.stopPropagation(),x.submit()},onReset:function(Y){var G;Y.preventDefault(),x.resetFields(),(G=_.onReset)===null||G===void 0||G.call(_,Y)}}),$)};function wU(n){try{return JSON.stringify(n)}catch{return Math.random()}}function ske(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=e[0],r=i===void 0?[]:i,s=e[1],o=s===void 0?{}:s,a=hxe(o)?{form:o}:o,l=a.form,c=m.useState(),u=Ce(c,2),d=u[0],h=u[1],f=m.useMemo(function(){return wU(d)},[d]),g=m.useRef(f);g.current=f;var p=m.useContext(c1),v=l||p,b=v&&v._init,_=Cr(r),y=m.useRef(_);return y.current=_,m.useEffect(function(){if(b){var C=v.getFieldsValue,w=v.getInternalHooks,x=w(Wg),k=x.registerWatch,E=k(function(M,D){var O=ec(a.preserve?D:M,y.current),A=wU(O);g.current!==A&&(g.current=A,h(O))}),L=ec(a.preserve?C(!0):C(),y.current);return d!==L&&h(L),E}},[b]),d}var oke=m.forwardRef(rke),Gw=oke;Gw.FormProvider=nke;Gw.Field=Fre;Gw.List=Qxe;Gw.useForm=Hre;Gw.useWatch=ske;var Fd=m.createContext({}),Ey=function(e){var t=e.children,i=e.status,r=e.override,s=m.useContext(Fd),o=m.useMemo(function(){var a=J({},s);return r&&delete a.isFormItemInput,i&&(delete a.status,delete a.hasFeedback,delete a.feedbackIcon),a},[i,r,s]);return m.createElement(Fd.Provider,{value:o},t)},wc=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t},C4=function(){return{height:0,opacity:0}},SU=function(e){var t=e.scrollHeight;return{height:t,opacity:1}},ake=function(e){return{height:e?e.offsetHeight:0}},y4=function(e,t){return(t==null?void 0:t.deadline)===!0||t.propertyName==="height"},lke={motionName:"ant-motion-collapse",onAppearStart:C4,onEnterStart:C4,onAppearActive:SU,onEnterActive:SU,onLeaveStart:ake,onLeaveActive:C4,onAppearEnd:y4,onEnterEnd:y4,onLeaveEnd:y4,motionDeadline:500};wc("bottomLeft","bottomRight","topLeft","topRight");var cke=function(e){return e!==void 0&&(e==="topLeft"||e==="topRight")?"slide-down":"slide-up"},_l=function(e,t,i){return i!==void 0?i:"".concat(e,"-").concat(t)};wc("warning","error","");function cu(n,e,t){return Ee(z(z(z(z(z({},"".concat(n,"-status-success"),e==="success"),"".concat(n,"-status-warning"),e==="warning"),"".concat(n,"-status-error"),e==="error"),"".concat(n,"-status-validating"),e==="validating"),"".concat(n,"-has-feedback"),t))}var Yw=function(e,t){return t||e},Vre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},uke=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:Vre}))},zre=m.forwardRef(uke),dke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},hke=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:dke}))},Wre=m.forwardRef(hke),$re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},fke=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:$re}))},Ure=m.forwardRef(fke);function gke(n){var e=n.suffixIcon,t=n.clearIcon,i=n.menuItemSelectedIcon,r=n.removeIcon,s=n.loading,o=n.multiple,a=n.hasFeedback,l=n.prefixCls,c=n.showArrow,u=n.feedbackIcon,d=t??m.createElement(Uw,null),h=function(_){return m.createElement(m.Fragment,null,c!==!1&&_,a&&u)},f=null;if(e!==void 0)f=h(e);else if(s)f=h(m.createElement(g2,{spin:!0}));else{var g="".concat(l,"-suffix");f=function(_){var y=_.open,C=_.showSearch;return h(y&&C?m.createElement(Ure,{className:g}):m.createElement(Wre,{className:g}))}}var p=null;i!==void 0?p=i:o?p=m.createElement(zre,null):p=null;var v=null;return r!==void 0?v=r:v=m.createElement(J1,null),{clearIcon:d,suffixIcon:f,itemIcon:p,removeIcon:v}}var jre=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},UI=m.createContext(null),tb=function(e,t){var i=m.useContext(UI),r=m.useMemo(function(){if(!i)return"";var s=i.compactDirection,o=i.isFirstItem,a=i.isLastItem,l=s==="vertical"?"-vertical-":"-";return Ee(z(z(z(z({},"".concat(e,"-compact").concat(l,"item"),!0),"".concat(e,"-compact").concat(l,"first-item"),o),"".concat(e,"-compact").concat(l,"last-item"),a),"".concat(e,"-compact").concat(l,"item-rtl"),t==="rtl"))},[e,t,i]);return{compactSize:i==null?void 0:i.compactSize,compactDirection:i==null?void 0:i.compactDirection,compactItemClassnames:r}},u1=function(e){var t=e.children;return m.createElement(UI.Provider,{value:null},t)},pke=function(e){var t=e.children,i=jre(e,["children"]);return m.createElement(UI.Provider,{value:i},t)},mke=function(e){var t=m.useContext(Bn),i=t.getPrefixCls,r=t.direction,s=e.size,o=s===void 0?"middle":s,a=e.direction,l=e.block,c=e.prefixCls,u=e.className,d=e.children,h=jre(e,["size","direction","block","prefixCls","className","children"]),f=i("space-compact",c),g=Ee(f,z(z(z({},"".concat(f,"-rtl"),r==="rtl"),"".concat(f,"-block"),l),"".concat(f,"-vertical"),a==="vertical"),u),p=m.useContext(UI),v=gu(d),b=m.useMemo(function(){return v.map(function(_,y){var C=_&&_.key||"".concat(f,"-item-").concat(y);return m.createElement(pke,{key:C,compactSize:o,compactDirection:a,isFirstItem:y===0&&(!p||(p==null?void 0:p.isFirstItem)),isLastItem:y===v.length-1&&(!p||(p==null?void 0:p.isLastItem))},_)})},[o,v,p]);return v.length===0?null:m.createElement("div",J({className:g},h),b)},vke=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},Kre="SECRET_COMBOBOX_MODE_DO_NOT_USE",bke=function(e,t){var i=e.prefixCls,r=e.bordered,s=r===void 0?!0:r,o=e.className,a=e.getPopupContainer,l=e.dropdownClassName,c=e.popupClassName,u=e.listHeight,d=u===void 0?256:u,h=e.placement,f=e.listItemHeight,g=f===void 0?32:f,p=e.size,v=e.disabled,b=e.notFoundContent,_=e.status,y=e.showArrow,C=vke(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),w=m.useContext(Bn),x=w.getPopupContainer,k=w.getPrefixCls,E=w.renderEmpty,L=w.direction,M=w.virtual,D=w.dropdownMatchSelectWidth,O=m.useContext(hc),A=k("select",i),R=k(),V=tb(A,L),F=V.compactSize,T=V.compactItemClassnames,N=m.useMemo(function(){var Ge=C.mode;if(Ge!=="combobox")return Ge===Kre?"combobox":Ge},[C.mode]),B=N==="multiple"||N==="tags",$=y!==void 0?y:C.loading||!(B||N==="combobox"),j=m.useContext(Fd),Y=j.status,G=j.hasFeedback,X=j.isFormItemInput,q=j.feedbackIcon,re=Yw(Y,_),ge;b!==void 0?ge=b:N==="combobox"?ge=null:ge=(E||dxe)("Select");var ye=gke(J(J({},C),{multiple:B,hasFeedback:G,feedbackIcon:q,showArrow:$,prefixCls:A})),we=ye.suffixIcon,Ie=ye.itemIcon,Fe=ye.removeIcon,ze=ye.clearIcon,Me=fo(C,["suffixIcon","itemIcon"]),Pe=Ee(c||l,z({},"".concat(A,"-dropdown-").concat(L),L==="rtl")),tt=F||p||O,Ae=m.useContext(Hp),mt=v??Ae,ft=Ee(z(z(z(z(z({},"".concat(A,"-lg"),tt==="large"),"".concat(A,"-sm"),tt==="small"),"".concat(A,"-rtl"),L==="rtl"),"".concat(A,"-borderless"),!s),"".concat(A,"-in-form-item"),X),cu(A,re,G),T,o),Le=function(){return h!==void 0?h:L==="rtl"?"bottomRight":"bottomLeft"};return m.createElement(MF,J({ref:t,virtual:M,dropdownMatchSelectWidth:D},Me,{transitionName:_l(R,cke(h),C.transitionName),listHeight:d,listItemHeight:g,mode:N,prefixCls:A,placement:Le(),direction:L,inputIcon:we,menuItemSelectedIcon:Ie,removeIcon:Fe,clearIcon:ze,notFoundContent:ge,className:ft,getPopupContainer:a||x,dropdownClassName:Pe,showArrow:G||y,disabled:mt}))},zp=m.forwardRef(bke);zp.SECRET_COMBOBOX_MODE_DO_NOT_USE=Kre;zp.Option=DF;zp.OptGroup=IF;var xU=function(e){return e?typeof e=="function"?e():e:null},Ua={adjustX:1,adjustY:1},ja=[0,0],qre={left:{points:["cr","cl"],overflow:Ua,offset:[-4,0],targetOffset:ja},right:{points:["cl","cr"],overflow:Ua,offset:[4,0],targetOffset:ja},top:{points:["bc","tc"],overflow:Ua,offset:[0,-4],targetOffset:ja},bottom:{points:["tc","bc"],overflow:Ua,offset:[0,4],targetOffset:ja},topLeft:{points:["bl","tl"],overflow:Ua,offset:[0,-4],targetOffset:ja},leftTop:{points:["tr","tl"],overflow:Ua,offset:[-4,0],targetOffset:ja},topRight:{points:["br","tr"],overflow:Ua,offset:[0,-4],targetOffset:ja},rightTop:{points:["tl","tr"],overflow:Ua,offset:[4,0],targetOffset:ja},bottomRight:{points:["tr","br"],overflow:Ua,offset:[0,4],targetOffset:ja},rightBottom:{points:["bl","br"],overflow:Ua,offset:[4,0],targetOffset:ja},bottomLeft:{points:["tl","bl"],overflow:Ua,offset:[0,4],targetOffset:ja},leftBottom:{points:["br","bl"],overflow:Ua,offset:[-4,0],targetOffset:ja}};function _ke(n){var e=n.showArrow,t=n.arrowContent,i=n.children,r=n.prefixCls,s=n.id,o=n.overlayInnerStyle,a=n.className,l=n.style;return m.createElement("div",{className:Ee("".concat(r,"-content"),a),style:l},e!==!1&&m.createElement("div",{className:"".concat(r,"-arrow"),key:"arrow"},t),m.createElement("div",{className:"".concat(r,"-inner"),id:s,role:"tooltip",style:o},typeof i=="function"?i():i))}var Cke=function(e,t){var i=e.overlayClassName,r=e.trigger,s=r===void 0?["hover"]:r,o=e.mouseEnterDelay,a=o===void 0?0:o,l=e.mouseLeaveDelay,c=l===void 0?.1:l,u=e.overlayStyle,d=e.prefixCls,h=d===void 0?"rc-tooltip":d,f=e.children,g=e.onVisibleChange,p=e.afterVisibleChange,v=e.transitionName,b=e.animation,_=e.motion,y=e.placement,C=y===void 0?"right":y,w=e.align,x=w===void 0?{}:w,k=e.destroyTooltipOnHide,E=k===void 0?!1:k,L=e.defaultVisible,M=e.getTooltipContainer,D=e.overlayInnerStyle,O=e.arrowContent,A=e.overlay,R=e.id,V=e.showArrow,F=sn(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"]),T=m.useRef(null);m.useImperativeHandle(t,function(){return T.current});var N=ne({},F);"visible"in e&&(N.popupVisible=e.visible);var B=function(){return m.createElement(_ke,{showArrow:V,arrowContent:O,key:"content",prefixCls:h,id:R,overlayInnerStyle:D},A)},$=!1,j=!1;if(typeof E=="boolean")$=E;else if(E&&Rt(E)==="object"){var Y=E.keepParent;$=Y===!0,j=Y===!1}return m.createElement($I,J({popupClassName:i,prefixCls:h,popup:B,action:s,builtinPlacements:qre,popupPlacement:C,ref:T,popupAlign:x,getPopupContainer:M,onPopupVisibleChange:g,afterPopupVisibleChange:p,popupTransitionName:v,popupAnimation:b,popupMotion:_,defaultPopupVisible:L,destroyPopupOnHide:$,autoDestroy:j,mouseLeaveDelay:c,popupStyle:u,mouseEnterDelay:a},N),f)};const yke=m.forwardRef(Cke);wc("success","processing","error","default","warning");var wke=wc("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"),Ske={adjustX:1,adjustY:1},kU={adjustX:0,adjustY:0},xke=[0,0];function EU(n){return typeof n=="boolean"?n?Ske:kU:J(J({},kU),n)}function Gre(n){var e=n.arrowWidth,t=e===void 0?4:e,i=n.horizontalArrowShift,r=i===void 0?16:i,s=n.verticalArrowShift,o=s===void 0?8:s,a=n.autoAdjustOverflow,l=n.arrowPointAtCenter,c={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(r+t),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(o+t)]},topRight:{points:["br","tc"],offset:[r+t,-4]},rightTop:{points:["tl","cr"],offset:[4,-(o+t)]},bottomRight:{points:["tr","bc"],offset:[r+t,4]},rightBottom:{points:["bl","cr"],offset:[4,o+t]},bottomLeft:{points:["tl","bc"],offset:[-(r+t),4]},leftBottom:{points:["br","cl"],offset:[-4,o+t]}};return Object.keys(c).forEach(function(u){c[u]=l?J(J({},c[u]),{overflow:EU(a),targetOffset:xke}):J(J({},qre[u]),{overflow:EU(a)}),c[u].ignoreShake=!0}),c}var kke=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},Eke=function(e,t){var i={},r=J({},e);return t.forEach(function(s){e&&s in e&&(i[s]=e[s],delete r[s])}),{picked:i,omitted:r}},LU=new RegExp("^(".concat(wke.join("|"),")(-inverse)?$"));function Lke(n,e){var t=n.type;if((t.__ANT_BUTTON===!0||n.type==="button")&&n.props.disabled||t.__ANT_SWITCH===!0&&(n.props.disabled||n.props.loading)||t.__ANT_RADIO===!0&&n.props.disabled){var i=Eke(n.props.style,["position","left","right","top","bottom","float","display","zIndex"]),r=i.picked,s=i.omitted,o=J(J({display:"inline-block"},r),{cursor:"not-allowed",width:n.props.block?"100%":void 0}),a=J(J({},s),{pointerEvents:"none"}),l=Io(n,{style:a,className:null});return m.createElement("span",{style:o,className:Ee(n.props.className,"".concat(e,"-disabled-compatible-wrapper"))},l)}return n}var Vf=m.forwardRef(function(n,e){var t=m.useContext(Bn),i=t.getPopupContainer,r=t.getPrefixCls,s=t.direction,o=Ps(!1,{value:n.open!==void 0?n.open:n.visible,defaultValue:n.defaultOpen!==void 0?n.defaultOpen:n.defaultVisible}),a=Ce(o,2),l=a[0],c=a[1],u=function(){var X=n.title,q=n.overlay;return!X&&!q&&X!==0},d=function(X){var q,re;c(u()?!1:X),u()||((q=n.onOpenChange)===null||q===void 0||q.call(n,X),(re=n.onVisibleChange)===null||re===void 0||re.call(n,X))},h=function(){var X=n.builtinPlacements,q=n.arrowPointAtCenter,re=q===void 0?!1:q,ge=n.autoAdjustOverflow,ye=ge===void 0?!0:ge;return X||Gre({arrowPointAtCenter:re,autoAdjustOverflow:ye})},f=function(X,q){var re=h(),ge=Object.keys(re).find(function(Ie){var Fe,ze;return re[Ie].points[0]===((Fe=q.points)===null||Fe===void 0?void 0:Fe[0])&&re[Ie].points[1]===((ze=q.points)===null||ze===void 0?void 0:ze[1])});if(ge){var ye=X.getBoundingClientRect(),we={top:"50%",left:"50%"};/top|Bottom/.test(ge)?we.top="".concat(ye.height-q.offset[1],"px"):/Top|bottom/.test(ge)&&(we.top="".concat(-q.offset[1],"px")),/left|Right/.test(ge)?we.left="".concat(ye.width-q.offset[0],"px"):/right|Left/.test(ge)&&(we.left="".concat(-q.offset[0],"px")),X.style.transformOrigin="".concat(we.left," ").concat(we.top)}},g=function(){var X=n.title,q=n.overlay;return X===0?X:q||X||""},p=n.getPopupContainer,v=n.placement,b=v===void 0?"top":v,_=n.mouseEnterDelay,y=_===void 0?.1:_,C=n.mouseLeaveDelay,w=C===void 0?.1:C,x=kke(n,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay"]),k=n.prefixCls,E=n.openClassName,L=n.getTooltipContainer,M=n.overlayClassName,D=n.color,O=n.overlayInnerStyle,A=n.children,R=r("tooltip",k),V=r(),F=l;!("open"in n)&&!("visible"in n)&&u()&&(F=!1);var T=Lke(Vp(A)&&!ere(A)?A:m.createElement("span",null,A),R),N=T.props,B=!N.className||typeof N.className=="string"?Ee(N.className,z({},E||"".concat(R,"-open"),!0)):N.className,$=Ee(M,z(z({},"".concat(R,"-rtl"),s==="rtl"),"".concat(R,"-").concat(D),D&&LU.test(D))),j=O,Y={};return D&&!LU.test(D)&&(j=J(J({},O),{background:D}),Y={"--antd-arrow-background-color":D}),m.createElement(yke,J({},x,{placement:b,mouseEnterDelay:y,mouseLeaveDelay:w,prefixCls:R,overlayClassName:$,getTooltipContainer:p||L||i,ref:e,builtinPlacements:h(),overlay:g(),visible:F,onVisibleChange:d,onPopupAlign:f,overlayInnerStyle:j,arrowContent:m.createElement("span",{className:"".concat(R,"-arrow-content"),style:Y}),motion:{motionName:_l(V,"zoom-big-fast",n.transitionName),motionDeadline:1e3}}),F?Io(T,{className:B}):T)}),Nke=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},Tke=function(e){var t=e.title,i=e.content,r=e.prefixCls;return m.createElement(m.Fragment,null,t&&m.createElement("div",{className:"".concat(r,"-title")},xU(t)),m.createElement("div",{className:"".concat(r,"-inner-content")},xU(i)))},jI=m.forwardRef(function(n,e){var t=n.prefixCls,i=n.title,r=n.content,s=n._overlay,o=n.placement,a=o===void 0?"top":o,l=n.trigger,c=l===void 0?"hover":l,u=n.mouseEnterDelay,d=u===void 0?.1:u,h=n.mouseLeaveDelay,f=h===void 0?.1:h,g=n.overlayStyle,p=g===void 0?{}:g,v=Nke(n,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),b=m.useContext(Bn),_=b.getPrefixCls,y=_("popover",t),C=_(),w=m.useMemo(function(){return s||(!i&&!r?null:m.createElement(Tke,{prefixCls:y,title:i,content:r}))},[s,i,r,y]);return m.createElement(Vf,J({placement:a,trigger:c,mouseEnterDelay:d,mouseLeaveDelay:f,overlayStyle:p},v,{prefixCls:y,ref:e,overlay:w,transitionName:_l(C,"zoom-big",v.transitionName)}))}),Ike={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}}]},name:"vertical-align-top",theme:"outlined"},Dke=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:Ike}))},Mke=m.forwardRef(Dke),Rke=function(e){var t=e.prefixCls,i=e.rootPrefixCls,r=e.children,s=e.visible,o=m.createElement("div",{className:"".concat(t,"-content")},m.createElement("div",{className:"".concat(t,"-icon")},m.createElement(Mke,null)));return m.createElement(yc,{visible:s,motionName:"".concat(i,"-fade")},function(a){var l=a.className;return Io(r||o,function(c){var u=c.className;return{className:Ee(l,u)}})})},Ake=function(e){var t=Ps(!1,{value:e.visible}),i=Ce(t,2),r=i[0],s=i[1],o=m.createRef(),a=m.useRef(null),l=function(){return o.current&&o.current.ownerDocument?o.current.ownerDocument:window},c=Jye(function(x){var k=e.visibilityHeight,E=k===void 0?400:k,L=tre(x.target);s(L>E)}),u=function(){var k=e.target,E=k||l,L=E();a.current=Ql(L,"scroll",function(M){c(M)}),c({target:L})};m.useEffect(function(){return u(),function(){a.current&&a.current.remove(),c.cancel()}},[e.target]);var d=function(k){var E=e.onClick,L=e.target,M=e.duration,D=M===void 0?450:M;nwe(0,{getContainer:L||l,duration:D}),typeof E=="function"&&E(k)},h=m.useContext(Bn),f=h.getPrefixCls,g=h.direction,p=e.prefixCls,v=e.className,b=v===void 0?"":v,_=f("back-top",p),y=f(),C=Ee(_,z({},"".concat(_,"-rtl"),g==="rtl"),b),w=fo(e,["prefixCls","className","children","visibilityHeight","target","visible"]);return m.createElement("div",J({},w,{className:C,onClick:d,ref:o}),m.createElement(Rke,{prefixCls:_,rootPrefixCls:y,visible:r},e.children))};const Oke=m.memo(Ake);var Yre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},Pke=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:Yre}))},AF=m.forwardRef(Pke),Zre=m.createContext(null);function OF(n,e){return n===void 0?null:"".concat(n,"-").concat(e)}function Xre(n){var e=m.useContext(Zre);return OF(e,n)}var Fke=["children","locked"],fc=m.createContext(null);function Bke(n,e){var t=ne({},n);return Object.keys(e).forEach(function(i){var r=e[i];r!==void 0&&(t[i]=r)}),t}function Ly(n){var e=n.children,t=n.locked,i=sn(n,Fke),r=m.useContext(fc),s=AI(function(){return Bke(r,i)},[r,i],function(o,a){return!t&&(o[0]!==a[0]||!WI(o[1],a[1],!0))});return m.createElement(fc.Provider,{value:s},e)}var Hke=[],Qre=m.createContext(null);function KI(){return m.useContext(Qre)}var Jre=m.createContext(Hke);function nb(n){var e=m.useContext(Jre);return m.useMemo(function(){return n!==void 0?[].concat(Et(e),[n]):e},[e,n])}var ese=m.createContext(null),PF=m.createContext({});function NU(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(_re(n)){var t=n.nodeName.toLowerCase(),i=["input","select","textarea","button"].includes(t)||n.isContentEditable||t==="a"&&!!n.getAttribute("href"),r=n.getAttribute("tabindex"),s=Number(r),o=null;return r&&!Number.isNaN(s)?o=s:i&&o===null&&(o=0),i&&n.disabled&&(o=null),o!==null&&(o>=0||e&&o<0)}return!1}function tse(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=Et(n.querySelectorAll("*")).filter(function(i){return NU(i,e)});return NU(n,e)&&t.unshift(n),t}var E3=je.LEFT,L3=je.RIGHT,N3=je.UP,Zk=je.DOWN,Xk=je.ENTER,nse=je.ESC,Hb=je.HOME,Vb=je.END,TU=[N3,Zk,E3,L3];function Vke(n,e,t,i){var r,s,o,a,l="prev",c="next",u="children",d="parent";if(n==="inline"&&i===Xk)return{inlineTrigger:!0};var h=(r={},z(r,N3,l),z(r,Zk,c),r),f=(s={},z(s,E3,t?c:l),z(s,L3,t?l:c),z(s,Zk,u),z(s,Xk,u),s),g=(o={},z(o,N3,l),z(o,Zk,c),z(o,Xk,u),z(o,nse,d),z(o,E3,t?u:d),z(o,L3,t?d:u),o),p={inline:h,horizontal:f,vertical:g,inlineSub:h,horizontalSub:g,verticalSub:g},v=(a=p["".concat(n).concat(e?"":"Sub")])===null||a===void 0?void 0:a[i];switch(v){case l:return{offset:-1,sibling:!0};case c:return{offset:1,sibling:!0};case d:return{offset:-1,sibling:!1};case u:return{offset:1,sibling:!1};default:return null}}function zke(n){for(var e=n;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}function Wke(n,e){for(var t=n||document.activeElement;t;){if(e.has(t))return t;t=t.parentElement}return null}function ise(n,e){var t=tse(n,!0);return t.filter(function(i){return e.has(i)})}function IU(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!n)return null;var r=ise(n,e),s=r.length,o=r.findIndex(function(a){return t===a});return i<0?o===-1?o=s-1:o-=1:i>0&&(o+=1),o=(o+s)%s,r[o]}function $ke(n,e,t,i,r,s,o,a,l,c){var u=m.useRef(),d=m.useRef();d.current=e;var h=function(){On.cancel(u.current)};return m.useEffect(function(){return function(){h()}},[]),function(f){var g=f.which;if([].concat(TU,[Xk,nse,Hb,Vb]).includes(g)){var p,v,b,_=function(){p=new Set,v=new Map,b=new Map;var V=s();return V.forEach(function(F){var T=document.querySelector("[data-menu-id='".concat(OF(i,F),"']"));T&&(p.add(T),b.set(T,F),v.set(F,T))}),p};_();var y=v.get(e),C=Wke(y,p),w=b.get(C),x=Vke(n,o(w,!0).length===1,t,g);if(!x&&g!==Hb&&g!==Vb)return;(TU.includes(g)||[Hb,Vb].includes(g))&&f.preventDefault();var k=function(V){if(V){var F=V,T=V.querySelector("a");T!=null&&T.getAttribute("href")&&(F=T);var N=b.get(V);a(N),h(),u.current=On(function(){d.current===N&&F.focus()})}};if([Hb,Vb].includes(g)||x.sibling||!C){var E;!C||n==="inline"?E=r.current:E=zke(C);var L,M=ise(E,p);g===Hb?L=M[0]:g===Vb?L=M[M.length-1]:L=IU(E,p,C,x.offset),k(L)}else if(x.inlineTrigger)l(w);else if(x.offset>0)l(w,!0),h(),u.current=On(function(){_();var R=C.getAttribute("aria-controls"),V=document.getElementById(R),F=IU(V,p);k(F)},5);else if(x.offset<0){var D=o(w,!0),O=D[D.length-2],A=v.get(O);l(O,!1),k(A)}}c==null||c(f)}}function Uke(n){Promise.resolve().then(n)}var FF="__RC_UTIL_PATH_SPLIT__",DU=function(e){return e.join(FF)},jke=function(e){return e.split(FF)},T3="rc-menu-more";function Kke(){var n=m.useState({}),e=Ce(n,2),t=e[1],i=m.useRef(new Map),r=m.useRef(new Map),s=m.useState([]),o=Ce(s,2),a=o[0],l=o[1],c=m.useRef(0),u=m.useRef(!1),d=function(){u.current||t({})},h=m.useCallback(function(y,C){var w=DU(C);r.current.set(w,y),i.current.set(y,w),c.current+=1;var x=c.current;Uke(function(){x===c.current&&d()})},[]),f=m.useCallback(function(y,C){var w=DU(C);r.current.delete(w),i.current.delete(y)},[]),g=m.useCallback(function(y){l(y)},[]),p=m.useCallback(function(y,C){var w=i.current.get(y)||"",x=jke(w);return C&&a.includes(x[0])&&x.unshift(T3),x},[a]),v=m.useCallback(function(y,C){return y.some(function(w){var x=p(w,!0);return x.includes(C)})},[p]),b=function(){var C=Et(i.current.keys());return a.length&&C.push(T3),C},_=m.useCallback(function(y){var C="".concat(i.current.get(y)).concat(FF),w=new Set;return Et(r.current.keys()).forEach(function(x){x.startsWith(C)&&w.add(r.current.get(x))}),w},[]);return m.useEffect(function(){return function(){u.current=!0}},[]),{registerPath:h,unregisterPath:f,refreshOverflowKeys:g,isSubPathKey:v,getKeyPath:p,getKeys:b,getSubPathKeys:_}}function rv(n){var e=m.useRef(n);e.current=n;var t=m.useCallback(function(){for(var i,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(i=e.current)===null||i===void 0?void 0:i.call.apply(i,[e].concat(s))},[]);return n?t:void 0}var qke=Math.random().toFixed(5).toString().slice(2),MU=0;function Gke(n){var e=Ps(n,{value:n}),t=Ce(e,2),i=t[0],r=t[1];return m.useEffect(function(){MU+=1;var s="".concat(qke,"-").concat(MU);r("rc-menu-uuid-".concat(s))},[]),i}function rse(n,e,t,i){var r=m.useContext(fc),s=r.activeKey,o=r.onActive,a=r.onInactive,l={active:s===n};return e||(l.onMouseEnter=function(c){t==null||t({key:n,domEvent:c}),o(n)},l.onMouseLeave=function(c){i==null||i({key:n,domEvent:c}),a(n)}),l}function sse(n){var e=m.useContext(fc),t=e.mode,i=e.rtl,r=e.inlineIndent;if(t!=="inline")return null;var s=n;return i?{paddingRight:s*r}:{paddingLeft:s*r}}function ose(n){var e=n.icon,t=n.props,i=n.children,r;return typeof e=="function"?r=m.createElement(e,ne({},t)):r=e,r||i||null}var Yke=["item"];function y2(n){var e=n.item,t=sn(n,Yke);return Object.defineProperty(t,"item",{get:function(){return ps(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),t}var Zke=["title","attribute","elementRef"],Xke=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Qke=["active"],Jke=function(n){Va(t,n);var e=Kd(t);function t(){return ys(this,t),e.apply(this,arguments)}return ws(t,[{key:"render",value:function(){var r=this.props,s=r.title,o=r.attribute,a=r.elementRef,l=sn(r,Zke),c=fo(l,["eventKey","popupClassName","popupOffset","onTitleClick"]);return ps(!o,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),m.createElement(lu.Item,J({},o,{title:typeof s=="string"?s:void 0},c,{ref:a}))}}]),t}(m.Component),eEe=m.forwardRef(function(n,e){var t,i=n.style,r=n.className,s=n.eventKey;n.warnKey;var o=n.disabled,a=n.itemIcon,l=n.children,c=n.role,u=n.onMouseEnter,d=n.onMouseLeave,h=n.onClick,f=n.onKeyDown,g=n.onFocus,p=sn(n,Xke),v=Xre(s),b=m.useContext(fc),_=b.prefixCls,y=b.onItemClick,C=b.disabled,w=b.overflowDisabled,x=b.itemIcon,k=b.selectedKeys,E=b.onActive,L=m.useContext(PF),M=L._internalRenderMenuItem,D="".concat(_,"-item"),O=m.useRef(),A=m.useRef(),R=C||o,V=Ww(e,A),F=nb(s),T=function(Ie){return{key:s,keyPath:Et(F).reverse(),item:O.current,domEvent:Ie}},N=a||x,B=rse(s,R,u,d),$=B.active,j=sn(B,Qke),Y=k.includes(s),G=sse(F.length),X=function(Ie){if(!R){var Fe=T(Ie);h==null||h(y2(Fe)),y(Fe)}},q=function(Ie){if(f==null||f(Ie),Ie.which===je.ENTER){var Fe=T(Ie);h==null||h(y2(Fe)),y(Fe)}},re=function(Ie){E(s),g==null||g(Ie)},ge={};n.role==="option"&&(ge["aria-selected"]=Y);var ye=m.createElement(Jke,J({ref:O,elementRef:V,role:c===null?"none":c||"menuitem",tabIndex:o?null:-1,"data-menu-id":w&&v?null:v},p,j,ge,{component:"li","aria-disabled":o,style:ne(ne({},G),i),className:Ee(D,(t={},z(t,"".concat(D,"-active"),$),z(t,"".concat(D,"-selected"),Y),z(t,"".concat(D,"-disabled"),R),t),r),onClick:X,onKeyDown:q,onFocus:re}),l,m.createElement(ose,{props:ne(ne({},n),{},{isSelected:Y}),icon:N}));return M&&(ye=M(ye,n,{selected:Y})),ye});function tEe(n,e){var t=n.eventKey,i=KI(),r=nb(t);return m.useEffect(function(){if(i)return i.registerPath(t,r),function(){i.unregisterPath(t,r)}},[r]),i?null:m.createElement(eEe,J({},n,{ref:e}))}const Zw=m.forwardRef(tEe);var nEe=["className","children"],iEe=function(e,t){var i=e.className,r=e.children,s=sn(e,nEe),o=m.useContext(fc),a=o.prefixCls,l=o.mode,c=o.rtl;return m.createElement("ul",J({className:Ee(a,c&&"".concat(a,"-rtl"),"".concat(a,"-sub"),"".concat(a,"-").concat(l==="inline"?"inline":"vertical"),i),role:"menu"},s,{"data-menu-list":!0,ref:t}),r)},BF=m.forwardRef(iEe);BF.displayName="SubMenuList";var rEe=["label","children","key","type"];function HF(n,e){return gu(n).map(function(t,i){if(m.isValidElement(t)){var r,s,o=t.key,a=(r=(s=t.props)===null||s===void 0?void 0:s.eventKey)!==null&&r!==void 0?r:o,l=a==null;l&&(a="tmp_key-".concat([].concat(Et(e),[i]).join("-")));var c={key:a,eventKey:a};return m.cloneElement(t,c)}return t})}function I3(n){return(n||[]).map(function(e,t){if(e&&Rt(e)==="object"){var i=e,r=i.label,s=i.children,o=i.key,a=i.type,l=sn(i,rEe),c=o??"tmp-".concat(t);return s||a==="group"?a==="group"?m.createElement(GI,J({key:c},l,{title:r}),I3(s)):m.createElement(qI,J({key:c},l,{title:r}),I3(s)):a==="divider"?m.createElement(VF,J({key:c},l)):m.createElement(Zw,J({key:c},l),r)}return null}).filter(function(e){return e})}function sEe(n,e,t){var i=n;return e&&(i=I3(e)),HF(i,t)}var Hh={adjustX:1,adjustY:1},oEe={topLeft:{points:["bl","tl"],overflow:Hh,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Hh,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:Hh,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:Hh,offset:[4,0]}},aEe={topLeft:{points:["bl","tl"],overflow:Hh,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Hh,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:Hh,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:Hh,offset:[4,0]}};function ase(n,e,t){if(e)return e;if(t)return t[n]||t.other}var lEe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function cEe(n){var e=n.prefixCls,t=n.visible,i=n.children,r=n.popup,s=n.popupClassName,o=n.popupOffset,a=n.disabled,l=n.mode,c=n.onVisibleChange,u=m.useContext(fc),d=u.getPopupContainer,h=u.rtl,f=u.subMenuOpenDelay,g=u.subMenuCloseDelay,p=u.builtinPlacements,v=u.triggerSubMenuAction,b=u.forceSubMenuRender,_=u.rootClassName,y=u.motion,C=u.defaultMotions,w=m.useState(!1),x=Ce(w,2),k=x[0],E=x[1],L=ne(h?ne({},aEe):ne({},oEe),p),M=lEe[l],D=ase(l,y,C),O=m.useRef(D);l!=="inline"&&(O.current=D);var A=ne(ne({},O.current),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),R=m.useRef();return m.useEffect(function(){return R.current=On(function(){E(t)}),function(){On.cancel(R.current)}},[t]),m.createElement($I,{prefixCls:e,popupClassName:Ee("".concat(e,"-popup"),z({},"".concat(e,"-rtl"),h),s,_),stretch:l==="horizontal"?"minWidth":null,getPopupContainer:d,builtinPlacements:L,popupPlacement:M,popupVisible:k,popup:r,popupAlign:o&&{offset:o},action:a?[]:[v],mouseEnterDelay:f,mouseLeaveDelay:g,onPopupVisibleChange:c,forceRender:b,popupMotion:A},i)}function uEe(n){var e=n.id,t=n.open,i=n.keyPath,r=n.children,s="inline",o=m.useContext(fc),a=o.prefixCls,l=o.forceSubMenuRender,c=o.motion,u=o.defaultMotions,d=o.mode,h=m.useRef(!1);h.current=d===s;var f=m.useState(!h.current),g=Ce(f,2),p=g[0],v=g[1],b=h.current?t:!1;m.useEffect(function(){h.current&&v(!1)},[d]);var _=ne({},ase(s,c,u));i.length>1&&(_.motionAppear=!1);var y=_.onVisibleChanged;return _.onVisibleChanged=function(C){return!h.current&&!C&&v(!0),y==null?void 0:y(C)},p?null:m.createElement(Ly,{mode:s,locked:!h.current},m.createElement(yc,J({visible:b},_,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(a,"-hidden")}),function(C){var w=C.className,x=C.style;return m.createElement(BF,{id:e,className:w,style:x},r)}))}var dEe=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],hEe=["active"],fEe=function(e){var t,i=e.style,r=e.className,s=e.title,o=e.eventKey;e.warnKey;var a=e.disabled,l=e.internalPopupClose,c=e.children,u=e.itemIcon,d=e.expandIcon,h=e.popupClassName,f=e.popupOffset,g=e.onClick,p=e.onMouseEnter,v=e.onMouseLeave,b=e.onTitleClick,_=e.onTitleMouseEnter,y=e.onTitleMouseLeave,C=sn(e,dEe),w=Xre(o),x=m.useContext(fc),k=x.prefixCls,E=x.mode,L=x.openKeys,M=x.disabled,D=x.overflowDisabled,O=x.activeKey,A=x.selectedKeys,R=x.itemIcon,V=x.expandIcon,F=x.onItemClick,T=x.onOpenChange,N=x.onActive,B=m.useContext(PF),$=B._internalRenderSubMenuItem,j=m.useContext(ese),Y=j.isSubPathKey,G=nb(),X="".concat(k,"-submenu"),q=M||a,re=m.useRef(),ge=m.useRef(),ye=u||R,we=d||V,Ie=L.includes(o),Fe=!D&&Ie,ze=Y(A,o),Me=rse(o,q,_,y),Pe=Me.active,tt=sn(Me,hEe),Ae=m.useState(!1),mt=Ce(Ae,2),ft=mt[0],Le=mt[1],Ge=function(Ke){q||Le(Ke)},Oe=function(Ke){Ge(!0),p==null||p({key:o,domEvent:Ke})},xe=function(Ke){Ge(!1),v==null||v({key:o,domEvent:Ke})},at=m.useMemo(function(){return Pe||(E!=="inline"?ft||Y([O],o):!1)},[E,Pe,O,ft,o,Y]),gt=sse(G.length),Ct=function(Ke){q||(b==null||b({key:o,domEvent:Ke}),E==="inline"&&T(o,!Ie))},nt=rv(function(he){g==null||g(y2(he)),F(he)}),se=function(Ke){E!=="inline"&&T(o,Ke)},fe=function(){N(o)},Ne=w&&"".concat(w,"-popup"),Ve=m.createElement("div",J({role:"menuitem",style:gt,className:"".concat(X,"-title"),tabIndex:q?null:-1,ref:re,title:typeof s=="string"?s:null,"data-menu-id":D&&w?null:w,"aria-expanded":Fe,"aria-haspopup":!0,"aria-controls":Ne,"aria-disabled":q,onClick:Ct,onFocus:fe},tt),s,m.createElement(ose,{icon:E!=="horizontal"?we:null,props:ne(ne({},e),{},{isOpen:Fe,isSubMenu:!0})},m.createElement("i",{className:"".concat(X,"-arrow")}))),lt=m.useRef(E);if(E!=="inline"&&G.length>1?lt.current="vertical":lt.current=E,!D){var Dt=lt.current;Ve=m.createElement(cEe,{mode:Dt,prefixCls:X,visible:!l&&Fe&&E!=="inline",popupClassName:h,popupOffset:f,popup:m.createElement(Ly,{mode:Dt==="horizontal"?"vertical":Dt},m.createElement(BF,{id:Ne,ref:ge},c)),disabled:q,onVisibleChange:se},Ve)}var Qt=m.createElement(lu.Item,J({role:"none"},C,{component:"li",style:i,className:Ee(X,"".concat(X,"-").concat(E),r,(t={},z(t,"".concat(X,"-open"),Fe),z(t,"".concat(X,"-active"),at),z(t,"".concat(X,"-selected"),ze),z(t,"".concat(X,"-disabled"),q),t)),onMouseEnter:Oe,onMouseLeave:xe}),Ve,!D&&m.createElement(uEe,{id:Ne,open:Fe,keyPath:G},c));return $&&(Qt=$(Qt,e,{selected:ze,active:at,open:Fe,disabled:q})),m.createElement(Ly,{onItemClick:nt,mode:E==="horizontal"?"vertical":E,itemIcon:ye,expandIcon:we},Qt)};function qI(n){var e=n.eventKey,t=n.children,i=nb(e),r=HF(t,i),s=KI();m.useEffect(function(){if(s)return s.registerPath(e,i),function(){s.unregisterPath(e,i)}},[i]);var o;return s?o=r:o=m.createElement(fEe,n,r),m.createElement(Jre.Provider,{value:i},o)}var gEe=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],Om=[],pEe=m.forwardRef(function(n,e){var t,i,r=n,s=r.prefixCls,o=s===void 0?"rc-menu":s,a=r.rootClassName,l=r.style,c=r.className,u=r.tabIndex,d=u===void 0?0:u,h=r.items,f=r.children,g=r.direction,p=r.id,v=r.mode,b=v===void 0?"vertical":v,_=r.inlineCollapsed,y=r.disabled,C=r.disabledOverflow,w=r.subMenuOpenDelay,x=w===void 0?.1:w,k=r.subMenuCloseDelay,E=k===void 0?.1:k,L=r.forceSubMenuRender,M=r.defaultOpenKeys,D=r.openKeys,O=r.activeKey,A=r.defaultActiveFirst,R=r.selectable,V=R===void 0?!0:R,F=r.multiple,T=F===void 0?!1:F,N=r.defaultSelectedKeys,B=r.selectedKeys,$=r.onSelect,j=r.onDeselect,Y=r.inlineIndent,G=Y===void 0?24:Y,X=r.motion,q=r.defaultMotions,re=r.triggerSubMenuAction,ge=re===void 0?"hover":re,ye=r.builtinPlacements,we=r.itemIcon,Ie=r.expandIcon,Fe=r.overflowedIndicator,ze=Fe===void 0?"...":Fe,Me=r.overflowedIndicatorPopupClassName,Pe=r.getPopupContainer,tt=r.onClick,Ae=r.onOpenChange,mt=r.onKeyDown;r.openAnimation,r.openTransitionName;var ft=r._internalRenderMenuItem,Le=r._internalRenderSubMenuItem,Ge=sn(r,gEe),Oe=m.useMemo(function(){return sEe(f,h,Om)},[f,h]),xe=m.useState(!1),at=Ce(xe,2),gt=at[0],Ct=at[1],nt=m.useRef(),se=Gke(p),fe=g==="rtl",Ne=Ps(M,{value:D,postState:function(Mn){return Mn||Om}}),Ve=Ce(Ne,2),lt=Ve[0],Dt=Ve[1],Qt=function(Mn){var di=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Yi(){Dt(Mn),Ae==null||Ae(Mn)}di?uc.flushSync(Yi):Yi()},he=m.useState(lt),Ke=Ce(he,2),ue=Ke[0],ee=Ke[1],oe=m.useRef(!1),pe=m.useMemo(function(){return(b==="inline"||b==="vertical")&&_?["vertical",_]:[b,!1]},[b,_]),le=Ce(pe,2),ve=le[0],He=le[1],Qe=ve==="inline",ut=m.useState(ve),St=Ce(ut,2),Lt=St[0],be=St[1],H=m.useState(He),W=Ce(H,2),K=W[0],Q=W[1];m.useEffect(function(){be(ve),Q(He),oe.current&&(Qe?Dt(ue):Qt(Om))},[ve,He]);var ie=m.useState(0),me=Ce(ie,2),Se=me[0],Ze=me[1],Je=Se>=Oe.length-1||Lt!=="horizontal"||C;m.useEffect(function(){Qe&&ee(lt)},[lt]),m.useEffect(function(){return oe.current=!0,function(){oe.current=!1}},[]);var wt=Kke(),zt=wt.registerPath,Zt=wt.unregisterPath,Dn=wt.refreshOverflowKeys,on=wt.isSubPathKey,oi=wt.getKeyPath,nn=wt.getKeys,bn=wt.getSubPathKeys,pt=m.useMemo(function(){return{registerPath:zt,unregisterPath:Zt}},[zt,Zt]),ce=m.useMemo(function(){return{isSubPathKey:on}},[on]);m.useEffect(function(){Dn(Je?Om:Oe.slice(Se+1).map(function(Kn){return Kn.key}))},[Se,Je]);var Xe=Ps(O||A&&((t=Oe[0])===null||t===void 0?void 0:t.key),{value:O}),Re=Ce(Xe,2),st=Re[0],Bt=Re[1],fn=rv(function(Kn){Bt(Kn)}),jn=rv(function(){Bt(void 0)});m.useImperativeHandle(e,function(){return{list:nt.current,focus:function(Mn){var di,Yi=st??((di=Oe.find(function(Wpe){return!Wpe.props.disabled}))===null||di===void 0?void 0:di.key);if(Yi){var Tr,Ks,th;(Tr=nt.current)===null||Tr===void 0||(Ks=Tr.querySelector("li[data-menu-id='".concat(OF(se,Yi),"']")))===null||Ks===void 0||(th=Ks.focus)===null||th===void 0||th.call(Ks,Mn)}}}});var Nr=Ps(N||[],{value:B,postState:function(Mn){return Array.isArray(Mn)?Mn:Mn==null?Om:[Mn]}}),$r=Ce(Nr,2),Wi=$r[0],eh=$r[1],Iu=function(Mn){if(V){var di=Mn.key,Yi=Wi.includes(di),Tr;T?Yi?Tr=Wi.filter(function(th){return th!==di}):Tr=[].concat(Et(Wi),[di]):Tr=[di],eh(Tr);var Ks=ne(ne({},Mn),{},{selectedKeys:Tr});Yi?j==null||j(Ks):$==null||$(Ks)}!T&&lt.length&&Lt!=="inline"&&Qt(Om)},Yf=rv(function(Kn){tt==null||tt(y2(Kn)),Iu(Kn)}),Eb=rv(function(Kn,Mn){var di=lt.filter(function(Tr){return Tr!==Kn});if(Mn)di.push(Kn);else if(Lt!=="inline"){var Yi=bn(Kn);di=di.filter(function(Tr){return!Yi.has(Tr)})}WI(lt,di,!0)||Qt(di,!0)}),Lb=rv(Pe),En=function(Mn,di){var Yi=di??!lt.includes(Mn);Eb(Mn,Yi)},un=$ke(Lt,st,fe,se,nt,nn,oi,Bt,En,mt);m.useEffect(function(){Ct(!0)},[]);var Qr=m.useMemo(function(){return{_internalRenderMenuItem:ft,_internalRenderSubMenuItem:Le}},[ft,Le]),js=Lt!=="horizontal"||C?Oe:Oe.map(function(Kn,Mn){return m.createElement(Ly,{key:Kn.key,overflowDisabled:Mn>Se},Kn)}),ar=m.createElement(lu,J({id:p,ref:nt,prefixCls:"".concat(o,"-overflow"),component:"ul",itemComponent:Zw,className:Ee(o,"".concat(o,"-root"),"".concat(o,"-").concat(Lt),c,(i={},z(i,"".concat(o,"-inline-collapsed"),K),z(i,"".concat(o,"-rtl"),fe),i),a),dir:g,style:l,role:"menu",tabIndex:d,data:js,renderRawItem:function(Mn){return Mn},renderRawRest:function(Mn){var di=Mn.length,Yi=di?Oe.slice(-di):null;return m.createElement(qI,{eventKey:T3,title:ze,disabled:Je,internalPopupClose:di===0,popupClassName:Me},Yi)},maxCount:Lt!=="horizontal"||C?lu.INVALIDATE:lu.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Mn){Ze(Mn)},onKeyDown:un},Ge));return m.createElement(PF.Provider,{value:Qr},m.createElement(Zre.Provider,{value:se},m.createElement(Ly,{prefixCls:o,rootClassName:a,mode:Lt,openKeys:lt,rtl:fe,disabled:y,motion:gt?X:null,defaultMotions:gt?q:null,activeKey:st,onActive:fn,onInactive:jn,selectedKeys:Wi,inlineIndent:G,subMenuOpenDelay:x,subMenuCloseDelay:E,forceSubMenuRender:L,builtinPlacements:ye,triggerSubMenuAction:ge,getPopupContainer:Lb,itemIcon:we,expandIcon:Ie,onItemClick:Yf,onOpenChange:Eb},m.createElement(ese.Provider,{value:ce},ar),m.createElement("div",{style:{display:"none"},"aria-hidden":!0},m.createElement(Qre.Provider,{value:pt},Oe)))))}),mEe=["className","title","eventKey","children"],vEe=["children"],bEe=function(e){var t=e.className,i=e.title;e.eventKey;var r=e.children,s=sn(e,mEe),o=m.useContext(fc),a=o.prefixCls,l="".concat(a,"-item-group");return m.createElement("li",J({role:"presentation"},s,{onClick:function(u){return u.stopPropagation()},className:Ee(l,t)}),m.createElement("div",{role:"presentation",className:"".concat(l,"-title"),title:typeof i=="string"?i:void 0},i),m.createElement("ul",{role:"group",className:"".concat(l,"-list")},r))};function GI(n){var e=n.children,t=sn(n,vEe),i=nb(t.eventKey),r=HF(e,i),s=KI();return s?r:m.createElement(bEe,fo(t,["warnKey"]),r)}function VF(n){var e=n.className,t=n.style,i=m.useContext(fc),r=i.prefixCls,s=KI();return s?null:m.createElement("li",{className:Ee("".concat(r,"-item-divider"),e),style:t})}var ib=pEe;ib.Item=Zw;ib.SubMenu=qI;ib.ItemGroup=GI;ib.Divider=VF;var _Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},CEe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:_Ee}))},yEe=m.forwardRef(CEe),lse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},wEe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:lse}))},cse=m.forwardRef(wEe),use=m.createContext({}),SEe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},dse=function(e){var t=e.prefixCls,i=e.className,r=e.dashed,s=SEe(e,["prefixCls","className","dashed"]),o=m.useContext(Bn),a=o.getPrefixCls,l=a("menu",t),c=Ee(z({},"".concat(l,"-item-divider-dashed"),!!r),i);return m.createElement(VF,J({className:c},s))},w2=m.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1});function xEe(n,e,t){return e=vl(e),zw(n,Z1()?Reflect.construct(e,t||[],vl(n).constructor):e.apply(n,t))}var kEe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},zF=function(n){Va(e,n);function e(){var t;return ys(this,e),t=xEe(this,e,arguments),t.renderItem=function(i){var r=i.siderCollapsed,s,o=t.context,a=o.prefixCls,l=o.firstLevel,c=o.inlineCollapsed,u=o.direction,d=o.disableMenuItemTitleTooltip,h=t.props,f=h.className,g=h.children,p=t.props,v=p.title,b=p.icon,_=p.danger,y=kEe(p,["title","icon","danger"]),C=v;typeof v>"u"?C=l?g:"":v===!1&&(C="");var w={title:C};!r&&!c&&(w.title=null,w.open=!1);var x=gu(g).length,k=m.createElement(Zw,J({},y,{className:Ee(z(z({},"".concat(a,"-item-danger"),_),"".concat(a,"-item-only-child"),(b?x+1:x)===1),f),title:typeof v=="string"?v:void 0}),Io(b,{className:Ee(Vp(b)?(s=b.props)===null||s===void 0?void 0:s.className:"","".concat(a,"-item-icon"))}),t.renderItemChildren(c));return d||(k=m.createElement(Vf,J({},w,{placement:u==="rtl"?"left":"right",overlayClassName:"".concat(a,"-inline-collapsed-tooltip")}),k)),k},t}return ws(e,[{key:"renderItemChildren",value:function(i){var r=this.context,s=r.prefixCls,o=r.firstLevel,a=this.props,l=a.icon,c=a.children,u=m.createElement("span",{className:"".concat(s,"-title-content")},c);return(!l||Vp(c)&&c.type==="span")&&c&&i&&o&&typeof c=="string"?m.createElement("div",{className:"".concat(s,"-inline-collapsed-noicon")},c.charAt(0)):u}},{key:"render",value:function(){return m.createElement(use.Consumer,null,this.renderItem)}}]),e}(m.Component);zF.contextType=w2;function hse(n){var e,t=n.popupClassName,i=n.icon,r=n.title,s=n.theme,o=m.useContext(w2),a=o.prefixCls,l=o.inlineCollapsed,c=o.antdMenuTheme,u=nb(),d;if(!i)d=l&&!u.length&&r&&typeof r=="string"?m.createElement("div",{className:"".concat(a,"-inline-collapsed-noicon")},r.charAt(0)):m.createElement("span",{className:"".concat(a,"-title-content")},r);else{var h=Vp(r)&&r.type==="span";d=m.createElement(m.Fragment,null,Io(i,{className:Ee(Vp(i)?(e=i.props)===null||e===void 0?void 0:e.className:"","".concat(a,"-item-icon"))}),h?r:m.createElement("span",{className:"".concat(a,"-title-content")},r))}var f=m.useMemo(function(){return J(J({},o),{firstLevel:!1})},[o]);return m.createElement(w2.Provider,{value:f},m.createElement(qI,J({},fo(n,["icon"]),{title:d,popupClassName:Ee(a,"".concat(a,"-").concat(s||c),t)})))}var EEe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function D3(n){return(n||[]).map(function(e,t){if(e&&Rt(e)==="object"){var i=e,r=i.label,s=i.children,o=i.key,a=i.type,l=EEe(i,["label","children","key","type"]),c=o??"tmp-".concat(t);return s||a==="group"?a==="group"?m.createElement(GI,J({key:c},l,{title:r}),D3(s)):m.createElement(hse,J({key:c},l,{title:r}),D3(s)):a==="divider"?m.createElement(dse,J({key:c},l)):m.createElement(zF,J({key:c},l),r)}return null}).filter(function(e){return e})}function LEe(n){return m.useMemo(function(){return n&&D3(n)},[n])}var NEe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},S2=m.createContext(null),TEe=function(e){var t=e.children,i=NEe(e,["children"]),r=m.useContext(S2),s=m.useMemo(function(){return J(J({},r),i)},[r,i.prefixCls,i.mode,i.selectable]);return m.createElement(S2.Provider,{value:s},t)};function IEe(n,e,t){return e=vl(e),zw(n,Z1()?Reflect.construct(e,t||[],vl(n).constructor):e.apply(n,t))}var DEe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},MEe=m.forwardRef(function(n,e){var t,i=m.useContext(S2)||{},r=m.useContext(Bn),s=r.getPrefixCls,o=r.getPopupContainer,a=r.direction,l=s(),c=n.prefixCls,u=n.className,d=n.theme,h=d===void 0?"light":d,f=n.expandIcon,g=n._internalDisableMenuItemTitleTooltip,p=n.inlineCollapsed,v=n.siderCollapsed,b=n.items,_=n.children,y=n.mode,C=n.selectable,w=n.onClick,x=DEe(n,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","mode","selectable","onClick"]),k=fo(x,["collapsedWidth"]),E=LEe(b)||_;(t=i.validator)===null||t===void 0||t.call(i,{mode:y});var L=dc(function(){var N;w==null||w.apply(void 0,arguments),(N=i==null?void 0:i.onClick)===null||N===void 0||N.call(i)}),M=i.mode||y,D=C??i.selectable,O=m.useMemo(function(){return v!==void 0?v:p},[p,v]),A={horizontal:{motionName:"".concat(l,"-slide-up")},inline:lke,other:{motionName:"".concat(l,"-zoom-big")}},R=s("menu",c||i.prefixCls),V=Ee("".concat(R,"-").concat(h),u),F;typeof f=="function"?F=f:F=Io(f||i.expandIcon,{className:"".concat(R,"-submenu-expand-icon")});var T=m.useMemo(function(){return{prefixCls:R,inlineCollapsed:O||!1,antdMenuTheme:h,direction:a,firstLevel:!0,disableMenuItemTitleTooltip:g}},[R,O,h,a,g]);return m.createElement(S2.Provider,{value:null},m.createElement(w2.Provider,{value:T},m.createElement(ib,J({getPopupContainer:o,overflowedIndicator:m.createElement(AF,null),overflowedIndicatorPopupClassName:"".concat(R,"-").concat(h),mode:M,selectable:D,onClick:L},k,{inlineCollapsed:O,className:V,prefixCls:R,direction:a,defaultMotions:A,expandIcon:F,ref:e}),E)))}),Ar=function(n){Va(e,n);function e(){var t;return ys(this,e),t=IEe(this,e,arguments),t.focus=function(i){var r;(r=t.menu)===null||r===void 0||r.focus(i)},t}return ws(e,[{key:"render",value:function(){var i=this;return m.createElement(use.Consumer,null,function(r){return m.createElement(MEe,J({ref:function(o){i.menu=o}},i.props,r))})}}]),e}(m.Component);Ar.Divider=dse;Ar.Item=zF;Ar.SubMenu=hse;Ar.ItemGroup=GI;var Pm={adjustX:1,adjustY:1},Fm=[0,0],REe={topLeft:{points:["bl","tl"],overflow:Pm,offset:[0,-4],targetOffset:Fm},topCenter:{points:["bc","tc"],overflow:Pm,offset:[0,-4],targetOffset:Fm},topRight:{points:["br","tr"],overflow:Pm,offset:[0,-4],targetOffset:Fm},bottomLeft:{points:["tl","bl"],overflow:Pm,offset:[0,4],targetOffset:Fm},bottomCenter:{points:["tc","bc"],overflow:Pm,offset:[0,4],targetOffset:Fm},bottomRight:{points:["tr","br"],overflow:Pm,offset:[0,4],targetOffset:Fm}},AEe=je.ESC,OEe=je.TAB;function PEe(n){var e=n.visible,t=n.setTriggerVisible,i=n.triggerRef,r=n.onVisibleChange,s=n.autoFocus,o=m.useRef(!1),a=function(){if(e&&i.current){var d,h,f,g;(d=i.current)===null||d===void 0||(h=d.triggerRef)===null||h===void 0||(f=h.current)===null||f===void 0||(g=f.focus)===null||g===void 0||g.call(f),t(!1),typeof r=="function"&&r(!1)}},l=function(){var d,h,f,g,p=tse((d=i.current)===null||d===void 0||(h=d.popupRef)===null||h===void 0||(f=h.current)===null||f===void 0||(g=f.getElement)===null||g===void 0?void 0:g.call(f)),v=p[0];return v!=null&&v.focus?(v.focus(),o.current=!0,!0):!1},c=function(d){switch(d.keyCode){case AEe:a();break;case OEe:{var h=!1;o.current||(h=l()),h?d.preventDefault():a();break}}};m.useEffect(function(){return e?(window.addEventListener("keydown",c),s&&On(l,3),function(){window.removeEventListener("keydown",c),o.current=!1}):function(){o.current=!1}},[e])}var FEe=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function BEe(n,e){var t=n.arrow,i=t===void 0?!1:t,r=n.prefixCls,s=r===void 0?"rc-dropdown":r,o=n.transitionName,a=n.animation,l=n.align,c=n.placement,u=c===void 0?"bottomLeft":c,d=n.placements,h=d===void 0?REe:d,f=n.getPopupContainer,g=n.showAction,p=n.hideAction,v=n.overlayClassName,b=n.overlayStyle,_=n.visible,y=n.trigger,C=y===void 0?["hover"]:y,w=n.autoFocus,x=sn(n,FEe),k=m.useState(),E=Ce(k,2),L=E[0],M=E[1],D="visible"in n?_:L,O=m.useRef(null);m.useImperativeHandle(e,function(){return O.current}),PEe({visible:D,setTriggerVisible:M,triggerRef:O,onVisibleChange:n.onVisibleChange,autoFocus:w});var A=function(){var G=n.overlay,X;return typeof G=="function"?X=G():X=G,X},R=function(G){var X=n.onOverlayClick;M(!1),X&&X(G)},V=function(G){var X=n.onVisibleChange;M(G),typeof X=="function"&&X(G)},F=function(){var G=A();return m.createElement(m.Fragment,null,i&&m.createElement("div",{className:"".concat(s,"-arrow")}),G)},T=function(){var G=n.overlay;return typeof G=="function"?F:F()},N=function(){var G=n.minOverlayWidthMatchTrigger,X=n.alignPoint;return"minOverlayWidthMatchTrigger"in n?G:!X},B=function(){var G=n.openClassName;return G!==void 0?G:"".concat(s,"-open")},$=function(){var G=n.children,X=G.props?G.props:{},q=Ee(X.className,B());return D&&G?m.cloneElement(G,{className:q}):G},j=p;return!j&&C.indexOf("contextMenu")!==-1&&(j=["click"]),m.createElement($I,ne(ne({builtinPlacements:h},x),{},{prefixCls:s,ref:O,popupClassName:Ee(v,z({},"".concat(s,"-show-arrow"),i)),popupStyle:b,action:C,showAction:g,hideAction:j||[],popupPlacement:u,popupAlign:l,popupTransitionName:o,popupAnimation:a,popupVisible:D,stretch:N()?"minWidth":"",popup:T(),onPopupVisibleChange:V,onPopupClick:R,getPopupContainer:f}),$())}const fse=m.forwardRef(BEe);var HEe=0,w0={};function x2(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=HEe++,i=e;function r(){i-=1,i<=0?(n(),delete w0[t]):w0[t]=On(r)}return w0[t]=On(r),t}x2.cancel=function(e){e!==void 0&&(On.cancel(w0[e]),delete w0[e])};x2.ids=w0;function VEe(n,e,t){return e=vl(e),zw(n,Z1()?Reflect.construct(e,t||[],vl(n).constructor):e.apply(n,t))}var w4;function RU(n){return!n||n.offsetParent===null||n.hidden}function zEe(n){return n instanceof Document?n.body:Array.from(n.childNodes).find(function(e){return(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE})}function WEe(n){var e=(n||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return e&&e[1]&&e[2]&&e[3]?!(e[1]===e[2]&&e[2]===e[3]):!0}var gse=function(n){Va(e,n);function e(){var t;return ys(this,e),t=VEe(this,e,arguments),t.containerRef=m.createRef(),t.animationStart=!1,t.destroyed=!1,t.onClick=function(i,r){var s,o,a=t.props,l=a.insertExtraNode,c=a.disabled;if(!(c||!i||RU(i)||i.className.includes("-leave"))){t.extraNode=document.createElement("div");var u=kt(t),d=u.extraNode,h=t.context.getPrefixCls;d.className="".concat(h(""),"-click-animating-node");var f=t.getAttributeName();if(i.setAttribute(f,"true"),r&&r!=="#fff"&&r!=="#ffffff"&&r!=="rgb(255, 255, 255)"&&r!=="rgba(255, 255, 255, 1)"&&WEe(r)&&!/rgba\((?:\d*, ){3}0\)/.test(r)&&r!=="transparent"){d.style.borderColor=r;var g=((s=i.getRootNode)===null||s===void 0?void 0:s.call(i))||i.ownerDocument,p=(o=zEe(g))!==null&&o!==void 0?o:g;w4=X1(`
      [`.concat(h(""),"-click-animating-without-extra-node='true']::after, .").concat(h(""),`-click-animating-node {
        --antd-wave-shadow-color: `).concat(r,`;
      }`),"antd-wave",{csp:t.csp,attachTo:p})}l&&i.appendChild(d),["transition","animation"].forEach(function(v){i.addEventListener("".concat(v,"start"),t.onTransitionStart),i.addEventListener("".concat(v,"end"),t.onTransitionEnd)})}},t.onTransitionStart=function(i){if(!t.destroyed){var r=t.containerRef.current;!i||i.target!==r||t.animationStart||t.resetEffect(r)}},t.onTransitionEnd=function(i){!i||i.animationName!=="fadeEffect"||t.resetEffect(i.target)},t.bindAnimationEvent=function(i){if(!(!i||!i.getAttribute||i.getAttribute("disabled")||i.className.includes("disabled"))){var r=function(o){if(!(o.target.tagName==="INPUT"||RU(o.target))){t.resetEffect(i);var a=getComputedStyle(i).getPropertyValue("border-top-color")||getComputedStyle(i).getPropertyValue("border-color")||getComputedStyle(i).getPropertyValue("background-color");t.clickWaveTimeoutId=window.setTimeout(function(){return t.onClick(i,a)},0),x2.cancel(t.animationStartId),t.animationStart=!0,t.animationStartId=x2(function(){t.animationStart=!1},10)}};return i.addEventListener("click",r,!0),{cancel:function(){i.removeEventListener("click",r,!0)}}}},t.renderWave=function(i){var r=i.csp,s=t.props.children;if(t.csp=r,!m.isValidElement(s))return s;var o=t.containerRef;return $w(s)&&(o=jd(s.ref,t.containerRef)),Io(s,{ref:o})},t}return ws(e,[{key:"componentDidMount",value:function(){this.destroyed=!1;var i=this.containerRef.current;!i||i.nodeType!==1||(this.instance=this.bindAnimationEvent(i))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var i=this.context.getPrefixCls,r=this.props.insertExtraNode;return r?"".concat(i(""),"-click-animating"):"".concat(i(""),"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(i){var r=this;if(!(!i||i===this.extraNode||!(i instanceof Element))){var s=this.props.insertExtraNode,o=this.getAttributeName();i.setAttribute(o,"false"),w4&&(w4.innerHTML=""),s&&this.extraNode&&i.contains(this.extraNode)&&i.removeChild(this.extraNode),["transition","animation"].forEach(function(a){i.removeEventListener("".concat(a,"start"),r.onTransitionStart),i.removeEventListener("".concat(a,"end"),r.onTransitionEnd)})}}},{key:"render",value:function(){return m.createElement(Hf,null,this.renderWave)}}]),e}(m.Component);gse.contextType=Bn;var $Ee=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},pse=m.createContext(void 0),UEe=function(e){var t=m.useContext(Bn),i=t.getPrefixCls,r=t.direction,s=e.prefixCls,o=e.size,a=e.className,l=$Ee(e,["prefixCls","size","className"]),c=i("btn-group",s),u="";switch(o){case"large":u="lg";break;case"small":u="sm";break}var d=Ee(c,z(z({},"".concat(c,"-").concat(u),u),"".concat(c,"-rtl"),r==="rtl"),a);return m.createElement(pse.Provider,{value:o},m.createElement("div",J({},l,{className:d})))},S4=function(){return{width:0,opacity:0,transform:"scale(0)"}},x4=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},jEe=function(e){var t=e.prefixCls,i=e.loading,r=e.existIcon,s=!!i;return r?Ue.createElement("span",{className:"".concat(t,"-loading-icon")},Ue.createElement(g2,null)):Ue.createElement(yc,{visible:s,motionName:"".concat(t,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:S4,onAppearActive:x4,onEnterStart:S4,onEnterActive:x4,onLeaveStart:x4,onLeaveActive:S4},function(o,a){var l=o.className,c=o.style;return Ue.createElement("span",{className:"".concat(t,"-loading-icon"),style:c,ref:a},Ue.createElement(g2,{className:l}))})},KEe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},AU=/^[\u4e00-\u9fa5]{2}$/,M3=AU.test.bind(AU);function qEe(n){return typeof n=="string"}function k4(n){return n==="text"||n==="link"}function GEe(n,e){if(n!=null){var t=e?" ":"";return typeof n!="string"&&typeof n!="number"&&qEe(n.type)&&M3(n.props.children)?Io(n,{children:n.props.children.split("").join(t)}):typeof n=="string"?M3(n)?m.createElement("span",null,n.split("").join(t)):m.createElement("span",null,n):ere(n)?m.createElement("span",null,n):n}}function YEe(n,e){var t=!1,i=[];return m.Children.forEach(n,function(r){var s=Rt(r),o=s==="string"||s==="number";if(t&&o){var a=i.length-1,l=i[a];i[a]="".concat(l).concat(r)}else i.push(r);t=o}),m.Children.map(i,function(r){return GEe(r,e)})}wc("default","primary","ghost","dashed","link","text");wc("default","circle","round");wc("submit","button","reset");function mse(n){return n==="danger"?{danger:!0}:{type:n}}var ZEe=function(e,t){var i,r=e.loading,s=r===void 0?!1:r,o=e.prefixCls,a=e.type,l=a===void 0?"default":a,c=e.danger,u=e.shape,d=u===void 0?"default":u,h=e.size,f=e.disabled,g=e.className,p=e.children,v=e.icon,b=e.ghost,_=b===void 0?!1:b,y=e.block,C=y===void 0?!1:y,w=e.htmlType,x=w===void 0?"button":w,k=KEe(e,["loading","prefixCls","type","danger","shape","size","disabled","className","children","icon","ghost","block","htmlType"]),E=m.useContext(hc),L=m.useContext(Hp),M=f??L,D=m.useContext(pse),O=m.useState(!!s),A=Ce(O,2),R=A[0],V=A[1],F=m.useState(!1),T=Ce(F,2),N=T[0],B=T[1],$=m.useContext(Bn),j=$.getPrefixCls,Y=$.autoInsertSpaceInButton,G=$.direction,X=t||m.createRef(),q=function(){return m.Children.count(p)===1&&!v&&!k4(l)},re=function(){if(!(!X||!X.current||Y===!1)){var gt=X.current.textContent;q()&&M3(gt)?N||B(!0):N&&B(!1)}},ge=typeof s=="boolean"?s:(s==null?void 0:s.delay)||!0;m.useEffect(function(){var at=null;return typeof ge=="number"?at=window.setTimeout(function(){at=null,V(ge)},ge):V(ge),function(){at&&(window.clearTimeout(at),at=null)}},[ge]),m.useEffect(re,[X]);var ye=function(gt){var Ct=e.onClick;if(R||M){gt.preventDefault();return}Ct==null||Ct(gt)},we=j("btn",o),Ie=Y!==!1,Fe=tb(we,G),ze=Fe.compactSize,Me=Fe.compactItemClassnames,Pe={large:"lg",small:"sm",middle:void 0},tt=ze||D||h||E,Ae=tt&&Pe[tt]||"",mt=R?"loading":v,ft=fo(k,["navigate"]),Le=Ee(we,(i={},z(z(z(z(z(z(z(z(z(z(i,"".concat(we,"-").concat(d),d!=="default"&&d),"".concat(we,"-").concat(l),l),"".concat(we,"-").concat(Ae),Ae),"".concat(we,"-icon-only"),!p&&p!==0&&!!mt),"".concat(we,"-background-ghost"),_&&!k4(l)),"".concat(we,"-loading"),R),"".concat(we,"-two-chinese-chars"),N&&Ie&&!R),"".concat(we,"-block"),C),"".concat(we,"-dangerous"),!!c),"".concat(we,"-rtl"),G==="rtl"),z(i,"".concat(we,"-disabled"),ft.href!==void 0&&M)),Me,g),Ge=v&&!R?v:m.createElement(jEe,{existIcon:!!v,prefixCls:we,loading:!!R}),Oe=p||p===0?YEe(p,q()&&Ie):null;if(ft.href!==void 0)return m.createElement("a",J({},ft,{className:Le,onClick:ye,ref:X}),Ge,Oe);var xe=m.createElement("button",J({},k,{type:x,className:Le,onClick:ye,disabled:M,ref:X}),Ge,Oe);return k4(l)?xe:m.createElement(gse,{disabled:!!R},xe)},bi=m.forwardRef(ZEe);bi.Group=UEe;bi.__ANT_BUTTON=!0;var vse=function(){return da()&&window.document.documentElement},ux,XEe=function(){if(!vse())return!1;if(ux!==void 0)return ux;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),ux=e.scrollHeight===1,document.body.removeChild(e),ux};const QEe=function(){var n=m.useState(!1),e=Ce(n,2),t=e[0],i=e[1];return m.useEffect(function(){i(XEe())},[]),t};function JEe(n){var e=n.className,t=n.direction,i=n.index,r=n.marginDirection,s=n.children,o=n.split,a=n.wrap,l=m.useContext(bse),c=l.horizontalSize,u=l.verticalSize,d=l.latestIndex,h=l.supportFlexGap,f={};return h||(t==="vertical"?i<d&&(f={marginBottom:c/(o?2:1)}):f=J(J({},i<d&&z({},r,c/(o?2:1))),a&&{paddingBottom:u})),s==null?null:m.createElement(m.Fragment,null,m.createElement("div",{className:e,style:f},s),i<d&&o&&m.createElement("span",{className:"".concat(e,"-split"),style:f},o))}var e2e=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},bse=m.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),t2e={small:8,middle:16,large:24};function n2e(n){return typeof n=="string"?t2e[n]:n||0}var i2e=function(e){var t=m.useContext(Bn),i=t.getPrefixCls,r=t.space,s=t.direction,o=e.size,a=o===void 0?(r==null?void 0:r.size)||"small":o,l=e.align,c=e.className,u=e.children,d=e.direction,h=d===void 0?"horizontal":d,f=e.prefixCls,g=e.split,p=e.style,v=e.wrap,b=v===void 0?!1:v,_=e2e(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),y=QEe(),C=m.useMemo(function(){return(Array.isArray(a)?a:[a,a]).map(function(N){return n2e(N)})},[a]),w=Ce(C,2),x=w[0],k=w[1],E=gu(u,{keepEmpty:!0}),L=l===void 0&&h==="horizontal"?"center":l,M=i("space",f),D=Ee(M,"".concat(M,"-").concat(h),z(z({},"".concat(M,"-rtl"),s==="rtl"),"".concat(M,"-align-").concat(L),L),c),O="".concat(M,"-item"),A=s==="rtl"?"marginLeft":"marginRight",R=0,V=E.map(function(N,B){N!=null&&(R=B);var $=N&&N.key||"".concat(O,"-").concat(B);return m.createElement(JEe,{className:O,key:$,direction:h,index:B,marginDirection:A,split:g,wrap:b},N)}),F=m.useMemo(function(){return{horizontalSize:x,verticalSize:k,latestIndex:R,supportFlexGap:y}},[x,k,R,y]);if(E.length===0)return null;var T={};return b&&(T.flexWrap="wrap",y||(T.marginBottom=-k)),y&&(T.columnGap=x,T.rowGap=k),m.createElement("div",J({className:D,style:J(J({},T),p)},_),m.createElement(bse.Provider,{value:F},V))},d1=i2e;d1.Compact=mke;var r2e=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},_se=function(e){var t=m.useContext(Bn),i=t.getPopupContainer,r=t.getPrefixCls,s=t.direction,o=e.prefixCls,a=e.type,l=a===void 0?"default":a,c=e.danger,u=e.disabled,d=e.loading,h=e.onClick,f=e.htmlType,g=e.children,p=e.className,v=e.menu,b=e.arrow,_=e.autoFocus,y=e.overlay,C=e.trigger,w=e.align,x=e.visible,k=e.open,E=e.onVisibleChange,L=e.onOpenChange,M=e.placement,D=e.getPopupContainer,O=e.href,A=e.icon,R=A===void 0?m.createElement(AF,null):A,V=e.title,F=e.buttonsRender,T=F===void 0?function(Ae){return Ae}:F,N=e.mouseEnterDelay,B=e.mouseLeaveDelay,$=e.overlayClassName,j=e.overlayStyle,Y=e.destroyPopupOnHide,G=r2e(e,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","visible","open","onVisibleChange","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide"]),X=r("dropdown-button",o),q={menu:v,arrow:b,autoFocus:_,align:w,disabled:u,trigger:u?[]:C,onOpenChange:L||E,getPopupContainer:D||i,mouseEnterDelay:N,mouseLeaveDelay:B,overlayClassName:$,overlayStyle:j,destroyPopupOnHide:Y},re=tb(X,s),ge=re.compactSize,ye=re.compactItemClassnames,we=Ee(X,ye,p);"overlay"in e&&(q.overlay=y),"open"in e?q.open=k:"visible"in e&&(q.open=x),"placement"in e?q.placement=M:q.placement=s==="rtl"?"bottomLeft":"bottomRight";var Ie=m.createElement(bi,{type:l,danger:c,disabled:u,loading:d,onClick:h,htmlType:f,href:O,title:V},g),Fe=m.createElement(bi,{type:l,danger:c,icon:R}),ze=T([Ie,Fe]),Me=Ce(ze,2),Pe=Me[0],tt=Me[1];return m.createElement(d1.Compact,J({className:we,size:ge,block:!0},G),Pe,m.createElement(WF,J({},q),tt))};_se.__ANT_BUTTON=!0;wc("topLeft","topCenter","topRight","bottomLeft","bottomCenter","bottomRight","top","bottom");var WF=function(e){var t=m.useContext(Bn),i=t.getPopupContainer,r=t.getPrefixCls,s=t.direction,o=function(){var re=r(),ge=e.placement,ye=ge===void 0?"":ge,we=e.transitionName;return we!==void 0?we:ye.includes("top")?"".concat(re,"-slide-down"):"".concat(re,"-slide-up")},a=function(){var re=e.placement;if(!re)return s==="rtl"?"bottomRight":"bottomLeft";if(re.includes("Center")){var ge=re.slice(0,re.indexOf("Center"));return ge}return re},l=e.menu,c=e.arrow,u=e.prefixCls,d=e.children,h=e.trigger,f=e.disabled,g=e.dropdownRender,p=e.getPopupContainer,v=e.overlayClassName,b=e.visible,_=e.open,y=e.onVisibleChange,C=e.onOpenChange,w=e.mouseEnterDelay,x=w===void 0?.15:w,k=e.mouseLeaveDelay,E=k===void 0?.1:k,L=e.autoAdjustOverflow,M=L===void 0?!0:L,D=r("dropdown",u),O=m.Children.only(d),A=Io(O,{className:Ee("".concat(D,"-trigger"),z({},"".concat(D,"-rtl"),s==="rtl"),O.props.className),disabled:f}),R=f?[]:h,V;R&&R.includes("contextMenu")&&(V=!0);var F=Ps(!1,{value:_!==void 0?_:b}),T=Ce(F,2),N=T[0],B=T[1],$=dc(function(q){y==null||y(q),C==null||C(q),B(q)}),j=Ee(v,z({},"".concat(D,"-rtl"),s==="rtl")),Y=Gre({arrowPointAtCenter:Rt(c)==="object"&&c.pointAtCenter,autoAdjustOverflow:M}),G=m.useCallback(function(){B(!1)},[]),X=function(){var re=e.overlay,ge;return l!=null&&l.items?ge=m.createElement(Ar,J({},l)):typeof re=="function"?ge=re():ge=re,g&&(ge=g(ge)),ge=m.Children.only(typeof ge=="string"?m.createElement("span",null,ge):ge),m.createElement(TEe,{prefixCls:"".concat(D,"-menu"),expandIcon:m.createElement("span",{className:"".concat(D,"-menu-submenu-arrow")},m.createElement(cse,{className:"".concat(D,"-menu-submenu-arrow-icon")})),mode:"vertical",selectable:!1,onClick:G,validator:function(we){we.mode}},m.createElement(u1,null,ge))};return m.createElement(fse,J({alignPoint:V},e,{mouseEnterDelay:x,mouseLeaveDelay:E,visible:N,builtinPlacements:Y,arrow:!!c,overlayClassName:j,prefixCls:D,getPopupContainer:p||i,transitionName:o(),trigger:R,overlay:X,placement:a(),onVisibleChange:$}),A)};WF.Button=_se;var YI=function(e){var t=e.prefixCls,i=e.className,r=e.style,s=e.size,o=e.shape,a=Ee(z(z({},"".concat(t,"-lg"),s==="large"),"".concat(t,"-sm"),s==="small")),l=Ee(z(z(z({},"".concat(t,"-circle"),o==="circle"),"".concat(t,"-square"),o==="square"),"".concat(t,"-round"),o==="round")),c=m.useMemo(function(){return typeof s=="number"?{width:s,height:s,lineHeight:"".concat(s,"px")}:{}},[s]);return m.createElement("span",{className:Ee(t,a,l,i),style:J(J({},c),r)})},s2e=function(e){var t=e.prefixCls,i=e.className,r=e.active,s=e.shape,o=s===void 0?"circle":s,a=e.size,l=a===void 0?"default":a,c=m.useContext(Bn),u=c.getPrefixCls,d=u("skeleton",t),h=fo(e,["prefixCls","className"]),f=Ee(d,"".concat(d,"-element"),z({},"".concat(d,"-active"),r),i);return m.createElement("div",{className:f},m.createElement(YI,J({prefixCls:"".concat(d,"-avatar"),shape:o,size:l},h)))},o2e=function(e){var t=e.prefixCls,i=e.className,r=e.active,s=e.block,o=s===void 0?!1:s,a=e.size,l=a===void 0?"default":a,c=m.useContext(Bn),u=c.getPrefixCls,d=u("skeleton",t),h=fo(e,["prefixCls"]),f=Ee(d,"".concat(d,"-element"),z(z({},"".concat(d,"-active"),r),"".concat(d,"-block"),o),i);return m.createElement("div",{className:f},m.createElement(YI,J({prefixCls:"".concat(d,"-button"),size:l},h)))},a2e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM288 604a64 64 0 10128 0 64 64 0 10-128 0zm118-224a48 48 0 1096 0 48 48 0 10-96 0zm158 228a96 96 0 10192 0 96 96 0 10-192 0zm148-314a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"dot-chart",theme:"outlined"},l2e=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:a2e}))},c2e=m.forwardRef(l2e),u2e=function(e){var t=e.prefixCls,i=e.className,r=e.style,s=e.active,o=e.children,a=m.useContext(Bn),l=a.getPrefixCls,c=l("skeleton",t),u=Ee(c,"".concat(c,"-element"),z({},"".concat(c,"-active"),s),i),d=o??m.createElement(c2e,null);return m.createElement("div",{className:u},m.createElement("div",{className:Ee("".concat(c,"-image"),i),style:r},d))},d2e="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",h2e=function(e){var t=e.prefixCls,i=e.className,r=e.style,s=e.active,o=m.useContext(Bn),a=o.getPrefixCls,l=a("skeleton",t),c=Ee(l,"".concat(l,"-element"),z({},"".concat(l,"-active"),s),i);return m.createElement("div",{className:c},m.createElement("div",{className:Ee("".concat(l,"-image"),i),style:r},m.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(l,"-image-svg")},m.createElement("path",{d:d2e,className:"".concat(l,"-image-path")}))))},f2e=function(e){var t=e.prefixCls,i=e.className,r=e.active,s=e.block,o=e.size,a=o===void 0?"default":o,l=m.useContext(Bn),c=l.getPrefixCls,u=c("skeleton",t),d=fo(e,["prefixCls"]),h=Ee(u,"".concat(u,"-element"),z(z({},"".concat(u,"-active"),r),"".concat(u,"-block"),s),i);return m.createElement("div",{className:h},m.createElement(YI,J({prefixCls:"".concat(u,"-input"),size:a},d)))},g2e=function(e){var t=function(c){var u=e.width,d=e.rows,h=d===void 0?2:d;if(Array.isArray(u))return u[c];if(h-1===c)return u},i=e.prefixCls,r=e.className,s=e.style,o=e.rows,a=Et(Array(o)).map(function(l,c){return m.createElement("li",{key:c,style:{width:t(c)}})});return m.createElement("ul",{className:Ee(i,r),style:s},a)},p2e=function(e){var t=e.prefixCls,i=e.className,r=e.width,s=e.style;return m.createElement("h3",{className:Ee(t,i),style:J({width:r},s)})};function E4(n){return n&&Rt(n)==="object"?n:{}}function m2e(n,e){return n&&!e?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function v2e(n,e){return!n&&e?{width:"38%"}:n&&e?{width:"50%"}:{}}function b2e(n,e){var t={};return(!n||!e)&&(t.width="61%"),!n&&e?t.rows=3:t.rows=2,t}var rb=function(e){var t=e.prefixCls,i=e.loading,r=e.className,s=e.style,o=e.children,a=e.avatar,l=a===void 0?!1:a,c=e.title,u=c===void 0?!0:c,d=e.paragraph,h=d===void 0?!0:d,f=e.active,g=e.round,p=m.useContext(Bn),v=p.getPrefixCls,b=p.direction,_=v("skeleton",t);if(i||!("loading"in e)){var y=!!l,C=!!u,w=!!h,x;if(y){var k=J(J({prefixCls:"".concat(_,"-avatar")},m2e(C,w)),E4(l));x=m.createElement("div",{className:"".concat(_,"-header")},m.createElement(YI,J({},k)))}var E;if(C||w){var L;if(C){var M=J(J({prefixCls:"".concat(_,"-title")},v2e(y,w)),E4(u));L=m.createElement(p2e,J({},M))}var D;if(w){var O=J(J({prefixCls:"".concat(_,"-paragraph")},b2e(y,C)),E4(h));D=m.createElement(g2e,J({},O))}E=m.createElement("div",{className:"".concat(_,"-content")},L,D)}var A=Ee(_,z(z(z(z({},"".concat(_,"-with-avatar"),y),"".concat(_,"-active"),f),"".concat(_,"-rtl"),b==="rtl"),"".concat(_,"-round"),g),r);return m.createElement("div",{className:A,style:s},x,E)}return typeof o<"u"?o:null};rb.Button=o2e;rb.Avatar=s2e;rb.Input=f2e;rb.Image=h2e;rb.Node=u2e;var _2e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},C2e=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:_2e}))},y2e=m.forwardRef(C2e);const ZI=m.createContext(null);var Cse=m.forwardRef(function(n,e){var t=n.prefixCls,i=n.className,r=n.style,s=n.id,o=n.active,a=n.tabKey,l=n.children;return m.createElement("div",{id:s&&"".concat(s,"-panel-").concat(a),role:"tabpanel",tabIndex:o?0:-1,"aria-labelledby":s&&"".concat(s,"-tab-").concat(a),"aria-hidden":!o,style:r,className:Ee(t,o&&"".concat(t,"-active"),i),ref:e},l)}),w2e=["key","forceRender","style","className"];function S2e(n){var e=n.id,t=n.activeKey,i=n.animated,r=n.tabPosition,s=n.destroyInactiveTabPane,o=m.useContext(ZI),a=o.prefixCls,l=o.tabs,c=i.tabPane,u="".concat(a,"-tabpane");return m.createElement("div",{className:Ee("".concat(a,"-content-holder"))},m.createElement("div",{className:Ee("".concat(a,"-content"),"".concat(a,"-content-").concat(r),z({},"".concat(a,"-content-animated"),c))},l.map(function(d){var h=d.key,f=d.forceRender,g=d.style,p=d.className,v=sn(d,w2e),b=h===t;return m.createElement(yc,J({key:h,visible:b,forceRender:f,removeOnLeave:!!s,leavedClassName:"".concat(u,"-hidden")},i.tabPaneMotion),function(_,y){var C=_.style,w=_.className;return m.createElement(Cse,J({},v,{prefixCls:u,id:e,tabKey:h,animated:c,active:b,style:ne(ne({},g),C),className:Ee(p,w),ref:y}))})})))}var OU={width:0,height:0,left:0,top:0};function x2e(n,e,t){return m.useMemo(function(){for(var i,r=new Map,s=e.get((i=n[0])===null||i===void 0?void 0:i.key)||OU,o=s.left+s.width,a=0;a<n.length;a+=1){var l=n[a].key,c=e.get(l);if(!c){var u;c=e.get((u=n[a-1])===null||u===void 0?void 0:u.key)||OU}var d=r.get(l)||ne({},c);d.right=o-d.left-d.width,r.set(l,d)}return r},[n.map(function(i){return i.key}).join("_"),e,t])}function PU(n,e){var t=m.useRef(n),i=m.useState({}),r=Ce(i,2),s=r[1];function o(a){var l=typeof a=="function"?a(t.current):a;l!==t.current&&e(l,t.current),t.current=l,s({})}return[t.current,o]}var k2e=.1,FU=.01,Qk=20,BU=Math.pow(.995,Qk);function E2e(n,e){var t=m.useState(),i=Ce(t,2),r=i[0],s=i[1],o=m.useState(0),a=Ce(o,2),l=a[0],c=a[1],u=m.useState(0),d=Ce(u,2),h=d[0],f=d[1],g=m.useState(),p=Ce(g,2),v=p[0],b=p[1],_=m.useRef();function y(L){var M=L.touches[0],D=M.screenX,O=M.screenY;s({x:D,y:O}),window.clearInterval(_.current)}function C(L){if(r){L.preventDefault();var M=L.touches[0],D=M.screenX,O=M.screenY;s({x:D,y:O});var A=D-r.x,R=O-r.y;e(A,R);var V=Date.now();c(V),f(V-l),b({x:A,y:R})}}function w(){if(r&&(s(null),b(null),v)){var L=v.x/h,M=v.y/h,D=Math.abs(L),O=Math.abs(M);if(Math.max(D,O)<k2e)return;var A=L,R=M;_.current=window.setInterval(function(){if(Math.abs(A)<FU&&Math.abs(R)<FU){window.clearInterval(_.current);return}A*=BU,R*=BU,e(A*Qk,R*Qk)},Qk)}}var x=m.useRef();function k(L){var M=L.deltaX,D=L.deltaY,O=0,A=Math.abs(M),R=Math.abs(D);A===R?O=x.current==="x"?M:D:A>R?(O=M,x.current="x"):(O=D,x.current="y"),e(-O,-O)&&L.preventDefault()}var E=m.useRef(null);E.current={onTouchStart:y,onTouchMove:C,onTouchEnd:w,onWheel:k},m.useEffect(function(){function L(A){E.current.onTouchStart(A)}function M(A){E.current.onTouchMove(A)}function D(A){E.current.onTouchEnd(A)}function O(A){E.current.onWheel(A)}return document.addEventListener("touchmove",M,{passive:!1}),document.addEventListener("touchend",D,{passive:!1}),n.current.addEventListener("touchstart",L,{passive:!1}),n.current.addEventListener("wheel",O),function(){document.removeEventListener("touchmove",M),document.removeEventListener("touchend",D)}},[])}function yse(n){var e=m.useState(0),t=Ce(e,2),i=t[0],r=t[1],s=m.useRef(0),o=m.useRef();return o.current=n,_0(function(){var a;(a=o.current)===null||a===void 0||a.call(o)},[i]),function(){s.current===i&&(s.current+=1,r(s.current))}}function L2e(n){var e=m.useRef([]),t=m.useState({}),i=Ce(t,2),r=i[1],s=m.useRef(typeof n=="function"?n():n),o=yse(function(){var l=s.current;e.current.forEach(function(c){l=c(l)}),e.current=[],s.current=l,r({})});function a(l){e.current.push(l),o()}return[s.current,a]}var HU={width:0,height:0,left:0,top:0,right:0};function N2e(n,e,t,i,r,s,o){var a=o.tabs,l=o.tabPosition,c=o.rtl,u,d,h;return["top","bottom"].includes(l)?(u="width",d=c?"right":"left",h=Math.abs(t)):(u="height",d="top",h=-t),m.useMemo(function(){if(!a.length)return[0,0];for(var f=a.length,g=f,p=0;p<f;p+=1){var v=n.get(a[p].key)||HU;if(v[d]+v[u]>h+e){g=p-1;break}}for(var b=0,_=f-1;_>=0;_-=1){var y=n.get(a[_].key)||HU;if(y[d]<h){b=_+1;break}}return[b,g]},[n,e,i,r,s,h,l,a.map(function(f){return f.key}).join("_"),c])}function VU(n){var e;return n instanceof Map?(e={},n.forEach(function(t,i){e[i]=t})):e=n,JSON.stringify(e)}var T2e="TABS_DQ";function wse(n){return String(n).replace(/"/g,T2e)}function I2e(n,e){var t=n.prefixCls,i=n.editable,r=n.locale,s=n.style;return!i||i.showAdd===!1?null:m.createElement("button",{ref:e,type:"button",className:"".concat(t,"-nav-add"),style:s,"aria-label":(r==null?void 0:r.addAriaLabel)||"Add tab",onClick:function(a){i.onEdit("add",{event:a})}},i.addIcon||"+")}const Sse=m.forwardRef(I2e);var zU=m.forwardRef(function(n,e){var t=n.position,i=n.prefixCls,r=n.extra;if(!r)return null;var s,o={};return Rt(r)==="object"&&!m.isValidElement(r)?o=r:o.right=r,t==="right"&&(s=o.right),t==="left"&&(s=o.left),s?m.createElement("div",{className:"".concat(i,"-extra-content"),ref:e},s):null});function D2e(n,e){var t=n.prefixCls,i=n.id,r=n.tabs,s=n.locale,o=n.mobile,a=n.moreIcon,l=a===void 0?"More":a,c=n.moreTransitionName,u=n.style,d=n.className,h=n.editable,f=n.tabBarGutter,g=n.rtl,p=n.removeAriaLabel,v=n.onTabClick,b=n.getPopupContainer,_=n.popupClassName,y=m.useState(!1),C=Ce(y,2),w=C[0],x=C[1],k=m.useState(null),E=Ce(k,2),L=E[0],M=E[1],D="".concat(i,"-more-popup"),O="".concat(t,"-dropdown"),A=L!==null?"".concat(D,"-").concat(L):null,R=s==null?void 0:s.dropdownAriaLabel;function V(Y,G){Y.preventDefault(),Y.stopPropagation(),h.onEdit("remove",{key:G,event:Y})}var F=m.createElement(ib,{onClick:function(G){var X=G.key,q=G.domEvent;v(X,q),x(!1)},prefixCls:"".concat(O,"-menu"),id:D,tabIndex:-1,role:"listbox","aria-activedescendant":A,selectedKeys:[L],"aria-label":R!==void 0?R:"expanded dropdown"},r.map(function(Y){var G=h&&Y.closable!==!1&&!Y.disabled;return m.createElement(Zw,{key:Y.key,id:"".concat(D,"-").concat(Y.key),role:"option","aria-controls":i&&"".concat(i,"-panel-").concat(Y.key),disabled:Y.disabled},m.createElement("span",null,Y.label),G&&m.createElement("button",{type:"button","aria-label":p||"remove",tabIndex:0,className:"".concat(O,"-menu-item-remove"),onClick:function(q){q.stopPropagation(),V(q,Y.key)}},Y.closeIcon||h.removeIcon||""))}));function T(Y){for(var G=r.filter(function(ye){return!ye.disabled}),X=G.findIndex(function(ye){return ye.key===L})||0,q=G.length,re=0;re<q;re+=1){X=(X+Y+q)%q;var ge=G[X];if(!ge.disabled){M(ge.key);return}}}function N(Y){var G=Y.which;if(!w){[je.DOWN,je.SPACE,je.ENTER].includes(G)&&(x(!0),Y.preventDefault());return}switch(G){case je.UP:T(-1),Y.preventDefault();break;case je.DOWN:T(1),Y.preventDefault();break;case je.ESC:x(!1);break;case je.SPACE:case je.ENTER:L!==null&&v(L,Y);break}}m.useEffect(function(){var Y=document.getElementById(A);Y&&Y.scrollIntoView&&Y.scrollIntoView(!1)},[L]),m.useEffect(function(){w||M(null)},[w]);var B=z({},g?"marginRight":"marginLeft",f);r.length||(B.visibility="hidden",B.order=1);var $=Ee(z({},"".concat(O,"-rtl"),g)),j=o?null:m.createElement(fse,{prefixCls:O,overlay:F,trigger:["hover"],visible:r.length?w:!1,transitionName:c,onVisibleChange:x,overlayClassName:Ee($,_),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:b},m.createElement("button",{type:"button",className:"".concat(t,"-nav-more"),style:B,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":D,id:"".concat(i,"-more"),"aria-expanded":w,onKeyDown:N},l));return m.createElement("div",{className:Ee("".concat(t,"-nav-operations"),d),style:u,ref:e},j,m.createElement(Sse,{prefixCls:t,locale:s,editable:h}))}const M2e=m.memo(m.forwardRef(D2e),function(n,e){return e.tabMoving});function R2e(n){var e,t=n.prefixCls,i=n.id,r=n.active,s=n.tab,o=s.key,a=s.label,l=s.disabled,c=s.closeIcon,u=n.closable,d=n.renderWrapper,h=n.removeAriaLabel,f=n.editable,g=n.onClick,p=n.onFocus,v=n.style,b="".concat(t,"-tab"),_=f&&u!==!1&&!l;function y(x){l||g(x)}function C(x){x.preventDefault(),x.stopPropagation(),f.onEdit("remove",{key:o,event:x})}var w=m.createElement("div",{key:o,"data-node-key":wse(o),className:Ee(b,(e={},z(e,"".concat(b,"-with-remove"),_),z(e,"".concat(b,"-active"),r),z(e,"".concat(b,"-disabled"),l),e)),style:v,onClick:y},m.createElement("div",{role:"tab","aria-selected":r,id:i&&"".concat(i,"-tab-").concat(o),className:"".concat(b,"-btn"),"aria-controls":i&&"".concat(i,"-panel-").concat(o),"aria-disabled":l,tabIndex:l?null:0,onClick:function(k){k.stopPropagation(),y(k)},onKeyDown:function(k){[je.SPACE,je.ENTER].includes(k.which)&&(k.preventDefault(),y(k))},onFocus:p},a),_&&m.createElement("button",{type:"button","aria-label":h||"remove",tabIndex:0,className:"".concat(b,"-remove"),onClick:function(k){k.stopPropagation(),C(k)}},c||f.removeIcon||""));return d?d(w):w}var Bm=function(e){var t=e.current||{},i=t.offsetWidth,r=i===void 0?0:i,s=t.offsetHeight,o=s===void 0?0:s;return[r,o]},dx=function(e,t){return e[t?0:1]};function A2e(n,e){var t,i=m.useContext(ZI),r=i.prefixCls,s=i.tabs,o=n.className,a=n.style,l=n.id,c=n.animated,u=n.activeKey,d=n.rtl,h=n.extra,f=n.editable,g=n.locale,p=n.tabPosition,v=n.tabBarGutter,b=n.children,_=n.onTabClick,y=n.onTabScroll,C=m.useRef(),w=m.useRef(),x=m.useRef(),k=m.useRef(),E=m.useRef(),L=m.useRef(),M=m.useRef(),D=p==="top"||p==="bottom",O=PU(0,function(nn,bn){D&&y&&y({direction:nn>bn?"left":"right"})}),A=Ce(O,2),R=A[0],V=A[1],F=PU(0,function(nn,bn){!D&&y&&y({direction:nn>bn?"top":"bottom"})}),T=Ce(F,2),N=T[0],B=T[1],$=m.useState([0,0]),j=Ce($,2),Y=j[0],G=j[1],X=m.useState([0,0]),q=Ce(X,2),re=q[0],ge=q[1],ye=m.useState([0,0]),we=Ce(ye,2),Ie=we[0],Fe=we[1],ze=m.useState([0,0]),Me=Ce(ze,2),Pe=Me[0],tt=Me[1],Ae=L2e(new Map),mt=Ce(Ae,2),ft=mt[0],Le=mt[1],Ge=x2e(s,ft,re[0]),Oe=dx(Y,D),xe=dx(re,D),at=dx(Ie,D),gt=dx(Pe,D),Ct=Oe<xe+at,nt=Ct?Oe-gt:Oe-at,se="".concat(r,"-nav-operations-hidden"),fe=0,Ne=0;D&&d?(fe=0,Ne=Math.max(0,xe-nt)):(fe=Math.min(0,nt-xe),Ne=0);function Ve(nn){return nn<fe?fe:nn>Ne?Ne:nn}var lt=m.useRef(),Dt=m.useState(),Qt=Ce(Dt,2),he=Qt[0],Ke=Qt[1];function ue(){Ke(Date.now())}function ee(){window.clearTimeout(lt.current)}E2e(k,function(nn,bn){function pt(ce,Xe){ce(function(Re){var st=Ve(Re+Xe);return st})}return Ct?(D?pt(V,nn):pt(B,bn),ee(),ue(),!0):!1}),m.useEffect(function(){return ee(),he&&(lt.current=window.setTimeout(function(){Ke(0)},100)),ee},[he]);var oe=N2e(Ge,nt,D?R:N,xe,at,gt,ne(ne({},n),{},{tabs:s})),pe=Ce(oe,2),le=pe[0],ve=pe[1],He=dc(function(){var nn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u,bn=Ge.get(nn)||{width:0,height:0,left:0,right:0,top:0};if(D){var pt=R;d?bn.right<R?pt=bn.right:bn.right+bn.width>R+nt&&(pt=bn.right+bn.width-nt):bn.left<-R?pt=-bn.left:bn.left+bn.width>-R+nt&&(pt=-(bn.left+bn.width-nt)),B(0),V(Ve(pt))}else{var ce=N;bn.top<-N?ce=-bn.top:bn.top+bn.height>-N+nt&&(ce=-(bn.top+bn.height-nt)),V(0),B(Ve(ce))}}),Qe={};p==="top"||p==="bottom"?Qe[d?"marginRight":"marginLeft"]=v:Qe.marginTop=v;var ut=s.map(function(nn,bn){var pt=nn.key;return m.createElement(R2e,{id:l,prefixCls:r,key:pt,tab:nn,style:bn===0?void 0:Qe,closable:nn.closable,editable:f,active:pt===u,renderWrapper:b,removeAriaLabel:g==null?void 0:g.removeAriaLabel,onClick:function(Xe){_(pt,Xe)},onFocus:function(){He(pt),ue(),k.current&&(d||(k.current.scrollLeft=0),k.current.scrollTop=0)}})}),St=function(){return Le(function(){var bn=new Map;return s.forEach(function(pt){var ce,Xe=pt.key,Re=(ce=E.current)===null||ce===void 0?void 0:ce.querySelector('[data-node-key="'.concat(wse(Xe),'"]'));Re&&bn.set(Xe,{width:Re.offsetWidth,height:Re.offsetHeight,left:Re.offsetLeft,top:Re.offsetTop})}),bn})};m.useEffect(function(){St()},[s.map(function(nn){return nn.key}).join("_")]);var Lt=yse(function(){var nn=Bm(C),bn=Bm(w),pt=Bm(x);G([nn[0]-bn[0]-pt[0],nn[1]-bn[1]-pt[1]]);var ce=Bm(M);Fe(ce);var Xe=Bm(L);tt(Xe);var Re=Bm(E);ge([Re[0]-ce[0],Re[1]-ce[1]]),St()}),be=s.slice(0,le),H=s.slice(ve+1),W=[].concat(Et(be),Et(H)),K=m.useState(),Q=Ce(K,2),ie=Q[0],me=Q[1],Se=Ge.get(u),Ze=m.useRef();function Je(){On.cancel(Ze.current)}m.useEffect(function(){var nn={};return Se&&(D?(d?nn.right=Se.right:nn.left=Se.left,nn.width=Se.width):(nn.top=Se.top,nn.height=Se.height)),Je(),Ze.current=On(function(){me(nn)}),Je},[Se,D,d]),m.useEffect(function(){He()},[u,fe,Ne,VU(Se),VU(Ge),D]),m.useEffect(function(){Lt()},[d]);var wt=!!W.length,zt="".concat(r,"-nav-wrap"),Zt,Dn,on,oi;return D?d?(Dn=R>0,Zt=R!==Ne):(Zt=R<0,Dn=R!==fe):(on=N<0,oi=N!==fe),m.createElement(Cf,{onResize:Lt},m.createElement("div",{ref:Ww(e,C),role:"tablist",className:Ee("".concat(r,"-nav"),o),style:a,onKeyDown:function(){ue()}},m.createElement(zU,{ref:w,position:"left",extra:h,prefixCls:r}),m.createElement("div",{className:Ee(zt,(t={},z(t,"".concat(zt,"-ping-left"),Zt),z(t,"".concat(zt,"-ping-right"),Dn),z(t,"".concat(zt,"-ping-top"),on),z(t,"".concat(zt,"-ping-bottom"),oi),t)),ref:k},m.createElement(Cf,{onResize:Lt},m.createElement("div",{ref:E,className:"".concat(r,"-nav-list"),style:{transform:"translate(".concat(R,"px, ").concat(N,"px)"),transition:he?"none":void 0}},ut,m.createElement(Sse,{ref:M,prefixCls:r,locale:g,editable:f,style:ne(ne({},ut.length===0?void 0:Qe),{},{visibility:wt?"hidden":null})}),m.createElement("div",{className:Ee("".concat(r,"-ink-bar"),z({},"".concat(r,"-ink-bar-animated"),c.inkBar)),style:ie})))),m.createElement(M2e,J({},n,{removeAriaLabel:g==null?void 0:g.removeAriaLabel,ref:L,prefixCls:r,tabs:W,className:!wt&&se,tabMoving:!!he})),m.createElement(zU,{ref:x,position:"right",extra:h,prefixCls:r})))}const WU=m.forwardRef(A2e);var O2e=["renderTabBar"],P2e=["label","key"];function F2e(n){var e=n.renderTabBar,t=sn(n,O2e),i=m.useContext(ZI),r=i.tabs;if(e){var s=ne(ne({},t),{},{panes:r.map(function(o){var a=o.label,l=o.key,c=sn(o,P2e);return m.createElement(Cse,J({tab:a,key:l,tabKey:l},c))})});return e(s,WU)}return m.createElement(WU,t)}function B2e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},e;return n===!1?e={inkBar:!1,tabPane:!1}:n===!0?e={inkBar:!0,tabPane:!1}:e=ne({inkBar:!0},Rt(n)==="object"?n:{}),e.tabPaneMotion&&e.tabPane===void 0&&(e.tabPane=!0),!e.tabPaneMotion&&e.tabPane&&(e.tabPane=!1),e}var H2e=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],$U=0;function V2e(n,e){var t,i=n.id,r=n.prefixCls,s=r===void 0?"rc-tabs":r,o=n.className,a=n.items,l=n.direction,c=n.activeKey,u=n.defaultActiveKey,d=n.editable,h=n.animated,f=n.tabPosition,g=f===void 0?"top":f,p=n.tabBarGutter,v=n.tabBarStyle,b=n.tabBarExtraContent,_=n.locale,y=n.moreIcon,C=n.moreTransitionName,w=n.destroyInactiveTabPane,x=n.renderTabBar,k=n.onChange,E=n.onTabClick,L=n.onTabScroll,M=n.getPopupContainer,D=n.popupClassName,O=sn(n,H2e),A=m.useMemo(function(){return(a||[]).filter(function(Ae){return Ae&&Rt(Ae)==="object"&&"key"in Ae})},[a]),R=l==="rtl",V=B2e(h),F=m.useState(!1),T=Ce(F,2),N=T[0],B=T[1];m.useEffect(function(){B(VI())},[]);var $=Ps(function(){var Ae;return(Ae=A[0])===null||Ae===void 0?void 0:Ae.key},{value:c,defaultValue:u}),j=Ce($,2),Y=j[0],G=j[1],X=m.useState(function(){return A.findIndex(function(Ae){return Ae.key===Y})}),q=Ce(X,2),re=q[0],ge=q[1];m.useEffect(function(){var Ae=A.findIndex(function(ft){return ft.key===Y});if(Ae===-1){var mt;Ae=Math.max(0,Math.min(re,A.length-1)),G((mt=A[Ae])===null||mt===void 0?void 0:mt.key)}ge(Ae)},[A.map(function(Ae){return Ae.key}).join("_"),Y,re]);var ye=Ps(null,{value:i}),we=Ce(ye,2),Ie=we[0],Fe=we[1];m.useEffect(function(){i||(Fe("rc-tabs-".concat($U)),$U+=1)},[]);function ze(Ae,mt){E==null||E(Ae,mt);var ft=Ae!==Y;G(Ae),ft&&(k==null||k(Ae))}var Me={id:Ie,activeKey:Y,animated:V,tabPosition:g,rtl:R,mobile:N},Pe,tt=ne(ne({},Me),{},{editable:d,locale:_,moreIcon:y,moreTransitionName:C,tabBarGutter:p,onTabClick:ze,onTabScroll:L,extra:b,style:v,panes:null,getPopupContainer:M,popupClassName:D});return m.createElement(ZI.Provider,{value:{tabs:A,prefixCls:s}},m.createElement("div",J({ref:e,id:i,className:Ee(s,"".concat(s,"-").concat(g),(t={},z(t,"".concat(s,"-mobile"),N),z(t,"".concat(s,"-editable"),d),z(t,"".concat(s,"-rtl"),R),t),o)},O),Pe,m.createElement(F2e,J({},tt,{renderTabBar:x})),m.createElement(S2e,J({destroyInactiveTabPane:w},Me,{animated:V}))))}var z2e=m.forwardRef(V2e),W2e={motionAppear:!1,motionEnter:!0,motionLeave:!0};function $2e(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inkBar:!0,tabPane:!1},t;return e===!1?t={inkBar:!1,tabPane:!1}:e===!0?t={inkBar:!0,tabPane:!0}:t=J({inkBar:!0},Rt(e)==="object"?e:{}),t.tabPane&&(t.tabPaneMotion=J(J({},W2e),{motionName:_l(n,"switch")})),t}var U2e=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function j2e(n){return n.filter(function(e){return e})}function K2e(n,e){if(n)return n;var t=gu(e).map(function(i){if(m.isValidElement(i)){var r=i.key,s=i.props,o=s||{},a=o.tab,l=U2e(o,["tab"]),c=J(J({key:String(r)},l),{label:a});return c}return null});return j2e(t)}var q2e=function(){return null},G2e=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function xse(n){var e=n.type,t=n.className,i=n.size,r=n.onEdit,s=n.hideAdd,o=n.centered,a=n.addIcon,l=n.children,c=n.items,u=n.animated,d=G2e(n,["type","className","size","onEdit","hideAdd","centered","addIcon","children","items","animated"]),h=d.prefixCls,f=d.moreIcon,g=f===void 0?m.createElement(AF,null):f,p=m.useContext(Bn),v=p.getPrefixCls,b=p.direction,_=p.getPopupContainer,y=v("tabs",h),C;e==="editable-card"&&(C={onEdit:function(L,M){var D=M.key,O=M.event;r==null||r(L==="add"?O:D,L)},removeIcon:m.createElement(J1,null),addIcon:a||m.createElement(y2e,null),showAdd:s!==!0});var w=v(),x=K2e(c,l),k=$2e(y,u);return m.createElement(hc.Consumer,null,function(E){var L=i!==void 0?i:E;return m.createElement(z2e,J({direction:b,getPopupContainer:_,moreTransitionName:"".concat(w,"-slide-up")},d,{items:x,className:Ee(z(z(z(z({},"".concat(y,"-").concat(L),L),"".concat(y,"-card"),["card","editable-card"].includes(e)),"".concat(y,"-editable-card"),e==="editable-card"),"".concat(y,"-centered"),o),t),editable:C,moreIcon:g,prefixCls:y,animated:k}))})}xse.TabPane=q2e;var Y2e=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},kse=function(e){var t=e.prefixCls,i=e.className,r=e.hoverable,s=r===void 0?!0:r,o=Y2e(e,["prefixCls","className","hoverable"]);return m.createElement(Hf,null,function(a){var l=a.getPrefixCls,c=l("card",t),u=Ee("".concat(c,"-grid"),i,z({},"".concat(c,"-grid-hoverable"),s));return m.createElement("div",J({},o,{className:u}))})},Z2e=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function X2e(n){var e=n.map(function(t,i){return m.createElement("li",{style:{width:"".concat(100/n.length,"%")},key:"action-".concat(i)},m.createElement("span",null,t))});return e}var Q2e=m.forwardRef(function(n,e){var t=m.useContext(Bn),i=t.getPrefixCls,r=t.direction,s=m.useContext(hc),o=function(we){var Ie;(Ie=n.onTabChange)===null||Ie===void 0||Ie.call(n,we)},a=function(){var we;return m.Children.forEach(n.children,function(Ie){Ie&&Ie.type&&Ie.type===kse&&(we=!0)}),we},l=n.prefixCls,c=n.className,u=n.extra,d=n.headStyle,h=d===void 0?{}:d,f=n.bodyStyle,g=f===void 0?{}:f,p=n.title,v=n.loading,b=n.bordered,_=b===void 0?!0:b,y=n.size,C=n.type,w=n.cover,x=n.actions,k=n.tabList,E=n.children,L=n.activeTabKey,M=n.defaultActiveTabKey,D=n.tabBarExtraContent,O=n.hoverable,A=n.tabProps,R=A===void 0?{}:A,V=Z2e(n,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),F=i("card",l),T=m.createElement(rb,{loading:!0,active:!0,paragraph:{rows:4},title:!1},E),N=L!==void 0,B=J(J({},R),z(z({},N?"activeKey":"defaultActiveKey",N?L:M),"tabBarExtraContent",D)),$,j=k&&k.length?m.createElement(xse,J({size:"large"},B,{className:"".concat(F,"-head-tabs"),onChange:o,items:k.map(function(ye){var we;return{label:ye.tab,key:ye.key,disabled:(we=ye.disabled)!==null&&we!==void 0?we:!1}})})):null;(p||u||j)&&($=m.createElement("div",{className:"".concat(F,"-head"),style:h},m.createElement("div",{className:"".concat(F,"-head-wrapper")},p&&m.createElement("div",{className:"".concat(F,"-head-title")},p),u&&m.createElement("div",{className:"".concat(F,"-extra")},u)),j));var Y=w?m.createElement("div",{className:"".concat(F,"-cover")},w):null,G=m.createElement("div",{className:"".concat(F,"-body"),style:g},v?T:E),X=x&&x.length?m.createElement("ul",{className:"".concat(F,"-actions")},X2e(x)):null,q=fo(V,["onTabChange"]),re=y||s,ge=Ee(F,z(z(z(z(z(z(z(z({},"".concat(F,"-loading"),v),"".concat(F,"-bordered"),_),"".concat(F,"-hoverable"),O),"".concat(F,"-contain-grid"),a()),"".concat(F,"-contain-tabs"),k&&k.length),"".concat(F,"-").concat(re),re),"".concat(F,"-type-").concat(C),!!C),"".concat(F,"-rtl"),r==="rtl"),c);return m.createElement("div",J({ref:e},q,{className:ge}),$,Y,G,X)}),J2e=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},eLe=function(e){return m.createElement(Hf,null,function(t){var i=t.getPrefixCls,r=e.prefixCls,s=e.className,o=e.avatar,a=e.title,l=e.description,c=J2e(e,["prefixCls","className","avatar","title","description"]),u=i("card",r),d=Ee("".concat(u,"-meta"),s),h=o?m.createElement("div",{className:"".concat(u,"-meta-avatar")},o):null,f=a?m.createElement("div",{className:"".concat(u,"-meta-title")},a):null,g=l?m.createElement("div",{className:"".concat(u,"-meta-description")},l):null,p=f||g?m.createElement("div",{className:"".concat(u,"-meta-detail")},f,g):null;return m.createElement("div",J({},c,{className:d}),h,p)})},$F=Q2e;$F.Grid=kse;$F.Meta=eLe;var tLe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},L4=function(e){var t=m.useContext(Bn),i=t.getPrefixCls,r=t.direction,s=e.prefixCls,o=e.type,a=o===void 0?"horizontal":o,l=e.orientation,c=l===void 0?"center":l,u=e.orientationMargin,d=e.className,h=e.children,f=e.dashed,g=e.plain,p=tLe(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),v=i("divider",s),b=c.length>0?"-".concat(c):c,_=!!h,y=c==="left"&&u!=null,C=c==="right"&&u!=null,w=Ee(v,"".concat(v,"-").concat(a),z(z(z(z(z(z(z({},"".concat(v,"-with-text"),_),"".concat(v,"-with-text").concat(b),_),"".concat(v,"-dashed"),!!f),"".concat(v,"-plain"),!!g),"".concat(v,"-rtl"),r==="rtl"),"".concat(v,"-no-default-orientation-margin-left"),y),"".concat(v,"-no-default-orientation-margin-right"),C),d),x=J(J({},y&&{marginLeft:u}),C&&{marginRight:u});return m.createElement("div",J({className:w},p,{role:"separator"}),h&&a!=="vertical"&&m.createElement("span",{className:"".concat(v,"-inner-text"),style:x},h))},Ese=m.createContext(null),UU=[];function nLe(n,e){var t=m.useState(function(){if(!da())return null;var g=document.createElement("div");return g}),i=Ce(t,1),r=i[0],s=m.useRef(!1),o=m.useContext(Ese),a=m.useState(UU),l=Ce(a,2),c=l[0],u=l[1],d=o||(s.current?void 0:function(g){u(function(p){var v=[g].concat(Et(p));return v})});function h(){r.parentElement||document.body.appendChild(r),s.current=!0}function f(){var g;(g=r.parentElement)===null||g===void 0||g.removeChild(r),s.current=!1}return oo(function(){return n?o?o(h):h():f(),f},[n]),oo(function(){c.length&&(c.forEach(function(g){return g()}),u(UU))},[c]),[r,d]}function iLe(n){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),t=document.createElement("div");t.id=e;var i=t.style;i.position="absolute",i.left="0",i.top="0",i.width="100px",i.height="100px",i.overflow="scroll";var r,s;if(n){var o=getComputedStyle(n);i.scrollbarColor=o.scrollbarColor,i.scrollbarWidth=o.scrollbarWidth;var a=getComputedStyle(n,"::-webkit-scrollbar"),l=parseInt(a.width,10),c=parseInt(a.height,10);try{var u=l?"width: ".concat(a.width,";"):"",d=c?"height: ".concat(a.height,";"):"";X1(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(u,`
`).concat(d,`
}`),e)}catch(g){console.error(g),r=l,s=c}}document.body.appendChild(t);var h=n&&r&&!isNaN(r)?r:t.offsetWidth-t.clientWidth,f=n&&s&&!isNaN(s)?s:t.offsetHeight-t.clientHeight;return document.body.removeChild(t),YO(e),{width:h,height:f}}function rLe(n){return typeof document>"u"||!n||!(n instanceof Element)?{width:0,height:0}:iLe(n)}function sLe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var oLe="rc-util-locker-".concat(Date.now()),jU=0;function aLe(n){var e=!!n,t=m.useState(function(){return jU+=1,"".concat(oLe,"_").concat(jU)}),i=Ce(t,1),r=i[0];oo(function(){if(e){var s=rLe(document.body).width,o=sLe();X1(`
html body {
  overflow-y: hidden;
  `.concat(o?"width: calc(100% - ".concat(s,"px);"):"",`
}`),r)}else YO(r);return function(){YO(r)}},[e,r])}var lLe=!1;function cLe(n){return lLe}var KU=function(e){return e===!1?!1:!da()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},Lse=m.forwardRef(function(n,e){var t=n.open,i=n.autoLock,r=n.getContainer;n.debug;var s=n.autoDestroy,o=s===void 0?!0:s,a=n.children,l=m.useState(t),c=Ce(l,2),u=c[0],d=c[1],h=u||t;m.useEffect(function(){(o||t)&&d(t)},[t,o]);var f=m.useState(function(){return KU(r)}),g=Ce(f,2),p=g[0],v=g[1];m.useEffect(function(){var D=KU(r);v(D??null)});var b=nLe(h&&!p),_=Ce(b,2),y=_[0],C=_[1],w=p??y;aLe(i&&t&&da()&&(w===y||w===document.body));var x=null;if(a&&$w(a)&&e){var k=a;x=k.ref}var E=Ww(x,e);if(!h||!da()||p===void 0)return null;var L=w===!1||cLe(),M=a;return e&&(M=m.cloneElement(a,{ref:E})),m.createElement(Ese.Provider,{value:C},L?M:uc.createPortal(M,w))}),uLe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},dLe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:uLe}))},Nse=m.forwardRef(dLe);function Tse(){var n=document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight;return{width:n,height:e}}function hLe(n){var e=n.getBoundingClientRect(),t=document.documentElement;return{left:e.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||document.body.clientTop||0)}}function fLe(){var n=ne({},ome);return n.useId}var qU=0,GU=fLe();const gLe=GU?function(e){var t=GU();return e||t}:function(e){var t=m.useState("ssr-id"),i=Ce(t,2),r=i[0],s=i[1];return m.useEffect(function(){var o=qU;qU+=1,s("rc_unique_".concat(o))},[]),e||r};function pLe(n){var e=n.prefixCls,t=n.style,i=n.visible,r=n.maskProps,s=n.motionName;return m.createElement(yc,{key:"mask",visible:i,motionName:s,leavedClassName:"".concat(e,"-mask-hidden")},function(o,a){var l=o.className,c=o.style;return m.createElement("div",J({ref:a,style:ne(ne({},c),t),className:Ee("".concat(e,"-mask"),l)},r))})}function YU(n,e,t){var i=e;return!i&&t&&(i="".concat(n,"-").concat(t)),i}function ZU(n,e){var t=n["page".concat(e?"Y":"X","Offset")],i="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var r=n.document;t=r.documentElement[i],typeof t!="number"&&(t=r.body[i])}return t}function mLe(n){var e=n.getBoundingClientRect(),t={left:e.left,top:e.top},i=n.ownerDocument,r=i.defaultView||i.parentWindow;return t.left+=ZU(r),t.top+=ZU(r,!0),t}const vLe=m.memo(function(n){var e=n.children;return e},function(n,e){var t=e.shouldUpdate;return!t});var XU={width:0,height:0,overflow:"hidden",outline:"none"},bLe=Ue.forwardRef(function(n,e){var t=n.prefixCls,i=n.className,r=n.style,s=n.title,o=n.ariaId,a=n.footer,l=n.closable,c=n.closeIcon,u=n.onClose,d=n.children,h=n.bodyStyle,f=n.bodyProps,g=n.modalRender,p=n.onMouseDown,v=n.onMouseUp,b=n.holderRef,_=n.visible,y=n.forceRender,C=n.width,w=n.height,x=m.useRef(),k=m.useRef();Ue.useImperativeHandle(e,function(){return{focus:function(){var R;(R=x.current)===null||R===void 0||R.focus({preventScroll:!0})},changeActive:function(R){var V=document,F=V.activeElement;R&&F===k.current?x.current.focus({preventScroll:!0}):!R&&F===x.current&&k.current.focus({preventScroll:!0})}}});var E={};C!==void 0&&(E.width=C),w!==void 0&&(E.height=w);var L;a&&(L=Ue.createElement("div",{className:"".concat(t,"-footer")},a));var M;s&&(M=Ue.createElement("div",{className:"".concat(t,"-header")},Ue.createElement("div",{className:"".concat(t,"-title"),id:o},s)));var D;l&&(D=Ue.createElement("button",{type:"button",onClick:u,"aria-label":"Close",className:"".concat(t,"-close")},c||Ue.createElement("span",{className:"".concat(t,"-close-x")})));var O=Ue.createElement("div",{className:"".concat(t,"-content")},D,M,Ue.createElement("div",J({className:"".concat(t,"-body"),style:h},f),d),L);return Ue.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":s?o:null,"aria-modal":"true",ref:b,style:ne(ne({},r),E),className:Ee(t,i),onMouseDown:p,onMouseUp:v},Ue.createElement("div",{tabIndex:0,ref:x,style:XU}),Ue.createElement(vLe,{shouldUpdate:_||y},g?g(O):O),Ue.createElement("div",{tabIndex:0,ref:k,style:XU}))}),Ise=m.forwardRef(function(n,e){var t=n.prefixCls,i=n.title,r=n.style,s=n.className,o=n.visible,a=n.forceRender,l=n.destroyOnClose,c=n.motionName,u=n.ariaId,d=n.onVisibleChanged,h=n.mousePosition,f=m.useRef(),g=m.useState(),p=Ce(g,2),v=p[0],b=p[1],_={};v&&(_.transformOrigin=v);function y(){var C=mLe(f.current);b(h?"".concat(h.x-C.left,"px ").concat(h.y-C.top,"px"):"")}return m.createElement(yc,{visible:o,onVisibleChanged:d,onAppearPrepare:y,onEnterPrepare:y,forceRender:a,motionName:c,removeOnLeave:l,ref:f},function(C,w){var x=C.className,k=C.style;return m.createElement(bLe,J({},n,{ref:e,title:i,ariaId:u,prefixCls:t,holderRef:w,style:ne(ne(ne({},k),r),_),className:Ee(s,x)}))})});Ise.displayName="Content";function _Le(n){var e=n.prefixCls,t=e===void 0?"rc-dialog":e,i=n.zIndex,r=n.visible,s=r===void 0?!1:r,o=n.keyboard,a=o===void 0?!0:o,l=n.focusTriggerAfterClose,c=l===void 0?!0:l,u=n.wrapStyle,d=n.wrapClassName,h=n.wrapProps,f=n.onClose,g=n.afterClose,p=n.transitionName,v=n.animation,b=n.closable,_=b===void 0?!0:b,y=n.mask,C=y===void 0?!0:y,w=n.maskTransitionName,x=n.maskAnimation,k=n.maskClosable,E=k===void 0?!0:k,L=n.maskStyle,M=n.maskProps,D=n.rootClassName,O=m.useRef(),A=m.useRef(),R=m.useRef(),V=m.useState(s),F=Ce(V,2),T=F[0],N=F[1],B=gLe();function $(){tp(A.current,document.activeElement)||(O.current=document.activeElement)}function j(){if(!tp(A.current,document.activeElement)){var Ie;(Ie=R.current)===null||Ie===void 0||Ie.focus()}}function Y(Ie){if(Ie)j();else{if(N(!1),C&&O.current&&c){try{O.current.focus({preventScroll:!0})}catch{}O.current=null}T&&(g==null||g())}}function G(Ie){f==null||f(Ie)}var X=m.useRef(!1),q=m.useRef(),re=function(){clearTimeout(q.current),X.current=!0},ge=function(){q.current=setTimeout(function(){X.current=!1})},ye=null;E&&(ye=function(Fe){X.current?X.current=!1:A.current===Fe.target&&G(Fe)});function we(Ie){if(a&&Ie.keyCode===je.ESC){Ie.stopPropagation(),G(Ie);return}s&&Ie.keyCode===je.TAB&&R.current.changeActive(!Ie.shiftKey)}return m.useEffect(function(){s&&(N(!0),$())},[s]),m.useEffect(function(){return function(){clearTimeout(q.current)}},[]),m.createElement("div",J({className:Ee("".concat(t,"-root"),D)},Sy(n,{data:!0})),m.createElement(pLe,{prefixCls:t,visible:C&&s,motionName:YU(t,w,x),style:ne({zIndex:i},L),maskProps:M}),m.createElement("div",J({tabIndex:-1,onKeyDown:we,className:Ee("".concat(t,"-wrap"),d),ref:A,onClick:ye,style:ne(ne({zIndex:i},u),{},{display:T?null:"none"})},h),m.createElement(Ise,J({},n,{onMouseDown:re,onMouseUp:ge,ref:R,closable:_,ariaId:B,prefixCls:t,visible:s&&T,onClose:G,onVisibleChanged:Y,motionName:YU(t,p,v)}))))}var UF=function(e){var t=e.visible,i=e.getContainer,r=e.forceRender,s=e.destroyOnClose,o=s===void 0?!1:s,a=e.afterClose,l=m.useState(t),c=Ce(l,2),u=c[0],d=c[1];return m.useEffect(function(){t&&d(!0)},[t]),!r&&o&&!u?null:m.createElement(Lse,{open:t||r||u,autoDestroy:!1,getContainer:i,autoLock:t||u},m.createElement(_Le,J({},e,{destroyOnClose:o,afterClose:function(){a==null||a(),d(!1)}})))};UF.displayName="Dialog";var CLe=["visible","onVisibleChange","getContainer","current","countRender"],jF=m.createContext({previewUrls:new Map,setPreviewUrls:function(){return null},current:null,setCurrent:function(){return null},setShowPreview:function(){return null},setMousePosition:function(){return null},registerImage:function(){return function(){return null}},rootClassName:""}),yLe=jF.Provider,wLe=function(e){var t=e.previewPrefixCls,i=t===void 0?"rc-image-preview":t,r=e.children,s=e.icons,o=s===void 0?{}:s,a=e.preview,l=Rt(a)==="object"?a:{},c=l.visible,u=c===void 0?void 0:c,d=l.onVisibleChange,h=d===void 0?void 0:d,f=l.getContainer,g=f===void 0?void 0:f,p=l.current,v=p===void 0?0:p,b=l.countRender,_=b===void 0?void 0:b,y=sn(l,CLe),C=m.useState(new Map),w=Ce(C,2),x=w[0],k=w[1],E=m.useState(),L=Ce(E,2),M=L[0],D=L[1],O=Ps(!!u,{value:u,onChange:h}),A=Ce(O,2),R=A[0],V=A[1],F=m.useState(null),T=Ce(F,2),N=T[0],B=T[1],$=u!==void 0,j=Array.from(x.keys()),Y=j[v],G=new Map(Array.from(x).filter(function(re){var ge=Ce(re,2),ye=ge[1].canPreview;return!!ye}).map(function(re){var ge=Ce(re,2),ye=ge[0],we=ge[1].url;return[ye,we]})),X=function(ge,ye){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,Ie=function(){k(function(ze){var Me=new Map(ze),Pe=Me.delete(ge);return Pe?Me:ze})};return k(function(Fe){return new Map(Fe).set(ge,{url:ye,canPreview:we})}),Ie},q=function(ge){ge.stopPropagation(),V(!1),B(null)};return m.useEffect(function(){D(Y)},[Y]),m.useEffect(function(){!R&&$&&D(Y)},[Y,$,R]),m.createElement(yLe,{value:{isPreviewGroup:!0,previewUrls:G,setPreviewUrls:k,current:M,setCurrent:D,setShowPreview:V,setMousePosition:B,registerImage:X}},r,m.createElement(Dse,J({"aria-hidden":!R,visible:R,prefixCls:i,onClose:q,mousePosition:N,src:G.get(M),icons:o,getContainer:g,countRender:_},y)))},Jk=1,eE=50,zb=1,SLe=.2,xLe=function(e){var t,i=e.visible,r=e.maskTransitionName,s=e.getContainer,o=e.prefixCls,a=e.rootClassName,l=e.icons,c=e.countRender,u=e.showSwitch,d=e.showProgress,h=e.current,f=e.count,g=e.scale,p=e.onSwitchLeft,v=e.onSwitchRight,b=e.onClose,_=e.onZoomIn,y=e.onZoomOut,C=e.onRotateRight,w=e.onRotateLeft,x=l.rotateLeft,k=l.rotateRight,E=l.zoomIn,L=l.zoomOut,M=l.close,D=l.left,O=l.right,A="".concat(o,"-operations-operation"),R="".concat(o,"-operations-icon"),V=[{icon:M,onClick:b,type:"close"},{icon:E,onClick:_,type:"zoomIn",disabled:g===eE},{icon:L,onClick:y,type:"zoomOut",disabled:g===Jk},{icon:k,onClick:C,type:"rotateRight"},{icon:x,onClick:w,type:"rotateLeft"}],F=m.createElement(m.Fragment,null,u&&m.createElement(m.Fragment,null,m.createElement("div",{className:Ee("".concat(o,"-switch-left"),z({},"".concat(o,"-switch-left-disabled"),h===0)),onClick:p},D),m.createElement("div",{className:Ee("".concat(o,"-switch-right"),z({},"".concat(o,"-switch-right-disabled"),h===f-1)),onClick:v},O)),m.createElement("ul",{className:"".concat(o,"-operations")},d&&m.createElement("li",{className:"".concat(o,"-operations-progress")},(t=c==null?void 0:c(h+1,f))!==null&&t!==void 0?t:"".concat(h+1," / ").concat(f)),V.map(function(T){var N,B=T.icon,$=T.onClick,j=T.type,Y=T.disabled;return m.createElement("li",{className:Ee(A,(N={},z(N,"".concat(o,"-operations-operation-").concat(j),!0),z(N,"".concat(o,"-operations-operation-disabled"),!!Y),N)),onClick:$,key:j},m.isValidElement(B)?m.cloneElement(B,{className:R}):B)})));return m.createElement(yc,{visible:i,motionName:r},function(T){var N=T.className,B=T.style;return m.createElement(Lse,{open:!0,getContainer:s??document.body},m.createElement("div",{className:Ee("".concat(o,"-operations-wrapper"),N,a),style:B},F))})},QU={x:0,y:0,rotate:0,scale:1};function kLe(n){var e=m.useRef(null),t=m.useRef([]),i=m.useState(QU),r=Ce(i,2),s=r[0],o=r[1],a=function(){o(QU)},l=function(d){e.current===null&&(t.current=[],e.current=On(function(){o(function(h){var f=h;return t.current.forEach(function(g){f=ne(ne({},f),g)}),e.current=null,f})})),t.current.push(ne(ne({},s),d))},c=function(d,h,f){var g=n.current,p=g.width,v=g.height,b=g.offsetWidth,_=g.offsetHeight,y=g.offsetLeft,C=g.offsetTop,w=d,x=s.scale*d;x>eE?(w=eE/s.scale,x=eE):x<Jk&&(w=Jk/s.scale,x=Jk);var k=h??innerWidth/2,E=f??innerHeight/2,L=w-1,M=L*p*.5,D=L*v*.5,O=L*(k-s.x-y),A=L*(E-s.y-C),R=s.x-(O-M),V=s.y-(A-D);if(d<1&&x===1){var F=b*x,T=_*x,N=Tse(),B=N.width,$=N.height;F<=B&&T<=$&&(R=0,V=0)}l({x:R,y:V,scale:x})};return{transform:s,resetTransform:a,updateTransform:l,dispatchZoonChange:c}}function JU(n,e,t,i){var r=e+t,s=(t-i)/2;if(t>i){if(e>0)return z({},n,s);if(e<0&&r<i)return z({},n,-s)}else if(e<0||r>i)return z({},n,e<0?s:-s);return{}}function ELe(n,e,t,i){var r=Tse(),s=r.width,o=r.height,a=null;return n<=s&&e<=o?a={x:0,y:0}:(n>s||e>o)&&(a=ne(ne({},JU("x",t,n,s)),JU("y",i,e,o))),a}var LLe=["prefixCls","src","alt","onClose","afterClose","visible","icons","rootClassName","getContainer","countRender","scaleStep","transitionName","maskTransitionName"],Dse=function(e){var t=e.prefixCls,i=e.src,r=e.alt,s=e.onClose;e.afterClose;var o=e.visible,a=e.icons,l=a===void 0?{}:a,c=e.rootClassName,u=e.getContainer,d=e.countRender,h=e.scaleStep,f=h===void 0?.5:h,g=e.transitionName,p=g===void 0?"zoom":g,v=e.maskTransitionName,b=v===void 0?"fade":v,_=sn(e,LLe),y=m.useRef(),C=m.useRef({deltaX:0,deltaY:0,transformX:0,transformY:0}),w=m.useState(!1),x=Ce(w,2),k=x[0],E=x[1],L=m.useContext(jF),M=L.previewUrls,D=L.current,O=L.isPreviewGroup,A=L.setCurrent,R=M.size,V=Array.from(M.keys()),F=V.indexOf(D),T=O?M.get(D):i,N=O&&R>1,B=O&&R>=1,$=kLe(y),j=$.transform,Y=$.resetTransform,G=$.updateTransform,X=$.dispatchZoonChange,q=j.rotate,re=j.scale,ge=Ee(z({},"".concat(t,"-moving"),k)),ye=function(){Y()},we=function(){X(zb+f)},Ie=function(){X(zb-f)},Fe=function(){G({rotate:q+90})},ze=function(){G({rotate:q-90})},Me=function(xe){xe.preventDefault(),xe.stopPropagation(),F>0&&A(V[F-1])},Pe=function(xe){xe.preventDefault(),xe.stopPropagation(),F<R-1&&A(V[F+1])},tt=function(){if(o&&k){E(!1);var xe=C.current,at=xe.transformX,gt=xe.transformY,Ct=j.x!==at&&j.y!==gt;if(!Ct)return;var nt=y.current.offsetWidth*re,se=y.current.offsetHeight*re,fe=y.current.getBoundingClientRect(),Ne=fe.left,Ve=fe.top,lt=q%180!==0,Dt=ELe(lt?se:nt,lt?nt:se,Ne,Ve);Dt&&G(ne({},Dt))}},Ae=function(xe){xe.button===0&&(xe.preventDefault(),xe.stopPropagation(),C.current={deltaX:xe.pageX-j.x,deltaY:xe.pageY-j.y,transformX:j.x,transformY:j.y},E(!0))},mt=function(xe){o&&k&&G({x:xe.pageX-C.current.deltaX,y:xe.pageY-C.current.deltaY})},ft=function(xe){if(!(!o||xe.deltaY==0)){var at=Math.abs(xe.deltaY/100),gt=Math.min(at,SLe),Ct=zb+gt*f;xe.deltaY>0&&(Ct=zb/Ct),X(Ct,xe.clientX,xe.clientY)}},Le=m.useCallback(function(Oe){!o||!N||(Oe.keyCode===je.LEFT?F>0&&A(V[F-1]):Oe.keyCode===je.RIGHT&&F<R-1&&A(V[F+1]))},[F,R,V,A,N,o]),Ge=function(xe){o&&(re!==1?G({x:0,y:0,scale:1}):X(zb+f,xe.clientX,xe.clientY))};return m.useEffect(function(){var Oe,xe,at=Ql(window,"mouseup",tt,!1),gt=Ql(window,"mousemove",mt,!1),Ct=Ql(window,"keydown",Le,!1);try{window.top!==window.self&&(Oe=Ql(window.top,"mouseup",tt,!1),xe=Ql(window.top,"mousemove",mt,!1))}catch{}return function(){var nt,se;at.remove(),gt.remove(),Ct.remove(),(nt=Oe)===null||nt===void 0||nt.remove(),(se=xe)===null||se===void 0||se.remove()}},[o,k,Le]),Ue.createElement(Ue.Fragment,null,Ue.createElement(UF,J({transitionName:p,maskTransitionName:b,closable:!1,keyboard:!0,prefixCls:t,onClose:s,afterClose:ye,visible:o,wrapClassName:ge,rootClassName:c,getContainer:u},_),Ue.createElement("div",{className:"".concat(t,"-img-wrapper")},Ue.createElement("img",{width:e.width,height:e.height,onWheel:ft,onMouseDown:Ae,onDoubleClick:Ge,ref:y,className:"".concat(t,"-img"),src:T,alt:r,style:{transform:"translate3d(".concat(j.x,"px, ").concat(j.y,"px, 0) scale3d(").concat(re,", ").concat(re,", 1) rotate(").concat(q,"deg)")}}))),Ue.createElement(xLe,{visible:o,maskTransitionName:b,getContainer:u,prefixCls:t,rootClassName:c,icons:l,countRender:d,showSwitch:N,showProgress:B,current:F,count:R,scale:re,onSwitchLeft:Me,onSwitchRight:Pe,onZoomIn:we,onZoomOut:Ie,onRotateRight:Fe,onRotateLeft:ze,onClose:s}))},NLe=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName","crossOrigin","decoding","loading","referrerPolicy","sizes","srcSet","useMap","draggable"],TLe=["src","visible","onVisibleChange","getContainer","mask","maskClassName","icons","scaleStep"],ej=0,XI=function(e){var t,i=e.src,r=e.alt,s=e.onPreviewClose,o=e.prefixCls,a=o===void 0?"rc-image":o,l=e.previewPrefixCls,c=l===void 0?"".concat(a,"-preview"):l,u=e.placeholder,d=e.fallback,h=e.width,f=e.height,g=e.style,p=e.preview,v=p===void 0?!0:p,b=e.className,_=e.onClick,y=e.onError,C=e.wrapperClassName,w=e.wrapperStyle,x=e.rootClassName,k=e.crossOrigin,E=e.decoding,L=e.loading,M=e.referrerPolicy,D=e.sizes,O=e.srcSet,A=e.useMap,R=e.draggable,V=sn(e,NLe),F=u&&u!==!0,T=Rt(v)==="object"?v:{},N=T.src,B=T.visible,$=B===void 0?void 0:B,j=T.onVisibleChange,Y=j===void 0?s:j,G=T.getContainer,X=G===void 0?void 0:G,q=T.mask,re=T.maskClassName,ge=T.icons,ye=T.scaleStep,we=sn(T,TLe),Ie=N??i,Fe=$!==void 0,ze=Ps(!!$,{value:$,onChange:Y}),Me=Ce(ze,2),Pe=Me[0],tt=Me[1],Ae=m.useState(F?"loading":"normal"),mt=Ce(Ae,2),ft=mt[0],Le=mt[1],Ge=m.useState(null),Oe=Ce(Ge,2),xe=Oe[0],at=Oe[1],gt=ft==="error",Ct=m.useContext(jF),nt=Ct.isPreviewGroup,se=Ct.setCurrent,fe=Ct.setShowPreview,Ne=Ct.setMousePosition,Ve=Ct.registerImage,lt=m.useState(function(){return ej+=1,ej}),Dt=Ce(lt,1),Qt=Dt[0],he=!!v,Ke=m.useRef(!1),ue=function(){Le("normal")},ee=function(St){y&&y(St),Le("error")},oe=function(St){if(!Fe){var Lt=hLe(St.target),be=Lt.left,H=Lt.top;nt?(se(Qt),Ne({x:be,y:H})):at({x:be,y:H})}nt?fe(!0):tt(!0),_&&_(St)},pe=function(St){St.stopPropagation(),tt(!1),Fe||at(null)},le=function(St){Ke.current=!1,ft==="loading"&&St!=null&&St.complete&&(St.naturalWidth||St.naturalHeight)&&(Ke.current=!0,ue())};m.useEffect(function(){var ut=Ve(Qt,Ie);return ut},[]),m.useEffect(function(){Ve(Qt,Ie,he)},[Ie,he]),m.useEffect(function(){gt&&Le("normal"),F&&!Ke.current&&Le("loading")},[i]);var ve=Ee(a,C,x,z({},"".concat(a,"-error"),gt)),He=gt&&d?d:Ie,Qe={crossOrigin:k,decoding:E,draggable:R,loading:L,referrerPolicy:M,sizes:D,srcSet:O,useMap:A,alt:r,className:Ee("".concat(a,"-img"),z({},"".concat(a,"-img-placeholder"),u===!0),b),style:ne({height:f},g)};return m.createElement(m.Fragment,null,m.createElement("div",J({},V,{className:ve,onClick:he?oe:_,style:ne({width:h,height:f},w)}),m.createElement("img",J({},Qe,{ref:le},gt&&d?{src:d}:{onLoad:ue,onError:ee,src:i},{width:h,height:f})),ft==="loading"&&m.createElement("div",{"aria-hidden":"true",className:"".concat(a,"-placeholder")},u),q&&he&&m.createElement("div",{className:Ee("".concat(a,"-mask"),re),style:{display:((t=Qe.style)===null||t===void 0?void 0:t.display)==="none"?"none":void 0}},q)),!nt&&he&&m.createElement(Dse,J({"aria-hidden":!Pe,visible:Pe,prefixCls:c,onClose:pe,mousePosition:xe,src:He,alt:r,getContainer:X,icons:ge,scaleStep:ye,rootClassName:x},we)))};XI.PreviewGroup=wLe;XI.displayName="Image";var ILe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},DLe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:ILe}))},MLe=m.forwardRef(DLe),RLe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},ALe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:RLe}))},OLe=m.forwardRef(ALe),PLe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},FLe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:PLe}))},BLe=m.forwardRef(FLe),HLe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},VLe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:HLe}))},zLe=m.forwardRef(VLe),WLe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},Mse={rotateLeft:m.createElement(MLe,null),rotateRight:m.createElement(OLe,null),zoomIn:m.createElement(BLe,null),zoomOut:m.createElement(zLe,null),close:m.createElement(J1,null),left:m.createElement(yEe,null),right:m.createElement(cse,null)},$Le=function(e){var t=e.previewPrefixCls,i=e.preview,r=WLe(e,["previewPrefixCls","preview"]),s=m.useContext(Bn),o=s.getPrefixCls,a=o("image-preview",t),l=o(),c=m.useMemo(function(){if(i===!1)return i;var u=Rt(i)==="object"?i:{};return J(J({},u),{transitionName:_l(l,"zoom",u.transitionName),maskTransitionName:_l(l,"fade",u.maskTransitionName)})},[i]);return m.createElement(XI.PreviewGroup,J({preview:c,previewPrefixCls:a,icons:Mse},r))},tj=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},R3=function(e){var t=e.prefixCls,i=e.preview,r=tj(e,["prefixCls","preview"]),s=m.useContext(Bn),o=s.getPrefixCls,a=s.locale,l=a===void 0?yf:a,c=s.getPopupContainer,u=o("image",t),d=o(),h=l.Image||yf.Image,f=m.useMemo(function(){if(i===!1)return i;var g=Rt(i)==="object"?i:{},p=g.getContainer,v=tj(g,["getContainer"]);return J(J({mask:m.createElement("div",{className:"".concat(u,"-mask-info")},m.createElement(Nse,null),h==null?void 0:h.preview),icons:Mse},v),{getContainer:p||c,transitionName:_l(d,"zoom",g.transitionName),maskTransitionName:_l(d,"fade",g.maskTransitionName)})},[i,h]);return m.createElement(XI,J({prefixCls:u,preview:f},r))};R3.PreviewGroup=$Le;var ULe=function(e){var t=m.useContext(Bn),i=t.getPrefixCls,r=t.direction,s=e.prefixCls,o=e.className,a=o===void 0?"":o,l=i("input-group",s),c=Ee(l,z(z(z(z({},"".concat(l,"-lg"),e.size==="large"),"".concat(l,"-sm"),e.size==="small"),"".concat(l,"-compact"),e.compact),"".concat(l,"-rtl"),r==="rtl"),a),u=m.useContext(Fd),d=m.useMemo(function(){return J(J({},u),{isFormItemInput:!1})},[u]);return m.createElement("span",{className:c,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},m.createElement(Fd.Provider,{value:d},e.children))};function tE(n){return!!(n.addonBefore||n.addonAfter)}function Rse(n){return!!(n.prefix||n.suffix||n.allowClear)}function nj(n,e,t,i){if(t){var r=e;if(e.type==="click"){var s=n.cloneNode(!0);r=Object.create(e,{target:{value:s},currentTarget:{value:s}}),s.value="",t(r);return}t(r)}}function jLe(n,e){if(n){n.focus(e);var t=e||{},i=t.cursor;if(i){var r=n.value.length;switch(i){case"start":n.setSelectionRange(0,0);break;case"end":n.setSelectionRange(r,r);break;default:n.setSelectionRange(0,r)}}}}function ij(n){return typeof n>"u"||n===null?"":String(n)}var KLe=function(e){var t=e.inputElement,i=e.prefixCls,r=e.prefix,s=e.suffix,o=e.addonBefore,a=e.addonAfter,l=e.className,c=e.style,u=e.affixWrapperClassName,d=e.groupClassName,h=e.wrapperClassName,f=e.disabled,g=e.readOnly,p=e.focused,v=e.triggerFocus,b=e.allowClear,_=e.value,y=e.handleReset,C=e.hidden,w=m.useRef(null),x=function(N){var B;(B=w.current)!==null&&B!==void 0&&B.contains(N.target)&&(v==null||v())},k=function(){var N;if(!b)return null;var B=!f&&!g&&_,$="".concat(i,"-clear-icon"),j=Rt(b)==="object"&&b!==null&&b!==void 0&&b.clearIcon?b.clearIcon:"";return Ue.createElement("span",{onClick:y,onMouseDown:function(G){return G.preventDefault()},className:Ee($,(N={},z(N,"".concat($,"-hidden"),!B),z(N,"".concat($,"-has-suffix"),!!s),N)),role:"button",tabIndex:-1},j)},E=m.cloneElement(t,{value:_,hidden:C});if(Rse(e)){var L,M="".concat(i,"-affix-wrapper"),D=Ee(M,(L={},z(L,"".concat(M,"-disabled"),f),z(L,"".concat(M,"-focused"),p),z(L,"".concat(M,"-readonly"),g),z(L,"".concat(M,"-input-with-clear-btn"),s&&b&&_),L),!tE(e)&&l,u),O=(s||b)&&Ue.createElement("span",{className:"".concat(i,"-suffix")},k(),s);E=Ue.createElement("span",{className:D,style:c,hidden:!tE(e)&&C,onClick:x,ref:w},r&&Ue.createElement("span",{className:"".concat(i,"-prefix")},r),m.cloneElement(t,{style:null,value:_,hidden:null}),O)}if(tE(e)){var A="".concat(i,"-group"),R="".concat(A,"-addon"),V=Ee("".concat(i,"-wrapper"),A,h),F=Ee("".concat(i,"-group-wrapper"),l,d);return Ue.createElement("span",{className:F,style:c,hidden:C},Ue.createElement("span",{className:V},o&&Ue.createElement("span",{className:R},o),m.cloneElement(E,{style:null,hidden:null}),a&&Ue.createElement("span",{className:R},a)))}return E},qLe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","inputClassName"],GLe=m.forwardRef(function(n,e){var t=n.autoComplete,i=n.onChange,r=n.onFocus,s=n.onBlur,o=n.onPressEnter,a=n.onKeyDown,l=n.prefixCls,c=l===void 0?"rc-input":l,u=n.disabled,d=n.htmlSize,h=n.className,f=n.maxLength,g=n.suffix,p=n.showCount,v=n.type,b=v===void 0?"text":v,_=n.inputClassName,y=sn(n,qLe),C=Ps(n.defaultValue,{value:n.value}),w=Ce(C,2),x=w[0],k=w[1],E=m.useState(!1),L=Ce(E,2),M=L[0],D=L[1],O=m.useRef(null),A=function(Y){O.current&&jLe(O.current,Y)};m.useImperativeHandle(e,function(){return{focus:A,blur:function(){var Y;(Y=O.current)===null||Y===void 0||Y.blur()},setSelectionRange:function(Y,G,X){var q;(q=O.current)===null||q===void 0||q.setSelectionRange(Y,G,X)},select:function(){var Y;(Y=O.current)===null||Y===void 0||Y.select()},input:O.current}}),m.useEffect(function(){D(function(j){return j&&u?!1:j})},[u]);var R=function(Y){n.value===void 0&&k(Y.target.value),O.current&&nj(O.current,Y,i)},V=function(Y){o&&Y.key==="Enter"&&o(Y),a==null||a(Y)},F=function(Y){D(!0),r==null||r(Y)},T=function(Y){D(!1),s==null||s(Y)},N=function(Y){k(""),A(),O.current&&nj(O.current,Y,i)},B=function(){var Y=fo(n,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","affixWrapperClassName","groupClassName","inputClassName","wrapperClassName","htmlSize"]);return Ue.createElement("input",J({autoComplete:t},Y,{onChange:R,onFocus:F,onBlur:T,onKeyDown:V,className:Ee(c,z({},"".concat(c,"-disabled"),u),_,!tE(n)&&!Rse(n)&&h),ref:O,size:d,type:b}))},$=function(){var Y=Number(f)>0;if(g||p){var G=ij(x),X=Et(G).length,q=Rt(p)==="object"?p.formatter({value:G,count:X,maxLength:f}):"".concat(X).concat(Y?" / ".concat(f):"");return Ue.createElement(Ue.Fragment,null,!!p&&Ue.createElement("span",{className:Ee("".concat(c,"-show-count-suffix"),z({},"".concat(c,"-show-count-has-suffix"),!!g))},q),g)}return null};return Ue.createElement(KLe,J({},y,{prefixCls:c,className:h,inputElement:B(),handleReset:N,value:ij(x),focused:M,triggerFocus:A,suffix:$(),disabled:u}))});function Ase(n,e){var t=m.useRef([]),i=function(){t.current.push(setTimeout(function(){var s,o,a,l;!((s=n.current)===null||s===void 0)&&s.input&&((o=n.current)===null||o===void 0?void 0:o.input.getAttribute("type"))==="password"&&(!((a=n.current)===null||a===void 0)&&a.input.hasAttribute("value"))&&((l=n.current)===null||l===void 0||l.input.removeAttribute("value"))}))};return m.useEffect(function(){return e&&i(),function(){return t.current.forEach(function(r){r&&clearTimeout(r)})}},[]),i}function YLe(n){return!!(n.prefix||n.suffix||n.allowClear)}var ZLe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function XLe(n){return typeof n>"u"||n===null?"":String(n)}function N4(n,e,t,i){if(t){var r=e;if(e.type==="click"){var s=n.cloneNode(!0);r=Object.create(e,{target:{value:s},currentTarget:{value:s}}),s.value="",t(r);return}if(i!==void 0){r=Object.create(e,{target:{value:n},currentTarget:{value:n}}),n.value=i,t(r);return}t(r)}}function QLe(n,e){if(n){n.focus(e);var t=e||{},i=t.cursor;if(i){var r=n.value.length;switch(i){case"start":n.setSelectionRange(0,0);break;case"end":n.setSelectionRange(r,r);break;default:n.setSelectionRange(0,r);break}}}}var KF=m.forwardRef(function(n,e){var t=n.prefixCls,i=n.bordered,r=i===void 0?!0:i,s=n.status,o=n.size,a=n.disabled,l=n.onBlur,c=n.onFocus,u=n.suffix,d=n.allowClear,h=n.addonAfter,f=n.addonBefore,g=n.className,p=n.onChange,v=ZLe(n,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","onChange"]),b=Ue.useContext(Bn),_=b.getPrefixCls,y=b.direction,C=b.input,w=_("input",t),x=m.useRef(null),k=tb(w,y),E=k.compactSize,L=k.compactItemClassnames,M=Ue.useContext(hc),D=E||o||M,O=Ue.useContext(Hp),A=a??O,R=m.useContext(Fd),V=R.status,F=R.hasFeedback,T=R.feedbackIcon,N=Yw(V,s),B=YLe(n)||!!F,$=m.useRef(B);m.useEffect(function(){B&&$.current,$.current=B},[B]);var j=Ase(x,!0),Y=function(ye){j(),l==null||l(ye)},G=function(ye){j(),c==null||c(ye)},X=function(ye){j(),p==null||p(ye)},q=(F||u)&&Ue.createElement(Ue.Fragment,null,u,F&&T),re;return Rt(d)==="object"&&(d!=null&&d.clearIcon)?re=d:d&&(re={clearIcon:Ue.createElement(Uw,null)}),Ue.createElement(GLe,J({ref:jd(e,x),prefixCls:w,autoComplete:C==null?void 0:C.autoComplete},v,{disabled:A||void 0,onBlur:Y,onFocus:G,suffix:q,allowClear:re,className:Ee(g,L),onChange:X,addonAfter:h&&Ue.createElement(u1,null,Ue.createElement(Ey,{override:!0,status:!0},h)),addonBefore:f&&Ue.createElement(u1,null,Ue.createElement(Ey,{override:!0,status:!0},f)),inputClassName:Ee(z(z(z(z({},"".concat(w,"-sm"),D==="small"),"".concat(w,"-lg"),D==="large"),"".concat(w,"-rtl"),y==="rtl"),"".concat(w,"-borderless"),!r),!B&&cu(w,N)),affixWrapperClassName:Ee(z(z(z(z({},"".concat(w,"-affix-wrapper-sm"),D==="small"),"".concat(w,"-affix-wrapper-lg"),D==="large"),"".concat(w,"-affix-wrapper-rtl"),y==="rtl"),"".concat(w,"-affix-wrapper-borderless"),!r),cu("".concat(w,"-affix-wrapper"),N,F)),wrapperClassName:Ee(z({},"".concat(w,"-group-rtl"),y==="rtl")),groupClassName:Ee(z(z(z({},"".concat(w,"-group-wrapper-sm"),D==="small"),"".concat(w,"-group-wrapper-lg"),D==="large"),"".concat(w,"-group-wrapper-rtl"),y==="rtl"),cu("".concat(w,"-group-wrapper"),N,F))}))}),JLe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},eNe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:JLe}))},tNe=m.forwardRef(eNe),nNe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},iNe=function(e){return e?m.createElement(Nse,null):m.createElement(tNe,null)},rNe={click:"onClick",hover:"onMouseOver"},sNe=m.forwardRef(function(n,e){var t=n.visibilityToggle,i=t===void 0?!0:t,r=Rt(i)==="object"&&i.visible!==void 0,s=m.useState(function(){return r?i.visible:!1}),o=Ce(s,2),a=o[0],l=o[1],c=m.useRef(null);m.useEffect(function(){r&&l(i.visible)},[r,i]);var u=Ase(c),d=function(){var p=n.disabled;p||(a&&u(),l(function(v){var b,_=!v;return Rt(i)==="object"&&((b=i.onVisibleChange)===null||b===void 0||b.call(i,_)),_}))},h=function(p){var v=n.action,b=v===void 0?"click":v,_=n.iconRender,y=_===void 0?iNe:_,C=rNe[b]||"",w=y(a),x=z(z(z(z(z({},C,d),"className","".concat(p,"-icon")),"key","passwordIcon"),"onMouseDown",function(E){E.preventDefault()}),"onMouseUp",function(E){E.preventDefault()});return m.cloneElement(m.isValidElement(w)?w:m.createElement("span",null,w),x)},f=function(p){var v=p.getPrefixCls,b=n.className,_=n.prefixCls,y=n.inputPrefixCls,C=n.size,w=nNe(n,["className","prefixCls","inputPrefixCls","size"]),x=v("input",y),k=v("input-password",_),E=i&&h(k),L=Ee(k,b,z({},"".concat(k,"-").concat(C),!!C)),M=J(J({},fo(w,["suffix","iconRender","visibilityToggle"])),{type:a?"text":"password",className:L,prefixCls:x,suffix:E});return C&&(M.size=C),m.createElement(KF,J({ref:jd(e,c)},M))};return m.createElement(Hf,null,f)}),oNe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},aNe=m.forwardRef(function(n,e){var t=n.prefixCls,i=n.inputPrefixCls,r=n.className,s=n.size,o=n.suffix,a=n.enterButton,l=a===void 0?!1:a,c=n.addonAfter,u=n.loading,d=n.disabled,h=n.onSearch,f=n.onChange,g=n.onCompositionStart,p=n.onCompositionEnd,v=oNe(n,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),b=m.useContext(Bn),_=b.getPrefixCls,y=b.direction,C=m.useContext(hc),w=m.useRef(!1),x=_("input-search",t),k=_("input",i),E=tb(x,y),L=E.compactSize,M=L||s||C,D=m.useRef(null),O=function(q){q&&q.target&&q.type==="click"&&h&&h(q.target.value,q),f&&f(q)},A=function(q){var re;document.activeElement===((re=D.current)===null||re===void 0?void 0:re.input)&&q.preventDefault()},R=function(q){var re,ge;h&&h((ge=(re=D.current)===null||re===void 0?void 0:re.input)===null||ge===void 0?void 0:ge.value,q)},V=function(q){w.current||u||R(q)},F=typeof l=="boolean"?m.createElement(Ure,null):null,T="".concat(x,"-button"),N,B=l||{},$=B.type&&B.type.__ANT_BUTTON===!0;$||B.type==="button"?N=Io(B,J({onMouseDown:A,onClick:function(q){var re,ge;(ge=(re=B==null?void 0:B.props)===null||re===void 0?void 0:re.onClick)===null||ge===void 0||ge.call(re,q),R(q)},key:"enterButton"},$?{className:T,size:M}:{})):N=m.createElement(bi,{className:T,type:l?"primary":void 0,size:M,disabled:d,key:"enterButton",onMouseDown:A,onClick:R,loading:u,icon:F},l),c&&(N=[N,Io(c,{key:"addonAfter"})]);var j=Ee(x,z(z(z({},"".concat(x,"-rtl"),y==="rtl"),"".concat(x,"-").concat(M),!!M),"".concat(x,"-with-button"),!!l),r),Y=function(q){w.current=!0,g==null||g(q)},G=function(q){w.current=!1,p==null||p(q)};return m.createElement(KF,J({ref:jd(D,e),onPressEnter:V},v,{size:M,onCompositionStart:Y,onCompositionEnd:G,prefixCls:k,addonAfter:N,suffix:o,onChange:O,className:j,disabled:d}))}),lNe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,cNe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],T4={},Ka;function uNe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=n.getAttribute("id")||n.getAttribute("data-reactid")||n.getAttribute("name");if(e&&T4[t])return T4[t];var i=window.getComputedStyle(n),r=i.getPropertyValue("box-sizing")||i.getPropertyValue("-moz-box-sizing")||i.getPropertyValue("-webkit-box-sizing"),s=parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("padding-top")),o=parseFloat(i.getPropertyValue("border-bottom-width"))+parseFloat(i.getPropertyValue("border-top-width")),a=cNe.map(function(c){return"".concat(c,":").concat(i.getPropertyValue(c))}).join(";"),l={sizingStyle:a,paddingSize:s,borderSize:o,boxSizing:r};return e&&t&&(T4[t]=l),l}function dNe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Ka||(Ka=document.createElement("textarea"),Ka.setAttribute("tab-index","-1"),Ka.setAttribute("aria-hidden","true"),document.body.appendChild(Ka)),n.getAttribute("wrap")?Ka.setAttribute("wrap",n.getAttribute("wrap")):Ka.removeAttribute("wrap");var r=uNe(n,e),s=r.paddingSize,o=r.borderSize,a=r.boxSizing,l=r.sizingStyle;Ka.setAttribute("style","".concat(l,";").concat(lNe)),Ka.value=n.value||n.placeholder||"";var c=void 0,u=void 0,d,h=Ka.scrollHeight;if(a==="border-box"?h+=o:a==="content-box"&&(h-=s),t!==null||i!==null){Ka.value=" ";var f=Ka.scrollHeight-s;t!==null&&(c=f*t,a==="border-box"&&(c=c+s+o),h=Math.max(c,h)),i!==null&&(u=f*i,a==="border-box"&&(u=u+s+o),d=h>u?"":"hidden",h=Math.min(u,h))}var g={height:h,overflowY:d,resize:"none"};return c&&(g.minHeight=c),u&&(g.maxHeight=u),g}var hNe=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],I4=0,D4=1,M4=2,fNe=m.forwardRef(function(n,e){var t=n.prefixCls,i=t===void 0?"rc-textarea":t;n.onPressEnter;var r=n.defaultValue,s=n.value,o=n.autoSize,a=n.onResize,l=n.className,c=n.style,u=n.disabled,d=n.onChange;n.onInternalAutoSize;var h=sn(n,hNe),f=Ps(r,{value:s,postState:function(X){return X??""}}),g=Ce(f,2),p=g[0],v=g[1],b=function(X){v(X.target.value),d==null||d(X)},_=m.useRef();m.useImperativeHandle(e,function(){return{textArea:_.current}});var y=m.useMemo(function(){return o&&Rt(o)==="object"?[o.minRows,o.maxRows]:[]},[o]),C=Ce(y,2),w=C[0],x=C[1],k=!!o,E=function(){try{if(document.activeElement===_.current){var X=_.current,q=X.selectionStart,re=X.selectionEnd,ge=X.scrollTop;_.current.setSelectionRange(q,re),_.current.scrollTop=ge}}catch{}},L=m.useState(M4),M=Ce(L,2),D=M[0],O=M[1],A=m.useState(),R=Ce(A,2),V=R[0],F=R[1],T=function(){O(I4)};oo(function(){k&&T()},[s,w,x,k]),oo(function(){if(D===I4)O(D4);else if(D===D4){var G=dNe(_.current,!1,w,x);O(M4),F(G)}else E()},[D]);var N=m.useRef(),B=function(){On.cancel(N.current)},$=function(X){D===M4&&(a==null||a(X),o&&(B(),N.current=On(function(){T()})))};m.useEffect(function(){return B},[]);var j=k?V:null,Y=ne(ne({},c),j);return(D===I4||D===D4)&&(Y.overflowY="hidden",Y.overflowX="hidden"),m.createElement(Cf,{onResize:$,disabled:!(o||a)},m.createElement("textarea",J({},h,{ref:_,style:Y,className:Ee(i,l,z({},"".concat(i,"-disabled"),u)),disabled:u,value:p,onChange:b})))}),gNe=function(n){Va(t,n);var e=Kd(t);function t(i){var r;ys(this,t),r=e.call(this,i),r.resizableTextArea=void 0,r.focus=function(){r.resizableTextArea.textArea.focus()},r.saveTextArea=function(o){r.resizableTextArea=o},r.handleChange=function(o){var a=r.props.onChange;r.setValue(o.target.value),a&&a(o)},r.handleKeyDown=function(o){var a=r.props,l=a.onPressEnter,c=a.onKeyDown;o.keyCode===13&&l&&l(o),c&&c(o)};var s=typeof i.value>"u"||i.value===null?i.defaultValue:i.value;return r.state={value:s},r}return ws(t,[{key:"setValue",value:function(r,s){"value"in this.props||this.setState({value:r},s)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return m.createElement(fNe,J({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(r){return"value"in r?{value:r.value}:null}}]),t}(m.Component);function pNe(n,e,t){return e=vl(e),zw(n,Z1()?Reflect.construct(e,t||[],vl(n).constructor):e.apply(n,t))}var mNe=wc("text","input");function vNe(n){return!!(n.addonBefore||n.addonAfter)}var bNe=function(n){Va(e,n);function e(){return ys(this,e),pNe(this,e,arguments)}return ws(e,[{key:"renderClearIcon",value:function(i){var r=this.props,s=r.value,o=r.disabled,a=r.readOnly,l=r.handleReset,c=r.suffix,u=!o&&!a&&s,d="".concat(i,"-clear-icon");return m.createElement(Uw,{onClick:l,onMouseDown:function(f){return f.preventDefault()},className:Ee(z(z({},"".concat(d,"-hidden"),!u),"".concat(d,"-has-suffix"),!!c),d),role:"button"})}},{key:"renderTextAreaWithClearIcon",value:function(i,r,s){var o=this.props,a=o.value,l=o.allowClear,c=o.className,u=o.focused,d=o.style,h=o.direction,f=o.bordered,g=o.hidden,p=o.status,v=s.status,b=s.hasFeedback;if(!l)return Io(r,{value:a});var _=Ee("".concat(i,"-affix-wrapper"),"".concat(i,"-affix-wrapper-textarea-with-clear-btn"),cu("".concat(i,"-affix-wrapper"),Yw(v,p),b),z(z(z(z({},"".concat(i,"-affix-wrapper-focused"),u),"".concat(i,"-affix-wrapper-rtl"),h==="rtl"),"".concat(i,"-affix-wrapper-borderless"),!f),"".concat(c),!vNe(this.props)&&c));return m.createElement("span",{className:_,style:d,hidden:g},Io(r,{style:null,value:a}),this.renderClearIcon(i))}},{key:"render",value:function(){var i=this;return m.createElement(Fd.Consumer,null,function(r){var s=i.props,o=s.prefixCls,a=s.inputType,l=s.element;if(a===mNe[0])return i.renderTextAreaWithClearIcon(o,l,r)})}}]),e}(m.Component),_Ne=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function Ose(n,e){return Et(n||"").slice(0,e).join("")}function rj(n,e,t,i){var r=t;return n?r=Ose(t,i):Et(e||"").length<t.length&&Et(t||"").length>i&&(r=e),r}var CNe=m.forwardRef(function(n,e){var t=n.prefixCls,i=n.bordered,r=i===void 0?!0:i,s=n.showCount,o=s===void 0?!1:s,a=n.maxLength,l=n.className,c=n.style,u=n.size,d=n.disabled,h=n.onCompositionStart,f=n.onCompositionEnd,g=n.onChange,p=n.onFocus,v=n.onBlur,b=n.status,_=_Ne(n,["prefixCls","bordered","showCount","maxLength","className","style","size","disabled","onCompositionStart","onCompositionEnd","onChange","onFocus","onBlur","status"]),y=m.useContext(Bn),C=y.getPrefixCls,w=y.direction,x=m.useContext(hc),k=m.useContext(Hp),E=d??k,L=m.useContext(Fd),M=L.status,D=L.hasFeedback,O=L.isFormItemInput,A=L.feedbackIcon,R=Yw(M,b),V=m.useRef(null),F=m.useRef(null),T=m.useState(!1),N=Ce(T,2),B=N[0],$=N[1],j=m.useState(!1),Y=Ce(j,2),G=Y[0],X=Y[1],q=m.useRef(),re=m.useRef(0),ge=Ps(_.defaultValue,{value:_.value}),ye=Ce(ge,2),we=ye[0],Ie=ye[1],Fe=_.hidden,ze=function(se,fe){_.value===void 0&&Ie(se)},Me=Number(a)>0,Pe=function(se){$(!0),q.current=we,re.current=se.currentTarget.selectionStart,h==null||h(se)},tt=function(se){var fe;$(!1);var Ne=se.currentTarget.value;if(Me){var Ve=re.current>=a+1||re.current===((fe=q.current)===null||fe===void 0?void 0:fe.length);Ne=rj(Ve,q.current,Ne,a)}Ne!==we&&(ze(Ne),N4(se.currentTarget,se,g,Ne)),f==null||f(se)},Ae=function(se){var fe=se.target.value;if(!B&&Me){var Ne=se.target.selectionStart>=a+1||se.target.selectionStart===fe.length||!se.target.selectionStart;fe=rj(Ne,we,fe,a)}ze(fe),N4(se.currentTarget,se,g,fe)},mt=function(se){X(!1),v==null||v(se)},ft=function(se){X(!0),p==null||p(se)};m.useEffect(function(){X(function(nt){return!E&&nt})},[E]);var Le=function(se){var fe,Ne,Ve;ze(""),(fe=V.current)===null||fe===void 0||fe.focus(),N4((Ve=(Ne=V.current)===null||Ne===void 0?void 0:Ne.resizableTextArea)===null||Ve===void 0?void 0:Ve.textArea,se,g)},Ge=C("input",t);m.useImperativeHandle(e,function(){var nt;return{resizableTextArea:(nt=V.current)===null||nt===void 0?void 0:nt.resizableTextArea,focus:function(fe){var Ne,Ve;QLe((Ve=(Ne=V.current)===null||Ne===void 0?void 0:Ne.resizableTextArea)===null||Ve===void 0?void 0:Ve.textArea,fe)},blur:function(){var fe;return(fe=V.current)===null||fe===void 0?void 0:fe.blur()}}});var Oe=m.createElement(gNe,J({},fo(_,["allowClear"]),{disabled:E,className:Ee(z(z(z(z({},"".concat(Ge,"-borderless"),!r),l,l&&!o),"".concat(Ge,"-sm"),x==="small"||u==="small"),"".concat(Ge,"-lg"),x==="large"||u==="large"),cu(Ge,R)),style:o?{resize:c==null?void 0:c.resize}:c,prefixCls:Ge,onCompositionStart:Pe,onChange:Ae,onBlur:mt,onFocus:ft,onCompositionEnd:tt,ref:V})),xe=XLe(we);!B&&Me&&(_.value===null||_.value===void 0)&&(xe=Ose(xe,a));var at=m.createElement(bNe,J({disabled:E,focused:G},_,{prefixCls:Ge,direction:w,inputType:"text",value:xe,element:Oe,handleReset:Le,ref:F,bordered:r,status:b,style:o?void 0:c}));if(o||D){var gt=Et(xe).length,Ct="";return Rt(o)==="object"?Ct=o.formatter({value:xe,count:gt,maxLength:a}):Ct="".concat(gt).concat(Me?" / ".concat(a):""),m.createElement("div",{hidden:Fe,className:Ee("".concat(Ge,"-textarea"),z(z(z({},"".concat(Ge,"-textarea-rtl"),w==="rtl"),"".concat(Ge,"-textarea-show-count"),o),"".concat(Ge,"-textarea-in-form-item"),O),cu("".concat(Ge,"-textarea"),R,D),l),style:c,"data-count":Ct},at,D&&m.createElement("span",{className:"".concat(Ge,"-textarea-suffix")},A))}return at}),Qo=KF;Qo.Group=ULe;Qo.Search=aNe;Qo.TextArea=CNe;Qo.Password=sNe;var yNe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},wNe=function(e,t){return m.createElement(yi,ne(ne({},e),{},{ref:t,icon:yNe}))},SNe=m.forwardRef(wNe);function A3(){return typeof BigInt=="function"}function np(n){var e=n.trim(),t=e.startsWith("-");t&&(e=e.slice(1)),e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),e.startsWith(".")&&(e="0".concat(e));var i=e||"0",r=i.split("."),s=r[0]||"0",o=r[1]||"0";s==="0"&&o==="0"&&(t=!1);var a=t?"-":"";return{negative:t,negativeStr:a,trimStr:i,integerStr:s,decimalStr:o,fullStr:"".concat(a).concat(i)}}function qF(n){var e=String(n);return!Number.isNaN(Number(e))&&e.includes("e")}function Ny(n){var e=String(n);if(qF(n)){var t=Number(e.slice(e.indexOf("e-")+2)),i=e.match(/\.(\d+)/);return i!=null&&i[1]&&(t+=i[1].length),t}return e.includes(".")&&GF(e)?e.length-e.indexOf(".")-1:0}function QI(n){var e=String(n);if(qF(n)){if(n>Number.MAX_SAFE_INTEGER)return String(A3()?BigInt(n).toString():Number.MAX_SAFE_INTEGER);if(n<Number.MIN_SAFE_INTEGER)return String(A3()?BigInt(n).toString():Number.MIN_SAFE_INTEGER);e=n.toFixed(Ny(e))}return np(e).fullStr}function GF(n){return typeof n=="number"?!Number.isNaN(n):n?/^\s*-?\d+(\.\d+)?\s*$/.test(n)||/^\s*-?\d+\.\s*$/.test(n)||/^\s*-?\.\d+\s*$/.test(n):!1}function sj(n){var e=typeof n=="number"?QI(n):np(n).fullStr,t=e.includes(".");return t?np(e.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:n+"0"}var xNe=function(){function n(e){if(ys(this,n),this.origin="",this.number=void 0,this.empty=void 0,!e&&e!==0||!String(e).trim()){this.empty=!0;return}this.origin=String(e),this.number=Number(e)}return ws(n,[{key:"negate",value:function(){return new n(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new n(t);var i=Number(t);if(Number.isNaN(i))return this;var r=this.number+i;if(r>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var s=Math.max(Ny(this.number),Ny(i));return new n(r.toFixed(s))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toNumber()===(t==null?void 0:t.toNumber())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":QI(this.number):this.origin}}]),n}(),kNe=function(){function n(e){if(ys(this,n),this.origin="",this.negative=void 0,this.integer=void 0,this.decimal=void 0,this.decimalLen=void 0,this.empty=void 0,this.nan=void 0,!e&&e!==0||!String(e).trim()){this.empty=!0;return}if(this.origin=String(e),e==="-"){this.nan=!0;return}var t=e;if(qF(t)&&(t=Number(t)),t=typeof t=="string"?t:QI(t),GF(t)){var i=np(t);this.negative=i.negative;var r=i.trimStr.split(".");this.integer=BigInt(r[0]);var s=r[1]||"0";this.decimal=BigInt(s),this.decimalLen=s.length}else this.nan=!0}return ws(n,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(t){var i="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(t,"0"));return BigInt(i)}},{key:"negate",value:function(){var t=new n(this.toString());return t.negative=!t.negative,t}},{key:"add",value:function(t){if(this.isInvalidate())return new n(t);var i=new n(t);if(i.isInvalidate())return this;var r=Math.max(this.getDecimalStr().length,i.getDecimalStr().length),s=this.alignDecimal(r),o=i.alignDecimal(r),a=(s+o).toString(),l=np(a),c=l.negativeStr,u=l.trimStr,d="".concat(c).concat(u.padStart(r+1,"0"));return new n("".concat(d.slice(0,-r),".").concat(d.slice(-r)))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toString()===(t==null?void 0:t.toString())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":np("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),n}();function Bl(n){return A3()?new kNe(n):new xNe(n)}function nE(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(n==="")return"";var r=np(n),s=r.negativeStr,o=r.integerStr,a=r.decimalStr,l="".concat(e).concat(a),c="".concat(s).concat(o);if(t>=0){var u=Number(a[t]);if(u>=5&&!i){var d=Bl(n).add("".concat(s,"0.").concat("0".repeat(t)).concat(10-u));return nE(d.toString(),e,t,i)}return t===0?c:"".concat(c).concat(e).concat(a.padEnd(t,"0").slice(0,t))}return l===".0"?c:"".concat(c).concat(l)}var ENe=200,LNe=600;function NNe(n){var e=n.prefixCls,t=n.upNode,i=n.downNode,r=n.upDisabled,s=n.downDisabled,o=n.onStep,a=m.useRef(),l=m.useRef();l.current=o;var c=function(v,b){v.preventDefault(),l.current(b);function _(){l.current(b),a.current=setTimeout(_,ENe)}a.current=setTimeout(_,LNe)},u=function(){clearTimeout(a.current)};if(m.useEffect(function(){return u},[]),VI())return null;var d="".concat(e,"-handler"),h=Ee(d,"".concat(d,"-up"),z({},"".concat(d,"-up-disabled"),r)),f=Ee(d,"".concat(d,"-down"),z({},"".concat(d,"-down-disabled"),s)),g={unselectable:"on",role:"button",onMouseUp:u,onMouseLeave:u};return m.createElement("div",{className:"".concat(d,"-wrap")},m.createElement("span",J({},g,{onMouseDown:function(v){c(v,!0)},"aria-label":"Increase Value","aria-disabled":r,className:h}),t||m.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-up-inner")})),m.createElement("span",J({},g,{onMouseDown:function(v){c(v,!1)},"aria-label":"Decrease Value","aria-disabled":s,className:f}),i||m.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-down-inner")})))}function TNe(n,e){var t=m.useRef(null);function i(){try{var s=n.selectionStart,o=n.selectionEnd,a=n.value,l=a.substring(0,s),c=a.substring(o);t.current={start:s,end:o,value:a,beforeTxt:l,afterTxt:c}}catch{}}function r(){if(n&&t.current&&e)try{var s=n.value,o=t.current,a=o.beforeTxt,l=o.afterTxt,c=o.start,u=s.length;if(s.endsWith(l))u=s.length-t.current.afterTxt.length;else if(s.startsWith(a))u=a.length;else{var d=a[c-1],h=s.indexOf(d,c-1);h!==-1&&(u=h+1)}n.setSelectionRange(u,u)}catch(f){ps(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(f.message))}}return[i,r]}const INe=function(){var n=m.useRef(0),e=function(){On.cancel(n.current)};return m.useEffect(function(){return e},[]),function(t){e(),n.current=On(function(){t()})}};var DNe=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","controls","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep"],oj=function(e,t){return e||t.isEmpty()?t.toString():t.toNumber()},aj=function(e){var t=Bl(e);return t.isInvalidate()?null:t},Pse=m.forwardRef(function(n,e){var t,i=n.prefixCls,r=i===void 0?"rc-input-number":i,s=n.className,o=n.style,a=n.min,l=n.max,c=n.step,u=c===void 0?1:c,d=n.defaultValue,h=n.value,f=n.disabled,g=n.readOnly,p=n.upHandler,v=n.downHandler,b=n.keyboard,_=n.controls,y=_===void 0?!0:_,C=n.stringMode,w=n.parser,x=n.formatter,k=n.precision,E=n.decimalSeparator,L=n.onChange,M=n.onInput,D=n.onPressEnter,O=n.onStep,A=sn(n,DNe),R="".concat(r,"-input"),V=m.useRef(null),F=m.useState(!1),T=Ce(F,2),N=T[0],B=T[1],$=m.useRef(!1),j=m.useRef(!1),Y=m.useRef(!1),G=m.useState(function(){return Bl(h??d)}),X=Ce(G,2),q=X[0],re=X[1];function ge(pe){h===void 0&&re(pe)}var ye=m.useCallback(function(pe,le){if(!le)return k>=0?k:Math.max(Ny(pe),Ny(u))},[k,u]),we=m.useCallback(function(pe){var le=String(pe);if(w)return w(le);var ve=le;return E&&(ve=ve.replace(E,".")),ve.replace(/[^\w.-]+/g,"")},[w,E]),Ie=m.useRef(""),Fe=m.useCallback(function(pe,le){if(x)return x(pe,{userTyping:le,input:String(Ie.current)});var ve=typeof pe=="number"?QI(pe):pe;if(!le){var He=ye(ve,le);if(GF(ve)&&(E||He>=0)){var Qe=E||".";ve=nE(ve,Qe,He)}}return ve},[x,ye,E]),ze=m.useState(function(){var pe=d??h;return q.isInvalidate()&&["string","number"].includes(Rt(pe))?Number.isNaN(pe)?"":pe:Fe(q.toString(),!1)}),Me=Ce(ze,2),Pe=Me[0],tt=Me[1];Ie.current=Pe;function Ae(pe,le){tt(Fe(pe.isInvalidate()?pe.toString(!1):pe.toString(!le),le))}var mt=m.useMemo(function(){return aj(l)},[l,k]),ft=m.useMemo(function(){return aj(a)},[a,k]),Le=m.useMemo(function(){return!mt||!q||q.isInvalidate()?!1:mt.lessEquals(q)},[mt,q]),Ge=m.useMemo(function(){return!ft||!q||q.isInvalidate()?!1:q.lessEquals(ft)},[ft,q]),Oe=TNe(V.current,N),xe=Ce(Oe,2),at=xe[0],gt=xe[1],Ct=function(le){return mt&&!le.lessEquals(mt)?mt:ft&&!ft.lessEquals(le)?ft:null},nt=function(le){return!Ct(le)},se=function(le,ve){var He=le,Qe=nt(He)||He.isEmpty();if(!He.isEmpty()&&!ve&&(He=Ct(He)||He,Qe=!0),!g&&!f&&Qe){var ut=He.toString(),St=ye(ut,ve);return St>=0&&(He=Bl(nE(ut,".",St)),nt(He)||(He=Bl(nE(ut,".",St,!0)))),He.equals(q)||(ge(He),L==null||L(He.isEmpty()?null:oj(C,He)),h===void 0&&Ae(He,ve)),He}return q},fe=INe(),Ne=function pe(le){if(at(),tt(le),!j.current){var ve=we(le),He=Bl(ve);He.isNaN()||se(He,!0)}M==null||M(le),fe(function(){var Qe=le;w||(Qe=le.replace(//g,".")),Qe!==le&&pe(Qe)})},Ve=function(){j.current=!0},lt=function(){j.current=!1,Ne(V.current.value)},Dt=function(le){Ne(le.target.value)},Qt=function(le){var ve;if(!(le&&Le||!le&&Ge)){$.current=!1;var He=Bl(Y.current?sj(u):u);le||(He=He.negate());var Qe=(q||Bl(0)).add(He.toString()),ut=se(Qe,!1);O==null||O(oj(C,ut),{offset:Y.current?sj(u):u,type:le?"up":"down"}),(ve=V.current)===null||ve===void 0||ve.focus()}},he=function(le){var ve=Bl(we(Pe)),He=ve;ve.isNaN()?He=q:He=se(ve,le),h!==void 0?Ae(q,!1):He.isNaN()||Ae(He,!1)},Ke=function(){$.current=!0},ue=function(le){var ve=le.which,He=le.shiftKey;$.current=!0,He?Y.current=!0:Y.current=!1,ve===je.ENTER&&(j.current||($.current=!1),he(!1),D==null||D(le)),b!==!1&&!j.current&&[je.UP,je.DOWN].includes(ve)&&(Qt(je.UP===ve),le.preventDefault())},ee=function(){$.current=!1,Y.current=!1},oe=function(){he(!1),B(!1),$.current=!1};return _0(function(){q.isInvalidate()||Ae(q,!1)},[k]),_0(function(){var pe=Bl(h);re(pe);var le=Bl(we(Pe));(!pe.equals(le)||!$.current||x)&&Ae(pe,$.current)},[h]),_0(function(){x&&gt()},[Pe]),m.createElement("div",{className:Ee(r,s,(t={},z(t,"".concat(r,"-focused"),N),z(t,"".concat(r,"-disabled"),f),z(t,"".concat(r,"-readonly"),g),z(t,"".concat(r,"-not-a-number"),q.isNaN()),z(t,"".concat(r,"-out-of-range"),!q.isInvalidate()&&!nt(q)),t)),style:o,onFocus:function(){B(!0)},onBlur:oe,onKeyDown:ue,onKeyUp:ee,onCompositionStart:Ve,onCompositionEnd:lt,onBeforeInput:Ke},y&&m.createElement(NNe,{prefixCls:r,upNode:p,downNode:v,upDisabled:Le,downDisabled:Ge,onStep:Qt}),m.createElement("div",{className:"".concat(R,"-wrap")},m.createElement("input",J({autoComplete:"off",role:"spinbutton","aria-valuemin":a,"aria-valuemax":l,"aria-valuenow":q.isInvalidate()?null:q.toString(),step:u},A,{ref:jd(V,e),className:R,value:Pe,onChange:Dt,disabled:f,readOnly:g}))))});Pse.displayName="InputNumber";var MNe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},RNe=m.forwardRef(function(n,e){var t=m.useContext(Bn),i=t.getPrefixCls,r=t.direction,s=m.useContext(hc),o=m.useState(!1),a=Ce(o,2),l=a[0],c=a[1],u=m.useRef(null);m.useImperativeHandle(e,function(){return u.current});var d=n.className,h=n.size,f=n.disabled,g=n.prefixCls,p=n.addonBefore,v=n.addonAfter,b=n.prefix,_=n.bordered,y=_===void 0?!0:_,C=n.readOnly,w=n.status,x=n.controls,k=MNe(n,["className","size","disabled","prefixCls","addonBefore","addonAfter","prefix","bordered","readOnly","status","controls"]),E=i("input-number",g),L=tb(E,r),M=L.compactSize,D=L.compactItemClassnames,O=m.createElement(SNe,{className:"".concat(E,"-handler-up-inner")}),A=m.createElement(Wre,{className:"".concat(E,"-handler-down-inner")}),R=typeof x=="boolean"?x:void 0;Rt(x)==="object"&&(O=typeof x.upIcon>"u"?O:m.createElement("span",{className:"".concat(E,"-handler-up-inner")},x.upIcon),A=typeof x.downIcon>"u"?A:m.createElement("span",{className:"".concat(E,"-handler-down-inner")},x.downIcon));var V=m.useContext(Fd),F=V.hasFeedback,T=V.status,N=V.isFormItemInput,B=V.feedbackIcon,$=Yw(T,w),j=M||h||s,Y=m.useContext(Hp),G=f??Y,X=Ee(z(z(z(z(z({},"".concat(E,"-lg"),j==="large"),"".concat(E,"-sm"),j==="small"),"".concat(E,"-rtl"),r==="rtl"),"".concat(E,"-borderless"),!y),"".concat(E,"-in-form-item"),N),cu(E,$),D,d),q=m.createElement(Pse,J({ref:u,disabled:G,className:X,upHandler:O,downHandler:A,prefixCls:E,readOnly:C,controls:R},k));if(b!=null||F){var re=Ee("".concat(E,"-affix-wrapper"),cu("".concat(E,"-affix-wrapper"),$,F),z(z(z(z(z(z(z(z({},"".concat(E,"-affix-wrapper-focused"),l),"".concat(E,"-affix-wrapper-disabled"),n.disabled),"".concat(E,"-affix-wrapper-sm"),s==="small"),"".concat(E,"-affix-wrapper-lg"),s==="large"),"".concat(E,"-affix-wrapper-rtl"),r==="rtl"),"".concat(E,"-affix-wrapper-readonly"),C),"".concat(E,"-affix-wrapper-borderless"),!y),"".concat(d),!(p||v)&&d));q=m.createElement("div",{className:re,style:n.style,onMouseUp:function(){return u.current.focus()}},b&&m.createElement("span",{className:"".concat(E,"-prefix")},b),Io(q,{style:null,value:n.value,onFocus:function(Pe){var tt;c(!0),(tt=n.onFocus)===null||tt===void 0||tt.call(n,Pe)},onBlur:function(Pe){var tt;c(!1),(tt=n.onBlur)===null||tt===void 0||tt.call(n,Pe)}}),F&&m.createElement("span",{className:"".concat(E,"-suffix")},B))}if(p!=null||v!=null){var ge="".concat(E,"-group"),ye="".concat(ge,"-addon"),we=p?m.createElement("div",{className:ye},p):null,Ie=v?m.createElement("div",{className:ye},v):null,Fe=Ee("".concat(E,"-wrapper"),ge,z({},"".concat(ge,"-rtl"),r==="rtl")),ze=Ee("".concat(E,"-group-wrapper"),z(z(z({},"".concat(E,"-group-wrapper-sm"),s==="small"),"".concat(E,"-group-wrapper-lg"),s==="large"),"".concat(E,"-group-wrapper-rtl"),r==="rtl"),cu("".concat(E,"-group-wrapper"),$,F),d);q=m.createElement("div",{className:ze,style:n.style},m.createElement("div",{className:Fe},we&&m.createElement(u1,null,m.createElement(Ey,{status:!0,override:!0},we)),Io(q,{style:null,disabled:G}),Ie&&m.createElement(u1,null,m.createElement(Ey,{status:!0,override:!0},Ie))))}return q});function lj(n){return!!(n&&n.then)}var cj=function(e){var t=m.useRef(!1),i=m.useRef(null),r=Bp(!1),s=Ce(r,2),o=s[0],a=s[1],l=e.close,c=function(){l==null||l.apply(void 0,arguments)};m.useEffect(function(){var v=null;return e.autoFocus&&(v=setTimeout(function(){var b;(b=i.current)===null||b===void 0||b.focus()})),function(){v&&clearTimeout(v)}},[]);var u=function(b){lj(b)&&(a(!0),b.then(function(){a(!1,!0),c.apply(void 0,arguments),t.current=!1},function(_){return a(!1,!0),t.current=!1,Promise.reject(_)}))},d=function(b){var _=e.actionFn;if(!t.current){if(t.current=!0,!_){c();return}var y;if(e.emitEvent){if(y=_(b),e.quitOnNullishReturnValue&&!lj(y)){t.current=!1,c(b);return}}else if(_.length)y=_(l),t.current=!1;else if(y=_(),!y){c();return}u(y)}},h=e.type,f=e.children,g=e.prefixCls,p=e.buttonProps;return m.createElement(bi,J({},mse(h),{onClick:d,loading:o,prefixCls:g},p,{ref:i}),f)},ANe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},O3,ONe=function(e){O3={x:e.pageX,y:e.pageY},setTimeout(function(){O3=null},100)};vse()&&document.documentElement.addEventListener("click",ONe,!0);var Fse=function(e){var t,i=m.useContext(Bn),r=i.getPopupContainer,s=i.getPrefixCls,o=i.direction,a=function(A){var R=e.onCancel;R==null||R(A)},l=function(A){var R=e.onOk;R==null||R(A)},c=e.prefixCls,u=e.footer,d=e.visible,h=e.open,f=h===void 0?!1:h,g=e.wrapClassName,p=e.centered,v=e.getContainer,b=e.closeIcon,_=e.focusTriggerAfterClose,y=_===void 0?!0:_,C=e.width,w=C===void 0?520:C,x=ANe(e,["prefixCls","footer","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","width"]),k=s("modal",c),E=s(),L=m.createElement(PI,{componentName:"Modal",defaultLocale:Dne()},function(O){var A=e.okText,R=e.okType,V=R===void 0?"primary":R,F=e.cancelText,T=e.confirmLoading,N=T===void 0?!1:T;return m.createElement(m.Fragment,null,m.createElement(bi,J({onClick:a},e.cancelButtonProps),F||O.cancelText),m.createElement(bi,J({},mse(V),{loading:N,onClick:l},e.okButtonProps),A??O.okText))}),M=m.createElement("span",{className:"".concat(k,"-close-x")},b||m.createElement(J1,{className:"".concat(k,"-close-icon")})),D=Ee(g,z(z({},"".concat(k,"-centered"),!!p),"".concat(k,"-wrap-rtl"),o==="rtl"));return m.createElement(u1,null,m.createElement(Ey,{status:!0,override:!0},m.createElement(UF,J({width:w},x,{getContainer:v===void 0?r:v,prefixCls:k,wrapClassName:D,footer:u===void 0?L:u,visible:f||d,mousePosition:(t=x.mousePosition)!==null&&t!==void 0?t:O3,onClose:a,closeIcon:M,focusTriggerAfterClose:y,transitionName:_l(E,"zoom",e.transitionName),maskTransitionName:_l(E,"fade",e.maskTransitionName)}))))},Bse=function(e){var t=e.icon,i=e.onCancel,r=e.onOk,s=e.close,o=e.zIndex,a=e.afterClose,l=e.visible,c=e.open,u=e.keyboard,d=e.centered,h=e.getContainer,f=e.maskStyle,g=e.okText,p=e.okButtonProps,v=e.cancelText,b=e.cancelButtonProps,_=e.direction,y=e.prefixCls,C=e.wrapClassName,w=e.rootPrefixCls,x=e.iconPrefixCls,k=e.bodyStyle,E=e.closable,L=E===void 0?!1:E,M=e.closeIcon,D=e.modalRender,O=e.focusTriggerAfterClose,A=e.okType||"primary",R="".concat(y,"-confirm"),V="okCancel"in e?e.okCancel:!0,F=e.width||416,T=e.style||{},N=e.mask===void 0?!0:e.mask,B=e.maskClosable===void 0?!1:e.maskClosable,$=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",j=Ee(R,"".concat(R,"-").concat(e.type),z({},"".concat(R,"-rtl"),_==="rtl"),e.className),Y=V&&m.createElement(cj,{actionFn:i,close:s,autoFocus:$==="cancel",buttonProps:b,prefixCls:"".concat(w,"-btn")},v);return m.createElement(eb,{prefixCls:w,iconPrefixCls:x,direction:_},m.createElement(Fse,{prefixCls:y,className:j,wrapClassName:Ee(z({},"".concat(R,"-centered"),!!e.centered),C),onCancel:function(){return s==null?void 0:s({triggerCancel:!0})},open:c||l,title:"",footer:"",transitionName:_l(w,"zoom",e.transitionName),maskTransitionName:_l(w,"fade",e.maskTransitionName),mask:N,maskClosable:B,maskStyle:f,style:T,bodyStyle:k,width:F,zIndex:o,afterClose:a,keyboard:u,centered:d,getContainer:h,closable:L,closeIcon:M,modalRender:D,focusTriggerAfterClose:O},m.createElement("div",{className:"".concat(R,"-body-wrapper")},m.createElement("div",{className:"".concat(R,"-body")},t,e.title===void 0?null:m.createElement("span",{className:"".concat(R,"-title")},e.title),m.createElement("div",{className:"".concat(R,"-content")},e.content)),m.createElement("div",{className:"".concat(R,"-btns")},Y,m.createElement(cj,{type:A,actionFn:r,close:s,autoFocus:$==="ok",buttonProps:p,prefixCls:"".concat(w,"-btn")},g)))))},Nv=[],PNe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},Hse="";function FNe(){return Hse}function Xw(n){var e=document.createDocumentFragment(),t=J(J({},n),{close:o,open:!0}),i;function r(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=c.some(function(g){return g&&g.triggerCancel});n.onCancel&&d&&n.onCancel.apply(n,[function(){}].concat(Et(c.slice(1))));for(var h=0;h<Nv.length;h++){var f=Nv[h];if(f===o){Nv.splice(h,1);break}}hie(e)}function s(l){var c=l.okText,u=l.cancelText,d=l.prefixCls,h=PNe(l,["okText","cancelText","prefixCls"]);clearTimeout(i),i=setTimeout(function(){var f=Dne(),g=SF(),p=g.getPrefixCls,v=g.getIconPrefixCls,b=p(void 0,FNe()),_=d||"".concat(b,"-modal"),y=v();die(m.createElement(Bse,J({},h,{prefixCls:_,rootPrefixCls:b,iconPrefixCls:y,okText:c||(h.okCancel?f.okText:f.justOkText),cancelText:u||f.cancelText})),e)})}function o(){for(var l=this,c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];t=J(J({},t),{open:!1,afterClose:function(){typeof n.afterClose=="function"&&n.afterClose(),r.apply(l,u)}}),t.visible&&delete t.visible,s(t)}function a(l){typeof l=="function"?t=l(t):t=J(J({},t),l),s(t)}return s(t),Nv.push(o),{destroy:o,update:a}}function Vse(n){return J(J({icon:m.createElement(wF,null),okCancel:!1},n),{type:"warning"})}function zse(n){return J(J({icon:m.createElement(Wie,null),okCancel:!1},n),{type:"info"})}function Wse(n){return J(J({icon:m.createElement(Bie,null),okCancel:!1},n),{type:"success"})}function $se(n){return J(J({icon:m.createElement(Hie,null),okCancel:!1},n),{type:"error"})}function Use(n){return J(J({icon:m.createElement(wF,null),okCancel:!0},n),{type:"confirm"})}function BNe(n){var e=n.rootPrefixCls;Hse=e}function HNe(){var n=m.useState([]),e=Ce(n,2),t=e[0],i=e[1],r=m.useCallback(function(s){return i(function(o){return[].concat(Et(o),[s])}),function(){i(function(o){return o.filter(function(a){return a!==s})})}},[]);return[t,r]}var VNe=function(e,t){var i=e.afterClose,r=e.config,s=m.useState(!0),o=Ce(s,2),a=o[0],l=o[1],c=m.useState(r),u=Ce(c,2),d=u[0],h=u[1],f=m.useContext(Bn),g=f.direction,p=f.getPrefixCls,v=p("modal"),b=p(),_=function(){l(!1);for(var C=arguments.length,w=new Array(C),x=0;x<C;x++)w[x]=arguments[x];var k=w.some(function(E){return E&&E.triggerCancel});d.onCancel&&k&&d.onCancel.apply(d,[function(){}].concat(Et(w.slice(1))))};return m.useImperativeHandle(t,function(){return{destroy:_,update:function(C){h(function(w){return J(J({},w),C)})}}}),m.createElement(PI,{componentName:"Modal",defaultLocale:yf.Modal},function(y){return m.createElement(Bse,J({prefixCls:v,rootPrefixCls:b},d,{close:_,open:a,afterClose:i,okText:d.okText||(d.okCancel?y.okText:y.justOkText),direction:g,cancelText:d.cancelText||y.cancelText}))})};const zNe=m.forwardRef(VNe);var uj=0,WNe=m.memo(m.forwardRef(function(n,e){var t=HNe(),i=Ce(t,2),r=i[0],s=i[1];return m.useImperativeHandle(e,function(){return{patchElement:s}},[]),m.createElement(m.Fragment,null,r)}));function $Ne(){var n=m.useRef(null),e=m.useState([]),t=Ce(e,2),i=t[0],r=t[1];m.useEffect(function(){if(i.length){var a=Et(i);a.forEach(function(l){l()}),r([])}},[i]);var s=m.useCallback(function(a){return function(c){var u;uj+=1;var d=m.createRef(),h,f=m.createElement(zNe,{key:"modal-".concat(uj),config:a(c),ref:d,afterClose:function(){h==null||h()}});return h=(u=n.current)===null||u===void 0?void 0:u.patchElement(f),{destroy:function(){function p(){var v;(v=d.current)===null||v===void 0||v.destroy()}d.current?p():r(function(v){return[].concat(Et(v),[p])})},update:function(p){function v(){var b;(b=d.current)===null||b===void 0||b.update(p)}d.current?v():r(function(b){return[].concat(Et(b),[v])})}}}},[]),o=m.useMemo(function(){return{info:s(zse),success:s(Wse),error:s($se),warning:s(Vse),confirm:s(Use)}},[]);return[o,m.createElement(WNe,{ref:n})]}function jse(n){return Xw(Vse(n))}var xu=Fse;xu.useModal=$Ne;xu.info=function(e){return Xw(zse(e))};xu.success=function(e){return Xw(Wse(e))};xu.error=function(e){return Xw($se(e))};xu.warning=jse;xu.warn=jse;xu.confirm=function(e){return Xw(Use(e))};xu.destroyAll=function(){for(;Nv.length;){var e=Nv.pop();e&&e()}};xu.config=BNe;var UNe={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},jNe=function(){var e=m.useRef([]),t=m.useRef(null);return m.useEffect(function(){var i=Date.now(),r=!1;e.current.forEach(function(s){if(s){r=!0;var o=s.style;o.transitionDuration=".3s, .3s, .3s, .06s",t.current&&i-t.current<100&&(o.transitionDuration="0s, 0s")}}),r&&(t.current=Date.now())}),e.current},dj=0,KNe=da();function qNe(){var n;return KNe?(n=dj,dj+=1):n="TEST_OR_SSR",n}const GNe=function(n){var e=m.useState(),t=Ce(e,2),i=t[0],r=t[1];return m.useEffect(function(){r("rc_progress_".concat(qNe()))},[]),n||i};var YNe=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function hj(n){return+n.replace("%","")}function fj(n){var e=n??[];return Array.isArray(e)?e:[e]}var Wb=100,R4=function(e,t,i,r,s,o,a,l,c,u){var d=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,h=i/100*360*((360-o)/360),f=o===0?0:{bottom:0,top:180,left:90,right:-90}[a],g=(100-r)/100*t;return c==="round"&&r!==100&&(g+=u/2,g>=t&&(g=t-.01)),{stroke:typeof l=="string"?l:void 0,strokeDasharray:"".concat(t,"px ").concat(e),strokeDashoffset:g+d,transform:"rotate(".concat(s+h+f,"deg)"),transformOrigin:"0 0",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},ZNe=function(e){var t=ne(ne({},UNe),e),i=t.id,r=t.prefixCls,s=t.steps,o=t.strokeWidth,a=t.trailWidth,l=t.gapDegree,c=l===void 0?0:l,u=t.gapPosition,d=t.trailColor,h=t.strokeLinecap,f=t.style,g=t.className,p=t.strokeColor,v=t.percent,b=sn(t,YNe),_=GNe(i),y="".concat(_,"-gradient"),C=Wb/2-o/2,w=Math.PI*2*C,x=c>0?90+c/2:-90,k=w*((360-c)/360),E=Rt(s)==="object"?s:{count:s,space:2},L=E.count,M=E.space,D=R4(w,k,0,100,x,c,u,d,h,o),O=fj(v),A=fj(p),R=A.find(function(N){return N&&Rt(N)==="object"}),V=jNe(),F=function(){var B=0;return O.map(function($,j){var Y=A[j]||A[A.length-1],G=Y&&Rt(Y)==="object"?"url(#".concat(y,")"):void 0,X=R4(w,k,B,$,x,c,u,Y,h,o);return B+=$,m.createElement("circle",{key:j,className:"".concat(r,"-circle-path"),r:C,cx:0,cy:0,stroke:G,strokeLinecap:h,strokeWidth:o,opacity:$===0?0:1,style:X,ref:function(re){V[j]=re}})}).reverse()},T=function(){var B=Math.round(L*(O[0]/100)),$=100/L,j=0;return new Array(L).fill(null).map(function(Y,G){var X=G<=B-1?A[0]:d,q=X&&Rt(X)==="object"?"url(#".concat(y,")"):void 0,re=R4(w,k,j,$,x,c,u,X,"butt",o,M);return j+=(k-re.strokeDashoffset+M)*100/k,m.createElement("circle",{key:G,className:"".concat(r,"-circle-path"),r:C,cx:0,cy:0,stroke:q,strokeWidth:o,opacity:1,style:re,ref:function(ye){V[G]=ye}})})};return m.createElement("svg",J({className:Ee("".concat(r,"-circle"),g),viewBox:"".concat(-Wb/2," ").concat(-Wb/2," ").concat(Wb," ").concat(Wb),style:f,id:i,role:"presentation"},b),R&&m.createElement("defs",null,m.createElement("linearGradient",{id:y,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(R).sort(function(N,B){return hj(N)-hj(B)}).map(function(N,B){return m.createElement("stop",{key:B,offset:N,stopColor:R[N]})}))),!L&&m.createElement("circle",{className:"".concat(r,"-circle-trail"),r:C,cx:0,cy:0,stroke:d,strokeLinecap:h,strokeWidth:a||o,style:D}),L?T():F())};function ip(n){return!n||n<0?0:n>100?100:n}function k2(n){var e=n.success,t=n.successPercent,i=t;return e&&"progress"in e&&(i=e.progress),e&&"percent"in e&&(i=e.percent),i}function XNe(n){var e=n.percent,t=n.success,i=n.successPercent,r=ip(k2({success:t,successPercent:i}));return[r,ip(ip(e)-r)]}function QNe(n){var e=n.success,t=e===void 0?{}:e,i=n.strokeColor,r=t.strokeColor;return[r||b0.green,i||null]}var JNe=function(e){var t=e.prefixCls,i=e.width,r=e.strokeWidth,s=e.trailColor,o=s===void 0?null:s,a=e.strokeLinecap,l=a===void 0?"round":a,c=e.gapPosition,u=e.gapDegree,d=e.type,h=e.children,f=e.success,g=i||120,p={width:g,height:g,fontSize:g*.15+6},v=r||6,b=c||d==="dashboard"&&"bottom"||void 0,_=function(){if(u||u===0)return u;if(d==="dashboard")return 75},y=Object.prototype.toString.call(e.strokeColor)==="[object Object]",C=QNe({success:f,strokeColor:e.strokeColor}),w=Ee("".concat(t,"-inner"),z({},"".concat(t,"-circle-gradient"),y));return m.createElement("div",{className:w,style:p},m.createElement(ZNe,{percent:XNe(e),strokeWidth:v,trailWidth:v,strokeColor:C,strokeLinecap:l,trailColor:o,prefixCls:t,gapDegree:_(),gapPosition:b}),h)},eTe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},tTe=function(e){var t=[];return Object.keys(e).forEach(function(i){var r=parseFloat(i.replace(/%/g,""));isNaN(r)||t.push({key:r,value:e[i]})}),t=t.sort(function(i,r){return i.key-r.key}),t.map(function(i){var r=i.key,s=i.value;return"".concat(s," ").concat(r,"%")}).join(", ")},nTe=function(e,t){var i=e.from,r=i===void 0?b0.blue:i,s=e.to,o=s===void 0?b0.blue:s,a=e.direction,l=a===void 0?t==="rtl"?"to left":"to right":a,c=eTe(e,["from","to","direction"]);if(Object.keys(c).length!==0){var u=tTe(c);return{backgroundImage:"linear-gradient(".concat(l,", ").concat(u,")")}}return{backgroundImage:"linear-gradient(".concat(l,", ").concat(r,", ").concat(o,")")}},iTe=function(e){var t=e.prefixCls,i=e.direction,r=e.percent,s=e.strokeWidth,o=e.size,a=e.strokeColor,l=e.strokeLinecap,c=l===void 0?"round":l,u=e.children,d=e.trailColor,h=d===void 0?null:d,f=e.success,g=a&&typeof a!="string"?nTe(a,i):{background:a},p=c==="square"||c==="butt"?0:void 0,v={backgroundColor:h||void 0,borderRadius:p},b=J({width:"".concat(ip(r),"%"),height:s||(o==="small"?6:8),borderRadius:p},g),_=k2(e),y={width:"".concat(ip(_),"%"),height:s||(o==="small"?6:8),borderRadius:p,backgroundColor:f==null?void 0:f.strokeColor},C=_!==void 0?m.createElement("div",{className:"".concat(t,"-success-bg"),style:y}):null;return m.createElement(m.Fragment,null,m.createElement("div",{className:"".concat(t,"-outer")},m.createElement("div",{className:"".concat(t,"-inner"),style:v},m.createElement("div",{className:"".concat(t,"-bg"),style:b}),C)),u)},rTe=function(e){for(var t=e.size,i=e.steps,r=e.percent,s=r===void 0?0:r,o=e.strokeWidth,a=o===void 0?8:o,l=e.strokeColor,c=e.trailColor,u=c===void 0?null:c,d=e.prefixCls,h=e.children,f=Math.round(i*(s/100)),g=t==="small"?2:14,p=new Array(i),v=0;v<i;v++){var b=Array.isArray(l)?l[v]:l;p[v]=m.createElement("div",{key:v,className:Ee("".concat(d,"-steps-item"),z({},"".concat(d,"-steps-item-active"),v<=f-1)),style:{backgroundColor:v<=f-1?b:u,width:g,height:a}})}return m.createElement("div",{className:"".concat(d,"-steps-outer")},p,h)},sTe=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};wc("line","circle","dashboard");var oTe=wc("normal","exception","active","success"),YF=function(e){var t=e.prefixCls,i=e.className,r=e.steps,s=e.strokeColor,o=e.percent,a=o===void 0?0:o,l=e.size,c=l===void 0?"default":l,u=e.showInfo,d=u===void 0?!0:u,h=e.type,f=h===void 0?"line":h,g=sTe(e,["prefixCls","className","steps","strokeColor","percent","size","showInfo","type"]);function p(){var O=k2(e);return parseInt(O!==void 0?O.toString():a.toString(),10)}function v(){var O=e.status;return!oTe.includes(O)&&p()>=100?"success":O||"normal"}function b(O,A){var R=e.format,V=k2(e);if(!d)return null;var F,T=R||function(B){return"".concat(B,"%")},N=f==="line";return R||A!=="exception"&&A!=="success"?F=T(ip(a),ip(V)):A==="exception"?F=N?m.createElement(Uw,null):m.createElement(J1,null):A==="success"&&(F=N?m.createElement(uie,null):m.createElement(zre,null)),m.createElement("span",{className:"".concat(O,"-text"),title:typeof F=="string"?F:void 0},F)}var _=m.useContext(Bn),y=_.getPrefixCls,C=_.direction,w=y("progress",t),x=v(),k=b(w,x),E=Array.isArray(s)?s[0]:s,L=typeof s=="string"||Array.isArray(s)?s:void 0,M;f==="line"?M=r?m.createElement(rTe,J({},e,{strokeColor:L,prefixCls:w,steps:r}),k):m.createElement(iTe,J({},e,{strokeColor:E,prefixCls:w,direction:C}),k):(f==="circle"||f==="dashboard")&&(M=m.createElement(JNe,J({},e,{strokeColor:E,prefixCls:w,progressStatus:x}),k));var D=Ee(w,z(z(z(z(z({},"".concat(w,"-").concat(f==="dashboard"&&"circle"||r&&"steps"||f),!0),"".concat(w,"-status-").concat(x),!0),"".concat(w,"-show-info"),d),"".concat(w,"-").concat(c),c),"".concat(w,"-rtl"),C==="rtl"),i);return m.createElement("div",J({},fo(g,["status","format","trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"]),{className:D,role:"progressbar"}),M)},aTe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},lTe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},cTe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},uTe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},dTe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},hTe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};function Ls(n){this.content=n}Ls.prototype={constructor:Ls,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var i=t&&t!=n?this.remove(t):this,r=i.find(n),s=i.content.slice();return r==-1?s.push(t||n,e):(s[r+1]=e,t&&(s[r]=t)),new Ls(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Ls(t)},addToStart:function(n,e){return new Ls([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Ls(t)},addBefore:function(n,e,t){var i=this.remove(e),r=i.content.slice(),s=i.find(n);return r.splice(s==-1?r.length:s,0,e,t),new Ls(r)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Ls.from(n),n.size?new Ls(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Ls.from(n),n.size?new Ls(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Ls.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Ls.from=function(n){if(n instanceof Ls)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Ls(e)};function Kse(n,e,t){for(let i=0;;i++){if(i==n.childCount||i==e.childCount)return n.childCount==e.childCount?null:t;let r=n.child(i),s=e.child(i);if(r==s){t+=r.nodeSize;continue}if(!r.sameMarkup(s))return t;if(r.isText&&r.text!=s.text){for(let o=0;r.text[o]==s.text[o];o++)t++;return t}if(r.content.size||s.content.size){let o=Kse(r.content,s.content,t+1);if(o!=null)return o}t+=r.nodeSize}}function qse(n,e,t,i){for(let r=n.childCount,s=e.childCount;;){if(r==0||s==0)return r==s?null:{a:t,b:i};let o=n.child(--r),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:t,b:i};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,i--;return{a:t,b:i}}if(o.content.size||a.content.size){let c=qse(o.content,a.content,t-1,i-1);if(c)return c}t-=l,i-=l}}class Ye{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,t,i,r=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&i(l,r+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),i,r+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,i,r){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?r?typeof r=="function"?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&i&&(o?o=!1:s+=i),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,i=e.firstChild,r=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(i)&&(r[r.length-1]=t.withText(t.text+i.text),s=1);s<e.content.length;s++)r.push(e.content[s]);return new Ye(r,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let i=[],r=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),i.push(a),r+=a.nodeSize),o=l}return new Ye(i,r)}cutByIndex(e,t){return e==t?Ye.empty:e==0&&t==this.content.length?this:new Ye(this.content.slice(e,t))}replaceChild(e,t){let i=this.content[e];if(i==t)return this;let r=this.content.slice(),s=this.size+t.nodeSize-i.nodeSize;return r[e]=t,new Ye(r,s)}addToStart(e){return new Ye([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ye(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,i=0;t<this.content.length;t++){let r=this.content[t];e(r,i,t),i+=r.nodeSize}}findDiffStart(e,t=0){return Kse(this,e,t)}findDiffEnd(e,t=this.size,i=e.size){return qse(this,e,t,i)}findIndex(e,t=-1){if(e==0)return hx(0,e);if(e==this.size)return hx(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,r=0;;i++){let s=this.child(i),o=r+s.nodeSize;if(o>=e)return o==e||t>0?hx(i+1,o):hx(i,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Ye.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ye(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ye.empty;let t,i=0;for(let r=0;r<e.length;r++){let s=e[r];i+=s.nodeSize,r&&s.isText&&e[r-1].sameMarkup(s)?(t||(t=e.slice(0,r)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new Ye(t||e,i)}static from(e){if(!e)return Ye.empty;if(e instanceof Ye)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ye([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ye.empty=new Ye([],0);const A4={index:0,offset:0};function hx(n,e){return A4.index=n,A4.offset=e,A4}function E2(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!E2(n[i],e[i]))return!1}else{for(let i in n)if(!(i in e)||!E2(n[i],e[i]))return!1;for(let i in e)if(!(i in n))return!1}return!0}let Pi=class P3{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,i=!1;for(let r=0;r<e.length;r++){let s=e[r];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,r));else{if(s.type.excludes(this.type))return e;!i&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),i=!0),t&&t.push(s)}}return t||(t=e.slice()),i||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&E2(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[t.type];if(!i)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=i.create(t.attrs);return i.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return P3.none;if(e instanceof P3)return[e];let t=e.slice();return t.sort((i,r)=>i.type.rank-r.type.rank),t}};Pi.none=[];class L2 extends Error{}class _t{constructor(e,t,i){this.content=e,this.openStart=t,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let i=Yse(this.content,e+this.openStart,t);return i&&new _t(i,this.openStart,this.openEnd)}removeBetween(e,t){return new _t(Gse(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return _t.empty;let i=t.openStart||0,r=t.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new _t(Ye.fromJSON(e,t.content),i,r)}static maxOpen(e,t=!0){let i=0,r=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)r++;return new _t(e,i,r)}}_t.empty=new _t(Ye.empty,0,0);function Gse(n,e,t){let{index:i,offset:r}=n.findIndex(e),s=n.maybeChild(i),{index:o,offset:a}=n.findIndex(t);if(r==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(i!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(i,s.copy(Gse(s.content,e-r-1,t-r-1)))}function Yse(n,e,t,i){let{index:r,offset:s}=n.findIndex(e),o=n.maybeChild(r);if(s==e||o.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=Yse(o.content,e-s-1,t);return a&&n.replaceChild(r,o.copy(a))}function fTe(n,e,t){if(t.openStart>n.depth)throw new L2("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new L2("Inconsistent open depths");return Zse(n,e,t,0)}function Zse(n,e,t,i){let r=n.index(i),s=n.node(i);if(r==e.index(i)&&i<n.depth-t.openStart){let o=Zse(n,e,t,i+1);return s.copy(s.content.replaceChild(r,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==i&&e.depth==i){let o=n.parent,a=o.content;return sp(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=gTe(t,n);return sp(s,Qse(n,o,a,e,i))}else return sp(s,N2(n,e,i))}function Xse(n,e){if(!e.type.compatibleContent(n.type))throw new L2("Cannot join "+e.type.name+" onto "+n.type.name)}function F3(n,e,t){let i=n.node(t);return Xse(i,e.node(t)),i}function rp(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Q_(n,e,t,i){let r=(e||n).node(t),s=0,o=e?e.index(t):r.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(rp(n.nodeAfter,i),s++));for(let a=s;a<o;a++)rp(r.child(a),i);e&&e.depth==t&&e.textOffset&&rp(e.nodeBefore,i)}function sp(n,e){return n.type.checkContent(e),n.copy(e)}function Qse(n,e,t,i,r){let s=n.depth>r&&F3(n,e,r+1),o=i.depth>r&&F3(t,i,r+1),a=[];return Q_(null,n,r,a),s&&o&&e.index(r)==t.index(r)?(Xse(s,o),rp(sp(s,Qse(n,e,t,i,r+1)),a)):(s&&rp(sp(s,N2(n,e,r+1)),a),Q_(e,t,r,a),o&&rp(sp(o,N2(t,i,r+1)),a)),Q_(i,null,r,a),new Ye(a)}function N2(n,e,t){let i=[];if(Q_(null,n,t,i),n.depth>t){let r=F3(n,e,t+1);rp(sp(r,N2(n,e,t+1)),i)}return Q_(e,null,t,i),new Ye(i)}function gTe(n,e){let t=e.depth-n.openStart,r=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)r=e.node(s).copy(Ye.from(r));return{start:r.resolveNoCache(n.openStart+t),end:r.resolveNoCache(r.content.size-n.openEnd-t)}}class Ty{constructor(e,t,i){this.pos=e,this.path=t,this.parentOffset=i,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=e.child(t);return i?e.child(t).cut(i):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let i=this.path[t*3],r=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)r+=i.child(s).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Pi.none;if(this.textOffset)return e.child(t).marks;let i=e.maybeChild(t-1),r=e.maybeChild(t);if(!i){let a=i;i=r,r=a}let s=i.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!r||!s[o].isInSet(r.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let i=t.marks,r=e.parent.maybeChild(e.index());for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!r||!i[s].isInSet(r.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new T2(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let i=[],r=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(i.push(o,a,r+l),!c||(o=o.child(a),o.isText))break;s=c-1,r+=l+1}return new Ty(t,i,s)}static resolveCached(e,t){let i=gj.get(e);if(i)for(let s=0;s<i.elts.length;s++){let o=i.elts[s];if(o.pos==t)return o}else gj.set(e,i=new pTe);let r=i.elts[i.i]=Ty.resolve(e,t);return i.i=(i.i+1)%mTe,r}}class pTe{constructor(){this.elts=[],this.i=0}}const mTe=12,gj=new WeakMap;class T2{constructor(e,t,i){this.$from=e,this.$to=t,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const vTe=Object.create(null);let op=class B3{constructor(e,t,i,r=Pi.none){this.type=e,this.attrs=t,this.marks=r,this.content=i||Ye.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,i,r=0){this.content.nodesBetween(e,t,i,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,i,r){return this.content.textBetween(e,t,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,i){return this.type==e&&E2(this.attrs,t||e.defaultAttrs||vTe)&&Pi.sameSet(this.marks,i||Pi.none)}copy(e=null){return e==this.content?this:new B3(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new B3(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,i=!1){if(e==t)return _t.empty;let r=this.resolve(e),s=this.resolve(t),o=i?0:r.sharedDepth(t),a=r.start(o),c=r.node(o).content.cut(r.pos-a,s.pos-a);return new _t(c,r.depth-o,s.depth-o)}replace(e,t,i){return fTe(this.resolve(e),this.resolve(t),i)}nodeAt(e){for(let t=this;;){let{index:i,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(i),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(t),index:t,offset:i};let r=this.content.child(t-1);return{node:r,index:t-1,offset:i-r.nodeSize}}resolve(e){return Ty.resolveCached(this,e)}resolveNoCache(e){return Ty.resolve(this,e)}rangeHasMark(e,t,i){let r=!1;return t>e&&this.nodesBetween(e,t,s=>(i.isInSet(s.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Jse(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,i=Ye.empty,r=0,s=i.childCount){let o=this.contentMatchAt(e).matchFragment(i,r,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=r;l<s;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(e,t,i,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(e).matchType(i),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Pi.none;for(let t=0;t<this.marks.length;t++){let i=this.marks[t];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!Pi.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let i;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,i)}let r=Ye.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,r,i);return s.type.checkAttrs(s.attrs),s}};op.prototype.text=void 0;class I2 extends op{constructor(e,t,i,r){if(super(e,t,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Jse(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new I2(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new I2(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Jse(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Wp{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let i=new bTe(e,t);if(i.next==null)return Wp.empty;let r=eoe(i);i.next&&i.err("Unexpected trailing text");let s=kTe(xTe(r));return ETe(s,i),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,i=e.childCount){let r=this;for(let s=t;r&&s<i;s++)r=r.matchType(e.child(s).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let i=0;i<e.next.length;i++)if(this.next[t].type==e.next[i].type)return!0;return!1}fillBefore(e,t=!1,i=0){let r=[this];function s(o,a){let l=o.matchFragment(e,i);if(l&&(!t||l.validEnd))return Ye.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&r.indexOf(d)==-1){r.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),s=r.match;if(s.matchType(e)){let o=[];for(let a=r;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!r.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:r}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(i){e.push(i);for(let r=0;r<i.next.length;r++)e.indexOf(i.next[r].next)==-1&&t(i.next[r].next)}return t(this),e.map((i,r)=>{let s=r+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)s+=(o?", ":"")+i.next[o].type.name+"->"+e.indexOf(i.next[o].next);return s}).join(`
`)}}Wp.empty=new Wp(!0);class bTe{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function eoe(n){let e=[];do e.push(_Te(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function _Te(n){let e=[];do e.push(CTe(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function CTe(n){let e=STe(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=yTe(n,e);else break;return e}function pj(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function yTe(n,e){let t=pj(n),i=t;return n.eat(",")&&(n.next!="}"?i=pj(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:i,expr:e}}function wTe(n,e){let t=n.nodeTypes,i=t[e];if(i)return[i];let r=[];for(let s in t){let o=t[s];o.isInGroup(e)&&r.push(o)}return r.length==0&&n.err("No node type or group '"+e+"' found"),r}function STe(n){if(n.eat("(")){let e=eoe(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=wTe(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function xTe(n){let e=[[]];return r(s(n,0),t()),e;function t(){return e.push([])-1}function i(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function r(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;r(c,a=t())}else if(o.type=="star"){let l=t();return i(a,l),r(s(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=t();return r(s(o.expr,a),l),r(s(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=t();r(s(o.expr,l),u),l=u}if(o.max==-1)r(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=t();i(l,u),r(s(o.expr,l),u),l=u}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function toe(n,e){return e-n}function mj(n,e){let t=[];return i(e),t.sort(toe);function i(r){let s=n[r];if(s.length==1&&!s[0].term)return i(s[0].to);t.push(r);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&t.indexOf(l)==-1&&i(l)}}}function kTe(n){let e=Object.create(null);return t(mj(n,0));function t(i){let r=[];i.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<r.length;u++)r[u][0]==a&&(c=r[u][1]);mj(n,l).forEach(u=>{c||r.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[i.join(",")]=new Wp(i.indexOf(n.length-1)>-1);for(let o=0;o<r.length;o++){let a=r[o][1].sort(toe);s.next.push({type:r[o][0],next:e[a.join(",")]||t(a)})}return s}}function ETe(n,e){for(let t=0,i=[n];t<i.length;t++){let r=i[t],s=!r.validEnd,o=[];for(let a=0;a<r.next.length;a++){let{type:l,next:c}=r.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),i.indexOf(c)==-1&&i.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function noe(n){let e=Object.create(null);for(let t in n){let i=n[t];if(!i.hasDefault)return null;e[t]=i.default}return e}function ioe(n,e){let t=Object.create(null);for(let i in n){let r=e&&e[i];if(r===void 0){let s=n[i];if(s.hasDefault)r=s.default;else throw new RangeError("No value supplied for attribute "+i)}t[i]=r}return t}function roe(n,e,t,i){for(let r in e)if(!(r in n))throw new RangeError(`Unsupported attribute ${r} for ${t} of type ${r}`);for(let r in n){let s=n[r];s.validate&&s.validate(e[r])}}function soe(n,e){let t=Object.create(null);if(e)for(let i in e)t[i]=new NTe(n,i,e[i]);return t}let vj=class ooe{constructor(e,t,i){this.name=e,this.schema=t,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=soe(e,i.attrs),this.defaultAttrs=noe(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Wp.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:ioe(this.attrs,e)}create(e=null,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new op(this,this.computeAttrs(e),Ye.from(t),Pi.setFrom(i))}createChecked(e=null,t,i){return t=Ye.from(t),this.checkContent(t),new op(this,this.computeAttrs(e),t,Pi.setFrom(i))}createAndFill(e=null,t,i){if(e=this.computeAttrs(e),t=Ye.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let r=this.contentMatch.matchFragment(t),s=r&&r.fillBefore(Ye.empty,!0);return s?new op(this,e,t.append(s),Pi.setFrom(i)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){roe(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:Pi.none:e}static compile(e,t){let i=Object.create(null);e.forEach((s,o)=>i[s]=new ooe(s,t,o));let r=t.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function LTe(n,e,t){let i=t.split("|");return r=>{let s=r===null?"null":typeof r;if(i.indexOf(s)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${n}, got ${s}`)}}class NTe{constructor(e,t,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?LTe(e,t,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class JI{constructor(e,t,i,r){this.name=e,this.rank=t,this.schema=i,this.spec=r,this.attrs=soe(e,r.attrs),this.excluded=null;let s=noe(this.attrs);this.instance=s?new Pi(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Pi(this,ioe(this.attrs,e))}static compile(e,t){let i=Object.create(null),r=0;return e.forEach((s,o)=>i[s]=new JI(s,r++,t,o)),i}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){roe(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class aoe{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=Ls.from(e.nodes),t.marks=Ls.from(e.marks||{}),this.nodes=vj.compile(this.spec.nodes,this),this.marks=JI.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let s=this.nodes[r],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=i[o]||(i[o]=Wp.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?bj(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let r in this.marks){let s=this.marks[r],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:bj(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,i,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof vj){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,i,r)}text(e,t){let i=this.nodes.text;return new I2(i,i.defaultAttrs,e,Pi.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return op.fromJSON(this,e)}markFromJSON(e){return Pi.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function bj(n,e){let t=[];for(let i=0;i<e.length;i++){let r=e[i],s=n.marks[r],o=s;if(s)t.push(s);else for(let a in n.marks){let l=n.marks[a];(r=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return t}function TTe(n){return n.tag!=null}function ITe(n){return n.style!=null}let J_=class H3{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let i=this.matchedStyles=[];t.forEach(r=>{if(TTe(r))this.tags.push(r);else if(ITe(r)){let s=/[^=]*/.exec(r.style)[0];i.indexOf(s)<0&&i.push(s),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let s=e.nodes[r.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let i=new Cj(this,t,!1);return i.addAll(e,Pi.none,t.from,t.to),i.finish()}parseSlice(e,t={}){let i=new Cj(this,t,!0);return i.addAll(e,Pi.none,t.from,t.to),_t.maxOpen(i.finish())}matchTag(e,t,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let s=this.tags[r];if(RTe(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,i,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!i.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function i(r){let s=r.priority==null?50:r.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,r)}for(let r in e.marks){let s=e.marks[r].spec.parseDOM;s&&s.forEach(o=>{i(o=yj(o)),o.mark||o.ignore||o.clearMark||(o.mark=r)})}for(let r in e.nodes){let s=e.nodes[r].spec.parseDOM;s&&s.forEach(o=>{i(o=yj(o)),o.node||o.ignore||o.mark||(o.node=r)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new H3(e,H3.schemaRules(e)))}};const loe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},DTe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},coe={ol:!0,ul:!0},D2=1,M2=2,eC=4;function _j(n,e,t){return e!=null?(e?D2:0)|(e==="full"?M2:0):n&&n.whitespace=="pre"?D2|M2:t&~eC}class fx{constructor(e,t,i,r,s,o){this.type=e,this.attrs=t,this.marks=i,this.solid=r,this.options=o,this.content=[],this.activeMarks=Pi.none,this.match=s||(o&eC?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ye.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(e.type))?(this.match=i,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&D2)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-r[0].length))}}let t=Ye.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ye.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!loe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Cj{constructor(e,t,i){this.parser=e,this.options=t,this.isOpen=i,this.open=0;let r=t.topNode,s,o=_j(null,t.preserveWhitespace,0)|(i?eC:0);r?s=new fx(r.type,r.attrs,Pi.none,!0,t.topMatch||r.type.contentMatch,o):i?s=new fx(null,null,Pi.none,!0,null,o):s=new fx(e.schema.topNodeType,null,Pi.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let i=e.nodeValue,r=this.top;if(r.options&M2||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(r.options&D2)r.options&M2?i=i.replace(/\r\n?/g,`
`):i=i.replace(/\r?\n|\r/g," ");else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let s=r.content[r.content.length-1],o=e.previousSibling;(!s||o&&o.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,i){let r=e.nodeName.toLowerCase(),s;coe.hasOwnProperty(r)&&this.parser.normalizeLists&&MTe(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,i));if(o?o.ignore:DTe.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e,t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let a,l=this.top,c=this.needsBlock;if(loe.hasOwnProperty(r))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),a=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);return}let u=o&&o.skip?t:this.readStyles(e,t);u&&this.addAll(e,u),a&&this.sync(l),this.needsBlock=c}else{let a=this.readStyles(e,t);a&&this.addElementByRule(e,o,a,o.consuming===!1?s:void 0)}}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let i=e.style;if(i&&i.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let s=this.parser.matchedStyles[r],o=i.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(c=>!l.clearMark(c)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,i,r){let s,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),i)||this.leafFallback(e,i);else{let l=this.enter(o,t.attrs||null,i,t.preserveWhitespace);l&&(s=!0,i=l)}else{let l=this.parser.schema.marks[t.mark];i=i.concat(l.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,i,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,i));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,i),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,t,i,r){let s=i||0;for(let o=i?e.childNodes[i]:e.firstChild,a=r==null?null:e.childNodes[r];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,t);this.findAtPoint(e,s)}findPlace(e,t){let i,r;for(let s=this.open;s>=0;s--){let o=this.nodes[s],a=o.findWrapping(e);if(a&&(!i||i.length>a.length)&&(i=a,r=o,!a.length)||o.solid)break}if(!i)return null;this.sync(r);for(let s=0;s<i.length;s++)t=this.enterInner(i[s],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let r=this.textblockFromContext();r&&(t=this.enterInner(r,null,t))}let i=this.findPlace(e,t);if(i){this.closeExtra();let r=this.top;r.match&&(r.match=r.match.matchType(e.type));let s=Pi.none;for(let o of i.concat(e.marks))(r.type?r.type.allowsMarkType(o.type):wj(o.type,e.type))&&(s=o.addToSet(s));return r.content.push(e.mark(s)),!0}return!1}enter(e,t,i,r){let s=this.findPlace(e.create(t),i);return s&&(s=this.enterInner(e,t,i,!0,r)),s}enterInner(e,t,i,r=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=_j(e,s,o.options);o.options&eC&&o.content.length==0&&(a|=eC);let l=Pi.none;return i=i.filter(c=>(o.type?o.type.allowsMarkType(c.type):wj(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new fx(e,t,l,r,null,a)),this.open++,i}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let i=this.nodes[t].content;for(let r=i.length-1;r>=0;r--)e+=i[r].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==t&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,i){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),s=-(i?i.depth+1:0)+(r?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&r?this.nodes[l].type:i&&l>=s?i.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let i=this.parser.schema.nodes[t];if(i.isTextblock&&i.defaultAttrs)return i}}}function MTe(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&coe.hasOwnProperty(i)&&t?(t.appendChild(e),e=t):i=="li"?t=e:i&&(t=null)}}function RTe(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function yj(n){let e={};for(let t in n)e[t]=n[t];return e}function wj(n,e){let t=e.schema.nodes;for(let i in t){let r=t[i];if(!r.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(r.contentMatch))return!0}}class um{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},i){i||(i=O4(t).createDocumentFragment());let r=i,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)r=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(s.push([c,r]),r.appendChild(u.dom),r=u.contentDOM||u.dom)}}r.appendChild(this.serializeNodeInner(o,t))}),i}serializeNodeInner(e,t){let{dom:i,contentDOM:r}=iE(O4(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return i}serializeNode(e,t={}){let i=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let s=this.serializeMark(e.marks[r],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(e,t,i={}){let r=this.marks[e.type.name];return r&&iE(O4(i),r(e,t),null,e.attrs)}static renderSpec(e,t,i=null,r){return iE(e,t,i,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new um(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Sj(e.nodes);return t.text||(t.text=i=>i.text),t}static marksFromSchema(e){return Sj(e.marks)}}function Sj(n){let e={};for(let t in n){let i=n[t].spec.toDOM;i&&(e[t]=i)}return e}function O4(n){return n.document||window.document}const xj=new WeakMap;function ATe(n){let e=xj.get(n);return e===void 0&&xj.set(n,e=OTe(n)),e}function OTe(n){let e=null;function t(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let r=0;r<i.length;r++)t(i[r]);else for(let r in i)t(i[r])}return t(n),e}function iE(n,e,t,i){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let r=e[0],s;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(s=ATe(i))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=r.indexOf(" ");o>0&&(t=r.slice(0,o),r=r.slice(o+1));let a,l=t?n.createElementNS(t,r):n.createElement(r),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:g}=iE(n,h,t,i);if(l.appendChild(f),g){if(a)throw new RangeError("Multiple content holes");a=g}}}return{dom:l,contentDOM:a}}const uoe=65535,doe=Math.pow(2,16);function PTe(n,e){return n+e*doe}function kj(n){return n&uoe}function FTe(n){return(n-(n&uoe))/doe}const hoe=1,foe=2,rE=4,goe=8;class V3{constructor(e,t,i){this.pos=e,this.delInfo=t,this.recover=i}get deleted(){return(this.delInfo&goe)>0}get deletedBefore(){return(this.delInfo&(hoe|rE))>0}get deletedAfter(){return(this.delInfo&(foe|rE))>0}get deletedAcross(){return(this.delInfo&rE)>0}}class wa{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&wa.empty)return wa.empty}recover(e){let t=0,i=kj(e);if(!this.inverted)for(let r=0;r<i;r++)t+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+t+FTe(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let r=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:t:t,f=l+r+(h<0?0:u);if(i)return f;let g=e==(t<0?l:d)?null:PTe(a/3,e-l),p=e==l?foe:e==d?hoe:rE;return(t<0?e!=l:e!=d)&&(p|=goe),new V3(f,p,g)}r+=u-c}return i?e+r:new V3(e+r,0,null)}touches(e,t){let i=0,r=kj(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==r*3)return!0;i+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let o=this.ranges[r],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[r+t],u=this.ranges[r+i];e(a,a+c,l,l+u),s+=u-c}}invert(){return new wa(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?wa.empty:new wa(e<0?[0,-e,0]:[0,0,e])}}wa.empty=new wa([]);class S0{constructor(e=[],t,i=0,r=e.length){this.maps=e,this.mirror=t,this.from=i,this.to=r}slice(e=0,t=this.maps.length){return new S0(this.maps,this.mirror,e,t)}copy(){return new S0(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,i=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],r!=null&&r<t?i+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,i=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),r!=null&&r>t?i-r-1:void 0)}}invert(){let e=new S0;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let i=this.from;i<this.to;i++)e=this.maps[i].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let r=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}r|=a.delInfo,e=a.pos}return i?e:new V3(e,r,null)}}const P4=Object.create(null);class go{getMap(){return wa.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=P4[t.stepType];if(!i)throw new RangeError(`No step type ${t.stepType} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in P4)throw new RangeError("Duplicate use of step JSON ID "+e);return P4[e]=t,t.prototype.jsonID=e,t}}class Fr{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Fr(e,null)}static fail(e){return new Fr(null,e)}static fromReplace(e,t,i,r){try{return Fr.ok(e.replace(t,i,r))}catch(s){if(s instanceof L2)return Fr.fail(s.message);throw s}}}function ZF(n,e,t){let i=[];for(let r=0;r<n.childCount;r++){let s=n.child(r);s.content.size&&(s=s.copy(ZF(s.content,e,s))),s.isInline&&(s=e(s,t,r)),i.push(s)}return Ye.fromArray(i)}class Vh extends go{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new _t(ZF(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),r),t.openStart,t.openEnd);return Fr.fromReplace(e,this.from,this.to,s)}invert(){return new su(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new Vh(t.pos,i.pos,this.mark)}merge(e){return e instanceof Vh&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Vh(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Vh(t.from,t.to,e.markFromJSON(t.mark))}}go.jsonID("addMark",Vh);class su extends go{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=new _t(ZF(t.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),t.openStart,t.openEnd);return Fr.fromReplace(e,this.from,this.to,i)}invert(){return new Vh(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new su(t.pos,i.pos,this.mark)}merge(e){return e instanceof su&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new su(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new su(t.from,t.to,e.markFromJSON(t.mark))}}go.jsonID("removeMark",su);class zh extends go{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Fr.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Fr.fromReplace(e,this.pos,this.pos+1,new _t(Ye.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let i=this.mark.addToSet(t.marks);if(i.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(i))return new zh(this.pos,t.marks[r]);return new zh(this.pos,this.mark)}}return new h1(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new zh(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new zh(t.pos,e.markFromJSON(t.mark))}}go.jsonID("addNodeMark",zh);class h1 extends go{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Fr.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Fr.fromReplace(e,this.pos,this.pos+1,new _t(Ye.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new zh(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new h1(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new h1(t.pos,e.markFromJSON(t.mark))}}go.jsonID("removeNodeMark",h1);class us extends go{constructor(e,t,i,r=!1){super(),this.from=e,this.to=t,this.slice=i,this.structure=r}apply(e){return this.structure&&z3(e,this.from,this.to)?Fr.fail("Structure replace would overwrite content"):Fr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new wa([this.from,this.to-this.from,this.slice.size])}invert(e){return new us(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deletedAcross&&i.deletedAcross?null:new us(t.pos,Math.max(t.pos,i.pos),this.slice)}merge(e){if(!(e instanceof us)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?_t.empty:new _t(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new us(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?_t.empty:new _t(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new us(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new us(t.from,t.to,_t.fromJSON(e,t.slice),!!t.structure)}}go.jsonID("replace",us);class ms extends go{constructor(e,t,i,r,s,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=i,this.gapTo=r,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(z3(e,this.from,this.gapFrom)||z3(e,this.gapTo,this.to)))return Fr.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Fr.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,t.content);return i?Fr.fromReplace(e,this.from,this.to,i):Fr.fail("Content does not fit in gap")}getMap(){return new wa([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ms(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return t.deletedAcross&&i.deletedAcross||r<t.pos||s>i.pos?null:new ms(t.pos,i.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ms(t.from,t.to,t.gapFrom,t.gapTo,_t.fromJSON(e,t.slice),t.insert,!!t.structure)}}go.jsonID("replaceAround",ms);function z3(n,e,t){let i=n.resolve(e),r=t-e,s=i.depth;for(;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0){let o=i.node(s).maybeChild(i.indexAfter(s));for(;r>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,r--}}return!1}function BTe(n,e,t,i){let r=[],s=[],o,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!i.isInSet(d)&&u.type.allowsMarkType(i.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,t),g=i.addToSet(d);for(let p=0;p<d.length;p++)d[p].isInSet(g)||(o&&o.to==h&&o.mark.eq(d[p])?o.to=f:r.push(o=new su(h,f,d[p])));a&&a.to==h?a.to=f:s.push(a=new Vh(h,f,i))}}),r.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function HTe(n,e,t,i){let r=[],s=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(i instanceof JI){let c=o.marks,u;for(;u=i.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let u=0;u<l.length;u++){let d=l[u],h;for(let f=0;f<r.length;f++){let g=r[f];g.step==s-1&&d.eq(r[f].style)&&(h=g)}h?(h.to=c,h.step=s):r.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),r.forEach(o=>n.step(new su(o.from,o.to,o.style)))}function poe(n,e,t,i=t.contentMatch,r=!0){let s=n.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=i.matchType(c.type);if(!d)o.push(new us(a,u,_t.empty));else{i=d;for(let h=0;h<c.marks.length;h++)t.allowsMarkType(c.marks[h].type)||n.step(new su(a,u,c.marks[h]));if(r&&c.isText&&t.whitespace!="pre"){let h,f=/\r?\n|\r/g,g;for(;h=f.exec(c.text);)g||(g=new _t(Ye.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),o.push(new us(a+h.index,a+h.index+h[0].length,g))}}a=u}if(!i.validEnd){let l=i.fillBefore(Ye.empty,!0);n.replace(a,a,new _t(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function VTe(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function sb(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let r=n.$from.node(i),s=n.$from.index(i),o=n.$to.indexAfter(i);if(i<n.depth&&r.canReplace(s,o,t))return i;if(i==0||r.type.spec.isolating||!VTe(r,s,o))break}return null}function zTe(n,e,t){let{$from:i,$to:r,depth:s}=e,o=i.before(s+1),a=r.after(s+1),l=o,c=a,u=Ye.empty,d=0;for(let g=s,p=!1;g>t;g--)p||i.index(g)>0?(p=!0,u=Ye.from(i.node(g).copy(u)),d++):l--;let h=Ye.empty,f=0;for(let g=s,p=!1;g>t;g--)p||r.after(g+1)<r.end(g)?(p=!0,h=Ye.from(r.node(g).copy(h)),f++):c++;n.step(new ms(l,c,o,a,new _t(u.append(h),d,f),u.size-d,!0))}function XF(n,e,t=null,i=n){let r=WTe(n,e),s=r&&$Te(i,e);return s?r.map(Ej).concat({type:e,attrs:t}).concat(s.map(Ej)):null}function Ej(n){return{type:n,attrs:null}}function WTe(n,e){let{parent:t,startIndex:i,endIndex:r}=n,s=t.contentMatchAt(i).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(i,r,o)?s:null}function $Te(n,e){let{parent:t,startIndex:i,endIndex:r}=n,s=t.child(i),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=i;l&&c<r;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:o}function UTe(n,e,t){let i=Ye.empty;for(let o=t.length-1;o>=0;o--){if(i.size){let a=t[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=Ye.from(t[o].type.create(t[o].attrs,i))}let r=e.start,s=e.end;n.step(new ms(r,s,r,s,new _t(i,0,0),t.length,!0))}function jTe(n,e,t,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{let l=typeof r=="function"?r(o):r;if(o.isTextblock&&!o.hasMarkup(i,l)&&GTe(n.doc,n.mapping.slice(s).map(a),i)){let c=null;if(i.schema.linebreakReplacement){let f=i.whitespace=="pre",g=!!i.contentMatch.matchType(i.schema.linebreakReplacement);f&&!g?c=!1:!f&&g&&(c=!0)}c===!1&&qTe(n,o,a,s),poe(n,n.mapping.slice(s).map(a,1),i,void 0,c===null);let u=n.mapping.slice(s),d=u.map(a,1),h=u.map(a+o.nodeSize,1);return n.step(new ms(d,h,d+1,h-1,new _t(Ye.from(i.create(l,null,o.marks)),0,0),1,!0)),c===!0&&KTe(n,o,a,s),!1}})}function KTe(n,e,t,i){e.forEach((r,s)=>{if(r.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(r.text);){let l=n.mapping.slice(i).map(t+1+s+o.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function qTe(n,e,t,i){e.forEach((r,s)=>{if(r.type==r.type.schema.linebreakReplacement){let o=n.mapping.slice(i).map(t+1+s);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function GTe(n,e,t){let i=n.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,t)}function YTe(n,e,t,i,r){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(i,null,r||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ms(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new _t(Ye.from(o),0,0),1,!0))}function x0(n,e,t=1,i){let r=n.resolve(e),s=r.depth-t,o=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,u=t-2;c>s;c--,u--){let d=r.node(c),h=r.index(c);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),g=i&&i[u+1];g&&(f=f.replaceChild(0,g.type.create(g.attrs)));let p=i&&i[u]||d;if(!d.canReplace(h+1,d.childCount)||!p.type.validContent(f))return!1}let a=r.indexAfter(s),l=i&&i[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}function ZTe(n,e,t=1,i){let r=n.doc.resolve(e),s=Ye.empty,o=Ye.empty;for(let a=r.depth,l=r.depth-t,c=t-1;a>l;a--,c--){s=Ye.from(r.node(a).copy(s));let u=i&&i[c];o=Ye.from(u?u.type.create(u.attrs,o):r.node(a).copy(o))}n.step(new us(e,e,new _t(s.append(o),t,t),!0))}function zf(n,e){let t=n.resolve(e),i=t.index();return moe(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(i,i+1)}function moe(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function eD(n,e,t=-1){let i=n.resolve(e);for(let r=i.depth;;r--){let s,o,a=i.index(r);if(r==i.depth?(s=i.nodeBefore,o=i.nodeAfter):t>0?(s=i.node(r+1),a++,o=i.node(r).maybeChild(a)):(s=i.node(r).maybeChild(a-1),o=i.node(r+1)),s&&!s.isTextblock&&moe(s,o)&&i.node(r).canReplace(a,a+1))return e;if(r==0)break;e=t<0?i.before(r):i.after(r)}}function XTe(n,e,t){let i=new us(e-t,e+t,_t.empty,!0);n.step(i)}function QTe(n,e,t){let i=n.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),t))return e;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let s=i.index(r);if(i.node(r).canReplaceWith(s,s,t))return i.before(r+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let s=i.indexAfter(r);if(i.node(r).canReplaceWith(s,s,t))return i.after(r+1);if(s<i.node(r).childCount)return null}return null}function voe(n,e,t){let i=n.resolve(e);if(!t.content.size)return e;let r=t.content;for(let s=0;s<t.openStart;s++)r=r.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=i.depth;o>=0;o--){let a=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,l=i.index(o)+(a>0?1:0),c=i.node(o),u=!1;if(s==1)u=c.canReplace(l,l,r);else{let d=c.contentMatchAt(l).findWrapping(r.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?i.pos:a<0?i.before(o+1):i.after(o+1)}return null}function tD(n,e,t=e,i=_t.empty){if(e==t&&!i.size)return null;let r=n.resolve(e),s=n.resolve(t);return boe(r,s,i)?new us(e,t,i):new JTe(r,s,i).fit()}function boe(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class JTe{constructor(e,t,i){this.$from=e,this.$to=t,this.unplaced=i,this.frontier=[],this.placed=Ye.empty;for(let r=0;r<=e.depth;r++){let s=e.node(r);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=Ye.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(e<0?this.$to:i.doc.resolve(e));if(!r)return null;let s=this.placed,o=i.depth,a=r.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new _t(s,o,a);return e>-1?new ms(i.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||i.pos!=this.$to.pos?new us(i.pos,r.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<e;i++){let s=t.firstChild;if(t.childCount>1&&(r=0),s.type.spec.isolating&&r<=i){e=i;break}t=s.content}for(let t=1;t<=2;t++)for(let i=t==1?e:this.unplaced.openStart;i>=0;i--){let r,s=null;i?(s=F4(this.unplaced.content,i-1).firstChild,r=s.content):r=this.unplaced.content;let o=r.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(t==1&&(o?c.matchType(o.type)||(d=c.fillBefore(Ye.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:a,parent:s,inject:d};if(t==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:i}=this.unplaced,r=F4(e,t);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new _t(e,t+1,Math.max(i,r.size+t>=e.size-i?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:i}=this.unplaced,r=F4(e,t);if(r.childCount<=1&&t>0){let s=e.size-t<=t+r.size;this.unplaced=new _t(x_(e,t-1,1),t-1,s?t-1:i)}else this.unplaced=new _t(x_(e,t,1),t,i)}placeNodes({sliceDepth:e,frontierDepth:t,parent:i,inject:r,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let p=0;p<s.length;p++)this.openFrontierNode(s[p]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[t];if(r){for(let p=0;p<r.childCount;p++)u.push(r.child(p));d=d.matchFragment(r)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let p=a.child(c),v=d.matchType(p.type);if(!v)break;c++,(c>1||l==0||p.content.size)&&(d=v,u.push(_oe(p.mark(h.allowedMarks(p.marks)),c==1?l:0,c==a.childCount?f:-1)))}let g=c==a.childCount;g||(f=-1),this.placed=k_(this.placed,t,Ye.from(u)),this.frontier[t].match=d,g&&f<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let p=0,v=a;p<f;p++){let b=v.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),v=b.content}this.unplaced=g?e==0?_t.empty:new _t(x_(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new _t(x_(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!B4(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:i,type:r}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=B4(e,t,r,i,s);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=B4(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=k_(this.placed,t.depth,t.fit)),e=t.move;for(let i=t.depth+1;i<=e.depth;i++){let r=e.node(i),s=r.type.contentMatch.fillBefore(r.content,!0,e.index(i));this.openFrontierNode(r.type,r.attrs,s)}return e}openFrontierNode(e,t=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=k_(this.placed,this.depth,Ye.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Ye.empty,!0);t.childCount&&(this.placed=k_(this.placed,this.frontier.length,t))}}function x_(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(x_(n.firstChild.content,e-1,t)))}function k_(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(k_(n.lastChild.content,e-1,t)))}function F4(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function _oe(n,e,t){if(e<=0)return n;let i=n.content;return e>1&&(i=i.replaceChild(0,_oe(i.firstChild,e-1,i.childCount==1?t-1:0))),e>0&&(i=n.type.contentMatch.fillBefore(i).append(i),t<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(Ye.empty,!0)))),n.copy(i)}function B4(n,e,t,i,r){let s=n.node(e),o=r?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let a=i.fillBefore(s.content,!0,o);return a&&!eIe(t,s.content,o)?a:null}function eIe(n,e,t){for(let i=t;i<e.childCount;i++)if(!n.allowsMarks(e.child(i).marks))return!0;return!1}function tIe(n){return n.spec.defining||n.spec.definingForContent}function nIe(n,e,t,i){if(!i.size)return n.deleteRange(e,t);let r=n.doc.resolve(e),s=n.doc.resolve(t);if(boe(r,s,i))return n.step(new us(e,t,i));let o=yoe(r,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(r.depth+1);o.unshift(a);for(let h=r.depth,f=r.pos-1;h>0;h--,f--){let g=r.node(h).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;o.indexOf(h)>-1?a=h:r.before(h)==f&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=i.openStart;for(let h=i.content,f=0;;f++){let g=h.firstChild;if(c.push(g),f==i.openStart)break;h=g.content}for(let h=u-1;h>=0;h--){let f=c[h],g=tIe(f.type);if(g&&!f.sameMarkup(r.node(Math.abs(a)-1)))u=h;else if(g||!f.type.isTextblock)break}for(let h=i.openStart;h>=0;h--){let f=(h+u+1)%(i.openStart+1),g=c[f];if(g)for(let p=0;p<o.length;p++){let v=o[(p+l)%o.length],b=!0;v<0&&(b=!1,v=-v);let _=r.node(v-1),y=r.index(v-1);if(_.canReplaceWith(y,y,g.type,g.marks))return n.replace(r.before(v),b?s.after(v):t,new _t(Coe(i.content,0,i.openStart,f),f,i.openEnd))}}let d=n.steps.length;for(let h=o.length-1;h>=0&&(n.replace(e,t,i),!(n.steps.length>d));h--){let f=o[h];f<0||(e=r.before(f),t=s.after(f))}}function Coe(n,e,t,i,r){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(Coe(s.content,e+1,t,i,s)))}if(e>i){let s=r.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(Ye.empty,!0))}return n}function iIe(n,e,t,i){if(!i.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let r=QTe(n.doc,e,i.type);r!=null&&(e=t=r)}n.replaceRange(e,t,new _t(Ye.from(i),0,0))}function rIe(n,e,t){let i=n.doc.resolve(e),r=n.doc.resolve(t),s=yoe(i,r);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return n.delete(i.start(a),r.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),r.indexAfter(a-1))))return n.delete(i.before(a),r.after(a))}for(let o=1;o<=i.depth&&o<=r.depth;o++)if(e-i.start(o)==i.depth-o&&t>i.end(o)&&r.end(o)-t!=r.depth-o)return n.delete(i.before(o),t);n.delete(e,t)}function yoe(n,e){let t=[],i=Math.min(n.depth,e.depth);for(let r=i;r>=0;r--){let s=n.start(r);if(s<n.pos-(n.depth-r)||e.end(r)>e.pos+(e.depth-r)||n.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(s==e.start(r)||r==n.depth&&r==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==s-1)&&t.push(r)}return t}class k0 extends go{constructor(e,t,i){super(),this.pos=e,this.attr=t,this.value=i}apply(e){let t=e.nodeAt(this.pos);if(!t)return Fr.fail("No node at attribute step's position");let i=Object.create(null);for(let s in t.attrs)i[s]=t.attrs[s];i[this.attr]=this.value;let r=t.type.create(i,null,t.marks);return Fr.fromReplace(e,this.pos,this.pos+1,new _t(Ye.from(r),0,t.isLeaf?0:1))}getMap(){return wa.empty}invert(e){return new k0(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new k0(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new k0(t.pos,t.attr,t.value)}}go.jsonID("attr",k0);class Iy extends go{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let i=e.type.create(t,e.content,e.marks);return Fr.ok(i)}getMap(){return wa.empty}invert(e){return new Iy(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Iy(t.attr,t.value)}}go.jsonID("docAttr",Iy);let f1=class extends Error{};f1=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};f1.prototype=Object.create(Error.prototype);f1.prototype.constructor=f1;f1.prototype.name="TransformError";class QF{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new S0}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new f1(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,i=_t.empty){let r=tD(this.doc,e,t,i);return r&&this.step(r),this}replaceWith(e,t,i){return this.replace(e,t,new _t(Ye.from(i),0,0))}delete(e,t){return this.replace(e,t,_t.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,i){return nIe(this,e,t,i),this}replaceRangeWith(e,t,i){return iIe(this,e,t,i),this}deleteRange(e,t){return rIe(this,e,t),this}lift(e,t){return zTe(this,e,t),this}join(e,t=1){return XTe(this,e,t),this}wrap(e,t){return UTe(this,e,t),this}setBlockType(e,t=e,i,r=null){return jTe(this,e,t,i,r),this}setNodeMarkup(e,t,i=null,r){return YTe(this,e,t,i,r),this}setNodeAttribute(e,t,i){return this.step(new k0(e,t,i)),this}setDocAttribute(e,t){return this.step(new Iy(e,t)),this}addNodeMark(e,t){return this.step(new zh(e,t)),this}removeNodeMark(e,t){if(!(t instanceof Pi)){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(t=t.isInSet(i.marks),!t)return this}return this.step(new h1(e,t)),this}split(e,t=1,i){return ZTe(this,e,t,i),this}addMark(e,t,i){return BTe(this,e,t,i),this}removeMark(e,t,i){return HTe(this,e,t,i),this}clearIncompatible(e,t,i){return poe(this,e,t,i),this}}const H4=Object.create(null);let tn=class{constructor(e,t,i){this.$anchor=e,this.$head=t,this.ranges=i||[new woe(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=_t.empty){let i=t.content.lastChild,r=null;for(let a=0;a<t.openEnd;a++)r=i,i=i.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?_t.empty:t),a==0&&Tj(e,s,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let i=e.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:o,$to:a}=r[s],l=e.mapping.slice(i),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),Tj(e,i,t.isInline?-1:1))}}static findFrom(e,t,i=!1){let r=e.parent.inlineContent?new Gt(e):sv(e.node(0),e.parent,e.pos,e.index(),t,i);if(r)return r;for(let s=e.depth-1;s>=0;s--){let o=t<0?sv(e.node(0),e.node(s),e.before(s+1),e.index(s),t,i):sv(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,i);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new oc(e.node(0))}static atStart(e){return sv(e,e,0,0,1)||new oc(e)}static atEnd(e){return sv(e,e,e.content.size,e.childCount,-1)||new oc(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=H4[t.type];if(!i)throw new RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in H4)throw new RangeError("Duplicate use of selection JSON ID "+e);return H4[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Gt.between(this.$anchor,this.$head).getBookmark()}};tn.prototype.visible=!0;class woe{constructor(e,t){this.$from=e,this.$to=t}}let Lj=!1;function Nj(n){!Lj&&!n.parent.inlineContent&&(Lj=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Gt extends tn{constructor(e,t=e){Nj(e),Nj(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let i=e.resolve(t.map(this.head));if(!i.parent.inlineContent)return tn.near(i);let r=e.resolve(t.map(this.anchor));return new Gt(r.parent.inlineContent?r:i,i)}replace(e,t=_t.empty){if(super.replace(e,t),t==_t.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof Gt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new nD(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Gt(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){let r=e.resolve(t);return new this(r,i==t?r:e.resolve(i))}static between(e,t,i){let r=e.pos-t.pos;if((!i||r)&&(i=r>=0?1:-1),!t.parent.inlineContent){let s=tn.findFrom(t,i,!0)||tn.findFrom(t,-i,!0);if(s)t=s.$head;else return tn.near(t,i)}return e.parent.inlineContent||(r==0?e=t:(e=(tn.findFrom(e,-i,!0)||tn.findFrom(e,i,!0)).$anchor,e.pos<t.pos!=r<0&&(e=t))),new Gt(e,t)}}tn.jsonID("text",Gt);class nD{constructor(e,t){this.anchor=e,this.head=t}map(e){return new nD(e.map(this.anchor),e.map(this.head))}resolve(e){return Gt.between(e.resolve(this.anchor),e.resolve(this.head))}}class $t extends tn{constructor(e){let t=e.nodeAfter,i=e.node(0).resolve(e.pos+t.nodeSize);super(e,i),this.node=t}map(e,t){let{deleted:i,pos:r}=t.mapResult(this.anchor),s=e.resolve(r);return i?tn.near(s):new $t(s)}content(){return new _t(Ye.from(this.node),0,0)}eq(e){return e instanceof $t&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new JF(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new $t(e.resolve(t.anchor))}static create(e,t){return new $t(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}$t.prototype.visible=!1;tn.jsonID("node",$t);class JF{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:i}=e.mapResult(this.anchor);return t?new nD(i,i):new JF(i)}resolve(e){let t=e.resolve(this.anchor),i=t.nodeAfter;return i&&$t.isSelectable(i)?new $t(t):tn.near(t)}}class oc extends tn{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=_t.empty){if(t==_t.empty){e.delete(0,e.doc.content.size);let i=tn.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new oc(e)}map(e){return new oc(e)}eq(e){return e instanceof oc}getBookmark(){return sIe}}tn.jsonID("all",oc);const sIe={map(){return this},resolve(n){return new oc(n)}};function sv(n,e,t,i,r,s=!1){if(e.inlineContent)return Gt.create(n,t);for(let o=i-(r>0?0:1);r>0?o<e.childCount:o>=0;o+=r){let a=e.child(o);if(a.isAtom){if(!s&&$t.isSelectable(a))return $t.create(n,t-(r<0?a.nodeSize:0))}else{let l=sv(n,a,t+r,r<0?a.childCount:0,r,s);if(l)return l}t+=a.nodeSize*r}return null}function Tj(n,e,t){let i=n.steps.length-1;if(i<e)return;let r=n.steps[i];if(!(r instanceof us||r instanceof ms))return;let s=n.mapping.maps[i],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection(tn.near(n.doc.resolve(o),t))}const Ij=1,gx=2,Dj=4;class oIe extends QF{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Ij)&~gx,this.storedMarks=null,this}get selectionSet(){return(this.updated&Ij)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=gx,this}ensureMarks(e){return Pi.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&gx)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~gx,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let i=this.selection;return t&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Pi.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,i){let r=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(i==null&&(i=t),i=i??t,!e)return this.deleteRange(t,i);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=i==t?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(t,i,r.text(e,s)),this.selection.empty||this.setSelection(tn.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Dj,this}get scrolledIntoView(){return(this.updated&Dj)>0}}function Mj(n,e){return!e||!n?n:n.bind(e)}class E_{constructor(e,t,i){this.name=e,this.init=Mj(t.init,i),this.apply=Mj(t.apply,i)}}const aIe=[new E_("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new E_("selection",{init(n,e){return n.selection||tn.atStart(e.doc)},apply(n){return n.selection}}),new E_("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,i){return i.selection.$cursor?n.storedMarks:null}}),new E_("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];let V4=class{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=aIe.slice(),t&&t.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new E_(i.key,i.spec.state,i))})}};class Tv{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=t){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],i=this.applyInner(e),r=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=r?r[o].n:0,c=r?r[o].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,i);if(u&&i.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!r){r=[];for(let d=0;d<this.config.plugins.length;d++)r.push(d<o?{state:i,n:t.length}:{state:this,n:0})}t.push(u),i=i.applyInner(u),s=!0}r&&(r[o]={state:i,n:t.length})}}if(!s)return{state:i,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Tv(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let s=i[r];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new oIe(this)}static create(e){let t=new V4(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new Tv(t);for(let r=0;r<t.fields.length;r++)i[t.fields[r].name]=t.fields[r].init(e,i);return i}reconfigure(e){let t=new V4(this.schema,e.plugins),i=t.fields,r=new Tv(t);for(let s=0;s<i.length;s++){let o=i[s].name;r[o]=this.hasOwnProperty(o)?this[o]:i[s].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[i],s=r.spec.state;s&&s.toJSON&&(t[i]=s.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new V4(e.schema,e.plugins),s=new Tv(r);return r.fields.forEach(o=>{if(o.name=="doc")s.doc=op.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=tn.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){s[o.name]=c.fromJSON.call(l,e,t[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function Soe(n,e,t){for(let i in n){let r=n[i];r instanceof Function?r=r.bind(e):i=="handleDOMEvents"&&(r=Soe(r,e,{})),t[i]=r}return t}class Ni{constructor(e){this.spec=e,this.props={},e.props&&Soe(e.props,this,this.props),this.key=e.key?e.key.key:xoe("plugin")}getState(e){return e[this.key]}}const z4=Object.create(null);function xoe(n){return n in z4?n+"$"+ ++z4[n]:(z4[n]=0,n+"$")}class zi{constructor(e="key"){this.key=xoe(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Is=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Dy=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let W3=null;const Uu=function(n,e,t){let i=W3||(W3=document.createRange());return i.setEnd(n,t??n.nodeValue.length),i.setStart(n,e||0),i},lIe=function(){W3=null},$p=function(n,e,t,i){return t&&(Rj(n,e,t,i,-1)||Rj(n,e,t,i,1))},cIe=/^(img|br|input|textarea|hr)$/i;function Rj(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:il(n))){let s=n.parentNode;if(!s||s.nodeType!=1||Qw(n)||cIe.test(n.nodeName)||n.contentEditable=="false")return!1;e=Is(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.contentEditable=="false")return!1;e=r<0?il(n):0}else return!1}}function il(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function uIe(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=il(n)}else if(n.parentNode&&!Qw(n))e=Is(n),n=n.parentNode;else return null}}function dIe(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Qw(n))e=Is(n)+1,n=n.parentNode;else return null}}function hIe(n,e,t){for(let i=e==0,r=e==il(n);i||r;){if(n==t)return!0;let s=Is(n);if(n=n.parentNode,!n)return!1;i=i&&s==0,r=r&&s==il(n)}}function Qw(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const iD=function(n){return n.focusNode&&$p(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function vg(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function fIe(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function gIe(n,e,t){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(e,t);if(i)return{node:i.offsetNode,offset:Math.min(il(i.offsetNode),i.offset)}}catch{}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(e,t);if(i)return{node:i.startContainer,offset:Math.min(il(i.startContainer),i.startOffset)}}}const pu=typeof navigator<"u"?navigator:null,Aj=typeof document<"u"?document:null,Wf=pu&&pu.userAgent||"",$3=/Edge\/(\d+)/.exec(Wf),koe=/MSIE \d/.exec(Wf),U3=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Wf),ra=!!(koe||U3||$3),lf=koe?document.documentMode:U3?+U3[1]:$3?+$3[1]:0,gc=!ra&&/gecko\/(\d+)/i.test(Wf);gc&&+(/Firefox\/(\d+)/.exec(Wf)||[0,0])[1];const j3=!ra&&/Chrome\/(\d+)/.exec(Wf),io=!!j3,Eoe=j3?+j3[1]:0,Do=!ra&&!!pu&&/Apple Computer/.test(pu.vendor),g1=Do&&(/Mobile\/\w+/.test(Wf)||!!pu&&pu.maxTouchPoints>2),Qa=g1||(pu?/Mac/.test(pu.platform):!1),pIe=pu?/Win/.test(pu.platform):!1,ql=/Android \d/.test(Wf),Jw=!!Aj&&"webkitFontSmoothing"in Aj.documentElement.style,mIe=Jw?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function vIe(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Mu(n,e){return typeof n=="number"?n:n[e]}function bIe(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,i=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*i}}function Oj(n,e,t){let i=n.someProp("scrollThreshold")||0,r=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;o=Dy(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?vIe(s):bIe(a),u=0,d=0;if(e.top<c.top+Mu(i,"top")?d=-(c.top-e.top+Mu(r,"top")):e.bottom>c.bottom-Mu(i,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Mu(r,"top")-c.top:e.bottom-c.bottom+Mu(r,"bottom")),e.left<c.left+Mu(i,"left")?u=-(c.left-e.left+Mu(r,"left")):e.right>c.right-Mu(i,"right")&&(u=e.right-c.right+Mu(r,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,f=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-h,p=a.scrollTop-f;e={left:e.left-g,top:e.top-p,right:e.right-g,bottom:e.bottom-p}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function _Ie(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),i,r;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){i=a,r=l.top;break}}return{refDOM:i,refTop:r,stack:Loe(n.dom)}}function Loe(n){let e=[],t=n.ownerDocument;for(let i=n;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=t);i=Dy(i));return e}function CIe({refDOM:n,refTop:e,stack:t}){let i=n?n.getBoundingClientRect().top:0;Noe(t,i==0?0:i-e)}function Noe(n,e){for(let t=0;t<n.length;t++){let{dom:i,top:r,left:s}=n[t];i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}let Hm=null;function yIe(n){if(n.setActive)return n.setActive();if(Hm)return n.focus(Hm);let e=Loe(n);n.focus(Hm==null?{get preventScroll(){return Hm={preventScroll:!0},!0}}:void 0),Hm||(Hm=!1,Noe(e,0))}function Toe(n,e){let t,i=2e8,r,s=0,o=e.top,a=e.top,l,c;for(let u=n.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Uu(u).getClientRects();else continue;for(let f=0;f<h.length;f++){let g=h[f];if(g.top<=o&&g.bottom>=a){o=Math.max(g.bottom,o),a=Math.min(g.top,a);let p=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(p<i){t=u,i=p,r=p&&t.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,u.nodeType==1&&p&&(s=d+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!l&&g.left<=e.left&&g.right>=e.left&&(l=u,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!t&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(s=d+1)}}return!t&&l&&(t=l,r=c,i=0),t&&t.nodeType==3?wIe(t,r):!t||i&&t.nodeType==1?{node:n,offset:s}:Toe(t,r)}function wIe(n,e){let t=n.nodeValue.length,i=document.createRange();for(let r=0;r<t;r++){i.setEnd(n,r+1),i.setStart(n,r);let s=ch(i,1);if(s.top!=s.bottom&&eB(e,s))return{node:n,offset:r+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function eB(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function SIe(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function xIe(n,e,t){let{node:i,offset:r}=Toe(e,t),s=-1;if(i.nodeType==1&&!i.firstChild){let o=i.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(i,r,s)}function kIe(n,e,t,i){let r=-1;for(let s=e,o=!1;s!=n.dom;){let a=n.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&(!o&&l.left>i.left||l.top>i.top?r=a.posBefore:(!o&&l.right<i.left||l.bottom<i.top)&&(r=a.posAfter),o=!0),!a.contentDOM&&r<0&&!a.node.isText)return(a.node.isBlock?i.top<(l.top+l.bottom)/2:i.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return r>-1?r:n.docView.posFromDOM(e,t,-1)}function Ioe(n,e,t){let i=n.childNodes.length;if(i&&t.top<t.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-t.top)/(t.bottom-t.top))-2)),s=r;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(eB(e,c))return Ioe(o,e,c)}}if((s=(s+1)%i)==r)break}return n}function EIe(n,e){let t=n.dom.ownerDocument,i,r=0,s=gIe(t,e.left,e.top);s&&({node:i,offset:r}=s);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!eB(e,c)||(o=Ioe(n.dom,e,c),!o))return null}if(Do)for(let c=o;i&&c;c=Dy(c))c.draggable&&(i=void 0);if(o=SIe(o,e),i){if(gc&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let u=i.childNodes[r],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&r++}let c;Jw&&r&&i.nodeType==1&&(c=i.childNodes[r-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&r--,i==n.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(a=kIe(n,i,r,e))}a==null&&(a=xIe(n,o,e));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Pj(n){return n.top<n.bottom||n.left<n.right}function ch(n,e){let t=n.getClientRects();if(t.length){let i=t[e<0?0:t.length-1];if(Pj(i))return i}return Array.prototype.find.call(t,Pj)||n.getBoundingClientRect()}const LIe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Doe(n,e,t){let{node:i,offset:r,atom:s}=n.docView.domFromPos(e,t<0?-1:1),o=Jw||gc;if(i.nodeType==3)if(o&&(LIe.test(i.nodeValue)||(t<0?!r:r==i.nodeValue.length))){let l=ch(Uu(i,r,r),t);if(gc&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let c=ch(Uu(i,r-1,r-1),-1);if(c.top==l.top){let u=ch(Uu(i,r,r+1),-1);if(u.top!=l.top)return $b(u,u.left<c.left)}}return l}else{let l=r,c=r,u=t<0?1:-1;return t<0&&!r?(c++,u=-1):t>=0&&r==i.nodeValue.length?(l--,u=1):t<0?l--:c++,$b(ch(Uu(i,l,c),u),u<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&r&&(t<0||r==il(i))){let l=i.childNodes[r-1];if(l.nodeType==1)return W4(l.getBoundingClientRect(),!1)}if(s==null&&r<il(i)){let l=i.childNodes[r];if(l.nodeType==1)return W4(l.getBoundingClientRect(),!0)}return W4(i.getBoundingClientRect(),t>=0)}if(s==null&&r&&(t<0||r==il(i))){let l=i.childNodes[r-1],c=l.nodeType==3?Uu(l,il(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return $b(ch(c,1),!1)}if(s==null&&r<il(i)){let l=i.childNodes[r];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Uu(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return $b(ch(c,-1),!0)}return $b(ch(i.nodeType==3?Uu(i):i,-t),t>=0)}function $b(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function W4(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Moe(n,e,t){let i=n.state,r=n.root.activeElement;i!=e&&n.updateState(e),r!=n.dom&&n.focus();try{return t()}finally{i!=e&&n.updateState(i),r!=n.dom&&r&&r.focus()}}function NIe(n,e,t){let i=e.selection,r=t=="up"?i.$from:i.$to;return Moe(n,e,()=>{let{node:s}=n.docView.domFromPos(r.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=Doe(n,r.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Uu(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const TIe=/[\u0590-\u08ac]/;function IIe(n,e,t){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,s=!r,o=r==i.parent.content.size,a=n.domSelection();return a?!TIe.test(i.parent.textContent)||!a.modify?t=="left"||t=="backward"?s:o:Moe(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=n.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",t,"character");let f=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:g,focusOffset:p}=n.domSelectionRange(),v=g&&!f.contains(g.nodeType==1?g:g.parentNode)||l==g&&c==p;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),v}):i.pos==i.start()||i.pos==i.end()}let Fj=null,Bj=null,Hj=!1;function DIe(n,e,t){return Fj==e&&Bj==t?Hj:(Fj=e,Bj=t,Hj=t=="up"||t=="down"?NIe(n,e,t):IIe(n,e,t))}const dl=0,Vj=1,Ug=2,mu=3;class eS{constructor(e,t,i,r){this.parent=e,this.children=t,this.dom=i,this.contentDOM=r,this.dirty=dl,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,i=this.posAtStart;;t++){let r=this.children[t];if(r==e)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let r;if(e==this.dom&&this.contentDOM)r=t>Is(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!1;break}if(s.previousSibling)break}if(r==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!0;break}if(s.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let i=!0,r=e;r;r=r.parentNode){let s=this.getDesc(r),o;if(s&&(!t||s.node))if(i&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))i=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let i=t;i;i=i.parent)if(i==this)return t}posFromDOM(e,t,i){for(let r=e;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(e,t,i)}return-1}descAt(e){for(let t=0,i=0;t<this.children.length;t++){let r=this.children[t],s=i+r.size;if(i==e&&s!=i){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<s)return r.descAt(e-i-r.border);i=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,r=0;for(let s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.size;if(a>e||o instanceof Aoe){r=e-s;break}s=a}if(r)return this.children[i].domFromPos(r-this.children[i].border,t);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof Roe&&s.side>=0;i--);if(t<=0){let s,o=!0;for(;s=i?this.children[i-1]:null,!(!s||s.dom.parentNode==this.contentDOM);i--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Is(s.dom)+1:0}}else{let s,o=!0;for(;s=i<this.children.length?this.children[i]:null,!(!s||s.dom.parentNode==this.contentDOM);i++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Is(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let o=i,a=0;;a++){let l=this.children[a],c=o+l.size;if(r==-1&&e<=c){let u=o+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=Is(h.dom)+1;break}e-=h.size}r==-1&&(r=0)}if(r>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Is(d.dom);break}t+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:i}=this.domFromPos(e,0);if(t.nodeType!=1||i==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[i]}setSelection(e,t,i,r=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let h=0,f=0;h<this.children.length;h++){let g=this.children[h],p=f+g.size;if(s>f&&o<p)return g.setSelection(e-f-g.border,t-f-g.border,i,r);f=p}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=i.getSelection(),u=!1;if((gc||Do)&&e==t){let{node:h,offset:f}=a;if(h.nodeType==3){if(u=!!(f&&h.nodeValue[f-1]==`
`),u&&f==h.nodeValue.length)for(let g=h,p;g;g=g.parentNode){if(p=g.nextSibling){p.nodeName=="BR"&&(a=l={node:p.parentNode,offset:Is(p)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=h.childNodes[f-1];u=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(gc&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(r=!0)}if(!(r||u&&Do)&&$p(a.node,a.offset,c.anchorNode,c.anchorOffset)&&$p(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==t)&&!u){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>t){let f=a;a=l,l=f}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let i=0,r=0;r<this.children.length;r++){let s=this.children[r],o=i+s.size;if(i==o?e<=o&&t>=i:e<o&&t>i){let a=i+s.border,l=o-s.border;if(e>=a&&t<=l){this.dirty=e==i||t==o?Ug:Vj,e==a&&t==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=mu:s.markDirty(e-a,t-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ug:mu}i=o}this.dirty=Ug}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let i=e==1?Ug:Vj;t.dirty<i&&(t.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Roe extends eS{constructor(e,t,i,r){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(i,()=>{if(!s)return r;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==dl&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class MIe extends eS{constructor(e,t,i,r){super(e,[],t,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Up extends eS{constructor(e,t,i,r){super(e,[],i,r),this.mark=t}static create(e,t,i,r){let s=r.nodeViews[t.type.name],o=s&&s(t,r,i);return(!o||!o.dom)&&(o=um.renderSpec(document,t.type.spec.toDOM(t,i),null,t.attrs)),new Up(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&mu||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=mu&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=dl){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=dl}}slice(e,t,i){let r=Up.create(this.parent,this.mark,!0,i),s=this.children,o=this.size;t<o&&(s=q3(s,t,o,i)),e>0&&(s=q3(s,0,e,i));for(let a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r}}class cf extends eS{constructor(e,t,i,r,s,o,a,l,c){super(e,[],s,o),this.node=t,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=a}static create(e,t,i,r,s,o){let a=s.nodeViews[t.type.name],l,c=a&&a(t,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},i,r),u=c&&c.dom,d=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=um.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!d&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let h=u;return u=Foe(u,i,t),c?l=new RIe(e,t,i,r,u,d||null,h,c,s,o+1):t.isText?new rD(e,t,i,r,u,h,s):new cf(e,t,i,r,u,d||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let i=this.children[t];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ye.empty)}return e}matchesNode(e,t,i){return this.dirty==dl&&e.eq(this.node)&&R2(t,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let i=this.node.inlineContent,r=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new OIe(this,o&&o.node,e);BIe(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,i,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Pi.none:this.node.child(u).marks,i,e),l.placeWidget(c,e,r)},(c,u,d,h)=>{l.syncToMarks(c.marks,i,e);let f;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>r&&e.state.selection.to<r+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,f,e)||l.updateNextNode(c,u,d,e,h,r)||l.addNode(c,u,d,e,r),r+=c.nodeSize}),l.syncToMarks([],i,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ug)&&(o&&this.protectLocalComposition(e,o),Ooe(this.contentDOM,this.children,e),g1&&HIe(this.dom))}localCompositionInfo(e,t){let{from:i,to:r}=e.state.selection;if(!(e.state.selection instanceof Gt)||i<t||r>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=VIe(this.node.content,o,i-t,r-t);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:i,text:r}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new MIe(this,s,t,r);e.input.compositionNodes.push(o),this.children=q3(this.children,i,i+r.length,e,o)}update(e,t,i,r){return this.dirty==mu||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,i,r),!0)}updateInner(e,t,i,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=dl}updateOuterDeco(e){if(R2(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=Poe(this.dom,this.nodeDOM,K3(this.outerDeco,this.node,t),K3(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function zj(n,e,t,i,r){Foe(i,e,n);let s=new cf(void 0,n,e,t,i,i,i,r,0);return s.contentDOM&&s.updateChildren(r,0),s}class rD extends cf{constructor(e,t,i,r,s,o,a){super(e,t,i,r,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,i,r){return this.dirty==mu||this.dirty!=dl&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=dl||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=dl,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,i){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,i){let r=this.node.cut(e,t),s=document.createTextNode(r.text);return new rD(this.parent,r,this.outerDeco,this.innerDeco,s,s,i)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=mu)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Aoe extends eS{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==dl&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class RIe extends cf{constructor(e,t,i,r,s,o,a,l,c,u){super(e,t,i,r,s,o,a,c,u),this.spec=l}update(e,t,i,r){if(this.dirty==mu)return!1;if(this.spec.update){let s=this.spec.update(e,t,i);return s&&this.updateInner(e,t,i,r),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,i,r){this.spec.setSelection?this.spec.setSelection(e,t,i):super.setSelection(e,t,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Ooe(n,e,t){let i=n.firstChild,r=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==n){for(;a!=i;)i=Wj(i),r=!0;i=i.nextSibling}else r=!0,n.insertBefore(a,i);if(o instanceof Up){let l=i?i.previousSibling:n.lastChild;Ooe(o.contentDOM,o.children,t),i=l?l.nextSibling:n.firstChild}}for(;i;)i=Wj(i),r=!0;r&&t.trackWrites==n&&(t.trackWrites=null)}const tC=function(n){n&&(this.nodeName=n)};tC.prototype=Object.create(null);const jg=[new tC];function K3(n,e,t){if(n.length==0)return jg;let i=t?jg[0]:new tC,r=[i];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&r.push(i=new tC(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&r.length==1&&r.push(i=new tC(e.isInline?"span":"div")),a=="class"?i.class=(i.class?i.class+" ":"")+l:a=="style"?i.style=(i.style?i.style+";":"")+l:a!="nodeName"&&(i[a]=l))}}}return r}function Poe(n,e,t,i){if(t==jg&&i==jg)return e;let r=e;for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(s){let l;a&&a.nodeName==o.nodeName&&r!=n&&(l=r.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(r),a=jg[0]),r=l}AIe(r,a||jg[0],o)}return r}function AIe(n,e,t){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in t)&&n.removeAttribute(i);for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&t[i]!=e[i]&&n.setAttribute(i,t[i]);if(e.class!=t.class){let i=e.class?e.class.split(" ").filter(Boolean):[],r=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.remove(i[s]);for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.add(r[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(e.style);)n.style.removeProperty(r[1])}t.style&&(n.style.cssText+=t.style)}}function Foe(n,e,t){return Poe(n,n,jg,K3(e,t,n.nodeType!=1))}function R2(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Wj(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class OIe{constructor(e,t,i){this.lock=t,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=PIe(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,i){let r=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;r<o&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&e[r].type.spec.spanning!==!1;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=dl,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Up.create(this.top,e[s],t,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,i,r){let s=-1,o;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,i))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,i)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,i,r,s){let o=this.top.children[r];return o.dirty==mu&&o.dom==o.contentDOM&&(o.dirty=Ug),o.update(e,t,i,s)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}e=t}}updateNextNode(e,t,i,r,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof cf){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=mu&&R2(t,l.outerDeco));if(!h&&l.update(e,t,i,r))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,t,i,r,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Ug,d.updateChildren(r,o+1),d.dirty=dl),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,i,r,s,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!R2(i,e.outerDeco)||!r.eq(e.innerDeco))return null;let a=cf.create(this.top,t,i,r,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,i,r,s){let o=cf.create(this.top,e,t,i,r,s);o.contentDOM&&o.updateChildren(r,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let s=new Roe(this.top,e,t,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Up;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof rD)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Do||io)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new Aoe(this.top,[],i,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function PIe(n,e){let t=e,i=t.children.length,r=n.childCount,s=new Map,o=[];e:for(;r>0;){let a;for(;;)if(i){let c=t.children[i-1];if(c instanceof Up)t=c,i=c.children.length;else{a=c,i--;break}}else{if(t==e)break e;i=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(r-1))break;--r,s.set(a,r),o.push(a)}}return{index:r,matched:s,matches:o.reverse()}}function FIe(n,e){return n.type.side-e.type.side}function BIe(n,e,t,i){let r=e.locals(n),s=0;if(r.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);i(u,r,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<r.length&&r[o].to==s;){let v=r[o++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort(FIe);for(let v=0;v<d.length;v++)t(d[v],c,!!l)}else t(u,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<n.childCount)f=c,h=n.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);let g=s+h.nodeSize;if(h.isText){let v=g;o<r.length&&r[o].from<v&&(v=r[o].from);for(let b=0;b<a.length;b++)a[b].to<v&&(v=a[b].to);v<g&&(l=h.cut(v-s),h=h.cut(0,v-s),g=v,f=-1)}else for(;o<r.length&&r[o].to<g;)o++;let p=h.isInline&&!h.isLeaf?a.filter(v=>!v.inline):a.slice();i(h,p,e.forChild(s,h),f),s=g}}function HIe(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function VIe(n,e,t,i){for(let r=0,s=0;r<n.childCount&&s<=i;){let o=n.child(r++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;r<n.childCount;){let c=n.child(r++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=t){if(s>=i&&l.slice(i-e.length-a,i-a)==e)return i-e.length;let c=a<i?l.lastIndexOf(e,i-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==i&&l.length>=i+e.length-a&&l.slice(i-a,i-a+e.length)==e)return i}}return-1}function q3(n,e,t,i,r){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=t||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,i)),r&&(s.push(r),r=void 0),u>t&&s.push(l.slice(t-c,l.size,i)))}return s}function tB(n,e=null){let t=n.domSelectionRange(),i=n.state.doc;if(!t.focusNode)return null;let r=n.docView.nearestDesc(t.focusNode),s=r&&r.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=i.resolve(o),l,c;if(iD(t)){for(l=o;r&&!r.node;)r=r.parent;let d=r.node;if(r&&d.isAtom&&$t.isSelectable(d)&&r.parent&&!(d.isInline&&hIe(t.focusNode,t.focusOffset,r.dom))){let h=r.posBefore;c=new $t(o==h?a:i.resolve(h))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let d=o,h=o;for(let f=0;f<t.rangeCount;f++){let g=t.getRangeAt(f);d=Math.min(d,n.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,n.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[l,o]=h==n.state.selection.anchor?[h,d]:[d,h],a=i.resolve(o)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let u=i.resolve(l);if(!c){let d=e=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;c=nB(n,u,a,d)}return c}function Boe(n){return n.editable?n.hasFocus():Voe(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Sd(n,e=!1){let t=n.state.selection;if(Hoe(n,t),!!Boe(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&io){let i=n.domSelectionRange(),r=n.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&$p(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)WIe(n);else{let{anchor:i,head:r}=t,s,o;$j&&!(t instanceof Gt)&&(t.$from.parent.inlineContent||(s=Uj(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=Uj(n,t.to))),n.docView.setSelection(i,r,n.root,e),$j&&(s&&jj(s),o&&jj(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&zIe(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const $j=Do||io&&Eoe<63;function Uj(n,e){let{node:t,offset:i}=n.docView.domFromPos(e,0),r=i<t.childNodes.length?t.childNodes[i]:null,s=i?t.childNodes[i-1]:null;if(Do&&r&&r.contentEditable=="false")return $4(r);if((!r||r.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(r)return $4(r);if(s)return $4(s)}}function $4(n){return n.contentEditable="true",Do&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function jj(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function zIe(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),i=t.anchorNode,r=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=i||t.anchorOffset!=r)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Boe(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function WIe(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let i=n.cursorWrapper.dom,r=i.nodeName=="IMG";r?t.setStart(i.parentNode,Is(i)+1):t.setStart(i,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!r&&!n.state.selection.visible&&ra&&lf<=11&&(i.disabled=!0,i.disabled=!1)}function Hoe(n,e){if(e instanceof $t){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Kj(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Kj(n)}function Kj(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function nB(n,e,t,i){return n.someProp("createSelectionBetween",r=>r(n,e,t))||Gt.between(e,t,i)}function qj(n){return n.editable&&!n.hasFocus()?!1:Voe(n)}function Voe(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function $Ie(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return $p(e.node,e.offset,t.anchorNode,t.anchorOffset)}function G3(n,e){let{$anchor:t,$head:i}=n.selection,r=e>0?t.max(i):t.min(i),s=r.parent.inlineContent?r.depth?n.doc.resolve(e>0?r.after():r.before()):null:r;return s&&tn.findFrom(s,e)}function ph(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Gj(n,e,t){let i=n.state.selection;if(i instanceof Gt)if(t.indexOf("s")>-1){let{$head:r}=i,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(r.pos+s.nodeSize*(e<0?-1:1));return ph(n,new Gt(i.$anchor,o))}else if(i.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let r=G3(n.state,e);return r&&r instanceof $t?ph(n,r):!1}else if(!(Qa&&t.indexOf("m")>-1)){let r=i.$head,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?r.pos-s.nodeSize:r.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?$t.isSelectable(s)?ph(n,new $t(e<0?n.state.doc.resolve(r.pos-s.nodeSize):r)):Jw?ph(n,new Gt(n.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(i instanceof $t&&i.node.isInline)return ph(n,new Gt(e>0?i.$to:i.$from));{let r=G3(n.state,e);return r?ph(n,r):!1}}}function A2(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function nC(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Vm(n,e){return e<0?UIe(n):jIe(n)}function UIe(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let r,s,o=!1;for(gc&&t.nodeType==1&&i<A2(t)&&nC(t.childNodes[i],-1)&&(o=!0);;)if(i>0){if(t.nodeType!=1)break;{let a=t.childNodes[i-1];if(nC(a,-1))r=t,s=--i;else if(a.nodeType==3)t=a,i=t.nodeValue.length;else break}}else{if(zoe(t))break;{let a=t.previousSibling;for(;a&&nC(a,-1);)r=t.parentNode,s=Is(a),a=a.previousSibling;if(a)t=a,i=A2(t);else{if(t=t.parentNode,t==n.dom)break;i=0}}}o?Y3(n,t,i):r&&Y3(n,r,s)}function jIe(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let r=A2(t),s,o;for(;;)if(i<r){if(t.nodeType!=1)break;let a=t.childNodes[i];if(nC(a,1))s=t,o=++i;else break}else{if(zoe(t))break;{let a=t.nextSibling;for(;a&&nC(a,1);)s=a.parentNode,o=Is(a)+1,a=a.nextSibling;if(a)t=a,i=0,r=A2(t);else{if(t=t.parentNode,t==n.dom)break;i=r=0}}}s&&Y3(n,s,o)}function zoe(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function KIe(n,e){for(;n&&e==n.childNodes.length&&!Qw(n);)e=Is(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function qIe(n,e){for(;n&&!e&&!Qw(n);)e=Is(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Y3(n,e,t){if(e.nodeType!=3){let s,o;(o=KIe(e,t))?(e=o,t=0):(s=qIe(e,t))&&(e=s,t=s.nodeValue.length)}let i=n.domSelection();if(!i)return;if(iD(i)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(e,t);n.domObserver.setCurSelection();let{state:r}=n;setTimeout(()=>{n.state==r&&Sd(n)},50)}function Yj(n,e){let t=n.state.doc.resolve(e);if(!(io||pIe)&&t.parent.inlineContent){let r=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left<r.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left>r.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Zj(n,e,t){let i=n.state.selection;if(i instanceof Gt&&!i.empty||t.indexOf("s")>-1||Qa&&t.indexOf("m")>-1)return!1;let{$from:r,$to:s}=i;if(!r.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=G3(n.state,e);if(o&&o instanceof $t)return ph(n,o)}if(!r.parent.inlineContent){let o=e<0?r:s,a=i instanceof oc?tn.near(o,e):tn.findFrom(o,e);return a?ph(n,a):!1}return!1}function Xj(n,e){if(!(n.state.selection instanceof Gt))return!0;let{$head:t,$anchor:i,empty:r}=n.state.selection;if(!t.sameParent(i))return!0;if(!r)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function Qj(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function GIe(n){if(!Do||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;Qj(n,i,"true"),setTimeout(()=>Qj(n,i,"false"),20)}return!1}function YIe(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function ZIe(n,e){let t=e.keyCode,i=YIe(e);if(t==8||Qa&&t==72&&i=="c")return Xj(n,-1)||Vm(n,-1);if(t==46&&!e.shiftKey||Qa&&t==68&&i=="c")return Xj(n,1)||Vm(n,1);if(t==13||t==27)return!0;if(t==37||Qa&&t==66&&i=="c"){let r=t==37?Yj(n,n.state.selection.from)=="ltr"?-1:1:-1;return Gj(n,r,i)||Vm(n,r)}else if(t==39||Qa&&t==70&&i=="c"){let r=t==39?Yj(n,n.state.selection.from)=="ltr"?1:-1:1;return Gj(n,r,i)||Vm(n,r)}else{if(t==38||Qa&&t==80&&i=="c")return Zj(n,-1,i)||Vm(n,-1);if(t==40||Qa&&t==78&&i=="c")return GIe(n)||Zj(n,1,i)||Vm(n,1);if(i==(Qa?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Woe(n,e){n.someProp("transformCopied",f=>{e=f(e,n)});let t=[],{content:i,openStart:r,openEnd:s}=e;for(;r>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,s--;let f=i.firstChild;t.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),i=f.content}let o=n.someProp("clipboardSerializer")||um.fromSchema(n.state.schema),a=Goe(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=qoe[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let g=a.createElement(u[f]);for(;l.firstChild;)g.appendChild(l.firstChild);l.appendChild(g),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${r} ${s}${d?` -${d}`:""} ${JSON.stringify(t)}`);let h=n.someProp("clipboardTextSerializer",f=>f(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function $oe(n,e,t,i,r){let s=r.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(i||s||!t);if(l){if(n.someProp("transformPastedText",h=>{e=h(e,s||i,n)}),s)return e?new _t(Ye.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):_t.empty;let d=n.someProp("clipboardTextParser",h=>h(e,r,i,n));if(d)a=d;else{let h=r.marks(),{schema:f}=n.state,g=um.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(p=>{let v=o.appendChild(document.createElement("p"));p&&v.appendChild(g.serializeNode(f.text(p,h)))})}}else n.someProp("transformPastedHTML",d=>{t=d(t,n)}),o=eDe(t),Jw&&tDe(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||J_.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:r,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!XIe.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=nDe(Jj(a,+u[1],+u[2]),u[4]);else if(a=_t.maxOpen(QIe(a.content,r),!0),a.openStart||a.openEnd){let d=0,h=0;for(let f=a.content.firstChild;d<a.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=Jj(a,d,h)}return n.someProp("transformPasted",d=>{a=d(a,n)}),a}const XIe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function QIe(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=r.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&joe(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Koe(o[o.length-1],s.length));let u=Uoe(a,l);o.push(u),r=r.matchType(u.type),s=l}}),o)return Ye.from(o)}return n}function Uoe(n,e,t=0){for(let i=e.length-1;i>=t;i--)n=e[i].create(null,Ye.from(n));return n}function joe(n,e,t,i,r){if(r<n.length&&r<e.length&&n[r]==e[r]){let s=joe(n,e,t,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==n.length-1?t.type:n[r+1]))return i.copy(i.content.append(Ye.from(Uoe(t,n,r+1))))}}function Koe(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Koe(n.lastChild,e-1)),i=n.contentMatchAt(n.childCount).fillBefore(Ye.empty,!0);return n.copy(t.append(i))}function Z3(n,e,t,i,r,s){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(s=0),r<i-1&&(a=Z3(a,e,t,i,r+1,s)),r>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ye.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function Jj(n,e,t){return e<n.openStart&&(n=new _t(Z3(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new _t(Z3(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const qoe={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let eK=null;function Goe(){return eK||(eK=document.implementation.createHTMLDocument("title"))}function JIe(n){let e=window.trustedTypes;return e?e.createPolicy("detachedDocument",{createHTML:t=>t}).createHTML(n):n}function eDe(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Goe().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),r;if((r=i&&qoe[i[1].toLowerCase()])&&(n=r.map(s=>"<"+s+">").join("")+n+r.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=JIe(n),r)for(let s=0;s<r.length;s++)t=t.querySelector(r[s])||t;return t}function tDe(n){let e=n.querySelectorAll(io?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let i=e[t];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function nDe(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return n}let{content:r,openStart:s,openEnd:o}=n;for(let a=i.length-2;a>=0;a-=2){let l=t.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;r=Ye.from(l.create(i[a+1],r)),s++,o++}return new _t(r,s,o)}const Mo={},Ro={},iDe={touchstart:!0,touchmove:!0};class rDe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function sDe(n){for(let e in Mo){let t=Mo[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>{aDe(n,i)&&!iB(n,i)&&(n.editable||!(i.type in Ro))&&t(n,i)},iDe[e]?{passive:!0}:void 0)}Do&&n.dom.addEventListener("input",()=>null),X3(n)}function Wh(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function oDe(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function X3(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>iB(n,i))})}function iB(n,e){return n.someProp("handleDOMEvents",t=>{let i=t[e.type];return i?i(n,e)||e.defaultPrevented:!1})}function aDe(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function lDe(n,e){!iB(n,e)&&Mo[e.type]&&(n.editable||!(e.type in Ro))&&Mo[e.type](n,e)}Ro.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Zoe(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ql&&io&&t.keyCode==13)))if(n.domObserver.selectionChanged(n.domSelectionRange())?n.domObserver.flush():t.keyCode!=229&&n.domObserver.forceFlush(),g1&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",r=>r(n,vg(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,t))||ZIe(n,t)?t.preventDefault():Wh(n,"key")};Ro.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Ro.keypress=(n,e)=>{let t=e;if(Zoe(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Qa&&t.metaKey)return;if(n.someProp("handleKeyPress",r=>r(n,t))){t.preventDefault();return}let i=n.state.selection;if(!(i instanceof Gt)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(t.charCode);!/[\r\n]/.test(r)&&!n.someProp("handleTextInput",s=>s(n,i.$from.pos,i.$to.pos,r))&&n.dispatch(n.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}};function sD(n){return{left:n.clientX,top:n.clientY}}function cDe(n,e){let t=e.x-n.clientX,i=e.y-n.clientY;return t*t+i*i<100}function rB(n,e,t,i,r){if(i==-1)return!1;let s=n.state.doc.resolve(i);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,a=>o>s.depth?a(n,t,s.nodeAfter,s.before(o),r,!0):a(n,t,s.node(o),s.before(o),r,!1)))return!0;return!1}function E0(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let i=n.state.tr.setSelection(e);i.setMeta("pointer",!0),n.dispatch(i)}function uDe(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),i=t.nodeAfter;return i&&i.isAtom&&$t.isSelectable(i)?(E0(n,new $t(t)),!0):!1}function dDe(n,e){if(e==-1)return!1;let t=n.state.selection,i,r;t instanceof $t&&(i=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if($t.isSelectable(a)){i&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?r=s.before(t.$from.depth):r=s.before(o);break}}return r!=null?(E0(n,$t.create(n.state.doc,r)),!0):!1}function hDe(n,e,t,i,r){return rB(n,"handleClickOn",e,t,i)||n.someProp("handleClick",s=>s(n,e,i))||(r?dDe(n,t):uDe(n,t))}function fDe(n,e,t,i){return rB(n,"handleDoubleClickOn",e,t,i)||n.someProp("handleDoubleClick",r=>r(n,e,i))}function gDe(n,e,t,i){return rB(n,"handleTripleClickOn",e,t,i)||n.someProp("handleTripleClick",r=>r(n,e,i))||pDe(n,t,i)}function pDe(n,e,t){if(t.button!=0)return!1;let i=n.state.doc;if(e==-1)return i.inlineContent?(E0(n,Gt.create(i,0,i.content.size)),!0):!1;let r=i.resolve(e);for(let s=r.depth+1;s>0;s--){let o=s>r.depth?r.nodeAfter:r.node(s),a=r.before(s);if(o.inlineContent)E0(n,Gt.create(i,a+1,a+1+o.content.size));else if($t.isSelectable(o))E0(n,$t.create(i,a));else continue;return!0}}function sB(n){return O2(n)}const Yoe=Qa?"metaKey":"ctrlKey";Mo.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let i=sB(n),r=Date.now(),s="singleClick";r-n.input.lastClick.time<500&&cDe(t,n.input.lastClick)&&!t[Yoe]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:r,x:t.clientX,y:t.clientY,type:s};let o=n.posAtCoords(sD(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new mDe(n,o,t,!!i)):(s=="doubleClick"?fDe:gDe)(n,o.pos,o.inside,t)?t.preventDefault():Wh(n,"pointer"))};class mDe{constructor(e,t,i,r){this.view=e,this.pos=t,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[Yoe],this.allowDefault=i.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);s=u.parent,o=u.depth?u.before():0}const a=r?null:i.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(i.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof $t&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gc&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Wh(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Sd(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(sD(e))),this.updateAllowDefault(e),this.allowDefault||!t?Wh(this.view,"pointer"):hDe(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Do&&this.mightDrag&&!this.mightDrag.node.isAtom||io&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(E0(this.view,tn.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Wh(this.view,"pointer")}move(e){this.updateAllowDefault(e),Wh(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Mo.touchstart=n=>{n.input.lastTouch=Date.now(),sB(n),Wh(n,"pointer")};Mo.touchmove=n=>{n.input.lastTouch=Date.now(),Wh(n,"pointer")};Mo.contextmenu=n=>sB(n);function Zoe(n,e){return n.composing?!0:Do&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const vDe=ql?5e3:-1;Ro.compositionstart=Ro.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Gt&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),O2(n,!0),n.markCursor=null;else if(O2(n,!e.selection.empty),gc&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let i=n.domSelectionRange();for(let r=i.focusNode,s=i.focusOffset;r&&r.nodeType==1&&s!=0;){let o=s<0?r.lastChild:r.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else r=o,s=-1}}n.input.composing=!0}Xoe(n,vDe)};Ro.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Xoe(n,20))};function Xoe(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>O2(n),e))}function Qoe(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=_De());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function bDe(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=uIe(e.focusNode,e.focusOffset),i=dIe(e.focusNode,e.focusOffset);if(t&&i&&t!=i){let r=i.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||i==s)return s;if(!r||!r.isText(i.nodeValue))return i;if(n.input.compositionNode==i){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return i}}return t||i}function _De(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function O2(n,e=!1){if(!(ql&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Qoe(n),e||n.docView&&n.docView.dirty){let t=tB(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function CDe(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(e),n.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const My=ra&&lf<15||g1&&mIe<604;Mo.copy=Ro.cut=(n,e)=>{let t=e,i=n.state.selection,r=t.type=="cut";if(i.empty)return;let s=My?null:t.clipboardData,o=i.content(),{dom:a,text:l}=Woe(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):CDe(n,a),r&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function yDe(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function wDe(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),t?Ry(n,i.value,null,r,e):Ry(n,i.textContent,i.innerHTML,r,e)},50)}function Ry(n,e,t,i,r){let s=$oe(n,e,t,i,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,r,s||_t.empty)))return!0;if(!s)return!1;let o=yDe(s),a=o?n.state.tr.replaceSelectionWith(o,i):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Joe(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Ro.paste=(n,e)=>{let t=e;if(n.composing&&!ql)return;let i=My?null:t.clipboardData,r=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&Ry(n,Joe(i),i.getData("text/html"),r,t)?t.preventDefault():wDe(n,t)};class eae{constructor(e,t,i){this.slice=e,this.move=t,this.node=i}}const tae=Qa?"altKey":"ctrlKey";Mo.dragstart=(n,e)=>{let t=e,i=n.input.mouseDown;if(i&&i.done(),!t.dataTransfer)return;let r=n.state.selection,s=r.empty?null:n.posAtCoords(sD(t)),o;if(!(s&&s.pos>=r.from&&s.pos<=(r instanceof $t?r.to-1:r.to))){if(i&&i.mightDrag)o=$t.create(n.state.doc,i.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let d=n.docView.nearestDesc(t.target,!0);d&&d.node.type.spec.draggable&&d!=n.docView&&(o=$t.create(n.state.doc,d.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:c,slice:u}=Woe(n,a);(!t.dataTransfer.files.length||!io||Eoe>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(My?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",My||t.dataTransfer.setData("text/plain",c),n.dragging=new eae(u,!t[tae],o)};Mo.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Ro.dragover=Ro.dragenter=(n,e)=>e.preventDefault();Ro.drop=(n,e)=>{let t=e,i=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let r=n.posAtCoords(sD(t));if(!r)return;let s=n.state.doc.resolve(r.pos),o=i&&i.slice;o?n.someProp("transformPasted",g=>{o=g(o,n)}):o=$oe(n,Joe(t.dataTransfer),My?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(i&&!t[tae]);if(n.someProp("handleDrop",g=>g(n,t,o||_t.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?voe(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=n.state.tr;if(a){let{node:g}=i;g?g.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let f=c.doc.resolve(u);if(d&&$t.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new $t(f));else{let g=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((p,v,b,_)=>g=_),c.setSelection(nB(n,f,c.doc.resolve(g)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Mo.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Sd(n)},20))};Mo.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Mo.beforeinput=(n,e)=>{if(io&&ql&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,vg(8,"Backspace")))))return;let{$cursor:r}=n.state.selection;r&&r.pos>0&&n.dispatch(n.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let n in Ro)Mo[n]=Ro[n];function Ay(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class P2{constructor(e,t){this.toDOM=e,this.spec=t||ap,this.side=this.spec.side||0}map(e,t,i,r){let{pos:s,deleted:o}=e.mapResult(t.from+r,this.side<0?-1:1);return o?null:new hs(s-i,s-i,this)}valid(){return!0}eq(e){return this==e||e instanceof P2&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ay(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class uf{constructor(e,t){this.attrs=e,this.spec=t||ap}map(e,t,i,r){let s=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-i,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-i;return s>=o?null:new hs(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof uf&&Ay(this.attrs,e.attrs)&&Ay(this.spec,e.spec)}static is(e){return e.type instanceof uf}destroy(){}}class oB{constructor(e,t){this.attrs=e,this.spec=t||ap}map(e,t,i,r){let s=e.mapResult(t.from+r,1);if(s.deleted)return null;let o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=s.pos?null:new hs(s.pos-i,o.pos-i,this)}valid(e,t){let{index:i,offset:r}=e.content.findIndex(t.from),s;return r==t.from&&!(s=e.child(i)).isText&&r+s.nodeSize==t.to}eq(e){return this==e||e instanceof oB&&Ay(this.attrs,e.attrs)&&Ay(this.spec,e.spec)}destroy(){}}class hs{constructor(e,t,i){this.from=e,this.to=t,this.type=i}copy(e,t){return new hs(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,i){return this.type.map(e,this,t,i)}static widget(e,t,i){return new hs(e,e,new P2(t,i))}static inline(e,t,i,r){return new hs(e,t,new uf(i,r))}static node(e,t,i,r){return new hs(e,t,new oB(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof uf}get widget(){return this.type instanceof P2}}const ov=[],ap={};class fi{constructor(e,t){this.local=e.length?e:ov,this.children=t.length?t:ov}static create(e,t){return t.length?F2(t,e,0,ap):Xs}find(e,t,i){let r=[];return this.findInner(e??0,t??1e9,r,0,i),r}findInner(e,t,i,r,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&i.push(a.copy(a.from+r,a.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,i,r+a,s)}}map(e,t,i){return this==Xs||e.maps.length==0?this:this.mapInner(e,t,0,0,i||ap)}mapInner(e,t,i,r,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,i,r);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?SDe(this.children,o||[],e,t,i,r,s):o?new fi(o.sort(lp),ov):Xs}add(e,t){return t.length?this==Xs?fi.create(e,t):this.addInner(e,t,0):this}addInner(e,t,i){let r,s=0;e.forEach((a,l)=>{let c=l+i,u;if(u=iae(t,a,c)){for(r||(r=this.children.slice());s<r.length&&r[s]<l;)s+=3;r[s]==l?r[s+2]=r[s+2].addInner(a,u,c+1):r.splice(s,0,l,l+a.nodeSize,F2(u,a,c+1,ap)),s+=3}});let o=nae(s?rae(t):t,-i);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new fi(o.length?this.local.concat(o).sort(lp):this.local,r||this.children)}remove(e){return e.length==0||this==Xs?this:this.removeInner(e,0)}removeInner(e,t){let i=this.children,r=this.local;for(let s=0;s<i.length;s+=3){let o,a=i[s]+t,l=i[s+1]+t;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;i==this.children&&(i=this.children.slice());let c=i[s+2].removeInner(o,a+1);c!=Xs?i[s+2]=c:(i.splice(s,3),s-=3)}if(r.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<r.length;a++)r[a].eq(o,t)&&(r==this.local&&(r=this.local.slice()),r.splice(a--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new fi(r,i):Xs}forChild(e,t){if(this==Xs)return this;if(t.isLeaf)return fi.empty;let i,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(i=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof uf){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){let a=new fi(r.sort(lp),ov);return i?new Eh([a,i]):a}return i||Xs}eq(e){if(this==e)return!0;if(!(e instanceof fi)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return aB(this.localsInner(e))}localsInner(e){if(this==Xs)return ov;if(e.inlineContent||!this.local.some(uf.is))return this.local;let t=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof uf||t.push(this.local[i]);return t}forEachSet(e){e(this)}}fi.empty=new fi([],[]);fi.removeOverlap=aB;const Xs=fi.empty;class Eh{constructor(e){this.members=e}map(e,t){const i=this.members.map(r=>r.map(e,t,ap));return Eh.from(i)}forChild(e,t){if(t.isLeaf)return fi.empty;let i=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(e,t);s!=Xs&&(s instanceof Eh?i=i.concat(s.members):i.push(s))}return Eh.from(i)}eq(e){if(!(e instanceof Eh)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,i=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(e);if(s.length)if(!t)t=s;else{i&&(t=t.slice(),i=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?aB(i?t:t.sort(lp)):ov}static from(e){switch(e.length){case 0:return Xs;case 1:return e[0];default:return new Eh(e.every(t=>t instanceof fi)?e:e.reduce((t,i)=>t.concat(i instanceof fi?i:i.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function SDe(n,e,t,i,r,s,o){let a=n.slice();for(let c=0,u=s;c<t.maps.length;c++){let d=0;t.maps[c].forEach((h,f,g,p)=>{let v=p-g-(f-h);for(let b=0;b<a.length;b+=3){let _=a[b+1];if(_<0||h>_+u-d)continue;let y=a[b]+u-d;f>=y?a[b+1]=h<=y?-2:-1:h>=u&&v&&(a[b]+=v,a[b+1]+=v)}d+=v}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+s),d=u-r;if(d<0||d>=i.content.size){l=!0;continue}let h=t.map(n[c+1]+s,-1),f=h-r,{index:g,offset:p}=i.content.findIndex(d),v=i.maybeChild(g);if(v&&p==d&&p+v.nodeSize==f){let b=a[c+2].mapInner(t,v,u+1,n[c]+s+1,o);b!=Xs?(a[c]=d,a[c+1]=f,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=xDe(a,n,e,t,r,s,o),u=F2(c,i,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let f=u.children[d];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new fi(e.sort(lp),a)}function nae(n,e){if(!e||!n.length)return n;let t=[];for(let i=0;i<n.length;i++){let r=n[i];t.push(new hs(r.from+e,r.to+e,r.type))}return t}function xDe(n,e,t,i,r,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(i,r,c);d?t.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+s+1);return t}function iae(n,e,t){if(e.isLeaf)return null;let i=t+e.nodeSize,r=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<i&&((r||(r=[])).push(o),n[s]=null);return r}function rae(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function F2(n,e,t,i){let r=[],s=!1;e.forEach((a,l)=>{let c=iae(n,a,l+t);if(c){s=!0;let u=F2(c,a,t+l+1,i);u!=Xs&&r.push(l,l+a.nodeSize,u)}});let o=nae(s?rae(n):n,-t).sort(lp);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||r.length?new fi(o,r):Xs}function lp(n,e){return n.from-e.from||n.to-e.to}function aB(n){let e=n;for(let t=0;t<e.length-1;t++){let i=e[t];if(i.from!=i.to)for(let r=t+1;r<e.length;r++){let s=e[r];if(s.from==i.from){s.to!=i.to&&(e==n&&(e=n.slice()),e[r]=s.copy(s.from,i.to),tK(e,r+1,s.copy(i.to,s.to)));continue}else{s.from<i.to&&(e==n&&(e=n.slice()),e[t]=i.copy(i.from,s.from),tK(e,r,i.copy(s.from,i.to)));break}}}return e}function tK(n,e,t){for(;e<n.length&&lp(t,n[e])>0;)e++;n.splice(e,0,t)}function U4(n){let e=[];return n.someProp("decorations",t=>{let i=t(n.state);i&&i!=Xs&&e.push(i)}),n.cursorWrapper&&e.push(fi.create(n.state.doc,[n.cursorWrapper.deco])),Eh.from(e)}const kDe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},EDe=ra&&lf<=11;class LDe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class NDe{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new LDe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);ra&&lf<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),EDe&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,kDe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(qj(this.view)){if(this.suppressingSelectionUpdates)return Sd(this.view);if(ra&&lf<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&$p(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,i;for(let s=e.focusNode;s;s=Dy(s))t.add(s);for(let s=e.anchorNode;s;s=Dy(s))if(t.has(s)){i=s;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}selectionChanged(e){return!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&qj(this.view)&&!this.ignoreSelectionChange(e)}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let i=e.domSelectionRange(),r=this.selectionChanged(i),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let d=this.registerMutation(t[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(gc&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let f=h.parentNode;f&&f.nodeName=="LI"&&(!d||DDe(e,d)!=f)&&h.remove()}}}let c=null;s<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&iD(i)&&(c=tB(e))&&c.eq(tn.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Sd(e),this.currentSelection.set(i),e.scrollToSelection()):(s>-1||r)&&(s>-1&&(e.docView.markDirty(s,o),TDe(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||Sd(e),this.currentSelection.set(i))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];t.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let r=e.previousSibling,s=e.nextSibling;if(ra&&lf<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(r=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=r&&r.parentNode==e.target?Is(r)+1:0,a=i.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Is(s):e.target.childNodes.length,c=i.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let nK=new WeakMap,iK=!1;function TDe(n){if(!nK.has(n)&&(nK.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=gc,iK)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),iK=!0}}function rK(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return $p(o.node,o.offset,r,s)&&([t,i,r,s]=[r,s,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:s}}function IDe(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return rK(n,r)}let t;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",i,!0),t?rK(n,t):null}function DDe(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let i=n.docView.nearestDesc(t,!0);if(i&&i.node.isBlock)return t}return null}function MDe(n,e,t){let{node:i,fromOffset:r,toOffset:s,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],iD(l)||c.push({node:l.focusNode,offset:l.focusOffset})),io&&n.input.lastKeyCode===8)for(let v=s;v>r;v--){let b=i.childNodes[v-1],_=b.pmViewDesc;if(b.nodeName=="BR"&&!_){s=v;break}if(!_||_.size)break}let d=n.state.doc,h=n.someProp("domParser")||J_.fromSchema(n.state.schema),f=d.resolve(o),g=null,p=h.parse(i,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:r,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:RDe,context:f});if(c&&c[0].pos!=null){let v=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=v),g={anchor:v+o,head:b+o}}return{doc:p,sel:g,from:o,to:a}}function RDe(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Do&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Do&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ADe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ODe(n,e,t,i,r){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let L=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,M=tB(n,L);if(M&&!n.state.selection.eq(M)){if(io&&ql&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",O=>O(n,vg(13,"Enter"))))return;let D=n.state.tr.setSelection(M);L=="pointer"?D.setMeta("pointer",!0):L=="key"&&D.scrollIntoView(),s&&D.setMeta("composition",s),n.dispatch(D)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=MDe(n,e,t),u=n.state.doc,d=u.slice(c.from,c.to),h,f;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(h=n.state.selection.to,f="end"):(h=n.state.selection.from,f="start"),n.input.lastKeyCode=null;let g=BDe(d.content,c.doc.content,c.from,h,f);if(g&&n.input.domChangeCount++,(g1&&n.input.lastIOSEnter>Date.now()-225||ql)&&r.some(L=>L.nodeType==1&&!ADe.test(L.nodeName))&&(!g||g.endA>=g.endB)&&n.someProp("handleKeyDown",L=>L(n,vg(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!g)if(i&&l instanceof Gt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let L=sK(n,n.state.doc,c.sel);if(L&&!L.eq(n.state.selection)){let M=n.state.tr.setSelection(L);s&&M.setMeta("composition",s),n.dispatch(M)}}return}n.state.selection.from<n.state.selection.to&&g.start==g.endB&&n.state.selection instanceof Gt&&(g.start>n.state.selection.from&&g.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?g.start=n.state.selection.from:g.endA<n.state.selection.to&&g.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(g.endB+=n.state.selection.to-g.endA,g.endA=n.state.selection.to)),ra&&lf<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)==" "&&(g.start--,g.endA--,g.endB--);let p=c.doc.resolveNoCache(g.start-c.from),v=c.doc.resolveNoCache(g.endB-c.from),b=u.resolve(g.start),_=p.sameParent(v)&&p.parent.inlineContent&&b.end()>=g.endA,y;if((g1&&n.input.lastIOSEnter>Date.now()-225&&(!_||r.some(L=>L.nodeName=="DIV"||L.nodeName=="P"))||!_&&p.pos<c.doc.content.size&&!p.sameParent(v)&&(y=tn.findFrom(c.doc.resolve(p.pos+1),1,!0))&&y.head==v.pos)&&n.someProp("handleKeyDown",L=>L(n,vg(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>g.start&&FDe(u,g.start,g.endA,p,v)&&n.someProp("handleKeyDown",L=>L(n,vg(8,"Backspace")))){ql&&io&&n.domObserver.suppressSelectionUpdates();return}io&&ql&&g.endB==g.start&&(n.input.lastAndroidDelete=Date.now()),ql&&!_&&p.start()!=v.start()&&v.parentOffset==0&&p.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,v=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(L){return L(n,vg(13,"Enter"))})},20));let C=g.start,w=g.endA,x,k,E;if(_){if(p.pos==v.pos)ra&&lf<=11&&p.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Sd(n),20)),x=n.state.tr.delete(C,w),k=u.resolve(g.start).marksAcross(u.resolve(g.endA));else if(g.endA==g.endB&&(E=PDe(p.parent.content.cut(p.parentOffset,v.parentOffset),b.parent.content.cut(b.parentOffset,g.endA-b.start()))))x=n.state.tr,E.type=="add"?x.addMark(C,w,E.mark):x.removeMark(C,w,E.mark);else if(p.parent.child(p.index()).isText&&p.index()==v.index()-(v.textOffset?0:1)){let L=p.parent.textBetween(p.parentOffset,v.parentOffset);if(n.someProp("handleTextInput",M=>M(n,C,w,L)))return;x=n.state.tr.insertText(L,C,w)}}if(x||(x=n.state.tr.replace(C,w,c.doc.slice(g.start-c.from,g.endB-c.from))),c.sel){let L=sK(n,x.doc,c.sel);L&&!(io&&ql&&n.composing&&L.empty&&(g.start!=g.endB||n.input.lastAndroidDelete<Date.now()-100)&&(L.head==C||L.head==x.mapping.map(w)-1)||ra&&L.empty&&L.head==C)&&x.setSelection(L)}k&&x.ensureMarks(k),s&&x.setMeta("composition",s),n.dispatch(x.scrollIntoView())}function sK(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:nB(n,e.resolve(t.anchor),e.resolve(t.head))}function PDe(n,e){let t=n.firstChild.marks,i=e.firstChild.marks,r=t,s=i,o,a,l;for(let u=0;u<i.length;u++)r=i[u].removeFromSet(r);for(let u=0;u<t.length;u++)s=t[u].removeFromSet(s);if(r.length==1&&s.length==0)a=r[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(r.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(Ye.from(c).eq(n))return{mark:a,type:o}}function FDe(n,e,t,i,r){if(t-e<=r.pos-i.pos||j4(i,!0,!1)<r.pos)return!1;let s=n.resolve(e);if(!i.parent.isTextblock){let a=s.nodeAfter;return a!=null&&t==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(j4(s,!0,!0));return!o.parent.isTextblock||o.pos>t||j4(o,!0,!1)<t?!1:i.parent.content.cut(i.parentOffset).eq(o.parent.content)}function j4(n,e,t){let i=n.depth,r=e?n.end():n.pos;for(;i>0&&(e||n.indexAfter(i)==n.node(i).childCount);)i--,r++,e=!1;if(t){let s=n.node(i).maybeChild(n.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,r++}return r}function BDe(n,e,t,i,r){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(r=="end"){let l=Math.max(0,s-Math.min(o,a));i-=o+l-s}if(o<s&&n.size<e.size){let l=i<=s&&i>=o?s-i:0;s-=l,s&&s<e.size&&oK(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=i<=s&&i>=a?s-i:0;s-=l,s&&s<n.size&&oK(n.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function oK(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class HDe{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new rDe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(dK),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=cK(this),lK(this),this.nodeViews=uK(this),this.docView=zj(this.state.doc,aK(this),U4(this),this.dom,this),this.domObserver=new NDe(this,(i,r,s,o)=>ODe(this,i,r,s,o)),this.domObserver.start(),sDe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&X3(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(dK),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let i in this._props)t[i]=this._props[i];t.state=this.state;for(let i in e)t[i]=e[i];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var i;let r=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(Qoe(this),o=!0),this.state=e;let a=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let f=uK(this);zDe(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&X3(this),this.editable=cK(this),lK(this);let l=U4(this),c=aK(this),u=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(r.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&_Ie(this);if(o){this.domObserver.stop();let f=d&&(ra||io)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&VDe(r.selection,e.selection);if(d){let g=io?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=bDe(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=zj(e.doc,c,l,this.dom,this)),g&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&$Ie(this))?Sd(this,f):(Hoe(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((i=this.dragging)===null||i===void 0)&&i.node&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&CIe(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof $t){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Oj(this,t.getBoundingClientRect(),e)}else Oj(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let i=this.directPlugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let i=this.state.plugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let i=this.pluginViews[t];i.update&&i.update(this,e)}}updateDraggedNode(e,t){let i=e.node,r=-1;if(this.state.doc.nodeAt(i.from)==i.node)r=i.from;else{let s=i.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==i.node&&(r=s)}this.dragging=new eae(e.slice,e.move,r<0?void 0:$t.create(this.state.doc,r))}someProp(e,t){let i=this._props&&this._props[e],r;if(i!=null&&(r=t?t(i):i))return r;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(r=t?t(a):a))return r}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(r=t?t(a):a))return r}}hasFocus(){if(ra){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&yIe(this.dom),Sd(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return EIe(this,e)}coordsAtPos(e,t=1){return Doe(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,i=-1){let r=this.docView.posFromDOM(e,t,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return DIe(this,t||this.state,e)}pasteHTML(e,t){return Ry(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Ry(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(oDe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],U4(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,lIe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return lDe(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Do&&this.root.nodeType===11&&fIe(this.dom.ownerDocument)==this.dom&&IDe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function aK(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let i in t)i=="class"?e.class+=" "+t[i]:i=="style"?e.style=(e.style?e.style+";":"")+t[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(t[i]))}),e.translate||(e.translate="no"),[hs.node(0,n.state.doc.content.size,e)]}function lK(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:hs.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function cK(n){return!n.someProp("editable",e=>e(n.state)===!1)}function VDe(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function uK(n){let e=Object.create(null);function t(i){for(let r in i)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=i[r])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function zDe(n,e){let t=0,i=0;for(let r in n){if(n[r]!=e[r])return!0;t++}for(let r in e)i++;return t!=i}function dK(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var wf={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},B2={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},WDe=typeof navigator<"u"&&/Mac/.test(navigator.platform),$De=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ds=0;Ds<10;Ds++)wf[48+Ds]=wf[96+Ds]=String(Ds);for(var Ds=1;Ds<=24;Ds++)wf[Ds+111]="F"+Ds;for(var Ds=65;Ds<=90;Ds++)wf[Ds]=String.fromCharCode(Ds+32),B2[Ds]=String.fromCharCode(Ds);for(var K4 in wf)B2.hasOwnProperty(K4)||(B2[K4]=wf[K4]);function UDe(n){var e=WDe&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||$De&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?B2:wf)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const jDe=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function KDe(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let i,r,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))jDe?o=!0:r=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(t="Alt-"+t),r&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function qDe(n){let e=Object.create(null);for(let t in n)e[KDe(t)]=n[t];return e}function q4(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function GDe(n){return new Ni({props:{handleKeyDown:lB(n)}})}function lB(n){let e=qDe(n);return function(t,i){let r=UDe(i),s,o=e[q4(r,i)];if(o&&o(t.state,t.dispatch,t))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let a=e[q4(r,i,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(s=wf[i.keyCode])&&s!=r){let a=e[q4(s,i)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const YDe=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function sae(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const ZDe=(n,e,t)=>{let i=sae(n,t);if(!i)return!1;let r=cB(i);if(!r){let o=i.blockRange(),a=o&&sb(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let s=r.nodeBefore;if(cae(n,r,e,-1))return!0;if(i.parent.content.size==0&&(p1(s,"end")||$t.isSelectable(s)))for(let o=i.depth;;o--){let a=tD(n.doc,i.before(o),i.after(o),_t.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(p1(s,"end")?tn.findFrom(l.doc.resolve(l.mapping.map(r.pos,-1)),-1):$t.create(l.doc,r.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||i.node(o-1).childCount>1)break}return s.isAtom&&r.depth==i.depth-1?(e&&e(n.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0):!1},XDe=(n,e,t)=>{let i=sae(n,t);if(!i)return!1;let r=cB(i);return r?oae(n,r,e):!1},QDe=(n,e,t)=>{let i=aae(n,t);if(!i)return!1;let r=uB(i);return r?oae(n,r,e):!1};function oae(n,e,t){let i=e.nodeBefore,r=i,s=e.pos-1;for(;!r.isTextblock;s--){if(r.type.spec.isolating)return!1;let u=r.lastChild;if(!u)return!1;r=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=tD(n.doc,s,l,_t.empty);if(!c||c.from!=s||c instanceof us&&c.slice.size>=l-s)return!1;if(t){let u=n.tr.step(c);u.setSelection(Gt.create(u.doc,s)),t(u.scrollIntoView())}return!0}function p1(n,e,t=!1){for(let i=n;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(t&&i.childCount!=1)return!1}return!1}const JDe=(n,e,t)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):i.parentOffset>0)return!1;s=cB(i)}let o=s&&s.nodeBefore;return!o||!$t.isSelectable(o)?!1:(e&&e(n.tr.setSelection($t.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function cB(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function aae(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const eMe=(n,e,t)=>{let i=aae(n,t);if(!i)return!1;let r=uB(i);if(!r)return!1;let s=r.nodeAfter;if(cae(n,r,e,1))return!0;if(i.parent.content.size==0&&(p1(s,"start")||$t.isSelectable(s))){let o=tD(n.doc,i.before(),i.after(),_t.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(p1(s,"start")?tn.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):$t.create(a.doc,a.mapping.map(r.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(e&&e(n.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0):!1},tMe=(n,e,t)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;s=uB(i)}let o=s&&s.nodeAfter;return!o||!$t.isSelectable(o)?!1:(e&&e(n.tr.setSelection($t.create(n.doc,s.pos)).scrollIntoView()),!0)};function uB(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const nMe=(n,e)=>{let t=n.selection,i=t instanceof $t,r;if(i){if(t.node.isTextblock||!zf(n.doc,t.from))return!1;r=t.from}else if(r=eD(n.doc,t.from,-1),r==null)return!1;if(e){let s=n.tr.join(r);i&&s.setSelection($t.create(s.doc,r-n.doc.resolve(r).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},iMe=(n,e)=>{let t=n.selection,i;if(t instanceof $t){if(t.node.isTextblock||!zf(n.doc,t.to))return!1;i=t.to}else if(i=eD(n.doc,t.to,1),i==null)return!1;return e&&e(n.tr.join(i).scrollIntoView()),!0},rMe=(n,e)=>{let{$from:t,$to:i}=n.selection,r=t.blockRange(i),s=r&&sb(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)},sMe=(n,e)=>{let{$head:t,$anchor:i}=n.selection;return!t.parent.type.spec.code||!t.sameParent(i)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function lae(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const oMe=(n,e)=>{let{$head:t,$anchor:i}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(i))return!1;let r=t.node(-1),s=t.indexAfter(-1),o=lae(r.contentMatchAt(s));if(!o||!r.canReplaceWith(s,s,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(tn.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},aMe=(n,e)=>{let t=n.selection,{$from:i,$to:r}=t;if(t instanceof oc||i.parent.inlineContent||r.parent.inlineContent)return!1;let s=lae(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(Gt.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},lMe=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(x0(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let i=t.blockRange(),r=i&&sb(i);return r==null?!1:(e&&e(n.tr.lift(i,r).scrollIntoView()),!0)},cMe=(n,e)=>{let{$from:t,to:i}=n.selection,r,s=t.sharedDepth(i);return s==0?!1:(r=t.before(s),e&&e(n.tr.setSelection($t.create(n.doc,r))),!0)};function uMe(n,e,t){let i=e.nodeBefore,r=e.nodeAfter,s=e.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(r.isTextblock||zf(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),!0)}function cae(n,e,t,i){let r=e.nodeBefore,s=e.nodeAfter,o,a,l=r.type.spec.isolating||s.type.spec.isolating;if(!l&&uMe(n,e,t))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(t){let f=e.pos+s.nodeSize,g=Ye.empty;for(let b=o.length-1;b>=0;b--)g=Ye.from(o[b].create(null,g));g=Ye.from(r.copy(g));let p=n.tr.step(new ms(e.pos-1,f,e.pos,f,new _t(g,1,0),o.length,!0)),v=f+2*o.length;zf(p.doc,v)&&p.join(v),t(p.scrollIntoView())}return!0}let u=s.type.spec.isolating||i>0&&l?null:tn.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&sb(d);if(h!=null&&h>=e.depth)return t&&t(n.tr.lift(d,h).scrollIntoView()),!0;if(c&&p1(s,"start",!0)&&p1(r,"end")){let f=r,g=[];for(;g.push(f),!f.isTextblock;)f=f.lastChild;let p=s,v=1;for(;!p.isTextblock;p=p.firstChild)v++;if(f.canReplace(f.childCount,f.childCount,p.content)){if(t){let b=Ye.empty;for(let y=g.length-1;y>=0;y--)b=Ye.from(g[y].copy(b));let _=n.tr.step(new ms(e.pos-g.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new _t(b,g.length,0),0,!0));t(_.scrollIntoView())}return!0}}return!1}function uae(n){return function(e,t){let i=e.selection,r=n<0?i.$from:i.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return r.node(s).isTextblock?(t&&t(e.tr.setSelection(Gt.create(e.doc,n<0?r.start(s):r.end(s)))),!0):!1}}const dMe=uae(-1),hMe=uae(1);function fMe(n,e=null){return function(t,i){let{$from:r,$to:s}=t.selection,o=r.blockRange(s),a=o&&XF(o,n,e);return a?(i&&i(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function hK(n,e=null){return function(t,i){let r=!1;for(let s=0;s<t.selection.ranges.length&&!r;s++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[s];t.doc.nodesBetween(o,a,(l,c)=>{if(r)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)r=!0;else{let u=t.doc.resolve(c),d=u.index();r=u.parent.canReplaceWith(d,d+1,n)}})}if(!r)return!1;if(i){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];s.setBlockType(a,l,n,e)}i(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function gMe(n,e=null){return function(t,i){let{$from:r,$to:s}=t.selection,o=r.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&r.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(r.index(o.depth-1)==0)return!1;let u=t.doc.resolve(o.start-2);l=new T2(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new T2(r,t.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=XF(l,n,e,o);return c?(i&&i(pMe(t.tr,o,c,a,n).scrollIntoView()),!0):!1}}function pMe(n,e,t,i,r){let s=Ye.empty;for(let u=t.length-1;u>=0;u--)s=Ye.from(t[u].type.create(t[u].attrs,s));n.step(new ms(e.start-(i?2:0),e.end,e.start,e.end,new _t(s,0,0),t.length,!0));let o=0;for(let u=0;u<t.length;u++)t[u].type==r&&(o=u+1);let a=t.length-o,l=e.start+t.length-(i?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&x0(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function mMe(n){return function(e,t){let{$from:i,$to:r}=e.selection,s=i.blockRange(r,o=>o.childCount>0&&o.firstChild.type==n);return s?t?i.node(s.depth-1).type==n?vMe(e,t,n,s):bMe(e,t,s):!0:!1}}function vMe(n,e,t,i){let r=n.tr,s=i.end,o=i.$to.end(i.depth);s<o&&(r.step(new ms(s-1,o,s,o,new _t(Ye.from(t.create(null,i.parent.copy())),1,0),1,!0)),i=new T2(r.doc.resolve(i.$from.pos),r.doc.resolve(o),i.depth));const a=sb(i);if(a==null)return!1;r.lift(i,a);let l=r.mapping.map(s,-1)-1;return zf(r.doc,l)&&r.join(l),e(r.scrollIntoView()),!0}function bMe(n,e,t){let i=n.tr,r=t.parent;for(let f=t.end,g=t.endIndex-1,p=t.startIndex;g>p;g--)f-=r.child(g).nodeSize,i.delete(f-1,f+1);let s=i.doc.resolve(t.start),o=s.nodeAfter;if(i.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==r.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?Ye.empty:Ye.from(r))))return!1;let d=s.pos,h=d+o.nodeSize;return i.step(new ms(d-(a?1:0),h+(l?1:0),d+1,h-1,new _t((a?Ye.empty:Ye.from(r.copy(Ye.empty))).append(l?Ye.empty:Ye.from(r.copy(Ye.empty))),a?0:1,l?0:1),a?0:1)),e(i.scrollIntoView()),!0}function _Me(n){return function(e,t){let{$from:i,$to:r}=e.selection,s=i.blockRange(r,c=>c.childCount>0&&c.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=Ye.from(c?n.create():null),d=new _t(Ye.from(n.create(null,Ye.from(a.type.create(null,u)))),c?3:1,0),h=s.start,f=s.end;t(e.tr.step(new ms(h-(c?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}function oD(n){const{state:e,transaction:t}=n;let{selection:i}=t,{doc:r}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return i},get doc(){return r},get tr(){return i=t.selection,r=t.doc,s=t.storedMarks,t}}}class aD{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:i}=this,{view:r}=t,{tr:s}=i,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:i,editor:r,state:s}=this,{view:o}=r,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(i).map(([h,f])=>[h,(...p)=>{const v=this.buildProps(c,t),b=f(...p)(v);return a.push(b),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:i}=this,r=!1,s=e||i.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(e,t=!0){const{rawCommands:i,editor:r,state:s}=this,{view:o}=r,a={tr:e,editor:r,view:o,state:oD({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(i).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class CMe{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const i=this.callbacks[e];return i&&i.forEach(r=>r.apply(this,t)),this}off(e,t){const i=this.callbacks[e];return i&&(t?this.callbacks[e]=i.filter(r=>r!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function Mt(n,e,t){return n.config[e]===void 0&&n.parent?Mt(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Mt(n.parent,e,t):null}):n.config[e]}function lD(n){const e=n.filter(r=>r.type==="extension"),t=n.filter(r=>r.type==="node"),i=n.filter(r=>r.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:i}}function dae(n){const e=[],{nodeExtensions:t,markExtensions:i}=lD(n),r=[...t,...i],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:r},l=Mt(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,f])=>{e.push({type:d,name:h,attribute:{...s,...f}})})})})}),r.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Mt(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...s,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:u,attribute:h})})}),e}function Vr(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Gn(...n){return n.filter(e=>!!e).reduce((e,t)=>{const i={...e};return Object.entries(t).forEach(([r,s])=>{if(!i[r]){i[r]=s;return}if(r==="class"){const a=s?s.split(" "):[],l=i[r]?i[r].split(" "):[],c=a.filter(u=>!l.includes(u));i[r]=[...l,...c].join(" ")}else if(r==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=i[r]?i[r].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),i[r]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else i[r]=s}),i},{})}function H2(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,i)=>Gn(t,i),{})}function hae(n){return typeof n=="function"}function Pn(n,e=void 0,...t){return hae(n)?e?n.bind(e)(...t):n(...t):n}function yMe(n={}){return Object.keys(n).length===0&&n.constructor===Object}function wMe(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function fK(n,e){return"style"in n?n:{...n,getAttrs:t=>{const i=n.getAttrs?n.getAttrs(t):n.attrs;if(i===!1)return!1;const r=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):wMe(t.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...i,...r}}}}function gK(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&yMe(t)?!1:t!=null))}function SMe(n,e){var t;const i=dae(n),{nodeExtensions:r,markExtensions:s}=lD(n),o=(t=r.find(c=>Mt(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(r.map(c=>{const u=i.filter(b=>b.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=n.reduce((b,_)=>{const y=Mt(_,"extendNodeSchema",d);return{...b,...y?y(c):{}}},{}),f=gK({...h,content:Pn(Mt(c,"content",d)),marks:Pn(Mt(c,"marks",d)),group:Pn(Mt(c,"group",d)),inline:Pn(Mt(c,"inline",d)),atom:Pn(Mt(c,"atom",d)),selectable:Pn(Mt(c,"selectable",d)),draggable:Pn(Mt(c,"draggable",d)),code:Pn(Mt(c,"code",d)),whitespace:Pn(Mt(c,"whitespace",d)),defining:Pn(Mt(c,"defining",d)),isolating:Pn(Mt(c,"isolating",d)),attrs:Object.fromEntries(u.map(b=>{var _;return[b.name,{default:(_=b==null?void 0:b.attribute)===null||_===void 0?void 0:_.default}]}))}),g=Pn(Mt(c,"parseHTML",d));g&&(f.parseDOM=g.map(b=>fK(b,u)));const p=Mt(c,"renderHTML",d);p&&(f.toDOM=b=>p({node:b,HTMLAttributes:H2(b,u)}));const v=Mt(c,"renderText",d);return v&&(f.toText=v),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const u=i.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=n.reduce((v,b)=>{const _=Mt(b,"extendMarkSchema",d);return{...v,..._?_(c):{}}},{}),f=gK({...h,inclusive:Pn(Mt(c,"inclusive",d)),excludes:Pn(Mt(c,"excludes",d)),group:Pn(Mt(c,"group",d)),spanning:Pn(Mt(c,"spanning",d)),code:Pn(Mt(c,"code",d)),attrs:Object.fromEntries(u.map(v=>{var b;return[v.name,{default:(b=v==null?void 0:v.attribute)===null||b===void 0?void 0:b.default}]}))}),g=Pn(Mt(c,"parseHTML",d));g&&(f.parseDOM=g.map(v=>fK(v,u)));const p=Mt(c,"renderHTML",d);return p&&(f.toDOM=v=>p({mark:v,HTMLAttributes:H2(v,u)})),[c.name,f]}));return new aoe({topNode:o,nodes:a,marks:l})}function G4(n,e){return e.nodes[n]||e.marks[n]||null}function pK(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const xMe=(n,e=500)=>{let t="";const i=n.parentOffset;return n.parent.nodesBetween(Math.max(0,i-e),i,(r,s,o,a)=>{var l,c;const u=((c=(l=r.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:r,pos:s,parent:o,index:a}))||r.textContent||"%leaf%";t+=r.isAtom&&!r.isText?u:u.slice(0,Math.max(0,i-s))}),t};function dB(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class tS{constructor(e){this.find=e.find,this.handler=e.handler}}const kMe=(n,e)=>{if(dB(e))return e.exec(n);const t=e(n);if(!t)return null;const i=[t.text];return i.index=t.index,i.input=n,i.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(t.replaceWith)),i};function px(n){var e;const{editor:t,from:i,to:r,text:s,rules:o,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(i);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=xMe(c)+s;return o.forEach(h=>{if(u)return;const f=kMe(d,h.find);if(!f)return;const g=l.state.tr,p=oD({state:l.state,transaction:g}),v={from:i-(f[0].length-s.length),to:r},{commands:b,chain:_,can:y}=new aD({editor:t,state:p});h.handler({state:p,range:v,match:f,commands:b,chain:_,can:y})===null||!g.steps.length||(g.setMeta(a,{transform:g,from:i,to:r,text:s}),l.dispatch(g),u=!0)}),u}function EMe(n){const{editor:e,rules:t}=n,i=new Ni({state:{init(){return null},apply(r,s){const o=r.getMeta(i);if(o)return o;const a=r.getMeta("applyInputRules");return!!a&&setTimeout(()=>{const{from:c,text:u}=a,d=c+u.length;px({editor:e,from:c,to:d,text:u,rules:t,plugin:i})}),r.selectionSet||r.docChanged?null:s}},props:{handleTextInput(r,s,o,a){return px({editor:e,from:s,to:o,text:a,rules:t,plugin:i})},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:s}=r.state.selection;s&&px({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:i})}),!1)},handleKeyDown(r,s){if(s.key!=="Enter")return!1;const{$cursor:o}=r.state.selection;return o?px({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:i}):!1}},isInputRules:!0});return i}function LMe(n){return Object.prototype.toString.call(n).slice(8,-1)}function mx(n){return LMe(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function cD(n,e){const t={...n};return mx(n)&&mx(e)&&Object.keys(e).forEach(i=>{mx(e[i])&&mx(n[i])?t[i]=cD(n[i],e[i]):t[i]=e[i]}),t}class ha{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Pn(Mt(this,"addOptions",{name:this.name}))),this.storage=Pn(Mt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ha(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>cD(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new ha(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Pn(Mt(t,"addOptions",{name:t.name})),t.storage=Pn(Mt(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:i}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){const o=r.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&i.removeStoredMark(l),i.insertText(" ",r.pos),e.view.dispatch(i),!0}return!1}}function NMe(n){return typeof n=="number"}class TMe{constructor(e){this.find=e.find,this.handler=e.handler}}const IMe=(n,e,t)=>{if(dB(e))return[...n.matchAll(e)];const i=e(n,t);return i?i.map(r=>{const s=[r.text];return s.index=r.index,s.input=n,s.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(r.replaceWith)),s}):[]};function DMe(n){const{editor:e,state:t,from:i,to:r,rule:s,pasteEvent:o,dropEvent:a}=n,{commands:l,chain:c,can:u}=new aD({editor:e,state:t}),d=[];return t.doc.nodesBetween(i,r,(f,g)=>{if(!f.isTextblock||f.type.spec.code)return;const p=Math.max(i,g),v=Math.min(r,g+f.content.size),b=f.textBetween(p-g,v-g,void 0,"");IMe(b,s.find,o).forEach(y=>{if(y.index===void 0)return;const C=p+y.index+1,w=C+y[0].length,x={from:t.tr.mapping.map(C),to:t.tr.mapping.map(w)},k=s.handler({state:t,range:x,match:y,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(k)})}),d.every(f=>f!==null)}const MMe=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function RMe(n){const{editor:e,rules:t}=n;let i=null,r=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:u,from:d,to:h,rule:f,pasteEvt:g})=>{const p=u.tr,v=oD({state:u,transaction:p});if(!(!DMe({editor:e,state:v,from:Math.max(d-1,0),to:h.b-1,rule:f,pasteEvent:g,dropEvent:a})||!p.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,p};return t.map(u=>new Ni({view(d){const h=f=>{var g;i=!((g=d.dom.parentElement)===null||g===void 0)&&g.contains(f.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",h),{destroy(){window.removeEventListener("dragstart",h)}}},props:{handleDOMEvents:{drop:(d,h)=>(s=i===d.dom.parentElement,a=h,!1),paste:(d,h)=>{var f;const g=(f=h.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=h,r=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,f)=>{const g=d[0],p=g.getMeta("uiEvent")==="paste"&&!r,v=g.getMeta("uiEvent")==="drop"&&!s,b=g.getMeta("applyPasteRules"),_=!!b;if(!p&&!v&&!_)return;if(_){const{from:w,text:x}=b,k=w+x.length,E=MMe(x);return l({rule:u,state:f,from:w,to:{b:k},pasteEvt:E})}const y=h.doc.content.findDiffStart(f.doc.content),C=h.doc.content.findDiffEnd(f.doc.content);if(!(!NMe(y)||!C||y===C.b))return l({rule:u,state:f,from:y,to:C,pasteEvt:o})}}))}function AMe(n){const e=n.filter((t,i)=>n.indexOf(t)!==i);return Array.from(new Set(e))}class Iv{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Iv.resolve(e),this.schema=SMe(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Iv.sort(Iv.flatten(e)),i=AMe(t.map(r=>r.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const i={name:t.name,options:t.options,storage:t.storage},r=Mt(t,"addExtensions",i);return r?[t,...this.flatten(r())]:t}).flat(10)}static sort(e){return e.sort((i,r)=>{const s=Mt(i,"priority")||100,o=Mt(r,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const i={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:G4(t.name,this.schema)},r=Mt(t,"addCommands",i);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this,t=Iv.sort([...this.extensions].reverse()),i=[],r=[],s=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:G4(o.name,this.schema)},l=[],c=Mt(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&Mt(o,"exitable",a)&&(u.ArrowRight=()=>ha.handleExit({editor:e,mark:o})),c){const p=Object.fromEntries(Object.entries(c()).map(([v,b])=>[v,()=>b({editor:e})]));u={...u,...p}}const d=GDe(u);l.push(d);const h=Mt(o,"addInputRules",a);pK(o,e.options.enableInputRules)&&h&&i.push(...h());const f=Mt(o,"addPasteRules",a);pK(o,e.options.enablePasteRules)&&f&&r.push(...f());const g=Mt(o,"addProseMirrorPlugins",a);if(g){const p=g();l.push(...p)}return l}).flat();return[EMe({editor:e,rules:i}),...RMe({editor:e,rules:r}),...s]}get attributes(){return dae(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=lD(this.extensions);return Object.fromEntries(t.filter(i=>!!Mt(i,"addNodeView")).map(i=>{const r=this.attributes.filter(l=>l.type===i.name),s={name:i.name,options:i.options,storage:i.storage,editor:e,type:Vr(i.name,this.schema)},o=Mt(i,"addNodeView",s);if(!o)return[];const a=(l,c,u,d,h)=>{const f=H2(l,r);return o()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:i,HTMLAttributes:f})};return[i.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const i={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:G4(e.name,this.schema)};e.type==="mark"&&(!((t=Pn(Mt(e,"keepOnSplit",i)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const r=Mt(e,"onBeforeCreate",i),s=Mt(e,"onCreate",i),o=Mt(e,"onUpdate",i),a=Mt(e,"onSelectionUpdate",i),l=Mt(e,"onTransaction",i),c=Mt(e,"onFocus",i),u=Mt(e,"onBlur",i),d=Mt(e,"onDestroy",i);r&&this.editor.on("beforeCreate",r),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class pi{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Pn(Mt(this,"addOptions",{name:this.name}))),this.storage=Pn(Mt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new pi(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>cD(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new pi({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Pn(Mt(t,"addOptions",{name:t.name})),t.storage=Pn(Mt(t,"addStorage",{name:t.name,options:t.options})),t}}function fae(n,e,t){const{from:i,to:r}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="";return n.nodesBetween(i,r,(l,c,u,d)=>{var h;l.isBlock&&c>i&&(a+=s);const f=o==null?void 0:o[l.type.name];if(f)return u&&(a+=f({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(i,c)-c,r-c))}),a}function gae(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const OMe=pi.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ni({key:new zi("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:i,selection:r}=e,{ranges:s}=r,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=gae(t);return fae(i,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),PMe=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),FMe=(n=!1)=>({commands:e})=>e.setContent("",n),BMe=()=>({state:n,tr:e,dispatch:t})=>{const{selection:i}=e,{ranges:r}=i;return t&&r.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),f=d.blockRange(h);if(!f)return;const g=sb(f);if(a.type.isTextblock){const{defaultType:p}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(f.start,p)}(g||g===0)&&e.lift(f,g)})}),!0},HMe=n=>e=>n(e),VMe=()=>({state:n,dispatch:e})=>aMe(n,e),zMe=(n,e)=>({editor:t,tr:i})=>{const{state:r}=t,s=r.doc.slice(n.from,n.to);i.deleteRange(n.from,n.to);const o=i.mapping.map(e);return i.insert(o,s.content),i.setSelection(new Gt(i.doc.resolve(o-1))),!0},WMe=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,i=t.$anchor.node();if(i.content.size>0)return!1;const r=n.selection.$anchor;for(let s=r.depth;s>0;s-=1)if(r.node(s).type===i.type){if(e){const a=r.before(s),l=r.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},$Me=n=>({tr:e,state:t,dispatch:i})=>{const r=Vr(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r){if(i){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},UMe=n=>({tr:e,dispatch:t})=>{const{from:i,to:r}=n;return t&&e.delete(i,r),!0},jMe=()=>({state:n,dispatch:e})=>YDe(n,e),KMe=()=>({commands:n})=>n.keyboardShortcut("Enter"),qMe=()=>({state:n,dispatch:e})=>oMe(n,e);function V2(n,e,t={strict:!0}){const i=Object.keys(e);return i.length?i.every(r=>t.strict?e[r]===n[r]:dB(e[r])?e[r].test(n[r]):e[r]===n[r]):!0}function Q3(n,e,t={}){return n.find(i=>i.type===e&&V2(i.attrs,t))}function GMe(n,e,t={}){return!!Q3(n,e,t)}function uD(n,e,t={}){if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if(n.parentOffset===i.offset&&i.offset!==0&&(i=n.parent.childBefore(n.parentOffset)),!i.node)return;const r=Q3([...i.node.marks],e,t);if(!r)return;let s=i.index,o=n.start()+i.offset,a=s+1,l=o+i.node.nodeSize;for(Q3([...i.node.marks],e,t);s>0&&r.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&GMe([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function qd(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const YMe=(n,e={})=>({tr:t,state:i,dispatch:r})=>{const s=qd(n,i.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(r){const d=uD(l,s,e);if(d&&d.from<=c&&d.to>=u){const h=Gt.create(o,d.from,d.to);t.setSelection(h)}}return!0},ZMe=n=>e=>{const t=typeof n=="function"?n(e):n;for(let i=0;i<t.length;i+=1)if(t[i](e))return!0;return!1};function hB(n){return n instanceof Gt}function fd(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function pae(n,e=null){if(!e)return null;const t=tn.atStart(n),i=tn.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return i;const r=t.from,s=i.to;return e==="all"?Gt.create(n,fd(0,r,s),fd(n.content.size,r,s)):Gt.create(n,fd(e,r,s),fd(e,r,s))}function dD(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const XMe=(n=null,e={})=>({editor:t,view:i,tr:r,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{dD()&&i.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(i.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(i.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!hB(t.state.selection))return o(),!0;const a=pae(r.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||r.setSelection(a),l&&r.storedMarks&&r.setStoredMarks(r.storedMarks),o()),!0},QMe=(n,e)=>t=>n.every((i,r)=>e(i,{...t,index:r})),JMe=(n,e)=>({tr:t,commands:i})=>i.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),mae=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const i=e[t];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?n.removeChild(i):i.nodeType===1&&mae(i)}return n};function vx(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return mae(t)}function z2(n,e,t){t={slice:!0,parseOptions:{},...t};const i=typeof n=="object"&&n!==null,r=typeof n=="string";if(i)try{if(Array.isArray(n)&&n.length>0)return Ye.fromArray(n.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(n);return t.errorOnInvalidContent&&o.check(),o}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),z2("",e,t)}if(r){if(t.errorOnInvalidContent){let o=!1,a="";const l=new aoe({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?J_.fromSchema(l).parseSlice(vx(n),t.parseOptions):J_.fromSchema(l).parse(vx(n),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=J_.fromSchema(e);return t.slice?s.parseSlice(vx(n),t.parseOptions).content:s.parse(vx(n),t.parseOptions)}return z2("",e,t)}function e4e(n,e,t){const i=n.steps.length-1;if(i<e)return;const r=n.steps[i];if(!(r instanceof us||r instanceof ms))return;const s=n.mapping.maps[i];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(tn.near(n.doc.resolve(o),t))}const t4e=n=>!("type"in n),n4e=(n,e,t)=>({tr:i,dispatch:r,editor:s})=>{var o;if(r){t={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=z2(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(o=t.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(g){return s.emit("contentError",{editor:s,error:g,disableCollaboration:()=>{console.error("[tiptap error]: Unable to disable collaboration at this point in time")}}),!1}let{from:l,to:c}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},u=!0,d=!0;if((t4e(a)?a:[a]).forEach(g=>{g.check(),u=u?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),l===c&&d){const{parent:g}=i.doc.resolve(l);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(l-=1,c+=1)}let f;u?(Array.isArray(e)?f=e.map(g=>g.text||"").join(""):typeof e=="object"&&e&&e.text?f=e.text:f=e,i.insertText(f,l,c)):(f=a,i.replaceWith(l,c,f)),t.updateSelection&&e4e(i,i.steps.length-1,-1),t.applyInputRules&&i.setMeta("applyInputRules",{from:l,text:f}),t.applyPasteRules&&i.setMeta("applyPasteRules",{from:l,text:f})}return!0},i4e=()=>({state:n,dispatch:e})=>nMe(n,e),r4e=()=>({state:n,dispatch:e})=>iMe(n,e),s4e=()=>({state:n,dispatch:e})=>ZDe(n,e),o4e=()=>({state:n,dispatch:e})=>eMe(n,e),a4e=()=>({state:n,dispatch:e,tr:t})=>{try{const i=eD(n.doc,n.selection.$from.pos,-1);return i==null?!1:(t.join(i,2),e&&e(t),!0)}catch{return!1}},l4e=()=>({state:n,dispatch:e,tr:t})=>{try{const i=eD(n.doc,n.selection.$from.pos,1);return i==null?!1:(t.join(i,2),e&&e(t),!0)}catch{return!1}},c4e=()=>({state:n,dispatch:e})=>XDe(n,e),u4e=()=>({state:n,dispatch:e})=>QDe(n,e);function vae(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function d4e(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let i,r,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))dD()||vae()?o=!0:r=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return i&&(t=`Alt-${t}`),r&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const h4e=n=>({editor:e,view:t,tr:i,dispatch:r})=>{const s=d4e(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(i.mapping);u&&r&&i.maybeStep(u)}),!0};function Sf(n,e,t={}){const{from:i,to:r,empty:s}=n.selection,o=e?Vr(e,n.schema):null,a=[];n.doc.nodesBetween(i,r,(d,h)=>{if(d.isText)return;const f=Math.max(i,h),g=Math.min(r,h+d.nodeSize);a.push({node:d,from:f,to:g})});const l=r-i,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>V2(d.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}const f4e=(n,e={})=>({state:t,dispatch:i})=>{const r=Vr(n,t.schema);return Sf(t,r,e)?rMe(t,i):!1},g4e=()=>({state:n,dispatch:e})=>lMe(n,e),p4e=n=>({state:e,dispatch:t})=>{const i=Vr(n,e.schema);return mMe(i)(e,t)},m4e=()=>({state:n,dispatch:e})=>sMe(n,e);function hD(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function mK(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((i,r)=>(t.includes(r)||(i[r]=n[r]),i),{})}const v4e=(n,e)=>({tr:t,state:i,dispatch:r})=>{let s=null,o=null;const a=hD(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(s=Vr(n,i.schema)),a==="mark"&&(o=qd(n,i.schema)),r&&t.selection.ranges.forEach(l=>{i.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,mK(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(mK(d.attrs,e)))})})}),!0):!1},b4e=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),_4e=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),C4e=()=>({state:n,dispatch:e})=>JDe(n,e),y4e=()=>({state:n,dispatch:e})=>tMe(n,e),w4e=()=>({state:n,dispatch:e})=>cMe(n,e),S4e=()=>({state:n,dispatch:e})=>hMe(n,e),x4e=()=>({state:n,dispatch:e})=>dMe(n,e);function J3(n,e,t={},i={}){return z2(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:i.errorOnInvalidContent})}const k4e=(n,e=!1,t={},i={})=>({editor:r,tr:s,dispatch:o,commands:a})=>{var l,c;const{doc:u}=s;if(t.preserveWhitespace!=="full"){const d=J3(n,r.schema,t,{errorOnInvalidContent:(l=i.errorOnInvalidContent)!==null&&l!==void 0?l:r.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},n,{parseOptions:t,errorOnInvalidContent:(c=i.errorOnInvalidContent)!==null&&c!==void 0?c:r.options.enableContentCheck})};function fB(n,e){const t=qd(e,n.schema),{from:i,to:r,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(i,r,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function E4e(n,e){const t=new QF(n);return e.forEach(i=>{i.steps.forEach(r=>{t.step(r)})}),t}function L4e(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function eP(n,e){const t=[];return n.descendants((i,r)=>{e(i)&&t.push({node:i,pos:r})}),t}function N4e(n,e,t){const i=[];return n.nodesBetween(e.from,e.to,(r,s)=>{t(r)&&i.push({node:r,pos:s})}),i}function bae(n,e){for(let t=n.depth;t>0;t-=1){const i=n.node(t);if(e(i))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:i}}}function fD(n){return e=>bae(e.$from,n)}function T4e(n,e){const t=um.fromSchema(e).serializeFragment(n),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(t),r.innerHTML}function I4e(n,e){const t={from:0,to:n.content.size};return fae(n,t,e)}function D4e(n,e){const t=Vr(e,n.schema),{from:i,to:r}=n.selection,s=[];n.doc.nodesBetween(i,r,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function _ae(n,e){const t=hD(typeof e=="string"?e:e.name,n.schema);return t==="node"?D4e(n,e):t==="mark"?fB(n,e):{}}function M4e(n,e=JSON.stringify){const t={};return n.filter(i=>{const r=e(i);return Object.prototype.hasOwnProperty.call(t,r)?!1:t[r]=!0})}function R4e(n){const e=M4e(n);return e.length===1?e:e.filter((t,i)=>!e.filter((s,o)=>o!==i).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function A4e(n){const{mapping:e,steps:t}=n,i=[];return e.maps.forEach((r,s)=>{const o=[];if(r.ranges.length)r.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=t[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),u=e.slice(s).map(l),d=e.invert().map(c,-1),h=e.invert().map(u);i.push({oldRange:{from:d,to:h},newRange:{from:c,to:u}})})}),R4e(i)}function gB(n,e,t){const i=[];return n===e?t.resolve(n).marks().forEach(r=>{const s=t.resolve(n),o=uD(s,r.type);o&&i.push({mark:r,...o})}):t.nodesBetween(n,e,(r,s)=>{!r||(r==null?void 0:r.nodeSize)===void 0||i.push(...r.marks.map(o=>({from:s,to:s+r.nodeSize,mark:o})))}),i}const O4e=(n,e,t,i=20)=>{const r=n.doc.resolve(t);let s=i,o=null;for(;s>0&&o===null;){const a=r.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function sE(n,e,t){return Object.fromEntries(Object.entries(t).filter(([i])=>{const r=n.find(s=>s.type===e&&s.name===i);return r?r.attribute.keepOnSplit:!1}))}function tP(n,e,t={}){const{empty:i,ranges:r}=n.selection,s=e?qd(e,n.schema):null;if(i)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>V2(d.attrs,t,{strict:!1}));let o=0;const a=[];if(r.forEach(({$from:d,$to:h})=>{const f=d.pos,g=h.pos;n.doc.nodesBetween(f,g,(p,v)=>{if(!p.isText&&!p.marks.length)return;const b=Math.max(f,v),_=Math.min(g,v+p.nodeSize),y=_-b;o+=y,a.push(...p.marks.map(C=>({mark:C,from:b,to:_})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>V2(d.mark.attrs,t,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=o}function P4e(n,e,t={}){if(!e)return Sf(n,null,t)||tP(n,null,t);const i=hD(e,n.schema);return i==="node"?Sf(n,e,t):i==="mark"?tP(n,e,t):!1}const F4e=(n,e)=>{const{$from:t,$to:i,$anchor:r}=n.selection;if(e){const s=fD(a=>a.type.name===e)(n.selection);if(!s)return!1;const o=n.doc.resolve(s.pos+1);return r.pos+1===o.end()}return!(i.parentOffset<i.parent.nodeSize-2||t.pos!==i.pos)},B4e=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function vK(n,e){const{nodeExtensions:t}=lD(e),i=t.find(o=>o.name===n);if(!i)return!1;const r={name:i.name,options:i.options,storage:i.storage},s=Pn(Mt(i,"group",r));return typeof s!="string"?!1:s.split(" ").includes("list")}function gD(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var i;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((i=n.text)!==null&&i!==void 0?i:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let r=!0;return n.content.forEach(s=>{r!==!1&&(gD(s,{ignoreWhitespace:t,checkChildren:e})||(r=!1))}),r}return!1}function Cae(n){return n instanceof $t}function H4e(n,e,t){const r=n.state.doc.content.size,s=fd(e,0,r),o=fd(t,0,r),a=n.coordsAtPos(s),l=n.coordsAtPos(o,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),h=Math.max(a.right,l.right),f=h-d,g=u-c,b={top:c,bottom:u,left:d,right:h,width:f,height:g,x:d,y:c};return{...b,toJSON:()=>b}}function V4e(n,e,t){var i;const{selection:r}=e;let s=null;if(hB(r)&&(s=r.$cursor),s){const a=(i=n.storedMarks)!==null&&i!==void 0?i:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=r;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const f=!h||h.type.allowsMarkType(t),g=!!t.isInSet(u.marks)||!u.marks.some(p=>p.type.excludes(t));c=f&&g}return!c}),c})}const z4e=(n,e={})=>({tr:t,state:i,dispatch:r})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=qd(n,i.schema);if(r)if(o){const c=fB(i,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;i.doc.nodesBetween(u,d,(h,f)=>{const g=Math.max(f,u),p=Math.min(f+h.nodeSize,d);h.marks.find(b=>b.type===l)?h.marks.forEach(b=>{l===b.type&&t.addMark(g,p,l.create({...b.attrs,...e}))}):t.addMark(g,p,l.create(e))})});return V4e(i,t,l)},W4e=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),$4e=(n,e={})=>({state:t,dispatch:i,chain:r})=>{const s=Vr(n,t.schema);return s.isTextblock?r().command(({commands:o})=>hK(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>hK(s,e)(o,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},U4e=n=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,r=fd(n,0,i.content.size),s=$t.create(i,r);e.setSelection(s)}return!0},j4e=n=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,{from:r,to:s}=typeof n=="number"?{from:n,to:n}:n,o=Gt.atStart(i).from,a=Gt.atEnd(i).to,l=fd(r,o,a),c=fd(s,o,a),u=Gt.create(i,l,c);e.setSelection(u)}return!0},K4e=n=>({state:e,dispatch:t})=>{const i=Vr(n,e.schema);return _Me(i)(e,t)};function bK(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const i=t.filter(r=>e==null?void 0:e.includes(r.type.name));n.tr.ensureMarks(i)}}const q4e=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:i,editor:r})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=r.extensionManager.attributes,u=sE(c,a.node().type.name,a.node().attrs);if(s instanceof $t&&s.node.isBlock)return!a.parentOffset||!x0(o,a.pos)?!1:(i&&(n&&bK(t,r.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:L4e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=d&&h?[{type:h,attrs:u}]:void 0,g=x0(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!g&&x0(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(g=!0,f=h?[{type:h,attrs:u}]:void 0),i){if(g&&(s instanceof Gt&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const p=e.mapping.map(a.before()),v=e.doc.resolve(p);a.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}n&&bK(t,r.extensionManager.splittableMarks),e.scrollIntoView()}return g},G4e=(n,e={})=>({tr:t,state:i,dispatch:r,editor:s})=>{var o;const a=Vr(n,i.schema),{$from:l,$to:c}=i.selection,u=i.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(r){let b=Ye.empty;const _=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-_;E>=l.depth-3;E-=1)b=Ye.from(l.node(E).copy(b));const y=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,C={...sE(h,l.node().type.name,l.node().attrs),...e},w=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(C))||void 0;b=b.append(Ye.from(a.createAndFill(null,w)||void 0));const x=l.before(l.depth-(_-1));t.replace(x,l.after(-y),new _t(b,4-_,0));let k=-1;t.doc.nodesBetween(x,t.doc.content.size,(E,L)=>{if(k>-1)return!1;E.isTextblock&&E.content.size===0&&(k=L+1)}),k>-1&&t.setSelection(Gt.near(t.doc.resolve(k))),t.scrollIntoView()}return!0}const f=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,g={...sE(h,d.type.name,d.attrs),...e},p={...sE(h,l.node().type.name,l.node().attrs),...e};t.delete(l.pos,c.pos);const v=f?[{type:a,attrs:g},{type:f,attrs:p}]:[{type:a,attrs:g}];if(!x0(t.doc,l.pos,2))return!1;if(r){const{selection:b,storedMarks:_}=i,{splittableMarks:y}=s.extensionManager,C=_||b.$to.parentOffset&&b.$from.marks();if(t.split(l.pos,2,v).scrollIntoView(),!C||!r)return!0;const w=C.filter(x=>y.includes(x.type.name));t.ensureMarks(w)}return!0},Y4=(n,e)=>{const t=fD(o=>o.type===e)(n.selection);if(!t)return!0;const i=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(i===void 0)return!0;const r=n.doc.nodeAt(i);return t.node.type===(r==null?void 0:r.type)&&zf(n.doc,t.pos)&&n.join(t.pos),!0},Z4=(n,e)=>{const t=fD(o=>o.type===e)(n.selection);if(!t)return!0;const i=n.doc.resolve(t.start).after(t.depth);if(i===void 0)return!0;const r=n.doc.nodeAt(i);return t.node.type===(r==null?void 0:r.type)&&zf(n.doc,i)&&n.join(i),!0},Y4e=(n,e,t,i={})=>({editor:r,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=r.extensionManager,f=Vr(n,o.schema),g=Vr(e,o.schema),{selection:p,storedMarks:v}=o,{$from:b,$to:_}=p,y=b.blockRange(_),C=v||p.$to.parentOffset&&p.$from.marks();if(!y)return!1;const w=fD(x=>vK(x.type.name,d))(p);if(y.depth>=1&&w&&y.depth-w.depth<=1){if(w.node.type===f)return c.liftListItem(g);if(vK(w.node.type.name,d)&&f.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,f),!0)).command(()=>Y4(s,f)).command(()=>Z4(s,f)).run()}return!t||!C||!a?l().command(()=>u().wrapInList(f,i)?!0:c.clearNodes()).wrapInList(f,i).command(()=>Y4(s,f)).command(()=>Z4(s,f)).run():l().command(()=>{const x=u().wrapInList(f,i),k=C.filter(E=>h.includes(E.type.name));return s.ensureMarks(k),x?!0:c.clearNodes()}).wrapInList(f,i).command(()=>Y4(s,f)).command(()=>Z4(s,f)).run()},Z4e=(n,e={},t={})=>({state:i,commands:r})=>{const{extendEmptyMarkRange:s=!1}=t,o=qd(n,i.schema);return tP(i,o,e)?r.unsetMark(o,{extendEmptyMarkRange:s}):r.setMark(o,e)},X4e=(n,e,t={})=>({state:i,commands:r})=>{const s=Vr(n,i.schema),o=Vr(e,i.schema),a=Sf(i,s,t);let l;return i.selection.$anchor.sameParent(i.selection.$head)&&(l=i.selection.$anchor.parent.attrs),a?r.setNode(o,l):r.setNode(s,{...l,...t})},Q4e=(n,e={})=>({state:t,commands:i})=>{const r=Vr(n,t.schema);return Sf(t,r,e)?i.lift(r):i.wrapIn(r,e)},J4e=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let i=0;i<t.length;i+=1){const r=t[i];let s;if(r.spec.isInputRules&&(s=r.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},eRe=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:i,ranges:r}=t;return i||e&&r.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},tRe=(n,e={})=>({tr:t,state:i,dispatch:r})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=qd(n,i.schema),{$from:c,empty:u,ranges:d}=a;if(!r)return!0;if(u&&o){let{from:h,to:f}=a;const g=(s=c.marks().find(v=>v.type===l))===null||s===void 0?void 0:s.attrs,p=uD(c,l,g);p&&(h=p.from,f=p.to),t.removeMark(h,f,l)}else d.forEach(h=>{t.removeMark(h.$from.pos,h.$to.pos,l)});return t.removeStoredMark(l),!0},nRe=(n,e={})=>({tr:t,state:i,dispatch:r})=>{let s=null,o=null;const a=hD(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(s=Vr(n,i.schema)),a==="mark"&&(o=qd(n,i.schema)),r&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;i.doc.nodesBetween(c,u,(d,h)=>{s&&s===d.type&&t.setNodeMarkup(h,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(f=>{if(o===f.type){const g=Math.max(h,c),p=Math.min(h+d.nodeSize,u);t.addMark(g,p,o.create({...f.attrs,...e}))}})})}),!0):!1},iRe=(n,e={})=>({state:t,dispatch:i})=>{const r=Vr(n,t.schema);return fMe(r,e)(t,i)},rRe=(n,e={})=>({state:t,dispatch:i})=>{const r=Vr(n,t.schema);return gMe(r,e)(t,i)};var sRe=Object.freeze({__proto__:null,blur:PMe,clearContent:FMe,clearNodes:BMe,command:HMe,createParagraphNear:VMe,cut:zMe,deleteCurrentNode:WMe,deleteNode:$Me,deleteRange:UMe,deleteSelection:jMe,enter:KMe,exitCode:qMe,extendMarkRange:YMe,first:ZMe,focus:XMe,forEach:QMe,insertContent:JMe,insertContentAt:n4e,joinBackward:s4e,joinDown:r4e,joinForward:o4e,joinItemBackward:a4e,joinItemForward:l4e,joinTextblockBackward:c4e,joinTextblockForward:u4e,joinUp:i4e,keyboardShortcut:h4e,lift:f4e,liftEmptyBlock:g4e,liftListItem:p4e,newlineInCode:m4e,resetAttributes:v4e,scrollIntoView:b4e,selectAll:_4e,selectNodeBackward:C4e,selectNodeForward:y4e,selectParentNode:w4e,selectTextblockEnd:S4e,selectTextblockStart:x4e,setContent:k4e,setMark:z4e,setMeta:W4e,setNode:$4e,setNodeSelection:U4e,setTextSelection:j4e,sinkListItem:K4e,splitBlock:q4e,splitListItem:G4e,toggleList:Y4e,toggleMark:Z4e,toggleNode:X4e,toggleWrap:Q4e,undoInputRule:J4e,unsetAllMarks:eRe,unsetMark:tRe,updateAttributes:nRe,wrapIn:iRe,wrapInList:rRe});const oRe=pi.create({name:"commands",addCommands(){return{...sRe}}}),aRe=pi.create({name:"drop",addProseMirrorPlugins(){return[new Ni({key:new zi("tiptapDrop"),props:{handleDrop:(n,e,t,i)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:i})}}})]}}),lRe=pi.create({name:"editable",addProseMirrorPlugins(){return[new Ni({key:new zi("editable"),props:{editable:()=>this.editor.options.editable}})]}}),cRe=pi.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Ni({key:new zi("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const i=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1},blur:(e,t)=>{n.isFocused=!1;const i=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1}}}})]}}),uRe=pi.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:f}=d,g=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,p=g.parent.type.spec.isolating,v=d.pos-d.parentOffset,b=p&&g.parent.childCount===1?v===d.pos:tn.atStart(c).from===h;return!u||!f.type.isTextblock||f.textContent.length||!b||b&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},r={...i},s={...i,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return dD()||vae()?s:r},addProseMirrorPlugins(){return[new Ni({key:new zi("clearDocument"),appendTransaction:(n,e,t)=>{const i=n.some(p=>p.docChanged)&&!e.doc.eq(t.doc),r=n.some(p=>p.getMeta("preventClearDocument"));if(!i||r)return;const{empty:s,from:o,to:a}=e.selection,l=tn.atStart(e.doc).from,c=tn.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!gD(t.doc))return;const h=t.tr,f=oD({state:t,transaction:h}),{commands:g}=new aD({editor:this.editor,state:f});if(g.clearNodes(),!!h.steps.length)return h}})]}}),dRe=pi.create({name:"paste",addProseMirrorPlugins(){return[new Ni({key:new zi("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),hRe=pi.create({name:"tabindex",addProseMirrorPlugins(){return[new Ni({key:new zi("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class bg{get name(){return this.node.type.name}constructor(e,t,i=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=i,this.resolvedPos=e,this.editor=t,this.currentNode=r}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,i=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,i=this.to-1}this.editor.commands.insertContentAt({from:t,to:i},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new bg(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new bg(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new bg(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,i)=>{const r=t.isBlock&&!t.isTextblock,s=this.pos+i+1,o=this.resolvedPos.doc.resolve(s);if(!r&&o.depth<=this.depth)return;const a=new bg(o,this.editor,r,r?t:null);r&&(a.actualDepth=this.depth+1),e.push(new bg(o,this.editor,r,r?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let i=null,r=this.parent;for(;r&&!i;){if(r.node.type.name===e)if(Object.keys(t).length>0){const s=r.node.attrs,o=Object.keys(t);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==t[l])break}}else i=r;r=r.parent}return i}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},i=!1){let r=[];if(!this.children||this.children.length===0)return r;const s=Object.keys(t);return this.children.forEach(o=>{i&&r.length>0||(o.node.type.name===e&&s.every(l=>t[l]===o.node.attrs[l])&&r.push(o),!(i&&r.length>0)&&(r=r.concat(o.querySelectorAll(e,t,i))))}),r}setAttribute(e){const t=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(t.from).run()}}const fRe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function gRe(n,e,t){const i=document.querySelector("style[data-tiptap-style]");if(i!==null)return i;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(r),r}let pRe=class extends CMe{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:i,moved:r})=>this.options.onDrop(t,i,r)),this.on("paste",({event:t,slice:i})=>this.options.onPaste(t,i)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=gRe(fRe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const i=hae(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:i});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,i=this.state.reconfigure({plugins:this.state.plugins.filter(r=>!r.key.startsWith(t))});return this.view.updateState(i),i}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[lRe,OMe.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),oRe,cRe,uRe,hRe,aRe,dRe].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Iv(r,this)}createCommandManager(){this.commandManager=new aD({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=J3(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.options.extensions=this.options.extensions.filter(o=>o.name!=="collaboration"),this.createExtensionManager()}}),e=J3(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const t=pae(e,this.options.autofocus);this.view=new HDe(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Tv.create({doc:e,selection:t||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),i=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),i&&this.emit("selectionUpdate",{editor:this,transaction:e});const r=e.getMeta("focus"),s=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return _ae(this.state,e)}isActive(e,t){const i=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return P4e(this.state,i,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return T4e(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:i={}}=e||{};return I4e(this.state.doc,{blockSeparator:t,textSerializers:{...gae(this.schema),...i}})}get isEmpty(){return gD(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelector(e,t))||null}$nodes(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new bg(t,this)}get $doc(){return this.$pos(0)}};function jp(n){return new tS({find:n.find,handler:({state:e,range:t,match:i})=>{const r=Pn(n.getAttributes,void 0,i);if(r===!1||r===null)return null;const{tr:s}=e,o=i[i.length-1],a=i[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),u=c+o.length;if(gB(t.from,t.to,e.doc).filter(f=>f.mark.type.excluded.find(p=>p===n.type&&p!==f.mark.type)).filter(f=>f.to>c).length)return null;u<t.to&&s.delete(u,t.to),c>t.from&&s.delete(t.from+l,c);const h=t.from+l+o.length;s.addMark(t.from+l,h,n.type.create(r||{})),s.removeStoredMark(n.type)}}})}function pB(n){return new tS({find:n.find,handler:({state:e,range:t,match:i})=>{const r=Pn(n.getAttributes,void 0,i)||{},{tr:s}=e,o=t.from;let a=t.to;const l=n.type.create(r);if(i[1]){const c=i[0].lastIndexOf(i[1]);let u=o+c;u>a?u=a:a=u+i[1].length;const d=i[0][i[0].length-1];s.insertText(d,o+i[0].length-1),s.replaceWith(u,a,l)}else if(i[0]){const c=n.type.isInline?o:o-1;s.insert(c,n.type.create(r)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function nP(n){return new tS({find:n.find,handler:({state:e,range:t,match:i})=>{const r=e.doc.resolve(t.from),s=Pn(n.getAttributes,void 0,i)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}function m1(n){return new tS({find:n.find,handler:({state:e,range:t,match:i,chain:r})=>{const s=Pn(n.getAttributes,void 0,i)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),c=l&&XF(l,n.type,s);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:f}=n.editor.extensionManager,g=h||d.$to.parentOffset&&d.$from.marks();if(g){const p=g.filter(v=>f.includes(v.type.name));o.ensureMarks(p)}}if(n.keepAttributes){const d=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";r().updateAttributes(d,s).run()}const u=o.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&zf(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(i,u))&&o.join(t.from-1)}})}let Gi=class iP{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Pn(Mt(this,"addOptions",{name:this.name}))),this.storage=Pn(Mt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new iP(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>cD(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new iP(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Pn(Mt(t,"addOptions",{name:t.name})),t.storage=Pn(Mt(t,"addStorage",{name:t.name,options:t.options})),t}};function mRe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}class vRe{constructor(e,t,i){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...i},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,i,r,s,o,a,l;const{view:c}=this.editor,u=e.target,d=u.nodeType===3?(t=u.parentElement)===null||t===void 0?void 0:t.closest("[data-drag-handle]"):u.closest("[data-drag-handle]");if(!this.dom||!((i=this.contentDOM)===null||i===void 0)&&i.contains(u)||!d)return;let h=0,f=0;if(this.dom!==d){const b=this.dom.getBoundingClientRect(),_=d.getBoundingClientRect(),y=(r=e.offsetX)!==null&&r!==void 0?r:(s=e.nativeEvent)===null||s===void 0?void 0:s.offsetX,C=(o=e.offsetY)!==null&&o!==void 0?o:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;h=_.x-b.x+y,f=_.y-b.y+C}(l=e.dataTransfer)===null||l===void 0||l.setDragImage(this.dom,h,f);const g=this.getPos();if(typeof g!="number")return;const p=$t.create(c.state.doc,g),v=c.state.tr.setSelection(p);c.dispatch(v)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const i=e.target;if(!(this.dom.contains(i)&&!(!((t=this.contentDOM)===null||t===void 0)&&t.contains(i))))return!1;const s=e.type.startsWith("drag"),o=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(i.tagName)||i.isContentEditable)&&!o&&!s)return!0;const{isEditable:l}=this.editor,{isDragging:c}=this,u=!!this.node.type.spec.draggable,d=$t.isSelectable(this.node),h=e.type==="copy",f=e.type==="paste",g=e.type==="cut",p=e.type==="mousedown";if(!u&&d&&s&&e.preventDefault(),u&&s&&!c)return e.preventDefault(),!1;if(u&&l&&!c&&p){const v=i.closest("[data-drag-handle]");v&&(this.dom===v||this.dom.contains(v))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||o||h||f||g||p&&d)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(dD()||mRe())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(i=>i.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const i=this.getPos();return typeof i!="number"?!1:(t.setNodeMarkup(i,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function xf(n){return new TMe({find:n.find,handler:({state:e,range:t,match:i,pasteEvent:r})=>{const s=Pn(n.getAttributes,void 0,i,r);if(s===!1||s===null)return null;const{tr:o}=e,a=i[i.length-1],l=i[0];let c=t.to;if(a){const u=l.search(/\S/),d=t.from+l.indexOf(a),h=d+a.length;if(gB(t.from,t.to,e.doc).filter(g=>g.mark.type.excluded.find(v=>v===n.type&&v!==g.mark.type)).filter(g=>g.to>d).length)return null;h<t.to&&o.delete(h,t.to),d>t.from&&o.delete(t.from+u,d),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}var sa="top",Cl="bottom",yl="right",oa="left",mB="auto",nS=[sa,Cl,yl,oa],v1="start",Oy="end",bRe="clippingParents",yae="viewport",Ub="popper",_Re="reference",_K=nS.reduce(function(n,e){return n.concat([e+"-"+v1,e+"-"+Oy])},[]),wae=[].concat(nS,[mB]).reduce(function(n,e){return n.concat([e,e+"-"+v1,e+"-"+Oy])},[]),CRe="beforeRead",yRe="read",wRe="afterRead",SRe="beforeMain",xRe="main",kRe="afterMain",ERe="beforeWrite",LRe="write",NRe="afterWrite",TRe=[CRe,yRe,wRe,SRe,xRe,kRe,ERe,LRe,NRe];function vu(n){return n?(n.nodeName||"").toLowerCase():null}function Oa(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Kp(n){var e=Oa(n).Element;return n instanceof e||n instanceof Element}function hl(n){var e=Oa(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function vB(n){if(typeof ShadowRoot>"u")return!1;var e=Oa(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function IRe(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},r=e.attributes[t]||{},s=e.elements[t];!hl(s)||!vu(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function DRe(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!hl(r)||!vu(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}const Sae={name:"applyStyles",enabled:!0,phase:"write",fn:IRe,effect:DRe,requires:["computeStyles"]};function uu(n){return n.split("-")[0]}var cp=Math.max,W2=Math.min,b1=Math.round;function rP(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function xae(){return!/^((?!chrome|android).)*safari/i.test(rP())}function _1(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=n.getBoundingClientRect(),r=1,s=1;e&&hl(n)&&(r=n.offsetWidth>0&&b1(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&b1(i.height)/n.offsetHeight||1);var o=Kp(n)?Oa(n):window,a=o.visualViewport,l=!xae()&&t,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,d=i.width/r,h=i.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function bB(n){var e=_1(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function kae(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&vB(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Bd(n){return Oa(n).getComputedStyle(n)}function MRe(n){return["table","td","th"].indexOf(vu(n))>=0}function $f(n){return((Kp(n)?n.ownerDocument:n.document)||window.document).documentElement}function pD(n){return vu(n)==="html"?n:n.assignedSlot||n.parentNode||(vB(n)?n.host:null)||$f(n)}function CK(n){return!hl(n)||Bd(n).position==="fixed"?null:n.offsetParent}function RRe(n){var e=/firefox/i.test(rP()),t=/Trident/i.test(rP());if(t&&hl(n)){var i=Bd(n);if(i.position==="fixed")return null}var r=pD(n);for(vB(r)&&(r=r.host);hl(r)&&["html","body"].indexOf(vu(r))<0;){var s=Bd(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function iS(n){for(var e=Oa(n),t=CK(n);t&&MRe(t)&&Bd(t).position==="static";)t=CK(t);return t&&(vu(t)==="html"||vu(t)==="body"&&Bd(t).position==="static")?e:t||RRe(n)||e}function _B(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function iC(n,e,t){return cp(n,W2(e,t))}function ARe(n,e,t){var i=iC(n,e,t);return i>t?t:i}function Eae(){return{top:0,right:0,bottom:0,left:0}}function Lae(n){return Object.assign({},Eae(),n)}function Nae(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var ORe=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Lae(typeof e!="number"?e:Nae(e,nS))};function PRe(n){var e,t=n.state,i=n.name,r=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=uu(t.placement),l=_B(a),c=[oa,yl].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=ORe(r.padding,t),h=bB(s),f=l==="y"?sa:oa,g=l==="y"?Cl:yl,p=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],v=o[l]-t.rects.reference[l],b=iS(s),_=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,y=p/2-v/2,C=d[f],w=_-h[u]-d[g],x=_/2-h[u]/2+y,k=iC(C,x,w),E=l;t.modifiersData[i]=(e={},e[E]=k,e.centerOffset=k-x,e)}}function FRe(n){var e=n.state,t=n.options,i=t.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||kae(e.elements.popper,r)&&(e.elements.arrow=r))}const BRe={name:"arrow",enabled:!0,phase:"main",fn:PRe,effect:FRe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function C1(n){return n.split("-")[1]}var HRe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function VRe(n,e){var t=n.x,i=n.y,r=e.devicePixelRatio||1;return{x:b1(t*r)/r||0,y:b1(i*r)/r||0}}function yK(n){var e,t=n.popper,i=n.popperRect,r=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,h=o.x,f=h===void 0?0:h,g=o.y,p=g===void 0?0:g,v=typeof u=="function"?u({x:f,y:p}):{x:f,y:p};f=v.x,p=v.y;var b=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),y=oa,C=sa,w=window;if(c){var x=iS(t),k="clientHeight",E="clientWidth";if(x===Oa(t)&&(x=$f(t),Bd(x).position!=="static"&&a==="absolute"&&(k="scrollHeight",E="scrollWidth")),x=x,r===sa||(r===oa||r===yl)&&s===Oy){C=Cl;var L=d&&x===w&&w.visualViewport?w.visualViewport.height:x[k];p-=L-i.height,p*=l?1:-1}if(r===oa||(r===sa||r===Cl)&&s===Oy){y=yl;var M=d&&x===w&&w.visualViewport?w.visualViewport.width:x[E];f-=M-i.width,f*=l?1:-1}}var D=Object.assign({position:a},c&&HRe),O=u===!0?VRe({x:f,y:p},Oa(t)):{x:f,y:p};if(f=O.x,p=O.y,l){var A;return Object.assign({},D,(A={},A[C]=_?"0":"",A[y]=b?"0":"",A.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+p+"px)":"translate3d("+f+"px, "+p+"px, 0)",A))}return Object.assign({},D,(e={},e[C]=_?p+"px":"",e[y]=b?f+"px":"",e.transform="",e))}function zRe(n){var e=n.state,t=n.options,i=t.gpuAcceleration,r=i===void 0?!0:i,s=t.adaptive,o=s===void 0?!0:s,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:uu(e.placement),variation:C1(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,yK(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,yK(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const WRe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:zRe,data:{}};var bx={passive:!0};function $Re(n){var e=n.state,t=n.instance,i=n.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=Oa(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,bx)}),a&&l.addEventListener("resize",t.update,bx),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,bx)}),a&&l.removeEventListener("resize",t.update,bx)}}const URe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:$Re,data:{}};var jRe={left:"right",right:"left",bottom:"top",top:"bottom"};function oE(n){return n.replace(/left|right|bottom|top/g,function(e){return jRe[e]})}var KRe={start:"end",end:"start"};function wK(n){return n.replace(/start|end/g,function(e){return KRe[e]})}function CB(n){var e=Oa(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function yB(n){return _1($f(n)).left+CB(n).scrollLeft}function qRe(n,e){var t=Oa(n),i=$f(n),r=t.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=xae();(c||!c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+yB(n),y:l}}function GRe(n){var e,t=$f(n),i=CB(n),r=(e=n.ownerDocument)==null?void 0:e.body,s=cp(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=cp(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+yB(n),l=-i.scrollTop;return Bd(r||t).direction==="rtl"&&(a+=cp(t.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function wB(n){var e=Bd(n),t=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+r+i)}function Tae(n){return["html","body","#document"].indexOf(vu(n))>=0?n.ownerDocument.body:hl(n)&&wB(n)?n:Tae(pD(n))}function rC(n,e){var t;e===void 0&&(e=[]);var i=Tae(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=Oa(i),o=r?[s].concat(s.visualViewport||[],wB(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(rC(pD(o)))}function sP(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function YRe(n,e){var t=_1(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function SK(n,e,t){return e===yae?sP(qRe(n,t)):Kp(e)?YRe(e,t):sP(GRe($f(n)))}function ZRe(n){var e=rC(pD(n)),t=["absolute","fixed"].indexOf(Bd(n).position)>=0,i=t&&hl(n)?iS(n):n;return Kp(i)?e.filter(function(r){return Kp(r)&&kae(r,i)&&vu(r)!=="body"}):[]}function XRe(n,e,t,i){var r=e==="clippingParents"?ZRe(n):[].concat(e),s=[].concat(r,[t]),o=s[0],a=s.reduce(function(l,c){var u=SK(n,c,i);return l.top=cp(u.top,l.top),l.right=W2(u.right,l.right),l.bottom=W2(u.bottom,l.bottom),l.left=cp(u.left,l.left),l},SK(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Iae(n){var e=n.reference,t=n.element,i=n.placement,r=i?uu(i):null,s=i?C1(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(r){case sa:l={x:o,y:e.y-t.height};break;case Cl:l={x:o,y:e.y+e.height};break;case yl:l={x:e.x+e.width,y:a};break;case oa:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=r?_B(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case v1:l[c]=l[c]-(e[u]/2-t[u]/2);break;case Oy:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function Py(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=i===void 0?n.placement:i,s=t.strategy,o=s===void 0?n.strategy:s,a=t.boundary,l=a===void 0?bRe:a,c=t.rootBoundary,u=c===void 0?yae:c,d=t.elementContext,h=d===void 0?Ub:d,f=t.altBoundary,g=f===void 0?!1:f,p=t.padding,v=p===void 0?0:p,b=Lae(typeof v!="number"?v:Nae(v,nS)),_=h===Ub?_Re:Ub,y=n.rects.popper,C=n.elements[g?_:h],w=XRe(Kp(C)?C:C.contextElement||$f(n.elements.popper),l,u,o),x=_1(n.elements.reference),k=Iae({reference:x,element:y,strategy:"absolute",placement:r}),E=sP(Object.assign({},y,k)),L=h===Ub?E:x,M={top:w.top-L.top+b.top,bottom:L.bottom-w.bottom+b.bottom,left:w.left-L.left+b.left,right:L.right-w.right+b.right},D=n.modifiersData.offset;if(h===Ub&&D){var O=D[r];Object.keys(M).forEach(function(A){var R=[yl,Cl].indexOf(A)>=0?1:-1,V=[sa,Cl].indexOf(A)>=0?"y":"x";M[A]+=O[V]*R})}return M}function QRe(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=t.boundary,s=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?wae:l,u=C1(i),d=u?a?_K:_K.filter(function(g){return C1(g)===u}):nS,h=d.filter(function(g){return c.indexOf(g)>=0});h.length===0&&(h=d);var f=h.reduce(function(g,p){return g[p]=Py(n,{placement:p,boundary:r,rootBoundary:s,padding:o})[uu(p)],g},{});return Object.keys(f).sort(function(g,p){return f[g]-f[p]})}function JRe(n){if(uu(n)===mB)return[];var e=oE(n);return[wK(n),e,wK(e)]}function eAe(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var r=t.mainAxis,s=r===void 0?!0:r,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,h=t.altBoundary,f=t.flipVariations,g=f===void 0?!0:f,p=t.allowedAutoPlacements,v=e.options.placement,b=uu(v),_=b===v,y=l||(_||!g?[oE(v)]:JRe(v)),C=[v].concat(y).reduce(function(X,q){return X.concat(uu(q)===mB?QRe(e,{placement:q,boundary:u,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:p}):q)},[]),w=e.rects.reference,x=e.rects.popper,k=new Map,E=!0,L=C[0],M=0;M<C.length;M++){var D=C[M],O=uu(D),A=C1(D)===v1,R=[sa,Cl].indexOf(O)>=0,V=R?"width":"height",F=Py(e,{placement:D,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),T=R?A?yl:oa:A?Cl:sa;w[V]>x[V]&&(T=oE(T));var N=oE(T),B=[];if(s&&B.push(F[O]<=0),a&&B.push(F[T]<=0,F[N]<=0),B.every(function(X){return X})){L=D,E=!1;break}k.set(D,B)}if(E)for(var $=g?3:1,j=function(q){var re=C.find(function(ge){var ye=k.get(ge);if(ye)return ye.slice(0,q).every(function(we){return we})});if(re)return L=re,"break"},Y=$;Y>0;Y--){var G=j(Y);if(G==="break")break}e.placement!==L&&(e.modifiersData[i]._skip=!0,e.placement=L,e.reset=!0)}}const tAe={name:"flip",enabled:!0,phase:"main",fn:eAe,requiresIfExists:["offset"],data:{_skip:!1}};function xK(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function kK(n){return[sa,yl,Cl,oa].some(function(e){return n[e]>=0})}function nAe(n){var e=n.state,t=n.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=Py(e,{elementContext:"reference"}),a=Py(e,{altBoundary:!0}),l=xK(o,i),c=xK(a,r,s),u=kK(l),d=kK(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const iAe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nAe};function rAe(n,e,t){var i=uu(n),r=[oa,sa].indexOf(i)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[oa,yl].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function sAe(n){var e=n.state,t=n.options,i=n.name,r=t.offset,s=r===void 0?[0,0]:r,o=wae.reduce(function(u,d){return u[d]=rAe(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}const oAe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sAe};function aAe(n){var e=n.state,t=n.name;e.modifiersData[t]=Iae({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const lAe={name:"popperOffsets",enabled:!0,phase:"read",fn:aAe,data:{}};function cAe(n){return n==="x"?"y":"x"}function uAe(n){var e=n.state,t=n.options,i=n.name,r=t.mainAxis,s=r===void 0?!0:r,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,h=t.tether,f=h===void 0?!0:h,g=t.tetherOffset,p=g===void 0?0:g,v=Py(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),b=uu(e.placement),_=C1(e.placement),y=!_,C=_B(b),w=cAe(C),x=e.modifiersData.popperOffsets,k=e.rects.reference,E=e.rects.popper,L=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,M=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(x){if(s){var A,R=C==="y"?sa:oa,V=C==="y"?Cl:yl,F=C==="y"?"height":"width",T=x[C],N=T+v[R],B=T-v[V],$=f?-E[F]/2:0,j=_===v1?k[F]:E[F],Y=_===v1?-E[F]:-k[F],G=e.elements.arrow,X=f&&G?bB(G):{width:0,height:0},q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Eae(),re=q[R],ge=q[V],ye=iC(0,k[F],X[F]),we=y?k[F]/2-$-ye-re-M.mainAxis:j-ye-re-M.mainAxis,Ie=y?-k[F]/2+$+ye+ge+M.mainAxis:Y+ye+ge+M.mainAxis,Fe=e.elements.arrow&&iS(e.elements.arrow),ze=Fe?C==="y"?Fe.clientTop||0:Fe.clientLeft||0:0,Me=(A=D==null?void 0:D[C])!=null?A:0,Pe=T+we-Me-ze,tt=T+Ie-Me,Ae=iC(f?W2(N,Pe):N,T,f?cp(B,tt):B);x[C]=Ae,O[C]=Ae-T}if(a){var mt,ft=C==="x"?sa:oa,Le=C==="x"?Cl:yl,Ge=x[w],Oe=w==="y"?"height":"width",xe=Ge+v[ft],at=Ge-v[Le],gt=[sa,oa].indexOf(b)!==-1,Ct=(mt=D==null?void 0:D[w])!=null?mt:0,nt=gt?xe:Ge-k[Oe]-E[Oe]-Ct+M.altAxis,se=gt?Ge+k[Oe]+E[Oe]-Ct-M.altAxis:at,fe=f&&gt?ARe(nt,Ge,se):iC(f?nt:xe,Ge,f?se:at);x[w]=fe,O[w]=fe-Ge}e.modifiersData[i]=O}}const dAe={name:"preventOverflow",enabled:!0,phase:"main",fn:uAe,requiresIfExists:["offset"]};function hAe(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function fAe(n){return n===Oa(n)||!hl(n)?CB(n):hAe(n)}function gAe(n){var e=n.getBoundingClientRect(),t=b1(e.width)/n.offsetWidth||1,i=b1(e.height)/n.offsetHeight||1;return t!==1||i!==1}function pAe(n,e,t){t===void 0&&(t=!1);var i=hl(e),r=hl(e)&&gAe(e),s=$f(e),o=_1(n,r,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((vu(e)!=="body"||wB(s))&&(a=fAe(e)),hl(e)?(l=_1(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=yB(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function mAe(n){var e=new Map,t=new Set,i=[];n.forEach(function(s){e.set(s.name,s)});function r(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return n.forEach(function(s){t.has(s.name)||r(s)}),i}function vAe(n){var e=mAe(n);return TRe.reduce(function(t,i){return t.concat(e.filter(function(r){return r.phase===i}))},[])}function bAe(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function _Ae(n){var e=n.reduce(function(t,i){var r=t[i.name];return t[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var EK={placement:"bottom",modifiers:[],strategy:"absolute"};function LK(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function CAe(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,r=e.defaultOptions,s=r===void 0?EK:r;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},EK,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(b){var _=typeof b=="function"?b(u.options):b;p(),u.options=Object.assign({},s,u.options,_),u.scrollParents={reference:Kp(a)?rC(a):a.contextElement?rC(a.contextElement):[],popper:rC(l)};var y=vAe(_Ae([].concat(i,u.options.modifiers)));return u.orderedModifiers=y.filter(function(C){return C.enabled}),g(),f.update()},forceUpdate:function(){if(!h){var b=u.elements,_=b.reference,y=b.popper;if(LK(_,y)){u.rects={reference:pAe(_,iS(y),u.options.strategy==="fixed"),popper:bB(y)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(M){return u.modifiersData[M.name]=Object.assign({},M.data)});for(var C=0;C<u.orderedModifiers.length;C++){if(u.reset===!0){u.reset=!1,C=-1;continue}var w=u.orderedModifiers[C],x=w.fn,k=w.options,E=k===void 0?{}:k,L=w.name;typeof x=="function"&&(u=x({state:u,options:E,name:L,instance:f})||u)}}}},update:bAe(function(){return new Promise(function(v){f.forceUpdate(),v(u)})}),destroy:function(){p(),h=!0}};if(!LK(a,l))return f;f.setOptions(c).then(function(v){!h&&c.onFirstUpdate&&c.onFirstUpdate(v)});function g(){u.orderedModifiers.forEach(function(v){var b=v.name,_=v.options,y=_===void 0?{}:_,C=v.effect;if(typeof C=="function"){var w=C({state:u,name:b,instance:f,options:y}),x=function(){};d.push(w||x)}})}function p(){d.forEach(function(v){return v()}),d=[]}return f}}var yAe=[URe,lAe,WRe,Sae,oAe,tAe,dAe,BRe,iAe],wAe=CAe({defaultModifiers:yAe}),SAe="tippy-box",Dae="tippy-content",xAe="tippy-backdrop",Mae="tippy-arrow",Rae="tippy-svg-arrow",ag={passive:!0,capture:!0},Aae=function(){return document.body};function X4(n,e,t){if(Array.isArray(n)){var i=n[e];return i??(Array.isArray(t)?t[e]:t)}return n}function SB(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function Oae(n,e){return typeof n=="function"?n.apply(void 0,e):n}function NK(n,e){if(e===0)return n;var t;return function(i){clearTimeout(t),t=setTimeout(function(){n(i)},e)}}function kAe(n){return n.split(/\s+/).filter(Boolean)}function av(n){return[].concat(n)}function TK(n,e){n.indexOf(e)===-1&&n.push(e)}function EAe(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function LAe(n){return n.split("-")[0]}function $2(n){return[].slice.call(n)}function IK(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function sC(){return document.createElement("div")}function mD(n){return["Element","Fragment"].some(function(e){return SB(n,e)})}function NAe(n){return SB(n,"NodeList")}function TAe(n){return SB(n,"MouseEvent")}function IAe(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function DAe(n){return mD(n)?[n]:NAe(n)?$2(n):Array.isArray(n)?n:$2(document.querySelectorAll(n))}function Q4(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function DK(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function MAe(n){var e,t=av(n),i=t[0];return i!=null&&(e=i.ownerDocument)!=null&&e.body?i.ownerDocument:document}function RAe(n,e){var t=e.clientX,i=e.clientY;return n.every(function(r){var s=r.popperRect,o=r.popperState,a=r.props,l=a.interactiveBorder,c=LAe(o.placement),u=o.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,h=c==="top"?u.bottom.y:0,f=c==="right"?u.left.x:0,g=c==="left"?u.right.x:0,p=s.top-i+d>l,v=i-s.bottom-h>l,b=s.left-t+f>l,_=t-s.right-g>l;return p||v||b||_})}function J4(n,e,t){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(r){n[i](r,t)})}function MK(n,e){for(var t=e;t;){var i;if(n.contains(t))return!0;t=t.getRootNode==null||(i=t.getRootNode())==null?void 0:i.host}return!1}var Zc={isTouch:!1},RK=0;function AAe(){Zc.isTouch||(Zc.isTouch=!0,window.performance&&document.addEventListener("mousemove",Pae))}function Pae(){var n=performance.now();n-RK<20&&(Zc.isTouch=!1,document.removeEventListener("mousemove",Pae)),RK=n}function OAe(){var n=document.activeElement;if(IAe(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function PAe(){document.addEventListener("touchstart",AAe,ag),window.addEventListener("blur",OAe)}var FAe=typeof window<"u"&&typeof document<"u",BAe=FAe?!!window.msCrypto:!1,HAe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},VAe={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},tc=Object.assign({appendTo:Aae,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},HAe,VAe),zAe=Object.keys(tc),WAe=function(e){var t=Object.keys(e);t.forEach(function(i){tc[i]=e[i]})};function Fae(n){var e=n.plugins||[],t=e.reduce(function(i,r){var s=r.name,o=r.defaultValue;if(s){var a;i[s]=n[s]!==void 0?n[s]:(a=tc[s])!=null?a:o}return i},{});return Object.assign({},n,t)}function $Ae(n,e){var t=e?Object.keys(Fae(Object.assign({},tc,{plugins:e}))):zAe,i=t.reduce(function(r,s){var o=(n.getAttribute("data-tippy-"+s)||"").trim();if(!o)return r;if(s==="content")r[s]=o;else try{r[s]=JSON.parse(o)}catch{r[s]=o}return r},{});return i}function AK(n,e){var t=Object.assign({},e,{content:Oae(e.content,[n])},e.ignoreAttributes?{}:$Ae(n,e.plugins));return t.aria=Object.assign({},tc.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var UAe=function(){return"innerHTML"};function oP(n,e){n[UAe()]=e}function OK(n){var e=sC();return n===!0?e.className=Mae:(e.className=Rae,mD(n)?e.appendChild(n):oP(e,n)),e}function PK(n,e){mD(e.content)?(oP(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?oP(n,e.content):n.textContent=e.content)}function aP(n){var e=n.firstElementChild,t=$2(e.children);return{box:e,content:t.find(function(i){return i.classList.contains(Dae)}),arrow:t.find(function(i){return i.classList.contains(Mae)||i.classList.contains(Rae)}),backdrop:t.find(function(i){return i.classList.contains(xAe)})}}function Bae(n){var e=sC(),t=sC();t.className=SAe,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var i=sC();i.className=Dae,i.setAttribute("data-state","hidden"),PK(i,n.props),e.appendChild(t),t.appendChild(i),r(n.props,n.props);function r(s,o){var a=aP(e),l=a.box,c=a.content,u=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&PK(c,n.props),o.arrow?u?s.arrow!==o.arrow&&(l.removeChild(u),l.appendChild(OK(o.arrow))):l.appendChild(OK(o.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:r}}Bae.$$tippy=!0;var jAe=1,_x=[],eR=[];function KAe(n,e){var t=AK(n,Object.assign({},tc,Fae(IK(e)))),i,r,s,o=!1,a=!1,l=!1,c=!1,u,d,h,f=[],g=NK(Pe,t.interactiveDebounce),p,v=jAe++,b=null,_=EAe(t.plugins),y={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},C={id:v,reference:n,popper:sC(),popperInstance:b,props:t,state:y,plugins:_,clearDelayTimeouts:nt,setProps:se,setContent:fe,show:Ne,hide:Ve,hideWithInteractivity:lt,enable:gt,disable:Ct,unmount:Dt,destroy:Qt};if(!t.render)return C;var w=t.render(C),x=w.popper,k=w.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+C.id,C.popper=x,n._tippy=C,x._tippy=C;var E=_.map(function(he){return he.fn(C)}),L=n.hasAttribute("aria-expanded");return Fe(),$(),T(),N("onCreate",[C]),t.showOnCreate&&xe(),x.addEventListener("mouseenter",function(){C.props.interactive&&C.state.isVisible&&C.clearDelayTimeouts()}),x.addEventListener("mouseleave",function(){C.props.interactive&&C.props.trigger.indexOf("mouseenter")>=0&&R().addEventListener("mousemove",g)}),C;function M(){var he=C.props.touch;return Array.isArray(he)?he:[he,0]}function D(){return M()[0]==="hold"}function O(){var he;return!!((he=C.props.render)!=null&&he.$$tippy)}function A(){return p||n}function R(){var he=A().parentNode;return he?MAe(he):document}function V(){return aP(x)}function F(he){return C.state.isMounted&&!C.state.isVisible||Zc.isTouch||u&&u.type==="focus"?0:X4(C.props.delay,he?0:1,tc.delay)}function T(he){he===void 0&&(he=!1),x.style.pointerEvents=C.props.interactive&&!he?"":"none",x.style.zIndex=""+C.props.zIndex}function N(he,Ke,ue){if(ue===void 0&&(ue=!0),E.forEach(function(oe){oe[he]&&oe[he].apply(oe,Ke)}),ue){var ee;(ee=C.props)[he].apply(ee,Ke)}}function B(){var he=C.props.aria;if(he.content){var Ke="aria-"+he.content,ue=x.id,ee=av(C.props.triggerTarget||n);ee.forEach(function(oe){var pe=oe.getAttribute(Ke);if(C.state.isVisible)oe.setAttribute(Ke,pe?pe+" "+ue:ue);else{var le=pe&&pe.replace(ue,"").trim();le?oe.setAttribute(Ke,le):oe.removeAttribute(Ke)}})}}function $(){if(!(L||!C.props.aria.expanded)){var he=av(C.props.triggerTarget||n);he.forEach(function(Ke){C.props.interactive?Ke.setAttribute("aria-expanded",C.state.isVisible&&Ke===A()?"true":"false"):Ke.removeAttribute("aria-expanded")})}}function j(){R().removeEventListener("mousemove",g),_x=_x.filter(function(he){return he!==g})}function Y(he){if(!(Zc.isTouch&&(l||he.type==="mousedown"))){var Ke=he.composedPath&&he.composedPath()[0]||he.target;if(!(C.props.interactive&&MK(x,Ke))){if(av(C.props.triggerTarget||n).some(function(ue){return MK(ue,Ke)})){if(Zc.isTouch||C.state.isVisible&&C.props.trigger.indexOf("click")>=0)return}else N("onClickOutside",[C,he]);C.props.hideOnClick===!0&&(C.clearDelayTimeouts(),C.hide(),a=!0,setTimeout(function(){a=!1}),C.state.isMounted||re())}}}function G(){l=!0}function X(){l=!1}function q(){var he=R();he.addEventListener("mousedown",Y,!0),he.addEventListener("touchend",Y,ag),he.addEventListener("touchstart",X,ag),he.addEventListener("touchmove",G,ag)}function re(){var he=R();he.removeEventListener("mousedown",Y,!0),he.removeEventListener("touchend",Y,ag),he.removeEventListener("touchstart",X,ag),he.removeEventListener("touchmove",G,ag)}function ge(he,Ke){we(he,function(){!C.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&Ke()})}function ye(he,Ke){we(he,Ke)}function we(he,Ke){var ue=V().box;function ee(oe){oe.target===ue&&(J4(ue,"remove",ee),Ke())}if(he===0)return Ke();J4(ue,"remove",d),J4(ue,"add",ee),d=ee}function Ie(he,Ke,ue){ue===void 0&&(ue=!1);var ee=av(C.props.triggerTarget||n);ee.forEach(function(oe){oe.addEventListener(he,Ke,ue),f.push({node:oe,eventType:he,handler:Ke,options:ue})})}function Fe(){D()&&(Ie("touchstart",Me,{passive:!0}),Ie("touchend",tt,{passive:!0})),kAe(C.props.trigger).forEach(function(he){if(he!=="manual")switch(Ie(he,Me),he){case"mouseenter":Ie("mouseleave",tt);break;case"focus":Ie(BAe?"focusout":"blur",Ae);break;case"focusin":Ie("focusout",Ae);break}})}function ze(){f.forEach(function(he){var Ke=he.node,ue=he.eventType,ee=he.handler,oe=he.options;Ke.removeEventListener(ue,ee,oe)}),f=[]}function Me(he){var Ke,ue=!1;if(!(!C.state.isEnabled||mt(he)||a)){var ee=((Ke=u)==null?void 0:Ke.type)==="focus";u=he,p=he.currentTarget,$(),!C.state.isVisible&&TAe(he)&&_x.forEach(function(oe){return oe(he)}),he.type==="click"&&(C.props.trigger.indexOf("mouseenter")<0||o)&&C.props.hideOnClick!==!1&&C.state.isVisible?ue=!0:xe(he),he.type==="click"&&(o=!ue),ue&&!ee&&at(he)}}function Pe(he){var Ke=he.target,ue=A().contains(Ke)||x.contains(Ke);if(!(he.type==="mousemove"&&ue)){var ee=Oe().concat(x).map(function(oe){var pe,le=oe._tippy,ve=(pe=le.popperInstance)==null?void 0:pe.state;return ve?{popperRect:oe.getBoundingClientRect(),popperState:ve,props:t}:null}).filter(Boolean);RAe(ee,he)&&(j(),at(he))}}function tt(he){var Ke=mt(he)||C.props.trigger.indexOf("click")>=0&&o;if(!Ke){if(C.props.interactive){C.hideWithInteractivity(he);return}at(he)}}function Ae(he){C.props.trigger.indexOf("focusin")<0&&he.target!==A()||C.props.interactive&&he.relatedTarget&&x.contains(he.relatedTarget)||at(he)}function mt(he){return Zc.isTouch?D()!==he.type.indexOf("touch")>=0:!1}function ft(){Le();var he=C.props,Ke=he.popperOptions,ue=he.placement,ee=he.offset,oe=he.getReferenceClientRect,pe=he.moveTransition,le=O()?aP(x).arrow:null,ve=oe?{getBoundingClientRect:oe,contextElement:oe.contextElement||A()}:n,He={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(St){var Lt=St.state;if(O()){var be=V(),H=be.box;["placement","reference-hidden","escaped"].forEach(function(W){W==="placement"?H.setAttribute("data-placement",Lt.placement):Lt.attributes.popper["data-popper-"+W]?H.setAttribute("data-"+W,""):H.removeAttribute("data-"+W)}),Lt.attributes.popper={}}}},Qe=[{name:"offset",options:{offset:ee}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!pe}},He];O()&&le&&Qe.push({name:"arrow",options:{element:le,padding:3}}),Qe.push.apply(Qe,(Ke==null?void 0:Ke.modifiers)||[]),C.popperInstance=wAe(ve,x,Object.assign({},Ke,{placement:ue,onFirstUpdate:h,modifiers:Qe}))}function Le(){C.popperInstance&&(C.popperInstance.destroy(),C.popperInstance=null)}function Ge(){var he=C.props.appendTo,Ke,ue=A();C.props.interactive&&he===Aae||he==="parent"?Ke=ue.parentNode:Ke=Oae(he,[ue]),Ke.contains(x)||Ke.appendChild(x),C.state.isMounted=!0,ft()}function Oe(){return $2(x.querySelectorAll("[data-tippy-root]"))}function xe(he){C.clearDelayTimeouts(),he&&N("onTrigger",[C,he]),q();var Ke=F(!0),ue=M(),ee=ue[0],oe=ue[1];Zc.isTouch&&ee==="hold"&&oe&&(Ke=oe),Ke?i=setTimeout(function(){C.show()},Ke):C.show()}function at(he){if(C.clearDelayTimeouts(),N("onUntrigger",[C,he]),!C.state.isVisible){re();return}if(!(C.props.trigger.indexOf("mouseenter")>=0&&C.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(he.type)>=0&&o)){var Ke=F(!1);Ke?r=setTimeout(function(){C.state.isVisible&&C.hide()},Ke):s=requestAnimationFrame(function(){C.hide()})}}function gt(){C.state.isEnabled=!0}function Ct(){C.hide(),C.state.isEnabled=!1}function nt(){clearTimeout(i),clearTimeout(r),cancelAnimationFrame(s)}function se(he){if(!C.state.isDestroyed){N("onBeforeUpdate",[C,he]),ze();var Ke=C.props,ue=AK(n,Object.assign({},Ke,IK(he),{ignoreAttributes:!0}));C.props=ue,Fe(),Ke.interactiveDebounce!==ue.interactiveDebounce&&(j(),g=NK(Pe,ue.interactiveDebounce)),Ke.triggerTarget&&!ue.triggerTarget?av(Ke.triggerTarget).forEach(function(ee){ee.removeAttribute("aria-expanded")}):ue.triggerTarget&&n.removeAttribute("aria-expanded"),$(),T(),k&&k(Ke,ue),C.popperInstance&&(ft(),Oe().forEach(function(ee){requestAnimationFrame(ee._tippy.popperInstance.forceUpdate)})),N("onAfterUpdate",[C,he])}}function fe(he){C.setProps({content:he})}function Ne(){var he=C.state.isVisible,Ke=C.state.isDestroyed,ue=!C.state.isEnabled,ee=Zc.isTouch&&!C.props.touch,oe=X4(C.props.duration,0,tc.duration);if(!(he||Ke||ue||ee)&&!A().hasAttribute("disabled")&&(N("onShow",[C],!1),C.props.onShow(C)!==!1)){if(C.state.isVisible=!0,O()&&(x.style.visibility="visible"),T(),q(),C.state.isMounted||(x.style.transition="none"),O()){var pe=V(),le=pe.box,ve=pe.content;Q4([le,ve],0)}h=function(){var Qe;if(!(!C.state.isVisible||c)){if(c=!0,x.offsetHeight,x.style.transition=C.props.moveTransition,O()&&C.props.animation){var ut=V(),St=ut.box,Lt=ut.content;Q4([St,Lt],oe),DK([St,Lt],"visible")}B(),$(),TK(eR,C),(Qe=C.popperInstance)==null||Qe.forceUpdate(),N("onMount",[C]),C.props.animation&&O()&&ye(oe,function(){C.state.isShown=!0,N("onShown",[C])})}},Ge()}}function Ve(){var he=!C.state.isVisible,Ke=C.state.isDestroyed,ue=!C.state.isEnabled,ee=X4(C.props.duration,1,tc.duration);if(!(he||Ke||ue)&&(N("onHide",[C],!1),C.props.onHide(C)!==!1)){if(C.state.isVisible=!1,C.state.isShown=!1,c=!1,o=!1,O()&&(x.style.visibility="hidden"),j(),re(),T(!0),O()){var oe=V(),pe=oe.box,le=oe.content;C.props.animation&&(Q4([pe,le],ee),DK([pe,le],"hidden"))}B(),$(),C.props.animation?O()&&ge(ee,C.unmount):C.unmount()}}function lt(he){R().addEventListener("mousemove",g),TK(_x,g),g(he)}function Dt(){C.state.isVisible&&C.hide(),C.state.isMounted&&(Le(),Oe().forEach(function(he){he._tippy.unmount()}),x.parentNode&&x.parentNode.removeChild(x),eR=eR.filter(function(he){return he!==C}),C.state.isMounted=!1,N("onHidden",[C]))}function Qt(){C.state.isDestroyed||(C.clearDelayTimeouts(),C.unmount(),ze(),delete n._tippy,C.state.isDestroyed=!0,N("onDestroy",[C]))}}function Uf(n,e){e===void 0&&(e={});var t=tc.plugins.concat(e.plugins||[]);PAe();var i=Object.assign({},e,{plugins:t}),r=DAe(n),s=r.reduce(function(o,a){var l=a&&KAe(a,i);return l&&o.push(l),o},[]);return mD(n)?s[0]:s}Uf.defaultProps=tc;Uf.setDefaultProps=WAe;Uf.currentInput=Zc;Object.assign({},Sae,{effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow)}});Uf.setDefaultProps({render:Bae});class qAe{constructor({editor:e,element:t,view:i,tippyOptions:r={},updateDelay:s=250,shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:c,to:u})=>{const{doc:d,selection:h}=l,{empty:f}=h,g=!d.textBetween(c,u).length&&hB(l.selection),p=this.element.contains(document.activeElement);return!(!(a.hasFocus()||p)||f||g||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{const c=!(l!=null&&l.selection.eq(a.state.selection)),u=!(l!=null&&l.doc.eq(a.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,c,u,l)},this.updateDelay))},this.updateHandler=(a,l,c,u)=>{var d,h,f;const{state:g,composing:p}=a,{selection:v}=g;if(p||!l&&!c)return;this.createTooltip();const{ranges:_}=v,y=Math.min(..._.map(x=>x.$from.pos)),C=Math.max(..._.map(x=>x.$to.pos));if(!((d=this.shouldShow)===null||d===void 0?void 0:d.call(this,{editor:this.editor,view:a,state:g,oldState:u,from:y,to:C}))){this.hide();return}(h=this.tippy)===null||h===void 0||h.setProps({getReferenceClientRect:((f=this.tippyOptions)===null||f===void 0?void 0:f.getReferenceClientRect)||(()=>{if(Cae(g.selection)){let x=a.nodeDOM(y);const k=x.dataset.nodeViewWrapper?x:x.querySelector("[data-node-view-wrapper]");if(k&&(x=k.firstChild),x)return x.getBoundingClientRect()}return H4e(a,y,C)})}),this.show()},this.editor=e,this.element=t,this.view=i,this.updateDelay=s,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=Uf(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:i}=e,r=i.selection.from!==i.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(e,t);return}const s=!(t!=null&&t.selection.eq(e.state.selection)),o=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,s,o,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Hae=n=>new Ni({key:typeof n.pluginKey=="string"?new zi(n.pluginKey):n.pluginKey,view:e=>new qAe({view:e,...n})});pi.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Hae({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function GAe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vae={exports:{}},tR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FK;function YAe(){if(FK)return tR;FK=1;var n=Ue;function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function a(d,h){var f=h(),g=i({inst:{value:f,getSnapshot:h}}),p=g[0].inst,v=g[1];return s(function(){p.value=f,p.getSnapshot=h,l(p)&&v({inst:p})},[d,f,h]),r(function(){return l(p)&&v({inst:p}),d(function(){l(p)&&v({inst:p})})},[d]),o(f),f}function l(d){var h=d.getSnapshot;d=d.value;try{var f=h();return!t(d,f)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return tR.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:u,tR}Vae.exports=YAe();var xB=Vae.exports;const ZAe=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},XAe=({contentComponent:n})=>{const e=xB.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Ue.createElement(Ue.Fragment,null,Object.values(e))};function QAe(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,i){e={...e,[t]:Pd.createPortal(i.reactElement,i.element,t)},n.forEach(r=>r())},removeRenderer(t){const i={...e};delete i[t],e=i,n.forEach(r=>r())}}}class JAe extends Ue.Component{constructor(e){var t;super(e),this.editorContentRef=Ue.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=QAe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(i=>i.hasContentComponentInitialized?i:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...i}=this.props;return Ue.createElement(Ue.Fragment,null,Ue.createElement("div",{ref:ZAe(t,this.editorContentRef),...i}),(e==null?void 0:e.contentComponent)&&Ue.createElement(XAe,{contentComponent:e.contentComponent}))}}const eOe=m.forwardRef((n,e)=>{const t=Ue.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Ue.createElement(JAe,{key:t,innerRef:e,...n})}),zae=Ue.memo(eOe);var tOe=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,r,s;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(r=i;r--!==0;)if(!n(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!n(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(i=e.length,i!=t.length)return!1;for(r=i;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=i;r--!==0;){var o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t},nOe=GAe(tOe),Wae={exports:{}},nR={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BK;function iOe(){if(BK)return nR;BK=1;var n=Ue,e=xB;function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,a=n.useMemo,l=n.useDebugValue;return nR.useSyncExternalStoreWithSelector=function(c,u,d,h,f){var g=s(null);if(g.current===null){var p={hasValue:!1,value:null};g.current=p}else p=g.current;g=a(function(){function b(x){if(!_){if(_=!0,y=x,x=h(x),f!==void 0&&p.hasValue){var k=p.value;if(f(k,x))return C=k}return C=x}if(k=C,i(y,x))return k;var E=h(x);return f!==void 0&&f(k,E)?k:(y=x,C=E)}var _=!1,y,C,w=d===void 0?null:d;return[function(){return b(u())},w===null?void 0:function(){return b(w())}]},[u,d,h,f]);var v=r(c,g[0],g[1]);return o(function(){p.hasValue=!0,p.value=v},[v]),l(v),v},nR}Wae.exports=iOe();var rOe=Wae.exports;class sOe{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},i=this.editor;return i.on("transaction",t),()=>{i.off("transaction",t)}}}}function oOe(n){var e;const[t]=m.useState(()=>new sOe(n.editor)),i=rOe.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:nOe);return m.useEffect(()=>t.watch(n.editor),[n.editor,t]),m.useDebugValue(i),i}const aOe=!1,lP=typeof window>"u",lOe=lP||!!(typeof window<"u"&&window.next);class cOe{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return lP||lOe?null:this.createEditor();if(this.options.current.immediatelyRender&&lP&&aOe)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...i)=>{var r,s;return(s=(r=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(r,...i)},onBlur:(...i)=>{var r,s;return(s=(r=this.options.current).onBlur)===null||s===void 0?void 0:s.call(r,...i)},onCreate:(...i)=>{var r,s;return(s=(r=this.options.current).onCreate)===null||s===void 0?void 0:s.call(r,...i)},onDestroy:(...i)=>{var r,s;return(s=(r=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(r,...i)},onFocus:(...i)=>{var r,s;return(s=(r=this.options.current).onFocus)===null||s===void 0?void 0:s.call(r,...i)},onSelectionUpdate:(...i)=>{var r,s;return(s=(r=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(r,...i)},onTransaction:(...i)=>{var r,s;return(s=(r=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(r,...i)},onUpdate:(...i)=>{var r,s;return(s=(r=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(r,...i)},onContentError:(...i)=>{var r,s;return(s=(r=this.options.current).onContentError)===null||s===void 0?void 0:s.call(r,...i)},onDrop:(...i)=>{var r,s;return(s=(r=this.options.current).onDrop)===null||s===void 0?void 0:s.call(r,...i)},onPaste:(...i)=>{var r,s;return(s=(r=this.options.current).onPaste)===null||s===void 0?void 0:s.call(r,...i)}};return new pRe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions(this.options.current):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((i,r)=>i===e[r]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function $ae(n={},e=[]){const t=m.useRef(n);t.current=n;const[i]=m.useState(()=>new cOe(t)),r=xB.useSyncExternalStore(i.subscribe,i.getEditor,i.getServerSnapshot);return m.useDebugValue(r),m.useEffect(i.onRender(e)),oOe({editor:r,selector:({transactionNumber:s})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&s===0?0:s+1}),r}const Uae=m.createContext({editor:null});Uae.Consumer;const uOe=()=>m.useContext(Uae),vD=n=>{const[e,t]=m.useState(null),{editor:i}=uOe();return m.useEffect(()=>{var r;if(!e||!((r=n.editor)===null||r===void 0)&&r.isDestroyed||i!=null&&i.isDestroyed)return;const{pluginKey:s="bubbleMenu",editor:o,tippyOptions:a={},updateDelay:l,shouldShow:c=null}=n,u=o||i;if(!u){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const d=Hae({updateDelay:l,editor:u,element:e,pluginKey:s,shouldShow:c,tippyOptions:a});return u.registerPlugin(d),()=>{u.unregisterPlugin(s)}},[n.editor,i,e]),Ue.createElement("div",{ref:t,className:n.className,style:{visibility:"hidden"}},n.children)},jae=m.createContext({onDragStart:void 0}),Kae=()=>m.useContext(jae),qae=n=>{const e=n.as||"div",{nodeViewContentRef:t}=Kae();return Ue.createElement(e,{...n,ref:t,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...n.style}})},ob=Ue.forwardRef((n,e)=>{const{onDragStart:t}=Kae(),i=n.as||"div";return Ue.createElement(i,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});function dOe(n){return!!(typeof n=="function"&&n.prototype&&n.prototype.isReactComponent)}function hOe(n){var e;return typeof n=="object"&&((e=n.$$typeof)===null||e===void 0?void 0:e.toString())==="Symbol(react.forward_ref)"}class fOe{constructor(e,{editor:t,props:i={},as:r="div",className:s=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=i,this.element=document.createElement(r),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?uc.flushSync(()=>{this.render()}):this.render()}render(){var e;const t=this.component,i=this.props,r=this.editor;(dOe(t)||hOe(t))&&(i.ref=s=>{this.ref=s}),this.reactElement=Ue.createElement(t,i),(e=r==null?void 0:r.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}}class gOe extends vRe{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(c={})=>this.updateAttributes(c),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const c=u=>u.charAt(0).toUpperCase()+u.substring(1);this.component.displayName=c(this.extension.name)}const r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:c=>{c&&this.contentDOMElement&&c.firstChild!==this.contentDOMElement&&c.appendChild(this.contentDOMElement)}},s=this.component,o=Ue.memo(c=>Ue.createElement(jae.Provider,{value:r},Ue.createElement(s,c)));o.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);const{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new fOe(o,{editor:this.editor,props:e,as:a,className:`node-${this.node.type.name} ${l}`.trim()}),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:t}=this.editor.state.selection,i=this.getPos();if(typeof i=="number")if(e<=i&&t>=i+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,i){const r=s=>{this.renderer.updateProps(s),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const s=this.node,o=this.decorations,a=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=i,this.options.update({oldNode:s,oldDecorations:o,newNode:e,newDecorations:t,oldInnerDecorations:a,innerDecorations:i,updateProps:()=>r({node:e,decorations:t,innerDecorations:i})})}return e===this.node&&this.decorations===t&&this.innerDecorations===i||(this.node=e,this.decorations=t,this.innerDecorations=i,r({node:e,decorations:t,innerDecorations:i})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,i=H2(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:i})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function ab(n,e){return t=>t.editor.contentComponent?new gOe(n,t,e):{}}const pOe=ha.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Fy=ha.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=fB(n,this.type);return Object.entries(t).some(([,r])=>!!r)?!0:e.unsetMark(this.name)}}}}),mOe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,vOe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,bOe=ha.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[jp({find:mOe,type:this.type})]},addPasteRules(){return[xf({find:vOe,type:this.type})]}}),_Oe=pi.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign||this.options.defaultAlignment;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${n.textAlign}`}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),COe=pi.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;return(e=n.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),yOe=pi.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ni({key:new zi("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=e,r=[];if(!t)return null;const s=this.editor.isEmpty;return n.descendants((o,a)=>{const l=i>=a&&i<=a+o.nodeSize,c=!o.isLeaf&&gD(o);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const d=hs.node(a,a+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});r.push(d)}return this.options.includeChildren}),fi.create(n,r)}}})]}}),wOe=/^\s*(\[([( |x])?\])\s$/,SOe=Gi.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList"}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",Gn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:i})=>{const r=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div");return s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",c=>c.preventDefault()),a.addEventListener("change",c=>{if(!i.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:u}=c.target;i.isEditable&&typeof t=="function"&&i.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:d})=>{const h=t();if(typeof h!="number")return!1;const f=d.doc.nodeAt(h);return d.setNodeMarkup(h,void 0,{...f==null?void 0:f.attrs,checked:u}),!0}).run(),!i.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,u)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,u])=>{r.setAttribute(c,u)}),r.dataset.checked=n.attrs.checked,n.attrs.checked&&a.setAttribute("checked","checked"),s.append(a,o),r.append(s,l),Object.entries(e).forEach(([c,u])=>{r.setAttribute(c,u)}),{dom:r,contentDOM:l,update:c=>c.type!==this.type?!1:(r.dataset.checked=c.attrs.checked,c.attrs.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),!0)}}},addInputRules(){return[m1({find:wOe,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),xOe=Gi.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",Gn(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),kOe=ha.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(n){return n!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:n}){return["sub",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{setSubscript:()=>({commands:n})=>n.setMark(this.name),toggleSubscript:()=>({commands:n})=>n.toggleMark(this.name),unsetSubscript:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),EOe=ha.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(n){return n!=="super"?!1:null}}]},renderHTML({HTMLAttributes:n}){return["sup",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{setSuperscript:()=>({commands:n})=>n.setMark(this.name),toggleSuperscript:()=>({commands:n})=>n.toggleMark(this.name),unsetSuperscript:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),LOe=pi.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ni({key:new zi("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:i}=this.editor,{anchor:r}=e,s=[];if(!t||!i)return fi.create(n,[]);let o=0;this.options.mode==="deepest"&&n.descendants((l,c)=>{if(l.isText)return;if(!(r>=c&&r<=c+l.nodeSize-1))return!1;o+=1});let a=0;return n.descendants((l,c)=>{if(l.isText||!(r>=c&&r<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(hs.node(c,c+l.nodeSize,{class:this.options.className}))}),fi.create(n,s)}}})]}}),bD=(n,e)=>{const{$from:t}=e.selection,i=Vr(n,e.schema);let r=null,s=t.depth,o=t.pos,a=null;for(;s>0&&a===null;)r=t.node(s),r.type===i?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},Gae=(n,e)=>{const t=bD(n,e);if(!t)return!1;const[,i]=O4e(e,n,t.$pos.pos+4);return i},NOe=(n,e,t)=>{const{$anchor:i}=n.selection,r=Math.max(0,i.pos-2),s=n.doc.resolve(r).node();return!(!s||!t.includes(s.type.name))},TOe=(n,e)=>{var t;const{$anchor:i}=e.selection,r=e.doc.resolve(i.pos-2);return!(r.index()===0||((t=r.nodeBefore)===null||t===void 0?void 0:t.type.name)!==n)},IOe=(n,e,t)=>{if(!t)return!1;const i=Vr(n,e.schema);let r=!1;return t.descendants(s=>{s.type===i&&(r=!0)}),r},HK=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(!Sf(n.state,e)&&NOe(n.state,e,t)){const{$anchor:a}=n.state.selection,l=n.state.doc.resolve(a.before()-1),c=[];l.node().descendants((h,f)=>{h.type.name===e&&c.push({node:h,pos:f})});const u=c.at(-1);if(!u)return!1;const d=n.state.doc.resolve(l.start()+u.pos+1);return n.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!Sf(n.state,e)||!B4e(n.state))return!1;const i=bD(e,n.state);if(!i)return!1;const s=n.state.doc.resolve(i.$pos.pos-2).node(i.depth),o=IOe(e,n.state,s);return TOe(e,n.state)&&!o?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},DOe=(n,e)=>{const t=Gae(n,e),i=bD(n,e);return!i||!t?!1:t>i.depth},MOe=(n,e)=>{const t=Gae(n,e),i=bD(n,e);return!i||!t?!1:t<i.depth},VK=(n,e)=>!Sf(n.state,e)||!F4e(n.state,e)?!1:DOe(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():MOe(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward(),ROe=pi.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&VK(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&VK(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:i})=>{n.state.schema.nodes[t]!==void 0&&HK(n,t,i)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:i})=>{n.state.schema.nodes[t]!==void 0&&HK(n,t,i)&&(e=!0)}),e}}}});var cP,uP;if(typeof WeakMap<"u"){let n=new WeakMap;cP=e=>n.get(e),uP=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;cP=i=>{for(let r=0;r<n.length;r+=2)if(n[r]==i)return n[r+1]},uP=(i,r)=>(t==10&&(t=0),n[t++]=i,n[t++]=r)}var fr=class{constructor(n,e,t,i){this.width=n,this.height=e,this.map=t,this.problems=i}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const i=e%this.width,r=e/this.width|0;let s=i+1,o=r+1;for(let a=1;s<this.width&&this.map[e+a]==t;a++)s++;for(let a=1;o<this.height&&this.map[e+this.width*a]==t;a++)o++;return{left:i,top:r,right:s,bottom:o}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:i,right:r,top:s,bottom:o}=this.findCell(n);return e=="horiz"?(t<0?i==0:r==this.width)?null:this.map[s*this.width+(t<0?i-1:r)]:(t<0?s==0:o==this.height)?null:this.map[i+this.width*(t<0?s-1:o)]}rectBetween(n,e){const{left:t,right:i,top:r,bottom:s}=this.findCell(n),{left:o,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(t,o),top:Math.min(r,l),right:Math.max(i,a),bottom:Math.max(s,c)}}cellsInRect(n){const e=[],t={};for(let i=n.top;i<n.bottom;i++)for(let r=n.left;r<n.right;r++){const s=i*this.width+r,o=this.map[s];t[o]||(t[o]=!0,!(r==n.left&&r&&this.map[s-1]==o||i==n.top&&i&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(n,e,t){for(let i=0,r=0;;i++){const s=r+t.child(i).nodeSize;if(i==n){let o=e+n*this.width;const a=(n+1)*this.width;for(;o<a&&this.map[o]<r;)o++;return o==a?s-1:this.map[o]}r=s}}static get(n){return cP(n)||uP(n,AOe(n))}};function AOe(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=OOe(n),t=n.childCount,i=[];let r=0,s=null;const o=[];for(let c=0,u=e*t;c<u;c++)i[c]=0;for(let c=0,u=0;c<t;c++){const d=n.child(c);u++;for(let g=0;;g++){for(;r<i.length&&i[r]!=0;)r++;if(g==d.childCount)break;const p=d.child(g),{colspan:v,rowspan:b,colwidth:_}=p.attrs;for(let y=0;y<b;y++){if(y+c>=t){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:b-y});break}const C=r+y*e;for(let w=0;w<v;w++){i[C+w]==0?i[C+w]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:v-w});const x=_&&_[w];if(x){const k=(C+w)%e*2,E=o[k];E==null||E!=x&&o[k+1]==1?(o[k]=x,o[k+1]=1):E==x&&o[k+1]++}}}r+=v,u+=p.nodeSize}const h=(c+1)*e;let f=0;for(;r<h;)i[r++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:c,n:f}),u++}const a=new fr(e,t,i,s);let l=!1;for(let c=0;!l&&c<o.length;c+=2)o[c]!=null&&o[c+1]<t&&(l=!0);return l&&POe(a,o,n),a}function OOe(n){let e=-1,t=!1;for(let i=0;i<n.childCount;i++){const r=n.child(i);let s=0;if(t)for(let o=0;o<i;o++){const a=n.child(o);for(let l=0;l<a.childCount;l++){const c=a.child(l);o+c.attrs.rowspan>i&&(s+=c.attrs.colspan)}}for(let o=0;o<r.childCount;o++){const a=r.child(o);s+=a.attrs.colspan,a.attrs.rowspan>1&&(t=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function POe(n,e,t){n.problems||(n.problems=[]);const i={};for(let r=0;r<n.map.length;r++){const s=n.map[r];if(i[s])continue;i[s]=!0;const o=t.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let c=0;c<l.colspan;c++){const u=(r+c)%n.width,d=e[u*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=FOe(l)))[c]=d)}a&&n.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function FOe(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function lo(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const i=n.nodes[t],r=i.spec.tableRole;r&&(e[r]=i)}}return e}var Lh=new zi("selectingCells");function lb(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function BOe(n){for(let e=n.depth;e>0;e--){const t=n.node(e).type.spec.tableRole;if(t==="cell"||t==="header_cell")return n.node(e)}return null}function Sc(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function _D(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=lb(e.$head)||HOe(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function HOe(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const i=e.type.spec.tableRole;if(i=="cell"||i=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const i=e.type.spec.tableRole;if(i=="cell"||i=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function dP(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function VOe(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function kB(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function Yae(n,e,t){const i=n.node(-1),r=fr.get(i),s=n.start(-1),o=r.nextCell(n.pos-s,e,t);return o==null?null:n.node(0).resolve(s+o)}function qp(n,e,t=1){const i={...n,colspan:n.colspan-t};return i.colwidth&&(i.colwidth=i.colwidth.slice(),i.colwidth.splice(e,t),i.colwidth.some(r=>r>0)||(i.colwidth=null)),i}function Zae(n,e,t=1){const i={...n,colspan:n.colspan+t};if(i.colwidth){i.colwidth=i.colwidth.slice();for(let r=0;r<t;r++)i.colwidth.splice(e,0,0)}return i}function zOe(n,e,t){const i=lo(e.type.schema).header_cell;for(let r=0;r<n.height;r++)if(e.nodeAt(n.map[t+r*n.width]).type!=i)return!1;return!0}var Li=class Hu extends tn{constructor(e,t=e){const i=e.node(-1),r=fr.get(i),s=e.start(-1),o=r.rectBetween(e.pos-s,t.pos-s),a=e.node(0),l=r.cellsInRect(o).filter(u=>u!=t.pos-s);l.unshift(t.pos-s);const c=l.map(u=>{const d=i.nodeAt(u);if(!d)throw RangeError(`No cell with offset ${u} found`);const h=s+u+1;return new woe(a.resolve(h),a.resolve(h+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=t}map(e,t){const i=e.resolve(t.map(this.$anchorCell.pos)),r=e.resolve(t.map(this.$headCell.pos));if(dP(i)&&dP(r)&&kB(i,r)){const s=this.$anchorCell.node(-1)!=i.node(-1);return s&&this.isRowSelection()?Hu.rowSelection(i,r):s&&this.isColSelection()?Hu.colSelection(i,r):new Hu(i,r)}return Gt.between(i,r)}content(){const e=this.$anchorCell.node(-1),t=fr.get(e),i=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i),s={},o=[];for(let l=r.top;l<r.bottom;l++){const c=[];for(let u=l*t.width+r.left,d=r.left;d<r.right;d++,u++){const h=t.map[u];if(s[h])continue;s[h]=!0;const f=t.findCell(h);let g=e.nodeAt(h);if(!g)throw RangeError(`No cell with offset ${h} found`);const p=r.left-f.left,v=f.right-r.right;if(p>0||v>0){let b=g.attrs;if(p>0&&(b=qp(b,0,p)),v>0&&(b=qp(b,b.colspan-v,v)),f.left<r.left){if(g=g.type.createAndFill(b),!g)throw RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else g=g.type.create(b,g.content)}if(f.top<r.top||f.bottom>r.bottom){const b={...g.attrs,rowspan:Math.min(f.bottom,r.bottom)-Math.max(f.top,r.top)};f.top<r.top?g=g.type.createAndFill(b):g=g.type.create(b,g.content)}c.push(g)}o.push(e.child(l).copy(Ye.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:o;return new _t(Ye.from(a),1,1)}replace(e,t=_t.empty){const i=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){const{$from:a,$to:l}=r[o],c=e.mapping.slice(i);e.replace(c.map(a.pos),c.map(l.pos),o?_t.empty:t)}const s=tn.findFrom(e.doc.resolve(e.mapping.slice(i).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,t){this.replace(e,new _t(Ye.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),i=fr.get(t),r=this.$anchorCell.start(-1),s=i.cellsInRect(i.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let o=0;o<s.length;o++)e(t.nodeAt(s[o]),r+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const i=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(i,r)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const i=e.node(-1),r=fr.get(i),s=e.start(-1),o=r.findCell(e.pos-s),a=r.findCell(t.pos-s),l=e.node(0);return o.top<=a.top?(o.top>0&&(e=l.resolve(s+r.map[o.left])),a.bottom<r.height&&(t=l.resolve(s+r.map[r.width*(r.height-1)+a.right-1]))):(a.top>0&&(t=l.resolve(s+r.map[a.left])),o.bottom<r.height&&(e=l.resolve(s+r.map[r.width*(r.height-1)+o.right-1]))),new Hu(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=fr.get(e),i=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-i),s=t.colCount(this.$headCell.pos-i);if(Math.min(r,s)>0)return!1;const o=r+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==t.width}eq(e){return e instanceof Hu&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const i=e.node(-1),r=fr.get(i),s=e.start(-1),o=r.findCell(e.pos-s),a=r.findCell(t.pos-s),l=e.node(0);return o.left<=a.left?(o.left>0&&(e=l.resolve(s+r.map[o.top*r.width])),a.right<r.width&&(t=l.resolve(s+r.map[r.width*(a.top+1)-1]))):(a.left>0&&(t=l.resolve(s+r.map[a.top*r.width])),o.right<r.width&&(e=l.resolve(s+r.map[r.width*(o.top+1)-1]))),new Hu(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Hu(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){return new Hu(e.resolve(t),e.resolve(i))}getBookmark(){return new WOe(this.$anchorCell.pos,this.$headCell.pos)}};Li.prototype.visible=!1;tn.jsonID("cell",Li);var WOe=class Xae{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Xae(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),i=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&i.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&i.index()<i.parent.childCount&&kB(t,i)?new Li(t,i):tn.near(i,1)}};function $Oe(n){if(!(n.selection instanceof Li))return null;const e=[];return n.selection.forEachCell((t,i)=>{e.push(hs.node(i,i+t.nodeSize,{class:"selectedCell"}))}),fi.create(n.doc,e)}function UOe({$from:n,$to:e}){if(n.pos==e.pos||n.pos<n.pos-6)return!1;let t=n.pos,i=e.pos,r=n.depth;for(;r>=0&&!(n.after(r+1)<n.end(r));r--,t++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,i--);return t==i&&/row|table/.test(n.node(r).type.spec.tableRole)}function jOe({$from:n,$to:e}){let t,i;for(let r=n.depth;r>0;r--){const s=n.node(r);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){t=s;break}}for(let r=e.depth;r>0;r--){const s=e.node(r);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){i=s;break}}return t!==i&&e.parentOffset===0}function KOe(n,e,t){const i=(e||n).selection,r=(e||n).doc;let s,o;if(i instanceof $t&&(o=i.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=Li.create(r,i.from);else if(o=="row"){const a=r.resolve(i.from+1);s=Li.rowSelection(a,a)}else if(!t){const a=fr.get(i.node),l=i.from+1,c=l+a.map[a.width*a.height-1];s=Li.create(r,l+1,c)}}else i instanceof Gt&&UOe(i)?s=Gt.create(r,i.from):i instanceof Gt&&jOe(i)&&(s=Gt.create(r,i.$from.start(),i.$from.end()));return s&&(e||(e=n.tr)).setSelection(s),e}var qOe=new zi("fix-tables");function Qae(n,e,t,i){const r=n.childCount,s=e.childCount;e:for(let o=0,a=0;o<s;o++){const l=e.child(o);for(let c=a,u=Math.min(r,o+3);c<u;c++)if(n.child(c)==l){a=c+1,t+=l.nodeSize;continue e}i(l,t),a<r&&n.child(a).sameMarkup(l)?Qae(n.child(a),l,t+1,i):l.nodesBetween(0,l.content.size,i,t+1),t+=l.nodeSize}}function Jae(n,e){let t;const i=(r,s)=>{r.type.spec.tableRole=="table"&&(t=GOe(n,r,s,t))};return e?e.doc!=n.doc&&Qae(e.doc,n.doc,0,i):n.doc.descendants(i),t}function GOe(n,e,t,i){const r=fr.get(e);if(!r.problems)return i;i||(i=n.tr);const s=[];for(let l=0;l<r.height;l++)s.push(0);for(let l=0;l<r.problems.length;l++){const c=r.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let h=0;h<d.rowspan;h++)s[c.row+h]+=c.n;i.setNodeMarkup(i.mapping.map(t+1+c.pos),null,qp(d,d.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;i.setNodeMarkup(i.mapping.map(t+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;i.setNodeMarkup(i.mapping.map(t+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}}let o,a;for(let l=0;l<s.length;l++)s[l]&&(o==null&&(o=l),a=l);for(let l=0,c=t+1;l<r.height;l++){const u=e.child(l),d=c+u.nodeSize,h=s[l];if(h>0){let f="cell";u.firstChild&&(f=u.firstChild.type.spec.tableRole);const g=[];for(let v=0;v<h;v++){const b=lo(n.schema)[f].createAndFill();b&&g.push(b)}const p=(l==0||o==l-1)&&a==l?c+1:d-1;i.insert(i.mapping.map(p),g)}c=d}return i.setMeta(qOe,{fixTables:!0})}function xc(n){const e=n.selection,t=_D(n),i=t.node(-1),r=t.start(-1),s=fr.get(i);return{...e instanceof Li?s.rectBetween(e.$anchorCell.pos-r,e.$headCell.pos-r):s.findCell(t.pos-r),tableStart:r,map:s,table:i}}function ele(n,{map:e,tableStart:t,table:i},r){let s=r>0?-1:0;zOe(e,i,r+s)&&(s=r==0||r==e.width?null:0);for(let o=0;o<e.height;o++){const a=o*e.width+r;if(r>0&&r<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=i.nodeAt(l);n.setNodeMarkup(n.mapping.map(t+l),null,Zae(c.attrs,r-e.colCount(l))),o+=c.attrs.rowspan-1}else{const l=s==null?lo(i.type.schema).cell:i.nodeAt(e.map[a+s]).type,c=e.positionAt(o,r,i);n.insert(n.mapping.map(t+c),l.createAndFill())}}return n}function YOe(n,e){if(!Sc(n))return!1;if(e){const t=xc(n);e(ele(n.tr,t,t.left))}return!0}function ZOe(n,e){if(!Sc(n))return!1;if(e){const t=xc(n);e(ele(n.tr,t,t.right))}return!0}function XOe(n,{map:e,table:t,tableStart:i},r){const s=n.mapping.maps.length;for(let o=0;o<e.height;){const a=o*e.width+r,l=e.map[a],c=t.nodeAt(l),u=c.attrs;if(r>0&&e.map[a-1]==l||r<e.width-1&&e.map[a+1]==l)n.setNodeMarkup(n.mapping.slice(s).map(i+l),null,qp(u,r-e.colCount(l)));else{const d=n.mapping.slice(s).map(i+l);n.delete(d,d+c.nodeSize)}o+=u.rowspan}}function QOe(n,e){if(!Sc(n))return!1;if(e){const t=xc(n),i=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let r=t.right-1;XOe(i,t,r),r!=t.left;r--){const s=t.tableStart?i.doc.nodeAt(t.tableStart-1):i.doc;if(!s)throw RangeError("No table found");t.table=s,t.map=fr.get(s)}e(i)}return!0}function JOe(n,e,t){var i;const r=lo(e.type.schema).header_cell;for(let s=0;s<n.width;s++)if(((i=e.nodeAt(n.map[s+t*n.width]))==null?void 0:i.type)!=r)return!1;return!0}function tle(n,{map:e,tableStart:t,table:i},r){var s;let o=t;for(let c=0;c<r;c++)o+=i.child(c).nodeSize;const a=[];let l=r>0?-1:0;JOe(e,i,r+l)&&(l=r==0||r==e.height?null:0);for(let c=0,u=e.width*r;c<e.width;c++,u++)if(r>0&&r<e.height&&e.map[u]==e.map[u-e.width]){const d=e.map[u],h=i.nodeAt(d).attrs;n.setNodeMarkup(t+d,null,{...h,rowspan:h.rowspan+1}),c+=h.colspan-1}else{const d=l==null?lo(i.type.schema).cell:(s=i.nodeAt(e.map[u+l*e.width]))==null?void 0:s.type,h=d==null?void 0:d.createAndFill();h&&a.push(h)}return n.insert(o,lo(i.type.schema).row.create(null,a)),n}function e3e(n,e){if(!Sc(n))return!1;if(e){const t=xc(n);e(tle(n.tr,t,t.top))}return!0}function t3e(n,e){if(!Sc(n))return!1;if(e){const t=xc(n);e(tle(n.tr,t,t.bottom))}return!0}function n3e(n,{map:e,table:t,tableStart:i},r){let s=0;for(let c=0;c<r;c++)s+=t.child(c).nodeSize;const o=s+t.child(r).nodeSize,a=n.mapping.maps.length;n.delete(s+i,o+i);const l=new Set;for(let c=0,u=r*e.width;c<e.width;c++,u++){const d=e.map[u];if(!l.has(d)){if(l.add(d),r>0&&d==e.map[u-e.width]){const h=t.nodeAt(d).attrs;n.setNodeMarkup(n.mapping.slice(a).map(d+i),null,{...h,rowspan:h.rowspan-1}),c+=h.colspan-1}else if(r<e.height&&d==e.map[u+e.width]){const h=t.nodeAt(d),f=h.attrs,g=h.type.create({...f,rowspan:h.attrs.rowspan-1},h.content),p=e.positionAt(r+1,c,t);n.insert(n.mapping.slice(a).map(i+p),g),c+=f.colspan-1}}}}function i3e(n,e){if(!Sc(n))return!1;if(e){const t=xc(n),i=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let r=t.bottom-1;n3e(i,t,r),r!=t.top;r--){const s=t.tableStart?i.doc.nodeAt(t.tableStart-1):i.doc;if(!s)throw RangeError("No table found");t.table=s,t.map=fr.get(t.table)}e(i)}return!0}function zK(n){const e=n.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function r3e({width:n,height:e,map:t},i){let r=i.top*n+i.left,s=r,o=(i.bottom-1)*n+i.left,a=r+(i.right-i.left-1);for(let l=i.top;l<i.bottom;l++){if(i.left>0&&t[s]==t[s-1]||i.right<n&&t[a]==t[a+1])return!0;s+=n,a+=n}for(let l=i.left;l<i.right;l++){if(i.top>0&&t[r]==t[r-n]||i.bottom<e&&t[o]==t[o+n])return!0;r++,o++}return!1}function WK(n,e){const t=n.selection;if(!(t instanceof Li)||t.$anchorCell.pos==t.$headCell.pos)return!1;const i=xc(n),{map:r}=i;if(r3e(r,i))return!1;if(e){const s=n.tr,o={};let a=Ye.empty,l,c;for(let u=i.top;u<i.bottom;u++)for(let d=i.left;d<i.right;d++){const h=r.map[u*r.width+d],f=i.table.nodeAt(h);if(!(o[h]||!f))if(o[h]=!0,l==null)l=h,c=f;else{zK(f)||(a=a.append(f.content));const g=s.mapping.map(h+i.tableStart);s.delete(g,g+f.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+i.tableStart,null,{...Zae(c.attrs,c.attrs.colspan,i.right-i.left-c.attrs.colspan),rowspan:i.bottom-i.top}),a.size){const u=l+1+c.content.size,d=zK(c)?l+1:u;s.replaceWith(d+i.tableStart,u+i.tableStart,a)}s.setSelection(new Li(s.doc.resolve(l+i.tableStart))),e(s)}return!0}function $K(n,e){const t=lo(n.schema);return s3e(({node:i})=>t[i.type.spec.tableRole])(n,e)}function s3e(n){return(e,t)=>{var i;const r=e.selection;let s,o;if(r instanceof Li){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;s=r.$anchorCell.nodeAfter,o=r.$anchorCell.pos}else{if(s=BOe(r.$from),!s)return!1;o=(i=lb(r.$from))==null?void 0:i.pos}if(s==null||o==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(t){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=xc(e),d=e.tr;for(let f=0;f<u.right-u.left;f++)l.push(c?{...a,colwidth:c&&c[f]?[c[f]]:null}:a);let h;for(let f=u.top;f<u.bottom;f++){let g=u.map.positionAt(f,u.left,u.table);f==u.top&&(g+=s.nodeSize);for(let p=u.left,v=0;p<u.right;p++,v++)p==u.left&&f==u.top||d.insert(h=d.mapping.map(g+u.tableStart,1),n({node:s,row:f,col:p}).createAndFill(l[v]))}d.setNodeMarkup(o,n({node:s,row:u.top,col:u.left}),l[0]),r instanceof Li&&d.setSelection(new Li(d.doc.resolve(r.$anchorCell.pos),h?d.doc.resolve(h):void 0)),t(d)}return!0}}function o3e(n,e){return function(t,i){if(!Sc(t))return!1;const r=_D(t);if(r.nodeAfter.attrs[n]===e)return!1;if(i){const s=t.tr;t.selection instanceof Li?t.selection.forEachCell((o,a)=>{o.attrs[n]!==e&&s.setNodeMarkup(a,null,{...o.attrs,[n]:e})}):s.setNodeMarkup(r.pos,null,{...r.nodeAfter.attrs,[n]:e}),i(s)}return!0}}function a3e(n){return function(e,t){if(!Sc(e))return!1;if(t){const i=lo(e.schema),r=xc(e),s=e.tr,o=r.map.cellsInRect(n=="column"?{left:r.left,top:0,right:r.right,bottom:r.map.height}:n=="row"?{left:0,top:r.top,right:r.map.width,bottom:r.bottom}:r),a=o.map(l=>r.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==i.header_cell&&s.setNodeMarkup(r.tableStart+o[l],i.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<o.length;l++)s.setNodeMarkup(r.tableStart+o[l],i.header_cell,a[l].attrs);t(s)}return!0}}function UK(n,e,t){const i=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let r=0;r<i.length;r++){const s=e.table.nodeAt(i[r]);if(s&&s.type!==t.header_cell)return!1}return!0}function By(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?a3e(n):function(t,i){if(!Sc(t))return!1;if(i){const r=lo(t.schema),s=xc(t),o=t.tr,a=UK("row",s,r),l=UK("column",s,r),u=(n==="column"?a:n==="row"?l:!1)?1:0,d=n=="column"?{left:0,top:u,right:1,bottom:s.map.height}:n=="row"?{left:u,top:0,right:s.map.width,bottom:1}:s,h=n=="column"?l?r.cell:r.header_cell:n=="row"?a?r.cell:r.header_cell:r.cell;s.map.cellsInRect(d).forEach(f=>{const g=f+s.tableStart,p=o.doc.nodeAt(g);p&&o.setNodeMarkup(g,h,p.attrs)}),i(o)}return!0}}By("row",{useDeprecatedLogic:!0});By("column",{useDeprecatedLogic:!0});var l3e=By("cell",{useDeprecatedLogic:!0});function c3e(n,e){if(e<0){const t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let i=n.index(-1)-1,r=n.before();i>=0;i--){const s=n.node(-1).child(i),o=s.lastChild;if(o)return r-1-o.nodeSize;r-=s.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const t=n.node(-1);for(let i=n.indexAfter(-1),r=n.after();i<t.childCount;i++){const s=t.child(i);if(s.childCount)return r+1;r+=s.nodeSize}}return null}function jK(n){return function(e,t){if(!Sc(e))return!1;const i=c3e(_D(e),n);if(i==null)return!1;if(t){const r=e.doc.resolve(i);t(e.tr.setSelection(Gt.between(r,VOe(r))).scrollIntoView())}return!0}}function u3e(n,e){const t=n.selection.$anchor;for(let i=t.depth;i>0;i--)if(t.node(i).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(i),t.after(i)).scrollIntoView()),!0;return!1}function Cx(n,e){const t=n.selection;if(!(t instanceof Li))return!1;if(e){const i=n.tr,r=lo(n.schema).cell.createAndFill().content;t.forEachCell((s,o)=>{s.content.eq(r)||i.replace(i.mapping.map(o+1),i.mapping.map(o+s.nodeSize-1),new _t(r,0,0))}),i.docChanged&&e(i)}return!0}function d3e(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:i}=n;for(;e.childCount==1&&(t>0&&i>0||e.child(0).type.spec.tableRole=="table");)t--,i--,e=e.child(0).content;const r=e.child(0),s=r.type.spec.tableRole,o=r.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,t-1),d=l<e.childCount-1?0:Math.max(0,i-1);(u||d)&&(c=hP(lo(o).row,new _t(c,u,d)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(t||i?hP(lo(o).row,new _t(e,t,i)).content:e);else return null;return h3e(o,a)}function h3e(n,e){const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(let o=s.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=s.child(o).attrs;for(let c=r;c<r+a;c++)t[c]=(t[c]||0)+l}}let i=0;for(let r=0;r<t.length;r++)i=Math.max(i,t[r]);for(let r=0;r<t.length;r++)if(r>=e.length&&e.push(Ye.empty),t[r]<i){const s=lo(n).cell.createAndFill(),o=[];for(let a=t[r];a<i;a++)o.push(s);e[r]=e[r].append(Ye.from(o))}return{height:e.length,width:i,rows:e}}function hP(n,e){const t=n.createAndFill();return new QF(t).replace(0,t.content.size,e).doc}function f3e({width:n,height:e,rows:t},i,r){if(n!=i){const s=[],o=[];for(let a=0;a<t.length;a++){const l=t[a],c=[];for(let u=s[a]||0,d=0;u<i;d++){let h=l.child(d%l.childCount);u+h.attrs.colspan>i&&(h=h.type.createChecked(qp(h.attrs,h.attrs.colspan,u+h.attrs.colspan-i),h.content)),c.push(h),u+=h.attrs.colspan;for(let f=1;f<h.attrs.rowspan;f++)s[a+f]=(s[a+f]||0)+h.attrs.colspan}o.push(Ye.from(c))}t=o,n=i}if(e!=r){const s=[];for(let o=0,a=0;o<r;o++,a++){const l=[],c=t[a%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);o+d.attrs.rowspan>r&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,r-d.attrs.rowspan)},d.content)),l.push(d)}s.push(Ye.from(l))}t=s,e=r}return{width:n,height:e,rows:t}}function g3e(n,e,t,i,r,s,o){const a=n.doc.type.schema,l=lo(a);let c,u;if(r>e.width)for(let d=0,h=0;d<e.height;d++){const f=t.child(d);h+=f.nodeSize;const g=[];let p;f.lastChild==null||f.lastChild.type==l.cell?p=c||(c=l.cell.createAndFill()):p=u||(u=l.header_cell.createAndFill());for(let v=e.width;v<r;v++)g.push(p);n.insert(n.mapping.slice(o).map(h-1+i),g)}if(s>e.height){const d=[];for(let g=0,p=(e.height-1)*e.width;g<Math.max(e.width,r);g++){const v=g>=e.width?!1:t.nodeAt(e.map[p+g]).type==l.header_cell;d.push(v?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,Ye.from(d)),f=[];for(let g=e.height;g<s;g++)f.push(h);n.insert(n.mapping.slice(o).map(i+t.nodeSize-2),f)}return!!(c||u)}function KK(n,e,t,i,r,s,o,a){if(o==0||o==e.height)return!1;let l=!1;for(let c=r;c<s;c++){const u=o*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){l=!0;const h=t.nodeAt(d),{top:f,left:g}=e.findCell(d);n.setNodeMarkup(n.mapping.slice(a).map(d+i),null,{...h.attrs,rowspan:o-f}),n.insert(n.mapping.slice(a).map(e.positionAt(o,g,t)),h.type.createAndFill({...h.attrs,rowspan:f+h.attrs.rowspan-o})),c+=h.attrs.colspan-1}}return l}function qK(n,e,t,i,r,s,o,a){if(o==0||o==e.width)return!1;let l=!1;for(let c=r;c<s;c++){const u=c*e.width+o,d=e.map[u];if(e.map[u-1]==d){l=!0;const h=t.nodeAt(d),f=e.colCount(d),g=n.mapping.slice(a).map(d+i);n.setNodeMarkup(g,null,qp(h.attrs,o-f,h.attrs.colspan-(o-f))),n.insert(g+h.nodeSize,h.type.createAndFill(qp(h.attrs,0,o-f))),c+=h.attrs.rowspan-1}}return l}function GK(n,e,t,i,r){let s=t?n.doc.nodeAt(t-1):n.doc;if(!s)throw new Error("No table found");let o=fr.get(s);const{top:a,left:l}=i,c=l+r.width,u=a+r.height,d=n.tr;let h=0;function f(){if(s=t?d.doc.nodeAt(t-1):d.doc,!s)throw new Error("No table found");o=fr.get(s),h=d.mapping.maps.length}g3e(d,o,s,t,c,u,h)&&f(),KK(d,o,s,t,l,c,a,h)&&f(),KK(d,o,s,t,l,c,u,h)&&f(),qK(d,o,s,t,a,u,l,h)&&f(),qK(d,o,s,t,a,u,c,h)&&f();for(let g=a;g<u;g++){const p=o.positionAt(g,l,s),v=o.positionAt(g,c,s);d.replace(d.mapping.slice(h).map(p+t),d.mapping.slice(h).map(v+t),new _t(r.rows[g-a],0,0))}f(),d.setSelection(new Li(d.doc.resolve(t+o.positionAt(a,l,s)),d.doc.resolve(t+o.positionAt(u-1,c-1,s)))),e(d)}var p3e=lB({ArrowLeft:yx("horiz",-1),ArrowRight:yx("horiz",1),ArrowUp:yx("vert",-1),ArrowDown:yx("vert",1),"Shift-ArrowLeft":wx("horiz",-1),"Shift-ArrowRight":wx("horiz",1),"Shift-ArrowUp":wx("vert",-1),"Shift-ArrowDown":wx("vert",1),Backspace:Cx,"Mod-Backspace":Cx,Delete:Cx,"Mod-Delete":Cx});function aE(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function yx(n,e){return(t,i,r)=>{if(!r)return!1;const s=t.selection;if(s instanceof Li)return aE(t,i,tn.near(s.$headCell,e));if(n!="horiz"&&!s.empty)return!1;const o=nle(r,n,e);if(o==null)return!1;if(n=="horiz")return aE(t,i,tn.near(t.doc.resolve(s.head+e),e));{const a=t.doc.resolve(o),l=Yae(a,n,e);let c;return l?c=tn.near(l,1):e<0?c=tn.near(t.doc.resolve(a.before(-1)),-1):c=tn.near(t.doc.resolve(a.after(-1)),1),aE(t,i,c)}}}function wx(n,e){return(t,i,r)=>{if(!r)return!1;const s=t.selection;let o;if(s instanceof Li)o=s;else{const l=nle(r,n,e);if(l==null)return!1;o=new Li(t.doc.resolve(l))}const a=Yae(o.$headCell,n,e);return a?aE(t,i,new Li(o.$anchorCell,a)):!1}}function m3e(n,e){const t=n.state.doc,i=lb(t.resolve(e));return i?(n.dispatch(n.state.tr.setSelection(new Li(i))),!0):!1}function v3e(n,e,t){if(!Sc(n.state))return!1;let i=d3e(t);const r=n.state.selection;if(r instanceof Li){i||(i={width:1,height:1,rows:[Ye.from(hP(lo(n.state.schema).cell,t))]});const s=r.$anchorCell.node(-1),o=r.$anchorCell.start(-1),a=fr.get(s).rectBetween(r.$anchorCell.pos-o,r.$headCell.pos-o);return i=f3e(i,a.right-a.left,a.bottom-a.top),GK(n.state,n.dispatch,o,a,i),!0}else if(i){const s=_D(n.state),o=s.start(-1);return GK(n.state,n.dispatch,o,fr.get(s.node(-1)).findCell(s.pos-o),i),!0}else return!1}function b3e(n,e){var t;if(e.ctrlKey||e.metaKey)return;const i=YK(n,e.target);let r;if(e.shiftKey&&n.state.selection instanceof Li)s(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&i&&(r=lb(n.state.selection.$anchor))!=null&&((t=iR(n,e))==null?void 0:t.pos)!=r.pos)s(r,e),e.preventDefault();else if(!i)return;function s(l,c){let u=iR(n,c);const d=Lh.getState(n.state)==null;if(!u||!kB(l,u))if(d)u=l;else return;const h=new Li(l,u);if(d||!n.state.selection.eq(h)){const f=n.state.tr.setSelection(h);d&&f.setMeta(Lh,l.pos),n.dispatch(f)}}function o(){n.root.removeEventListener("mouseup",o),n.root.removeEventListener("dragstart",o),n.root.removeEventListener("mousemove",a),Lh.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(Lh,-1))}function a(l){const c=l,u=Lh.getState(n.state);let d;if(u!=null)d=n.state.doc.resolve(u);else if(YK(n,c.target)!=i&&(d=iR(n,e),!d))return o();d&&s(d,c)}n.root.addEventListener("mouseup",o),n.root.addEventListener("dragstart",o),n.root.addEventListener("mousemove",a)}function nle(n,e,t){if(!(n.state.selection instanceof Gt))return null;const{$head:i}=n.state.selection;for(let r=i.depth-1;r>=0;r--){const s=i.node(r);if((t<0?i.index(r):i.indexAfter(r))!=(t<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=i.before(r),l=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(l)?a:null}}return null}function YK(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function iR(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?lb(n.state.doc.resolve(t.pos)):null}var _3e=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),fP(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,fP(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function fP(n,e,t,i,r,s){var o;let a=0,l=!0,c=e.firstChild;const u=n.firstChild;if(u){for(let d=0,h=0;d<u.childCount;d++){const{colspan:f,colwidth:g}=u.child(d).attrs;for(let p=0;p<f;p++,h++){const v=r==h?s:g&&g[p],b=v?v+"px":"";a+=v||i,v||(l=!1),c?(c.style.width!=b&&(c.style.width=b),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=b}}for(;c;){const d=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=d}l?(t.style.width=a+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=a+"px")}}var rl=new zi("tableColumnResizing");function C3e({handleWidth:n=5,cellMinWidth:e=25,View:t=_3e,lastColumnResizable:i=!0}={}){const r=new Ni({key:rl,state:{init(s,o){var a,l;const c=(l=(a=r.spec)==null?void 0:a.props)==null?void 0:l.nodeViews,u=lo(o.schema).table.name;return t&&c&&(c[u]=(d,h)=>new t(d,e,h)),new y3e(-1,!1)},apply(s,o){return o.apply(s)}},props:{attributes:s=>{const o=rl.getState(s);return o&&o.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,o)=>{w3e(s,o,n,e,i)},mouseleave:s=>{S3e(s)},mousedown:(s,o)=>{x3e(s,o,e)}},decorations:s=>{const o=rl.getState(s);if(o&&o.activeHandle>-1)return I3e(s,o.activeHandle)},nodeViews:{}}});return r}var y3e=class lE{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,i=e.getMeta(rl);if(i&&i.setHandle!=null)return new lE(i.setHandle,!1);if(i&&i.setDragging!==void 0)return new lE(t.activeHandle,i.setDragging);if(t.activeHandle>-1&&e.docChanged){let r=e.mapping.map(t.activeHandle,-1);return dP(e.doc.resolve(r))||(r=-1),new lE(r,t.dragging)}return t}};function w3e(n,e,t,i,r){const s=rl.getState(n.state);if(s&&!s.dragging){const o=E3e(e.target);let a=-1;if(o){const{left:l,right:c}=o.getBoundingClientRect();e.clientX-l<=t?a=ZK(n,e,"left",t):c-e.clientX<=t&&(a=ZK(n,e,"right",t))}if(a!=s.activeHandle){if(!r&&a!==-1){const l=n.state.doc.resolve(a),c=l.node(-1),u=fr.get(c),d=l.start(-1);if(u.colCount(l.pos-d)+l.nodeAfter.attrs.colspan-1==u.width-1)return}ile(n,a)}}}function S3e(n){const e=rl.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&ile(n,-1)}function x3e(n,e,t){var i;const r=(i=n.dom.ownerDocument.defaultView)!=null?i:window,s=rl.getState(n.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const o=n.state.doc.nodeAt(s.activeHandle),a=k3e(n,s.activeHandle,o.attrs);n.dispatch(n.state.tr.setMeta(rl,{setDragging:{startX:e.clientX,startWidth:a}}));function l(u){r.removeEventListener("mouseup",l),r.removeEventListener("mousemove",c);const d=rl.getState(n.state);d!=null&&d.dragging&&(L3e(n,d.activeHandle,XK(d.dragging,u,t)),n.dispatch(n.state.tr.setMeta(rl,{setDragging:null})))}function c(u){if(!u.which)return l(u);const d=rl.getState(n.state);if(d&&d.dragging){const h=XK(d.dragging,u,t);N3e(n,d.activeHandle,h,t)}}return r.addEventListener("mouseup",l),r.addEventListener("mousemove",c),e.preventDefault(),!0}function k3e(n,e,{colspan:t,colwidth:i}){const r=i&&i[i.length-1];if(r)return r;const s=n.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=t;if(i)for(let c=0;c<t;c++)i[c]&&(a-=i[c],l--);return a/l}function E3e(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function ZK(n,e,t,i){const r=t=="right"?-i:i,s=n.posAtCoords({left:e.clientX+r,top:e.clientY});if(!s)return-1;const{pos:o}=s,a=lb(n.state.doc.resolve(o));if(!a)return-1;if(t=="right")return a.pos;const l=fr.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function XK(n,e,t){const i=e.clientX-n.startX;return Math.max(t,n.startWidth+i)}function ile(n,e){n.dispatch(n.state.tr.setMeta(rl,{setHandle:e}))}function L3e(n,e,t){const i=n.state.doc.resolve(e),r=i.node(-1),s=fr.get(r),o=i.start(-1),a=s.colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1,l=n.state.tr;for(let c=0;c<s.height;c++){const u=c*s.width+a;if(c&&s.map[u]==s.map[u-s.width])continue;const d=s.map[u],h=r.nodeAt(d).attrs,f=h.colspan==1?0:a-s.colCount(d);if(h.colwidth&&h.colwidth[f]==t)continue;const g=h.colwidth?h.colwidth.slice():T3e(h.colspan);g[f]=t,l.setNodeMarkup(o+d,null,{...h,colwidth:g})}l.docChanged&&n.dispatch(l)}function N3e(n,e,t,i){const r=n.state.doc.resolve(e),s=r.node(-1),o=r.start(-1),a=fr.get(s).colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1;let l=n.domAtPos(r.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&fP(s,l.firstChild,l,i,a,t)}function T3e(n){return Array(n).fill(0)}function I3e(n,e){const t=[],i=n.doc.resolve(e),r=i.node(-1);if(!r)return fi.empty;const s=fr.get(r),o=i.start(-1),a=s.colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;for(let l=0;l<s.height;l++){const c=a+l*s.width;if((a==s.width-1||s.map[c]!=s.map[c+1])&&(l==0||s.map[c]!=s.map[c-s.width])){const u=s.map[c],d=o+u+r.nodeAt(u).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",t.push(hs.widget(d,h))}}return fi.create(n.doc,t)}function D3e({allowTableNodeSelection:n=!1}={}){return new Ni({key:Lh,state:{init(){return null},apply(e,t){const i=e.getMeta(Lh);if(i!=null)return i==-1?null:i;if(t==null||!e.docChanged)return t;const{deleted:r,pos:s}=e.mapping.mapResult(t);return r?null:s}},props:{decorations:$Oe,handleDOMEvents:{mousedown:b3e},createSelectionBetween(e){return Lh.getState(e.state)!=null?e.state.selection:null},handleTripleClick:m3e,handleKeyDown:p3e,handlePaste:v3e},appendTransaction(e,t,i){return KOe(i,Jae(i,t),n)}})}function QK(n,e,t,i,r,s){let o=0,a=!0,l=e.firstChild;const c=n.firstChild;for(let u=0,d=0;u<c.childCount;u+=1){const{colspan:h,colwidth:f}=c.child(u).attrs;for(let g=0;g<h;g+=1,d+=1){const p=r===d?s:f&&f[g],v=p?`${p}px`:"";o+=p||i,p||(a=!1),l?(l.style.width!==v&&(l.style.width=v),l=l.nextSibling):e.appendChild(document.createElement("col")).style.width=v}}for(;l;){const u=l.nextSibling;l.parentNode.removeChild(l),l=u}a?(t.style.width=`${o}px`,t.style.minWidth=""):(t.style.width="",t.style.minWidth=`${o}px`)}class M3e{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),QK(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,QK(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function R3e(n,e,t,i){let r=0,s=!0;const o=[],a=n.firstChild;if(!a)return{};for(let d=0,h=0;d<a.childCount;d+=1){const{colspan:f,colwidth:g}=a.child(d).attrs;for(let p=0;p<f;p+=1,h+=1){const v=t===h?i:g&&g[p],b=v?`${v}px`:"";r+=v||e,v||(s=!1),o.push(["col",b?{style:`width: ${b}`}:{}])}}const l=s?`${r}px`:"",c=s?"":`${r}px`;return{colgroup:["colgroup",{},...o],tableWidth:l,tableMinWidth:c}}function JK(n,e){return n.createAndFill()}function A3e(n){if(n.cached.tableNodeTypes)return n.cached.tableNodeTypes;const e={};return Object.keys(n.nodes).forEach(t=>{const i=n.nodes[t];i.spec.tableRole&&(e[i.spec.tableRole]=i)}),n.cached.tableNodeTypes=e,e}function O3e(n,e,t,i,r){const s=A3e(n),o=[],a=[];for(let c=0;c<t;c+=1){const u=JK(s.cell);if(u&&a.push(u),i){const d=JK(s.header_cell);d&&o.push(d)}}const l=[];for(let c=0;c<e;c+=1)l.push(s.row.createChecked(null,i&&c===0?o:a));return s.table.createChecked(null,l)}function P3e(n){return n instanceof Li}const Sx=({editor:n})=>{const{selection:e}=n.state;if(!P3e(e))return!1;let t=0;const i=bae(e.ranges[0].$from,s=>s.type.name==="table");return i==null||i.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(t+=1)}),t===e.ranges.length?(n.commands.deleteTable(),!0):!1},F3e=Gi.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:M3e,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:n,HTMLAttributes:e}){const{colgroup:t,tableWidth:i,tableMinWidth:r}=R3e(n,this.options.cellMinWidth);return["table",Gn(this.options.HTMLAttributes,e,{style:i?`width: ${i}`:`min-width: ${r}`}),t,["tbody",0]]},addCommands(){return{insertTable:({rows:n=3,cols:e=3,withHeaderRow:t=!0}={})=>({tr:i,dispatch:r,editor:s})=>{const o=O3e(s.schema,n,e,t);if(r){const a=i.selection.from+1;i.replaceSelectionWith(o).scrollIntoView().setSelection(Gt.near(i.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:n,dispatch:e})=>YOe(n,e),addColumnAfter:()=>({state:n,dispatch:e})=>ZOe(n,e),deleteColumn:()=>({state:n,dispatch:e})=>QOe(n,e),addRowBefore:()=>({state:n,dispatch:e})=>e3e(n,e),addRowAfter:()=>({state:n,dispatch:e})=>t3e(n,e),deleteRow:()=>({state:n,dispatch:e})=>i3e(n,e),deleteTable:()=>({state:n,dispatch:e})=>u3e(n,e),mergeCells:()=>({state:n,dispatch:e})=>WK(n,e),splitCell:()=>({state:n,dispatch:e})=>$K(n,e),toggleHeaderColumn:()=>({state:n,dispatch:e})=>By("column")(n,e),toggleHeaderRow:()=>({state:n,dispatch:e})=>By("row")(n,e),toggleHeaderCell:()=>({state:n,dispatch:e})=>l3e(n,e),mergeOrSplit:()=>({state:n,dispatch:e})=>WK(n,e)?!0:$K(n,e),setCellAttribute:(n,e)=>({state:t,dispatch:i})=>o3e(n,e)(t,i),goToNextCell:()=>({state:n,dispatch:e})=>jK(1)(n,e),goToPreviousCell:()=>({state:n,dispatch:e})=>jK(-1)(n,e),fixTables:()=>({state:n,dispatch:e})=>(e&&Jae(n),!0),setCellSelection:n=>({tr:e,dispatch:t})=>{if(t){const i=Li.create(e.doc,n.anchorCell,n.headCell);e.setSelection(i)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Sx,"Mod-Backspace":Sx,Delete:Sx,"Mod-Delete":Sx}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[C3e({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],D3e({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(n){const e={name:n.name,options:n.options,storage:n.storage};return{tableRole:Pn(Mt(n,"tableRole",e))}}}),B3e=Gi.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:n}){return["tr",Gn(this.options.HTMLAttributes,n),0]}}),H3e=Gi.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:n}){return["th",Gn(this.options.HTMLAttributes,n),0]}}),V3e="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",z3e="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",y1=(n,e)=>{for(const t in e)n[t]=e[t];return n},gP="numeric",pP="ascii",mP="alpha",cE="asciinumeric",xx="alphanumeric",vP="domain",rle="emoji",W3e="scheme",$3e="slashscheme",eq="whitespace";function U3e(n,e){return n in e||(e[n]=[]),e[n]}function Kg(n,e,t){e[gP]&&(e[cE]=!0,e[xx]=!0),e[pP]&&(e[cE]=!0,e[mP]=!0),e[cE]&&(e[xx]=!0),e[mP]&&(e[xx]=!0),e[xx]&&(e[vP]=!0),e[rle]&&(e[vP]=!0);for(const i in e){const r=U3e(i,t);r.indexOf(n)<0&&r.push(n)}}function j3e(n,e){const t={};for(const i in e)e[i].indexOf(n)>=0&&(t[i]=!0);return t}function qo(n){n===void 0&&(n=null),this.j={},this.jr=[],this.jd=null,this.t=n}qo.groups={};qo.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let i=0;i<e.jr.length;i++){const r=e.jr[i][0],s=e.jr[i][1];if(s&&r.test(n))return s}return e.jd},has(n,e){return e===void 0&&(e=!1),e?n in this.j:!!this.go(n)},ta(n,e,t,i){for(let r=0;r<n.length;r++)this.tt(n[r],e,t,i)},tr(n,e,t,i){i=i||qo.groups;let r;return e&&e.j?r=e:(r=new qo(e),t&&i&&Kg(e,t,i)),this.jr.push([n,r]),r},ts(n,e,t,i){let r=this;const s=n.length;if(!s)return r;for(let o=0;o<s-1;o++)r=r.tt(n[o]);return r.tt(n[s-1],e,t,i)},tt(n,e,t,i){i=i||qo.groups;const r=this;if(e&&e.j)return r.j[n]=e,e;const s=e;let o,a=r.go(n);if(a?(o=new qo,y1(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new qo,s){if(i)if(o.t&&typeof o.t=="string"){const l=y1(j3e(o.t,i),t);Kg(s,l,i)}else t&&Kg(s,t,i);o.t=s}return r.j[n]=o,o}};const Rn=(n,e,t,i,r)=>n.ta(e,t,i,r),qa=(n,e,t,i,r)=>n.tr(e,t,i,r),tq=(n,e,t,i,r)=>n.ts(e,t,i,r),vt=(n,e,t,i,r)=>n.tt(e,t,i,r),Vu="WORD",bP="UWORD",Hy="LOCALHOST",_P="TLD",CP="UTLD",uE="SCHEME",lv="SLASH_SCHEME",EB="NUM",sle="WS",LB="NL",oC="OPENBRACE",aC="CLOSEBRACE",U2="OPENBRACKET",j2="CLOSEBRACKET",K2="OPENPAREN",q2="CLOSEPAREN",G2="OPENANGLEBRACKET",Y2="CLOSEANGLEBRACKET",Z2="FULLWIDTHLEFTPAREN",X2="FULLWIDTHRIGHTPAREN",Q2="LEFTCORNERBRACKET",J2="RIGHTCORNERBRACKET",eL="LEFTWHITECORNERBRACKET",tL="RIGHTWHITECORNERBRACKET",nL="FULLWIDTHLESSTHAN",iL="FULLWIDTHGREATERTHAN",rL="AMPERSAND",sL="APOSTROPHE",oL="ASTERISK",mh="AT",aL="BACKSLASH",lL="BACKTICK",cL="CARET",Nh="COLON",NB="COMMA",uL="DOLLAR",Bc="DOT",dL="EQUALS",TB="EXCLAMATION",Hc="HYPHEN",hL="PERCENT",fL="PIPE",gL="PLUS",pL="POUND",mL="QUERY",IB="QUOTE",DB="SEMI",Vc="SLASH",lC="TILDE",vL="UNDERSCORE",ole="EMOJI",bL="SYM";var ale=Object.freeze({__proto__:null,WORD:Vu,UWORD:bP,LOCALHOST:Hy,TLD:_P,UTLD:CP,SCHEME:uE,SLASH_SCHEME:lv,NUM:EB,WS:sle,NL:LB,OPENBRACE:oC,CLOSEBRACE:aC,OPENBRACKET:U2,CLOSEBRACKET:j2,OPENPAREN:K2,CLOSEPAREN:q2,OPENANGLEBRACKET:G2,CLOSEANGLEBRACKET:Y2,FULLWIDTHLEFTPAREN:Z2,FULLWIDTHRIGHTPAREN:X2,LEFTCORNERBRACKET:Q2,RIGHTCORNERBRACKET:J2,LEFTWHITECORNERBRACKET:eL,RIGHTWHITECORNERBRACKET:tL,FULLWIDTHLESSTHAN:nL,FULLWIDTHGREATERTHAN:iL,AMPERSAND:rL,APOSTROPHE:sL,ASTERISK:oL,AT:mh,BACKSLASH:aL,BACKTICK:lL,CARET:cL,COLON:Nh,COMMA:NB,DOLLAR:uL,DOT:Bc,EQUALS:dL,EXCLAMATION:TB,HYPHEN:Hc,PERCENT:hL,PIPE:fL,PLUS:gL,POUND:pL,QUERY:mL,QUOTE:IB,SEMI:DB,SLASH:Vc,TILDE:lC,UNDERSCORE:vL,EMOJI:ole,SYM:bL});const zm=/[a-z]/,rR=new RegExp("\\p{L}","u"),sR=new RegExp("\\p{Emoji}","u"),oR=/\d/,nq=/\s/,iq=`
`,K3e="",q3e="";let kx=null,Ex=null;function G3e(n){n===void 0&&(n=[]);const e={};qo.groups=e;const t=new qo;kx==null&&(kx=rq(V3e)),Ex==null&&(Ex=rq(z3e)),vt(t,"'",sL),vt(t,"{",oC),vt(t,"}",aC),vt(t,"[",U2),vt(t,"]",j2),vt(t,"(",K2),vt(t,")",q2),vt(t,"<",G2),vt(t,">",Y2),vt(t,"",Z2),vt(t,"",X2),vt(t,"",Q2),vt(t,"",J2),vt(t,"",eL),vt(t,"",tL),vt(t,"",nL),vt(t,"",iL),vt(t,"&",rL),vt(t,"*",oL),vt(t,"@",mh),vt(t,"`",lL),vt(t,"^",cL),vt(t,":",Nh),vt(t,",",NB),vt(t,"$",uL),vt(t,".",Bc),vt(t,"=",dL),vt(t,"!",TB),vt(t,"-",Hc),vt(t,"%",hL),vt(t,"|",fL),vt(t,"+",gL),vt(t,"#",pL),vt(t,"?",mL),vt(t,'"',IB),vt(t,"/",Vc),vt(t,";",DB),vt(t,"~",lC),vt(t,"_",vL),vt(t,"\\",aL);const i=qa(t,oR,EB,{[gP]:!0});qa(i,oR,i);const r=qa(t,zm,Vu,{[pP]:!0});qa(r,zm,r);const s=qa(t,rR,bP,{[mP]:!0});qa(s,zm),qa(s,rR,s);const o=qa(t,nq,sle,{[eq]:!0});vt(t,iq,LB,{[eq]:!0}),vt(o,iq),qa(o,nq,o);const a=qa(t,sR,ole,{[rle]:!0});qa(a,sR,a),vt(a,K3e,a);const l=vt(a,q3e);qa(l,sR,a);const c=[[zm,r]],u=[[zm,null],[rR,s]];for(let d=0;d<kx.length;d++)ih(t,kx[d],_P,Vu,c);for(let d=0;d<Ex.length;d++)ih(t,Ex[d],CP,bP,u);Kg(_P,{tld:!0,ascii:!0},e),Kg(CP,{utld:!0,alpha:!0},e),ih(t,"file",uE,Vu,c),ih(t,"mailto",uE,Vu,c),ih(t,"http",lv,Vu,c),ih(t,"https",lv,Vu,c),ih(t,"ftp",lv,Vu,c),ih(t,"ftps",lv,Vu,c),Kg(uE,{scheme:!0,ascii:!0},e),Kg(lv,{slashscheme:!0,ascii:!0},e),n=n.sort((d,h)=>d[0]>h[0]?1:-1);for(let d=0;d<n.length;d++){const h=n[d][0],g=n[d][1]?{[W3e]:!0}:{[$3e]:!0};h.indexOf("-")>=0?g[vP]=!0:zm.test(h)?oR.test(h)?g[cE]=!0:g[pP]=!0:g[gP]=!0,tq(t,h,h,g)}return tq(t,"localhost",Hy,{ascii:!0}),t.jd=new qo(bL),{start:t,tokens:y1({groups:e},ale)}}function Y3e(n,e){const t=Z3e(e.replace(/[A-Z]/g,a=>a.toLowerCase())),i=t.length,r=[];let s=0,o=0;for(;o<i;){let a=n,l=null,c=0,u=null,d=-1,h=-1;for(;o<i&&(l=a.go(t[o]));)a=l,a.accepts()?(d=0,h=0,u=a):d>=0&&(d+=t[o].length,h++),c+=t[o].length,s+=t[o].length,o++;s-=d,o-=h,c-=d,r.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return r}function Z3e(n){const e=[],t=n.length;let i=0;for(;i<t;){let r=n.charCodeAt(i),s,o=r<55296||r>56319||i+1===t||(s=n.charCodeAt(i+1))<56320||s>57343?n[i]:n.slice(i,i+2);e.push(o),i+=o.length}return e}function ih(n,e,t,i,r){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];n.j[l]?s=n.j[l]:(s=new qo(i),s.jr=r.slice(),n.j[l]=s),n=s}return s=new qo(t),s.jr=r.slice(),n.j[e[o-1]]=s,s}function rq(n){const e=[],t=[];let i=0,r="0123456789";for(;i<n.length;){let s=0;for(;r.indexOf(n[i+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let o=parseInt(n.substring(i,i+s),10);o>0;o--)t.pop();i+=s}else t.push(n[i]),i++}return e}const Vy={defaultProtocol:"http",events:null,format:sq,formatHref:sq,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function MB(n,e){e===void 0&&(e=null);let t=y1({},Vy);n&&(t=y1(t,n instanceof MB?n.o:n));const i=t.ignoreTags,r=[];for(let s=0;s<i.length;s++)r.push(i[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=r}MB.prototype={o:Vy,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const i=e!=null;let r=this.o[n];return r&&(typeof r=="object"?(r=t.t in r?r[t.t]:Vy[n],typeof r=="function"&&i&&(r=r(e,t))):typeof r=="function"&&i&&(r=r(e,t.t,t)),r)},getObj(n,e,t){let i=this.o[n];return typeof i=="function"&&e!=null&&(i=i(e,t.t,t)),i},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function sq(n){return n}function lle(n,e){this.t="token",this.v=n,this.tk=e}lle.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),i=n.get("format",e,this);return t&&i.length>t?i.substring(0,t)+"":i},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n){return n===void 0&&(n=Vy.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),i=n.get("formatHref",t,this),r=n.get("tagName",t,e),s=this.toFormattedString(n),o={},a=n.get("className",t,e),l=n.get("target",t,e),c=n.get("rel",t,e),u=n.getObj("attributes",t,e),d=n.getObj("events",t,e);return o.href=i,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&y1(o,u),{tagName:r,attributes:o,content:s,eventListeners:d}}};function CD(n,e){class t extends lle{constructor(r,s){super(r,s),this.t=n}}for(const i in e)t.prototype[i]=e[i];return t.t=n,t}const oq=CD("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),aq=CD("text"),X3e=CD("nl"),Lx=CD("url",{isLink:!0,toHref(n){return n===void 0&&(n=Vy.defaultProtocol),this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Hy&&n[1].t===Nh}}),Ga=n=>new qo(n);function Q3e(n){let{groups:e}=n;const t=e.domain.concat([rL,oL,mh,aL,lL,cL,uL,dL,Hc,EB,hL,fL,gL,pL,Vc,bL,lC,vL]),i=[sL,Nh,NB,Bc,TB,mL,IB,DB,G2,Y2,oC,aC,j2,U2,K2,q2,Z2,X2,Q2,J2,eL,tL,nL,iL],r=[rL,sL,oL,aL,lL,cL,uL,dL,Hc,oC,aC,hL,fL,gL,pL,mL,Vc,bL,lC,vL],s=Ga(),o=vt(s,lC);Rn(o,r,o),Rn(o,e.domain,o);const a=Ga(),l=Ga(),c=Ga();Rn(s,e.domain,a),Rn(s,e.scheme,l),Rn(s,e.slashscheme,c),Rn(a,r,o),Rn(a,e.domain,a);const u=vt(a,mh);vt(o,mh,u),vt(l,mh,u),vt(c,mh,u);const d=vt(o,Bc);Rn(d,r,o),Rn(d,e.domain,o);const h=Ga();Rn(u,e.domain,h),Rn(h,e.domain,h);const f=vt(h,Bc);Rn(f,e.domain,h);const g=Ga(oq);Rn(f,e.tld,g),Rn(f,e.utld,g),vt(u,Hy,g);const p=vt(h,Hc);Rn(p,e.domain,h),Rn(g,e.domain,h),vt(g,Bc,f),vt(g,Hc,p);const v=vt(g,Nh);Rn(v,e.numeric,oq);const b=vt(a,Hc),_=vt(a,Bc);Rn(b,e.domain,a),Rn(_,r,o),Rn(_,e.domain,a);const y=Ga(Lx);Rn(_,e.tld,y),Rn(_,e.utld,y),Rn(y,e.domain,a),Rn(y,r,o),vt(y,Bc,_),vt(y,Hc,b),vt(y,mh,u);const C=vt(y,Nh),w=Ga(Lx);Rn(C,e.numeric,w);const x=Ga(Lx),k=Ga();Rn(x,t,x),Rn(x,i,k),Rn(k,t,x),Rn(k,i,k),vt(y,Vc,x),vt(w,Vc,x);const E=vt(l,Nh),L=vt(c,Nh),M=vt(L,Vc),D=vt(M,Vc);Rn(l,e.domain,a),vt(l,Bc,_),vt(l,Hc,b),Rn(c,e.domain,a),vt(c,Bc,_),vt(c,Hc,b),Rn(E,e.domain,x),vt(E,Vc,x),Rn(D,e.domain,x),Rn(D,t,x),vt(D,Vc,x);const O=[[oC,aC],[U2,j2],[K2,q2],[G2,Y2],[Z2,X2],[Q2,J2],[eL,tL],[nL,iL]];for(let A=0;A<O.length;A++){const[R,V]=O[A],F=vt(x,R);vt(k,R,F),vt(F,V,x);const T=Ga(Lx);Rn(F,t,T);const N=Ga();Rn(F,i),Rn(T,t,T),Rn(T,i,N),Rn(N,t,T),Rn(N,i,N),vt(T,V,x),vt(N,V,x)}return vt(s,Hy,y),vt(s,LB,X3e),{start:s,tokens:ale}}function J3e(n,e,t){let i=t.length,r=0,s=[],o=[];for(;r<i;){let a=n,l=null,c=null,u=0,d=null,h=-1;for(;r<i&&!(l=a.go(t[r].t));)o.push(t[r++]);for(;r<i&&(c=l||a.go(t[r].t));)l=null,a=c,a.accepts()?(h=0,d=a):h>=0&&h++,r++,u++;if(h<0)r-=u,r<i&&(o.push(t[r]),r++);else{o.length>0&&(s.push(aR(aq,e,o)),o=[]),r-=h,u-=h;const f=d.t,g=t.slice(r-u,r);s.push(aR(f,e,g))}}return o.length>0&&s.push(aR(aq,e,o)),s}function aR(n,e,t){const i=t[0].s,r=t[t.length-1].e,s=e.slice(i,r);return new n(s,t)}const ePe=typeof console<"u"&&console&&console.warn||(()=>{}),tPe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Xi={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function nPe(){qo.groups={},Xi.scanner=null,Xi.parser=null,Xi.tokenQueue=[],Xi.pluginQueue=[],Xi.customSchemes=[],Xi.initialized=!1}function lq(n,e){if(e===void 0&&(e=!1),Xi.initialized&&ePe(`linkifyjs: already initialized - will not register custom scheme "${n}" ${tPe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Xi.customSchemes.push([n,e])}function iPe(){Xi.scanner=G3e(Xi.customSchemes);for(let n=0;n<Xi.tokenQueue.length;n++)Xi.tokenQueue[n][1]({scanner:Xi.scanner});Xi.parser=Q3e(Xi.scanner.tokens);for(let n=0;n<Xi.pluginQueue.length;n++)Xi.pluginQueue[n][1]({scanner:Xi.scanner,parser:Xi.parser});Xi.initialized=!0}function cle(n){return Xi.initialized||iPe(),J3e(Xi.parser.start,n,Y3e(Xi.scanner.start,n))}function ule(n,e,t){if(e===void 0&&(e=null),t===void 0&&(t=null),e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const i=new MB(t),r=cle(n),s=[];for(let o=0;o<r.length;o++){const a=r[o];a.isLink&&(!e||a.t===e)&&i.check(a)&&s.push(a.toFormattedObject(i))}return s}function rPe(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function sPe(n){return new Ni({key:new zi("autolink"),appendTransaction:(e,t,i)=>{const r=e.some(c=>c.docChanged)&&!t.doc.eq(i.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!r||s)return;const{tr:o}=i,a=E4e(t.doc,[...e]);if(A4e(a).forEach(({newRange:c})=>{const u=N4e(i.doc,c,f=>f.isTextblock);let d,h;if(u.length>1?(d=u[0],h=i.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):u.length&&i.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(d=u[0],h=i.doc.textBetween(d.pos,c.to,void 0," ")),d&&h){const f=h.split(" ").filter(b=>b!=="");if(f.length<=0)return!1;const g=f[f.length-1],p=d.pos+h.lastIndexOf(g);if(!g)return!1;const v=cle(g).map(b=>b.toObject(n.defaultProtocol));if(!rPe(v))return!1;v.filter(b=>b.isLink).map(b=>({...b,from:p+b.start+1,to:p+b.end+1})).filter(b=>i.schema.marks.code?!i.doc.rangeHasMark(b.from,b.to,i.schema.marks.code):!0).filter(b=>n.validate(b.value)).forEach(b=>{gB(b.from,b.to,i.doc).some(_=>_.mark.type===n.type)||o.addMark(b.from,b.to,n.type.create({href:b.href}))})}}),!!o.steps.length)return o}})}function oPe(n){return new Ni({key:new zi("handleClickLink"),props:{handleClick:(e,t,i)=>{var r,s;if(i.button!==0||!e.editable)return!1;let o=i.target;const a=[];for(;o.nodeName!=="DIV";)a.push(o),o=o.parentNode;if(!a.find(h=>h.nodeName==="A"))return!1;const l=_ae(e.state,n.type.name),c=i.target,u=(r=c==null?void 0:c.href)!==null&&r!==void 0?r:l.href,d=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:l.target;return c&&u?(window.open(u,d),!0):!1}}})}function aPe(n){return new Ni({key:new zi("handlePasteLink"),props:{handlePaste:(e,t,i)=>{const{state:r}=e,{selection:s}=r,{empty:o}=s;if(o)return!1;let a="";i.content.forEach(c=>{a+=c.textContent});const l=ule(a,{defaultProtocol:n.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:(n.editor.commands.setMark(n.type,{href:l.href}),!0)}}})}const lPe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function cq(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(i=>{const r=typeof i=="string"?i:i.scheme;r&&t.push(r)}),!n||n.replace(lPe,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const dle=ha.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach(n=>{if(typeof n=="string"){lq(n);return}lq(n.scheme,n.optionalSlashes)})},onDestroy(){nPe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!cq(e,this.options.protocols)?!1:null}}]},renderHTML({HTMLAttributes:n}){return cq(n.href,this.options.protocols)?["a",Gn(this.options.HTMLAttributes,n),0]:["a",Gn(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>e().setMark(this.name,n).setMeta("preventAutolink",!0).run(),toggleLink:n=>({chain:e})=>e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[xf({find:n=>{const e=[];if(n){const{validate:t}=this.options,i=ule(n).filter(r=>r.isLink&&t(r.value));i.length&&i.forEach(r=>e.push({text:r.value,data:{href:r.href},index:r.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[];return this.options.autolink&&n.push(sPe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate})),this.options.openOnClick===!0&&n.push(oPe({type:this.type})),this.options.linkOnPaste&&n.push(aPe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),cPe=/^\s*>\s$/,uPe=Gi.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[m1({find:cPe,type:this.type})]}}),dPe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,hPe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,fPe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,gPe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,pPe=ha.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[jp({find:dPe,type:this.type}),jp({find:fPe,type:this.type})]},addPasteRules(){return[xf({find:hPe,type:this.type}),xf({find:gPe,type:this.type})]}}),RB=Gi.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Gn(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),uq=/^\s*([-+*])\s$/,mPe=Gi.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(RB.name,this.editor.getAttributes(Fy.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=m1({find:uq,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=m1({find:uq,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Fy.name),editor:this.editor})),[n]}}),vPe=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,bPe=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,_Pe=ha.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[jp({find:vPe,type:this.type})]},addPasteRules(){return[xf({find:bPe,type:this.type})]}}),CPe=Gi.create({name:"doc",topNode:!0,content:"block+"});function yPe(n={}){return new Ni({view(e){return new wPe(e,n)}})}class wPe{constructor(e,t){var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=t.width)!==null&&i!==void 0?i:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let s=o=>{this[r](o)};return e.dom.addEventListener(r,s),{name:r,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,i;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),i={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!i){let a=this.editorView.coordsAtPos(this.cursorPos);i={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let r=this.editorView.dom.offsetParent;this.element||(this.element=r.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let s,o;if(!r||r==document.body&&getComputedStyle(r).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=r.getBoundingClientRect();s=a.left-r.scrollLeft,o=a.top-r.scrollTop}this.element.style.left=i.left-s+"px",this.element.style.top=i.top-o+"px",this.element.style.width=i.right-i.left+"px",this.element.style.height=i.bottom-i.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=i&&i.type.spec.disableDropCursor,s=typeof r=="function"?r(this.editorView,t,e):r;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=voe(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const SPe=pi.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[yPe(this.options)]}});class hr extends tn{constructor(e){super(e,e)}map(e,t){let i=e.resolve(t.map(this.head));return hr.valid(i)?new hr(i):tn.near(i)}content(){return _t.empty}eq(e){return e instanceof hr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new hr(e.resolve(t.pos))}getBookmark(){return new AB(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!xPe(e)||!kPe(e))return!1;let i=t.type.spec.allowGapCursor;if(i!=null)return i;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,i=!1){e:for(;;){if(!i&&hr.valid(e))return e;let r=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;r+=t;let l=e.doc.resolve(r);if(hr.valid(l))return l}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!$t.isSelectable(s)){e=e.doc.resolve(r+s.nodeSize*t),i=!1;continue e}break}s=o,r+=t;let a=e.doc.resolve(r);if(hr.valid(a))return a}return null}}}hr.prototype.visible=!1;hr.findFrom=hr.findGapCursorFrom;tn.jsonID("gapcursor",hr);class AB{constructor(e){this.pos=e}map(e){return new AB(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return hr.valid(t)?new hr(t):tn.near(t)}}function xPe(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),i=n.node(e);if(t==0){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(t-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function kPe(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),i=n.node(e);if(t==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(t);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function EPe(){return new Ni({props:{decorations:IPe,createSelectionBetween(n,e,t){return e.pos==t.pos&&hr.valid(t)?new hr(t):null},handleClick:NPe,handleKeyDown:LPe,handleDOMEvents:{beforeinput:TPe}}})}const LPe=lB({ArrowLeft:Nx("horiz",-1),ArrowRight:Nx("horiz",1),ArrowUp:Nx("vert",-1),ArrowDown:Nx("vert",1)});function Nx(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,r,s){let o=i.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Gt){if(!s.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=i.doc.resolve(e>0?a.after():a.before())}let c=hr.findGapCursorFrom(a,e,l);return c?(r&&r(i.tr.setSelection(new hr(c))),!0):!1}}function NPe(n,e,t){if(!n||!n.editable)return!1;let i=n.state.doc.resolve(e);if(!hr.valid(i))return!1;let r=n.posAtCoords({left:t.clientX,top:t.clientY});return r&&r.inside>-1&&$t.isSelectable(n.state.doc.nodeAt(r.inside))?!1:(n.dispatch(n.state.tr.setSelection(new hr(i))),!0)}function TPe(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof hr))return!1;let{$from:t}=n.state.selection,i=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!i)return!1;let r=Ye.empty;for(let o=i.length-1;o>=0;o--)r=Ye.from(i[o].createAndFill(null,r));let s=n.state.tr.replace(t.pos,t.pos,new _t(r,0,0));return s.setSelection(Gt.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function IPe(n){if(!(n.selection instanceof hr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",fi.create(n.doc,[hs.widget(n.selection.head,e,{key:"gapcursor"})])}const DPe=pi.create({name:"gapCursor",addProseMirrorPlugins(){return[EPe()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Pn(Mt(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),MPe=Gi.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Gn(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:i})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:r,storedMarks:s}=t;if(r.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=i.extensionManager,l=s||r.$to.parentOffset&&r.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),RPe=Gi.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Gn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>nP({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var _L=200,vs=function(){};vs.prototype.append=function(e){return e.length?(e=vs.from(e),!this.length&&e||e.length<_L&&this.leafAppend(e)||this.length<_L&&e.leafPrepend(this)||this.appendInner(e)):this};vs.prototype.prepend=function(e){return e.length?vs.from(e).append(this):this};vs.prototype.appendInner=function(e){return new APe(this,e)};vs.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?vs.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};vs.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};vs.prototype.forEach=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)};vs.prototype.map=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(s,o){return r.push(e(s,o))},t,i),r};vs.from=function(e){return e instanceof vs?e:e&&e.length?new hle(e):vs.empty};var hle=function(n){function e(i){n.call(this),this.values=i}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,s){return r==0&&s==this.length?this:new e(this.values.slice(r,s))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,s,o,a){for(var l=s;l<o;l++)if(r(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,a){for(var l=s-1;l>=o;l--)if(r(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=_L)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=_L)return new e(r.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(vs);vs.empty=new hle([]);var APe=function(n){function e(t,i){n.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,r,s,o){var a=this.left.length;if(r<a&&this.left.forEachInner(i,r,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(i,Math.max(r-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,r,s,o){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(i,r-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(i,Math.min(r,a),s,o)===!1)return!1},e.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var s=this.left.length;return r<=s?this.left.slice(i,r):i>=s?this.right.slice(i-s,r-s):this.left.slice(i,s).append(this.right.slice(0,r-s))},e.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new e(r,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(vs);const OPe=500;class Jl{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,s;t&&(r=this.remapping(i,this.items.length),s=r.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){r||(r=this.remapping(i,h+1),s=r.maps.length),s--,u.push(d);return}if(r){u.push(new zc(d.map));let f=d.step.map(r.slice(s)),g;f&&o.maybeStep(f).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],c.push(new zc(g,void 0,void 0,c.length+u.length))),s--,g&&r.appendMap(g,s)}else o.maybeStep(d.step);if(d.selection)return a=r?d.selection.map(r.slice(s)):d.selection,l=new Jl(this.items.slice(0,i).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,i,r){let s=[],o=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new zc(e.mapping.maps[u],d,t),f;(f=l&&l.merge(h))&&(h=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),t&&(o++,t=void 0),r||(l=h)}let c=o-i.depth;return c>FPe&&(a=PPe(a,c),o-=c),new Jl(a.append(s),o)}remapping(e,t){let i=new S0;return this.items.forEach((r,s)=>{let o=r.mirrorOffset!=null&&s-r.mirrorOffset>=e?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,o)},e,t),i}addMaps(e){return this.eventCount==0?this:new Jl(this.items.append(e.map(t=>new zc(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},r);let l=t;this.items.forEach(h=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let g=s.maps[f];if(h.step){let p=e.steps[f].invert(e.docs[f]),v=h.selection&&h.selection.map(s.slice(l+1,f));v&&a++,i.push(new zc(g,p,v))}else i.push(new zc(g))},r);let c=[];for(let h=t;h<o;h++)c.push(new zc(s.maps[h]));let u=this.items.slice(0,r).append(c).append(i),d=new Jl(u,a);return d.emptyItemCount()>OPe&&(d=d.compress(this.items.length-i.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),i=t.maps.length,r=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)r.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(t.slice(i)),c=l&&l.getMap();if(i--,c&&t.appendMap(c,i),l){let u=o.selection&&o.selection.map(t.slice(i));u&&s++;let d=new zc(c.invert(),l,u),h,f=r.length-1;(h=r.length&&r[f].merge(d))?r[f]=h:r.push(d)}}else o.map&&i--},this.items.length,0),new Jl(vs.from(r.reverse()),s)}}Jl.empty=new Jl(vs.empty,0);function PPe(n,e){let t;return n.forEach((i,r)=>{if(i.selection&&e--==0)return t=r,!1}),n.slice(t)}class zc{constructor(e,t,i,r){this.map=e,this.step=t,this.selection=i,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new zc(t.getMap().invert(),t,this.selection)}}}class vh{constructor(e,t,i,r,s){this.done=e,this.undone=t,this.prevRanges=i,this.prevTime=r,this.prevComposition=s}}const FPe=20;function BPe(n,e,t,i){let r=t.getMeta(up),s;if(r)return r.historyState;t.getMeta(zPe)&&(n=new vh(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(up))return o.getMeta(up).redo?new vh(n.done.addTransform(t,void 0,i,dE(e)),n.undone,dq(t.mapping.maps),n.prevTime,n.prevComposition):new vh(n.done,n.undone.addTransform(t,void 0,i,dE(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-i.newGroupDelay||!HPe(t,n.prevRanges)),c=o?lR(n.prevRanges,t.mapping):dq(t.mapping.maps);return new vh(n.done.addTransform(t,l?e.selection.getBookmark():void 0,i,dE(e)),Jl.empty,c,t.time,a??n.prevComposition)}else return(s=t.getMeta("rebased"))?new vh(n.done.rebased(t,s),n.undone.rebased(t,s),lR(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new vh(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),lR(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function HPe(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((i,r)=>{for(let s=0;s<e.length;s+=2)i<=e[s+1]&&r>=e[s]&&(t=!0)}),t}function dq(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((i,r,s,o)=>e.push(s,o));return e}function lR(n,e){if(!n)return null;let t=[];for(let i=0;i<n.length;i+=2){let r=e.map(n[i],1),s=e.map(n[i+1],-1);r<=s&&t.push(r,s)}return t}function VPe(n,e,t){let i=dE(e),r=up.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,i);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),r,i),l=new vh(t?a:s.remaining,t?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(up,{redo:t,historyState:l})}let cR=!1,hq=null;function dE(n){let e=n.plugins;if(hq!=e){cR=!1,hq=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){cR=!0;break}}return cR}const up=new zi("history"),zPe=new zi("closeHistory");function WPe(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Ni({key:up,state:{init(){return new vh(Jl.empty,Jl.empty,null,0,-1)},apply(e,t,i){return BPe(t,i,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let i=t.inputType,r=i=="historyUndo"?gle:i=="historyRedo"?ple:null;return r?(t.preventDefault(),r(e.state,e.dispatch)):!1}}}})}function fle(n,e){return(t,i)=>{let r=up.getState(t);if(!r||(n?r.undone:r.done).eventCount==0)return!1;if(i){let s=VPe(r,t,n);s&&i(e?s.scrollIntoView():s)}return!0}}const gle=fle(!1,!0),ple=fle(!0,!0),$Pe=pi.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>gle(n,e),redo:()=>({state:n,dispatch:e})=>ple(n,e)}},addProseMirrorPlugins(){return[WPe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),UPe=Gi.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Gn(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:i,$to:r}=t,s=n();return i.parentOffset===0?s.insertContentAt({from:Math.max(i.pos-1,0),to:r.pos},{type:this.name}):Cae(t)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Gt.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection($t.create(o.doc,c.pos)):o.setSelection(Gt.create(o.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(u,d),o.setSelection(Gt.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[pB({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),jPe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,KPe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,qPe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,GPe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,YPe=ha.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[jp({find:jPe,type:this.type}),jp({find:qPe,type:this.type})]},addPasteRules(){return[xf({find:KPe,type:this.type}),xf({find:GPe,type:this.type})]}}),fq=/^(\d+)\.\s$/,ZPe=Gi.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Gn(this.options.HTMLAttributes,t),0]:["ol",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(RB.name,this.editor.getAttributes(Fy.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=m1({find:fq,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=m1({find:fq,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Fy.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),XPe=Gi.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),QPe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,JPe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,e5e=ha.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Gn(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[jp({find:QPe,type:this.type})]},addPasteRules(){return[xf({find:JPe,type:this.type})]}}),t5e=Gi.create({name:"text",group:"inline"}),qe="at",dp="#060619",gq=500,yP=798,n5e=["#FFFFFF","#212733","#3355FF","#F5403D","#00BEBE","#66FF00","#34B234","#FF9500","#FF7029","#A061F2","#4B34B2","#BB00BE","#3471B2","#B6B6B5","#FFFF00","#7030A0","#FFBC57","#C00000","#FD74BF","#00B0F0","#F5DC3D","#72DDE1","#8867B3"],mle=["#FFFFFF","#212733","#CDDBFF","#FDD4CD","#BFF5EF","#D0FFB1","#D8F7D3","#FFEEC5","#FFE8D5","#E8D6FF","#FFD4F9","#E8FFC5","#CAFDFF","#C9E3FF","#E1E1E1","#FFFAD8","#FFF0D9","#FFDAEE","#F0F0F0","#D3DFCC","#DFDAF3","#E1EFF0","#EEE1E9"],i5e=[["#91caff","#e6f4ff"],["#87e8de","#e6fffb"],["#b7eb8f","#f6ffed"],["#ffe58f","#fffbe6"],["#ffd591","#fff7e6"],["#ffa39e","#fff1f0"],["#d3adf7","#f9f0ff"]],r5e=["12px","14px","16px","18px","20px","24px","28px","32px","36px"],s5e={html:"HTML",css:"CSS",javascript:"JavaScript",typescript:"TypeScript",bash:"Bash",csharp:"C#",cpp:"C++",c:"C",dart:"Dart",diff:"Diff",dockerfile:"Dockerfile",go:"Go",graphql:"GraphQl",http:"HTTP",json:"JSON",java:"Java",kotlin:"Kotlin",lua:"Lua",markdown:"Markdown",nginx:"Nginx",objectivec:"Objective-C",php:"PHP",powershell:"PowerShell",python:"Python",ruby:"Ruby",rust:"Rust",scss:"SCSS",less:"Less",sql:"SQL",shell:"Shell",swift:"Swift",xml:"XML",yaml:"YAML"},o5e=(n,e,t)=>RegExp(e?n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):n,t?"gu":"gui");function a5e(n,e,t,i){const r=[],s=[];let o=[],a=0;if(!e)return{decorationsToReturn:fi.empty,results:[]};n==null||n.descendants((l,c)=>{l.isText?o[a]?o[a]={text:o[a].text+l.text,pos:o[a].pos}:o[a]={text:`${l.text}`,pos:c}:a+=1}),o=o.filter(Boolean);for(const l of o){const{text:c,pos:u}=l,d=Array.from(c.matchAll(e)).filter(([h])=>h.trim());for(const h of d){if(h[0]==="")break;h.index!==void 0&&s.push({from:u+h.index,to:u+h.index+h[0].length})}}for(let l=0;l<s.length;l+=1){const c=s[l],u=l===i?`${t} ${t}-current`:t,d=hs.inline(c.from,c.to,{class:u});r.push(d)}return{decorationsToReturn:fi.create(n,r),results:s}}const l5e=(n,e,{state:t,dispatch:i})=>{if(!e[0])return;const{from:s,to:o}=e[0];i&&i(t.tr.insertText(n,s,o))},c5e=(n,e,t,i)=>{const r=e+1;if(!i[r])return null;const{from:s,to:o}=i[e],a=o-s-n.length+t,{from:l,to:c}=i[r];return i[r]={to:c-a,from:l-a},[a,i]},u5e=(n,e,{tr:t,dispatch:i})=>{let r=0,s=e.slice();if(s.length){for(let o=0;o<s.length;o+=1){const{from:a,to:l}=s[o];t.insertText(n,a,l);const c=c5e(n,o,r,s);c&&(r=c[0],s=c[1])}i(t)}},d5e=new zi("searchAndReplacePlugin"),h5e=pi.create({name:"searchAndReplace",addOptions(){return{searchResultClass:"search-result",disableRegex:!0}},addStorage(){return{searchTerm:"",replaceTerm:"",results:[],lastSearchTerm:"",caseSensitive:!1,lastCaseSensitive:!1,resultIndex:0,lastResultIndex:0}},addCommands(){return{setSearchTerm:n=>({editor:e})=>(e.storage.searchAndReplace.searchTerm=n,!1),setReplaceTerm:n=>({editor:e})=>(e.storage.searchAndReplace.replaceTerm=n,!1),setCaseSensitive:n=>({editor:e})=>(e.storage.searchAndReplace.caseSensitive=n,!1),resetIndex:()=>({editor:n})=>(n.storage.searchAndReplace.resultIndex=0,!1),nextSearchResult:()=>({editor:n})=>{const{results:e,resultIndex:t}=n.storage.searchAndReplace,i=t+1;return e[i]?n.storage.searchAndReplace.resultIndex=i:n.storage.searchAndReplace.resultIndex=0,!1},previousSearchResult:()=>({editor:n})=>{const{results:e,resultIndex:t}=n.storage.searchAndReplace,i=t-1;return e[i]?n.storage.searchAndReplace.resultIndex=i:n.storage.searchAndReplace.resultIndex=e.length-1,!1},replace:()=>({editor:n,state:e,dispatch:t})=>{const{replaceTerm:i,results:r}=n.storage.searchAndReplace;return l5e(i,r,{state:e,dispatch:t}),!1},replaceAll:()=>({editor:n,tr:e,dispatch:t})=>{const{replaceTerm:i,results:r}=n.storage.searchAndReplace;return u5e(i,r,{tr:e,dispatch:t}),!1}}},addProseMirrorPlugins(){const{editor:n}=this,{searchResultClass:e,disableRegex:t}=this.options,i=o=>n.storage.searchAndReplace.lastSearchTerm=o,r=o=>n.storage.searchAndReplace.lastCaseSensitive=o,s=o=>n.storage.searchAndReplace.lastResultIndex=o;return[new Ni({key:d5e,state:{init:()=>fi.empty,apply({doc:o,docChanged:a},l){const{searchTerm:c,lastSearchTerm:u,caseSensitive:d,lastCaseSensitive:h,resultIndex:f,lastResultIndex:g}=n.storage.searchAndReplace;if(!a&&u===c&&h===d&&g===f)return l;if(i(c),r(d),s(f),!c)return n.storage.searchAndReplace.results=[],fi.empty;const{decorationsToReturn:p,results:v}=a5e(o,o5e(c,t,d),e,f);return n.storage.searchAndReplace.results=v,p}},props:{decorations(o){return this.getState(o)}}})]}}),f5e=/^```([a-z]+)?[\s\n]$/,g5e=/^~~~([a-z]+)?[\s\n]$/,p5e=Gi.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Gn(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:i,empty:r}=t;if(!r||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2,o=i.parent.textContent.endsWith(`

`);return!s||!o?!1:n.chain().command(({tr:a})=>(a.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:i}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type||!(r.parentOffset===r.parent.nodeSize-2))return!1;const a=r.after();return a===void 0?!1:i.nodeAt(a)?n.commands.command(({tr:c})=>(c.setSelection(tn.near(i.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[nP({find:f5e,type:this.type,getAttributes:n=>({language:n[1]})}),nP({find:g5e,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Ni({key:new zi("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),i=e.clipboardData.getData("vscode-editor-data"),r=i?JSON.parse(i):void 0,s=r==null?void 0:r.mode;if(!t||!s)return!1;const{tr:o,schema:a}=n.state,l=a.text(t.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Gt.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}});function m5e(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function vle(n){return n instanceof Map?n.clear=n.delete=n.set=function(){throw new Error("map is read-only")}:n instanceof Set&&(n.add=n.clear=n.delete=function(){throw new Error("set is read-only")}),Object.freeze(n),Object.getOwnPropertyNames(n).forEach(e=>{const t=n[e],i=typeof t;(i==="object"||i==="function")&&!Object.isFrozen(t)&&vle(t)}),n}let pq=class{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function ble(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function $h(n,...e){const t=Object.create(null);for(const i in n)t[i]=n[i];return e.forEach(function(i){for(const r in i)t[r]=i[r]}),t}const v5e="</span>",mq=n=>!!n.scope,b5e=(n,{prefix:e})=>{if(n.startsWith("language:"))return n.replace("language:","language-");if(n.includes(".")){const t=n.split(".");return[`${e}${t.shift()}`,...t.map((i,r)=>`${i}${"_".repeat(r+1)}`)].join(" ")}return`${e}${n}`};let _5e=class{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=ble(e)}openNode(e){if(!mq(e))return;const t=b5e(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){mq(e)&&(this.buffer+=v5e)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}};const vq=(n={})=>{const e={children:[]};return Object.assign(e,n),e};let C5e=class _le{constructor(){this.rootNode=vq(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=vq({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return typeof t=="string"?e.addText(t):t.children&&(e.openNode(t),t.children.forEach(i=>this._walk(e,i)),e.closeNode(t)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(t=>typeof t=="string")?e.children=[e.children.join("")]:e.children.forEach(t=>{_le._collapse(t)}))}},y5e=class extends C5e{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){const i=e.root;t&&(i.scope=`language:${t}`),this.add(i)}toHTML(){return new _5e(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}};function zy(n){return n?typeof n=="string"?n:n.source:null}function Cle(n){return dm("(?=",n,")")}function w5e(n){return dm("(?:",n,")*")}function S5e(n){return dm("(?:",n,")?")}function dm(...n){return n.map(t=>zy(t)).join("")}function x5e(n){const e=n[n.length-1];return typeof e=="object"&&e.constructor===Object?(n.splice(n.length-1,1),e):{}}function OB(...n){return"("+(x5e(n).capture?"":"?:")+n.map(i=>zy(i)).join("|")+")"}function yle(n){return new RegExp(n.toString()+"|").exec("").length-1}function k5e(n,e){const t=n&&n.exec(e);return t&&t.index===0}const E5e=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function PB(n,{joinWith:e}){let t=0;return n.map(i=>{t+=1;const r=t;let s=zy(i),o="";for(;s.length>0;){const a=E5e.exec(s);if(!a){o+=s;break}o+=s.substring(0,a.index),s=s.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?o+="\\"+String(Number(a[1])+r):(o+=a[0],a[0]==="("&&t++)}return o}).map(i=>`(${i})`).join(e)}const L5e=/\b\B/,wle="[a-zA-Z]\\w*",FB="[a-zA-Z_]\\w*",Sle="\\b\\d+(\\.\\d+)?",xle="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",kle="\\b(0b[01]+)",N5e="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",T5e=(n={})=>{const e=/^#![ ]*\//;return n.binary&&(n.begin=dm(e,/.*\b/,n.binary,/\b.*/)),$h({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,i)=>{t.index!==0&&i.ignoreMatch()}},n)},Wy={begin:"\\\\[\\s\\S]",relevance:0},I5e={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Wy]},D5e={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Wy]},M5e={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},yD=function(n,e,t={}){const i=$h({scope:"comment",begin:n,end:e,contains:[]},t);i.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const r=OB("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return i.contains.push({begin:dm(/[ ]+/,"(",r,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),i},R5e=yD("//","$"),A5e=yD("/\\*","\\*/"),O5e=yD("#","$"),P5e={scope:"number",begin:Sle,relevance:0},F5e={scope:"number",begin:xle,relevance:0},B5e={scope:"number",begin:kle,relevance:0},H5e={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Wy,{begin:/\[/,end:/\]/,relevance:0,contains:[Wy]}]},V5e={scope:"title",begin:wle,relevance:0},z5e={scope:"title",begin:FB,relevance:0},W5e={begin:"\\.\\s*"+FB,relevance:0},$5e=function(n){return Object.assign(n,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})};var Tx=Object.freeze({__proto__:null,APOS_STRING_MODE:I5e,BACKSLASH_ESCAPE:Wy,BINARY_NUMBER_MODE:B5e,BINARY_NUMBER_RE:kle,COMMENT:yD,C_BLOCK_COMMENT_MODE:A5e,C_LINE_COMMENT_MODE:R5e,C_NUMBER_MODE:F5e,C_NUMBER_RE:xle,END_SAME_AS_BEGIN:$5e,HASH_COMMENT_MODE:O5e,IDENT_RE:wle,MATCH_NOTHING_RE:L5e,METHOD_GUARD:W5e,NUMBER_MODE:P5e,NUMBER_RE:Sle,PHRASAL_WORDS_MODE:M5e,QUOTE_STRING_MODE:D5e,REGEXP_MODE:H5e,RE_STARTERS_RE:N5e,SHEBANG:T5e,TITLE_MODE:V5e,UNDERSCORE_IDENT_RE:FB,UNDERSCORE_TITLE_MODE:z5e});function U5e(n,e){n.input[n.index-1]==="."&&e.ignoreMatch()}function j5e(n,e){n.className!==void 0&&(n.scope=n.className,delete n.className)}function K5e(n,e){e&&n.beginKeywords&&(n.begin="\\b("+n.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",n.__beforeBegin=U5e,n.keywords=n.keywords||n.beginKeywords,delete n.beginKeywords,n.relevance===void 0&&(n.relevance=0))}function q5e(n,e){Array.isArray(n.illegal)&&(n.illegal=OB(...n.illegal))}function G5e(n,e){if(n.match){if(n.begin||n.end)throw new Error("begin & end are not supported with match");n.begin=n.match,delete n.match}}function Y5e(n,e){n.relevance===void 0&&(n.relevance=1)}const Z5e=(n,e)=>{if(!n.beforeMatch)return;if(n.starts)throw new Error("beforeMatch cannot be used with starts");const t=Object.assign({},n);Object.keys(n).forEach(i=>{delete n[i]}),n.keywords=t.keywords,n.begin=dm(t.beforeMatch,Cle(t.begin)),n.starts={relevance:0,contains:[Object.assign(t,{endsParent:!0})]},n.relevance=0,delete t.beforeMatch},X5e=["of","and","for","in","not","or","if","then","parent","list","value"],Q5e="keyword";function Ele(n,e,t=Q5e){const i=Object.create(null);return typeof n=="string"?r(t,n.split(" ")):Array.isArray(n)?r(t,n):Object.keys(n).forEach(function(s){Object.assign(i,Ele(n[s],e,s))}),i;function r(s,o){e&&(o=o.map(a=>a.toLowerCase())),o.forEach(function(a){const l=a.split("|");i[l[0]]=[s,J5e(l[0],l[1])]})}}function J5e(n,e){return e?Number(e):e8e(n)?0:1}function e8e(n){return X5e.includes(n.toLowerCase())}const bq={},hp=n=>{console.error(n)},_q=(n,...e)=>{console.log(`WARN: ${n}`,...e)},Wm=(n,e)=>{bq[`${n}/${e}`]||(console.log(`Deprecated as of ${n}. ${e}`),bq[`${n}/${e}`]=!0)},CL=new Error;function Lle(n,e,{key:t}){let i=0;const r=n[t],s={},o={};for(let a=1;a<=e.length;a++)o[a+i]=r[a],s[a+i]=!0,i+=yle(e[a-1]);n[t]=o,n[t]._emit=s,n[t]._multi=!0}function t8e(n){if(Array.isArray(n.begin)){if(n.skip||n.excludeBegin||n.returnBegin)throw hp("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),CL;if(typeof n.beginScope!="object"||n.beginScope===null)throw hp("beginScope must be object"),CL;Lle(n,n.begin,{key:"beginScope"}),n.begin=PB(n.begin,{joinWith:""})}}function n8e(n){if(Array.isArray(n.end)){if(n.skip||n.excludeEnd||n.returnEnd)throw hp("skip, excludeEnd, returnEnd not compatible with endScope: {}"),CL;if(typeof n.endScope!="object"||n.endScope===null)throw hp("endScope must be object"),CL;Lle(n,n.end,{key:"endScope"}),n.end=PB(n.end,{joinWith:""})}}function i8e(n){n.scope&&typeof n.scope=="object"&&n.scope!==null&&(n.beginScope=n.scope,delete n.scope)}function r8e(n){i8e(n),typeof n.beginScope=="string"&&(n.beginScope={_wrap:n.beginScope}),typeof n.endScope=="string"&&(n.endScope={_wrap:n.endScope}),t8e(n),n8e(n)}function s8e(n){function e(o,a){return new RegExp(zy(o),"m"+(n.case_insensitive?"i":"")+(n.unicodeRegex?"u":"")+(a?"g":""))}class t{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,a]),this.matchAt+=yle(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const a=this.regexes.map(l=>l[1]);this.matcherRe=e(PB(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(a);if(!l)return null;const c=l.findIndex((d,h)=>h>0&&d!==void 0),u=this.matchIndexes[c];return l.splice(0,c),Object.assign(l,u)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];const l=new t;return this.rules.slice(a).forEach(([c,u])=>l.addRule(c,u)),l.compile(),this.multiRegexes[a]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,l){this.rules.push([a,l]),l.type==="begin"&&this.count++}exec(a){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let c=l.exec(a);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,c=u.exec(a)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function r(o){const a=new i;return o.contains.forEach(l=>a.addRule(l.begin,{rule:l,type:"begin"})),o.terminatorEnd&&a.addRule(o.terminatorEnd,{type:"end"}),o.illegal&&a.addRule(o.illegal,{type:"illegal"}),a}function s(o,a){const l=o;if(o.isCompiled)return l;[j5e,G5e,r8e,Z5e].forEach(u=>u(o,a)),n.compilerExtensions.forEach(u=>u(o,a)),o.__beforeBegin=null,[K5e,q5e,Y5e].forEach(u=>u(o,a)),o.isCompiled=!0;let c=null;return typeof o.keywords=="object"&&o.keywords.$pattern&&(o.keywords=Object.assign({},o.keywords),c=o.keywords.$pattern,delete o.keywords.$pattern),c=c||/\w+/,o.keywords&&(o.keywords=Ele(o.keywords,n.case_insensitive)),l.keywordPatternRe=e(c,!0),a&&(o.begin||(o.begin=/\B|\b/),l.beginRe=e(l.begin),!o.end&&!o.endsWithParent&&(o.end=/\B|\b/),o.end&&(l.endRe=e(l.end)),l.terminatorEnd=zy(l.end)||"",o.endsWithParent&&a.terminatorEnd&&(l.terminatorEnd+=(o.end?"|":"")+a.terminatorEnd)),o.illegal&&(l.illegalRe=e(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map(function(u){return o8e(u==="self"?o:u)})),o.contains.forEach(function(u){s(u,l)}),o.starts&&s(o.starts,a),l.matcher=r(l),l}if(n.compilerExtensions||(n.compilerExtensions=[]),n.contains&&n.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return n.classNameAliases=$h(n.classNameAliases||{}),s(n)}function Nle(n){return n?n.endsWithParent||Nle(n.starts):!1}function o8e(n){return n.variants&&!n.cachedVariants&&(n.cachedVariants=n.variants.map(function(e){return $h(n,{variants:null},e)})),n.cachedVariants?n.cachedVariants:Nle(n)?$h(n,{starts:n.starts?$h(n.starts):null}):Object.isFrozen(n)?$h(n):n}var a8e="11.10.0";let l8e=class extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}};const uR=ble,Cq=$h,yq=Symbol("nomatch"),c8e=7,Tle=function(n){const e=Object.create(null),t=Object.create(null),i=[];let r=!0;const s="Could not find the language '{}', did you forget to load/include a language module?",o={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:y5e};function l(T){return a.noHighlightRe.test(T)}function c(T){let N=T.className+" ";N+=T.parentNode?T.parentNode.className:"";const B=a.languageDetectRe.exec(N);if(B){const $=L(B[1]);return $||(_q(s.replace("{}",B[1])),_q("Falling back to no-highlight mode for this block.",T)),$?B[1]:"no-highlight"}return N.split(/\s+/).find($=>l($)||L($))}function u(T,N,B){let $="",j="";typeof N=="object"?($=T,B=N.ignoreIllegals,j=N.language):(Wm("10.7.0","highlight(lang, code, ...args) has been deprecated."),Wm("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),j=T,$=N),B===void 0&&(B=!0);const Y={code:$,language:j};V("before:highlight",Y);const G=Y.result?Y.result:d(Y.language,Y.code,B);return G.code=Y.code,V("after:highlight",G),G}function d(T,N,B,$){const j=Object.create(null);function Y(se,fe){return se.keywords[fe]}function G(){if(!Le.keywords){Oe.addText(xe);return}let se=0;Le.keywordPatternRe.lastIndex=0;let fe=Le.keywordPatternRe.exec(xe),Ne="";for(;fe;){Ne+=xe.substring(se,fe.index);const Ve=Ae.case_insensitive?fe[0].toLowerCase():fe[0],lt=Y(Le,Ve);if(lt){const[Dt,Qt]=lt;if(Oe.addText(Ne),Ne="",j[Ve]=(j[Ve]||0)+1,j[Ve]<=c8e&&(at+=Qt),Dt.startsWith("_"))Ne+=fe[0];else{const he=Ae.classNameAliases[Dt]||Dt;re(fe[0],he)}}else Ne+=fe[0];se=Le.keywordPatternRe.lastIndex,fe=Le.keywordPatternRe.exec(xe)}Ne+=xe.substring(se),Oe.addText(Ne)}function X(){if(xe==="")return;let se=null;if(typeof Le.subLanguage=="string"){if(!e[Le.subLanguage]){Oe.addText(xe);return}se=d(Le.subLanguage,xe,!0,Ge[Le.subLanguage]),Ge[Le.subLanguage]=se._top}else se=f(xe,Le.subLanguage.length?Le.subLanguage:null);Le.relevance>0&&(at+=se.relevance),Oe.__addSublanguage(se._emitter,se.language)}function q(){Le.subLanguage!=null?X():G(),xe=""}function re(se,fe){se!==""&&(Oe.startScope(fe),Oe.addText(se),Oe.endScope())}function ge(se,fe){let Ne=1;const Ve=fe.length-1;for(;Ne<=Ve;){if(!se._emit[Ne]){Ne++;continue}const lt=Ae.classNameAliases[se[Ne]]||se[Ne],Dt=fe[Ne];lt?re(Dt,lt):(xe=Dt,G(),xe=""),Ne++}}function ye(se,fe){return se.scope&&typeof se.scope=="string"&&Oe.openNode(Ae.classNameAliases[se.scope]||se.scope),se.beginScope&&(se.beginScope._wrap?(re(xe,Ae.classNameAliases[se.beginScope._wrap]||se.beginScope._wrap),xe=""):se.beginScope._multi&&(ge(se.beginScope,fe),xe="")),Le=Object.create(se,{parent:{value:Le}}),Le}function we(se,fe,Ne){let Ve=k5e(se.endRe,Ne);if(Ve){if(se["on:end"]){const lt=new pq(se);se["on:end"](fe,lt),lt.isMatchIgnored&&(Ve=!1)}if(Ve){for(;se.endsParent&&se.parent;)se=se.parent;return se}}if(se.endsWithParent)return we(se.parent,fe,Ne)}function Ie(se){return Le.matcher.regexIndex===0?(xe+=se[0],1):(nt=!0,0)}function Fe(se){const fe=se[0],Ne=se.rule,Ve=new pq(Ne),lt=[Ne.__beforeBegin,Ne["on:begin"]];for(const Dt of lt)if(Dt&&(Dt(se,Ve),Ve.isMatchIgnored))return Ie(fe);return Ne.skip?xe+=fe:(Ne.excludeBegin&&(xe+=fe),q(),!Ne.returnBegin&&!Ne.excludeBegin&&(xe=fe)),ye(Ne,se),Ne.returnBegin?0:fe.length}function ze(se){const fe=se[0],Ne=N.substring(se.index),Ve=we(Le,se,Ne);if(!Ve)return yq;const lt=Le;Le.endScope&&Le.endScope._wrap?(q(),re(fe,Le.endScope._wrap)):Le.endScope&&Le.endScope._multi?(q(),ge(Le.endScope,se)):lt.skip?xe+=fe:(lt.returnEnd||lt.excludeEnd||(xe+=fe),q(),lt.excludeEnd&&(xe=fe));do Le.scope&&Oe.closeNode(),!Le.skip&&!Le.subLanguage&&(at+=Le.relevance),Le=Le.parent;while(Le!==Ve.parent);return Ve.starts&&ye(Ve.starts,se),lt.returnEnd?0:fe.length}function Me(){const se=[];for(let fe=Le;fe!==Ae;fe=fe.parent)fe.scope&&se.unshift(fe.scope);se.forEach(fe=>Oe.openNode(fe))}let Pe={};function tt(se,fe){const Ne=fe&&fe[0];if(xe+=se,Ne==null)return q(),0;if(Pe.type==="begin"&&fe.type==="end"&&Pe.index===fe.index&&Ne===""){if(xe+=N.slice(fe.index,fe.index+1),!r){const Ve=new Error(`0 width match regex (${T})`);throw Ve.languageName=T,Ve.badRule=Pe.rule,Ve}return 1}if(Pe=fe,fe.type==="begin")return Fe(fe);if(fe.type==="illegal"&&!B){const Ve=new Error('Illegal lexeme "'+Ne+'" for mode "'+(Le.scope||"<unnamed>")+'"');throw Ve.mode=Le,Ve}else if(fe.type==="end"){const Ve=ze(fe);if(Ve!==yq)return Ve}if(fe.type==="illegal"&&Ne==="")return 1;if(Ct>1e5&&Ct>fe.index*3)throw new Error("potential infinite loop, way more iterations than matches");return xe+=Ne,Ne.length}const Ae=L(T);if(!Ae)throw hp(s.replace("{}",T)),new Error('Unknown language: "'+T+'"');const mt=s8e(Ae);let ft="",Le=$||mt;const Ge={},Oe=new a.__emitter(a);Me();let xe="",at=0,gt=0,Ct=0,nt=!1;try{if(Ae.__emitTokens)Ae.__emitTokens(N,Oe);else{for(Le.matcher.considerAll();;){Ct++,nt?nt=!1:Le.matcher.considerAll(),Le.matcher.lastIndex=gt;const se=Le.matcher.exec(N);if(!se)break;const fe=N.substring(gt,se.index),Ne=tt(fe,se);gt=se.index+Ne}tt(N.substring(gt))}return Oe.finalize(),ft=Oe.toHTML(),{language:T,value:ft,relevance:at,illegal:!1,_emitter:Oe,_top:Le}}catch(se){if(se.message&&se.message.includes("Illegal"))return{language:T,value:uR(N),illegal:!0,relevance:0,_illegalBy:{message:se.message,index:gt,context:N.slice(gt-100,gt+100),mode:se.mode,resultSoFar:ft},_emitter:Oe};if(r)return{language:T,value:uR(N),illegal:!1,relevance:0,errorRaised:se,_emitter:Oe,_top:Le};throw se}}function h(T){const N={value:uR(T),illegal:!1,relevance:0,_top:o,_emitter:new a.__emitter(a)};return N._emitter.addText(T),N}function f(T,N){N=N||a.languages||Object.keys(e);const B=h(T),$=N.filter(L).filter(D).map(q=>d(q,T,!1));$.unshift(B);const j=$.sort((q,re)=>{if(q.relevance!==re.relevance)return re.relevance-q.relevance;if(q.language&&re.language){if(L(q.language).supersetOf===re.language)return 1;if(L(re.language).supersetOf===q.language)return-1}return 0}),[Y,G]=j,X=Y;return X.secondBest=G,X}function g(T,N,B){const $=N&&t[N]||B;T.classList.add("hljs"),T.classList.add(`language-${$}`)}function p(T){let N=null;const B=c(T);if(l(B))return;if(V("before:highlightElement",{el:T,language:B}),T.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",T);return}if(T.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(T)),a.throwUnescapedHTML))throw new l8e("One of your code blocks includes unescaped HTML.",T.innerHTML);N=T;const $=N.textContent,j=B?u($,{language:B,ignoreIllegals:!0}):f($);T.innerHTML=j.value,T.dataset.highlighted="yes",g(T,B,j.language),T.result={language:j.language,re:j.relevance,relevance:j.relevance},j.secondBest&&(T.secondBest={language:j.secondBest.language,relevance:j.secondBest.relevance}),V("after:highlightElement",{el:T,result:j,text:$})}function v(T){a=Cq(a,T)}const b=()=>{C(),Wm("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function _(){C(),Wm("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let y=!1;function C(){if(document.readyState==="loading"){y=!0;return}document.querySelectorAll(a.cssSelector).forEach(p)}function w(){y&&C()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",w,!1);function x(T,N){let B=null;try{B=N(n)}catch($){if(hp("Language definition for '{}' could not be registered.".replace("{}",T)),r)hp($);else throw $;B=o}B.name||(B.name=T),e[T]=B,B.rawDefinition=N.bind(null,n),B.aliases&&M(B.aliases,{languageName:T})}function k(T){delete e[T];for(const N of Object.keys(t))t[N]===T&&delete t[N]}function E(){return Object.keys(e)}function L(T){return T=(T||"").toLowerCase(),e[T]||e[t[T]]}function M(T,{languageName:N}){typeof T=="string"&&(T=[T]),T.forEach(B=>{t[B.toLowerCase()]=N})}function D(T){const N=L(T);return N&&!N.disableAutodetect}function O(T){T["before:highlightBlock"]&&!T["before:highlightElement"]&&(T["before:highlightElement"]=N=>{T["before:highlightBlock"](Object.assign({block:N.el},N))}),T["after:highlightBlock"]&&!T["after:highlightElement"]&&(T["after:highlightElement"]=N=>{T["after:highlightBlock"](Object.assign({block:N.el},N))})}function A(T){O(T),i.push(T)}function R(T){const N=i.indexOf(T);N!==-1&&i.splice(N,1)}function V(T,N){const B=T;i.forEach(function($){$[B]&&$[B](N)})}function F(T){return Wm("10.7.0","highlightBlock will be removed entirely in v12.0"),Wm("10.7.0","Please use highlightElement now."),p(T)}Object.assign(n,{highlight:u,highlightAuto:f,highlightAll:C,highlightElement:p,highlightBlock:F,configure:v,initHighlighting:b,initHighlightingOnLoad:_,registerLanguage:x,unregisterLanguage:k,listLanguages:E,getLanguage:L,registerAliases:M,autoDetection:D,inherit:Cq,addPlugin:A,removePlugin:R}),n.debugMode=function(){r=!1},n.safeMode=function(){r=!0},n.versionString=a8e,n.regex={concat:dm,lookahead:Cle,either:OB,optional:S5e,anyNumberOfTimes:w5e};for(const T in Tx)typeof Tx[T]=="object"&&vle(Tx[T]);return Object.assign(n,Tx),n},w1=Tle({});w1.newInstance=()=>Tle({});var u8e=w1;w1.HighlightJS=w1;w1.default=w1;var d8e=m5e(u8e);function Ile(n,e=[]){return n.map(t=>{const i=[...e,...t.properties?t.properties.className:[]];return t.children?Ile(t.children,i):{text:t.value,classes:i}}).flat()}function wq(n){return n.value||n.children||[]}function h8e(n){return!!d8e.getLanguage(n)}function Sq({doc:n,name:e,lowlight:t,defaultLanguage:i}){const r=[];return eP(n,s=>s.type.name===e).forEach(s=>{var o;let a=s.pos+1;const l=s.node.attrs.language||i,c=t.listLanguages(),u=l&&(c.includes(l)||h8e(l)||!((o=t.registered)===null||o===void 0)&&o.call(t,l))?wq(t.highlight(l,s.node.textContent)):wq(t.highlightAuto(s.node.textContent));Ile(u).forEach(d=>{const h=a+d.text.length;if(d.classes.length){const f=hs.inline(a,h,{class:d.classes.join(" ")});r.push(f)}a=h})}),fi.create(n,r)}function f8e(n){return typeof n=="function"}function g8e({name:n,lowlight:e,defaultLanguage:t}){if(!["highlight","highlightAuto","listLanguages"].every(r=>f8e(e[r])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const i=new Ni({key:new zi("lowlight"),state:{init:(r,{doc:s})=>Sq({doc:s,name:n,lowlight:e,defaultLanguage:t}),apply:(r,s,o,a)=>{const l=o.selection.$head.parent.type.name,c=a.selection.$head.parent.type.name,u=eP(o.doc,h=>h.type.name===n),d=eP(a.doc,h=>h.type.name===n);return r.docChanged&&([l,c].includes(n)||d.length!==u.length||r.steps.some(h=>h.from!==void 0&&h.to!==void 0&&u.some(f=>f.pos>=h.from&&f.pos+f.node.nodeSize<=h.to)))?Sq({doc:r.doc,name:n,lowlight:e,defaultLanguage:t}):s.map(r.mapping,r.doc)}},props:{decorations(r){return i.getState(r)}}});return i}const p8e=p5e.extend({addOptions(){var n;return{...(n=this.parent)===null||n===void 0?void 0:n.call(this),lowlight:{}}},addProseMirrorPlugins(){var n;return[...((n=this.parent)===null||n===void 0?void 0:n.call(this))||[],g8e({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),m8e=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),v8e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],b8e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],_8e=[...v8e,...b8e],C8e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),y8e=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),w8e=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),S8e=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function x8e(n){const e=n.regex,t=m8e(n),i={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},r="and or not only",s=/@-?\w[\w]*(-\w+)*/,o="[a-zA-Z-][a-zA-Z0-9_-]*",a=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,i,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+o,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+y8e.join("|")+")"},{begin:":(:)?("+w8e.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+S8e.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...a,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...a,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:r,attribute:C8e.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...a,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+_8e.join("|")+")\\b"}]}}const xq="[A-Za-z$_][0-9A-Za-z$_]*",k8e=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],E8e=["true","false","null","undefined","NaN","Infinity"],Dle=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Mle=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Rle=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],L8e=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],N8e=[].concat(Rle,Dle,Mle);function T8e(n){const e=n.regex,t=(N,{after:B})=>{const $="</"+N[0].slice(1);return N.input.indexOf($,B)!==-1},i=xq,r={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(N,B)=>{const $=N[0].length+N.index,j=N.input[$];if(j==="<"||j===","){B.ignoreMatch();return}j===">"&&(t(N,{after:$})||B.ignoreMatch());let Y;const G=N.input.substring($);if(Y=G.match(/^\s*=/)){B.ignoreMatch();return}if((Y=G.match(/^\s+extends\s+/))&&Y.index===0){B.ignoreMatch();return}}},a={$pattern:xq,keyword:k8e,literal:E8e,built_in:N8e,"variable.language":L8e},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},f={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},g={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,h],subLanguage:"css"}},p={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,h]},_={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:i+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},y=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,f,g,p,v,{match:/\$\d+/},d];h.contains=y.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(y)});const C=[].concat(_,h.contains),w=C.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(C)}]),x={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:w},k={variants:[{match:[/class/,/\s+/,i,/\s+/,/extends/,/\s+/,e.concat(i,"(",e.concat(/\./,i),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,i],scope:{1:"keyword",3:"title.class"}}]},E={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Dle,...Mle]}},L={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},M={variants:[{match:[/function/,/\s+/,i,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[x],illegal:/%/},D={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function O(N){return e.concat("(?!",N.join("|"),")")}const A={match:e.concat(/\b/,O([...Rle,"super","import"].map(N=>`${N}\\s*\\(`)),i,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},R={begin:e.concat(/\./,e.lookahead(e.concat(i,/(?![0-9A-Za-z$_(])/))),end:i,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},V={match:[/get|set/,/\s+/,i,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},x]},F="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",T={match:[/const|var|let/,/\s+/,i,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(F)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[x]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:w,CLASS_REFERENCE:E},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),L,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,f,g,p,v,_,{match:/\$\d+/},d,E,{className:"attr",begin:i+e.lookahead(":"),relevance:0},T,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[_,n.REGEXP_MODE,{className:"function",begin:F,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:w}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r.begin,end:r.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},M,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[x,n.inherit(n.TITLE_MODE,{begin:i,className:"title.function"})]},{match:/\.\.\./,relevance:0},R,{match:"\\$"+i,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[x]},A,D,k,V,{match:/\$[(.]/}]}}const yL="[A-Za-z$_][0-9A-Za-z$_]*",Ale=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],Ole=["true","false","null","undefined","NaN","Infinity"],Ple=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Fle=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Ble=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Hle=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],Vle=[].concat(Ble,Ple,Fle);function I8e(n){const e=n.regex,t=(N,{after:B})=>{const $="</"+N[0].slice(1);return N.input.indexOf($,B)!==-1},i=yL,r={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(N,B)=>{const $=N[0].length+N.index,j=N.input[$];if(j==="<"||j===","){B.ignoreMatch();return}j===">"&&(t(N,{after:$})||B.ignoreMatch());let Y;const G=N.input.substring($);if(Y=G.match(/^\s*=/)){B.ignoreMatch();return}if((Y=G.match(/^\s+extends\s+/))&&Y.index===0){B.ignoreMatch();return}}},a={$pattern:yL,keyword:Ale,literal:Ole,built_in:Vle,"variable.language":Hle},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},f={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},g={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,h],subLanguage:"css"}},p={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,h]},_={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:i+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},y=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,f,g,p,v,{match:/\$\d+/},d];h.contains=y.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(y)});const C=[].concat(_,h.contains),w=C.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(C)}]),x={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:w},k={variants:[{match:[/class/,/\s+/,i,/\s+/,/extends/,/\s+/,e.concat(i,"(",e.concat(/\./,i),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,i],scope:{1:"keyword",3:"title.class"}}]},E={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Ple,...Fle]}},L={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},M={variants:[{match:[/function/,/\s+/,i,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[x],illegal:/%/},D={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function O(N){return e.concat("(?!",N.join("|"),")")}const A={match:e.concat(/\b/,O([...Ble,"super","import"].map(N=>`${N}\\s*\\(`)),i,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},R={begin:e.concat(/\./,e.lookahead(e.concat(i,/(?![0-9A-Za-z$_(])/))),end:i,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},V={match:[/get|set/,/\s+/,i,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},x]},F="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",T={match:[/const|var|let/,/\s+/,i,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(F)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[x]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:w,CLASS_REFERENCE:E},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),L,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,f,g,p,v,_,{match:/\$\d+/},d,E,{className:"attr",begin:i+e.lookahead(":"),relevance:0},T,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[_,n.REGEXP_MODE,{className:"function",begin:F,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:w}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r.begin,end:r.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},M,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[x,n.inherit(n.TITLE_MODE,{begin:i,className:"title.function"})]},{match:/\.\.\./,relevance:0},R,{match:"\\$"+i,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[x]},A,D,k,V,{match:/\$[(.]/}]}}function D8e(n){const e=I8e(n),t=yL,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],r={begin:[/namespace/,/\s+/,n.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},s={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[e.exports.CLASS_REFERENCE]},o={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},a=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],l={$pattern:yL,keyword:Ale.concat(a),literal:Ole,built_in:Vle.concat(i),"variable.language":Hle},c={className:"meta",begin:"@"+t},u=(f,g,p)=>{const v=f.contains.findIndex(b=>b.label===g);if(v===-1)throw new Error("can not find mode to replace");f.contains.splice(v,1,p)};Object.assign(e.keywords,l),e.exports.PARAMS_CONTAINS.push(c);const d=e.contains.find(f=>f.className==="attr");e.exports.PARAMS_CONTAINS.push([e.exports.CLASS_REFERENCE,d]),e.contains=e.contains.concat([c,r,s]),u(e,"shebang",n.SHEBANG()),u(e,"use_strict",o);const h=e.contains.find(f=>f.label==="func.def");return h.relevance=0,Object.assign(e,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),e}function zle(n){const e=n.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i=/[\p{L}0-9._:-]+/u,r={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=n.inherit(s,{begin:/\(/,end:/\)/}),a=n.inherit(n.APOS_STRING_MODE,{className:"string"}),l=n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:i,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[r]},{begin:/'/,end:/'/,contains:[r]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,l,a,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,o,l,a]}]}]},n.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},r,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:c}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function M8e(n){const e=n.regex,t={},i={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[t]}]};Object.assign(t,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},i]});const r={className:"subst",begin:/\$\(/,end:/\)/,contains:[n.BACKSLASH_ESCAPE]},s=n.inherit(n.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[n.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,t,r]};r.contains.push(a);const l={match:/\\"/},c={className:"string",begin:/'/,end:/'/},u={match:/\\'/},d={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},n.NUMBER_MODE,t]},h=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],f=n.SHEBANG({binary:`(${h.join("|")})`,relevance:10}),g={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[n.inherit(n.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},p=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],v=["true","false"],b={match:/(\/[a-z._-]+)+/},_=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],y=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],C=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],w=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:p,literal:v,built_in:[..._,...y,"set","shopt",...C,...w]},contains:[f,n.SHEBANG(),g,d,s,o,b,a,l,c,u,t]}}function R8e(n){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],t=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],i=["default","false","null","true"],r=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"],o={keyword:r.concat(s),built_in:e,literal:i},a=n.inherit(n.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},u={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},d=n.inherit(u,{illegal:/\n/}),h={className:"subst",begin:/\{/,end:/\}/,keywords:o},f=n.inherit(h,{illegal:/\n/}),g={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},n.BACKSLASH_ESCAPE,f]},p={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]},v=n.inherit(p,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},f]});h.contains=[p,g,u,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,l,n.C_BLOCK_COMMENT_MODE],f.contains=[v,g,d,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,l,n.inherit(n.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const b={variants:[c,p,g,u,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},_={begin:"<",end:">",contains:[{beginKeywords:"in out"},a]},y=n.IDENT_RE+"(<"+n.IDENT_RE+"(\\s*,\\s*"+n.IDENT_RE+")*>)?(\\[\\])?",C={begin:"@"+n.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:o,illegal:/::/,contains:[n.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},b,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},a,_,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,_,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+y+"\\s+)+"+n.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:o,contains:[{beginKeywords:t.join(" "),relevance:0},{begin:n.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[n.TITLE_MODE,_],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,relevance:0,contains:[b,l,n.C_BLOCK_COMMENT_MODE]},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},C]}}function A8e(n){const e=n.regex,t=n.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",o="(?!struct)("+i+"|"+e.optional(r)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},n.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},t,n.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:e.optional(r)+n.IDENT_RE,relevance:0},f=e.optional(r)+n.IDENT_RE+"\\s*\\(",g=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],p=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],v=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],b=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],C={type:p,keyword:g,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:v},w={className:"function.dispatch",relevance:0,keywords:{_hint:b},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,n.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},x=[w,d,a,t,n.C_BLOCK_COMMENT_MODE,u,c],k={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:C,contains:x.concat([{begin:/\(/,end:/\)/,keywords:C,contains:x.concat(["self"]),relevance:0}]),relevance:0},E={className:"function",begin:"("+o+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:C,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:C,relevance:0},{begin:f,returnBegin:!0,contains:[h],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:C,relevance:0,contains:[t,n.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:C,relevance:0,contains:["self",t,n.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,t,n.C_BLOCK_COMMENT_MODE,d]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:C,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(k,E,w,x,[d,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:C,contains:["self",a]},{begin:n.IDENT_RE+"::",keywords:C},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function O8e(n){const e=n.regex,t=n.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",o="("+i+"|"+e.optional(r)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},n.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},t,n.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:e.optional(r)+n.IDENT_RE,relevance:0},f=e.optional(r)+n.IDENT_RE+"\\s*\\(",v={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},b=[d,a,t,n.C_BLOCK_COMMENT_MODE,u,c],_={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:b.concat([{begin:/\(/,end:/\)/,keywords:v,contains:b.concat(["self"]),relevance:0}]),relevance:0},y={begin:"("+o+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:v,relevance:0},{begin:f,returnBegin:!0,contains:[n.inherit(h,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[t,n.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",t,n.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,t,n.C_BLOCK_COMMENT_MODE,d]};return{name:"C",aliases:["h"],keywords:v,disableAutodetect:!0,illegal:"</",contains:[].concat(_,y,b,[d,{begin:n.IDENT_RE+"::",keywords:v},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},n.TITLE_MODE]}]),exports:{preprocessor:d,strings:c,keywords:v}}}function P8e(n){const e={className:"subst",variants:[{begin:"\\$[A-Za-z0-9_]+"}]},t={className:"subst",variants:[{begin:/\$\{/,end:/\}/}],keywords:"true false null this is new super"},i={className:"string",variants:[{begin:"r'''",end:"'''"},{begin:'r"""',end:'"""'},{begin:"r'",end:"'",illegal:"\\n"},{begin:'r"',end:'"',illegal:"\\n"},{begin:"'''",end:"'''",contains:[n.BACKSLASH_ESCAPE,e,t]},{begin:'"""',end:'"""',contains:[n.BACKSLASH_ESCAPE,e,t]},{begin:"'",end:"'",illegal:"\\n",contains:[n.BACKSLASH_ESCAPE,e,t]},{begin:'"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE,e,t]}]};t.contains=[n.C_NUMBER_MODE,i];const r=["Comparable","DateTime","Duration","Function","Iterable","Iterator","List","Map","Match","Object","Pattern","RegExp","Set","Stopwatch","String","StringBuffer","StringSink","Symbol","Type","Uri","bool","double","int","num","Element","ElementList"],s=r.map(l=>`${l}?`);return{name:"Dart",keywords:{keyword:["abstract","as","assert","async","await","base","break","case","catch","class","const","continue","covariant","default","deferred","do","dynamic","else","enum","export","extends","extension","external","factory","false","final","finally","for","Function","get","hide","if","implements","import","in","interface","is","late","library","mixin","new","null","on","operator","part","required","rethrow","return","sealed","set","show","static","super","switch","sync","this","throw","true","try","typedef","var","void","when","while","with","yield"],built_in:r.concat(s).concat(["Never","Null","dynamic","print","document","querySelector","querySelectorAll","window"]),$pattern:/[A-Za-z][A-Za-z0-9_]*\??/},contains:[i,n.COMMENT(/\/\*\*(?!\/)/,/\*\//,{subLanguage:"markdown",relevance:0}),n.COMMENT(/\/{3,} ?/,/$/,{contains:[{subLanguage:"markdown",begin:".",end:"$",relevance:0}]}),n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"class",beginKeywords:"class interface",end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},n.UNDERSCORE_TITLE_MODE]},n.C_NUMBER_MODE,{className:"meta",begin:"@[A-Za-z]+"},{begin:"=>"}]}}function F8e(n){const e=n.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function B8e(n){return{name:"Dockerfile",aliases:["docker"],case_insensitive:!0,keywords:["from","maintainer","expose","env","arg","user","onbuild","stopsignal"],contains:[n.HASH_COMMENT_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}}function H8e(n){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function V8e(n){const e=n.regex,t=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[n.HASH_COMMENT_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(t,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function z8e(n){const e=n.regex,t="HTTP/([32]|1\\.[01])",i=/[A-Za-z][A-Za-z0-9-]*/,r={className:"attribute",begin:e.concat("^",i,"(?=\\:\\s)"),starts:{contains:[{className:"punctuation",begin:/: /,relevance:0,starts:{end:"$",relevance:0}}]}},s=[r,{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}];return{name:"HTTP",aliases:["https"],illegal:/\S/,contains:[{begin:"^(?="+t+" \\d{3})",end:/$/,contains:[{className:"meta",begin:t},{className:"number",begin:"\\b\\d{3}\\b"}],starts:{end:/\b\B/,illegal:/\S/,contains:s}},{begin:"(?=^[A-Z]+ (.*?) "+t+"$)",end:/$/,contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{className:"meta",begin:t},{className:"keyword",begin:"[A-Z]+"}],starts:{end:/\b\B/,illegal:/\S/,contains:s}},n.inherit(r,{relevance:0})]}}function W8e(n){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},t={match:/[{}[\],:]/,className:"punctuation",relevance:0},i=["true","false","null"],r={scope:"literal",beginKeywords:i.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:i},contains:[e,t,n.QUOTE_STRING_MODE,r,n.C_NUMBER_MODE,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var cv="[0-9](_*[0-9])*",Ix=`\\.(${cv})`,Dx="[0-9a-fA-F](_*[0-9a-fA-F])*",kq={className:"number",variants:[{begin:`(\\b(${cv})((${Ix})|\\.)?|(${Ix}))[eE][+-]?(${cv})[fFdD]?\\b`},{begin:`\\b(${cv})((${Ix})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Ix})[fFdD]?\\b`},{begin:`\\b(${cv})[fFdD]\\b`},{begin:`\\b0[xX]((${Dx})\\.?|(${Dx})?\\.(${Dx}))[pP][+-]?(${cv})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Dx})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function Wle(n,e,t){return t===-1?"":n.replace(e,i=>Wle(n,e,t-1))}function $8e(n){const e=n.regex,t="[-a-zA-Z_$][-a-zA-Z_$0-9]*",i=t+Wle("(?:<"+t+"~~~(?:\\s*,\\s*"+t+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},c={className:"meta",begin:"@"+t,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},u={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[n.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[n.BACKSLASH_ESCAPE]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,t],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,t),/\s+/,t,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,t],className:{1:"keyword",3:"title.class"},contains:[u,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+i+"\\s+)",n.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[c,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,kq,n.C_BLOCK_COMMENT_MODE]},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},kq,c]}}var uv="[0-9](_*[0-9])*",Mx=`\\.(${uv})`,Rx="[0-9a-fA-F](_*[0-9a-fA-F])*",U8e={className:"number",variants:[{begin:`(\\b(${uv})((${Mx})|\\.)?|(${Mx}))[eE][+-]?(${uv})[fFdD]?\\b`},{begin:`\\b(${uv})((${Mx})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Mx})[fFdD]?\\b`},{begin:`\\b(${uv})[fFdD]\\b`},{begin:`\\b0[xX]((${Rx})\\.?|(${Rx})?\\.(${Rx}))[pP][+-]?(${uv})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Rx})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function j8e(n){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},t={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},i={className:"symbol",begin:n.UNDERSCORE_IDENT_RE+"@"},r={className:"subst",begin:/\$\{/,end:/\}/,contains:[n.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+n.UNDERSCORE_IDENT_RE},o={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,r]},{begin:"'",end:"'",illegal:/\n/,contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[n.BACKSLASH_ESCAPE,s,r]}]};r.contains.push(o);const a={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+n.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+n.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[n.inherit(o,{className:"string"}),"self"]}]},c=U8e,u=n.COMMENT("/\\*","\\*/",{contains:[n.C_BLOCK_COMMENT_MODE]}),d={variants:[{className:"type",begin:n.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},h=d;return h.variants[1].contains=[d],d.variants[1].contains=[h],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),n.C_LINE_COMMENT_MODE,u,t,i,a,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:n.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[n.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[d,n.C_LINE_COMMENT_MODE,u],relevance:0},n.C_LINE_COMMENT_MODE,u,a,l,o,n.C_NUMBER_MODE]},u]},{begin:[/class|interface|trait/,/\s+/,n.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},n.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},a,l]},o,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},c]}}function K8e(n){const e="\\[=*\\[",t="\\]=*\\]",i={begin:e,end:t,contains:["self"]},r=[n.COMMENT("--(?!"+e+")","$"),n.COMMENT("--"+e,t,{contains:[i],relevance:10})];return{name:"Lua",keywords:{$pattern:n.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:r.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[n.inherit(n.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:r}].concat(r)},n.C_NUMBER_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,{className:"string",begin:e,end:t,contains:[i],relevance:5}])}}const q8e=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),G8e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Y8e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Z8e=[...G8e,...Y8e],X8e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),$le=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Ule=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Q8e=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse(),J8e=$le.concat(Ule).sort().reverse();function e6e(n){const e=q8e(n),t=J8e,i="and or not only",r="[\\w-]+",s="("+r+"|@\\{"+r+"\\})",o=[],a=[],l=function(y){return{className:"string",begin:"~?"+y+".*?"+y}},c=function(y,C,w){return{className:y,begin:C,relevance:w}},u={$pattern:/[a-z-]+/,keyword:i,attribute:X8e.join(" ")},d={begin:"\\(",end:"\\)",contains:a,keywords:u,relevance:0};a.push(n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,l("'"),l('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,d,c("variable","@@?"+r,10),c("variable","@\\{"+r+"\\}"),c("built_in","~?`[^`]*?`"),{className:"attribute",begin:r+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const h=a.concat({begin:/\{/,end:/\}/,contains:o}),f={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(a)},g={begin:s+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Q8e.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:a}}]},p={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:u,returnEnd:!0,contains:a,relevance:0}},v={className:"variable",variants:[{begin:"@"+r+"\\s*:",relevance:15},{begin:"@"+r}],starts:{end:"[;}]",returnEnd:!0,contains:h}},b={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:s,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,f,c("keyword","all\\b"),c("variable","@\\{"+r+"\\}"),{begin:"\\b("+Z8e.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,c("selector-tag",s,0),c("selector-id","#"+s),c("selector-class","\\."+s,0),c("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+$le.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+Ule.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:h},{begin:"!important"},e.FUNCTION_DISPATCH]},_={begin:r+`:(:)?(${t.join("|")})`,returnBegin:!0,contains:[b]};return o.push(n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,p,v,_,g,b,f,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:o}}function t6e(n){const e=n.regex,t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},i={begin:"^[-\\*]{3,}",end:"$"},r={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},o={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},a=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,a,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},c={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},d=n.inherit(c,{contains:[]}),h=n.inherit(u,{contains:[]});c.contains.push(h),u.contains.push(d);let f=[t,l];return[c,u,d,h].forEach(b=>{b.contains=b.contains.concat(f)}),f=f.concat(c,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:f},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:f}]}]},t,s,c,u,{className:"quote",begin:"^>\\s+",contains:f,end:"$"},r,i,l,o,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function n6e(n){const e=n.regex,t={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:e.concat(/[$@]/,n.UNDERSCORE_IDENT_RE)}]},r={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[n.HASH_COMMENT_MODE,{className:"string",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[t]},{className:"regexp",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},t]};return{name:"Nginx config",aliases:["nginxconf"],contains:[n.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:r.contains,keywords:{section:"upstream location"}},{className:"section",begin:e.concat(n.UNDERSCORE_IDENT_RE+e.lookahead(/\s+\{/)),relevance:0},{begin:e.lookahead(n.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:n.UNDERSCORE_IDENT_RE,starts:r}],relevance:0}],illegal:"[^\\s\\}\\{]"}}function i6e(n){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},t=/[a-zA-Z@][a-zA-Z0-9_]*/,a={"variable.language":["this","super"],$pattern:t,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:t,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:a,illegal:"</",contains:[e,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.C_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[n.UNDERSCORE_TITLE_MODE]},{begin:"\\."+n.UNDERSCORE_IDENT_RE,relevance:0}]}}function r6e(n){const e=n.regex,t=/(?![A-Za-z0-9])(?![$])/,i=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,t),r=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,t),s={scope:"variable",match:"\\$+"+i},o={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},a={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},l=n.inherit(n.APOS_STRING_MODE,{illegal:null}),c=n.inherit(n.QUOTE_STRING_MODE,{illegal:null,contains:n.QUOTE_STRING_MODE.contains.concat(a)}),u={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:n.QUOTE_STRING_MODE.contains.concat(a),"on:begin":(A,R)=>{R.data._beginMatch=A[1]||A[2]},"on:end":(A,R)=>{R.data._beginMatch!==A[1]&&R.ignoreMatch()}},d=n.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),h=`[ 	
]`,f={scope:"string",variants:[c,l,u,d]},g={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},p=["false","null","true"],v=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],b=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],y={keyword:v,literal:(A=>{const R=[];return A.forEach(V=>{R.push(V),V.toLowerCase()===V?R.push(V.toUpperCase()):R.push(V.toLowerCase())}),R})(p),built_in:b},C=A=>A.map(R=>R.replace(/\|\d+$/,"")),w={variants:[{match:[/new/,e.concat(h,"+"),e.concat("(?!",C(b).join("\\b|"),"\\b)"),r],scope:{1:"keyword",4:"title.class"}}]},x=e.concat(i,"\\b(?!\\()"),k={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),x],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[r,e.concat(/::/,e.lookahead(/(?!class\b)/)),x],scope:{1:"title.class",3:"variable.constant"}},{match:[r,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[r,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},E={scope:"attr",match:e.concat(i,e.lookahead(":"),e.lookahead(/(?!::)/))},L={relevance:0,begin:/\(/,end:/\)/,keywords:y,contains:[E,s,k,n.C_BLOCK_COMMENT_MODE,f,g,w]},M={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",C(v).join("\\b|"),"|",C(b).join("\\b|"),"\\b)"),i,e.concat(h,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[L]};L.contains.push(M);const D=[E,k,n.C_BLOCK_COMMENT_MODE,f,g,w],O={begin:e.concat(/#\[\s*/,r),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:p,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:p,keyword:["new","array"]},contains:["self",...D]},...D,{scope:"meta",match:r}]};return{case_insensitive:!1,keywords:y,contains:[O,n.HASH_COMMENT_MODE,n.COMMENT("//","$"),n.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:n.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},o,{scope:"variable.language",match:/\$this\b/},s,M,k,{match:[/const/,/\s/,i],scope:{1:"keyword",3:"variable.constant"}},w,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},n.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:y,contains:["self",s,k,n.C_BLOCK_COMMENT_MODE,f,g]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},n.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[n.inherit(n.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},n.UNDERSCORE_TITLE_MODE]},f,g]}}function s6e(n){const e=["string","char","byte","int","long","bool","decimal","single","double","DateTime","xml","array","hashtable","void"],t="Add|Clear|Close|Copy|Enter|Exit|Find|Format|Get|Hide|Join|Lock|Move|New|Open|Optimize|Pop|Push|Redo|Remove|Rename|Reset|Resize|Search|Select|Set|Show|Skip|Split|Step|Switch|Undo|Unlock|Watch|Backup|Checkpoint|Compare|Compress|Convert|ConvertFrom|ConvertTo|Dismount|Edit|Expand|Export|Group|Import|Initialize|Limit|Merge|Mount|Out|Publish|Restore|Save|Sync|Unpublish|Update|Approve|Assert|Build|Complete|Confirm|Deny|Deploy|Disable|Enable|Install|Invoke|Register|Request|Restart|Resume|Start|Stop|Submit|Suspend|Uninstall|Unregister|Wait|Debug|Measure|Ping|Repair|Resolve|Test|Trace|Connect|Disconnect|Read|Receive|Send|Write|Block|Grant|Protect|Revoke|Unblock|Unprotect|Use|ForEach|Sort|Tee|Where",i="-and|-as|-band|-bnot|-bor|-bxor|-casesensitive|-ccontains|-ceq|-cge|-cgt|-cle|-clike|-clt|-cmatch|-cne|-cnotcontains|-cnotlike|-cnotmatch|-contains|-creplace|-csplit|-eq|-exact|-f|-file|-ge|-gt|-icontains|-ieq|-ige|-igt|-ile|-ilike|-ilt|-imatch|-in|-ine|-inotcontains|-inotlike|-inotmatch|-ireplace|-is|-isnot|-isplit|-join|-le|-like|-lt|-match|-ne|-not|-notcontains|-notin|-notlike|-notmatch|-or|-regex|-replace|-shl|-shr|-split|-wildcard|-xor",r={$pattern:/-?[A-z\.\-]+\b/,keyword:"if else foreach return do while until elseif begin for trap data dynamicparam end break throw param continue finally in switch exit filter try process catch hidden static parameter",built_in:"ac asnp cat cd CFS chdir clc clear clhy cli clp cls clv cnsn compare copy cp cpi cpp curl cvpa dbp del diff dir dnsn ebp echo|0 epal epcsv epsn erase etsn exsn fc fhx fl ft fw gal gbp gc gcb gci gcm gcs gdr gerr ghy gi gin gjb gl gm gmo gp gps gpv group gsn gsnp gsv gtz gu gv gwmi h history icm iex ihy ii ipal ipcsv ipmo ipsn irm ise iwmi iwr kill lp ls man md measure mi mount move mp mv nal ndr ni nmo npssc nsn nv ogv oh popd ps pushd pwd r rbp rcjb rcsn rd rdr ren ri rjb rm rmdir rmo rni rnp rp rsn rsnp rujb rv rvpa rwmi sajb sal saps sasv sbp sc scb select set shcm si sl sleep sls sort sp spjb spps spsv start stz sujb sv swmi tee trcm type wget where wjb write"},s=/\w[\w\d]*((-)[\w\d]+)*/,o={begin:"`[\\s\\S]",relevance:0},a={className:"variable",variants:[{begin:/\$\B/},{className:"keyword",begin:/\$this/},{begin:/\$[\w\d][\w\d_:]*/}]},l={className:"literal",begin:/\$(null|true|false)\b/},c={className:"string",variants:[{begin:/"/,end:/"/},{begin:/@"/,end:/^"@/}],contains:[o,a,{className:"variable",begin:/\$[A-z]/,end:/[^A-z]/}]},u={className:"string",variants:[{begin:/'/,end:/'/},{begin:/@'/,end:/^'@/}]},d={className:"doctag",variants:[{begin:/\.(synopsis|description|example|inputs|outputs|notes|link|component|role|functionality)/},{begin:/\.(parameter|forwardhelptargetname|forwardhelpcategory|remotehelprunspace|externalhelp)\s+\S+/}]},h=n.inherit(n.COMMENT(null,null),{variants:[{begin:/#/,end:/$/},{begin:/<#/,end:/#>/}],contains:[d]}),f={className:"built_in",variants:[{begin:"(".concat(t,")+(-)[\\w\\d]+")}]},g={className:"class",beginKeywords:"class enum",end:/\s*[{]/,excludeEnd:!0,relevance:0,contains:[n.TITLE_MODE]},p={className:"function",begin:/function\s+/,end:/\s*\{|$/,excludeEnd:!0,returnBegin:!0,relevance:0,contains:[{begin:"function",relevance:0,className:"keyword"},{className:"title",begin:s,relevance:0},{begin:/\(/,end:/\)/,className:"params",relevance:0,contains:[a]}]},v={begin:/using\s/,end:/$/,returnBegin:!0,contains:[c,u,{className:"keyword",begin:/(using|assembly|command|module|namespace|type)/}]},b={variants:[{className:"operator",begin:"(".concat(i,")\\b")},{className:"literal",begin:/(-){1,2}[\w\d-]+/,relevance:0}]},_={className:"selector-tag",begin:/@\B/,relevance:0},y={className:"function",begin:/\[.*\]\s*[\w]+[ ]??\(/,end:/$/,returnBegin:!0,relevance:0,contains:[{className:"keyword",begin:"(".concat(r.keyword.toString().replace(/\s/g,"|"),")\\b"),endsParent:!0,relevance:0},n.inherit(n.TITLE_MODE,{endsParent:!0})]},C=[y,h,o,n.NUMBER_MODE,c,u,f,a,l,_],w={begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0,relevance:0,contains:[].concat("self",C,{begin:"("+e.join("|")+")",className:"built_in",relevance:0},{className:"type",begin:/[\.\w\d]+/,relevance:0})};return y.contains.unshift(w),{name:"PowerShell",aliases:["pwsh","ps","ps1"],case_insensitive:!0,keywords:r,contains:C.concat(g,p,v,b,w)}}function o6e(n){const e=n.regex,t=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),i=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],a={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:i,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},c={className:"subst",begin:/\{/,end:/\}/,keywords:a,illegal:/#/},u={begin:/\{\{/,relevance:0},d={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,l,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,l,u,c]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,u,c]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},h="[0-9](_?[0-9])*",f=`(\\b(${h}))?\\.(${h})|\\b(${h})\\.`,g=`\\b|${i.join("|")}`,p={className:"number",relevance:0,variants:[{begin:`(\\b(${h})|(${f}))[eE][+-]?(${h})[jJ]?(?=${g})`},{begin:`(${f})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${g})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${g})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${g})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${g})`},{begin:`\\b(${h})[jJ](?=${g})`}]},v={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:a,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},b={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:["self",l,p,d,n.HASH_COMMENT_MODE]}]};return c.contains=[d,p,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:a,illegal:/(<\/|\?)|=>/,contains:[l,p,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},d,v,n.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[b]},{variants:[{match:[/\bclass/,/\s+/,t,/\s*/,/\(\s*/,t,/\s*\)/]},{match:[/\bclass/,/\s+/,t]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[p,b,d]}]}}function a6e(n){const e=n.regex,t="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",i=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),r=e.concat(i,/(::\w+)*/),o={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},a={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},c=[n.COMMENT("#","$",{contains:[a]}),n.COMMENT("^=begin","^=end",{contains:[a],relevance:10}),n.COMMENT("^__END__",n.MATCH_NOTHING_RE)],u={className:"subst",begin:/#\{/,end:/\}/,keywords:o},d={className:"string",contains:[n.BACKSLASH_ESCAPE,u],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[n.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[n.BACKSLASH_ESCAPE,u]})]}]},h="[1-9](_?[0-9])*|0",f="[0-9](_?[0-9])*",g={className:"number",relevance:0,variants:[{begin:`\\b(${h})(\\.(${f}))?([eE][+-]?(${f})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},p={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:o}]},x=[d,{variants:[{match:[/class\s+/,r,/\s+<\s+/,r]},{match:[/\b(class|module)\s+/,r]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:o},{match:[/(include|extend)\s+/,r],scope:{2:"title.class"},keywords:o},{relevance:0,match:[r,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:i,scope:"title.class"},{match:[/def/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[p]},{begin:n.IDENT_RE+"::"},{className:"symbol",begin:n.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[d,{begin:t}],relevance:0},g,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:o},{begin:"("+n.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[n.BACKSLASH_ESCAPE,u],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,c),relevance:0}].concat(l,c);u.contains=x,p.contains=x;const M=[{begin:/^\s*=>/,starts:{end:"$",contains:x}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:o,contains:x}}];return c.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:o,illegal:/\/\*/,contains:[n.SHEBANG({binary:"ruby"})].concat(M).concat(c).concat(x)}}function l6e(n){const e=n.regex,t=/(r#)?/,i=e.concat(t,n.UNDERSCORE_IDENT_RE),r=e.concat(t,n.IDENT_RE),s={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,r,e.lookahead(/\s*\(/))},o="([ui](8|16|32|64|128|size)|f(32|64))?",a=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],c=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],u=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:n.IDENT_RE+"!?",type:u,keyword:a,literal:l,built_in:c},illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.COMMENT("/\\*","\\*/",{contains:["self"]}),n.inherit(n.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+o},{begin:"\\b0o([0-7_]+)"+o},{begin:"\\b0x([A-Fa-f0-9_]+)"+o},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+o}],relevance:0},{begin:[/fn/,/\s+/,i],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,i],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,i,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,i],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,i],className:{1:"keyword",3:"title.class"}},{begin:n.IDENT_RE+"::",keywords:{keyword:"Self",built_in:c,type:u}},{className:"punctuation",begin:"->"},s]}}const c6e=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),u6e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],d6e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],h6e=[...u6e,...d6e],f6e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),g6e=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),p6e=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),m6e=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function v6e(n){const e=c6e(n),t=p6e,i=g6e,r="@[a-z-]+",s="and or not only",a={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+h6e.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+i.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+t.join("|")+")"},a,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+m6e.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,a,e.HEXCOLOR,e.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:r,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:f6e.join(" ")},contains:[{begin:r,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},a,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function b6e(n){const e=n.regex,t=n.COMMENT("--","$"),i={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},r={begin:/"/,end:/"/,contains:[{begin:/""/}]},s=["true","false","unknown"],o=["double precision","large object","with timezone","without timezone"],a=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],c=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],u=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],d=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],h=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],f=u,g=[...c,...l].filter(y=>!u.includes(y)),p={className:"variable",begin:/@[a-z0-9][a-z0-9_]*/},v={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},b={begin:e.concat(/\b/,e.either(...f),/\s*\(/),relevance:0,keywords:{built_in:f}};function _(y,{exceptions:C,when:w}={}){const x=w;return C=C||[],y.map(k=>k.match(/\|\d+$/)||C.includes(k)?k:x(k)?`${k}|0`:k)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:_(g,{when:y=>y.length<3}),literal:s,type:a,built_in:d},contains:[{begin:e.either(...h),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:g.concat(h),literal:s,type:a}},{className:"type",begin:e.either(...o)},b,p,i,r,n.C_NUMBER_MODE,n.C_BLOCK_COMMENT_MODE,t,v]}}function _6e(n){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function jle(n){return n?typeof n=="string"?n:n.source:null}function jb(n){return xi("(?=",n,")")}function xi(...n){return n.map(t=>jle(t)).join("")}function C6e(n){const e=n[n.length-1];return typeof e=="object"&&e.constructor===Object?(n.splice(n.length-1,1),e):{}}function Co(...n){return"("+(C6e(n).capture?"":"?:")+n.map(i=>jle(i)).join("|")+")"}const BB=n=>xi(/\b/,n,/\w$/.test(n)?/\b/:/\B/),y6e=["Protocol","Type"].map(BB),Eq=["init","self"].map(BB),w6e=["Any","Self"],dR=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],Lq=["false","nil","true"],S6e=["assignment","associativity","higherThan","left","lowerThan","none","right"],x6e=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],Nq=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],Kle=Co(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),qle=Co(Kle,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),hR=xi(Kle,qle,"*"),Gle=Co(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),wL=Co(Gle,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Ac=xi(Gle,wL,"*"),Ax=xi(/[A-Z]/,wL,"*"),k6e=["attached","autoclosure",xi(/convention\(/,Co("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",xi(/objc\(/,Ac,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],E6e=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function L6e(n){const e={match:/\s+/,relevance:0},t=n.COMMENT("/\\*","\\*/",{contains:["self"]}),i=[n.C_LINE_COMMENT_MODE,t],r={match:[/\./,Co(...y6e,...Eq)],className:{2:"keyword"}},s={match:xi(/\./,Co(...dR)),relevance:0},o=dR.filter(Pe=>typeof Pe=="string").concat(["_|0"]),a=dR.filter(Pe=>typeof Pe!="string").concat(w6e).map(BB),l={variants:[{className:"keyword",match:Co(...a,...Eq)}]},c={$pattern:Co(/\b\w+/,/#\w+/),keyword:o.concat(x6e),literal:Lq},u=[r,s,l],d={match:xi(/\./,Co(...Nq)),relevance:0},h={className:"built_in",match:xi(/\b/,Co(...Nq),/(?=\()/)},f=[d,h],g={match:/->/,relevance:0},p={className:"operator",relevance:0,variants:[{match:hR},{match:`\\.(\\.|${qle})+`}]},v=[g,p],b="([0-9]_*)+",_="([0-9a-fA-F]_*)+",y={className:"number",relevance:0,variants:[{match:`\\b(${b})(\\.(${b}))?([eE][+-]?(${b}))?\\b`},{match:`\\b0x(${_})(\\.(${_}))?([pP][+-]?(${b}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},C=(Pe="")=>({className:"subst",variants:[{match:xi(/\\/,Pe,/[0\\tnr"']/)},{match:xi(/\\/,Pe,/u\{[0-9a-fA-F]{1,8}\}/)}]}),w=(Pe="")=>({className:"subst",match:xi(/\\/,Pe,/[\t ]*(?:[\r\n]|\r\n)/)}),x=(Pe="")=>({className:"subst",label:"interpol",begin:xi(/\\/,Pe,/\(/),end:/\)/}),k=(Pe="")=>({begin:xi(Pe,/"""/),end:xi(/"""/,Pe),contains:[C(Pe),w(Pe),x(Pe)]}),E=(Pe="")=>({begin:xi(Pe,/"/),end:xi(/"/,Pe),contains:[C(Pe),x(Pe)]}),L={className:"string",variants:[k(),k("#"),k("##"),k("###"),E(),E("#"),E("##"),E("###")]},M=[n.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[n.BACKSLASH_ESCAPE]}],D={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:M},O=Pe=>{const tt=xi(Pe,/\//),Ae=xi(/\//,Pe);return{begin:tt,end:Ae,contains:[...M,{scope:"comment",begin:`#(?!.*${Ae})`,end:/$/}]}},A={scope:"regexp",variants:[O("###"),O("##"),O("#"),D]},R={match:xi(/`/,Ac,/`/)},V={className:"variable",match:/\$\d+/},F={className:"variable",match:`\\$${wL}+`},T=[R,V,F],N={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:E6e,contains:[...v,y,L]}]}},B={scope:"keyword",match:xi(/@/,Co(...k6e),jb(Co(/\(/,/\s+/)))},$={scope:"meta",match:xi(/@/,Ac)},j=[N,B,$],Y={match:jb(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:xi(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,wL,"+")},{className:"type",match:Ax,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:xi(/\s+&\s+/,jb(Ax)),relevance:0}]},G={begin:/</,end:/>/,keywords:c,contains:[...i,...u,...j,g,Y]};Y.contains.push(G);const X={match:xi(Ac,/\s*:/),keywords:"_|0",relevance:0},q={begin:/\(/,end:/\)/,relevance:0,keywords:c,contains:["self",X,...i,A,...u,...f,...v,y,L,...T,...j,Y]},re={begin:/</,end:/>/,keywords:"repeat each",contains:[...i,Y]},ge={begin:Co(jb(xi(Ac,/\s*:/)),jb(xi(Ac,/\s+/,Ac,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Ac}]},ye={begin:/\(/,end:/\)/,keywords:c,contains:[ge,...i,...u,...v,y,L,...j,Y,q],endsParent:!0,illegal:/["']/},we={match:[/(func|macro)/,/\s+/,Co(R.match,Ac,hR)],className:{1:"keyword",3:"title.function"},contains:[re,ye,e],illegal:[/\[/,/%/]},Ie={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[re,ye,e],illegal:/\[|%/},Fe={match:[/operator/,/\s+/,hR],className:{1:"keyword",3:"title"}},ze={begin:[/precedencegroup/,/\s+/,Ax],className:{1:"keyword",3:"title"},contains:[Y],keywords:[...S6e,...Lq],end:/}/},Me={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Ac,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:c,contains:[re,...u,{begin:/:/,end:/\{/,keywords:c,contains:[{scope:"title.class.inherited",match:Ax},...u],relevance:0}]};for(const Pe of L.variants){const tt=Pe.contains.find(mt=>mt.label==="interpol");tt.keywords=c;const Ae=[...u,...f,...v,y,L,...T];tt.contains=[...Ae,{begin:/\(/,end:/\)/,contains:["self",...Ae]}]}return{name:"Swift",keywords:c,contains:[...i,we,Ie,Me,Fe,ze,{beginKeywords:"import",end:/$/,contains:[...i],relevance:0},A,...u,...f,...v,y,L,...T,...j,Y,q]}}function N6e(n){const e="true false yes no null",t="[\\w#;/?:@&=+$,.~*'()[\\]]+",i={className:"attr",variants:[{begin:/\w[\w :()\./-]*:(?=[ \t]|$)/},{begin:/"\w[\w :()\./-]*":(?=[ \t]|$)/},{begin:/'\w[\w :()\./-]*':(?=[ \t]|$)/}]},r={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,r]},o=n.inherit(s,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),d={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},h={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},f={begin:/\{/,end:/\}/,contains:[h],illegal:"\\n",relevance:0},g={begin:"\\[",end:"\\]",contains:[h],illegal:"\\n",relevance:0},p=[i,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+t},{className:"type",begin:"!<"+t+">"},{className:"type",begin:"!"+t},{className:"type",begin:"!!"+t},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},d,{className:"number",begin:n.C_NUMBER_RE+"\\b",relevance:0},f,g,s],v=[...p];return v.pop(),v.push(o),h.contains=v,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:p}}function Yle(n){return n instanceof Map?n.clear=n.delete=n.set=function(){throw new Error("map is read-only")}:n instanceof Set&&(n.add=n.clear=n.delete=function(){throw new Error("set is read-only")}),Object.freeze(n),Object.getOwnPropertyNames(n).forEach(e=>{const t=n[e],i=typeof t;(i==="object"||i==="function")&&!Object.isFrozen(t)&&Yle(t)}),n}class Tq{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function Zle(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Uh(n,...e){const t=Object.create(null);for(const i in n)t[i]=n[i];return e.forEach(function(i){for(const r in i)t[r]=i[r]}),t}const T6e="</span>",Iq=n=>!!n.scope,I6e=(n,{prefix:e})=>{if(n.startsWith("language:"))return n.replace("language:","language-");if(n.includes(".")){const t=n.split(".");return[`${e}${t.shift()}`,...t.map((i,r)=>`${i}${"_".repeat(r+1)}`)].join(" ")}return`${e}${n}`};class D6e{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=Zle(e)}openNode(e){if(!Iq(e))return;const t=I6e(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){Iq(e)&&(this.buffer+=T6e)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const Dq=(n={})=>{const e={children:[]};return Object.assign(e,n),e};class HB{constructor(){this.rootNode=Dq(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=Dq({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return typeof t=="string"?e.addText(t):t.children&&(e.openNode(t),t.children.forEach(i=>this._walk(e,i)),e.closeNode(t)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(t=>typeof t=="string")?e.children=[e.children.join("")]:e.children.forEach(t=>{HB._collapse(t)}))}}class M6e extends HB{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){const i=e.root;t&&(i.scope=`language:${t}`),this.add(i)}toHTML(){return new D6e(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function $y(n){return n?typeof n=="string"?n:n.source:null}function Xle(n){return hm("(?=",n,")")}function R6e(n){return hm("(?:",n,")*")}function A6e(n){return hm("(?:",n,")?")}function hm(...n){return n.map(t=>$y(t)).join("")}function O6e(n){const e=n[n.length-1];return typeof e=="object"&&e.constructor===Object?(n.splice(n.length-1,1),e):{}}function VB(...n){return"("+(O6e(n).capture?"":"?:")+n.map(i=>$y(i)).join("|")+")"}function Qle(n){return new RegExp(n.toString()+"|").exec("").length-1}function P6e(n,e){const t=n&&n.exec(e);return t&&t.index===0}const F6e=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function zB(n,{joinWith:e}){let t=0;return n.map(i=>{t+=1;const r=t;let s=$y(i),o="";for(;s.length>0;){const a=F6e.exec(s);if(!a){o+=s;break}o+=s.substring(0,a.index),s=s.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?o+="\\"+String(Number(a[1])+r):(o+=a[0],a[0]==="("&&t++)}return o}).map(i=>`(${i})`).join(e)}const B6e=/\b\B/,Jle="[a-zA-Z]\\w*",WB="[a-zA-Z_]\\w*",ece="\\b\\d+(\\.\\d+)?",tce="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",nce="\\b(0b[01]+)",H6e="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",V6e=(n={})=>{const e=/^#![ ]*\//;return n.binary&&(n.begin=hm(e,/.*\b/,n.binary,/\b.*/)),Uh({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,i)=>{t.index!==0&&i.ignoreMatch()}},n)},Uy={begin:"\\\\[\\s\\S]",relevance:0},z6e={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Uy]},W6e={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Uy]},$6e={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},wD=function(n,e,t={}){const i=Uh({scope:"comment",begin:n,end:e,contains:[]},t);i.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const r=VB("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return i.contains.push({begin:hm(/[ ]+/,"(",r,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),i},U6e=wD("//","$"),j6e=wD("/\\*","\\*/"),K6e=wD("#","$"),q6e={scope:"number",begin:ece,relevance:0},G6e={scope:"number",begin:tce,relevance:0},Y6e={scope:"number",begin:nce,relevance:0},Z6e={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Uy,{begin:/\[/,end:/\]/,relevance:0,contains:[Uy]}]},X6e={scope:"title",begin:Jle,relevance:0},Q6e={scope:"title",begin:WB,relevance:0},J6e={begin:"\\.\\s*"+WB,relevance:0},e7e=function(n){return Object.assign(n,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})};var Ox=Object.freeze({__proto__:null,APOS_STRING_MODE:z6e,BACKSLASH_ESCAPE:Uy,BINARY_NUMBER_MODE:Y6e,BINARY_NUMBER_RE:nce,COMMENT:wD,C_BLOCK_COMMENT_MODE:j6e,C_LINE_COMMENT_MODE:U6e,C_NUMBER_MODE:G6e,C_NUMBER_RE:tce,END_SAME_AS_BEGIN:e7e,HASH_COMMENT_MODE:K6e,IDENT_RE:Jle,MATCH_NOTHING_RE:B6e,METHOD_GUARD:J6e,NUMBER_MODE:q6e,NUMBER_RE:ece,PHRASAL_WORDS_MODE:$6e,QUOTE_STRING_MODE:W6e,REGEXP_MODE:Z6e,RE_STARTERS_RE:H6e,SHEBANG:V6e,TITLE_MODE:X6e,UNDERSCORE_IDENT_RE:WB,UNDERSCORE_TITLE_MODE:Q6e});function t7e(n,e){n.input[n.index-1]==="."&&e.ignoreMatch()}function n7e(n,e){n.className!==void 0&&(n.scope=n.className,delete n.className)}function i7e(n,e){e&&n.beginKeywords&&(n.begin="\\b("+n.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",n.__beforeBegin=t7e,n.keywords=n.keywords||n.beginKeywords,delete n.beginKeywords,n.relevance===void 0&&(n.relevance=0))}function r7e(n,e){Array.isArray(n.illegal)&&(n.illegal=VB(...n.illegal))}function s7e(n,e){if(n.match){if(n.begin||n.end)throw new Error("begin & end are not supported with match");n.begin=n.match,delete n.match}}function o7e(n,e){n.relevance===void 0&&(n.relevance=1)}const a7e=(n,e)=>{if(!n.beforeMatch)return;if(n.starts)throw new Error("beforeMatch cannot be used with starts");const t=Object.assign({},n);Object.keys(n).forEach(i=>{delete n[i]}),n.keywords=t.keywords,n.begin=hm(t.beforeMatch,Xle(t.begin)),n.starts={relevance:0,contains:[Object.assign(t,{endsParent:!0})]},n.relevance=0,delete t.beforeMatch},l7e=["of","and","for","in","not","or","if","then","parent","list","value"],c7e="keyword";function ice(n,e,t=c7e){const i=Object.create(null);return typeof n=="string"?r(t,n.split(" ")):Array.isArray(n)?r(t,n):Object.keys(n).forEach(function(s){Object.assign(i,ice(n[s],e,s))}),i;function r(s,o){e&&(o=o.map(a=>a.toLowerCase())),o.forEach(function(a){const l=a.split("|");i[l[0]]=[s,u7e(l[0],l[1])]})}}function u7e(n,e){return e?Number(e):d7e(n)?0:1}function d7e(n){return l7e.includes(n.toLowerCase())}const Mq={},fp=n=>{console.error(n)},Rq=(n,...e)=>{console.log(`WARN: ${n}`,...e)},$m=(n,e)=>{Mq[`${n}/${e}`]||(console.log(`Deprecated as of ${n}. ${e}`),Mq[`${n}/${e}`]=!0)},SL=new Error;function rce(n,e,{key:t}){let i=0;const r=n[t],s={},o={};for(let a=1;a<=e.length;a++)o[a+i]=r[a],s[a+i]=!0,i+=Qle(e[a-1]);n[t]=o,n[t]._emit=s,n[t]._multi=!0}function h7e(n){if(Array.isArray(n.begin)){if(n.skip||n.excludeBegin||n.returnBegin)throw fp("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),SL;if(typeof n.beginScope!="object"||n.beginScope===null)throw fp("beginScope must be object"),SL;rce(n,n.begin,{key:"beginScope"}),n.begin=zB(n.begin,{joinWith:""})}}function f7e(n){if(Array.isArray(n.end)){if(n.skip||n.excludeEnd||n.returnEnd)throw fp("skip, excludeEnd, returnEnd not compatible with endScope: {}"),SL;if(typeof n.endScope!="object"||n.endScope===null)throw fp("endScope must be object"),SL;rce(n,n.end,{key:"endScope"}),n.end=zB(n.end,{joinWith:""})}}function g7e(n){n.scope&&typeof n.scope=="object"&&n.scope!==null&&(n.beginScope=n.scope,delete n.scope)}function p7e(n){g7e(n),typeof n.beginScope=="string"&&(n.beginScope={_wrap:n.beginScope}),typeof n.endScope=="string"&&(n.endScope={_wrap:n.endScope}),h7e(n),f7e(n)}function m7e(n){function e(o,a){return new RegExp($y(o),"m"+(n.case_insensitive?"i":"")+(n.unicodeRegex?"u":"")+(a?"g":""))}class t{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,a]),this.matchAt+=Qle(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const a=this.regexes.map(l=>l[1]);this.matcherRe=e(zB(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(a);if(!l)return null;const c=l.findIndex((d,h)=>h>0&&d!==void 0),u=this.matchIndexes[c];return l.splice(0,c),Object.assign(l,u)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];const l=new t;return this.rules.slice(a).forEach(([c,u])=>l.addRule(c,u)),l.compile(),this.multiRegexes[a]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,l){this.rules.push([a,l]),l.type==="begin"&&this.count++}exec(a){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let c=l.exec(a);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,c=u.exec(a)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function r(o){const a=new i;return o.contains.forEach(l=>a.addRule(l.begin,{rule:l,type:"begin"})),o.terminatorEnd&&a.addRule(o.terminatorEnd,{type:"end"}),o.illegal&&a.addRule(o.illegal,{type:"illegal"}),a}function s(o,a){const l=o;if(o.isCompiled)return l;[n7e,s7e,p7e,a7e].forEach(u=>u(o,a)),n.compilerExtensions.forEach(u=>u(o,a)),o.__beforeBegin=null,[i7e,r7e,o7e].forEach(u=>u(o,a)),o.isCompiled=!0;let c=null;return typeof o.keywords=="object"&&o.keywords.$pattern&&(o.keywords=Object.assign({},o.keywords),c=o.keywords.$pattern,delete o.keywords.$pattern),c=c||/\w+/,o.keywords&&(o.keywords=ice(o.keywords,n.case_insensitive)),l.keywordPatternRe=e(c,!0),a&&(o.begin||(o.begin=/\B|\b/),l.beginRe=e(l.begin),!o.end&&!o.endsWithParent&&(o.end=/\B|\b/),o.end&&(l.endRe=e(l.end)),l.terminatorEnd=$y(l.end)||"",o.endsWithParent&&a.terminatorEnd&&(l.terminatorEnd+=(o.end?"|":"")+a.terminatorEnd)),o.illegal&&(l.illegalRe=e(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map(function(u){return v7e(u==="self"?o:u)})),o.contains.forEach(function(u){s(u,l)}),o.starts&&s(o.starts,a),l.matcher=r(l),l}if(n.compilerExtensions||(n.compilerExtensions=[]),n.contains&&n.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return n.classNameAliases=Uh(n.classNameAliases||{}),s(n)}function sce(n){return n?n.endsWithParent||sce(n.starts):!1}function v7e(n){return n.variants&&!n.cachedVariants&&(n.cachedVariants=n.variants.map(function(e){return Uh(n,{variants:null},e)})),n.cachedVariants?n.cachedVariants:sce(n)?Uh(n,{starts:n.starts?Uh(n.starts):null}):Object.isFrozen(n)?Uh(n):n}var b7e="11.9.0";class _7e extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const fR=Zle,Aq=Uh,Oq=Symbol("nomatch"),C7e=7,oce=function(n){const e=Object.create(null),t=Object.create(null),i=[];let r=!0;const s="Could not find the language '{}', did you forget to load/include a language module?",o={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:M6e};function l(T){return a.noHighlightRe.test(T)}function c(T){let N=T.className+" ";N+=T.parentNode?T.parentNode.className:"";const B=a.languageDetectRe.exec(N);if(B){const $=L(B[1]);return $||(Rq(s.replace("{}",B[1])),Rq("Falling back to no-highlight mode for this block.",T)),$?B[1]:"no-highlight"}return N.split(/\s+/).find($=>l($)||L($))}function u(T,N,B){let $="",j="";typeof N=="object"?($=T,B=N.ignoreIllegals,j=N.language):($m("10.7.0","highlight(lang, code, ...args) has been deprecated."),$m("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),j=T,$=N),B===void 0&&(B=!0);const Y={code:$,language:j};V("before:highlight",Y);const G=Y.result?Y.result:d(Y.language,Y.code,B);return G.code=Y.code,V("after:highlight",G),G}function d(T,N,B,$){const j=Object.create(null);function Y(se,fe){return se.keywords[fe]}function G(){if(!Le.keywords){Oe.addText(xe);return}let se=0;Le.keywordPatternRe.lastIndex=0;let fe=Le.keywordPatternRe.exec(xe),Ne="";for(;fe;){Ne+=xe.substring(se,fe.index);const Ve=Ae.case_insensitive?fe[0].toLowerCase():fe[0],lt=Y(Le,Ve);if(lt){const[Dt,Qt]=lt;if(Oe.addText(Ne),Ne="",j[Ve]=(j[Ve]||0)+1,j[Ve]<=C7e&&(at+=Qt),Dt.startsWith("_"))Ne+=fe[0];else{const he=Ae.classNameAliases[Dt]||Dt;re(fe[0],he)}}else Ne+=fe[0];se=Le.keywordPatternRe.lastIndex,fe=Le.keywordPatternRe.exec(xe)}Ne+=xe.substring(se),Oe.addText(Ne)}function X(){if(xe==="")return;let se=null;if(typeof Le.subLanguage=="string"){if(!e[Le.subLanguage]){Oe.addText(xe);return}se=d(Le.subLanguage,xe,!0,Ge[Le.subLanguage]),Ge[Le.subLanguage]=se._top}else se=f(xe,Le.subLanguage.length?Le.subLanguage:null);Le.relevance>0&&(at+=se.relevance),Oe.__addSublanguage(se._emitter,se.language)}function q(){Le.subLanguage!=null?X():G(),xe=""}function re(se,fe){se!==""&&(Oe.startScope(fe),Oe.addText(se),Oe.endScope())}function ge(se,fe){let Ne=1;const Ve=fe.length-1;for(;Ne<=Ve;){if(!se._emit[Ne]){Ne++;continue}const lt=Ae.classNameAliases[se[Ne]]||se[Ne],Dt=fe[Ne];lt?re(Dt,lt):(xe=Dt,G(),xe=""),Ne++}}function ye(se,fe){return se.scope&&typeof se.scope=="string"&&Oe.openNode(Ae.classNameAliases[se.scope]||se.scope),se.beginScope&&(se.beginScope._wrap?(re(xe,Ae.classNameAliases[se.beginScope._wrap]||se.beginScope._wrap),xe=""):se.beginScope._multi&&(ge(se.beginScope,fe),xe="")),Le=Object.create(se,{parent:{value:Le}}),Le}function we(se,fe,Ne){let Ve=P6e(se.endRe,Ne);if(Ve){if(se["on:end"]){const lt=new Tq(se);se["on:end"](fe,lt),lt.isMatchIgnored&&(Ve=!1)}if(Ve){for(;se.endsParent&&se.parent;)se=se.parent;return se}}if(se.endsWithParent)return we(se.parent,fe,Ne)}function Ie(se){return Le.matcher.regexIndex===0?(xe+=se[0],1):(nt=!0,0)}function Fe(se){const fe=se[0],Ne=se.rule,Ve=new Tq(Ne),lt=[Ne.__beforeBegin,Ne["on:begin"]];for(const Dt of lt)if(Dt&&(Dt(se,Ve),Ve.isMatchIgnored))return Ie(fe);return Ne.skip?xe+=fe:(Ne.excludeBegin&&(xe+=fe),q(),!Ne.returnBegin&&!Ne.excludeBegin&&(xe=fe)),ye(Ne,se),Ne.returnBegin?0:fe.length}function ze(se){const fe=se[0],Ne=N.substring(se.index),Ve=we(Le,se,Ne);if(!Ve)return Oq;const lt=Le;Le.endScope&&Le.endScope._wrap?(q(),re(fe,Le.endScope._wrap)):Le.endScope&&Le.endScope._multi?(q(),ge(Le.endScope,se)):lt.skip?xe+=fe:(lt.returnEnd||lt.excludeEnd||(xe+=fe),q(),lt.excludeEnd&&(xe=fe));do Le.scope&&Oe.closeNode(),!Le.skip&&!Le.subLanguage&&(at+=Le.relevance),Le=Le.parent;while(Le!==Ve.parent);return Ve.starts&&ye(Ve.starts,se),lt.returnEnd?0:fe.length}function Me(){const se=[];for(let fe=Le;fe!==Ae;fe=fe.parent)fe.scope&&se.unshift(fe.scope);se.forEach(fe=>Oe.openNode(fe))}let Pe={};function tt(se,fe){const Ne=fe&&fe[0];if(xe+=se,Ne==null)return q(),0;if(Pe.type==="begin"&&fe.type==="end"&&Pe.index===fe.index&&Ne===""){if(xe+=N.slice(fe.index,fe.index+1),!r){const Ve=new Error(`0 width match regex (${T})`);throw Ve.languageName=T,Ve.badRule=Pe.rule,Ve}return 1}if(Pe=fe,fe.type==="begin")return Fe(fe);if(fe.type==="illegal"&&!B){const Ve=new Error('Illegal lexeme "'+Ne+'" for mode "'+(Le.scope||"<unnamed>")+'"');throw Ve.mode=Le,Ve}else if(fe.type==="end"){const Ve=ze(fe);if(Ve!==Oq)return Ve}if(fe.type==="illegal"&&Ne==="")return 1;if(Ct>1e5&&Ct>fe.index*3)throw new Error("potential infinite loop, way more iterations than matches");return xe+=Ne,Ne.length}const Ae=L(T);if(!Ae)throw fp(s.replace("{}",T)),new Error('Unknown language: "'+T+'"');const mt=m7e(Ae);let ft="",Le=$||mt;const Ge={},Oe=new a.__emitter(a);Me();let xe="",at=0,gt=0,Ct=0,nt=!1;try{if(Ae.__emitTokens)Ae.__emitTokens(N,Oe);else{for(Le.matcher.considerAll();;){Ct++,nt?nt=!1:Le.matcher.considerAll(),Le.matcher.lastIndex=gt;const se=Le.matcher.exec(N);if(!se)break;const fe=N.substring(gt,se.index),Ne=tt(fe,se);gt=se.index+Ne}tt(N.substring(gt))}return Oe.finalize(),ft=Oe.toHTML(),{language:T,value:ft,relevance:at,illegal:!1,_emitter:Oe,_top:Le}}catch(se){if(se.message&&se.message.includes("Illegal"))return{language:T,value:fR(N),illegal:!0,relevance:0,_illegalBy:{message:se.message,index:gt,context:N.slice(gt-100,gt+100),mode:se.mode,resultSoFar:ft},_emitter:Oe};if(r)return{language:T,value:fR(N),illegal:!1,relevance:0,errorRaised:se,_emitter:Oe,_top:Le};throw se}}function h(T){const N={value:fR(T),illegal:!1,relevance:0,_top:o,_emitter:new a.__emitter(a)};return N._emitter.addText(T),N}function f(T,N){N=N||a.languages||Object.keys(e);const B=h(T),$=N.filter(L).filter(D).map(q=>d(q,T,!1));$.unshift(B);const j=$.sort((q,re)=>{if(q.relevance!==re.relevance)return re.relevance-q.relevance;if(q.language&&re.language){if(L(q.language).supersetOf===re.language)return 1;if(L(re.language).supersetOf===q.language)return-1}return 0}),[Y,G]=j,X=Y;return X.secondBest=G,X}function g(T,N,B){const $=N&&t[N]||B;T.classList.add("hljs"),T.classList.add(`language-${$}`)}function p(T){let N=null;const B=c(T);if(l(B))return;if(V("before:highlightElement",{el:T,language:B}),T.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",T);return}if(T.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(T)),a.throwUnescapedHTML))throw new _7e("One of your code blocks includes unescaped HTML.",T.innerHTML);N=T;const $=N.textContent,j=B?u($,{language:B,ignoreIllegals:!0}):f($);T.innerHTML=j.value,T.dataset.highlighted="yes",g(T,B,j.language),T.result={language:j.language,re:j.relevance,relevance:j.relevance},j.secondBest&&(T.secondBest={language:j.secondBest.language,relevance:j.secondBest.relevance}),V("after:highlightElement",{el:T,result:j,text:$})}function v(T){a=Aq(a,T)}const b=()=>{C(),$m("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function _(){C(),$m("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let y=!1;function C(){if(document.readyState==="loading"){y=!0;return}document.querySelectorAll(a.cssSelector).forEach(p)}function w(){y&&C()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",w,!1);function x(T,N){let B=null;try{B=N(n)}catch($){if(fp("Language definition for '{}' could not be registered.".replace("{}",T)),r)fp($);else throw $;B=o}B.name||(B.name=T),e[T]=B,B.rawDefinition=N.bind(null,n),B.aliases&&M(B.aliases,{languageName:T})}function k(T){delete e[T];for(const N of Object.keys(t))t[N]===T&&delete t[N]}function E(){return Object.keys(e)}function L(T){return T=(T||"").toLowerCase(),e[T]||e[t[T]]}function M(T,{languageName:N}){typeof T=="string"&&(T=[T]),T.forEach(B=>{t[B.toLowerCase()]=N})}function D(T){const N=L(T);return N&&!N.disableAutodetect}function O(T){T["before:highlightBlock"]&&!T["before:highlightElement"]&&(T["before:highlightElement"]=N=>{T["before:highlightBlock"](Object.assign({block:N.el},N))}),T["after:highlightBlock"]&&!T["after:highlightElement"]&&(T["after:highlightElement"]=N=>{T["after:highlightBlock"](Object.assign({block:N.el},N))})}function A(T){O(T),i.push(T)}function R(T){const N=i.indexOf(T);N!==-1&&i.splice(N,1)}function V(T,N){const B=T;i.forEach(function($){$[B]&&$[B](N)})}function F(T){return $m("10.7.0","highlightBlock will be removed entirely in v12.0"),$m("10.7.0","Please use highlightElement now."),p(T)}Object.assign(n,{highlight:u,highlightAuto:f,highlightAll:C,highlightElement:p,highlightBlock:F,configure:v,initHighlighting:b,initHighlightingOnLoad:_,registerLanguage:x,unregisterLanguage:k,listLanguages:E,getLanguage:L,registerAliases:M,autoDetection:D,inherit:Aq,addPlugin:A,removePlugin:R}),n.debugMode=function(){r=!1},n.safeMode=function(){r=!0},n.versionString=b7e,n.regex={concat:hm,lookahead:Xle,either:VB,optional:A6e,anyNumberOfTimes:R6e};for(const T in Ox)typeof Ox[T]=="object"&&Yle(Ox[T]);return Object.assign(n,Ox),n},S1=oce({});S1.newInstance=()=>oce({});var y7e=S1;S1.HighlightJS=S1;S1.default=S1;const w7e=Ow(y7e),Pq={},S7e="hljs-";function x7e(n){const e=w7e.newInstance();return{highlight:t,highlightAuto:i,listLanguages:r,register:s,registerAlias:o,registered:a};function t(l,c,u){const d=u||Pq,h=typeof d.prefix=="string"?d.prefix:S7e;if(!e.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");e.configure({__emitter:k7e,classPrefix:h});const f=e.highlight(c,{ignoreIllegals:!0,language:l});if(f.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:f.errorRaised});const g=f._emitter.root,p=g.data;return p.language=f.language,p.relevance=f.relevance,g}function i(l,c){const d=(c||Pq).subset||r();let h=-1,f=0,g;for(;++h<d.length;){const p=d[h];if(!e.getLanguage(p))continue;const v=t(p,l,c);v.data&&v.data.relevance!==void 0&&v.data.relevance>f&&(f=v.data.relevance,g=v)}return g||{type:"root",children:[],data:{language:void 0,relevance:f}}}function r(){return e.listLanguages()}function s(l,c){if(typeof l=="string")e.registerLanguage(l,c);else{let u;for(u in l)Object.hasOwn(l,u)&&e.registerLanguage(u,l[u])}}function o(l,c){if(typeof l=="string")e.registerAliases(typeof c=="string"?c:[...c],{languageName:l});else{let u;for(u in l)if(Object.hasOwn(l,u)){const d=l[u];e.registerAliases(typeof d=="string"?d:[...d],{languageName:u})}}}function a(l){return!!e.getLanguage(l)}}class k7e{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const t=this.stack[this.stack.length-1],i=t.children[t.children.length-1];i&&i.type==="text"?i.value+=e:t.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,t){const i=this.stack[this.stack.length-1],r=e.root.children;t?i.children.push({type:"element",tagName:"span",properties:{className:[t]},children:r}):i.children.push(...r)}openNode(e){const t=this,i=e.split(".").map(function(o,a){return a?o+"_".repeat(a):t.options.classPrefix+o}),r=this.stack[this.stack.length-1],s={type:"element",tagName:"span",properties:{className:i},children:[]};r.children.push(s),this.stack.push(s)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const SD={locale:"zh-cn",messages:{undo:"",redo:"",fontStyle:"",text:"",heading1:"",heading2:"",heading3:"",heading4:"",heading5:"",heading6:"",fontSize:"",bold:"",italic:"",strike:"",underLine:"",color:"",highlightColor:"",subscript:"",superscript:"",list:"",orderedList:"",bulletList:"",align:"",alignLeft:"",alignCenter:"",alignRight:"",alignJustify:"",lineHeight:"",indentTitle:"",indent:"",outdent:"",link:"",insertLink:"",editLink:"",linkText:"",linkHref:"",linkPlaceholder:"",linkTarget:"",unLink:"",linkInvalid:"",iframe:"",insertIframe:"",editIframe:"",iframeSrc:"",columns:"",code:"",blockquote:"",horizontalLine:"",taskList:"",table:"",highlightBlock:"",codeBlock:"",language:"",image:"",imageLimit:" {limit}",imageLoadError:"",video:"",videoLimit:" {limit}",videoLoadError:"",file:"",fileLimit:" {limit}",gt:"GT",fullscreen:"",cancelFullscreen:"",edit:"",cancel:"",ok:"",mergeCell:"",splitCell:"",cellColor:"",insertRowAndColumn:"",deleteRowAndColumn:"",insertColumnBefore:"",insertAnyColumnBefore:"{num}",insertColumnAfter:"",insertAnyColumnAfter:"{num}",insertRowBefore:"",insertAnyRowBefore:"{num}",insertRowAfter:"",insertAnyRowAfter:"{num}",deleteColumn:"",deleteCurrentColumn:"",deleteRow:"",deleteCurrentRow:"",deleteTable:"",toggleTableHeader:"",setTableHeaderRow:"",setTableHeaderColumn:"",cancelTableHeaderRow:"",cancelTableHeaderColumn:"",delete:"",reset:"",download:"",preview:"",uploading:"",searchAndReplace:"",search:"",searchPlaceholder:"",replace:"",replacePlaceholder:"",replaceAs:"",replaceAll:"",searchPrevious:"",searchNext:"",fullInEditor:"",clearFormat:"",peopleEmoji:"",natureEmoji:"",foodsEmoji:"",activityEmoji:"",placesEmoji:"",objectsEmoji:"",symbolsEmoji:"",sizeLessThan:"{MIN_SIZE}px",sizeGreaterThan:"{MAX_SIZE}px",copyNode:"",more:""}},ace=m.createContext(void 0),E7e=n=>{const{locale:e,children:t}=n,i=m.useMemo(()=>e||SD,[e]);return P.jsx(ace.Provider,{value:i,children:t})},$B=m.createContext(void 0);function ln(){const n=m.useContext($B);if(n===void 0)throw new Error(`${qe} editor not found in component context. Be sure to use <EditorContext editor={editor} />!`);return n}function jt(){const n=m.useContext(ace);return(n==null?void 0:n.messages)??SD.messages}const L7e=(n,e)=>{const t=document.createElement("a");t.href=n,t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)},N7e=n=>{const e=n.split(".");return e.length>1?e.pop():null};function T7e(n){const e=n.responseText||n.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const UB=n=>{const{file:e,url:t,onProgress:i,onSuccess:r,onError:s,onAbort:o,headers:a={},fieldName:l="file"}=n;if(!e)throw new Error("");const c=new FormData;c.append(l,e);const u=new XMLHttpRequest;return u.open("POST",t,!0),Object.entries(a).forEach(([d,h])=>{u.setRequestHeader(d,h)}),u.upload.addEventListener("progress",d=>{d.total>0&&(i==null||i(d.loaded/d.total*100))}),u.addEventListener("load",()=>{if(u.status>=200&&u.status<300){const d=T7e(u);let h="";d&&typeof d=="object"&&(h=d.src||d.data&&d.data.src||""),r==null||r({src:h,...d})}else s==null||s(new Error(`: ${u.status} ${u.statusText}`))}),u.addEventListener("error",()=>{s==null||s(new Error(""))}),u.addEventListener("abort",()=>{o==null||o()}),u.send(c),u},lce=n=>{if(!n)return"";const{selection:e,doc:t}=n.state,i=qd("link",n.schema),r=uD(e.$to,i);return r?t.textBetween(r.from,r.to):t.textBetween(e.$from.pos,e.$to.pos)},I7e=n=>!n||typeof n!="string"?!1:new RegExp("^(https?:\\/\\/)?([a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?(:\\d{1,5})?(\\/[^\\s]*)?$","i").test(n),cce=(n,e)=>{const t=new Map;return n.forEach(i=>{t.set(i.name,i)}),e.forEach(i=>{t.set(i.name,i)}),Array.from(t.values())},D7e=n=>{if(!n)return"";try{return n.split("-").map(e=>String.fromCodePoint(parseInt(e,16))).join("")}catch{return n}},rS=n=>{if(n===0)return"0 B";const e=1024,t=["B","KB","MB","GB","TB"],i=Math.floor(Math.log(n)/Math.log(e));if(i>=t.length)return`${(n/e**(t.length-1)).toFixed(2)} ${t[t.length-1]}`;const r=n/e**i;return`${r%1===0?r.toFixed(0):r.toFixed(2)} ${t[i]}`},cb=n=>!n||typeof n!="object"?{}:Object.entries(n).reduce((e,[t,i])=>t.startsWith("data-")?{...e,[t]:i}:e,{}),{Option:M7e}=zp,R7e=n=>{const{editor:e,node:t,updateAttributes:i,extension:r}=n,s=jt(),o=r.options.lowlight.listLanguages(),a=t.attrs.language,l=m.useCallback(u=>{i({language:u})},[i]),c=e.isActive("codeBlock");return{locale:s,currentLanguage:a,supportedLanguages:o,showLanguageSelector:c,handleLanguageChange:l}};function A7e(n){const{HTMLAttributes:e}=n,{locale:t,currentLanguage:i,supportedLanguages:r,showLanguageSelector:s,handleLanguageChange:o}=R7e(n);return P.jsxs(ob,{className:`${qe}-code-block`,...cb(e),children:[s&&P.jsx(zp,{placeholder:t.language,defaultValue:i,onChange:o,children:r.map(a=>P.jsx(M7e,{value:a,children:s5e[a]||a},a))}),P.jsx("pre",{children:P.jsx(qae,{as:"code"})})]})}const ri=x7e();ri.register("html",zle);ri.register("css",x8e);ri.register("javascript",T8e);ri.register("typescript",D8e);ri.register("bash",M8e);ri.register("csharp",R8e);ri.register("cpp",A8e);ri.register("c",O8e);ri.register("dart",P8e);ri.register("diff",F8e);ri.register("dockerfile",B8e);ri.register("go",H8e);ri.register("graphql",V8e);ri.register("http",z8e);ri.register("json",W8e);ri.register("java",$8e);ri.register("kotlin",j8e);ri.register("lua",K8e);ri.register("less",e6e);ri.register("markdown",t6e);ri.register("nginx",n6e);ri.register("objectivec",i6e);ri.register("php",r6e);ri.register("powershell",s6e);ri.register("python",o6e);ri.register("ruby",a6e);ri.register("rust",l6e);ri.register("scss",v6e);ri.register("sql",b6e);ri.register("shell",_6e);ri.register("swift",L6e);ri.register("xml",zle);ri.register("yaml",N6e);const uce=p8e.extend({isolating:!0,addNodeView(){return ab(A7e)}}).configure({lowlight:ri}),O7e=Gi.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:n}){return["td",Gn(this.options.HTMLAttributes,n),0]}}),P7e=O7e.extend({addAttributes(){var n;return{...(n=this.parent)==null?void 0:n.call(this),bgColor:{default:null,parseHTML:e=>e.dataset.bgColor,renderHTML:e=>{const{bgColor:t}=e;return t===null?{}:{"data-bg-color":t,style:`background-color: ${t}`}}}}}}),F7e=pi.create({name:"indent",addOptions(){return{types:["heading","paragraph","orderedList","bulletList","taskList"],step:20,maxIndent:200}},addGlobalAttributes(){return[{types:this.options.types,attributes:{indent:{default:0,parseHTML:n=>{const{paddingLeft:e}=n.style;return e?parseInt(e,10):0},renderHTML:n=>n.indent===0?{}:{style:`padding-left: ${n.indent}px`}}}}]},addCommands(){const n=e=>({state:t,commands:i})=>{const{from:r,to:s}=t.selection;let o=!0;return t.doc.nodesBetween(r,s,(a,l,c)=>{if(!a.isBlock||c!==t.doc)return;if(!this.options.types.includes(a.type.name)){o=!1;return}const{step:u,maxIndent:d=1/0}=this.options;let h;if(e)h=Math.min(a.attrs.indent+u,d);else{if(a.attrs.indent===0){o=!1;return}h=Math.max(a.attrs.indent-u,0)}i.updateAttributes(a.type,{indent:h})}),o};return{setIndent:()=>n(!0),setOutdent:()=>n(!1)}},addKeyboardShortcuts(){return{"Mod-]":()=>this.editor.commands.setIndent(),"Mod-[":()=>this.editor.commands.setOutdent()}}}),B7e=pi.create({name:"lineHeight",addOptions(){return{types:["heading","paragraph"],defaultLineHeight:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:this.options.defaultLineHeight,parseHTML:n=>{const{lineHeight:e}=n.style;return e?e.replace(/['"]+/g,""):null},renderHTML:n=>n.lineHeight?{style:`line-height: ${n.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:n=>({commands:e})=>this.options.types.map(t=>e.updateAttributes(t,{lineHeight:n})).every(t=>t),unsetLineHeight:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"lineHeight")).every(e=>e)}}}),H7e=Gi.create({name:"columns",group:"block",content:"column+",defining:!0,isolating:!0,draggable:!0,addOptions(){return{HTMLAttributes:{},maxColumns:5}},parseHTML(){return[{tag:`div[data-type="${this.name}"]`}]},renderHTML({HTMLAttributes:n}){return["div",Gn({class:this.name,"data-type":this.name},this.options.HTMLAttributes,n),0]},addCommands(){return{setColumns:n=>({state:e,commands:t})=>{const{$from:i}=e.selection;for(let{depth:r}=i;r>0;r--)if(i.node(r).type.name==="column")return!1;return t.insertContent({type:"columns",content:Array.from({length:n.column},()=>({type:"column",content:[{type:"paragraph"}]}))}),!0}}}}),V7e=Gi.create({name:"column",content:"block+",isolating:!0,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:`div[data-type="${this.name}"]`}]},renderHTML({HTMLAttributes:n}){return["div",Gn({class:this.name,"data-type":this.name},this.options.HTMLAttributes,n),0]}});function Fq({types:n,node:e}){return Array.isArray(n)&&n.includes(e.type)||e.type===n}const z7e=pi.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:["paragraph"]}},addProseMirrorPlugins(){const n=new zi(this.name),e=Object.entries(this.editor.schema.nodes).map(([,t])=>t).filter(t=>this.options.notAfter.includes(t.name));return[new Ni({key:n,appendTransaction:(t,i,r)=>{const{doc:s,tr:o,schema:a}=r,l=n.getState(r),c=s.content.size,u=a.nodes[this.options.node];if(l)return o.insert(c,u.create())},state:{init:(t,i)=>{const r=i.tr.doc.lastChild;return!Fq({node:r,types:e})},apply:(t,i)=>{if(!t.docChanged)return i;const r=t.doc.lastChild;return!Fq({node:r,types:e})}}})]}}),W7e="modulepreload",$7e=function(n,e){return new URL(n,e).href},Bq={},dce=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=$7e(c,i),c in Bq)return;Bq[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!i)for(let g=o.length-1;g>=0;g--){const p=o[g];if(p.href===c&&(!u||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":W7e,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((g,p)=>{f.addEventListener("load",g),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function hce(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var fce=typeof window<"u"&&typeof document<"u";function wP(n,e){n&&(typeof n=="function"&&n(e),{}.hasOwnProperty.call(n,"current")&&(n.current=e))}function Hq(){return fce&&document.createElement("div")}function U7e(n){var e={"data-placement":n.placement};return n.referenceHidden&&(e["data-reference-hidden"]=""),n.escaped&&(e["data-escaped"]=""),e}function gce(n,e){if(n===e)return!0;if(typeof n=="object"&&n!=null&&typeof e=="object"&&e!=null){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(var t in n)if(e.hasOwnProperty(t)){if(!gce(n[t],e[t]))return!1}else return!1;return!0}else return!1}function j7e(n){var e=[];return n.forEach(function(t){e.find(function(i){return gce(t,i)})||e.push(t)}),e}function K7e(n,e){var t,i;return Object.assign({},e,{popperOptions:Object.assign({},n.popperOptions,e.popperOptions,{modifiers:j7e([].concat(((t=n.popperOptions)==null?void 0:t.modifiers)||[],((i=e.popperOptions)==null?void 0:i.modifiers)||[]))})})}var gR=fce?m.useLayoutEffect:m.useEffect;function q7e(n){var e=m.useRef();return e.current||(e.current=typeof n=="function"?n():n),e.current}function Vq(n,e,t){t.split(/\s+/).forEach(function(i){i&&n.classList[e](i)})}var G7e={name:"className",defaultValue:"",fn:function(e){var t=e.popper.firstElementChild,i=function(){var a;return!!((a=e.props.render)!=null&&a.$$tippy)};function r(){e.props.className&&!i()||Vq(t,"add",e.props.className)}function s(){i()&&Vq(t,"remove",e.props.className)}return{onCreate:r,onBeforeUpdate:s,onAfterUpdate:r}}};function Y7e(n){function e(t){var i=t.children,r=t.content,s=t.visible,o=t.singleton,a=t.render,l=t.reference,c=t.disabled,u=c===void 0?!1:c,d=t.ignoreAttributes,h=d===void 0?!0:d;t.__source,t.__self;var f=hce(t,["children","content","visible","singleton","render","reference","disabled","ignoreAttributes","__source","__self"]),g=s!==void 0,p=o!==void 0,v=m.useState(!1),b=v[0],_=v[1],y=m.useState({}),C=y[0],w=y[1],x=m.useState(),k=x[0],E=x[1],L=q7e(function(){return{container:Hq(),renders:1}}),M=Object.assign({ignoreAttributes:h},f,{content:L.container});g&&(M.trigger="manual",M.hideOnClick=!1),p&&(u=!0);var D=M,O=M.plugins||[];a&&(D=Object.assign({},M,{plugins:p&&o.data!=null?[].concat(O,[{fn:function(){return{onTrigger:function(F,T){var N=o.data.children.find(function(B){var $=B.instance;return $.reference===T.currentTarget});F.state.$$activeSingletonInstance=N.instance,E(N.content)}}}}]):O,render:function(){return{popper:L.container}}}));var A=[l].concat(i?[i.type]:[]);return gR(function(){var R=l;l&&l.hasOwnProperty("current")&&(R=l.current);var V=n(R||L.ref||Hq(),Object.assign({},D,{plugins:[G7e].concat(M.plugins||[])}));return L.instance=V,u&&V.disable(),s&&V.show(),p&&o.hook({instance:V,content:r,props:D,setSingletonContent:E}),_(!0),function(){V.destroy(),o==null||o.cleanup(V)}},A),gR(function(){var R;if(L.renders===1){L.renders++;return}var V=L.instance;V.setProps(K7e(V.props,D)),(R=V.popperInstance)==null||R.forceUpdate(),u?V.disable():V.enable(),g&&(s?V.show():V.hide()),p&&o.hook({instance:V,content:r,props:D,setSingletonContent:E})}),gR(function(){var R;if(a){var V=L.instance;V.setProps({popperOptions:Object.assign({},V.props.popperOptions,{modifiers:[].concat((((R=V.props.popperOptions)==null?void 0:R.modifiers)||[]).filter(function(F){var T=F.name;return T!=="$$tippyReact"}),[{name:"$$tippyReact",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(T){var N,B=T.state,$=(N=B.modifiersData)==null?void 0:N.hide;(C.placement!==B.placement||C.referenceHidden!==($==null?void 0:$.isReferenceHidden)||C.escaped!==($==null?void 0:$.hasPopperEscaped))&&w({placement:B.placement,referenceHidden:$==null?void 0:$.isReferenceHidden,escaped:$==null?void 0:$.hasPopperEscaped}),B.attributes.popper={}}}])})})}},[C.placement,C.referenceHidden,C.escaped].concat(A)),Ue.createElement(Ue.Fragment,null,i?m.cloneElement(i,{ref:function(V){L.ref=V,wP(i.ref,V)}}):null,b&&uc.createPortal(a?a(U7e(C),k,L.instance):r,L.container))}return e}var Z7e=function(n,e){return m.forwardRef(function(i,r){var s=i.children,o=hce(i,["children"]);return Ue.createElement(n,Object.assign({},e,o),s?m.cloneElement(s,{ref:function(l){wP(r,l),wP(s.ref,l)}}):null)})},pce=Z7e(Y7e(Uf)),mce=m.createContext({});const Jr=Math.round;function pR(n,e){const t=n.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],i=t.map(r=>parseFloat(r));for(let r=0;r<3;r+=1)i[r]=e(i[r]||0,t[r]||"",r);return t[3]?i[3]=t[3].includes("%")?i[3]/100:i[3]:i[3]=1,i}const zq=(n,e,t)=>t===0?n:n/100;function Kb(n,e){const t=e||255;return n>t?t:n<0?0:n}class Dv{constructor(e){z(this,"isValid",!0),z(this,"r",0),z(this,"g",0),z(this,"b",0),z(this,"a",1),z(this,"_h",void 0),z(this,"_s",void 0),z(this,"_l",void 0),z(this,"_v",void 0),z(this,"_max",void 0),z(this,"_min",void 0),z(this,"_brightness",void 0);function t(i){return i[0]in e&&i[1]in e&&i[2]in e}if(e)if(typeof e=="string"){let r=function(s){return i.startsWith(s)};const i=e.trim();/^#?[A-F\d]{3,8}$/i.test(i)?this.fromHexString(i):r("rgb")?this.fromRgbString(i):r("hsl")?this.fromHslString(i):(r("hsv")||r("hsb"))&&this.fromHsvString(i)}else if(e instanceof Dv)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(t("rgb"))this.r=Kb(e.r),this.g=Kb(e.g),this.b=Kb(e.b),this.a=typeof e.a=="number"?Kb(e.a,1):1;else if(t("hsl"))this.fromHsl(e);else if(t("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const t=this.toHsv();return t.h=e,this._c(t)}getLuminance(){function e(s){const o=s/255;return o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)}const t=e(this.r),i=e(this.g),r=e(this.b);return .2126*t+.7152*i+.0722*r}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=Jr(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const t=this.getHue(),i=this.getSaturation();let r=this.getLightness()-e/100;return r<0&&(r=0),this._c({h:t,s:i,l:r,a:this.a})}lighten(e=10){const t=this.getHue(),i=this.getSaturation();let r=this.getLightness()+e/100;return r>1&&(r=1),this._c({h:t,s:i,l:r,a:this.a})}mix(e,t=50){const i=this._c(e),r=t/100,s=a=>(i[a]-this[a])*r+this[a],o={r:Jr(s("r")),g:Jr(s("g")),b:Jr(s("b")),a:Jr(s("a")*100)/100};return this._c(o)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const t=this._c(e),i=this.a+t.a*(1-this.a),r=s=>Jr((this[s]*this.a+t[s]*t.a*(1-this.a))/i);return this._c({r:r("r"),g:r("g"),b:r("b"),a:i})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const t=(this.r||0).toString(16);e+=t.length===2?t:"0"+t;const i=(this.g||0).toString(16);e+=i.length===2?i:"0"+i;const r=(this.b||0).toString(16);if(e+=r.length===2?r:"0"+r,typeof this.a=="number"&&this.a>=0&&this.a<1){const s=Jr(this.a*255).toString(16);e+=s.length===2?s:"0"+s}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),t=Jr(this.getSaturation()*100),i=Jr(this.getLightness()*100);return this.a!==1?`hsla(${e},${t}%,${i}%,${this.a})`:`hsl(${e},${t}%,${i}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,t,i){const r=this.clone();return r[e]=Kb(t,i),r}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const t=e.replace("#","");function i(r,s){return parseInt(t[r]+t[s||r],16)}t.length<6?(this.r=i(0),this.g=i(1),this.b=i(2),this.a=t[3]?i(3)/255:1):(this.r=i(0,1),this.g=i(2,3),this.b=i(4,5),this.a=t[6]?i(6,7)/255:1)}fromHsl({h:e,s:t,l:i,a:r}){if(this._h=e%360,this._s=t,this._l=i,this.a=typeof r=="number"?r:1,t<=0){const h=Jr(i*255);this.r=h,this.g=h,this.b=h}let s=0,o=0,a=0;const l=e/60,c=(1-Math.abs(2*i-1))*t,u=c*(1-Math.abs(l%2-1));l>=0&&l<1?(s=c,o=u):l>=1&&l<2?(s=u,o=c):l>=2&&l<3?(o=c,a=u):l>=3&&l<4?(o=u,a=c):l>=4&&l<5?(s=u,a=c):l>=5&&l<6&&(s=c,a=u);const d=i-c/2;this.r=Jr((s+d)*255),this.g=Jr((o+d)*255),this.b=Jr((a+d)*255)}fromHsv({h:e,s:t,v:i,a:r}){this._h=e%360,this._s=t,this._v=i,this.a=typeof r=="number"?r:1;const s=Jr(i*255);if(this.r=s,this.g=s,this.b=s,t<=0)return;const o=e/60,a=Math.floor(o),l=o-a,c=Jr(i*(1-t)*255),u=Jr(i*(1-t*l)*255),d=Jr(i*(1-t*(1-l))*255);switch(a){case 0:this.g=d,this.b=c;break;case 1:this.r=u,this.b=c;break;case 2:this.r=c,this.b=d;break;case 3:this.r=c,this.g=u;break;case 4:this.r=d,this.g=c;break;case 5:default:this.g=c,this.b=u;break}}fromHsvString(e){const t=pR(e,zq);this.fromHsv({h:t[0],s:t[1],v:t[2],a:t[3]})}fromHslString(e){const t=pR(e,zq);this.fromHsl({h:t[0],s:t[1],l:t[2],a:t[3]})}fromRgbString(e){const t=pR(e,(i,r)=>r.includes("%")?Jr(i/100*255):i);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}}var Px=2,Wq=.16,X7e=.05,Q7e=.05,J7e=.15,vce=5,bce=4,e9e=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function $q(n,e,t){var i;return Math.round(n.h)>=60&&Math.round(n.h)<=240?i=t?Math.round(n.h)-Px*e:Math.round(n.h)+Px*e:i=t?Math.round(n.h)+Px*e:Math.round(n.h)-Px*e,i<0?i+=360:i>=360&&(i-=360),i}function Uq(n,e,t){if(n.h===0&&n.s===0)return n.s;var i;return t?i=n.s-Wq*e:e===bce?i=n.s+Wq:i=n.s+X7e*e,i>1&&(i=1),t&&e===vce&&i>.1&&(i=.1),i<.06&&(i=.06),Math.round(i*100)/100}function jq(n,e,t){var i;return t?i=n.v+Q7e*e:i=n.v-J7e*e,i=Math.max(0,Math.min(1,i)),Math.round(i*100)/100}function t9e(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],i=new Dv(n),r=i.toHsv(),s=vce;s>0;s-=1){var o=new Dv({h:$q(r,s,!0),s:Uq(r,s,!0),v:jq(r,s,!0)});t.push(o)}t.push(i);for(var a=1;a<=bce;a+=1){var l=new Dv({h:$q(r,a),s:Uq(r,a),v:jq(r,a)});t.push(l)}return e.theme==="dark"?e9e.map(function(c){var u=c.index,d=c.amount;return new Dv(e.backgroundColor||"#141414").mix(t[u],d).toHexString()}):t.map(function(c){return c.toHexString()})}var SP=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];SP.primary=SP[5];function _ce(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}function n9e(n){return _ce(n)instanceof ShadowRoot}function i9e(n){return n9e(n)?_ce(n):null}function r9e(n){return n.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function s9e(n,e){ps(n,"[@ant-design/icons] ".concat(e))}function Kq(n){return Rt(n)==="object"&&typeof n.name=="string"&&typeof n.theme=="string"&&(Rt(n.icon)==="object"||typeof n.icon=="function")}function qq(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(n).reduce(function(e,t){var i=n[t];switch(t){case"class":e.className=i,delete e.class;break;default:delete e[t],e[r9e(t)]=i}return e},{})}function xP(n,e,t){return t?Ue.createElement(n.tag,ne(ne({key:e},qq(n.attrs)),t),(n.children||[]).map(function(i,r){return xP(i,"".concat(e,"-").concat(n.tag,"-").concat(r))})):Ue.createElement(n.tag,ne({key:e},qq(n.attrs)),(n.children||[]).map(function(i,r){return xP(i,"".concat(e,"-").concat(n.tag,"-").concat(r))}))}function Cce(n){return t9e(n)[0]}function yce(n){return n?Array.isArray(n)?n:[n]:[]}var o9e=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,a9e=function(e){var t=m.useContext(mce),i=t.csp,r=t.prefixCls,s=t.layer,o=o9e;r&&(o=o.replace(/anticon/g,r)),s&&(o="@layer ".concat(s,` {
`).concat(o,`
}`)),m.useEffect(function(){var a=e.current,l=i9e(a);X1(o,"@ant-design-icons",{prepend:!s,csp:i,attachTo:l})},[])},l9e=["icon","className","onClick","style","primaryColor","secondaryColor"],cC={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function c9e(n){var e=n.primaryColor,t=n.secondaryColor;cC.primaryColor=e,cC.secondaryColor=t||Cce(e),cC.calculated=!!t}function u9e(){return ne({},cC)}var ub=function(e){var t=e.icon,i=e.className,r=e.onClick,s=e.style,o=e.primaryColor,a=e.secondaryColor,l=sn(e,l9e),c=m.useRef(),u=cC;if(o&&(u={primaryColor:o,secondaryColor:a||Cce(o)}),a9e(c),s9e(Kq(t),"icon should be icon definiton, but got ".concat(t)),!Kq(t))return null;var d=t;return d&&typeof d.icon=="function"&&(d=ne(ne({},d),{},{icon:d.icon(u.primaryColor,u.secondaryColor)})),xP(d.icon,"svg-".concat(d.name),ne(ne({className:i,onClick:r,style:s,"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:c}))};ub.displayName="IconReact";ub.getTwoToneColors=u9e;ub.setTwoToneColors=c9e;function wce(n){var e=yce(n),t=Ce(e,2),i=t[0],r=t[1];return ub.setTwoToneColors({primaryColor:i,secondaryColor:r})}function d9e(){var n=ub.getTwoToneColors();return n.calculated?[n.primaryColor,n.secondaryColor]:n.primaryColor}var h9e=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];wce(SP.primary);var Kt=m.forwardRef(function(n,e){var t=n.className,i=n.icon,r=n.spin,s=n.rotate,o=n.tabIndex,a=n.onClick,l=n.twoToneColor,c=sn(n,h9e),u=m.useContext(mce),d=u.prefixCls,h=d===void 0?"anticon":d,f=u.rootClassName,g=Ee(f,h,z(z({},"".concat(h,"-").concat(i.name),!!i.name),"".concat(h,"-spin"),!!r||i.name==="loading"),t),p=o;p===void 0&&a&&(p=-1);var v=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,b=yce(l),_=Ce(b,2),y=_[0],C=_[1];return m.createElement("span",J({role:"img","aria-label":i.name},c,{ref:e,tabIndex:p,onClick:a,className:g}),m.createElement(ub,{icon:i,primaryColor:y,secondaryColor:C,style:v}))});Kt.displayName="AntdIcon";Kt.getTwoToneColor=d9e;Kt.setTwoToneColor=wce;var f9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm496 424c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zm144 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"align-center",theme:"outlined"},g9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:f9e}))},jB=m.forwardRef(g9e),p9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0 424h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm784 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"align-left",theme:"outlined"},m9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:p9e}))},xL=m.forwardRef(m9e),v9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 424H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 212H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"align-right",theme:"outlined"},b9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:v9e}))},KB=m.forwardRef(b9e),_9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zm-377.1-44.1c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-.6-.6-1.3-1.2-2-1.7l-78.2-78.2a9.11 9.11 0 00-12.8 0l-48 48a9.11 9.11 0 000 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256zm12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"bg-colors",theme:"outlined"},C9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:_9e}))},Sce=m.forwardRef(C9e),y9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M697.8 481.4c33.6-35 54.2-82.3 54.2-134.3v-10.2C752 229.3 663.9 142 555.3 142H259.4c-15.1 0-27.4 12.3-27.4 27.4v679.1c0 16.3 13.2 29.5 29.5 29.5h318.7c117 0 211.8-94.2 211.8-210.5v-11c0-73-37.4-137.3-94.2-175.1zM328 238h224.7c57.1 0 103.3 44.4 103.3 99.3v9.5c0 54.8-46.3 99.3-103.3 99.3H328V238zm366.6 429.4c0 62.9-51.7 113.9-115.5 113.9H328V542.7h251.1c63.8 0 115.5 51 115.5 113.9v10.8z"}}]},name:"bold",theme:"outlined"},w9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:y9e}))},S9e=m.forwardRef(w9e),x9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:lTe}))},k9e=m.forwardRef(x9e),E9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:cTe}))},L9e=m.forwardRef(E9e),N9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:Vre}))},xD=m.forwardRef(N9e),T9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M433.1 657.7a31.8 31.8 0 0051.7 0l210.6-292c3.8-5.3 0-12.7-6.5-12.7H642c-10.2 0-19.9 4.9-25.9 13.3L459 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H315c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"check-square",theme:"outlined"},I9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:T9e}))},xce=m.forwardRef(I9e),D9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},M9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:D9e}))},kce=m.forwardRef(M9e),R9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:Vie}))},A9e=m.forwardRef(R9e),O9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:dTe}))},P9e=m.forwardRef(O9e),F9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M651.1 641.9a7.84 7.84 0 00-5.1-1.9h-54.7c-2.4 0-4.6 1.1-6.1 2.9L512 730.7l-73.1-87.8a8.1 8.1 0 00-6.1-2.9H378c-1.9 0-3.7.7-5.1 1.9a7.97 7.97 0 00-1 11.3L474.2 776 371.8 898.9a8.06 8.06 0 006.1 13.2h54.7c2.4 0 4.6-1.1 6.1-2.9l73.1-87.8 73.1 87.8a8.1 8.1 0 006.1 2.9h55c1.9 0 3.7-.7 5.1-1.9 3.4-2.8 3.9-7.9 1-11.3L549.8 776l102.4-122.9c2.8-3.4 2.3-8.4-1.1-11.2zM472 544h80c4.4 0 8-3.6 8-8V120c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8v416c0 4.4 3.6 8 8 8zM350 386H184V136c0-3.3-2.7-6-6-6h-60c-3.3 0-6 2.7-6 6v292c0 16.6 13.4 30 30 30h208c3.3 0 6-2.7 6-6v-60c0-3.3-2.7-6-6-6zm556-256h-60c-3.3 0-6 2.7-6 6v250H674c-3.3 0-6 2.7-6 6v60c0 3.3 2.7 6 6 6h208c16.6 0 30-13.4 30-30V136c0-3.3-2.7-6-6-6z"}}]},name:"delete-column",theme:"outlined"},B9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:F9e}))},H9e=m.forwardRef(B9e),V9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:uTe}))},sS=m.forwardRef(V9e),z9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M819.8 512l102.4-122.9a8.06 8.06 0 00-6.1-13.2h-54.7c-2.4 0-4.6 1.1-6.1 2.9L782 466.7l-73.1-87.8a8.1 8.1 0 00-6.1-2.9H648c-1.9 0-3.7.7-5.1 1.9a7.97 7.97 0 00-1 11.3L744.2 512 641.8 634.9a8.06 8.06 0 006.1 13.2h54.7c2.4 0 4.6-1.1 6.1-2.9l73.1-87.8 73.1 87.8a8.1 8.1 0 006.1 2.9h55c1.9 0 3.7-.7 5.1-1.9 3.4-2.8 3.9-7.9 1-11.3L819.8 512zM536 464H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h416c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8zm-84 204h-60c-3.3 0-6 2.7-6 6v166H136c-3.3 0-6 2.7-6 6v60c0 3.3 2.7 6 6 6h292c16.6 0 30-13.4 30-30V674c0-3.3-2.7-6-6-6zM136 184h250v166c0 3.3 2.7 6 6 6h60c3.3 0 6-2.7 6-6V142c0-16.6-13.4-30-30-30H136c-3.3 0-6 2.7-6 6v60c0 3.3 2.7 6 6 6z"}}]},name:"delete-row",theme:"outlined"},W9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:z9e}))},Ece=m.forwardRef(W9e),$9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832.6 191.4c-84.6-84.6-221.5-84.6-306 0l-96.9 96.9 51 51 96.9-96.9c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204l-96.9 96.9 51.1 51.1 96.9-96.9c84.4-84.6 84.4-221.5-.1-306.1zM446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l96.9-96.9-51.1-51.1-96.9 96.9c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l96.9-96.9-51-51-96.8 97zM260.3 209.4a8.03 8.03 0 00-11.3 0L209.4 249a8.03 8.03 0 000 11.3l554.4 554.4c3.1 3.1 8.2 3.1 11.3 0l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3L260.3 209.4z"}}]},name:"disconnect",theme:"outlined"},U9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:$9e}))},j9e=m.forwardRef(U9e),K9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:hTe}))},Lce=m.forwardRef(K9e),q9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:Yre}))},G9e=m.forwardRef(q9e),Y9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8zm-650.3-80h85c4.2 0 8-2.7 9.3-6.8l53.7-166h219.2l53.2 166c1.3 4 5 6.8 9.3 6.8h89.1c1.1 0 2.2-.2 3.2-.5a9.7 9.7 0 006-12.4L573.6 118.6a9.9 9.9 0 00-9.2-6.6H462.1c-4.2 0-7.9 2.6-9.2 6.6L244.5 723.1c-.4 1-.5 2.1-.5 3.2-.1 5.3 4.3 9.7 9.7 9.7zm255.9-516.1h4.1l83.8 263.8H424.9l84.7-263.8z"}}]},name:"font-colors",theme:"outlined"},Z9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:Y9e}))},X9e=m.forwardRef(Z9e),Q9e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 416H616c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-56h60v320h-46c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h164c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-46V480h60v56c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V424c0-4.4-3.6-8-8-8zM656 296V168c0-4.4-3.6-8-8-8H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8z"}}]},name:"font-size",theme:"outlined"},J9e=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:Q9e}))},qB=m.forwardRef(J9e),eFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"},tFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:eFe}))},nFe=m.forwardRef(tFe),iFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},rFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:iFe}))},sFe=m.forwardRef(rFe),oFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"filled"},aFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:oFe}))},lFe=m.forwardRef(aFe),cFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:aTe}))},uFe=m.forwardRef(cFe),dFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:zie}))},Nce=m.forwardRef(dFe),hFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M878.7 336H145.3c-18.4 0-33.3 14.3-33.3 32v464c0 17.7 14.9 32 33.3 32h733.3c18.4 0 33.3-14.3 33.3-32V368c.1-17.7-14.8-32-33.2-32zM360 792H184V632h176v160zm0-224H184V408h176v160zm240 224H424V632h176v160zm0-224H424V408h176v160zm240 224H664V632h176v160zm0-224H664V408h176v160zm64-408H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"insert-row-above",theme:"outlined"},fFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:hFe}))},Tce=m.forwardRef(fFe),gFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M904 768H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8zm-25.3-608H145.3c-18.4 0-33.3 14.3-33.3 32v464c0 17.7 14.9 32 33.3 32h733.3c18.4 0 33.3-14.3 33.3-32V192c.1-17.7-14.8-32-33.2-32zM360 616H184V456h176v160zm0-224H184V232h176v160zm240 224H424V456h176v160zm0-224H424V232h176v160zm240 224H664V456h176v160zm0-224H664V232h176v160z"}}]},name:"insert-row-below",theme:"outlined"},pFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:gFe}))},mFe=m.forwardRef(pFe),vFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M248 112h-80c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V120c0-4.4-3.6-8-8-8zm584 0H368c-17.7 0-32 14.9-32 33.3v733.3c0 18.4 14.3 33.3 32 33.3h464c17.7 0 32-14.9 32-33.3V145.3c0-18.4-14.3-33.3-32-33.3zM568 840H408V664h160v176zm0-240H408V424h160v176zm0-240H408V184h160v176zm224 480H632V664h160v176zm0-240H632V424h160v176zm0-240H632V184h160v176z"}}]},name:"insert-row-left",theme:"outlined"},bFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:vFe}))},_Fe=m.forwardRef(bFe),CFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M856 112h-80c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V120c0-4.4-3.6-8-8-8zm-200 0H192c-17.7 0-32 14.9-32 33.3v733.3c0 18.4 14.3 33.3 32 33.3h464c17.7 0 32-14.9 32-33.3V145.3c0-18.4-14.3-33.3-32-33.3zM392 840H232V664h160v176zm0-240H232V424h160v176zm0-240H232V184h160v176zm224 480H456V664h160v176zm0-240H456V424h160v176zm0-240H456V184h160v176z"}}]},name:"insert-row-right",theme:"outlined"},yFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:CFe}))},wFe=m.forwardRef(yFe),SFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M798 160H366c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h181.2l-156 544H229c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8H474.4l156-544H798c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"italic",theme:"outlined"},xFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:SFe}))},kFe=m.forwardRef(xFe),EFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-696 72h136v656H184V184zm656 656H384V384h456v456zM384 320V184h456v136H384z"}}]},name:"layout",theme:"outlined"},LFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:EFe}))},Ice=m.forwardRef(LFe),NFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M648 160H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zm272.8 546H856V318h64.8c6 0 9.4-7 5.7-11.7L825.7 178.7a7.14 7.14 0 00-11.3 0L713.6 306.3a7.23 7.23 0 005.7 11.7H784v388h-64.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5a7.2 7.2 0 00-5.6-11.7z"}}]},name:"line-height",theme:"outlined"},TFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:NFe}))},IFe=m.forwardRef(TFe),DFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 476H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"line",theme:"outlined"},MFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:DFe}))},Dce=m.forwardRef(MFe),RFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},AFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:RFe}))},OFe=m.forwardRef(AFe),PFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},FFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:PFe}))},Mce=m.forwardRef(FFe),BFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"},HFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:BFe}))},Rce=m.forwardRef(HFe),VFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},zFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:VFe}))},kP=m.forwardRef(zFe),WFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482.2 508.4L331.3 389c-3-2.4-7.3-.2-7.3 3.6V478H184V184h204v128c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V144c0-15.5-12.5-28-28-28H144c-15.5 0-28 12.5-28 28v736c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v128H184V546h140v85.4c0 3.8 4.4 6 7.3 3.6l150.9-119.4a4.5 4.5 0 000-7.2zM880 116H596c-15.5 0-28 12.5-28 28v168c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V184h204v294H700v-85.4c0-3.8-4.3-6-7.3-3.6l-151 119.4a4.52 4.52 0 000 7.1l151 119.5c2.9 2.3 7.3.2 7.3-3.6V546h140v294H636V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v168c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V144c0-15.5-12.5-28-28-28z"}}]},name:"merge-cells",theme:"outlined"},$Fe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:WFe}))},UFe=m.forwardRef($Fe),jFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zm196-50c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zm0-140c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}},{tag:"path",attrs:{d:"M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"}}]},name:"one-to-one",theme:"outlined"},KFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:jFe}))},qFe=m.forwardRef(KFe),GFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},YFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:GFe}))},EP=m.forwardRef(YFe),ZFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},XFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:ZFe}))},Ace=m.forwardRef(XFe),QFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},JFe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:QFe}))},eBe=m.forwardRef(JFe),tBe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:lse}))},nBe=m.forwardRef(tBe),iBe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:$re}))},rBe=m.forwardRef(iBe),sBe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M952 474H569.9c-10-2-20.5-4-31.6-6-15.9-2.9-22.2-4.1-30.8-5.8-51.3-10-82.2-20-106.8-34.2-35.1-20.5-52.2-48.3-52.2-85.1 0-37 15.2-67.7 44-89 28.4-21 68.8-32.1 116.8-32.1 54.8 0 97.1 14.4 125.8 42.8 14.6 14.4 25.3 32.1 31.8 52.6 1.3 4.1 2.8 10 4.3 17.8.9 4.8 5.2 8.2 9.9 8.2h72.8c5.6 0 10.1-4.6 10.1-10.1v-1c-.7-6.8-1.3-12.1-2-16-7.3-43.5-28-81.7-59.7-110.3-44.4-40.5-109.7-61.8-188.7-61.8-72.3 0-137.4 18.1-183.3 50.9-25.6 18.4-45.4 41.2-58.6 67.7-13.5 27.1-20.3 58.4-20.3 92.9 0 29.5 5.7 54.5 17.3 76.5 8.3 15.7 19.6 29.5 34.1 42H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h433.2c2.1.4 3.9.8 5.9 1.2 30.9 6.2 49.5 10.4 66.6 15.2 23 6.5 40.6 13.3 55.2 21.5 35.8 20.2 53.3 49.2 53.3 89 0 35.3-15.5 66.8-43.6 88.8-30.5 23.9-75.6 36.4-130.5 36.4-43.7 0-80.7-8.5-110.2-25-29.1-16.3-49.1-39.8-59.7-69.5-.8-2.2-1.7-5.2-2.7-9-1.2-4.4-5.3-7.5-9.7-7.5h-79.7c-5.6 0-10.1 4.6-10.1 10.1v1c.2 2.3.4 4.2.6 5.7 6.5 48.8 30.3 88.8 70.7 118.8 47.1 34.8 113.4 53.2 191.8 53.2 84.2 0 154.8-19.8 204.2-57.3 25-18.9 44.2-42.2 57.1-69 13-27.1 19.7-57.9 19.7-91.5 0-31.8-5.8-58.4-17.8-81.4-5.8-11.2-13.1-21.5-21.8-30.8H952c4.4 0 8-3.6 8-8v-60a8 8 0 00-8-7.9z"}}]},name:"strikethrough",theme:"outlined"},oBe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:sBe}))},aBe=m.forwardRef(oBe),lBe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},cBe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:lBe}))},Oce=m.forwardRef(cBe),uBe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824 804H200c-4.4 0-8 3.4-8 7.6v60.8c0 4.2 3.6 7.6 8 7.6h624c4.4 0 8-3.4 8-7.6v-60.8c0-4.2-3.6-7.6-8-7.6zm-312-76c69.4 0 134.6-27.1 183.8-76.2C745 602.7 772 537.4 772 468V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 97-79 176-176 176s-176-79-176-176V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 69.4 27.1 134.6 76.2 183.8C377.3 701 442.6 728 512 728z"}}]},name:"underline",theme:"outlined"},dBe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:uBe}))},hBe=m.forwardRef(dBe),fBe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}}]},name:"undo",theme:"outlined"},gBe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:fBe}))},pBe=m.forwardRef(gBe),mBe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"},vBe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:mBe}))},LP=m.forwardRef(vBe),bBe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M368 724H252V608c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v116H72c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h116v116c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V788h116c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v352h72V232h576v560H448v72h272c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM888 625l-104-59.8V458.9L888 399v226z"}},{tag:"path",attrs:{d:"M320 360c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h112z"}}]},name:"video-camera-add",theme:"outlined"},_Be=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:bBe}))},CBe=m.forwardRef(_Be),yBe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"},wBe=function(e,t){return m.createElement(Kt,J({},e,{ref:t,icon:yBe}))},SBe=m.forwardRef(wBe);const xBe=({tooltip:n,icon:e,style:t,selected:i,disabled:r,btnType:s="text",onClick:o,children:a})=>P.jsx(Vf,{placement:"top",title:n,destroyTooltipOnHide:!0,children:P.jsx(bi,{className:Ee({[`${qe}-menu--selected`]:i}),disabled:r,icon:e,size:"small",type:s,onClick:o,style:t,children:a})}),dn=m.memo(xBe),gd=()=>P.jsx("div",{className:`${qe}__menu--divider`}),kBe=m.lazy(()=>dce(()=>import("./index-CkTegWFO.js"),[],import.meta.url));function EBe({bgColor:n,deleteNode:e,updateAttributes:t}){const i=jt();return P.jsxs("div",{className:`${qe}-highlight-block-bubble-menu`,children:[i5e.map(([r,s],o)=>P.jsx("div",{className:Ee(`${qe}-highlight-block-bubble-menu__item`,{[`${qe}-highlight-block-item--selected`]:n===s}),style:{borderColor:r,backgroundColor:s},onClick:()=>t({borderColor:r,bgColor:s}),children:n===s&&P.jsx(xD,{})},o)),P.jsx(gd,{}),P.jsx(dn,{tooltip:i.delete,btnType:"text",icon:P.jsx(sS,{}),onClick:e})]})}const LBe=n=>{const{editor:e,updateAttributes:t}=n,[i,r]=m.useState(!1),s=m.useCallback(l=>{t({emoji:l}),r(!1)},[t]),o=m.useCallback(l=>{e.isEditable&&r(l)},[e.isEditable]),a=e.isEditable&&e.isActive("highlightBlock");return{visible:i,showColorPicker:a,handleEmojiChange:s,handleVisibleChange:o}};function NBe(n){const{node:{attrs:e},deleteNode:t,updateAttributes:i,HTMLAttributes:r}=n,{visible:s,showColorPicker:o,handleEmojiChange:a,handleVisibleChange:l}=LBe(n);return P.jsx(pce,{interactive:!0,duration:200,arrow:!1,placement:"top",animation:"shift-away",zIndex:2,visible:o,content:P.jsx(EBe,{bgColor:e.bgColor,deleteNode:t,updateAttributes:i}),children:P.jsxs(ob,{className:`${qe}-highlight-block`,style:{backgroundColor:e.bgColor,borderColor:e.borderColor},...cb(r),children:[P.jsx(jI,{open:s,content:P.jsx(m.Suspense,{fallback:P.jsx("div",{style:{width:400,height:280}}),children:P.jsx(kBe,{onChange:a})}),trigger:"click",placement:"bottom",onOpenChange:l,children:P.jsx("div",{className:`${qe}-highlight-block-emoji`,contentEditable:!1,children:P.jsx(bi,{size:"small",icon:D7e(e.emoji)})})}),P.jsx(qae,{})]})})}const Gq=n=>({default:null,parseHTML:e=>e.dataset[n],renderHTML:e=>e[n]?{[`data-${n}`]:e[n]}:{}}),TBe=Gi.create({name:"highlightBlock",content:"block+",group:"block",defining:!0,addAttributes(){return{emoji:{default:"",parseHTML:n=>n.dataset.emoji,renderHTML:n=>({"data-emoji":n.emoji})},bgColor:Gq("bgColor"),borderColor:Gq("borderColor")}},parseHTML(){return[{tag:`div[data-type="${this.name}"]`}]},renderHTML({HTMLAttributes:n}){const e=n["data-bg-color"],t=n["data-border-color"],i=e&&t?`background-color:${e};border-color:${t}`:null;return["div",Gn(this.options.HTMLAttributes,{"data-type":this.name,style:i},n),0]},addCommands(){return{toggleHighlightBlock:()=>({commands:n})=>n.toggleWrap(this.name)}},addNodeView(){return ab(NBe)}}),IBe=pi.create({name:"fontSize",addOptions(){return{types:["textStyle","heading","paragraph"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{parseHTML:n=>n.style.fontSize.replace(/['"]+/g,""),renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:n=>({chain:e})=>e().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),DBe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,MBe=Gi.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",Gn(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[pB({find:DBe,type:this.type,getAttributes:n=>{const[,,e,t,i]=n;return{src:t,alt:e,title:i}}})]}});var Pce={exports:{}};(()=>{var n={181:(r,s,o)=>{var a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt,h=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,f=typeof self=="object"&&self&&self.Object===Object&&self,g=h||f||Function("return this")(),p=Object.prototype.toString,v=Math.max,b=Math.min,_=function(){return g.Date.now()};function y(w){var x=typeof w;return!!w&&(x=="object"||x=="function")}function C(w){if(typeof w=="number")return w;if(function(E){return typeof E=="symbol"||function(L){return!!L&&typeof L=="object"}(E)&&p.call(E)=="[object Symbol]"}(w))return NaN;if(y(w)){var x=typeof w.valueOf=="function"?w.valueOf():w;w=y(x)?x+"":x}if(typeof w!="string")return w===0?w:+w;w=w.replace(a,"");var k=c.test(w);return k||u.test(w)?d(w.slice(2),k?2:8):l.test(w)?NaN:+w}r.exports=function(w,x,k){var E,L,M,D,O,A,R=0,V=!1,F=!1,T=!0;if(typeof w!="function")throw new TypeError("Expected a function");function N(G){var X=E,q=L;return E=L=void 0,R=G,D=w.apply(q,X)}function B(G){var X=G-A;return A===void 0||X>=x||X<0||F&&G-R>=M}function $(){var G=_();if(B(G))return j(G);O=setTimeout($,function(X){var q=x-(X-A);return F?b(q,M-(X-R)):q}(G))}function j(G){return O=void 0,T&&E?N(G):(E=L=void 0,D)}function Y(){var G=_(),X=B(G);if(E=arguments,L=this,A=G,X){if(O===void 0)return function(q){return R=q,O=setTimeout($,x),V?N(q):D}(A);if(F)return O=setTimeout($,x),N(A)}return O===void 0&&(O=setTimeout($,x)),D}return x=C(x)||0,y(k)&&(V=!!k.leading,M=(F="maxWait"in k)?v(C(k.maxWait)||0,x):M,T="trailing"in k?!!k.trailing:T),Y.cancel=function(){O!==void 0&&clearTimeout(O),R=0,E=A=L=O=void 0},Y.flush=function(){return O===void 0?D:j(_())},Y}},858:(r,s,o)=>{var a="Expected a function",l=NaN,c="[object Symbol]",u=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,f=/^0o[0-7]+$/i,g=parseInt,p=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,v=typeof self=="object"&&self&&self.Object===Object&&self,b=p||v||Function("return this")(),_=Object.prototype.toString,y=Math.max,C=Math.min,w=function(){return b.Date.now()};function x(E){var L=typeof E;return!!E&&(L=="object"||L=="function")}function k(E){if(typeof E=="number")return E;if(function(D){return typeof D=="symbol"||function(O){return!!O&&typeof O=="object"}(D)&&_.call(D)==c}(E))return l;if(x(E)){var L=typeof E.valueOf=="function"?E.valueOf():E;E=x(L)?L+"":L}if(typeof E!="string")return E===0?E:+E;E=E.replace(u,"");var M=h.test(E);return M||f.test(E)?g(E.slice(2),M?2:8):d.test(E)?l:+E}r.exports=function(E,L,M){var D=!0,O=!0;if(typeof E!="function")throw new TypeError(a);return x(M)&&(D="leading"in M?!!M.leading:D,O="trailing"in M?!!M.trailing:O),function(A,R,V){var F,T,N,B,$,j,Y=0,G=!1,X=!1,q=!0;if(typeof A!="function")throw new TypeError(a);function re(Fe){var ze=F,Me=T;return F=T=void 0,Y=Fe,B=A.apply(Me,ze)}function ge(Fe){var ze=Fe-j;return j===void 0||ze>=R||ze<0||X&&Fe-Y>=N}function ye(){var Fe=w();if(ge(Fe))return we(Fe);$=setTimeout(ye,function(ze){var Me=R-(ze-j);return X?C(Me,N-(ze-Y)):Me}(Fe))}function we(Fe){return $=void 0,q&&F?re(Fe):(F=T=void 0,B)}function Ie(){var Fe=w(),ze=ge(Fe);if(F=arguments,T=this,j=Fe,ze){if($===void 0)return function(Me){return Y=Me,$=setTimeout(ye,R),G?re(Me):B}(j);if(X)return $=setTimeout(ye,R),re(j)}return $===void 0&&($=setTimeout(ye,R)),B}return R=k(R)||0,x(V)&&(G=!!V.leading,N=(X="maxWait"in V)?y(k(V.maxWait)||0,R):N,q="trailing"in V?!!V.trailing:q),Ie.cancel=function(){$!==void 0&&clearTimeout($),Y=0,F=j=T=$=void 0},Ie.flush=function(){return $===void 0?B:we(w())},Ie}(E,L,{leading:D,maxWait:L,trailing:O})}},694:(r,s,o)=>{var a=o(925);function l(){}function c(){}c.resetWarningCache=l,r.exports=function(){function u(f,g,p,v,b,_){if(_!==a){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}function d(){return u}u.isRequired=u;var h={array:u,bigint:u,bool:u,func:u,number:u,object:u,string:u,symbol:u,any:u,arrayOf:d,element:u,elementType:u,instanceOf:d,node:u,objectOf:d,oneOf:d,oneOfType:d,shape:d,exact:d,checkPropTypes:c,resetWarningCache:l};return h.PropTypes=h,h}},556:(r,s,o)=>{r.exports=o(694)()},925:r=>{r.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},e={};function t(r){var s=e[r];if(s!==void 0)return s.exports;var o=e[r]={exports:{}};return n[r](o,o.exports,t),o.exports}t.n=r=>{var s=r&&r.__esModule?()=>r.default:()=>r;return t.d(s,{a:s}),s},t.d=(r,s)=>{for(var o in s)t.o(s,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:s[o]})},t.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),t.o=(r,s)=>Object.prototype.hasOwnProperty.call(r,s),t.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var i={};(()=>{t.r(i),t.d(i,{LazyLoadComponent:()=>Oe,LazyLoadImage:()=>Ke,trackWindowScroll:()=>G});const r=m;var s=t.n(r),o=t(556);function a(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function l(ue){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},l(ue)}function c(ue,ee){var oe=Object.keys(ue);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(ue);ee&&(pe=pe.filter(function(le){return Object.getOwnPropertyDescriptor(ue,le).enumerable})),oe.push.apply(oe,pe)}return oe}function u(ue,ee,oe){return(ee=h(ee))in ue?Object.defineProperty(ue,ee,{value:oe,enumerable:!0,configurable:!0,writable:!0}):ue[ee]=oe,ue}function d(ue,ee){for(var oe=0;oe<ee.length;oe++){var pe=ee[oe];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ue,h(pe.key),pe)}}function h(ue){var ee=function(oe,pe){if(l(oe)!="object"||!oe)return oe;var le=oe[Symbol.toPrimitive];if(le!==void 0){var ve=le.call(oe,"string");if(l(ve)!="object")return ve;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}(ue);return l(ee)=="symbol"?ee:ee+""}function f(ue,ee,oe){return ee=p(ee),function(pe,le){if(le&&(l(le)=="object"||typeof le=="function"))return le;if(le!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(ve){if(ve===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve}(pe)}(ue,g()?Reflect.construct(ee,oe||[],p(ue).constructor):ee.apply(ue,oe))}function g(){try{var ue=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g=function(){return!!ue})()}function p(ue){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},p(ue)}function v(ue,ee){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(oe,pe){return oe.__proto__=pe,oe},v(ue,ee)}var b=function(ue){ue.forEach(function(ee){ee.isIntersecting&&ee.target.onVisible()})},_={},y=function(ue){function ee(le){var ve;if(function(Qe,ut){if(!(Qe instanceof ut))throw new TypeError("Cannot call a class as a function")}(this,ee),(ve=f(this,ee,[le])).supportsObserver=!le.scrollPosition&&le.useIntersectionObserver&&a(),ve.supportsObserver){var He=le.threshold;ve.observer=function(Qe){return _[Qe]=_[Qe]||new IntersectionObserver(b,{rootMargin:Qe+"px"}),_[Qe]}(He)}return ve}return function(le,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(ve&&ve.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),Object.defineProperty(le,"prototype",{writable:!1}),ve&&v(le,ve)}(ee,ue),oe=ee,pe=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,ve=this.placeholder.getBoundingClientRect(),He=this.placeholder.style,Qe=parseInt(He.getPropertyValue("margin-left"),10)||0,ut=parseInt(He.getPropertyValue("margin-top"),10)||0;return{bottom:le.y+ve.bottom+ut,left:le.x+ve.left+Qe,right:le.x+ve.right+Qe,top:le.y+ve.top+ut}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var le=this.props,ve=le.scrollPosition,He=le.threshold,Qe=this.getPlaceholderBoundingBox(ve),ut=ve.y+window.innerHeight,St=ve.x,Lt=ve.x+window.innerWidth,be=ve.y;return be-He<=Qe.bottom&&ut+He>=Qe.top&&St-He<=Qe.right&&Lt+He>=Qe.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var le=this,ve=this.props,He=ve.className,Qe=ve.height,ut=ve.placeholder,St=ve.style,Lt=ve.width;if(ut&&typeof ut.type!="function")return s().cloneElement(ut,{ref:function(H){return le.placeholder=H}});var be=function(H){for(var W=1;W<arguments.length;W++){var K=arguments[W]!=null?arguments[W]:{};W%2?c(Object(K),!0).forEach(function(Q){u(H,Q,K[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(K)):c(Object(K)).forEach(function(Q){Object.defineProperty(H,Q,Object.getOwnPropertyDescriptor(K,Q))})}return H}({display:"inline-block"},St);return Lt!==void 0&&(be.width=Lt),Qe!==void 0&&(be.height=Qe),s().createElement("span",{className:He,ref:function(H){return le.placeholder=H},style:be},ut)}}],pe&&d(oe.prototype,pe),Object.defineProperty(oe,"prototype",{writable:!1}),oe;var oe,pe}(s().Component);y.propTypes={onVisible:o.PropTypes.func.isRequired,className:o.PropTypes.string,height:o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string]),placeholder:o.PropTypes.element,threshold:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool,scrollPosition:o.PropTypes.shape({x:o.PropTypes.number.isRequired,y:o.PropTypes.number.isRequired}),width:o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string])},y.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const C=y;var w=t(181),x=t.n(w),k=t(858),E=t.n(k),L=function(ue){var ee=getComputedStyle(ue,null);return ee.getPropertyValue("overflow")+ee.getPropertyValue("overflow-y")+ee.getPropertyValue("overflow-x")};const M=function(ue){if(!(ue instanceof HTMLElement))return window;for(var ee=ue;ee&&ee instanceof HTMLElement;){if(/(scroll|auto)/.test(L(ee)))return ee;ee=ee.parentNode}return window};function D(ue){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},D(ue)}var O=["delayMethod","delayTime"];function A(){return A=Object.assign?Object.assign.bind():function(ue){for(var ee=1;ee<arguments.length;ee++){var oe=arguments[ee];for(var pe in oe)({}).hasOwnProperty.call(oe,pe)&&(ue[pe]=oe[pe])}return ue},A.apply(null,arguments)}function R(ue,ee){for(var oe=0;oe<ee.length;oe++){var pe=ee[oe];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ue,V(pe.key),pe)}}function V(ue){var ee=function(oe,pe){if(D(oe)!="object"||!oe)return oe;var le=oe[Symbol.toPrimitive];if(le!==void 0){var ve=le.call(oe,"string");if(D(ve)!="object")return ve;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}(ue);return D(ee)=="symbol"?ee:ee+""}function F(ue,ee,oe){return ee=B(ee),T(ue,N()?Reflect.construct(ee,oe||[],B(ue).constructor):ee.apply(ue,oe))}function T(ue,ee){if(ee&&(D(ee)=="object"||typeof ee=="function"))return ee;if(ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}(ue)}function N(){try{var ue=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N=function(){return!!ue})()}function B(ue){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},B(ue)}function $(ue,ee){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(oe,pe){return oe.__proto__=pe,oe},$(ue,ee)}var j=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},Y=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const G=function(ue){var ee=function(oe){function pe(He){var Qe;if(function(St,Lt){if(!(St instanceof Lt))throw new TypeError("Cannot call a class as a function")}(this,pe),(Qe=F(this,pe,[He])).useIntersectionObserver=He.useIntersectionObserver&&a(),Qe.useIntersectionObserver)return T(Qe);var ut=Qe.onChangeScroll.bind(Qe);return He.delayMethod==="debounce"?Qe.delayedScroll=x()(ut,He.delayTime):He.delayMethod==="throttle"&&(Qe.delayedScroll=E()(ut,He.delayTime)),Qe.state={scrollPosition:{x:j(),y:Y()}},Qe.baseComponentRef=s().createRef(),Qe}return function(He,Qe){if(typeof Qe!="function"&&Qe!==null)throw new TypeError("Super expression must either be null or a function");He.prototype=Object.create(Qe&&Qe.prototype,{constructor:{value:He,writable:!0,configurable:!0}}),Object.defineProperty(He,"prototype",{writable:!1}),Qe&&$(He,Qe)}(pe,oe),le=pe,ve=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||M(this.baseComponentRef.current)!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=M(this.baseComponentRef.current),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:j(),y:Y()}})}},{key:"render",value:function(){var He=this.props,Qe=(He.delayMethod,He.delayTime,function(St,Lt){if(St==null)return{};var be,H,W=function(Q,ie){if(Q==null)return{};var me={};for(var Se in Q)if({}.hasOwnProperty.call(Q,Se)){if(ie.indexOf(Se)>=0)continue;me[Se]=Q[Se]}return me}(St,Lt);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(St);for(H=0;H<K.length;H++)be=K[H],Lt.indexOf(be)>=0||{}.propertyIsEnumerable.call(St,be)&&(W[be]=St[be])}return W}(He,O)),ut=this.useIntersectionObserver?null:this.state.scrollPosition;return s().createElement(ue,A({forwardRef:this.baseComponentRef,scrollPosition:ut},Qe))}}],ve&&R(le.prototype,ve),Object.defineProperty(le,"prototype",{writable:!1}),le;var le,ve}(s().Component);return ee.propTypes={delayMethod:o.PropTypes.oneOf(["debounce","throttle"]),delayTime:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool},ee.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},ee};function X(ue){return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},X(ue)}function q(ue,ee){for(var oe=0;oe<ee.length;oe++){var pe=ee[oe];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ue,re(pe.key),pe)}}function re(ue){var ee=function(oe,pe){if(X(oe)!="object"||!oe)return oe;var le=oe[Symbol.toPrimitive];if(le!==void 0){var ve=le.call(oe,"string");if(X(ve)!="object")return ve;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}(ue);return X(ee)=="symbol"?ee:ee+""}function ge(ue,ee,oe){return ee=we(ee),function(pe,le){if(le&&(X(le)=="object"||typeof le=="function"))return le;if(le!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(ve){if(ve===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve}(pe)}(ue,ye()?Reflect.construct(ee,oe||[],we(ue).constructor):ee.apply(ue,oe))}function ye(){try{var ue=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ye=function(){return!!ue})()}function we(ue){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},we(ue)}function Ie(ue,ee){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(oe,pe){return oe.__proto__=pe,oe},Ie(ue,ee)}var Fe=function(ue){function ee(le){return function(ve,He){if(!(ve instanceof He))throw new TypeError("Cannot call a class as a function")}(this,ee),ge(this,ee,[le])}return function(le,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(ve&&ve.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),Object.defineProperty(le,"prototype",{writable:!1}),ve&&Ie(le,ve)}(ee,ue),oe=ee,(pe=[{key:"render",value:function(){return s().createElement(C,this.props)}}])&&q(oe.prototype,pe),Object.defineProperty(oe,"prototype",{writable:!1}),oe;var oe,pe}(s().Component);const ze=G(Fe);function Me(ue){return Me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},Me(ue)}function Pe(ue,ee){for(var oe=0;oe<ee.length;oe++){var pe=ee[oe];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ue,tt(pe.key),pe)}}function tt(ue){var ee=function(oe,pe){if(Me(oe)!="object"||!oe)return oe;var le=oe[Symbol.toPrimitive];if(le!==void 0){var ve=le.call(oe,"string");if(Me(ve)!="object")return ve;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}(ue);return Me(ee)=="symbol"?ee:ee+""}function Ae(ue,ee,oe){return ee=ft(ee),function(pe,le){if(le&&(Me(le)=="object"||typeof le=="function"))return le;if(le!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(ve){if(ve===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve}(pe)}(ue,mt()?Reflect.construct(ee,oe||[],ft(ue).constructor):ee.apply(ue,oe))}function mt(){try{var ue=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mt=function(){return!!ue})()}function ft(ue){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},ft(ue)}function Le(ue,ee){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(oe,pe){return oe.__proto__=pe,oe},Le(ue,ee)}var Ge=function(ue){function ee(le){var ve;(function(Lt,be){if(!(Lt instanceof be))throw new TypeError("Cannot call a class as a function")})(this,ee),ve=Ae(this,ee,[le]);var He=le.afterLoad,Qe=le.beforeLoad,ut=le.scrollPosition,St=le.visibleByDefault;return ve.state={visible:St},St&&(Qe(),He()),ve.onVisible=ve.onVisible.bind(ve),ve.isScrollTracked=!!(ut&&Number.isFinite(ut.x)&&ut.x>=0&&Number.isFinite(ut.y)&&ut.y>=0),ve}return function(le,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(ve&&ve.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),Object.defineProperty(le,"prototype",{writable:!1}),ve&&Le(le,ve)}(ee,ue),oe=ee,(pe=[{key:"componentDidUpdate",value:function(le,ve){ve.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var le=this.props,ve=le.className,He=le.delayMethod,Qe=le.delayTime,ut=le.height,St=le.placeholder,Lt=le.scrollPosition,be=le.style,H=le.threshold,W=le.useIntersectionObserver,K=le.width;return this.isScrollTracked||W&&a()?s().createElement(C,{className:ve,height:ut,onVisible:this.onVisible,placeholder:St,scrollPosition:Lt,style:be,threshold:H,useIntersectionObserver:W,width:K}):s().createElement(ze,{className:ve,delayMethod:He,delayTime:Qe,height:ut,onVisible:this.onVisible,placeholder:St,style:be,threshold:H,width:K})}}])&&Pe(oe.prototype,pe),Object.defineProperty(oe,"prototype",{writable:!1}),oe;var oe,pe}(s().Component);Ge.propTypes={afterLoad:o.PropTypes.func,beforeLoad:o.PropTypes.func,useIntersectionObserver:o.PropTypes.bool,visibleByDefault:o.PropTypes.bool},Ge.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const Oe=Ge;function xe(ue){return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},xe(ue)}var at=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function gt(ue,ee){var oe=Object.keys(ue);if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(ue);ee&&(pe=pe.filter(function(le){return Object.getOwnPropertyDescriptor(ue,le).enumerable})),oe.push.apply(oe,pe)}return oe}function Ct(ue){for(var ee=1;ee<arguments.length;ee++){var oe=arguments[ee]!=null?arguments[ee]:{};ee%2?gt(Object(oe),!0).forEach(function(pe){nt(ue,pe,oe[pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ue,Object.getOwnPropertyDescriptors(oe)):gt(Object(oe)).forEach(function(pe){Object.defineProperty(ue,pe,Object.getOwnPropertyDescriptor(oe,pe))})}return ue}function nt(ue,ee,oe){return(ee=Ne(ee))in ue?Object.defineProperty(ue,ee,{value:oe,enumerable:!0,configurable:!0,writable:!0}):ue[ee]=oe,ue}function se(){return se=Object.assign?Object.assign.bind():function(ue){for(var ee=1;ee<arguments.length;ee++){var oe=arguments[ee];for(var pe in oe)({}).hasOwnProperty.call(oe,pe)&&(ue[pe]=oe[pe])}return ue},se.apply(null,arguments)}function fe(ue,ee){for(var oe=0;oe<ee.length;oe++){var pe=ee[oe];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ue,Ne(pe.key),pe)}}function Ne(ue){var ee=function(oe,pe){if(xe(oe)!="object"||!oe)return oe;var le=oe[Symbol.toPrimitive];if(le!==void 0){var ve=le.call(oe,"string");if(xe(ve)!="object")return ve;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(oe)}(ue);return xe(ee)=="symbol"?ee:ee+""}function Ve(ue,ee,oe){return ee=Dt(ee),function(pe,le){if(le&&(xe(le)=="object"||typeof le=="function"))return le;if(le!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(ve){if(ve===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve}(pe)}(ue,lt()?Reflect.construct(ee,oe||[],Dt(ue).constructor):ee.apply(ue,oe))}function lt(){try{var ue=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lt=function(){return!!ue})()}function Dt(ue){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},Dt(ue)}function Qt(ue,ee){return Qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(oe,pe){return oe.__proto__=pe,oe},Qt(ue,ee)}var he=function(ue){function ee(le){var ve;return function(He,Qe){if(!(He instanceof Qe))throw new TypeError("Cannot call a class as a function")}(this,ee),(ve=Ve(this,ee,[le])).state={loaded:!1},ve}return function(le,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(ve&&ve.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),Object.defineProperty(le,"prototype",{writable:!1}),ve&&Qt(le,ve)}(ee,ue),oe=ee,pe=[{key:"onImageLoad",value:function(){var le=this;return this.state.loaded?null:function(ve){le.props.onLoad(ve),le.props.afterLoad(),le.setState({loaded:!0})}}},{key:"getImg",value:function(){var le=this.props,ve=(le.afterLoad,le.beforeLoad,le.delayMethod,le.delayTime,le.effect,le.placeholder,le.placeholderSrc,le.scrollPosition,le.threshold,le.useIntersectionObserver,le.visibleByDefault,le.wrapperClassName,le.wrapperProps,function(He,Qe){if(He==null)return{};var ut,St,Lt=function(H,W){if(H==null)return{};var K={};for(var Q in H)if({}.hasOwnProperty.call(H,Q)){if(W.indexOf(Q)>=0)continue;K[Q]=H[Q]}return K}(He,Qe);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(He);for(St=0;St<be.length;St++)ut=be[St],Qe.indexOf(ut)>=0||{}.propertyIsEnumerable.call(He,ut)&&(Lt[ut]=He[ut])}return Lt}(le,at));return s().createElement("img",se({},ve,{onLoad:this.onImageLoad()}))}},{key:"getLazyLoadImage",value:function(){var le=this.props,ve=le.beforeLoad,He=le.className,Qe=le.delayMethod,ut=le.delayTime,St=le.height,Lt=le.placeholder,be=le.scrollPosition,H=le.style,W=le.threshold,K=le.useIntersectionObserver,Q=le.visibleByDefault,ie=le.width;return s().createElement(Oe,{beforeLoad:ve,className:He,delayMethod:Qe,delayTime:ut,height:St,placeholder:Lt,scrollPosition:be,style:H,threshold:W,useIntersectionObserver:K,visibleByDefault:Q,width:ie},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(le){var ve=this.props,He=ve.effect,Qe=ve.height,ut=ve.placeholderSrc,St=ve.width,Lt=ve.wrapperClassName,be=ve.wrapperProps,H=this.state.loaded,W=H?" lazy-load-image-loaded":"",K=H||!ut?{}:{backgroundImage:"url(".concat(ut,")"),backgroundSize:"100% 100%"};return s().createElement("span",se({className:Lt+" lazy-load-image-background "+He+W,style:Ct(Ct({},K),{},{color:"transparent",display:"inline-block",height:Qe,width:St})},be),le)}},{key:"render",value:function(){var le=this.props,ve=le.effect,He=le.placeholderSrc,Qe=le.visibleByDefault,ut=le.wrapperClassName,St=le.wrapperProps,Lt=this.getLazyLoadImage();return(ve||He)&&!Qe||ut||St?this.getWrappedLazyLoadImage(Lt):Lt}}],pe&&fe(oe.prototype,pe),Object.defineProperty(oe,"prototype",{writable:!1}),oe;var oe,pe}(s().Component);he.propTypes={onLoad:o.PropTypes.func,afterLoad:o.PropTypes.func,beforeLoad:o.PropTypes.func,delayMethod:o.PropTypes.string,delayTime:o.PropTypes.number,effect:o.PropTypes.string,placeholderSrc:o.PropTypes.string,threshold:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool,visibleByDefault:o.PropTypes.bool,wrapperClassName:o.PropTypes.string,wrapperProps:o.PropTypes.object},he.defaultProps={onLoad:function(){},afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const Ke=he})(),Pce.exports=i})();var RBe=Pce.exports;const GB=48,ABe=n=>{const{minWidth:e,disabled:t,getElementRect:i,onResize:r}=n,s=m.useRef(0),o=m.useRef(0),a=m.useRef(!1),l=m.useRef("top-left"),c=m.useCallback((h,f)=>{s.current=h.clientX,a.current=!0,o.current=i().width,l.current=f},[i]),u=m.useCallback(h=>{if(!a.current)return;let f;l.current==="top-right"||l.current==="bottom-right"?f=h.clientX-s.current+o.current:f=s.current-h.clientX+o.current,r(Math.round(Math.max(f,e)))},[e,r]),d=m.useCallback(()=>{a.current=!1},[]);return m.useEffect(()=>t?()=>{}:(window.addEventListener("mousemove",u),window.addEventListener("mouseup",d),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",d)}),[t,u,d]),{handleMouseDown:c}},YB=({className:n,minWidth:e=GB,disabled:t,selected:i,full:r,getElementRect:s,onResize:o,style:a,children:l})=>{const{handleMouseDown:c}=ABe({minWidth:e,disabled:t,getElementRect:s,onResize:o}),u=i&&!t&&!r,d=["top-left","top-right","bottom-right","bottom-left"];return P.jsxs("div",{style:a,className:Ee(`${qe}-resizer`,i&&!t&&`${qe}-resizer__selected`,r&&`${qe}-resizer__full`,n),children:[l,u&&d.map(h=>P.jsx("span",{className:Ee(`${qe}-resizer-point`,h),onMouseDown:f=>c(f,h)},h))]})},OBe=({className:n,menuGap:e,children:t})=>P.jsx("div",{className:Ee(`${qe}-menu__container`,n),style:{gap:e},children:t}),db=m.memo(OBe),Yq=1e4,ZB=({size:n,miniSize:e,visible:t,children:i,onSizeChange:r})=>{const[s,o]=m.useState(n||""),a=ln(),l=jt(),c=m.useMemo(()=>[{label:l.alignLeft,align:"left",icon:P.jsx(xL,{})},{label:l.alignCenter,align:"center",icon:P.jsx(jB,{})},{label:l.alignRight,align:"right",icon:P.jsx(KB,{})}],[l]),u=g=>{a==null||a.chain().focus().setTextAlign(g).run()},d=c.map(({align:g})=>g).find(g=>a==null?void 0:a.isActive({textAlign:g}))??"",h=d==="center"?"top":d==="right"?"top-end":"top-start",f=g=>{if(g.key.toLowerCase()==="enter"&&/^\d+$/.test(s)){if(Number(s)<e){bl.error(l.sizeLessThan.replace("{MIN_SIZE}",e.toString()));return}if(Number(s)>Yq){bl.error(l.sizeGreaterThan.replace("{MAX_SIZE}",Yq.toString()));return}r(s)}};return m.useEffect(()=>{o(n||"")},[n]),P.jsx(pce,{interactive:!0,duration:200,arrow:!1,placement:h,animation:"shift-away",zIndex:3,visible:t,appendTo:()=>a.view.dom.parentNode,content:P.jsxs(db,{className:`${qe}-media-float-menu`,children:[c.map(({label:g,align:p,icon:v})=>P.jsx(dn,{tooltip:g,icon:v,selected:d===p,onClick:()=>u(p)},p)),P.jsx(dn,{tooltip:l.fullInEditor,selected:a.isActive({fullInEditor:!0}),icon:P.jsx(qFe,{}),onClick:()=>a.commands.toggleFullInEditor()}),P.jsxs("span",{className:`${qe}-media-float-input`,children:[P.jsx("input",{value:s,onKeyDown:f,disabled:a.isActive({fullInEditor:!0}),onChange:g=>o(g.target.value)}),"px"]})]}),children:i})},PBe=n=>{const{node:{attrs:e},updateAttributes:t,extension:i,editor:r}=n,s=jt(),o=m.useRef(null),[a,l]=m.useState(!1),[c,u]=m.useState(!1),[d,h]=m.useState(0),[f,g]=m.useState(!1),{inline:p,minWidth:v=GB}=i.options,b=r.options.element.querySelectorAll(`img.${qe}-image-el`),_=Array.from(b).map(M=>M.getAttribute("src")).filter(M=>M),y=m.useCallback(()=>{r.isEditable||l(!0)},[r.isEditable]),C=m.useCallback(()=>{r.isEditable&&l(!0)},[r.isEditable]),w=m.useCallback(M=>{const{naturalWidth:D,naturalHeight:O}=M.currentTarget,A=e.width??D;A&&(u(!0),t({width:r.isEditable&&A>gq?gq:A,aspectRatio:O>0?D/O:null}))},[e.width,r.isEditable,t]),x=m.useCallback(()=>{g(!0)},[]),k=m.useCallback(M=>{t({width:M})},[t]),E=m.useCallback(M=>{l(M)},[]),L=m.useCallback(()=>o.current.getBoundingClientRect(),[]);return m.useEffect(()=>{const{rowFile:M,uploadAction:D,uploadFileHandler:O}=e;if(!M)return;const A={onProgress:R=>h(R),onSuccess:R=>t({...R,rowFile:null})};typeof O=="function"?O(A):D&&UB({file:M,url:D,...A})},[e.rowFile,e.uploadAction,e.uploadFileHandler,t]),{locale:s,imageRef:o,preview:a,lazyLoaded:c,uploadPercent:d,error:f,inline:p,minWidth:v,imageUrls:_,handleImageClick:y,handleImageDoubleClick:C,handleImageLoad:w,handleImageError:x,handleSizeChange:k,handlePreviewVisibleChange:E,getElementRect:L}};function FBe(n){const{node:{attrs:e},selected:t,editor:i,HTMLAttributes:r}=n,{locale:s,imageRef:o,preview:a,lazyLoaded:l,uploadPercent:c,error:u,inline:d,minWidth:h,imageUrls:f,handleImageClick:g,handleImageDoubleClick:p,handleImageLoad:v,handleImageError:b,handleSizeChange:_,handlePreviewVisibleChange:y,getElementRect:C}=PBe(n);return P.jsx(ZB,{size:e.width,miniSize:h,visible:i.isEditable&&t&&!u,onSizeChange:_,children:P.jsx(ob,{as:d?"span":"div",className:Ee(d?"inline-image":"block"),style:{textAlign:e.textAlign},...cb(r),children:P.jsx(RBe.LazyLoadComponent,{children:P.jsxs(YB,{className:Ee(`${qe}-image`,{[`${qe}-image-inline`]:d}),selected:t,disabled:!i.isEditable||u,full:e.fullInEditor,minWidth:h,getElementRect:C,onResize:_,children:[u&&P.jsxs("div",{className:`${qe}-image__error`,children:[P.jsx(Nce,{}),s.imageLoadError]}),P.jsx("img",{ref:o,"data-drag-handle":!0,src:e.src,height:e.height??"auto",onClick:g,onDoubleClick:p,width:e.fullInEditor?"100%":e.width??void 0,alt:e.alt??void 0,title:e.title??void 0,className:Ee(`${qe}-image-el`,{"ProseMirror-selectednode":t&&i.isEditable,[`${qe}-image__view`]:!i.isEditable}),style:{maxWidth:e.width?void 0:"auto",opacity:l?1:0,transition:i.isEditable?"none":"opacity .3s",display:u?"none":void 0},onLoad:v,onError:b}),c>0&&c<100&&P.jsx("div",{className:`${qe}-image__loading`,children:P.jsx(YF,{type:"circle",percent:c,width:48})}),a&&P.jsx(R3.PreviewGroup,{preview:{visible:a,current:f.findIndex(w=>w===e.src),onVisibleChange:y,maskClosable:!0},children:f.map(w=>P.jsx(R3,{preview:{src:w}},w))})]})})})})}const mR=()=>({default:null,renderHTML:()=>null,parseHTML:()=>null}),Fce=MBe.extend({addOptions(){var n;return{...(n=this.parent)==null?void 0:n.call(this),isAllowedImgSrc:e=>!!e,minWidth:200}},addAttributes(){var e;return{...((e=this.parent)==null?void 0:e.call(this))||{},width:{default:null,renderHTML:t=>({width:t.width}),parseHTML:t=>{let i=t.getAttribute("width");return i=/\d/.test(t.style.width)?`${parseFloat(t.style.width)}`:i,i}},height:{default:null,renderHTML:t=>({height:t.height}),parseHTML:t=>{let i=t.getAttribute("height");return i=/\d/.test(t.style.height)?`${parseFloat(t.style.height)}`:i,i}},aspectRatio:{default:null,renderHTML:t=>t.aspectRatio?{style:`aspect-ratio: ${t.aspectRatio}`}:{},parseHTML:t=>t.style.aspectRatio},fileUid:{default:null,renderHTML:t=>({"data-file-uid":t.fileUid}),parseHTML:t=>t.dataset.fileUid},uploadPercent:{default:0,renderHTML:()=>null,parseHTML:()=>null},rowFile:mR(),uploadAction:mR(),uploadFileHandler:mR()}},renderHTML({HTMLAttributes:n}){return["img",Gn({height:"auto"},this.options.HTMLAttributes,n)]},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])',getAttrs:n=>{if(!(n instanceof Element))return!1;const e=n.getAttribute("src");return this.options.isAllowedImgSrc(e)&&null}}]},addInputRules(){var t;const n=(t=this.parent)==null?void 0:t.call(this);if(!n)return[];const e=i=>{const[,,r,s,o]=i;return{src:s,alt:r,title:o}};return n.map(i=>new tS({find:i.find,handler:r=>{const s=e(r.match);return this.options.isAllowedImgSrc(s.src)?i.handler(r):null}}))},addNodeView(){return ab(FBe)}}),BBe=n=>{const{node:{attrs:e},updateAttributes:t,extension:i}=n,r=jt(),[s,o]=m.useState(0),[a,l]=m.useState(!1),[c,u]=m.useState(!1),[d,h]=m.useState(!1),f=m.useRef(null),{inline:g,minWidth:p=GB}=i.options,v=m.useCallback(C=>{const{videoWidth:w,videoHeight:x}=C.currentTarget,k=e.width??w;k&&t({width:k>yP?yP:k,aspectRatio:x>0?w/x:null}),l(!0)},[e.width,t]),b=m.useCallback(()=>{h(!0)},[]),_=m.useCallback(C=>{t({width:C})},[t]),y=m.useCallback(()=>f.current.getBoundingClientRect(),[]);return m.useEffect(()=>{const{rowFile:C,uploadAction:w,uploadFileHandler:x}=e;if(!C)return;const k={onProgress:E=>o(E),onSuccess:E=>{t({...E,rowFile:null}),u(!1)}};typeof x=="function"?(u(!0),x(k)):w&&(u(!0),UB({file:C,url:w,...k}))},[e.rowFile,e.uploadAction,e.uploadFileHandler,t]),{locale:r,videoRef:f,uploadPercent:s,canPlay:a,loading:c,error:d,inline:g,minWidth:p,handleCanPlay:v,handleError:b,handleSizeChange:_,getElementRect:y}};function HBe(n){const{node:{attrs:e},selected:t,editor:i,HTMLAttributes:r}=n,{locale:s,videoRef:o,uploadPercent:a,canPlay:l,loading:c,error:u,inline:d,minWidth:h,handleCanPlay:f,handleError:g,handleSizeChange:p,getElementRect:v}=BBe(n);return P.jsx(ZB,{size:e.width,miniSize:h,visible:i.isEditable&&t&&l,onSizeChange:p,children:P.jsx(ob,{as:d?"span":"div",className:!d&&"block",style:{textAlign:e.textAlign},...cb(r),children:P.jsxs(YB,{className:Ee(`${qe}-video`,{[`${qe}-video-inline`]:d}),selected:t,disabled:!i.isEditable||!l,full:e.fullInEditor,minWidth:h,getElementRect:v,onResize:p,style:{width:l?void 0:"100%"},children:[!l&&P.jsxs("div",{className:`${qe}-video-loading`,style:{maxWidth:e.width?`${e.width}px`:yP},children:[(c||a>0&&a<100)&&P.jsxs(P.Fragment,{children:[P.jsx(YF,{type:"circle",percent:a,width:48}),P.jsx("div",{className:`${qe}-video-tips`,children:s.uploading})]}),u&&P.jsxs("div",{className:`${qe}-video__error`,children:[P.jsx(Nce,{}),s.videoLoadError]})]}),P.jsx("video",{ref:o,"data-drag-handle":!0,controls:!0,src:e.src,height:e.height??"auto",width:e.fullInEditor?"100%":e.width??void 0,className:Ee(`${qe}-video-el`,{"ProseMirror-selectednode":t&&i.isEditable}),style:{maxWidth:e.width?void 0:"auto",display:l?void 0:"none"},onCanPlay:f,onError:g})]})})})}const VBe=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,vR=()=>({default:null,renderHTML:()=>null,parseHTML:()=>null}),Zq=n=>({default:null,renderHTML:e=>({[n]:e[n]}),parseHTML:e=>{let t=e.getAttribute(n);return t=/\d/.test(e.style[n])?`${parseFloat(e.style[n])}`:t,t}}),Bce=Gi.create({name:"video",inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addOptions(){return{inline:!1,HTMLAttributes:{},minWidth:300}},addAttributes(){return{src:{default:null,renderHTML:n=>({src:n.src}),parseHTML:n=>n.getAttribute("src")},width:Zq("width"),height:Zq("height"),aspectRatio:{default:null,renderHTML:n=>n.aspectRatio?{style:`aspect-ratio: ${n.aspectRatio}`}:{},parseHTML:n=>n.style.aspectRatio},fileUid:{default:null,renderHTML:n=>({"data-file-uid":n.fileUid}),parseHTML:n=>n.dataset.fileUid},rowFile:vR(),uploadAction:vR(),uploadFileHandler:vR()}},parseHTML(){return[{tag:"video"}]},renderHTML({HTMLAttributes:n}){return["video",Gn(this.options.HTMLAttributes,n,{controls:"controls"})]},addCommands(){return{setVideo:n=>({commands:e})=>e.insertContent({type:this.name,attrs:{src:n}})}},addInputRules(){return[pB({find:VBe,type:this.type,getAttributes:n=>{const[,,e]=n;return{src:e}}})]},addNodeView(){return ab(HBe)}}),zBe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:44,height:44,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"ppt_svg__a"},m.createElement("rect",{width:44,height:44,rx:0})),m.createElement("mask",{id:"ppt_svg__b",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},m.createElement("path",{fill:"#FFF",d:"M6.42 2.75h22.103c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v26.81a.903.903 0 0 1-.913.905H6.413a.91.91 0 0 1-.913-.915V3.665c0-.506.413-.915.92-.915"}))),m.createElement("g",{clipPath:"url(#ppt_svg__a)"},m.createElement("path",{fill:"#FF823C",d:"M7.307 2.75h21.216c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v25.906a1.8 1.8 0 0 1-1.82 1.809H7.32a1.806 1.806 0 0 1-1.82-1.816V4.566c0-1.013.794-1.816 1.807-1.816"}),m.createElement("g",{mask:"url(#ppt_svg__b)"},m.createElement("path",{fill:"#FFF",d:"M17.279 19.744v13.09h2.145v-5.023h3.245c3.19 0 4.785-1.357 4.785-4.052 0-2.677-1.595-4.015-4.748-4.015zm2.145 1.833h3.117c.935 0 1.631.165 2.071.514.44.33.679.88.679 1.668q0 1.183-.66 1.705c-.44.33-1.137.513-2.09.513h-3.117z"}),m.createElement("path",{fill:"#FEB48B",d:"M30.237 12.833h8.876c.8 0 1.236-.97.691-1.557L30.92 1.707c-.567-.61-1.586-.239-1.586.594v9.6c0 .506.398.932.904.932"})))),Xq=m.memo(zBe),WBe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"download_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#download_svg__a)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.833 7.403h-5.531l-.993-1.406a.58.58 0 0 0-.476-.247H5.166a.583.583 0 0 0-.583.583v9.917c0 .322.261.583.583.583h11.667a.583.583 0 0 0 .583-.583V7.986a.583.583 0 0 0-.583-.583M11 8.569a.58.58 0 0 1-.477-.246l-.992-1.406H5.75v8.75h10.5V8.569zm.583 1.848v2.095l.755-.754.413-.412.824.825-2.16 2.158a.583.583 0 0 1-.825 0l-1.752-1.75-.413-.412.825-.825.412.412.755.754V9.834h1.166z"}))),$Be=m.memo(WBe),UBe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:44,height:44,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"pdf_svg__a"},m.createElement("rect",{width:44,height:44,rx:0})),m.createElement("mask",{id:"pdf_svg__b",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},m.createElement("path",{fill:"#FFF",d:"M7.307 2.75h21.216c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v25.906a1.8 1.8 0 0 1-1.82 1.809H7.32a1.806 1.806 0 0 1-1.82-1.816V4.566c0-1.013.794-1.816 1.807-1.816"}))),m.createElement("g",{clipPath:"url(#pdf_svg__a)"},m.createElement("path",{fill:"#EE404B",d:"M9.157 2.75h18.589c1.033 0 1.97.42 2.665 1.185l7.147 7.862c.613.675.942 1.538.942 2.45v23.335c0 2.025-1.607 3.668-3.632 3.668H9.132c-2.025 0-3.632-1.66-3.632-3.686V6.436c0-2.025 1.632-3.686 3.657-3.686"}),m.createElement("g",{mask:"url(#pdf_svg__b)"},m.createElement("path",{fill:"#FC828A",d:"M30.237 12.833h8.876c.8 0 1.236-.97.691-1.557L30.92 1.707c-.567-.61-1.586-.239-1.586.594v9.6c0 .506.398.932.904.932"})),m.createElement("path",{fill:"#FFF",d:"M11.174 20.075v8.509h1.394v-3.265h2.11c2.073 0 3.11-.882 3.11-2.634 0-1.74-1.037-2.61-3.087-2.61zm1.394 1.192h2.026c.608 0 1.06.107 1.346.334.286.214.441.572.441 1.084q0 .77-.429 1.108c-.286.215-.739.334-1.358.334h-2.026zm6.411-1.192v8.509h3.11c1.383 0 2.42-.381 3.135-1.144.679-.727 1.024-1.764 1.024-3.11 0-1.359-.345-2.396-1.024-3.11-.716-.763-1.752-1.145-3.135-1.145zm1.394 1.192h1.454c1.06 0 1.835.238 2.324.727.477.477.715 1.263.715 2.336q0 1.573-.715 2.323c-.489.49-1.263.74-2.324.74h-1.454zm7.186-1.192v8.509h1.394v-3.766h4.16v-1.191h-4.16v-2.36h4.41v-1.192z"}))),jBe=m.memo(UBe),KBe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:44,height:44,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"doc_svg__a"},m.createElement("rect",{width:44,height:44,rx:0})),m.createElement("mask",{id:"doc_svg__b",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},m.createElement("path",{fill:"#FFF",d:"M6.42 2.75h22.103c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v26.81a.903.903 0 0 1-.913.905H6.413a.91.91 0 0 1-.913-.915V3.665c0-.506.413-.915.92-.915"}))),m.createElement("g",{clipPath:"url(#doc_svg__a)"},m.createElement("path",{fill:"#37F",d:"M7.307 2.75h21.216c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v25.906a1.8 1.8 0 0 1-1.82 1.809H7.32a1.806 1.806 0 0 1-1.82-1.816V4.566c0-1.013.794-1.816 1.807-1.816"}),m.createElement("g",{mask:"url(#doc_svg__b)"},m.createElement("path",{fill:"#82ABFF",d:"M30.237 12.833h8.876c.8 0 1.236-.97.691-1.557L30.92 1.707c-.567-.61-1.586-.239-1.586.594v9.6c0 .506.398.932.904.932"})),m.createElement("path",{fill:"#FFF",d:"M14.969 21.522 18.159 31h1.943l1.907-6.93L23.897 31h1.944l3.19-9.478h-2.31l-1.889 7.003-1.87-7.003h-1.925l-1.87 7.003-1.888-7.003z"}))),Qq=m.memo(KBe),qBe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:44,height:44,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"xls_svg__a"},m.createElement("rect",{width:44,height:44,rx:0})),m.createElement("mask",{id:"xls_svg__b",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},m.createElement("path",{fill:"#FFF",d:"M6.42 2.75h22.103c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v26.81a.903.903 0 0 1-.913.905H6.413a.91.91 0 0 1-.913-.915V3.665c0-.506.413-.915.92-.915"}))),m.createElement("g",{clipPath:"url(#xls_svg__a)"},m.createElement("path",{fill:"#25B973",d:"M7.307 2.75h21.216c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v25.906a1.8 1.8 0 0 1-1.82 1.809H7.32a1.806 1.806 0 0 1-1.82-1.816V4.566c0-1.013.794-1.816 1.807-1.816"}),m.createElement("g",{mask:"url(#xls_svg__b)"},m.createElement("path",{fill:"#51D496",d:"M30.237 12.833h8.876c.8 0 1.236-.97.691-1.557L30.92 1.707c-.567-.61-1.586-.239-1.586.594v9.6c0 .506.398.932.904.932"})),m.createElement("path",{fill:"#FFF",d:"M15.583 31.167h2.82l3.412-4.607h.17l3.361 4.607h2.99l-4.776-6.412 4.857-6.421h-2.91l-3.351 4.714h-.17l-3.302-4.714h-3.06l4.695 6.368z"}))),Jq=m.memo(qBe),GBe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:44,height:44,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"rar_svg__a"},m.createElement("rect",{width:44,height:44,rx:0})),m.createElement("mask",{id:"rar_svg__b",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},m.createElement("path",{fill:"#FFF",d:"M6.42 2.75h22.103c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v26.81a.903.903 0 0 1-.913.905H6.413a.91.91 0 0 1-.913-.915V3.665c0-.506.413-.915.92-.915"}))),m.createElement("g",{clipPath:"url(#rar_svg__a)"},m.createElement("path",{fill:"#6E4EFF",d:"M7.307 2.75h21.216c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v25.906a1.8 1.8 0 0 1-1.82 1.809H7.32a1.806 1.806 0 0 1-1.82-1.816V4.566c0-1.013.794-1.816 1.807-1.816"}),m.createElement("g",{mask:"url(#rar_svg__b)"},m.createElement("path",{fill:"#FFF",d:"M12.987 21.896h1.408c.805 0 1.31.462 1.31 1.196 0 .748-.476 1.189-1.293 1.189h-1.425zm0 3.63h1.329l1.443 2.808h1.837l-1.633-3.062c.891-.354 1.407-1.213 1.407-2.202 0-1.54-1.045-2.485-2.75-2.485h-3.255v7.749h1.622zm10.922 2.808h1.754l-2.689-7.749h-1.909l-2.689 7.749h1.626l.598-1.848h2.721zm-1.988-6.137h.097l.96 3.04h-2.03zm6.65-.301h1.407c.805 0 1.31.462 1.31 1.196 0 .748-.476 1.189-1.292 1.189H28.57zm0 3.63h1.328l1.443 2.808h1.837l-1.633-3.062c.892-.354 1.407-1.213 1.407-2.202 0-1.54-1.045-2.485-2.75-2.485H26.95v7.749h1.622z"}),m.createElement("path",{fill:"#B3A1FF",d:"M30.237 12.833h8.876c.8 0 1.236-.97.691-1.557L30.92 1.707c-.567-.61-1.586-.239-1.586.594v9.6c0 .506.398.932.904.932"})))),YBe=m.memo(GBe),ZBe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:44,height:44,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"zip_svg__a"},m.createElement("rect",{width:44,height:44,rx:0})),m.createElement("mask",{id:"zip_svg__b",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},m.createElement("path",{fill:"#FFF",d:"M6.42 2.75h22.103c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v26.81a.903.903 0 0 1-.913.905H6.413a.91.91 0 0 1-.913-.915V3.665c0-.506.413-.915.92-.915"}))),m.createElement("g",{clipPath:"url(#zip_svg__a)"},m.createElement("path",{fill:"#6E4EFF",d:"M7.307 2.75h21.216c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v25.906a1.8 1.8 0 0 1-1.82 1.809H7.32a1.806 1.806 0 0 1-1.82-1.816V4.566c0-1.013.794-1.816 1.807-1.816"}),m.createElement("g",{mask:"url(#zip_svg__b)"},m.createElement("path",{fill:"#FFF",d:"M13.551 28.334h5.984v-1.386h-3.996v-.096l3.888-5.178v-1.09h-5.784v1.385h3.808v.097l-3.9 5.172zm9.27 0v-7.75H21.2v7.75zm1.88-7.75v7.75h1.623v-2.406h1.53c1.633 0 2.767-1.07 2.767-2.664 0-1.612-1.09-2.68-2.686-2.68zm1.623 1.332h1.181c.935 0 1.467.472 1.467 1.353 0 .87-.543 1.343-1.472 1.343h-1.176z"}),m.createElement("path",{fill:"#B3A1FF",d:"M30.237 12.833h8.876c.8 0 1.236-.97.691-1.557L30.92 1.707c-.567-.61-1.586-.239-1.586.594v9.6c0 .506.398.932.904.932"})))),XBe=m.memo(ZBe),QBe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:44,height:44,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"common-file_svg__a"},m.createElement("rect",{width:44,height:44,rx:0})),m.createElement("mask",{id:"common-file_svg__b",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},m.createElement("path",{fill:"#FFF",d:"M6.42 2.75h22.103c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v26.81a.903.903 0 0 1-.913.905H6.413a.91.91 0 0 1-.913-.915V3.665c0-.506.413-.915.92-.915"}))),m.createElement("g",{clipPath:"url(#common-file_svg__a)"},m.createElement("path",{fill:"#B8C4C8",d:"M7.307 2.75h21.216c.516 0 1.02.23 1.367.613l8.13 8.942c.306.337.48.775.48 1.23v25.906a1.8 1.8 0 0 1-1.82 1.809H7.32a1.806 1.806 0 0 1-1.82-1.816V4.566c0-1.013.794-1.816 1.807-1.816"}),m.createElement("g",{mask:"url(#common-file_svg__b)"},m.createElement("path",{fill:"#D8E5EA",d:"M30.237 12.833H41.25L29.333 0v11.9c0 .507.398.933.904.933"})),m.createElement("path",{fill:"#FFF",d:"M14.773 27.416v-3.019h3.153v-1.326h-3.153v-2.02h3.454v-1.385H13.15v7.75zm4.807 0h1.563v-5.924H19.58zm.785-6.751c.558 0 .923-.328.923-.79 0-.467-.365-.79-.924-.79-.564 0-.923.323-.923.79 0 .462.36.79.924.79m2.411 6.751h1.563V19.23h-1.563zm5.747-4.855c.73 0 1.203.488 1.236 1.272h-2.525c.054-.768.564-1.272 1.29-1.272m1.268 3.168c-.167.393-.591.613-1.209.613-.816 0-1.332-.548-1.353-1.429v-.08h4.066v-.479c0-1.88-1.032-2.991-2.777-2.991-1.762 0-2.847 1.192-2.847 3.12 0 1.923 1.064 3.062 2.868 3.062 1.45 0 2.471-.698 2.707-1.816z"}))),eG=m.memo(QBe),JBe={pdf:P.jsx(jBe,{}),ppt:P.jsx(Xq,{}),pptx:P.jsx(Xq,{}),doc:P.jsx(Qq,{}),docx:P.jsx(Qq,{}),xls:P.jsx(Jq,{}),xlsx:P.jsx(Jq,{}),rar:P.jsx(YBe,{}),zip:P.jsx(XBe,{})},eHe=n=>{const{node:{attrs:e},updateAttributes:t}=n,i=jt(),[r,s]=m.useState(0),o=m.useMemo(()=>rS(e.size),[e.size]),a=m.useMemo(()=>{const c=N7e(e.name);return c?JBe[c]??P.jsx(eG,{}):P.jsx(eG,{})},[e.name]),l=m.useCallback(()=>{const{src:c,name:u,downloadFileHandler:d}=e;typeof d=="function"?d({src:c,name:u,onProgress:h=>s(h)}):L7e(c,u)},[e]);return m.useEffect(()=>{const{rowFile:c,uploadAction:u,uploadFileHandler:d}=e;if(!c)return;const h={onProgress:f=>s(f),onSuccess:f=>t({...f,rowFile:null})};typeof d=="function"?d(h):u&&UB({file:c,url:u,...h})},[e.rowFile,e.uploadAction,e.uploadFileHandler,t]),{locale:i,filePercent:r,fileSize:o,icon:a,handleDownload:l}};function tHe(n){const{node:{attrs:e},selected:t,editor:i,HTMLAttributes:r}=n,{locale:s,filePercent:o,fileSize:a,icon:l,handleDownload:c}=eHe(n);return P.jsx(ob,{className:"block",style:{textAlign:e.textAlign},...cb(r),children:P.jsxs("div",{className:Ee(`${qe}-file`,{"ProseMirror-selectednode":t&&i.isEditable,[`${qe}-file__selected`]:t&&i.isEditable}),"data-drag-handle":!0,children:[l,P.jsxs("div",{className:`${qe}-file-info`,children:[P.jsx("div",{className:`${qe}-file-name`,title:e.name,children:e.name}),P.jsx("div",{className:`${qe}-file-size`,children:a})]}),o>0&&o<100&&P.jsx(YF,{type:"circle",width:36,percent:o}),e.src&&P.jsx(Vf,{title:s.download,children:P.jsx(bi,{type:"text",size:"small",icon:P.jsx($Be,{}),onClick:c})})]})})}const qb=(n,e)=>({default:null,renderHTML:t=>({[`data-${e||n}`]:t[n]}),parseHTML:t=>t.dataset[e||n]}),Fx=()=>({default:null,renderHTML:()=>null,parseHTML:()=>null}),Hce=Gi.create({name:"file",group:"block",draggable:!0,addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{src:qb("src"),type:{...qb("type","file-type"),parseHTML:n=>n.dataset.fileType},name:qb("name"),size:{...qb("size"),parseHTML:n=>n.dataset.size?parseInt(n.dataset.size,10):0},fileUid:qb("fileUid","file-uid"),rowFile:Fx(),uploadAction:Fx(),uploadFileHandler:Fx(),downloadFileHandler:Fx()}},parseHTML(){return[{tag:'div[data-type="file"]'}]},renderHTML({HTMLAttributes:n}){return["div",Gn(this.options.HTMLAttributes,n,{"data-type":"file"}),["div",{class:"file-info"},["div",{class:"file-name"},n["data-name"]],["div",{class:"file-size"},rS(n["data-size"])]]]},addCommands(){return{setFile:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addNodeView(){return ab(tHe)}}),nHe=n=>{const{selected:e,updateAttributes:t,extension:i}=n,[r,s]=m.useState(!0),[o,a]=m.useState(!0),l=m.useRef(null),c=i.options.minWidth??300,u=m.useCallback(f=>{f.stopPropagation(),s(!1),a(!1)},[]),d=m.useCallback(f=>{t({width:f})},[t]),h=m.useCallback(()=>l.current.getBoundingClientRect(),[]);return m.useEffect(()=>{e||(s(!0),a(!0))},[e]),{iframeRef:l,showMask:r,resizable:o,minWidth:c,handleMaskClick:u,handleSizeChange:d,getElementRect:h}};function iHe(n){const{node:{attrs:e},selected:t,editor:i,HTMLAttributes:r}=n,{iframeRef:s,showMask:o,resizable:a,minWidth:l,handleMaskClick:c,handleSizeChange:u,getElementRect:d}=nHe(n);return P.jsx(ZB,{size:e.width,miniSize:l,visible:i.isEditable&&t,onSizeChange:u,children:P.jsx(ob,{className:"block",style:{textAlign:e.textAlign},...cb(r),children:P.jsxs(YB,{className:`${qe}-iframe`,selected:t,disabled:!(i.isEditable&&a),full:e.fullInEditor,minWidth:l,getElementRect:d,onResize:u,children:[P.jsx("iframe",{ref:s,src:e.src,width:e.fullInEditor?"100%":e.width??void 0,className:Ee(`${qe}-iframe-el`,{"ProseMirror-selectednode":t&&i.isEditable})}),i.isEditable&&o&&P.jsx("div",{className:`${qe}-iframe-mask`,onDoubleClick:c})]})})})}const Vce=Gi.create({name:"iframe",group:"block",addOptions(){return{HTMLAttributes:{frameborder:"0",allowfullscreen:"true"},src:"",width:640,height:360,minWidth:200}},addAttributes(){return{src:{default:this.options.src,renderHTML:n=>({src:n.src}),parseHTML:n=>n.getAttribute("src")},width:{default:this.options.width,renderHTML:n=>({width:n.width}),parseHTML:n=>n.getAttribute("width")},height:{default:this.options.height,renderHTML:n=>({height:n.height}),parseHTML:n=>n.getAttribute("height")},allowFullscreen:{default:!0,renderHTML:n=>({allowfullscreen:n.allowFullscreen?"true":null}),parseHTML:n=>n.getAttribute("allowfullscreen")!==null}}},parseHTML(){return[{tag:"iframe"}]},renderHTML({HTMLAttributes:n}){return["iframe",Gn(this.options.HTMLAttributes,n)]},addNodeView(){return ab(iHe)},addCommands(){return{setIframe:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}}}),rHe=pi.create({name:"fullInEditor",addOptions(){return{types:["image","video","iframe"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fullInEditor:{default:!1,parseHTML:n=>n.dataset.fullInEditor==="true",renderHTML:n=>({"data-full-in-editor":n.fullInEditor})}}}]},addCommands(){return{toggleFullInEditor:()=>({state:n,commands:e})=>{const{from:t,to:i}=n.selection;let r=!0;return n.doc.nodesBetween(t,i,s=>{if(!this.options.types.includes(s.type.name)){r=!1;return}e.updateAttributes(s.type,{fullInEditor:!s.attrs.fullInEditor})}),r}}}}),sHe=pi.create({name:"clearFormat",addCommands(){return{clearFormat:()=>({commands:n})=>n.clearNodes()&&n.unsetAllMarks()}}}),oHe=dle.extend({inclusive:!1}),aHe=kOe.extend({excludes:"superscript"}),lHe=EOe.extend({excludes:"subscript"});function zce({placeholder:n}){return[CPe,XPe.configure({HTMLAttributes:{class:`block ${qe}-block`}}),RPe.configure({HTMLAttributes:{class:`block ${qe}-heading`}}),mPe.configure({HTMLAttributes:{class:`block ${qe}-bullet-list`}}),uPe.configure({HTMLAttributes:{class:`block ${qe}-blockquote`}}),uce.configure({HTMLAttributes:{class:`block ${qe}-code-block`}}),RB.configure({HTMLAttributes:{class:`${qe}-list-item`}}),ZPe.configure({HTMLAttributes:{class:`block ${qe}-ordered-list`}}),H7e.configure({HTMLAttributes:{class:`block ${qe}-columns`}}),V7e.configure({HTMLAttributes:{class:`${qe}-column`}}),UPe.configure({HTMLAttributes:{class:`block ${qe}-horizontal-rule`}}),TBe.configure({HTMLAttributes:{class:`block ${qe}-highlight-block`}}),xOe.configure({HTMLAttributes:{class:`block ${qe}-task-list`}}),SOe.configure({nested:!0,HTMLAttributes:{class:`block ${qe}-task-item`}}),F3e.configure({resizable:!0,cellMinWidth:150,allowTableNodeSelection:!0,HTMLAttributes:{class:`block ${qe}-table`}}),B3e,H3e,P7e,Fce.configure({minWidth:100,HTMLAttributes:{class:`${qe}-image`}}),Bce.configure({minWidth:300,HTMLAttributes:{class:`${qe}-video`}}),Hce.configure({HTMLAttributes:{class:`${qe}-file`}}),Vce.configure({minWidth:500,HTMLAttributes:{class:`${qe}-iframe`}}),yOe.configure({placeholder:n}),t5e,e5e,pPe,_Pe,YPe,pOe,Fy,_Oe.configure({types:["heading","paragraph","image","video","iframe"],defaultAlignment:""}),IBe,COe,aHe,lHe,B7e,oHe.configure({openOnClick:!1,linkOnPaste:!0,HTMLAttributes:{class:`${qe}-link`}}),bOe.configure({multicolor:!0}),SPe,DPe,MPe,$Pe,F7e,ROe,LOe,h5e,rHe,sHe,z7e]}const cHe=({className:n,children:e})=>P.jsx("div",{className:Ee(`${qe}-menubar`,n),children:e}),uHe=n=>{const{linkText:e,href:t,target:i,onOk:r}=n,s=ln(),o=jt(),[a,l]=m.useState("_blank"),[c,u]=m.useState(""),[d,h]=m.useState(""),f=m.useCallback(b=>{u(b.target.value)},[]),g=m.useCallback(b=>{h(b.target.value)},[]),p=m.useCallback(b=>{l(b?"_blank":null)},[]),v=m.useCallback(()=>{if(!I7e(d)){bl.error(o.linkInvalid);return}s==null||s.chain().extendMarkRange("link").insertContent({type:"text",marks:[{type:"link",attrs:{href:d,target:a}}],text:c}).setLink({href:d,target:a}).focus().run(),r()},[s,d,a,c,r,o]);return m.useEffect(()=>{u(e),t&&h(t)},[e,t]),m.useEffect(()=>{l(i)},[i]),{text:c,href:d,target:a,isDisabled:!c||!d,handleTextChange:f,handleHrefChange:g,handleTargetChange:p,handleSubmit:v}},Wce=({className:n,linkText:e,title:t,target:i,href:r,onCancel:s,onOk:o})=>{const a=jt(),{text:l,href:c,isDisabled:u,handleTextChange:d,handleHrefChange:h,handleSubmit:f}=uHe({linkText:e,href:r,target:i,onOk:o});return P.jsxs("div",{className:Ee(`${qe}-link-edit`,n),children:[P.jsx("div",{className:`${qe}-link-title`,children:t}),P.jsx(Qo,{prefix:a.linkText,value:l,onChange:d}),P.jsx(Qo,{prefix:a.linkHref,placeholder:a.linkPlaceholder,value:c,onChange:h,onPressEnter:f}),P.jsxs("div",{className:`${qe}-link-btn`,children:[P.jsx(bi,{onClick:s,children:a.cancel}),P.jsx(bi,{disabled:u,type:"primary",onClick:f,children:a.ok})]})]})},dHe=()=>{const[n,e]=m.useState("preview"),t=m.useRef(null),i=m.useRef(""),r=jt(),s=ln(),o=lce(s),a=s==null?void 0:s.getAttributes("link"),l=a.href??"",c=a.target??"";l&&(i.current=l);const u=()=>{s==null||s.chain().extendMarkRange("link").unsetLink().setTextSelection(s==null?void 0:s.state.selection.to).focus().run()},d=()=>{e("edit"),t.current&&(t.current.hide(),t.current.show())},h=()=>{t.current&&t.current.hide()},f=()=>{t.current&&(t.current.hide(),t.current.show()),e("preview")},g=m.useMemo(()=>({fn(b){return{onCreate(){t.current=b},onDestroy(){t.current=null}}}}),[]),p=b=>{b.key.toLowerCase()==="escape"&&t.current&&t.current.hide()};return m.useEffect(()=>(n==="edit"&&document.addEventListener("keydown",p,!1),()=>{document.removeEventListener("keydown",p,!1)}),[n]),{state:n,editor:s,locale:r,hrefRef:i,linkText:o,currentTarget:c,bubbleMenuOptions:{shouldShow:()=>((s==null?void 0:s.isEditable)&&(s==null?void 0:s.isActive("link")))??!1,tippyOptions:{duration:200,placement:"bottom",animation:"shift-away",offset:[0,2],zIndex:2,onHidden:()=>e("preview"),plugins:[g]}},handleUnlink:u,switchToEdit:d,closeMenu:h,saveAndPreview:f}},hHe=({href:n,locale:e,onEdit:t,onUnlink:i})=>P.jsxs("div",{className:`${qe}-link-preview`,children:[P.jsx("a",{href:n,target:"_blank",title:n,draggable:"false",rel:"noopener noreferrer",children:n}),P.jsxs(db,{children:[P.jsx(gd,{}),P.jsx(dn,{tooltip:e.edit,icon:P.jsx(Lce,{}),onClick:t}),P.jsx(dn,{tooltip:e.unLink,icon:P.jsx(j9e,{}),onClick:i})]})]}),fHe=()=>{const{state:n,editor:e,locale:t,hrefRef:i,linkText:r,currentTarget:s,bubbleMenuOptions:o,handleUnlink:a,switchToEdit:l,closeMenu:c,saveAndPreview:u}=dHe();return e?P.jsx(vD,{editor:e,shouldShow:o.shouldShow,tippyOptions:o.tippyOptions,children:n==="preview"?P.jsx(hHe,{href:i.current,locale:t,onEdit:l,onUnlink:a}):P.jsx(Wce,{className:`${qe}-link--float`,title:t.editLink,linkText:r,href:i.current,target:s,onCancel:c,onOk:u})}):null},gHe=(n,e)=>{const[t,i]=m.useState(""),r=m.useCallback(o=>{i(o.target.value)},[]),s=m.useCallback(()=>{!t||!e||e(t)},[t,e]);return m.useEffect(()=>{n&&i(n)},[n]),{src:t,isDisabled:!t,handleSrcChange:r,handleSubmit:s}},XB=({className:n,src:e,title:t,onCancel:i,onOk:r})=>{const s=jt(),{src:o,isDisabled:a,handleSrcChange:l,handleSubmit:c}=gHe(e,r);return P.jsxs("div",{className:Ee(`${qe}-iframe-edit`,n),children:[P.jsx("div",{className:`${qe}-iframe-title`,children:t}),P.jsx(Qo,{prefix:s.iframeSrc,placeholder:s.linkPlaceholder,value:o,onChange:l,onPressEnter:c}),P.jsxs("div",{className:`${qe}-iframe-btn`,children:[P.jsx(bi,{onClick:i,children:s.cancel}),P.jsx(bi,{disabled:a,type:"primary",onClick:c,children:s.ok})]})]})},pHe=()=>{const[n,e]=m.useState("preview"),t=m.useRef(null),i=m.useRef(""),r=jt(),s=ln(),o=(s==null?void 0:s.getAttributes("iframe").src)??"";o&&(i.current=o);const a=m.useMemo(()=>({fn(g){return{onCreate(){t.current=g},onDestroy(){t.current=null}}}}),[]),l=g=>{g.key.toLowerCase()==="escape"&&t.current&&t.current.hide()},c=()=>{e("edit"),t.current&&(t.current.hide(),t.current.show())},u=()=>{s==null||s.commands.deleteSelection()},d=()=>{t.current&&t.current.hide()},h=()=>{t.current&&(t.current.hide(),t.current.show()),e("preview")};return m.useEffect(()=>(n==="edit"&&document.addEventListener("keydown",l,!1),()=>{document.removeEventListener("keydown",l,!1)}),[n]),{state:n,editor:s,locale:r,srcRef:i,bubbleMenuOptions:{shouldShow:()=>((s==null?void 0:s.isEditable)&&(s==null?void 0:s.isActive("iframe")))??!1,tippyOptions:{duration:200,placement:"bottom",animation:"shift-away",offset:[0,4],zIndex:2,onHidden:()=>e("preview"),plugins:[a]}},switchToEdit:c,deleteIframe:u,closeMenu:d,saveAndPreview:h}},mHe=({src:n,locale:e,onEdit:t,onDelete:i})=>P.jsxs("div",{className:`${qe}-iframe-preview`,children:[P.jsx("a",{href:n,target:"_blank",title:n,draggable:"false",rel:"noopener noreferrer",children:n}),P.jsxs(db,{children:[P.jsx(gd,{}),P.jsx(dn,{tooltip:e.edit,icon:P.jsx(Lce,{}),onClick:t}),P.jsx(dn,{tooltip:e.delete,icon:P.jsx(sS,{}),onClick:i})]})]}),vHe=()=>{const{state:n,editor:e,locale:t,srcRef:i,bubbleMenuOptions:r,switchToEdit:s,deleteIframe:o,closeMenu:a,saveAndPreview:l}=pHe();return e?P.jsx(vD,{editor:e,shouldShow:r.shouldShow,tippyOptions:r.tippyOptions,children:n==="preview"?P.jsx(mHe,{src:i.current,locale:t,onEdit:s,onDelete:o}):P.jsx(XB,{className:`${qe}-iframe--float`,title:t.editIframe,src:i.current,onCancel:a,onOk:l})}):null},bHe=()=>{const n=ln(),e=jt();return{isDisabled:!(n!=null&&n.isEditable)||!(n!=null&&n.can().undo()),undo:()=>{n==null||n.chain().focus().undo().run()},tooltip:e.undo}},_He=()=>{const{isDisabled:n,undo:e,tooltip:t}=bHe();return P.jsx(dn,{tooltip:t,icon:P.jsx(pBe,{}),disabled:n,onClick:e})},CHe=()=>{const n=ln(),e=jt();return{isDisabled:!(n!=null&&n.isEditable)||!(n!=null&&n.can().redo()),redo:()=>{n==null||n.chain().focus().redo().run()},tooltip:e.redo}},yHe=()=>{const{isDisabled:n,redo:e,tooltip:t}=CHe();return P.jsx(dn,{tooltip:t,icon:P.jsx(eBe,{}),disabled:n,onClick:e})},wHe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"heading1_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#heading1_svg__a)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.167 5.75v10.5h1.166v-4.666h4.376v4.666h1.167V5.75h-1.167v4.667H6.333V5.75zm9.625 5.248v5.252h1.166V9.546a.583.583 0 0 0-1.004-.403l-1.393 1.453-.403.421.842.807.404-.42z"}))),$ce=m.memo(wHe),SHe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"heading2_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#heading2_svg__a)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.167 5.75v10.5h1.166v-4.666h4.084v4.666h1.166V5.75h-1.166v4.667H6.333V5.75zm8.166 10.5h3.5v-1.167h-2.657q.302-.425.955-1.052.79-.759 1.105-1.18.597-.795.597-1.56 0-.914-.67-1.51-.595-.531-1.372-.531t-1.372.53q-.67.597-.67 1.512v.583h1.167v-.583q0-.392.279-.64.264-.235.596-.235.333 0 .596.235.28.248.28.64 0 .375-.364.86-.259.344-.98 1.038-.734.705-1.021 1.08-.552.72-.552 1.397c0 .322.26.583.583.583"}))),Uce=m.memo(SHe),xHe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"heading3_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#heading3_svg__a)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.167 5.75v10.5h1.166v-4.666h4.084v4.666h1.166V5.75h-1.166v4.667H6.333V5.75zm9.624 9.333q-.644 0-1.027-.421l-.392-.432-.863.785.092.1.301.33.02-.018q.922.823 1.869.823.753 0 1.298-.408.744-.558.744-1.634 0-1.126-.803-1.768-.331-.265-.753-.406l1.433-1.843a.583.583 0 0 0-.46-.941h-3.5v1.167h2.307l-1.31 1.683a.583.583 0 0 0 .46.942q.707 0 1.094.31.365.29.365.856 0 .875-.875.875"}))),jce=m.memo(xHe),kHe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"heading4_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#heading4_svg__a)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.167 5.75v10.5h1.166v-4.666h4.084v4.666h1.166V5.75h-1.166v4.667H6.333V5.75zm11.077 9.048h.882V13.63h-.882V9.833a.583.583 0 0 0-1.063-.331l-2.619 3.79a.6.6 0 0 0-.103.332v.59c0 .322.261.584.583.584h2.035v1.452h1.167zm-1.167-1.167v-1.927l-1.33 1.927z"}))),Kce=m.memo(kHe),EHe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"heading5_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#heading5_svg__a)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.167 5.75v10.5h1.166v-4.666h4.084v4.666h1.166V5.75h-1.166v4.667H6.333V5.75zm9.333 9.334q-.584 0-.584-.581v-.584H12.75l.001.155v.429h.022q.072.82.367 1.174.479.574 1.36.574 2.041 0 2.041-2.48t-1.75-2.479q-.45 0-.875.086v-.666h2.334V9.545h-2.917a.583.583 0 0 0-.583.583v2.05a.583.583 0 0 0 .885.498l.029-.012q.1-.043.233-.081.426-.124.894-.124.283 0 .401.213.183.33.183 1.1 0 .766-.195 1.058-.168.254-.68.254m-.858-2.412q.274-.15.274-.495a.58.58 0 0 1-.274.495"}))),qce=m.memo(EHe),LHe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"heading6_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#heading6_svg__a)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.167 16.25V5.75h1.166v4.667h4.084V5.75h1.166v10.5h-1.166v-4.666H6.333v4.666zm7.292-2.187v-2.188q0-.951.623-1.631.643-.702 1.564-.702.692 0 1.255.422.537.4.778 1.048l.204.547-1.093.407-.204-.546q-.265-.711-.94-.711-.407 0-.704.323-.316.345-.316.843v.246q.46-.246 1.02-.246.907 0 1.547.64.64.641.64 1.547 0 .907-.64 1.547-.64.641-1.547.641t-1.546-.64q-.48-.48-.6-1.11h-.041zm1.167 0q0 .422.299.721.299.3.721.3.423 0 .722-.3.3-.299.3-.722 0-.422-.3-.721-.299-.3-.722-.3-.422 0-.721.3-.3.299-.3.722"}))),Gce=m.memo(LHe),NHe=()=>{const[n,e]=m.useState(!1),t=m.useCallback(r=>{e(r)},[]),i=m.useCallback(()=>{e(!1)},[]);return{visible:n,handleVisibleChange:t,handleMenuClick:i}},THe=({icon:n,onClick:e,selected:t,disabled:i,children:r})=>P.jsx(Ar.Item,{onClick:e,disabled:i,children:P.jsxs("div",{className:Ee(`${qe}-menu__dropdown-item`,t&&`${qe}-menu__dropdown--selected`),children:[n,r,t&&P.jsx(xD,{})]})}),za=({tooltip:n,disabled:e,activeIcon:t,dropdownWidth:i,className:r,arrow:s=!0,style:o,children:a})=>{const{visible:l,handleVisibleChange:c,handleMenuClick:u}=NHe();return P.jsx(Vf,{placement:"top",title:n,destroyTooltipOnHide:!0,children:P.jsx(WF,{trigger:["click"],disabled:e,open:l,onOpenChange:c,overlayStyle:{width:i},overlay:P.jsx(Ar,{onClick:u,children:a}),children:P.jsxs(bi,{type:"text",size:"small",className:r,style:o,children:[t,s&&(l?P.jsx(L9e,{style:{fontSize:10,marginLeft:4}}):P.jsx(k9e,{style:{fontSize:10,marginLeft:4}}))]})})})};za.Item=THe;const IHe=za.Item,DHe=n=>{const e=ln(),t=jt(),i=m.useMemo(()=>[{label:t.text,level:0,icon:P.jsx(qB,{})},{label:t.heading1,level:1,icon:P.jsx($ce,{})},{label:t.heading2,level:2,icon:P.jsx(Uce,{})},{label:t.heading3,level:3,icon:P.jsx(jce,{})},{label:t.heading4,level:4,icon:P.jsx(Kce,{})},{label:t.heading5,level:5,icon:P.jsx(qce,{})},{label:t.heading6,level:6,icon:P.jsx(Gce,{})}],[t]),r=m.useMemo(()=>[0,...n].map(c=>i[c]),[n,i]),s=n.find(c=>e==null?void 0:e.isActive("heading",{level:c}))??0,o=!(e!=null&&e.isEditable)||!(e!=null&&e.can().setParagraph())&&!(e!=null&&e.can().setHeading({level:n[0]}));return{headings:r,currentActive:s,isDisabled:o,setHeading:c=>{e==null||e.chain().focus().setHeading({level:c}).run()},setParagraph:()=>e==null?void 0:e.chain().focus().setParagraph().run(),headingMapping:i,tooltip:t.fontStyle}},MHe=({levels:n=[1,2,3,4,5,6]})=>{const{headings:e,currentActive:t,isDisabled:i,setHeading:r,setParagraph:s,headingMapping:o,tooltip:a}=DHe(n);return P.jsx(za,{tooltip:a,className:`${qe}-heading-menu__btn`,activeIcon:P.jsx("span",{children:o[t].label}),disabled:i,children:e.map(({label:l,level:c,icon:u})=>P.jsx(IHe,{icon:u,selected:t===c,onClick:()=>c===0?s():r(c),children:l},c))})},RHe=za.Item,AHe=n=>{const e=ln(),t=jt(),i=!(e!=null&&e.isEditable);return{currentSize:e!=null&&e.isActive("textStyle")?e.getAttributes("textStyle").fontSize:void 0,isDisabled:i,fontSizes:n,setFontSize:o=>{e==null||e.chain().focus().setFontSize(o).run()},tooltip:t.fontSize}},Yce=({fontSize:n=r5e})=>{const{currentSize:e,isDisabled:t,setFontSize:i,tooltip:r}=AHe(n);return P.jsx(za,{tooltip:r,activeIcon:e?P.jsx("span",{style:{marginRight:4,paddingLeft:4},children:e}):P.jsx(qB,{}),disabled:t,dropdownWidth:78,children:n.map(s=>P.jsx(RHe,{selected:e===s,onClick:()=>i(s),children:s},s))})},OHe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"blockquote_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#blockquote_svg__a)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.696 7.608h.635v-.983h-.635q-1.256 0-2.144.888t-.888 2.144v4.98c0 .407.33.738.739.738h.244v-.002h2.684c.408 0 .738-.331.738-.739V12.3a.74.74 0 0 0-.738-.739H7.647V9.657q0-.849.6-1.45.6-.6 1.45-.6m5.615 0h.634v-.983h-.634q-1.256 0-2.145.888-.888.888-.888 2.144v4.98c0 .407.331.738.739.738h.244v-.002h2.581c.408 0 .739-.331.739-.739V12.3a.74.74 0 0 0-.739-.739h-2.581V9.657q0-.849.6-1.45.6-.6 1.45-.6"}))),Zce=m.memo(OHe),PHe=()=>{const n=ln(),e=jt(),t=(n==null?void 0:n.isActive("blockquote"))??!1,i=!(n!=null&&n.isEditable)||!(n!=null&&n.can().toggleBlockquote());return{isActive:t,isDisabled:i,toggleBlockquote:()=>{n==null||n.chain().focus().toggleBlockquote().run()},tooltip:e.blockquote}},FHe=()=>{const{isActive:n,isDisabled:e,toggleBlockquote:t,tooltip:i}=PHe();return P.jsx(dn,{tooltip:i,icon:P.jsx(Zce,{}),selected:n,disabled:e,onClick:t})},BHe=()=>{const n=ln(),e=jt(),t=(n==null?void 0:n.isActive("bold"))??!1,i=!(n!=null&&n.isEditable)||!(n!=null&&n.can().toggleBold());return{isActive:t,isDisabled:i,toggleBold:()=>{n==null||n.chain().focus().toggleBold().run()},tooltip:e.bold}},Xce=()=>{const{isActive:n,isDisabled:e,toggleBold:t,tooltip:i}=BHe();return P.jsx(dn,{tooltip:i,icon:P.jsx(S9e,{}),selected:n,disabled:e,onClick:t})},HHe=()=>{const n=ln(),e=jt(),t=(n==null?void 0:n.isActive("italic"))??!1,i=!(n!=null&&n.isEditable)||!(n!=null&&n.can().toggleItalic());return{isActive:t,isDisabled:i,toggleItalic:()=>{n==null||n.chain().focus().toggleItalic().run()},tooltip:e.italic}},Qce=()=>{const{isActive:n,isDisabled:e,toggleItalic:t,tooltip:i}=HHe();return P.jsx(dn,{tooltip:i,icon:P.jsx(kFe,{}),selected:n,disabled:e,onClick:t})},VHe=()=>{const n=ln(),e=jt(),t=(n==null?void 0:n.isActive("strike"))??!1,i=!(n!=null&&n.isEditable)||!(n!=null&&n.can().toggleStrike());return{isActive:t,isDisabled:i,toggleStrike:()=>{n==null||n.chain().focus().toggleStrike().run()},tooltip:e.strike}},Jce=()=>{const{isActive:n,isDisabled:e,toggleStrike:t,tooltip:i}=VHe();return P.jsx(dn,{tooltip:i,icon:P.jsx(aBe,{}),selected:n,disabled:e,onClick:t})},zHe=()=>{const n=ln(),e=jt(),t=(n==null?void 0:n.isActive("underline"))??!1,i=!(n!=null&&n.isEditable)||!(n!=null&&n.can().toggleUnderline());return{isActive:t,isDisabled:i,toggleUnderline:()=>{n==null||n.chain().focus().toggleUnderline().run()},tooltip:e.underLine}},eue=()=>{const{isActive:n,isDisabled:e,toggleUnderline:t,tooltip:i}=zHe();return P.jsx(dn,{tooltip:i,icon:P.jsx(hBe,{}),selected:n,disabled:e,onClick:t})},WHe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"sub_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#sub_svg__a)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m8.287 11.288-2.772 3.773-.378.515.94.69 2.933-3.994 2.935 3.996.94-.691-3.151-4.289L12.884 7l-.94-.692-2.934 3.995-2.933-3.994-.94.692.378.515zM13.824 15.914q.14.136.338.136h2.622v-.933h-1.901q.22-.278.634-.665.584-.545.818-.849.449-.582.449-1.144 0-.677-.51-1.118-.45-.39-1.04-.39t-1.041.39q-.51.441-.51 1.118v.466h.958v-.466q0-.257.187-.42.18-.155.406-.155.225 0 .405.155.188.163.188.42 0 .25-.257.583-.188.243-.715.736-.542.506-.755.777-.416.528-.416 1.029 0 .193.14.33m1.66-1.499q-.48.448-.702.752l.037-.05q.224-.29.664-.702m.811-.842q-.231.3-.812.842.58-.542.812-.842m.395-.769q-.094.38-.395.769.3-.39.395-.769m-2.913-.714q-.043.174-.043.369 0-.195.043-.37M14.796 12q-.144.124-.187.298.043-.174.187-.298m.438-.167q-.245 0-.438.167.193-.167.438-.167m.438.167q-.194-.168-.438-.167.244 0 .438.167m.205.458q0-.28-.205-.458.205.178.205.458m-.02.15q.02-.078.02-.15 0 .072-.02.15M13.77 15.29q-.036.148-.036.294 0-.146.036-.294"}))),tue=m.memo(WHe),$He=()=>{const n=ln(),e=jt(),t=(n==null?void 0:n.isActive("subscript"))??!1,i=!(n!=null&&n.isEditable)||!(n!=null&&n.can().toggleSubscript());return{isActive:t,isDisabled:i,toggleSubscript:()=>{n==null||n.chain().focus().toggleSubscript().run()},tooltip:e.subscript}},UHe=()=>{const{isActive:n,isDisabled:e,toggleSubscript:t,tooltip:i}=$He();return P.jsx(dn,{tooltip:i,icon:P.jsx(tue,{}),selected:n,disabled:e,onClick:t})},jHe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"super_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#super_svg__a)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m8.287 11.288-2.772 3.774-.378.514.94.69 2.933-3.993 2.935 3.996.94-.692-3.15-4.289L12.884 7l-.94-.692-2.935 3.995L6.077 6.31 5.137 7l.379.515zM14.357 10.914q.14.136.338.136h2.621v-.933h-1.9q.22-.278.634-.665.583-.545.818-.849.448-.582.448-1.144 0-.677-.509-1.118-.451-.39-1.04-.39-.59 0-1.042.39-.509.441-.509 1.118v.466h.958V7.46q0-.257.187-.42.18-.155.405-.155t.406.155q.187.163.187.42 0 .25-.256.583-.188.243-.715.736-.542.506-.755.777-.417.528-.417 1.029 0 .193.141.33m1.659-1.499q-.48.448-.701.752l.037-.05q.223-.29.664-.702m.812-.842q-.232.3-.812.842.58-.542.812-.842m.395-.769q-.094.38-.395.769.3-.39.395-.769M14.31 7.09q-.044.174-.044.369 0-.195.044-.37M15.328 7q-.143.124-.186.298.043-.174.186-.298m.438-.167q-.244 0-.438.167.194-.167.438-.167m.438.167q-.193-.168-.438-.167.245 0 .438.167m.205.458q0-.28-.205-.458.205.178.205.458m-.02.15q.02-.078.02-.15 0 .072-.02.15m-2.086 2.681q-.037.148-.037.294 0-.146.037-.294"}))),nue=m.memo(jHe),KHe=()=>{const n=ln(),e=jt(),t=(n==null?void 0:n.isActive("superscript"))??!1,i=!(n!=null&&n.isEditable)||!(n!=null&&n.can().toggleSuperscript());return{isActive:t,isDisabled:i,toggleSuperscript:()=>{n==null||n.chain().focus().toggleSuperscript().run()},tooltip:e.superscript}},qHe=()=>{const{isActive:n,isDisabled:e,toggleSuperscript:t,tooltip:i}=KHe();return P.jsx(dn,{tooltip:i,icon:P.jsx(nue,{}),selected:n,disabled:e,onClick:t})},GHe=n=>{const{visible:e,disabled:t,onVisibleChange:i}=n,[r,s]=m.useState(!!e),o=m.useCallback(l=>{if(t){s(!1);return}"visible"in n?i==null||i(l):s(l)},[n,t,i]),a=m.useCallback(l=>{l.key.toLowerCase()==="escape"&&o(!1)},[o]);return m.useEffect(()=>{if(e!==void 0)return s(e),e?document.addEventListener("keydown",a,!1):document.removeEventListener("keydown",a,!1),()=>{document.removeEventListener("keydown",a,!1)}},[e,a]),{visible:r,handleVisibleChange:o}},fm=n=>{const{tooltip:e,icon:t,disabled:i,selected:r,placement:s="bottomLeft",children:o,onClick:a}=n,{visible:l,handleVisibleChange:c}=GHe(n);return P.jsx(Vf,{placement:"top",title:e,destroyTooltipOnHide:!0,children:P.jsx(jI,{overlayInnerStyle:{padding:6},showArrow:!1,content:o,trigger:["click"],placement:s,destroyTooltipOnHide:!0,open:l,onOpenChange:c,children:P.jsx(bi,{disabled:i,icon:t,className:Ee({[`${qe}-menu--selected`]:r}),size:"small",type:"text",onClick:a})})})};function kD(){return(kD=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function iue(n,e){if(n==null)return{};var t,i,r={},s=Object.keys(n);for(i=0;i<s.length;i++)e.indexOf(t=s[i])>=0||(r[t]=n[t]);return r}function NP(n){var e=m.useRef(n),t=m.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var x1=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},uC=function(n){return"touches"in n},TP=function(n){return n&&n.ownerDocument.defaultView||self},tG=function(n,e,t){var i=n.getBoundingClientRect(),r=uC(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:x1((r.pageX-(i.left+TP(n).pageXOffset))/i.width),top:x1((r.pageY-(i.top+TP(n).pageYOffset))/i.height)}},nG=function(n){!uC(n)&&n.preventDefault()},QB=Ue.memo(function(n){var e=n.onMove,t=n.onKey,i=iue(n,["onMove","onKey"]),r=m.useRef(null),s=NP(e),o=NP(t),a=m.useRef(null),l=m.useRef(!1),c=m.useMemo(function(){var f=function(v){nG(v),(uC(v)?v.touches.length>0:v.buttons>0)&&r.current?s(tG(r.current,v,a.current)):p(!1)},g=function(){return p(!1)};function p(v){var b=l.current,_=TP(r.current),y=v?_.addEventListener:_.removeEventListener;y(b?"touchmove":"mousemove",f),y(b?"touchend":"mouseup",g)}return[function(v){var b=v.nativeEvent,_=r.current;if(_&&(nG(b),!function(C,w){return w&&!uC(C)}(b,l.current)&&_)){if(uC(b)){l.current=!0;var y=b.changedTouches||[];y.length&&(a.current=y[0].identifier)}_.focus(),s(tG(_,b,a.current)),p(!0)}},function(v){var b=v.which||v.keyCode;b<37||b>40||(v.preventDefault(),o({left:b===39?.05:b===37?-.05:0,top:b===40?.05:b===38?-.05:0}))},p]},[o,s]),u=c[0],d=c[1],h=c[2];return m.useEffect(function(){return h},[h]),Ue.createElement("div",kD({},i,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:r,onKeyDown:d,tabIndex:0,role:"slider"}))}),ED=function(n){return n.filter(Boolean).join(" ")},JB=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,s=ED(["react-colorful__pointer",n.className]);return Ue.createElement("div",{className:s,style:{top:100*r+"%",left:100*t+"%"}},Ue.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},fs=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},YHe=function(n){return JHe(IP(n))},IP=function(n){return n[0]==="#"&&(n=n.substring(1)),n.length<6?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?fs(parseInt(n[3]+n[3],16)/255,2):1}:{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16),a:n.length===8?fs(parseInt(n.substring(6,8),16)/255,2):1}},ZHe=function(n){return QHe(XHe(n))},rue=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:fs(n.h),s:fs(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:fs(r/2),a:fs(i,2)}},DP=function(n){var e=rue(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},bR=function(n){var e=rue(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},XHe=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),c=s%6;return{r:fs(255*[i,a,o,o,l,i][c]),g:fs(255*[l,i,i,a,o,o][c]),b:fs(255*[o,o,l,i,i,a][c]),a:fs(r,2)}},Bx=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},QHe=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r<1?Bx(fs(255*r)):"";return"#"+Bx(e)+Bx(t)+Bx(i)+s},JHe=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:fs(60*(a<0?a+6:a)),s:fs(s?o/s*100:0),v:fs(s/255*100),a:r}},eVe=Ue.memo(function(n){var e=n.hue,t=n.onChange,i=ED(["react-colorful__hue",n.className]);return Ue.createElement("div",{className:i},Ue.createElement(QB,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:x1(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":fs(e),"aria-valuemax":"360","aria-valuemin":"0"},Ue.createElement(JB,{className:"react-colorful__hue-pointer",left:e/360,color:DP({h:e,s:100,v:100,a:1})})))}),tVe=Ue.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:DP({h:e.h,s:100,v:100,a:1})};return Ue.createElement("div",{className:"react-colorful__saturation",style:i},Ue.createElement(QB,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:x1(e.s+100*r.left,0,100),v:x1(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+fs(e.s)+"%, Brightness "+fs(e.v)+"%"},Ue.createElement(JB,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:DP(e)})))}),sue=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0},nVe=function(n,e){return n.toLowerCase()===e.toLowerCase()||sue(IP(n),IP(e))};function iVe(n,e,t){var i=NP(t),r=m.useState(function(){return n.toHsva(e)}),s=r[0],o=r[1],a=m.useRef({color:e,hsva:s});m.useEffect(function(){if(!n.equal(e,a.current.color)){var c=n.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,n]),m.useEffect(function(){var c;sue(s,a.current.hsva)||n.equal(c=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},i(c))},[s,n,i]);var l=m.useCallback(function(c){o(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var rVe=typeof window<"u"?m.useLayoutEffect:m.useEffect,sVe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},iG=new Map,oVe=function(n){rVe(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!iG.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,iG.set(e,t);var i=sVe();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},aVe=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+bR(Object.assign({},t,{a:0}))+", "+bR(Object.assign({},t,{a:1}))+")"},s=ED(["react-colorful__alpha",e]),o=fs(100*t.a);return Ue.createElement("div",{className:s},Ue.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),Ue.createElement(QB,{onMove:function(a){i({a:a.left})},onKey:function(a){i({a:x1(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},Ue.createElement(JB,{className:"react-colorful__alpha-pointer",left:t.a,color:bR(t)})))},lVe=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,s=n.onChange,o=iue(n,["className","colorModel","color","onChange"]),a=m.useRef(null);oVe(a);var l=iVe(t,r,s),c=l[0],u=l[1],d=ED(["react-colorful",e]);return Ue.createElement("div",kD({},o,{ref:a,className:d}),Ue.createElement(tVe,{hsva:c,onChange:u}),Ue.createElement(eVe,{hue:c.h,onChange:u}),Ue.createElement(aVe,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},cVe={defaultColor:"0001",toHsva:YHe,fromHsva:ZHe,equal:nVe},uVe=function(n){return Ue.createElement(lVe,kD({},n,{colorModel:cVe}))},dVe={grad:.9,turn:360,rad:360/(2*Math.PI)},Ru=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ls=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},ol=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},oue=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},rG=function(n){return{r:ol(n.r,0,255),g:ol(n.g,0,255),b:ol(n.b,0,255),a:ol(n.a)}},_R=function(n){return{r:ls(n.r),g:ls(n.g),b:ls(n.b),a:ls(n.a,3)}},hVe=/^#([0-9a-f]{3,8})$/i,Hx=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},aue=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},lue=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),l=i*(1-(1-e+s)*t),c=s%6;return{r:255*[i,a,o,o,l,i][c],g:255*[l,i,i,a,o,o][c],b:255*[o,o,l,i,i,a][c],a:r}},sG=function(n){return{h:oue(n.h),s:ol(n.s,0,100),l:ol(n.l,0,100),a:ol(n.a)}},oG=function(n){return{h:ls(n.h),s:ls(n.s),l:ls(n.l),a:ls(n.a,3)}},aG=function(n){return lue((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},dC=function(n){return{h:(e=aue(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},fVe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gVe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pVe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mVe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,lG={string:[[function(n){var e=hVe.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?ls(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?ls(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=pVe.exec(n)||mVe.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:rG({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=fVe.exec(n)||gVe.exec(n);if(!e)return null;var t,i,r=sG({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(dVe[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return aG(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return Ru(e)&&Ru(t)&&Ru(i)?rG({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!Ru(e)||!Ru(t)||!Ru(i))return null;var o=sG({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return aG(o)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!Ru(e)||!Ru(t)||!Ru(i))return null;var o=function(a){return{h:oue(a.h),s:ol(a.s,0,100),v:ol(a.v,0,100),a:ol(a.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return lue(o)},"hsv"]]},cG=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},vVe=function(n){return typeof n=="string"?cG(n.trim(),lG.string):typeof n=="object"&&n!==null?cG(n,lG.object):[null,void 0]},CR=function(n,e){var t=dC(n);return{h:t.h,s:ol(t.s+100*e,0,100),l:t.l,a:t.a}},yR=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},uG=function(n,e){var t=dC(n);return{h:t.h,s:t.s,l:ol(t.l+100*e,0,100),a:t.a}},dG=function(){function n(e){this.parsed=vVe(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return ls(yR(this.rgba),2)},n.prototype.isDark=function(){return yR(this.rgba)<.5},n.prototype.isLight=function(){return yR(this.rgba)>=.5},n.prototype.toHex=function(){return e=_R(this.rgba),t=e.r,i=e.g,r=e.b,o=(s=e.a)<1?Hx(ls(255*s)):"","#"+Hx(t)+Hx(i)+Hx(r)+o;var e,t,i,r,s,o},n.prototype.toRgb=function(){return _R(this.rgba)},n.prototype.toRgbString=function(){return e=_R(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},n.prototype.toHsl=function(){return oG(dC(this.rgba))},n.prototype.toHslString=function(){return e=oG(dC(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},n.prototype.toHsv=function(){return e=aue(this.rgba),{h:ls(e.h),s:ls(e.s),v:ls(e.v),a:ls(e.a,3)};var e},n.prototype.invert=function(){return $o({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),$o(CR(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),$o(CR(this.rgba,-e))},n.prototype.grayscale=function(){return $o(CR(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),$o(uG(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),$o(uG(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?$o({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):ls(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=dC(this.rgba);return typeof e=="number"?$o({h:e,s:t.s,l:t.l,a:t.a}):ls(t.h)},n.prototype.isEqual=function(e){return this.toHex()===$o(e).toHex()},n}(),$o=function(n){return n instanceof dG?n:new dG(n)};function kL(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var bVe=typeof global=="object"&&global&&global.Object===Object&&global,_Ve=typeof self=="object"&&self&&self.Object===Object&&self,cue=bVe||_Ve||Function("return this")(),wR=function(){return cue.Date.now()},CVe=/\s/;function yVe(n){for(var e=n.length;e--&&CVe.test(n.charAt(e)););return e}var wVe=/^\s+/;function SVe(n){return n&&n.slice(0,yVe(n)+1).replace(wVe,"")}var EL=cue.Symbol,uue=Object.prototype,xVe=uue.hasOwnProperty,kVe=uue.toString,Gb=EL?EL.toStringTag:void 0;function EVe(n){var e=xVe.call(n,Gb),t=n[Gb];try{n[Gb]=void 0;var i=!0}catch{}var r=kVe.call(n);return i&&(e?n[Gb]=t:delete n[Gb]),r}var LVe=Object.prototype,NVe=LVe.toString;function TVe(n){return NVe.call(n)}var IVe="[object Null]",DVe="[object Undefined]",hG=EL?EL.toStringTag:void 0;function MVe(n){return n==null?n===void 0?DVe:IVe:hG&&hG in Object(n)?EVe(n):TVe(n)}function RVe(n){return n!=null&&typeof n=="object"}var AVe="[object Symbol]";function OVe(n){return typeof n=="symbol"||RVe(n)&&MVe(n)==AVe}var fG=NaN,PVe=/^[-+]0x[0-9a-f]+$/i,FVe=/^0b[01]+$/i,BVe=/^0o[0-7]+$/i,HVe=parseInt;function gG(n){if(typeof n=="number")return n;if(OVe(n))return fG;if(kL(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=kL(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=SVe(n);var t=FVe.test(n);return t||BVe.test(n)?HVe(n.slice(2),t?2:8):PVe.test(n)?fG:+n}var VVe="Expected a function",zVe=Math.max,WVe=Math.min;function eH(n,e,t){var i,r,s,o,a,l,c=0,u=!1,d=!1,h=!0;if(typeof n!="function")throw new TypeError(VVe);e=gG(e)||0,kL(t)&&(u=!!t.leading,d="maxWait"in t,s=d?zVe(gG(t.maxWait)||0,e):s,h="trailing"in t?!!t.trailing:h);function f(x){var k=i,E=r;return i=r=void 0,c=x,o=n.apply(E,k),o}function g(x){return c=x,a=setTimeout(b,e),u?f(x):o}function p(x){var k=x-l,E=x-c,L=e-k;return d?WVe(L,s-E):L}function v(x){var k=x-l,E=x-c;return l===void 0||k>=e||k<0||d&&E>=s}function b(){var x=wR();if(v(x))return _(x);a=setTimeout(b,p(x))}function _(x){return a=void 0,h&&i?f(x):(i=r=void 0,o)}function y(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function C(){return a===void 0?o:_(wR())}function w(){var x=wR(),k=v(x);if(i=arguments,r=this,l=x,k){if(a===void 0)return g(l);if(d)return clearTimeout(a),a=setTimeout(b,e),f(l)}return a===void 0&&(a=setTimeout(b,e)),o}return w.cancel=y,w.flush=C,w}const $Ve=n=>{const e={r:0,g:0,b:0,a:1};if(!n)return e;const t=$o(n);return t.isValid()?t.toRgb():e},UVe=(n,e,t)=>n>=0&&n<=255&&e>=0&&e<=255&&t>=0&&t<=255,jVe=(n,e,t)=>{const i=(n==null?void 0:n.substring(1))||"",[r,s]=m.useState(i),[o,a]=m.useState($Ve(n)),l=m.useCallback(f=>{const g=$o(f).toRgb();a(g),s(f.substring(1)),e==null||e(f)},[e]),c=m.useMemo(()=>eH(f=>l(f),250),[l]),u=m.useCallback(f=>{const g=f.target.value;s(g);const p=`#${g}`;$o(p).isValid()&&(a($o(p).toRgb()),e==null||e(p))},[e]),d=m.useCallback((f,g)=>{const p=Number(f.target.value),v={...o,[g]:p};if(a(v),UVe(v.r,v.g,v.b)){const b=$o(v).toHex();s(b.substring(1)),e==null||e(b)}},[o,e]),h=m.useCallback(()=>{s(""),a({r:0,g:0,b:0,a:1}),t==null||t()},[t]);return{hex:r,rgba:o,onColorChange:l,onColorChangeDebounce:c,onHexChange:u,onRgbaChange:d,onResetColor:h}},KVe=({color:n,isSelected:e,onClick:t})=>P.jsx("div",{className:Ee(`${qe}-color-picker__item`,{[`${qe}-color-picker--selected`]:e}),style:{backgroundColor:n},onClick:t,children:e&&P.jsx(xD,{})}),tH=({value:n,colorPreset:e=[],onChange:t,onReset:i})=>{const r=jt(),{hex:s,rgba:o,onColorChangeDebounce:a,onHexChange:l,onRgbaChange:c,onColorChange:u,onResetColor:d}=jVe(n,t,i);return P.jsxs("div",{className:`${qe}-color-picker`,children:[P.jsx(uVe,{color:n,onChange:a}),P.jsxs(d1,{size:6,className:`${qe}-color-picker__input`,children:[P.jsx(Qo,{prefix:"#",className:"hex",maxLength:8,value:s,onChange:l}),P.jsx(Qo,{prefix:"R",maxLength:3,value:o.r,onChange:h=>c(h,"r")}),P.jsx(Qo,{prefix:"G",maxLength:3,value:o.g,onChange:h=>c(h,"g")}),P.jsx(Qo,{prefix:"B",maxLength:3,value:o.b,onChange:h=>c(h,"b")})]}),P.jsxs("div",{className:`${qe}-color-picker__preset`,children:[e.map(h=>P.jsx(KVe,{color:h,isSelected:h===n,onClick:()=>u(h)},h)),P.jsx(Vf,{placement:"top",title:r.reset,destroyTooltipOnHide:!0,children:P.jsx("div",{className:`${qe}-color-picker__item none`,onClick:d})})]})]})},qVe=n=>{const e=ln(),t=jt(),[i,r]=m.useState(dp),s=!(e!=null&&e.isEditable)||!(e!=null&&e.can().setColor(dp)),o=e!=null&&e.isActive("textStyle")?e.getAttributes("textStyle").color:void 0,a=c=>{r(c),e==null||e.chain().setColor(c).run()},l=()=>{r(dp),e==null||e.chain().unsetColor().run()};return m.useEffect(()=>{o&&r(o)},[o]),{color:i,isDisabled:s,colorPreset:n,changeColor:a,resetColor:l,tooltip:t.color}},due=({colorPreset:n=n5e})=>{const{color:e,isDisabled:t,changeColor:i,resetColor:r,tooltip:s}=qVe(n);return P.jsx(fm,{tooltip:s,icon:P.jsx(X9e,{style:{color:e}}),disabled:t,children:P.jsx(tH,{value:e,colorPreset:n,onChange:i,onReset:r})})},GVe=n=>{const e=ln(),t=jt(),[i,r]=m.useState(dp),s=!(e!=null&&e.isEditable)||!(e!=null&&e.can().toggleHighlight()),o=e!=null&&e.isActive("highlight")?e.getAttributes("highlight").color:void 0,a=c=>{r(c),e==null||e.chain().setHighlight({color:c}).run()},l=()=>{r(dp),e==null||e.chain().unsetHighlight().run()};return m.useEffect(()=>{o&&r(o)},[o]),{color:i,isDisabled:s,colorPreset:n,changeHighlightColor:a,removeHighlight:l,tooltip:t.highlightColor}},hue=({colorPreset:n=mle})=>{const{color:e,isDisabled:t,changeHighlightColor:i,removeHighlight:r,tooltip:s}=GVe(n);return P.jsx(fm,{tooltip:s,icon:P.jsx(Sce,{style:{color:e}}),disabled:t,children:P.jsx(tH,{value:e,colorPreset:n,onChange:i,onReset:r})})},YVe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"code_svg__a"},m.createElement("rect",{width:14,height:14,x:18,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#code_svg__a)",transform:"matrix(-1 0 0 1 36 0)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m25.592 5.066-2.041 11.666-.101.575 1.15.2 2.141-12.24.1-.575-1.148-.201zm-6.83 6.771 3.92 3.78.81-.84-3.5-3.374 3.5-3.626-.84-.81-.405.42-3.5 3.625a.583.583 0 0 0 .015.825m8.166 2.534 3.08-2.968-3.095-3.207-.405-.42.84-.81 3.905 4.046a.583.583 0 0 1-.015.825l-3.92 3.78-.81-.84z"}))),fue=m.memo(YVe),ZVe=()=>{const n=ln(),e=jt(),t=(n==null?void 0:n.isActive("code"))??!1,i=!(n!=null&&n.isEditable)||!(n!=null&&n.can().toggleCode());return{isActive:t,isDisabled:i,toggleCode:()=>{n==null||n.chain().focus().toggleCode().run()},tooltip:e.code}},XVe=()=>{const{isActive:n,isDisabled:e,toggleCode:t,tooltip:i}=ZVe();return P.jsx(dn,{tooltip:i,icon:P.jsx(fue,{}),selected:n,disabled:e,onClick:t})},QVe=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"code-block_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#code-block_svg__a)"},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.5 15.084v-.002h.585v1.17H7.5v-.002h-.058q-.82 0-1.398-.566-.585-.573-.585-1.396V12.19q0-.248-.177-.43-.172-.176-.407-.176h-.058v.001h-.585v-1.17h.585v.002h.058q.242 0 .413-.17.17-.172.17-.413v-2.1q0-.822.581-1.403.581-.58 1.403-.58H7.5v-.002h.585v1.17H7.5v-.002h-.058q-.338 0-.578.24-.239.238-.239.577v2.1q0 .68-.45 1.173.45.502.45 1.183v2.098q0 .333.235.563.238.233.582.233zm7 1.166v.002h-.585v-1.17h.585v.002h.058q.338 0 .578-.24.239-.239.239-.577v-2.1q0-.676.445-1.167-.445-.49-.445-1.166v-2.1q0-.339-.24-.578-.239-.239-.577-.239H14.5v.002h-.585v-1.17h.585v.001h.058q.822 0 1.402.581.581.581.581 1.403v2.1q0 .583.584.583h.058v-.002h.585v1.17h-.585v-.001h-.058q-.584 0-.584.583v2.1q0 .822-.58 1.402-.581.581-1.403.581z"}))),gue=m.memo(QVe),JVe=()=>{const n=ln(),e=jt();return{isDisabled:!(n!=null&&n.isEditable)||!(n!=null&&n.can().setCodeBlock()),setCodeBlock:()=>{n==null||n.chain().focus().setCodeBlock().run()},tooltip:e.codeBlock}},eze=()=>{const{isDisabled:n,setCodeBlock:e,tooltip:t}=JVe();return P.jsx(dn,{tooltip:t,icon:P.jsx(gue,{}),disabled:n,onClick:e})},pG=za.Item,tze=()=>{const n=ln(),e=jt(),t=(n==null?void 0:n.isActive("bulletList"))??!1,i=(n==null?void 0:n.isActive("orderedList"))??!1,r=!(n!=null&&n.isEditable)||!(n!=null&&n.can().toggleOrderedList())&&!(n!=null&&n.can().toggleBulletList());return{isBulletList:t,isOrderedList:i,isDisabled:r,toggleOrderedList:()=>{n==null||n.chain().focus().toggleOrderedList().run()},toggleBulletList:()=>{n==null||n.chain().focus().toggleBulletList().run()},tooltip:e.list,orderedListText:e.orderedList,bulletListText:e.bulletList}},nze=()=>{const{isBulletList:n,isOrderedList:e,isDisabled:t,toggleOrderedList:i,toggleBulletList:r,tooltip:s,orderedListText:o,bulletListText:a}=tze();return P.jsxs(za,{tooltip:s,activeIcon:n?P.jsx(LP,{}):P.jsx(EP,{}),disabled:t,children:[P.jsx(pG,{icon:P.jsx(EP,{}),selected:e,onClick:i,children:o}),P.jsx(pG,{icon:P.jsx(LP,{}),selected:n,onClick:r,children:a})]})},ize=za.Item,rze=n=>{const e=ln(),t=jt(),i=n.find(o=>e==null?void 0:e.isActive({lineHeight:o}))??"",r=!(e!=null&&e.isEditable)||!n.some(o=>e==null?void 0:e.can().setLineHeight(o));return{currentActive:i,isDisabled:r,setLineHeight:o=>{i===o?e==null||e.chain().focus().unsetLineHeight().run():e==null||e.chain().focus().setLineHeight(o).run()},tooltip:t.lineHeight}},pue=({lineHeights:n=[1,1.15,1.3,1.5,2,3]})=>{const{currentActive:e,isDisabled:t,setLineHeight:i,tooltip:r}=rze(n);return P.jsx(za,{tooltip:r,activeIcon:P.jsx(IFe,{}),disabled:t,dropdownWidth:78,children:n.map(s=>P.jsx(ize,{selected:e===s,onClick:()=>i(s),children:s},s))})},sze=za.Item,oze=n=>{const e=ln(),t=jt(),i=m.useMemo(()=>({left:{label:t.alignLeft,align:"left",icon:P.jsx(xL,{})},center:{label:t.alignCenter,align:"center",icon:P.jsx(jB,{})},right:{label:t.alignRight,align:"right",icon:P.jsx(KB,{})},justify:{label:t.alignJustify,align:"justify",icon:P.jsx(Rce,{})}}),[t]),r=m.useMemo(()=>n.map(l=>i[l]),[n,i]),s=n.find(l=>e==null?void 0:e.isActive({textAlign:l}))??"",o=!(e!=null&&e.isEditable)||!n.some(l=>e==null?void 0:e.can().setTextAlign(l));return{alignItems:r,currentActive:s,isDisabled:o,setTextAlign:l=>{e==null||e.chain().focus().setTextAlign(l).run()},alignMapping:i,tooltip:t.align}},aze=({alignments:n=["center","left","right","justify"]})=>{const{alignItems:e,currentActive:t,isDisabled:i,setTextAlign:r,alignMapping:s,tooltip:o}=oze(n);return P.jsx(za,{tooltip:o,activeIcon:s[t||"left"].icon,disabled:i,children:e.map(({label:a,align:l,icon:c})=>P.jsx(sze,{icon:c,selected:t===l,onClick:()=>r(l),children:a},l))})},lze=()=>{const n=ln(),e=jt();return{isDisabled:!(n!=null&&n.isEditable)||!(n!=null&&n.can().setIndent()),setIndent:()=>{n==null||n.chain().focus().setIndent().run()},tooltip:e.indent}},cze=()=>{const{isDisabled:n,setIndent:e,tooltip:t}=lze();return P.jsx(dn,{tooltip:t,icon:P.jsx(kP,{}),disabled:n,onClick:e})},uze=()=>{const n=ln(),e=jt();return{isDisabled:!(n!=null&&n.isEditable)||!(n!=null&&n.can().setOutdent()),setOutdent:()=>{n==null||n.chain().focus().setOutdent().run()},tooltip:e.outdent}},dze=()=>{const{isDisabled:n,setOutdent:e,tooltip:t}=uze();return P.jsx(dn,{tooltip:t,icon:P.jsx(Mce,{}),disabled:n,onClick:e})},hze=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,...n},m.createElement("g",{fill:"currentColor",fillRule:"evenodd"},m.createElement("path",{d:"M.167.75v10.5c0 .322.26.583.583.583h3.792c.322 0 .583-.26.583-.583V.75a.583.583 0 0 0-.583-.583H.75A.583.583 0 0 0 .167.75m1.166 9.917V1.333h2.625v9.334zM6.875.74v10.5c0 .323.261.584.583.584h3.792c.322 0 .583-.261.583-.583V.74a.583.583 0 0 0-.583-.584H7.458a.583.583 0 0 0-.583.584m1.167 9.917V1.324h2.625v9.333z"}))),fze=m.memo(hze),gze=n=>{const[e,t]=m.useState(1),i=Array.from({length:5},(o,a)=>a+1),r=m.useCallback(o=>{t(o)},[]),s=m.useCallback(o=>{o>1&&n(o)},[n]);return{activeColumn:e,columns:i,handleMouseOver:r,handleColumnClick:s}},mue=({onClick:n})=>{const{activeColumn:e,columns:t,handleMouseOver:i,handleColumnClick:r}=gze(n);return P.jsx("div",{className:`${qe}__menu-columns`,children:t.map(s=>P.jsx("div",{className:Ee(`${qe}__menu-column`,{active:s<=e,disabled:s===1}),onMouseOver:()=>i(s),onClick:()=>r(s)},s))})},pze=()=>{const[n,e]=m.useState(!1),t=ln(),i=jt(),r=!(t!=null&&t.isEditable)||!(t!=null&&t.can().setColumns({column:1}));return{visible:n,isDisabled:r,setVisible:e,openPopover:()=>{e(!0)},insertColumns:a=>{t==null||t.chain().setColumns({column:a}).focus(t.state.selection.head-1).run(),e(!1)},tooltip:i.columns}},mze=()=>{const{visible:n,isDisabled:e,setVisible:t,openPopover:i,insertColumns:r,tooltip:s}=pze();return P.jsx(fm,{visible:n,tooltip:s,icon:P.jsx(fze,{}),disabled:e,onClick:i,onVisibleChange:t,children:P.jsx(mue,{onClick:r})})},vze=()=>{const n=ln(),e=jt(),t=(n==null?void 0:n.isActive("taskList"))??!1,i=!(n!=null&&n.isEditable)||!(n!=null&&n.can().toggleTaskList());return{isActive:t,isDisabled:i,toggleTaskList:()=>{n==null||n.chain().focus().toggleTaskList().run()},tooltip:e.taskList}},bze=()=>{const{isActive:n,isDisabled:e,toggleTaskList:t,tooltip:i}=vze();return P.jsx(dn,{tooltip:i,icon:P.jsx(xce,{}),selected:n,disabled:e,onClick:t})},_ze=()=>{const n=ln(),e=jt();return{isDisabled:!(n!=null&&n.isEditable)||!(n!=null&&n.can().setHorizontalRule()),insertHorizontalLine:()=>{n==null||n.chain().focus().setHorizontalRule().run()},tooltip:e.horizontalLine}},Cze=()=>{const{isDisabled:n,insertHorizontalLine:e,tooltip:t}=_ze();return P.jsx(dn,{tooltip:t,icon:P.jsx(Dce,{}),disabled:n,onClick:e})},yze=()=>{const[n,e]=m.useState([0,0]),t=m.useMemo(()=>Array.from({length:10},()=>Array.from({length:10},()=>1)),[]),i=m.useCallback((r,s)=>{e([r,s])},[]);return{tableCell:n,tables:t,handleMouseOver:i}};function vue({onClick:n}){const{tableCell:e,tables:t,handleMouseOver:i}=yze();return P.jsxs("div",{children:[P.jsx("div",{className:`${qe}__menu-table`,children:t.map((r,s)=>P.jsx("div",{className:`${qe}__menu-table-row`,children:r.map((o,a)=>P.jsx("div",{className:Ee({[`${qe}__menu-table-cell`]:!0,active:s<=e[0]&&a<=e[1]}),onMouseOver:()=>i(s,a),onClick:()=>n(s+1,a+1)},`${s}-${a}`))},s))}),P.jsxs("div",{className:`${qe}__menu-table-tips`,children:[e[0]+1," x ",e[1]+1]})]})}const wze=()=>{const[n,e]=m.useState(!1),t=ln(),i=jt(),r=!(t!=null&&t.isEditable);return{visible:n,isDisabled:r,setVisible:e,showPopover:()=>{e(!0)},insertTable:(a,l)=>{e(!1),t==null||t.chain().focus().insertTable({rows:a+1,cols:l+1,withHeaderRow:!1}).run()},tooltip:i.table}},Sze=()=>{const{visible:n,isDisabled:e,setVisible:t,showPopover:i,insertTable:r,tooltip:s}=wze();return P.jsx(fm,{visible:n,tooltip:s,icon:P.jsx(Oce,{}),disabled:e,onClick:i,onVisibleChange:t,children:P.jsx(vue,{onClick:(o,a)=>r(o,a)})})};var ks=[];for(var SR=0;SR<256;++SR)ks.push((SR+256).toString(16).slice(1));function xze(n,e=0){return(ks[n[e+0]]+ks[n[e+1]]+ks[n[e+2]]+ks[n[e+3]]+"-"+ks[n[e+4]]+ks[n[e+5]]+"-"+ks[n[e+6]]+ks[n[e+7]]+"-"+ks[n[e+8]]+ks[n[e+9]]+"-"+ks[n[e+10]]+ks[n[e+11]]+ks[n[e+12]]+ks[n[e+13]]+ks[n[e+14]]+ks[n[e+15]]).toLowerCase()}var Vx,kze=new Uint8Array(16);function Eze(){if(!Vx&&(Vx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Vx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Vx(kze)}var Lze=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const mG={randomUUID:Lze};function nH(n,e,t){if(mG.randomUUID&&!e&&!n)return mG.randomUUID();n=n||{};var i=n.random||(n.rng||Eze)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,xze(i)}const Nze=n=>{const{uploadAction:e,maxSize:t,beforeUpload:i,onUploadFile:r,onChange:s}=n,o=ln(),a=jt();return{handleInsertImages:m.useCallback(async c=>{if(!o||o.isDestroyed||c.length===0)return;const u=Array.from(c);if(typeof i=="function"&&!await i(u))return;if(t&&u.some(h=>h.size>t)){bl.warning(a.imageLimit.replace("{limit}",rS(t)));return}const d=u.map(h=>{const f=nH();return{fileUid:f,src:URL.createObjectURL(h),alt:h.name,rowFile:h,uploadAction:e,uploadFileHandler:r?g=>r({file:h,fileUid:f,...g}):void 0}}).filter(({src:h})=>!!h).map(h=>({type:o.schema.nodes.image.name,attrs:h}));s==null||s(d)},[o,i,t,a,e,r,s])}},bue=m.forwardRef((n,e)=>{const t=m.useRef(null),{handleInsertImages:i}=Nze(n);return m.useImperativeHandle(e,()=>({click:()=>{var r;return(r=t.current)==null?void 0:r.click()}})),P.jsx("input",{ref:t,type:"file",accept:"image/*",multiple:!0,onChange:async r=>{r.target.files&&i(r.target.files),r.target.value=""},style:{display:"none"}})}),Tze=n=>{const e=ln(),t=jt(),i=m.useRef(null),r=!(e!=null&&e.isEditable);return{fileInput:i,isDisabled:r,openFileDialog:()=>{var a;(a=i.current)==null||a.click()},insertImages:async a=>{e==null||e.chain().focus().command(({commands:l})=>l.insertContent(a)).command(({commands:l})=>l.createParagraphNear()).run()},tooltip:t.image,imageProps:n}},Ize=n=>{const{fileInput:e,isDisabled:t,openFileDialog:i,insertImages:r,tooltip:s,imageProps:o}=Tze(n);return P.jsxs(P.Fragment,{children:[P.jsx(dn,{tooltip:s,icon:P.jsx(Ace,{}),disabled:t,onClick:i}),P.jsx(bue,{...o,ref:e,onChange:r})]})},Dze=n=>{const{uploadAction:e,maxSize:t,beforeUpload:i,onUploadFile:r,onChange:s}=n,o=ln(),a=jt();return{handleInsertVideos:m.useCallback(async c=>{if(!o||o.isDestroyed||c.length===0)return;const u=Array.from(c);if(typeof i=="function"&&!await i(u))return;if(t&&u.some(h=>h.size>t)){bl.warning(a.videoLimit.replace("{limit}",rS(t)));return}const d=u.map(h=>{const f=nH();return{fileUid:f,rowFile:h,uploadAction:e,uploadFileHandler:r?g=>r({file:h,fileUid:f,...g}):void 0}}).map(h=>({type:o.schema.nodes.video.name,attrs:h}));s==null||s(d)},[o,i,t,a,e,r,s])}},_ue=m.forwardRef((n,e)=>{const t=m.useRef(null),{handleInsertVideos:i}=Dze(n);return m.useImperativeHandle(e,()=>({click:()=>{var r;return(r=t.current)==null?void 0:r.click()}})),P.jsx("input",{ref:t,type:"file",accept:"video/mp4,video/webm",multiple:!0,onChange:async r=>{r.target.files&&i(r.target.files),r.target.value=""},style:{display:"none"}})}),Mze=n=>{const e=ln(),t=jt(),i=m.useRef(null),r=!(e!=null&&e.isEditable);return{fileInput:i,isDisabled:r,openFileDialog:()=>{var a;(a=i.current)==null||a.click()},insertVideos:async a=>{e==null||e.chain().focus().command(({commands:l})=>l.insertContent(a)).command(({commands:l})=>l.createParagraphNear()).run()},tooltip:t.video,videoProps:n}},Rze=n=>{const{fileInput:e,isDisabled:t,openFileDialog:i,insertVideos:r,tooltip:s,videoProps:o}=Mze(n);return P.jsxs(P.Fragment,{children:[P.jsx(dn,{tooltip:s,icon:P.jsx(CBe,{}),disabled:t,onClick:i}),P.jsx(_ue,{...o,ref:e,onChange:r})]})},Aze=()=>{const[n,e]=m.useState(!1),t=ln(),i=jt(),r=(t==null?void 0:t.isActive("link"))??!1,s=lce(t),o=!(t!=null&&t.isEditable)||!(t!=null&&t.can().setLink({href:"/"}));return{visible:n,isLinkActive:r,isDisabled:o,linkText:s,toggleLink:()=>{r?t==null||t.chain().extendMarkRange("link").unsetLink().setTextSelection(t.state.selection.to).focus().run():e(!0)},handleVisibleChange:u=>{e(r?!1:u)},hidePopover:()=>{e(!1)},tooltip:r?i.unLink:i.link,insertTitle:i.insertLink}},Cue=()=>{const{visible:n,isLinkActive:e,isDisabled:t,linkText:i,toggleLink:r,handleVisibleChange:s,hidePopover:o,tooltip:a,insertTitle:l}=Aze();return P.jsx(fm,{visible:n,tooltip:a,placement:"bottom",icon:P.jsx(OFe,{}),selected:e,disabled:t,onClick:r,onVisibleChange:s,children:P.jsx(Wce,{linkText:i,title:l,target:"_blank",onCancel:o,onOk:o})})},Oze=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,...n},m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m4.763 9.008 4.33-4.33.413-.413-.825-.825-4.743 4.743a.28.28 0 0 1-.206.086.28.28 0 0 1-.207-.086q-.206-.206 0-.412l5.156-5.156q.342-.342.825-.342t.825.342.342.825-.342.825L5.175 9.42q-.598.598-1.443.598T2.288 9.42a1.97 1.97 0 0 1-.598-1.444q0-.846.598-1.444l4.33-4.33.413-.413-.825-.825-.412.412-4.331 4.331a3.1 3.1 0 0 0-.94 2.269q0 1.329.94 2.269t2.269.94T6 10.245l5.156-5.156a2.25 2.25 0 0 0 .684-1.65q0-.968-.684-1.65a2.25 2.25 0 0 0-1.65-.684q-.966 0-1.65.684L2.7 6.946a1.4 1.4 0 0 0-.427 1.031q0 .604.427 1.031t1.032.427q.603 0 1.03-.427"})),MP=m.memo(Oze),Pze=n=>{const{uploadAction:e,maxSize:t,beforeUpload:i,onUploadFile:r,onDownloadFile:s,onChange:o}=n,a=ln(),l=jt();return{handleInsertFiles:m.useCallback(async u=>{if(!a||a.isDestroyed||u.length===0)return;const d=Array.from(u);if(typeof i=="function"&&!await i(d))return;if(t&&d.some(f=>f.size>t)){bl.warning(l.fileLimit.replace("{limit}",rS(t)));return}const h=d.map(f=>{const g=nH();return{fileUid:g,src:"",type:"",size:f.size,name:f.name,rowFile:f,uploadAction:e,downloadFileHandler:s,uploadFileHandler:r?p=>r({file:f,fileUid:g,...p}):void 0}}).filter(({size:f})=>f>0).map(f=>({type:a.schema.nodes.file.name,attrs:f}));o==null||o(h)},[a,i,t,l,e,s,r,o])}},yue=m.forwardRef((n,e)=>{const t=m.useRef(null),{handleInsertFiles:i}=Pze(n);return m.useImperativeHandle(e,()=>({click:()=>{var r;return(r=t.current)==null?void 0:r.click()}})),P.jsx("input",{ref:t,type:"file",multiple:!0,onChange:async r=>{r.target.files&&i(r.target.files),r.target.value=""},style:{display:"none"}})}),Fze=n=>{const e=ln(),t=jt(),i=m.useRef(null),r=!(e!=null&&e.isEditable);return{fileInput:i,isDisabled:r,openFileDialog:()=>{var a;(a=i.current)==null||a.click()},insertFiles:async a=>{e==null||e.chain().focus().command(({commands:l})=>l.insertContent(a)).command(({commands:l})=>l.createParagraphNear()).run()},tooltip:t.file,fileProps:n}},Bze=n=>{const{fileInput:e,isDisabled:t,openFileDialog:i,insertFiles:r,tooltip:s,fileProps:o}=Fze(n);return P.jsxs(P.Fragment,{children:[P.jsx(dn,{tooltip:s,icon:P.jsx(MP,{}),disabled:t,onClick:i}),P.jsx(yue,{...o,ref:e,onChange:r})]})},Hze=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"highlight-block_svg__a"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}))),m.createElement("g",{clipPath:"url(#highlight-block_svg__a)"},m.createElement("rect",{width:14,height:14,x:4,y:4,rx:0}),m.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.167 5.75v4.666h8.75V5.75zm1.166 3.5h6.417V6.916H6.333zm-.583 2.916v-.001h-.585v1.17h.585v-.002h10.5v.002h.585v-1.17h-.585v.001zm0 2.917v-.002h-.585v1.17h.585v-.001h10.5v.001h.585v-1.17h-.585v.002z"}))),wue=m.memo(Hze),Vze=()=>{const n=ln(),e=jt();return{isDisabled:!(n!=null&&n.isEditable),toggleHighlightBlock:()=>{n==null||n.chain().focus().toggleHighlightBlock().run()},tooltip:e.highlightBlock}},zze=()=>{const{isDisabled:n,toggleHighlightBlock:e,tooltip:t}=Vze();return P.jsx(dn,{tooltip:t,icon:P.jsx(wue,{}),disabled:n,onClick:e})},Wze=n=>{const[e,t]=m.useState(!1),[i,r]=m.useState(!1),s=ln(),o=jt(),a=()=>{t(!e),r(!1)},l=()=>r(!0),c=()=>r(!1);return m.useEffect(()=>{const u=h=>{h.key.toLowerCase()==="escape"&&t(!1)},d=s==null?void 0:s.options.element.parentElement;return d?(e?(d.classList.add("fullscreen"),document.addEventListener("keydown",u,!1)):d.classList.remove("fullscreen"),n==null||n(e),()=>{document.removeEventListener("keydown",u,!1)}):()=>{}},[e,s,n]),{fullscreen:e,tooltipVisible:i,toggleFullscreen:a,showTooltip:l,hideTooltip:c,tooltipTitle:e?o.cancelFullscreen:o.fullscreen}},$ze=({onFullscreenChange:n})=>{const{fullscreen:e,tooltipVisible:t,toggleFullscreen:i,showTooltip:r,hideTooltip:s,tooltipTitle:o}=Wze(n);return P.jsx(Vf,{title:o,open:t,children:P.jsx(bi,{icon:e?P.jsx(nFe,{}):P.jsx(sFe,{}),size:"small",type:"text",onClick:i,onMouseEnter:r,onMouseLeave:s})})},Uze=()=>{const[n,e]=m.useState(!1),t=ln(),i=jt(),r=!(t!=null&&t.isEditable),s=l=>{e(l)},o=()=>{e(!1)};return{visible:n,isDisabled:r,toggleVisible:s,hidePopover:o,insertIframe:l=>{t==null||t.chain().focus().command(({commands:c})=>c.setIframe({src:l,width:500})).command(({commands:c})=>c.createParagraphNear()).run(),o()},tooltip:i.iframe,insertTitle:i.insertIframe}},jze=()=>{const{visible:n,isDisabled:e,toggleVisible:t,hidePopover:i,insertIframe:r,tooltip:s,insertTitle:o}=Uze();return P.jsx(fm,{visible:n,tooltip:s,placement:"bottom",icon:P.jsx(Ice,{}),disabled:e,onVisibleChange:t,children:P.jsx(XB,{title:o,onCancel:i,onOk:r})})},rh=10;function Kze(n){const[e,t]=m.useState(!1),[i,r]=m.useState(void 0),s=m.useRef(!1),o=m.useRef(0),a=m.useRef(0),l=h=>{n.current&&(s.current=!0,o.current=h.clientX-n.current.offsetLeft,a.current=h.clientY-n.current.offsetTop,t(!0))},c=h=>{if(!s.current||!n.current)return;let f=h.clientX-o.current,g=h.clientY-a.current;const{offsetHeight:p,offsetWidth:v}=n.current;f<rh?f=rh:f>window.innerWidth-v-rh&&(f=window.innerWidth-v-rh),g<rh?g=rh:g>window.innerHeight-p-rh&&(g=window.innerHeight-p-rh),r({left:f,top:g})},u=()=>{s.current=!1,t(!1)},d=()=>{r(void 0),o.current=0,a.current=0};return m.useEffect(()=>s.current?(window.addEventListener("mousemove",c),()=>{window.removeEventListener("mousemove",c)}):()=>{},[s.current]),{dragging:e,position:i,resetPosition:d,onMouseDown:l,onMouseUp:u}}const qze=()=>{const[n,e]=m.useState("search"),[t,i]=m.useState(""),[r,s]=m.useState(""),[o,a]=m.useState(!1),l=m.useRef(null),c=ln(),u=jt(),{dragging:d,position:h,resetPosition:f,onMouseDown:g,onMouseUp:p}=Kze(l),v=(c==null?void 0:c.storage.searchAndReplace.resultIndex)??0,b=(c==null?void 0:c.storage.searchAndReplace.results.length)??0,_=!(c!=null&&c.isEditable),y=()=>{if(!c)return;const{results:F,resultIndex:T}=c.storage.searchAndReplace,N=F[T];if(!N)return;c.commands.setTextSelection(N);const{node:B}=c.view.domAtPos(c.state.selection.anchor);B instanceof HTMLElement&&B.scrollIntoView({behavior:"smooth",block:"center"})},C=()=>{c==null||c.commands.replace(),y()},w=()=>{c==null||c.commands.nextSearchResult(),y()},x=()=>{c==null||c.commands.previousSearchResult(),y()},k=()=>{i(""),s(""),c==null||c.commands.resetIndex(),c==null||c.commands.setSearchTerm(""),c==null||c.commands.setReplaceTerm("")},E=()=>c==null?void 0:c.commands.replaceAll(),L=()=>{if(!c)return;const{selection:F,doc:T}=c.state,N=T.textBetween(F.from,F.to);i(N),c.commands.setSearchTerm(N),c.commands.resetIndex()},M=()=>{a(!0),L()},D=()=>{a(!1),k()},O=F=>{i(F),c==null||c.commands.setSearchTerm(F),c==null||c.commands.resetIndex()},A=F=>{s(F),c==null||c.commands.setReplaceTerm(F)},R=F=>{(F.metaKey||F.ctrlKey)&&F.key==="f"&&(c!=null&&c.isFocused)&&(F.stopPropagation(),F.preventDefault(),M())},V=F=>{F.key.toLowerCase()==="escape"&&D()};return m.useEffect(()=>o?(window.addEventListener("keydown",V),()=>{window.removeEventListener("keydown",V)}):(f(),()=>{}),[o]),m.useEffect(()=>c?(c.view.dom.addEventListener("keydown",R),()=>{c.view.dom.removeEventListener("keydown",R)}):()=>{},[c]),{tab:n,setTab:e,searchInput:t,replaceInput:r,showPanel:o,containerRef:l,dragging:d,position:h,currentIndex:v,total:b,isDisabled:_,next:w,previous:x,replace:C,replaceAll:E,showSearchPanel:M,hideSearchPanel:D,updateSearchTerm:O,updateReplaceTerm:A,locale:u,tabList:[{key:"search",tab:u.search},{key:"replace",tab:u.replace}],onMouseDown:g,onMouseUp:p}},Gze=({tab:n,searchInput:e,replaceInput:t,currentIndex:i,total:r,updateSearchTerm:s,updateReplaceTerm:o,next:a,previous:l,replace:c,replaceAll:u,locale:d})=>n==="search"?P.jsxs(P.Fragment,{children:[P.jsx(Qo,{autoFocus:!0,placeholder:d.searchPlaceholder,value:e,suffix:`${r?i+1:0} / ${r}`,onPressEnter:a,onChange:h=>s(h.target.value)}),P.jsxs(d1,{className:`${qe}__search-btn`,children:[P.jsx(bi,{onClick:l,disabled:!e,children:d.searchPrevious}),P.jsx(bi,{onClick:a,disabled:!e,children:d.searchNext})]})]}):P.jsxs(P.Fragment,{children:[P.jsx("div",{className:`${qe}__search-label`,children:d.search}),P.jsx(Qo,{placeholder:d.searchPlaceholder,style:{marginBottom:16},value:e,suffix:`${r?i+1:0} / ${r}`,onPressEnter:a,onChange:h=>s(h.target.value)}),P.jsx("div",{className:`${qe}__search-label`,children:d.replaceAs}),P.jsx(Qo,{placeholder:d.replacePlaceholder,value:t,onPressEnter:c,onChange:h=>o(h.target.value)}),P.jsxs(d1,{size:4,className:`${qe}__search-btn`,children:[P.jsx(bi,{onClick:l,disabled:!e,children:d.searchPrevious}),P.jsx(bi,{onClick:a,disabled:!e,children:d.searchNext}),P.jsx(bi,{onClick:c,disabled:!(e&&t),children:d.replace}),P.jsx(bi,{type:"primary",onClick:u,disabled:!(e&&t),children:d.replaceAll})]})]}),Yze=({showMenuIcons:n=!0})=>{const{tab:e,setTab:t,searchInput:i,replaceInput:r,showPanel:s,containerRef:o,dragging:a,position:l,currentIndex:c,total:u,isDisabled:d,next:h,previous:f,replace:g,replaceAll:p,showSearchPanel:v,hideSearchPanel:b,updateSearchTerm:_,updateReplaceTerm:y,locale:C,tabList:w,onMouseDown:x,onMouseUp:k}=qze(),E=ln();return P.jsxs(P.Fragment,{children:[n&&P.jsx(dn,{tooltip:C.searchAndReplace,icon:P.jsx(rBe,{}),disabled:d,onClick:v}),s&&uc.createPortal(P.jsx("div",{className:`${qe}__search-wrapper`,style:{height:a?"100%":0},children:P.jsx("div",{className:`${qe}__search`,ref:o,style:l,children:P.jsxs($F,{tabList:w,activeTabKey:e,onTabChange:L=>t(L),children:[P.jsx(Gze,{tab:e,searchInput:i,replaceInput:r,currentIndex:c,total:u,updateSearchTerm:_,updateReplaceTerm:y,next:h,previous:f,replace:g,replaceAll:p,locale:C}),P.jsx(bi,{className:`${qe}__search-close`,type:"text",size:"small",icon:P.jsx(A9e,{}),onClick:b}),P.jsx("div",{className:`${qe}__search-move`,onMouseDown:x,onMouseUp:k})]})})}),E.view.dom.parentNode)]})},Zze=()=>{const n=ln(),e=jt();return{isDisabled:!(n!=null&&n.isEditable)||!(n!=null&&n.can().clearFormat()),clearFormat:()=>{n==null||n.chain().focus().clearFormat().run()},tooltip:e.clearFormat}},Xze=()=>{const{isDisabled:n,clearFormat:e,tooltip:t}=Zze();return P.jsx(dn,{tooltip:t,icon:P.jsx(kce,{}),disabled:n,onClick:e})};function va(n,e=0){return n[n.length-(1+e)]}function Qze(n){if(n.length===0)throw new Error("Invalid tail call");return[n.slice(0,n.length-1),n[n.length-1]]}function rr(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(let i=0,r=n.length;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function Jze(n,e){const t=n.length-1;e<t&&(n[e]=n[t]),n.pop()}function eWe(n,e,t){return tWe(n.length,i=>t(n[i],e))}function tWe(n,e){let t=0,i=n-1;for(;t<=i;){const r=(t+i)/2|0,s=e(r);if(s<0)t=r+1;else if(s>0)i=r-1;else return r}return-(t+1)}function*iH(n,e){let t,i;for(const r of n)i!==void 0&&e(i,r)?t.push(r):(t&&(yield t),t=[r]),i=r;t&&(yield t)}function Sue(n,e){for(let t=0;t<=n.length;t++)e(t===0?void 0:n[t-1],t===n.length?void 0:n[t])}function nWe(n,e){for(let t=0;t<n.length;t++)e(t===0?void 0:n[t-1],n[t],t+1===n.length?void 0:n[t+1])}function rH(n){return n.filter(e=>!!e)}function vG(n){let e=0;for(let t=0;t<n.length;t++)n[t]&&(n[e]=n[t],e+=1);n.length=e}function iWe(n){return!Array.isArray(n)||n.length===0}function LD(n){return Array.isArray(n)&&n.length>0}function Gp(n,e=t=>t){const t=new Set;return n.filter(i=>{const r=e(i);return t.has(r)?!1:(t.add(r),!0)})}function sH(n,e){return n.length>0?n[0]:e}function Zs(n,e){let t=typeof e=="number"?n:0;typeof e=="number"?t=n:(t=0,e=n);const i=[];if(t<=e)for(let r=t;r<e;r++)i.push(r);else for(let r=t;r>e;r--)i.push(r);return i}function ND(n,e,t){const i=n.slice(0,e),r=n.slice(e);return i.concat(t,r)}function xR(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.unshift(e))}function zx(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.push(e))}function RP(n,e){for(const t of e)n.push(t)}function rWe(n,e,t){const i=xue(n,e),r=n.length,s=t.length;n.length=r+s;for(let o=r-1;o>=i;o--)n[o+s]=n[o];for(let o=0;o<s;o++)n[o+i]=t[o]}function bG(n,e,t,i){const r=xue(n,e);let s=n.splice(r,t);return s===void 0&&(s=[]),rWe(n,r,i),s}function xue(n,e){return e<0?Math.max(e+n.length,0):Math.min(e,n.length)}var jy;(function(n){function e(s){return s<0}n.isLessThan=e;function t(s){return s<=0}n.isLessThanOrEqual=t;function i(s){return s>0}n.isGreaterThan=i;function r(s){return s===0}n.isNeitherLessOrGreaterThan=r,n.greaterThan=1,n.lessThan=-1,n.neitherLessOrGreaterThan=0})(jy||(jy={}));function fl(n,e){return(t,i)=>e(n(t),n(i))}function sWe(...n){return(e,t)=>{for(const i of n){const r=i(e,t);if(!jy.isNeitherLessOrGreaterThan(r))return r}return jy.neitherLessOrGreaterThan}}const df=(n,e)=>n-e,oWe=(n,e)=>df(n?1:0,e?1:0);function aWe(n){return(e,t)=>-n(e,t)}class Hd{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}const Jv=class Jv{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Jv(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new Jv(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(r=>((i||jy.isGreaterThan(e(r,t)))&&(i=!1,t=r),!0)),t}};Jv.empty=new Jv(e=>{});let gp=Jv;function aa(n){return typeof n=="string"}function no(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof Date)}function lWe(n){const e=Object.getPrototypeOf(Uint8Array);return typeof n=="object"&&n instanceof e}function hb(n){return typeof n=="number"&&!isNaN(n)}function _G(n){return!!n&&typeof n[Symbol.iterator]=="function"}function kue(n){return n===!0||n===!1}function Na(n){return typeof n>"u"}function k1(n){return!Yo(n)}function Yo(n){return Na(n)||n===null}function hf(n,e){if(!n)throw new Error("Unexpected type")}function Eue(n){if(Yo(n))throw new Error("Assertion Failed: argument is undefined or null");return n}function LL(n){return typeof n=="function"}function cWe(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)uWe(n[i],e[i])}function uWe(n,e){if(aa(e)){if(typeof n!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(LL(e)){try{if(n instanceof e)return}catch{}if(!Yo(n)&&n.constructor===e||e.length===1&&e.call(void 0,n)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function bh(n){if(!n||typeof n!="object"||n instanceof RegExp)return n;const e=Array.isArray(n)?[]:{};return Object.entries(n).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?bh(i):i}),e}function dWe(n){if(!n||typeof n!="object")return n;const e=[n];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(Lue.call(t,i)){const r=t[i];typeof r=="object"&&!Object.isFrozen(r)&&!lWe(r)&&e.push(r)}}return n}const Lue=Object.prototype.hasOwnProperty;function Nue(n,e){return AP(n,e,new Set)}function AP(n,e,t){if(Yo(n))return n;const i=e(n);if(typeof i<"u")return i;if(Array.isArray(n)){const r=[];for(const s of n)r.push(AP(s,e,t));return r}if(no(n)){if(t.has(n))throw new Error("Cannot clone recursive data-structure");t.add(n);const r={};for(const s in n)Lue.call(n,s)&&(r[s]=AP(n[s],e,t));return t.delete(n),r}return n}function No(n,e){if(n===e)return!0;if(n==null||e===null||e===void 0||typeof n!=typeof e||typeof n!="object"||Array.isArray(n)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(n)){if(n.length!==e.length)return!1;for(t=0;t<n.length;t++)if(!No(n[t],e[t]))return!1}else{const r=[];for(i in n)r.push(i);r.sort();const s=[];for(i in e)s.push(i);if(s.sort(),!No(r,s))return!1;for(t=0;t<r.length;t++)if(!No(n[r[t]],e[r[t]]))return!1}return!0}function hWe(n){let e=[];for(;Object.prototype!==n;)e=e.concat(Object.getOwnPropertyNames(n)),n=Object.getPrototypeOf(n);return e}function OP(n){const e=[];for(const t of hWe(n))typeof n[t]=="function"&&e.push(t);return e}function fWe(n,e){const t=r=>function(){const s=Array.prototype.slice.call(arguments,0);return e(r,s)},i={};for(const r of n)i[r]=t(r);return i}function Tue(){return globalThis._VSCODE_NLS_MESSAGES}function oH(){return globalThis._VSCODE_NLS_LANGUAGE}const gWe=oH()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function CG(n,e){let t;return e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,(i,r)=>{const s=r[0],o=e[s];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),gWe&&(t=""+t.replace(/[aouei]/g,"$&$&")+""),t}function S(n,e,...t){return CG(typeof n=="number"?pWe(n,e):e,t)}function pWe(n,e){var i;const t=(i=Tue())==null?void 0:i[n];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${n} !!!`)}return t}const Mv="en";let NL=!1,TL=!1,hE=!1,Iue=!1,aH=!1,lH=!1,Due=!1,Wx,kR=Mv,yG=Mv,mWe,Al;const xd=globalThis;let Ns;var jJ;typeof xd.vscode<"u"&&typeof xd.vscode.process<"u"?Ns=xd.vscode.process:typeof process<"u"&&typeof((jJ=process==null?void 0:process.versions)==null?void 0:jJ.node)=="string"&&(Ns=process);var KJ;const vWe=typeof((KJ=Ns==null?void 0:Ns.versions)==null?void 0:KJ.electron)=="string",bWe=vWe&&(Ns==null?void 0:Ns.type)==="renderer";var qJ;if(typeof Ns=="object"){NL=Ns.platform==="win32",TL=Ns.platform==="darwin",hE=Ns.platform==="linux",hE&&Ns.env.SNAP&&Ns.env.SNAP_REVISION,Ns.env.CI||Ns.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Wx=Mv,kR=Mv;const n=Ns.env.VSCODE_NLS_CONFIG;if(n)try{const e=JSON.parse(n);Wx=e.userLocale,yG=e.osLocale,kR=e.resolvedLanguage||Mv,mWe=(qJ=e.languagePack)==null?void 0:qJ.translationsConfigFile}catch{}Iue=!0}else typeof navigator=="object"&&!bWe?(Al=navigator.userAgent,NL=Al.indexOf("Windows")>=0,TL=Al.indexOf("Macintosh")>=0,lH=(Al.indexOf("Macintosh")>=0||Al.indexOf("iPad")>=0||Al.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,hE=Al.indexOf("Linux")>=0,Due=(Al==null?void 0:Al.indexOf("Mobi"))>=0,aH=!0,kR=oH()||Mv,Wx=navigator.language.toLowerCase(),yG=Wx):console.error("Unable to resolve platform.");const Ao=NL,hn=TL,co=hE,hC=Iue,fb=aH,_We=aH&&typeof xd.importScripts=="function",CWe=_We?xd.origin:void 0,Yp=lH,Mue=Due,bu=Al,yWe=typeof xd.postMessage=="function"&&!xd.importScripts,Rue=(()=>{if(yWe){const n=[];xd.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,r=n.length;i<r;i++){const s=n[i];if(s.id===t.data.vscodeScheduleAsyncWork){n.splice(i,1),s.callback();return}}});let e=0;return t=>{const i=++e;n.push({id:i,callback:t}),xd.postMessage({vscodeScheduleAsyncWork:i},"*")}}return n=>setTimeout(n)})(),al=TL||lH?2:NL?1:3;let wG=!0,SG=!1;function wWe(){if(!SG){SG=!0;const n=new Uint8Array(2);n[0]=1,n[1]=2,wG=new Uint16Array(n.buffer)[0]===513}return wG}const Aue=!!(bu&&bu.indexOf("Chrome")>=0),SWe=!!(bu&&bu.indexOf("Firefox")>=0),xWe=!!(!Aue&&bu&&bu.indexOf("Safari")>=0),kWe=!!(bu&&bu.indexOf("Edg/")>=0),EWe=!!(bu&&bu.indexOf("Android")>=0),Kr={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var Sn;(function(n){function e(C){return C&&typeof C=="object"&&typeof C[Symbol.iterator]=="function"}n.is=e;const t=Object.freeze([]);function i(){return t}n.empty=i;function*r(C){yield C}n.single=r;function s(C){return e(C)?C:r(C)}n.wrap=s;function o(C){return C||t}n.from=o;function*a(C){for(let w=C.length-1;w>=0;w--)yield C[w]}n.reverse=a;function l(C){return!C||C[Symbol.iterator]().next().done===!0}n.isEmpty=l;function c(C){return C[Symbol.iterator]().next().value}n.first=c;function u(C,w){let x=0;for(const k of C)if(w(k,x++))return!0;return!1}n.some=u;function d(C,w){for(const x of C)if(w(x))return x}n.find=d;function*h(C,w){for(const x of C)w(x)&&(yield x)}n.filter=h;function*f(C,w){let x=0;for(const k of C)yield w(k,x++)}n.map=f;function*g(C,w){let x=0;for(const k of C)yield*w(k,x++)}n.flatMap=g;function*p(...C){for(const w of C)yield*w}n.concat=p;function v(C,w,x){let k=x;for(const E of C)k=w(k,E);return k}n.reduce=v;function*b(C,w,x=C.length){for(w<0&&(w+=C.length),x<0?x+=C.length:x>C.length&&(x=C.length);w<x;w++)yield C[w]}n.slice=b;function _(C,w=Number.POSITIVE_INFINITY){const x=[];if(w===0)return[x,C];const k=C[Symbol.iterator]();for(let E=0;E<w;E++){const L=k.next();if(L.done)return[x,n.empty()];x.push(L.value)}return[x,{[Symbol.iterator](){return k}}]}n.consume=_;async function y(C){const w=[];for await(const x of C)w.push(x);return Promise.resolve(w)}n.asyncToArray=y})(Sn||(Sn={}));var Cd;let Zi=(Cd=class{constructor(e){this.element=e,this.next=Cd.Undefined,this.prev=Cd.Undefined}},Cd.Undefined=new Cd(void 0),Cd);class Eo{constructor(){this._first=Zi.Undefined,this._last=Zi.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Zi.Undefined}clear(){let e=this._first;for(;e!==Zi.Undefined;){const t=e.next;e.prev=Zi.Undefined,e.next=Zi.Undefined,e=t}this._first=Zi.Undefined,this._last=Zi.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new Zi(e);if(this._first===Zi.Undefined)this._first=i,this._last=i;else if(t){const s=this._last;this._last=i,i.prev=s,s.next=i}else{const s=this._first;this._first=i,i.next=s,s.prev=i}this._size+=1;let r=!1;return()=>{r||(r=!0,this._remove(i))}}shift(){if(this._first!==Zi.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Zi.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Zi.Undefined&&e.next!==Zi.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Zi.Undefined&&e.next===Zi.Undefined?(this._first=Zi.Undefined,this._last=Zi.Undefined):e.next===Zi.Undefined?(this._last=this._last.prev,this._last.next=Zi.Undefined):e.prev===Zi.Undefined&&(this._first=this._first.next,this._first.prev=Zi.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Zi.Undefined;)yield e.element,e=e.next}}const Oue="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function LWe(n=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Oue)n.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const cH=LWe();function uH(n){let e=cH;if(n&&n instanceof RegExp)if(n.global)e=n;else{let t="g";n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.unicode&&(t+="u"),e=new RegExp(n.source,t)}return e.lastIndex=0,e}const Pue=new Eo;Pue.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Ky(n,e,t,i,r){if(e=uH(e),r||(r=Sn.first(Pue)),t.length>r.maxLen){let c=n-r.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,n+r.maxLen/2),Ky(n,e,t,i,r)}const s=Date.now(),o=n-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-s>=r.timeBudget);c++){const u=o-r.windowSize*c;e.lastIndex=Math.max(0,u);const d=NWe(e,t,o,a);if(!d&&l||(l=d,u<=0))break;a=u}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function NWe(n,e,t,i){let r;for(;r=n.exec(e);){const s=r.index||0;if(s<=t&&n.lastIndex>=t)return r;if(i>0&&s>i)return null}return null}const Oc=8;class Fue{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Bue{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class si{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return TD(e,t)}compute(e,t,i){return i}}class fC{constructor(e,t){this.newValue=e,this.didChange=t}}function TD(n,e){if(typeof n!="object"||typeof e!="object"||!n||!e)return new fC(e,n!==e);if(Array.isArray(n)||Array.isArray(e)){const i=Array.isArray(n)&&Array.isArray(e)&&rr(n,e);return new fC(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const r=TD(n[i],e[i]);r.didChange&&(n[i]=r.newValue,t=!0)}return new fC(n,t)}class oS{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return TD(e,t)}validate(e){return this.defaultValue}}class gb{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return TD(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function it(n,e){return typeof n>"u"?e:n==="false"?!1:!!n}class Jt extends gb{constructor(e,t,i,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=i),super(e,t,i,r)}validate(e){return it(e,this.defaultValue)}}function lg(n,e,t,i){if(typeof n>"u")return e;let r=parseInt(n,10);return isNaN(r)?e:(r=Math.max(t,r),r=Math.min(i,r),r|0)}class Vn extends gb{static clampedInt(e,t,i,r){return lg(e,t,i,r)}constructor(e,t,i,r,s,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=r,o.maximum=s),super(e,t,i,o),this.minimum=r,this.maximum=s}validate(e){return Vn.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function TWe(n,e,t,i){if(typeof n>"u")return e;const r=Jo.float(n,e);return Jo.clamp(r,t,i)}class Jo extends gb{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,r,s){typeof s<"u"&&(s.type="number",s.default=i),super(e,t,i,s),this.validationFn=r}validate(e){return this.validationFn(Jo.float(e,this.defaultValue))}}class cs extends gb{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,r=void 0){typeof r<"u"&&(r.type="string",r.default=i),super(e,t,i,r)}validate(e){return cs.string(e,this.defaultValue)}}function gi(n,e,t,i){return typeof n!="string"?e:i&&n in i?i[n]:t.indexOf(n)===-1?e:n}class hi extends gb{constructor(e,t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.enum=r,s.default=i),super(e,t,i,s),this._allowedValues=r}validate(e){return gi(e,this.defaultValue,this._allowedValues)}}class $x extends si{constructor(e,t,i,r,s,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=r),super(e,t,i,a),this._allowedValues=s,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function IWe(n){switch(n){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class DWe extends si{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[S("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),S("accessibilitySupport.on","Optimize for usage with a Screen Reader."),S("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:S("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class MWe extends si{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:S("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:S("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:it(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:it(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function RWe(n){switch(n){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Sr;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(Sr||(Sr={}));function AWe(n){switch(n){case"line":return Sr.Line;case"block":return Sr.Block;case"underline":return Sr.Underline;case"line-thin":return Sr.LineThin;case"block-outline":return Sr.BlockOutline;case"underline-thin":return Sr.UnderlineThin}}class OWe extends oS{constructor(){super(143)}compute(e,t,i){const r=["monaco-editor"];return t.get(39)&&r.push(t.get(39)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(74)==="default"?r.push("mouse-default"):t.get(74)==="copy"&&r.push("mouse-copy"),t.get(112)&&r.push("showUnused"),t.get(141)&&r.push("showDeprecated"),r.join(" ")}}class PWe extends Jt{constructor(){super(37,"emptySelectionClipboard",!0,{description:S("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class FWe extends si{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:S("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[S("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),S("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),S("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:S("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[S("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),S("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),S("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:S("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:S("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:hn},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:S("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:S("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:it(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":gi(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":gi(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:it(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:it(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:it(t.loop,this.defaultValue.loop)}}}const Yu=class Yu extends si{constructor(){super(51,"fontLigatures",Yu.OFF,{anyOf:[{type:"boolean",description:S("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:S("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:S("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?Yu.OFF:e==="true"?Yu.ON:e:e?Yu.ON:Yu.OFF}};Yu.OFF='"liga" off, "calt" off',Yu.ON='"liga" on, "calt" on';let Zp=Yu;const Zu=class Zu extends si{constructor(){super(54,"fontVariations",Zu.OFF,{anyOf:[{type:"boolean",description:S("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:S("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:S("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Zu.OFF:e==="true"?Zu.TRANSLATE:e:e?Zu.TRANSLATE:Zu.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}};Zu.OFF="normal",Zu.TRANSLATE="translate";let qy=Zu;class BWe extends oS{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}class HWe extends gb{constructor(){super(52,"fontSize",la.fontSize,{type:"number",minimum:6,maximum:100,default:la.fontSize,description:S("fontSize","Controls the font size in pixels.")})}validate(e){const t=Jo.float(e,this.defaultValue);return t===0?la.fontSize:Jo.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}const Uc=class Uc extends si{constructor(){super(53,"fontWeight",la.fontWeight,{anyOf:[{type:"number",minimum:Uc.MINIMUM_VALUE,maximum:Uc.MAXIMUM_VALUE,errorMessage:S("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Uc.SUGGESTION_VALUES}],default:la.fontWeight,description:S("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Vn.clampedInt(e,la.fontWeight,Uc.MINIMUM_VALUE,Uc.MAXIMUM_VALUE))}};Uc.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],Uc.MINIMUM_VALUE=1,Uc.MAXIMUM_VALUE=1e3;let PP=Uc;class VWe extends si{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[S("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),S("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),S("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:S("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:S("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:S("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:S("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:S("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:S("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:S("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:S("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:S("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:S("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:S("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:gi(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??gi(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??gi(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??gi(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??gi(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??gi(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??gi(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:cs.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:cs.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:cs.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:cs.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:cs.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:cs.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class zWe extends si{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:S("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:S("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:S("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:S("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:S("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:it(t.enabled,this.defaultValue.enabled),delay:Vn.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:it(t.sticky,this.defaultValue.sticky),hidingDelay:Vn.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:it(t.above,this.defaultValue.above)}}}class L0 extends oS{constructor(){super(146)}compute(e,t,i){return L0.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let r=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(r=Math.max(r,t-1));const s=(i+e.viewLineCount+r)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:r,desiredRatio:s,minimapLineCount:o}}static _computeMinimapLayout(e,t){const i=e.outerWidth,r=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*r),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:r};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,u=e.scrollBeyondLastLine,d=e.minimap.renderCharacters;let h=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,p=e.minimap.side,v=e.verticalScrollbarWidth,b=e.viewLineCount,_=e.remainingWidth,y=e.isViewportWrapping,C=d?2:3;let w=Math.floor(s*r);const x=w/s;let k=!1,E=!1,L=C*h,M=h/s,D=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:N,extraLinesBeforeFirstLine:B,extraLinesBeyondLastLine:$,desiredRatio:j,minimapLineCount:Y}=L0.computeContainedMinimapLineCount({viewLineCount:b,scrollBeyondLastLine:u,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:r,lineHeight:l,pixelRatio:s});if(b/Y>1)k=!0,E=!0,h=1,L=1,M=h/s;else{let X=!1,q=h+1;if(g==="fit"){const re=Math.ceil((B+b+$)*L);y&&a&&_<=t.stableFitRemainingWidth?(X=!0,q=t.stableFitMaxMinimapScale):X=re>w}if(g==="fill"||X){k=!0;const re=h;L=Math.min(l*s,Math.max(1,Math.floor(1/j))),y&&a&&_<=t.stableFitRemainingWidth&&(q=t.stableFitMaxMinimapScale),h=Math.min(q,Math.max(1,Math.floor(L/C))),h>re&&(D=Math.min(2,h/re)),M=h/s/D,w=Math.ceil(Math.max(N,B+b+$)*L),y?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=_,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const O=Math.floor(f*M),A=Math.min(O,Math.max(0,Math.floor((_-v-2)*M/(c+M)))+Oc);let R=Math.floor(s*A);const V=R/s;R=Math.floor(R*D);const F=d?1:2,T=p==="left"?0:i-A-v;return{renderMinimap:F,minimapLeft:T,minimapWidth:A,minimapHeightIsEditorHeight:k,minimapIsSampling:E,minimapScale:h,minimapLineHeight:L,minimapCanvasInnerWidth:R,minimapCanvasInnerHeight:w,minimapCanvasOuterWidth:V,minimapCanvasOuterHeight:x}}static computeLayout(e,t){const i=t.outerWidth|0,r=t.outerHeight|0,s=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,u=t.viewLineCount,d=e.get(138),h=d==="inherit"?e.get(137):d,f=h==="inherit"?e.get(133):h,g=e.get(136),p=t.isDominatedByLongLines,v=e.get(57),b=e.get(68).renderType!==0,_=e.get(69),y=e.get(106),C=e.get(84),w=e.get(73),x=e.get(104),k=x.verticalScrollbarSize,E=x.verticalHasArrows,L=x.arrowSize,M=x.horizontalScrollbarSize,D=e.get(43),O=e.get(111)!=="never";let A=e.get(66);D&&O&&(A+=16);let R=0;if(b){const ye=Math.max(o,_);R=Math.round(ye*l)}let V=0;v&&(V=s*t.glyphMarginDecorationLaneCount);let F=0,T=F+V,N=T+R,B=N+A;const $=i-V-R-A;let j=!1,Y=!1,G=-1;h==="inherit"&&p?(j=!0,Y=!0):f==="on"||f==="bounded"?Y=!0:f==="wordWrapColumn"&&(G=g);const X=L0._computeMinimapLayout({outerWidth:i,outerHeight:r,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:y,paddingTop:C.top,paddingBottom:C.bottom,minimap:w,verticalScrollbarWidth:k,viewLineCount:u,remainingWidth:$,isViewportWrapping:Y},t.memory||new Bue);X.renderMinimap!==0&&X.minimapLeft===0&&(F+=X.minimapWidth,T+=X.minimapWidth,N+=X.minimapWidth,B+=X.minimapWidth);const q=$-X.minimapWidth,re=Math.max(1,Math.floor((q-k-2)/a)),ge=E?L:0;return Y&&(G=Math.max(1,re),f==="bounded"&&(G=Math.min(G,g))),{width:i,height:r,glyphMarginLeft:F,glyphMarginWidth:V,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:T,lineNumbersWidth:R,decorationsLeft:N,decorationsWidth:A,contentLeft:B,contentWidth:q,minimap:X,viewportColumn:re,isWordWrapMinified:j,isViewportWrapping:Y,wrappingColumn:G,verticalScrollbarWidth:k,horizontalScrollbarHeight:M,overviewRuler:{top:ge,width:k,height:r-2*ge,right:0}}}}class WWe extends si{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[S("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),S("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:S("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return gi(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}var ju;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(ju||(ju={}));class $We extends si{constructor(){const e={enabled:ju.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[ju.Off,ju.OnCode,ju.On],default:e.enabled,enumDescriptions:[S("editor.lightbulb.enabled.off","Disable the code action menu."),S("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),S("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:S("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:gi(e.enabled,this.defaultValue.enabled,[ju.Off,ju.OnCode,ju.On])}}}class UWe extends si{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:S("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:S("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:S("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:S("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:it(t.enabled,this.defaultValue.enabled),maxLineCount:Vn.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:gi(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:it(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class jWe extends si{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:S("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[S("editor.inlayHints.on","Inlay hints are enabled"),S("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",hn?"Ctrl+Option":"Ctrl+Alt"),S("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",hn?"Ctrl+Option":"Ctrl+Alt"),S("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:S("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:S("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:S("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:gi(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Vn.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:cs.string(t.fontFamily,this.defaultValue.fontFamily),padding:it(t.padding,this.defaultValue.padding)}}}class KWe extends si{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Vn.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Vn.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class qWe extends Jo{constructor(){super(67,"lineHeight",la.lineHeight,e=>Jo.clamp(e,0,150),{markdownDescription:S("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class GWe extends si{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:S("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:S("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[S("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),S("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),S("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:S("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:S("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:S("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:S("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:S("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:S("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:S("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:S("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:S("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:S("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:it(t.enabled,this.defaultValue.enabled),autohide:it(t.autohide,this.defaultValue.autohide),size:gi(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:gi(t.side,this.defaultValue.side,["right","left"]),showSlider:gi(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:it(t.renderCharacters,this.defaultValue.renderCharacters),scale:Vn.clampedInt(t.scale,1,1,3),maxColumn:Vn.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:it(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:it(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Jo.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Jo.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function YWe(n){return n==="ctrlCmd"?hn?"metaKey":"ctrlKey":"altKey"}class ZWe extends si{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:S("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:S("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Vn.clampedInt(t.top,0,0,1e3),bottom:Vn.clampedInt(t.bottom,0,0,1e3)}}}class XWe extends si{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:S("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:S("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:it(t.enabled,this.defaultValue.enabled),cycle:it(t.cycle,this.defaultValue.cycle)}}}class QWe extends oS{constructor(){super(144)}compute(e,t,i){return e.pixelRatio}}class JWe extends si{constructor(){super(88,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class e$e extends si{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[S("on","Quick suggestions show inside the suggest widget"),S("inline","Quick suggestions show as ghost text"),S("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:S("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:S("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:S("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:S("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:r}=e,s=["on","inline","off"];let o,a,l;return typeof t=="boolean"?o=t?"on":"off":o=gi(t,this.defaultValue.other,s),typeof i=="boolean"?a=i?"on":"off":a=gi(i,this.defaultValue.comments,s),typeof r=="boolean"?l=r?"on":"off":l=gi(r,this.defaultValue.strings,s),{other:o,comments:a,strings:l}}}class t$e extends si{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[S("lineNumbers.off","Line numbers are not rendered."),S("lineNumbers.on","Line numbers are rendered as absolute number."),S("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),S("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:S("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function IL(n){const e=n.get(99);return e==="editable"?n.get(92):e!=="on"}class n$e extends si{constructor(){const e=[],t={type:"number",description:S("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:S("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:S("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Vn.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const r=i;t.push({column:Vn.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((i,r)=>i.column-r.column),t}return this.defaultValue}}class i$e extends si{constructor(){super(93,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function xG(n,e){if(typeof n!="string")return e;switch(n){case"hidden":return 2;case"visible":return 3;default:return 1}}let r$e=class extends si{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[S("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),S("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),S("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:S("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[S("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),S("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),S("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:S("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:S("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:S("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:S("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:S("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Vn.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=Vn.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Vn.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:xG(t.vertical,this.defaultValue.vertical),horizontal:xG(t.horizontal,this.defaultValue.horizontal),useShadows:it(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:it(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:it(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:it(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:it(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Vn.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:r,verticalSliderSize:Vn.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:it(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:it(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const Dl="inUntrustedWorkspace",Xf={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class s$e extends si{constructor(){const e={nonBasicASCII:Dl,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Dl,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[Xf.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Dl],default:e.nonBasicASCII,description:S("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Xf.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:S("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Xf.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:S("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Xf.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Dl],default:e.includeComments,description:S("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Xf.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Dl],default:e.includeStrings,description:S("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Xf.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:S("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Xf.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:S("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(No(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(No(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const r=super.applyUpdate(e,t);return i?new fC(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:N0(t.nonBasicASCII,Dl,[!0,!1,Dl]),invisibleCharacters:it(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:it(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:N0(t.includeComments,Dl,[!0,!1,Dl]),includeStrings:N0(t.includeStrings,Dl,[!0,!1,Dl]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[r,s]of Object.entries(e))s===!0&&(i[r]=!0);return i}}class o$e extends si{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:S("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[S("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),S("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),S("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:S("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:S("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:S("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:it(t.enabled,this.defaultValue.enabled),mode:gi(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:gi(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:it(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:it(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:cs.string(t.fontFamily,this.defaultValue.fontFamily)}}}class a$e extends si{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:S("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[S("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),S("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),S("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:S("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:S("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:it(t.enabled,this.defaultValue.enabled),showToolbar:gi(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:cs.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:it(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class l$e extends si{constructor(){const e={enabled:Kr.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Kr.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:S("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:S("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:it(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:it(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class c$e extends si{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[S("editor.guides.bracketPairs.true","Enables bracket pair guides."),S("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),S("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:S("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[S("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),S("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),S("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:S("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:S("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:S("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[S("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),S("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),S("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:S("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:N0(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:N0(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:it(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:it(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:N0(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function N0(n,e,t){const i=t.indexOf(n);return i===-1?e:t[i]}class u$e extends si{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[S("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),S("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:S("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:S("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:S("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:S("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[S("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),S("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),S("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),S("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:S("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:S("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:S("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:S("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:S("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:S("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:S("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:S("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:gi(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:it(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:it(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:it(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:it(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:gi(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:it(t.showIcons,this.defaultValue.showIcons),showStatusBar:it(t.showStatusBar,this.defaultValue.showStatusBar),preview:it(t.preview,this.defaultValue.preview),previewMode:gi(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:it(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:it(t.showMethods,this.defaultValue.showMethods),showFunctions:it(t.showFunctions,this.defaultValue.showFunctions),showConstructors:it(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:it(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:it(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:it(t.showFields,this.defaultValue.showFields),showVariables:it(t.showVariables,this.defaultValue.showVariables),showClasses:it(t.showClasses,this.defaultValue.showClasses),showStructs:it(t.showStructs,this.defaultValue.showStructs),showInterfaces:it(t.showInterfaces,this.defaultValue.showInterfaces),showModules:it(t.showModules,this.defaultValue.showModules),showProperties:it(t.showProperties,this.defaultValue.showProperties),showEvents:it(t.showEvents,this.defaultValue.showEvents),showOperators:it(t.showOperators,this.defaultValue.showOperators),showUnits:it(t.showUnits,this.defaultValue.showUnits),showValues:it(t.showValues,this.defaultValue.showValues),showConstants:it(t.showConstants,this.defaultValue.showConstants),showEnums:it(t.showEnums,this.defaultValue.showEnums),showEnumMembers:it(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:it(t.showKeywords,this.defaultValue.showKeywords),showWords:it(t.showWords,this.defaultValue.showWords),showColors:it(t.showColors,this.defaultValue.showColors),showFiles:it(t.showFiles,this.defaultValue.showFiles),showReferences:it(t.showReferences,this.defaultValue.showReferences),showFolders:it(t.showFolders,this.defaultValue.showFolders),showTypeParameters:it(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:it(t.showSnippets,this.defaultValue.showSnippets),showUsers:it(t.showUsers,this.defaultValue.showUsers),showIssues:it(t.showIssues,this.defaultValue.showIssues)}}}class d$e extends si{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:S("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:S("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:it(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:it(e.selectSubwords,this.defaultValue.selectSubwords)}}}class h$e extends si{constructor(){const e=[];super(131,"wordSegmenterLocales",e,{anyOf:[{description:S("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:S("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}class f$e extends si{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[S("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),S("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),S("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),S("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:S("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class g$e extends oS{constructor(){super(147)}compute(e,t,i){const r=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}}class p$e extends si{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:S("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:S("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[S("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),S("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:it(t.enabled,this.defaultValue.enabled),showDropSelector:gi(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class m$e extends si{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:S("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:S("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[S("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),S("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:it(t.enabled,this.defaultValue.enabled),showPasteSelector:gi(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const v$e="Consolas, 'Courier New', monospace",b$e="Menlo, Monaco, 'Courier New', monospace",_$e="'Droid Sans Mono', 'monospace', monospace",la={fontFamily:hn?b$e:co?_$e:v$e,fontWeight:"normal",fontSize:hn?12:14,lineHeight:0,letterSpacing:0},Rv=[];function Te(n){return Rv[n.id]=n,n}const gm={acceptSuggestionOnCommitCharacter:Te(new Jt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:S("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Te(new hi(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",S("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:S("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Te(new DWe),accessibilityPageSize:Te(new Vn(3,"accessibilityPageSize",10,1,1073741824,{description:S("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:Te(new cs(4,"ariaLabel",S("editorViewAccessibleLabel","Editor content"))),ariaRequired:Te(new Jt(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:Te(new Jt(8,"screenReaderAnnounceInlineSuggestion",!0,{description:S("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:Te(new hi(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",S("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),S("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:S("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:Te(new hi(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",S("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),S("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:S("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:Te(new hi(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",S("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:S("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Te(new hi(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",S("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:S("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Te(new hi(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",S("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),S("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:S("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Te(new $x(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],IWe,{enumDescriptions:[S("editor.autoIndent.none","The editor will not insert indentation automatically."),S("editor.autoIndent.keep","The editor will keep the current line's indentation."),S("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),S("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),S("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:S("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Te(new Jt(13,"automaticLayout",!1)),autoSurround:Te(new hi(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[S("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),S("editor.autoSurround.quotes","Surround with quotes but not brackets."),S("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:S("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Te(new l$e),bracketPairGuides:Te(new c$e),stickyTabStops:Te(new Jt(117,"stickyTabStops",!1,{description:S("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Te(new Jt(17,"codeLens",!0,{description:S("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Te(new cs(18,"codeLensFontFamily","",{description:S("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:Te(new Vn(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:S("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Te(new Jt(20,"colorDecorators",!0,{description:S("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:Te(new hi(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[S("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),S("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),S("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:S("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:Te(new Vn(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:S("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:Te(new Jt(22,"columnSelection",!1,{description:S("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:Te(new MWe),contextmenu:Te(new Jt(24,"contextmenu",!0)),copyWithSyntaxHighlighting:Te(new Jt(25,"copyWithSyntaxHighlighting",!0,{description:S("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Te(new $x(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],RWe,{description:S("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:Te(new hi(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[S("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),S("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),S("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:S("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Te(new $x(28,"cursorStyle",Sr.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],AWe,{description:S("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:Te(new Vn(29,"cursorSurroundingLines",0,0,1073741824,{description:S("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Te(new hi(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[S("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),S("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:S("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:Te(new Vn(31,"cursorWidth",0,0,1073741824,{markdownDescription:S("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Te(new Jt(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:Te(new Jt(33,"disableMonospaceOptimizations",!1)),domReadOnly:Te(new Jt(34,"domReadOnly",!1)),dragAndDrop:Te(new Jt(35,"dragAndDrop",!0,{description:S("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Te(new PWe),dropIntoEditor:Te(new p$e),stickyScroll:Te(new UWe),experimentalWhitespaceRendering:Te(new hi(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[S("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),S("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),S("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:S("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:Te(new cs(39,"extraEditorClassName","")),fastScrollSensitivity:Te(new Jo(40,"fastScrollSensitivity",5,n=>n<=0?5:n,{markdownDescription:S("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:Te(new FWe),fixedOverflowWidgets:Te(new Jt(42,"fixedOverflowWidgets",!1)),folding:Te(new Jt(43,"folding",!0,{description:S("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:Te(new hi(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[S("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),S("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:S("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:Te(new Jt(45,"foldingHighlight",!0,{description:S("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Te(new Jt(46,"foldingImportsByDefault",!1,{description:S("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:Te(new Vn(47,"foldingMaximumRegions",5e3,10,65e3,{description:S("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:Te(new Jt(48,"unfoldOnClickAfterEndOfLine",!1,{description:S("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Te(new cs(49,"fontFamily",la.fontFamily,{description:S("fontFamily","Controls the font family.")})),fontInfo:Te(new BWe),fontLigatures2:Te(new Zp),fontSize:Te(new HWe),fontWeight:Te(new PP),fontVariations:Te(new qy),formatOnPaste:Te(new Jt(55,"formatOnPaste",!1,{description:S("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Te(new Jt(56,"formatOnType",!1,{description:S("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Te(new Jt(57,"glyphMargin",!0,{description:S("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Te(new VWe),hideCursorInOverviewRuler:Te(new Jt(59,"hideCursorInOverviewRuler",!1,{description:S("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:Te(new zWe),inDiffEditor:Te(new Jt(61,"inDiffEditor",!1)),letterSpacing:Te(new Jo(64,"letterSpacing",la.letterSpacing,n=>Jo.clamp(n,-5,20),{description:S("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:Te(new $We),lineDecorationsWidth:Te(new KWe),lineHeight:Te(new qWe),lineNumbers:Te(new t$e),lineNumbersMinChars:Te(new Vn(69,"lineNumbersMinChars",5,1,300)),linkedEditing:Te(new Jt(70,"linkedEditing",!1,{description:S("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:Te(new Jt(71,"links",!0,{description:S("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Te(new hi(72,"matchBrackets","always",["always","near","never"],{description:S("matchBrackets","Highlight matching brackets.")})),minimap:Te(new GWe),mouseStyle:Te(new hi(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Te(new Jo(75,"mouseWheelScrollSensitivity",1,n=>n===0?1:n,{markdownDescription:S("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Te(new Jt(76,"mouseWheelZoom",!1,{markdownDescription:hn?S("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):S("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Te(new Jt(77,"multiCursorMergeOverlapping",!0,{description:S("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Te(new $x(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],YWe,{markdownEnumDescriptions:[S("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),S("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:S({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Te(new hi(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[S("multiCursorPaste.spread","Each cursor pastes a single line of the text."),S("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:S("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:Te(new Vn(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:S("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:Te(new hi(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[S("occurrencesHighlight.off","Does not highlight occurrences."),S("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),S("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:S("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:Te(new Jt(82,"overviewRulerBorder",!0,{description:S("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Te(new Vn(83,"overviewRulerLanes",3,0,3)),padding:Te(new ZWe),pasteAs:Te(new m$e),parameterHints:Te(new XWe),peekWidgetDefaultFocus:Te(new hi(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[S("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),S("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:S("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:Te(new JWe),definitionLinkOpensInPeek:Te(new Jt(89,"definitionLinkOpensInPeek",!1,{description:S("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Te(new e$e),quickSuggestionsDelay:Te(new Vn(91,"quickSuggestionsDelay",10,0,1073741824,{description:S("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Te(new Jt(92,"readOnly",!1)),readOnlyMessage:Te(new i$e),renameOnType:Te(new Jt(94,"renameOnType",!1,{description:S("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:S("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Te(new Jt(95,"renderControlCharacters",!0,{description:S("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Te(new hi(96,"renderFinalNewline",co?"dimmed":"on",["off","on","dimmed"],{description:S("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:Te(new hi(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",S("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:S("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Te(new Jt(98,"renderLineHighlightOnlyWhenFocus",!1,{description:S("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Te(new hi(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Te(new hi(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",S("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),S("renderWhitespace.selection","Render whitespace characters only on selected text."),S("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:S("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Te(new Vn(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:Te(new Jt(102,"roundedSelection",!0,{description:S("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:Te(new n$e),scrollbar:Te(new r$e),scrollBeyondLastColumn:Te(new Vn(105,"scrollBeyondLastColumn",4,0,1073741824,{description:S("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Te(new Jt(106,"scrollBeyondLastLine",!0,{description:S("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Te(new Jt(107,"scrollPredominantAxis",!0,{description:S("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Te(new Jt(108,"selectionClipboard",!0,{description:S("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:co})),selectionHighlight:Te(new Jt(109,"selectionHighlight",!0,{description:S("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Te(new Jt(110,"selectOnLineNumbers",!0)),showFoldingControls:Te(new hi(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[S("showFoldingControls.always","Always show the folding controls."),S("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),S("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:S("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:Te(new Jt(112,"showUnused",!0,{description:S("showUnused","Controls fading out of unused code.")})),showDeprecated:Te(new Jt(141,"showDeprecated",!0,{description:S("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:Te(new jWe),snippetSuggestions:Te(new hi(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[S("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),S("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),S("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),S("snippetSuggestions.none","Do not show snippet suggestions.")],description:S("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Te(new d$e),smoothScrolling:Te(new Jt(115,"smoothScrolling",!1,{description:S("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Te(new Vn(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Te(new u$e),inlineSuggest:Te(new o$e),inlineEdit:Te(new a$e),inlineCompletionsAccessibilityVerbose:Te(new Jt(150,"inlineCompletionsAccessibilityVerbose",!1,{description:S("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:Te(new Vn(120,"suggestFontSize",0,0,1e3,{markdownDescription:S("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:Te(new Vn(121,"suggestLineHeight",0,0,1e3,{markdownDescription:S("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:Te(new Jt(122,"suggestOnTriggerCharacters",!0,{description:S("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Te(new hi(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[S("suggestSelection.first","Always select the first suggestion."),S("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),S("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:S("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Te(new hi(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[S("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),S("tabCompletion.off","Disable tab completions."),S("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:S("tabCompletion","Enables tab completions.")})),tabIndex:Te(new Vn(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:Te(new s$e),unusualLineTerminators:Te(new hi(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[S("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),S("unusualLineTerminators.off","Unusual line terminators are ignored."),S("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:S("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:Te(new Jt(128,"useShadowDOM",!0)),useTabStops:Te(new Jt(129,"useTabStops",!0,{description:S("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:Te(new hi(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[S("wordBreak.normal","Use the default line break rule."),S("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:S("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:Te(new h$e),wordSeparators:Te(new cs(132,"wordSeparators",Oue,{description:S("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Te(new hi(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[S("wordWrap.off","Lines will never wrap."),S("wordWrap.on","Lines will wrap at the viewport width."),S({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),S({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:S({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Te(new cs(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;")),wordWrapBreakBeforeCharacters:Te(new cs(135,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:Te(new Vn(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:S({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Te(new hi(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Te(new hi(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:Te(new OWe),defaultColorDecorators:Te(new Jt(148,"defaultColorDecorators",!1,{markdownDescription:S("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:Te(new QWe),tabFocusMode:Te(new Jt(145,"tabFocusMode",!1,{markdownDescription:S("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:Te(new L0),wrappingInfo:Te(new g$e),wrappingIndent:Te(new f$e),wrappingStrategy:Te(new WWe)};class C$e{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?E1.isErrorNoTelemetry(e)?new E1(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Hue=new C$e;function $n(n){aS(n)||Hue.onUnexpectedError(n)}function dH(n){aS(n)||Hue.onUnexpectedExternalError(n)}function kG(n){if(n instanceof Error){const{name:e,message:t}=n,i=n.stacktrace||n.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:E1.isErrorNoTelemetry(n)}}return n}const DL="Canceled";function aS(n){return n instanceof lS?!0:n instanceof Error&&n.name===DL&&n.message===DL}class lS extends Error{constructor(){super(DL),this.name=this.message}}function y$e(){const n=new Error(DL);return n.name=n.message,n}function ID(n){return n?new Error(`Illegal argument: ${n}`):new Error("Illegal argument")}function hH(n){return n?new Error(`Illegal state: ${n}`):new Error("Illegal state")}class w$e extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class E1 extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof E1)return e;const t=new E1;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class Tn extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Tn.prototype)}}function L1(n,e){const t=this;let i=!1,r;return function(){return i||(i=!0,r=n.apply(t,arguments)),r}}function Vue(n){return typeof n=="object"&&n!==null&&typeof n.dispose=="function"&&n.dispose.length===0}function zr(n){if(Sn.is(n)){const e=[];for(const t of n)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(n)?[]:n}else if(n)return n.dispose(),n}function du(...n){return Pt(()=>zr(n))}function Pt(n){return{dispose:L1(()=>{n()})}}const pT=class pT{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{zr(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?pT.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}};pT.DISABLE_DISPOSED_WARNING=!1;let dt=pT;const Pz=class Pz{constructor(){this._store=new dt,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};Pz.None=Object.freeze({dispose(){}});let ke=Pz;class Vd{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}}class S$e{constructor(e){this.object=e}dispose(){}}class fH{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{zr(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){var r;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||(r=this._store.get(e))==null||r.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))==null||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const x$e=globalThis.performance&&typeof globalThis.performance.now=="function";class pm{static create(e){return new pm(e)}constructor(e){this._now=x$e&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var Be;(function(n){n.None=()=>ke.None;function e(A,R){return h(A,()=>{},0,void 0,!0,void 0,R)}n.defer=e;function t(A){return(R,V=null,F)=>{let T=!1,N;return N=A(B=>{if(!T)return N?N.dispose():T=!0,R.call(V,B)},null,F),T&&N.dispose(),N}}n.once=t;function i(A,R){return n.once(n.filter(A,R))}n.onceIf=i;function r(A,R,V){return u((F,T=null,N)=>A(B=>F.call(T,R(B)),null,N),V)}n.map=r;function s(A,R,V){return u((F,T=null,N)=>A(B=>{R(B),F.call(T,B)},null,N),V)}n.forEach=s;function o(A,R,V){return u((F,T=null,N)=>A(B=>R(B)&&F.call(T,B),null,N),V)}n.filter=o;function a(A){return A}n.signal=a;function l(...A){return(R,V=null,F)=>{const T=du(...A.map(N=>N(B=>R.call(V,B))));return d(T,F)}}n.any=l;function c(A,R,V,F){let T=V;return r(A,N=>(T=R(T,N),T),F)}n.reduce=c;function u(A,R){let V;const F={onWillAddFirstListener(){V=A(T.fire,T)},onDidRemoveLastListener(){V==null||V.dispose()}},T=new ae(F);return R==null||R.add(T),T.event}function d(A,R){return R instanceof Array?R.push(A):R&&R.add(A),A}function h(A,R,V=100,F=!1,T=!1,N,B){let $,j,Y,G=0,X;const q={leakWarningThreshold:N,onWillAddFirstListener(){$=A(ge=>{G++,j=R(j,ge),F&&!Y&&(re.fire(j),j=void 0),X=()=>{const ye=j;j=void 0,Y=void 0,(!F||G>1)&&re.fire(ye),G=0},typeof V=="number"?(clearTimeout(Y),Y=setTimeout(X,V)):Y===void 0&&(Y=0,queueMicrotask(X))})},onWillRemoveListener(){T&&G>0&&(X==null||X())},onDidRemoveLastListener(){X=void 0,$.dispose()}},re=new ae(q);return B==null||B.add(re),re.event}n.debounce=h;function f(A,R=0,V){return n.debounce(A,(F,T)=>F?(F.push(T),F):[T],R,void 0,!0,void 0,V)}n.accumulate=f;function g(A,R=(F,T)=>F===T,V){let F=!0,T;return o(A,N=>{const B=F||!R(N,T);return F=!1,T=N,B},V)}n.latch=g;function p(A,R,V){return[n.filter(A,R,V),n.filter(A,F=>!R(F),V)]}n.split=p;function v(A,R=!1,V=[],F){let T=V.slice(),N=A(j=>{T?T.push(j):$.fire(j)});F&&F.add(N);const B=()=>{T==null||T.forEach(j=>$.fire(j)),T=null},$=new ae({onWillAddFirstListener(){N||(N=A(j=>$.fire(j)),F&&F.add(N))},onDidAddFirstListener(){T&&(R?setTimeout(B):B())},onDidRemoveLastListener(){N&&N.dispose(),N=null}});return F&&F.add($),$.event}n.buffer=v;function b(A,R){return(F,T,N)=>{const B=R(new y);return A(function($){const j=B.evaluate($);j!==_&&F.call(T,j)},void 0,N)}}n.chain=b;const _=Symbol("HaltChainable");class y{constructor(){this.steps=[]}map(R){return this.steps.push(R),this}forEach(R){return this.steps.push(V=>(R(V),V)),this}filter(R){return this.steps.push(V=>R(V)?V:_),this}reduce(R,V){let F=V;return this.steps.push(T=>(F=R(F,T),F)),this}latch(R=(V,F)=>V===F){let V=!0,F;return this.steps.push(T=>{const N=V||!R(T,F);return V=!1,F=T,N?T:_}),this}evaluate(R){for(const V of this.steps)if(R=V(R),R===_)break;return R}}function C(A,R,V=F=>F){const F=(...$)=>B.fire(V(...$)),T=()=>A.on(R,F),N=()=>A.removeListener(R,F),B=new ae({onWillAddFirstListener:T,onDidRemoveLastListener:N});return B.event}n.fromNodeEventEmitter=C;function w(A,R,V=F=>F){const F=(...$)=>B.fire(V(...$)),T=()=>A.addEventListener(R,F),N=()=>A.removeEventListener(R,F),B=new ae({onWillAddFirstListener:T,onDidRemoveLastListener:N});return B.event}n.fromDOMEventEmitter=w;function x(A){return new Promise(R=>t(A)(R))}n.toPromise=x;function k(A){const R=new ae;return A.then(V=>{R.fire(V)},()=>{R.fire(void 0)}).finally(()=>{R.dispose()}),R.event}n.fromPromise=k;function E(A,R){return A(V=>R.fire(V))}n.forward=E;function L(A,R,V){return R(V),A(F=>R(F))}n.runAndSubscribe=L;class M{constructor(R,V){this._observable=R,this._counter=0,this._hasChanged=!1;const F={onWillAddFirstListener:()=>{R.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{R.removeObserver(this)}};this.emitter=new ae(F),V&&V.add(this.emitter)}beginUpdate(R){this._counter++}handlePossibleChange(R){}handleChange(R,V){this._hasChanged=!0}endUpdate(R){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function D(A,R){return new M(A,R).emitter.event}n.fromObservable=D;function O(A){return(R,V,F)=>{let T=0,N=!1;const B={beginUpdate(){T++},endUpdate(){T--,T===0&&(A.reportChanges(),N&&(N=!1,R.call(V)))},handlePossibleChange(){},handleChange(){N=!0}};A.addObserver(B),A.reportChanges();const $={dispose(){A.removeObserver(B)}};return F instanceof dt?F.add($):Array.isArray(F)&&F.push($),$}}n.fromObservableLight=O})(Be||(Be={}));const e0=class e0{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${e0._idPool++}`,e0.all.add(this)}start(e){this._stopWatch=new pm,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};e0.all=new Set,e0._idPool=0;let FP=e0,k$e=-1;const mT=class mT{constructor(e,t,i=(mT._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){var e;(e=this._stacks)==null||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;const[s,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(s);const l=new E$e(a,s);this._errorHandler(l)}return()=>{const s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[i,r]of this._stacks)(!e||t<r)&&(e=[i,r],t=r);return e}};mT._idPool=1;let BP=mT;class gH{static create(){const e=new Error;return new gH(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class E$e extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class L$e extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class ER{constructor(e){this.value=e}}const N$e=2;class ae{constructor(e){var t,i,r,s;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new BP((e==null?void 0:e.onListenerError)??$n,((i=this._options)==null?void 0:i.leakWarningThreshold)??k$e):void 0,this._perfMon=(r=this._options)!=null&&r._profName?new FP(this._options._profName):void 0,this._deliveryQueue=(s=this._options)==null?void 0:s.deliveryQueue}dispose(){var e,t,i,r;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(i=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||i.call(t),(r=this._leakageMon)==null||r.dispose())}get event(){return this._event??(this._event=(e,t,i)=>{var a,l,c,u,d;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const h=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(h);const f=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],g=new L$e(`${h}. HINT: Stack shows most frequent listener (${f[1]}-times)`,f[0]);return(((a=this._options)==null?void 0:a.onListenerError)||$n)(g),ke.None}if(this._disposed)return ke.None;t&&(e=e.bind(t));const r=new ER(e);let s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(r.stack=gH.create(),s=this._leakageMon.check(r.stack,this._size+1)),this._listeners?this._listeners instanceof ER?(this._deliveryQueue??(this._deliveryQueue=new zue),this._listeners=[this._listeners,r]):this._listeners.push(r):((c=(l=this._options)==null?void 0:l.onWillAddFirstListener)==null||c.call(l,this),this._listeners=r,(d=(u=this._options)==null?void 0:u.onDidAddFirstListener)==null||d.call(u,this)),this._size++;const o=Pt(()=>{s==null||s(),this._removeListener(r)});return i instanceof dt?i.add(o):Array.isArray(i)&&i.push(o),o}),this._event}_removeListener(e){var s,o,a,l;if((o=(s=this._options)==null?void 0:s.onWillRemoveListener)==null||o.call(s,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(l=(a=this._options)==null?void 0:a.onDidRemoveLastListener)==null||l.call(a,this),this._size=0;return}const t=this._listeners,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;const r=this._deliveryQueue.current===this;if(this._size*N$e<=t.length){let c=0;for(let u=0;u<t.length;u++)t[u]?t[c++]=t[u]:r&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=c}}_deliver(e,t){var r;if(!e)return;const i=((r=this._options)==null?void 0:r.onListenerError)||$n;if(!i){e.value(t);return}try{e.value(t)}catch(s){i(s)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,r,s;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(i=this._perfMon)==null||i.stop()),(r=this._perfMon)==null||r.start(this._size),this._listeners)if(this._listeners instanceof ER)this._deliver(this._listeners,e);else{const o=this._deliveryQueue;o.enqueue(this,e,this._listeners.length),this._deliverQueue(o)}(s=this._perfMon)==null||s.stop()}hasListeners(){return this._size>0}}const T$e=()=>new zue;class zue{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class Gy extends ae{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Eo,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Wue extends Gy{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class I$e extends ae{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e==null?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class D$e{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new ae({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),Pt(L1(()=>{this.hasListeners&&this.unhook(t);const r=this.events.indexOf(t);this.events.splice(r,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){var t;(t=e.listener)==null||t.dispose(),e.listener=null}dispose(){var e;this.emitter.dispose();for(const t of this.events)(e=t.listener)==null||e.dispose();this.events=[]}}class cS{constructor(){this.data=[]}wrapEvent(e,t,i){return(r,s,o)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>r.call(s,a)):r.call(s,a);return}const c=l;if(!c){r.call(s,t(i,a));return}c.items??(c.items=[]),c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??(c.reducedResult=i?c.items.reduce(t,i):c.items.reduce(t)),r.call(s,c.reducedResult)})},void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const i=e();return this.data.pop(),t.buffers.forEach(r=>r()),i}}class EG{constructor(){this.listening=!1,this.inputEvent=Be.None,this.inputEventListener=ke.None,this.emitter=new ae({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const $ue=Object.freeze(function(n,e){const t=setTimeout(n.bind(e),0);return{dispose(){clearTimeout(t)}}});var wl;(function(n){function e(t){return t===n.None||t===n.Cancelled||t instanceof fE?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}n.isCancellationToken=e,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Be.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:$ue})})(wl||(wl={}));class fE{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?$ue:(this._emitter||(this._emitter=new ae),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class pb{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new fE),this._token}cancel(){this._token?this._token instanceof fE&&this._token.cancel():this._token=wl.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)==null||t.dispose(),this._token?this._token instanceof fE&&this._token.dispose():this._token=wl.None}}class pH{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const gE=new pH,HP=new pH,VP=new pH,Uue=new Array(230),M$e=Object.create(null),R$e=Object.create(null),mH=[];for(let n=0;n<=193;n++)mH[n]=-1;(function(){const n="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",n,n],[1,1,"Hyper",0,n,0,n,n,n],[1,2,"Super",0,n,0,n,n,n],[1,3,"Fn",0,n,0,n,n,n],[1,4,"FnLock",0,n,0,n,n,n],[1,5,"Suspend",0,n,0,n,n,n],[1,6,"Resume",0,n,0,n,n,n],[1,7,"Turbo",0,n,0,n,n,n],[1,8,"Sleep",0,n,0,"VK_SLEEP",n,n],[1,9,"WakeUp",0,n,0,n,n,n],[0,10,"KeyA",31,"A",65,"VK_A",n,n],[0,11,"KeyB",32,"B",66,"VK_B",n,n],[0,12,"KeyC",33,"C",67,"VK_C",n,n],[0,13,"KeyD",34,"D",68,"VK_D",n,n],[0,14,"KeyE",35,"E",69,"VK_E",n,n],[0,15,"KeyF",36,"F",70,"VK_F",n,n],[0,16,"KeyG",37,"G",71,"VK_G",n,n],[0,17,"KeyH",38,"H",72,"VK_H",n,n],[0,18,"KeyI",39,"I",73,"VK_I",n,n],[0,19,"KeyJ",40,"J",74,"VK_J",n,n],[0,20,"KeyK",41,"K",75,"VK_K",n,n],[0,21,"KeyL",42,"L",76,"VK_L",n,n],[0,22,"KeyM",43,"M",77,"VK_M",n,n],[0,23,"KeyN",44,"N",78,"VK_N",n,n],[0,24,"KeyO",45,"O",79,"VK_O",n,n],[0,25,"KeyP",46,"P",80,"VK_P",n,n],[0,26,"KeyQ",47,"Q",81,"VK_Q",n,n],[0,27,"KeyR",48,"R",82,"VK_R",n,n],[0,28,"KeyS",49,"S",83,"VK_S",n,n],[0,29,"KeyT",50,"T",84,"VK_T",n,n],[0,30,"KeyU",51,"U",85,"VK_U",n,n],[0,31,"KeyV",52,"V",86,"VK_V",n,n],[0,32,"KeyW",53,"W",87,"VK_W",n,n],[0,33,"KeyX",54,"X",88,"VK_X",n,n],[0,34,"KeyY",55,"Y",89,"VK_Y",n,n],[0,35,"KeyZ",56,"Z",90,"VK_Z",n,n],[0,36,"Digit1",22,"1",49,"VK_1",n,n],[0,37,"Digit2",23,"2",50,"VK_2",n,n],[0,38,"Digit3",24,"3",51,"VK_3",n,n],[0,39,"Digit4",25,"4",52,"VK_4",n,n],[0,40,"Digit5",26,"5",53,"VK_5",n,n],[0,41,"Digit6",27,"6",54,"VK_6",n,n],[0,42,"Digit7",28,"7",55,"VK_7",n,n],[0,43,"Digit8",29,"8",56,"VK_8",n,n],[0,44,"Digit9",30,"9",57,"VK_9",n,n],[0,45,"Digit0",21,"0",48,"VK_0",n,n],[1,46,"Enter",3,"Enter",13,"VK_RETURN",n,n],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",n,n],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",n,n],[1,49,"Tab",2,"Tab",9,"VK_TAB",n,n],[1,50,"Space",10,"Space",32,"VK_SPACE",n,n],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,n,0,n,n,n],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",n,n],[1,64,"F1",59,"F1",112,"VK_F1",n,n],[1,65,"F2",60,"F2",113,"VK_F2",n,n],[1,66,"F3",61,"F3",114,"VK_F3",n,n],[1,67,"F4",62,"F4",115,"VK_F4",n,n],[1,68,"F5",63,"F5",116,"VK_F5",n,n],[1,69,"F6",64,"F6",117,"VK_F6",n,n],[1,70,"F7",65,"F7",118,"VK_F7",n,n],[1,71,"F8",66,"F8",119,"VK_F8",n,n],[1,72,"F9",67,"F9",120,"VK_F9",n,n],[1,73,"F10",68,"F10",121,"VK_F10",n,n],[1,74,"F11",69,"F11",122,"VK_F11",n,n],[1,75,"F12",70,"F12",123,"VK_F12",n,n],[1,76,"PrintScreen",0,n,0,n,n,n],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",n,n],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",n,n],[1,79,"Insert",19,"Insert",45,"VK_INSERT",n,n],[1,80,"Home",14,"Home",36,"VK_HOME",n,n],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",n,n],[1,82,"Delete",20,"Delete",46,"VK_DELETE",n,n],[1,83,"End",13,"End",35,"VK_END",n,n],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",n,n],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",n],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",n],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",n],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",n],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",n,n],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",n,n],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",n,n],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",n,n],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",n,n],[1,94,"NumpadEnter",3,n,0,n,n,n],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",n,n],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",n,n],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",n,n],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",n,n],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",n,n],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",n,n],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",n,n],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",n,n],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",n,n],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",n,n],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",n,n],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",n,n],[1,107,"ContextMenu",58,"ContextMenu",93,n,n,n],[1,108,"Power",0,n,0,n,n,n],[1,109,"NumpadEqual",0,n,0,n,n,n],[1,110,"F13",71,"F13",124,"VK_F13",n,n],[1,111,"F14",72,"F14",125,"VK_F14",n,n],[1,112,"F15",73,"F15",126,"VK_F15",n,n],[1,113,"F16",74,"F16",127,"VK_F16",n,n],[1,114,"F17",75,"F17",128,"VK_F17",n,n],[1,115,"F18",76,"F18",129,"VK_F18",n,n],[1,116,"F19",77,"F19",130,"VK_F19",n,n],[1,117,"F20",78,"F20",131,"VK_F20",n,n],[1,118,"F21",79,"F21",132,"VK_F21",n,n],[1,119,"F22",80,"F22",133,"VK_F22",n,n],[1,120,"F23",81,"F23",134,"VK_F23",n,n],[1,121,"F24",82,"F24",135,"VK_F24",n,n],[1,122,"Open",0,n,0,n,n,n],[1,123,"Help",0,n,0,n,n,n],[1,124,"Select",0,n,0,n,n,n],[1,125,"Again",0,n,0,n,n,n],[1,126,"Undo",0,n,0,n,n,n],[1,127,"Cut",0,n,0,n,n,n],[1,128,"Copy",0,n,0,n,n,n],[1,129,"Paste",0,n,0,n,n,n],[1,130,"Find",0,n,0,n,n,n],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",n,n],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",n,n],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",n,n],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",n,n],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",n,n],[1,136,"KanaMode",0,n,0,n,n,n],[0,137,"IntlYen",0,n,0,n,n,n],[1,138,"Convert",0,n,0,n,n,n],[1,139,"NonConvert",0,n,0,n,n,n],[1,140,"Lang1",0,n,0,n,n,n],[1,141,"Lang2",0,n,0,n,n,n],[1,142,"Lang3",0,n,0,n,n,n],[1,143,"Lang4",0,n,0,n,n,n],[1,144,"Lang5",0,n,0,n,n,n],[1,145,"Abort",0,n,0,n,n,n],[1,146,"Props",0,n,0,n,n,n],[1,147,"NumpadParenLeft",0,n,0,n,n,n],[1,148,"NumpadParenRight",0,n,0,n,n,n],[1,149,"NumpadBackspace",0,n,0,n,n,n],[1,150,"NumpadMemoryStore",0,n,0,n,n,n],[1,151,"NumpadMemoryRecall",0,n,0,n,n,n],[1,152,"NumpadMemoryClear",0,n,0,n,n,n],[1,153,"NumpadMemoryAdd",0,n,0,n,n,n],[1,154,"NumpadMemorySubtract",0,n,0,n,n,n],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",n,n],[1,156,"NumpadClearEntry",0,n,0,n,n,n],[1,0,n,5,"Ctrl",17,"VK_CONTROL",n,n],[1,0,n,4,"Shift",16,"VK_SHIFT",n,n],[1,0,n,6,"Alt",18,"VK_MENU",n,n],[1,0,n,57,"Meta",91,"VK_COMMAND",n,n],[1,157,"ControlLeft",5,n,0,"VK_LCONTROL",n,n],[1,158,"ShiftLeft",4,n,0,"VK_LSHIFT",n,n],[1,159,"AltLeft",6,n,0,"VK_LMENU",n,n],[1,160,"MetaLeft",57,n,0,"VK_LWIN",n,n],[1,161,"ControlRight",5,n,0,"VK_RCONTROL",n,n],[1,162,"ShiftRight",4,n,0,"VK_RSHIFT",n,n],[1,163,"AltRight",6,n,0,"VK_RMENU",n,n],[1,164,"MetaRight",57,n,0,"VK_RWIN",n,n],[1,165,"BrightnessUp",0,n,0,n,n,n],[1,166,"BrightnessDown",0,n,0,n,n,n],[1,167,"MediaPlay",0,n,0,n,n,n],[1,168,"MediaRecord",0,n,0,n,n,n],[1,169,"MediaFastForward",0,n,0,n,n,n],[1,170,"MediaRewind",0,n,0,n,n,n],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",n,n],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",n,n],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",n,n],[1,174,"Eject",0,n,0,n,n,n],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",n,n],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",n,n],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",n,n],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",n,n],[1,179,"LaunchApp1",0,n,0,"VK_MEDIA_LAUNCH_APP1",n,n],[1,180,"SelectTask",0,n,0,n,n,n],[1,181,"LaunchScreenSaver",0,n,0,n,n,n],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",n,n],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",n,n],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",n,n],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",n,n],[1,186,"BrowserStop",0,n,0,"VK_BROWSER_STOP",n,n],[1,187,"BrowserRefresh",0,n,0,"VK_BROWSER_REFRESH",n,n],[1,188,"BrowserFavorites",0,n,0,"VK_BROWSER_FAVORITES",n,n],[1,189,"ZoomToggle",0,n,0,n,n,n],[1,190,"MailReply",0,n,0,n,n,n],[1,191,"MailForward",0,n,0,n,n,n],[1,192,"MailSend",0,n,0,n,n,n],[1,0,n,114,"KeyInComposition",229,n,n,n],[1,0,n,116,"ABNT_C2",194,"VK_ABNT_C2",n,n],[1,0,n,96,"OEM_8",223,"VK_OEM_8",n,n],[1,0,n,0,n,0,"VK_KANA",n,n],[1,0,n,0,n,0,"VK_HANGUL",n,n],[1,0,n,0,n,0,"VK_JUNJA",n,n],[1,0,n,0,n,0,"VK_FINAL",n,n],[1,0,n,0,n,0,"VK_HANJA",n,n],[1,0,n,0,n,0,"VK_KANJI",n,n],[1,0,n,0,n,0,"VK_CONVERT",n,n],[1,0,n,0,n,0,"VK_NONCONVERT",n,n],[1,0,n,0,n,0,"VK_ACCEPT",n,n],[1,0,n,0,n,0,"VK_MODECHANGE",n,n],[1,0,n,0,n,0,"VK_SELECT",n,n],[1,0,n,0,n,0,"VK_PRINT",n,n],[1,0,n,0,n,0,"VK_EXECUTE",n,n],[1,0,n,0,n,0,"VK_SNAPSHOT",n,n],[1,0,n,0,n,0,"VK_HELP",n,n],[1,0,n,0,n,0,"VK_APPS",n,n],[1,0,n,0,n,0,"VK_PROCESSKEY",n,n],[1,0,n,0,n,0,"VK_PACKET",n,n],[1,0,n,0,n,0,"VK_DBE_SBCSCHAR",n,n],[1,0,n,0,n,0,"VK_DBE_DBCSCHAR",n,n],[1,0,n,0,n,0,"VK_ATTN",n,n],[1,0,n,0,n,0,"VK_CRSEL",n,n],[1,0,n,0,n,0,"VK_EXSEL",n,n],[1,0,n,0,n,0,"VK_EREOF",n,n],[1,0,n,0,n,0,"VK_PLAY",n,n],[1,0,n,0,n,0,"VK_ZOOM",n,n],[1,0,n,0,n,0,"VK_NONAME",n,n],[1,0,n,0,n,0,"VK_PA1",n,n],[1,0,n,0,n,0,"VK_OEM_CLEAR",n,n]],t=[],i=[];for(const r of e){const[s,o,a,l,c,u,d,h,f]=r;if(i[o]||(i[o]=!0,M$e[a]=o,R$e[a.toLowerCase()]=o,s&&(mH[o]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);gE.define(l,c),HP.define(l,h||c),VP.define(l,f||h||c)}u&&(Uue[u]=l)}})();var rd;(function(n){function e(a){return gE.keyCodeToStr(a)}n.toString=e;function t(a){return gE.strToKeyCode(a)}n.fromString=t;function i(a){return HP.keyCodeToStr(a)}n.toUserSettingsUS=i;function r(a){return VP.keyCodeToStr(a)}n.toUserSettingsGeneral=r;function s(a){return HP.strToKeyCode(a)||VP.strToKeyCode(a)}n.fromUserSettings=s;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return gE.keyCodeToStr(a)}n.toElectronAccelerator=o})(rd||(rd={}));function A$e(n,e){const t=(e&65535)<<16>>>0;return(n|t)>>>0}var LG={};let T0;const LR=globalThis.vscode;var GJ;if(typeof LR<"u"&&typeof LR.process<"u"){const n=LR.process;T0={get platform(){return n.platform},get arch(){return n.arch},get env(){return n.env},cwd(){return n.cwd()}}}else typeof process<"u"&&typeof((GJ=process==null?void 0:process.versions)==null?void 0:GJ.node)=="string"?T0={get platform(){return process.platform},get arch(){return process.arch},get env(){return LG},cwd(){return LG.VSCODE_CWD||process.cwd()}}:T0={get platform(){return Ao?"win32":hn?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const ML=T0.cwd,zP=T0.env,O$e=T0.platform,P$e=65,F$e=97,B$e=90,H$e=122,ff=46,ns=47,zo=92,sh=58,V$e=63;class jue extends Error{constructor(e,t,i){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const s=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${s} ${r} of type ${t}`;o+=`. Received type ${typeof i}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function z$e(n,e){if(n===null||typeof n!="object")throw new jue(e,"Object",n)}function ur(n,e){if(typeof n!="string")throw new jue(e,"string",n)}const Gd=O$e==="win32";function Nn(n){return n===ns||n===zo}function WP(n){return n===ns}function oh(n){return n>=P$e&&n<=B$e||n>=F$e&&n<=H$e}function RL(n,e,t,i){let r="",s=0,o=-1,a=0,l=0;for(let c=0;c<=n.length;++c){if(c<n.length)l=n.charCodeAt(c);else{if(i(l))break;l=ns}if(i(l)){if(!(o===c-1||a===1))if(a===2){if(r.length<2||s!==2||r.charCodeAt(r.length-1)!==ff||r.charCodeAt(r.length-2)!==ff){if(r.length>2){const u=r.lastIndexOf(t);u===-1?(r="",s=0):(r=r.slice(0,u),s=r.length-1-r.lastIndexOf(t)),o=c,a=0;continue}else if(r.length!==0){r="",s=0,o=c,a=0;continue}}e&&(r+=r.length>0?`${t}..`:"..",s=2)}else r.length>0?r+=`${t}${n.slice(o+1,c)}`:r=n.slice(o+1,c),s=c-o-1;o=c,a=0}else l===ff&&a!==-1?++a:a=-1}return r}function W$e(n){return n?`${n[0]==="."?"":"."}${n}`:""}function Kue(n,e){z$e(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${W$e(e.ext)}`;return t?t===e.root?`${t}${i}`:`${t}${n}${i}`:i}const ro={resolve(...n){let e="",t="",i=!1;for(let r=n.length-1;r>=-1;r--){let s;if(r>=0){if(s=n[r],ur(s,`paths[${r}]`),s.length===0)continue}else e.length===0?s=ML():(s=zP[`=${e}`]||ML(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===zo)&&(s=`${e}\\`));const o=s.length;let a=0,l="",c=!1;const u=s.charCodeAt(0);if(o===1)Nn(u)&&(a=1,c=!0);else if(Nn(u))if(c=!0,Nn(s.charCodeAt(1))){let d=2,h=d;for(;d<o&&!Nn(s.charCodeAt(d));)d++;if(d<o&&d!==h){const f=s.slice(h,d);for(h=d;d<o&&Nn(s.charCodeAt(d));)d++;if(d<o&&d!==h){for(h=d;d<o&&!Nn(s.charCodeAt(d));)d++;(d===o||d!==h)&&(l=`\\\\${f}\\${s.slice(h,d)}`,a=d)}}}else a=1;else oh(u)&&s.charCodeAt(1)===sh&&(l=s.slice(0,2),a=2,o>2&&Nn(s.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=RL(t,!i,"\\",Nn),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(n){ur(n,"path");const e=n.length;if(e===0)return".";let t=0,i,r=!1;const s=n.charCodeAt(0);if(e===1)return WP(s)?"\\":n;if(Nn(s))if(r=!0,Nn(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Nn(n.charCodeAt(a));)a++;if(a<e&&a!==l){const c=n.slice(l,a);for(l=a;a<e&&Nn(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Nn(n.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${n.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${n.slice(l,a)}`,t=a)}}}else t=1;else oh(s)&&n.charCodeAt(1)===sh&&(i=n.slice(0,2),t=2,e>2&&Nn(n.charCodeAt(2))&&(r=!0,t=3));let o=t<e?RL(n.slice(t),!r,"\\",Nn):"";return o.length===0&&!r&&(o="."),o.length>0&&Nn(n.charCodeAt(e-1))&&(o+="\\"),i===void 0?r?`\\${o}`:o:r?`${i}\\${o}`:`${i}${o}`},isAbsolute(n){ur(n,"path");const e=n.length;if(e===0)return!1;const t=n.charCodeAt(0);return Nn(t)||e>2&&oh(t)&&n.charCodeAt(1)===sh&&Nn(n.charCodeAt(2))},join(...n){if(n.length===0)return".";let e,t;for(let s=0;s<n.length;++s){const o=n[s];ur(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let i=!0,r=0;if(typeof t=="string"&&Nn(t.charCodeAt(0))){++r;const s=t.length;s>1&&Nn(t.charCodeAt(1))&&(++r,s>2&&(Nn(t.charCodeAt(2))?++r:i=!1))}if(i){for(;r<e.length&&Nn(e.charCodeAt(r));)r++;r>=2&&(e=`\\${e.slice(r)}`)}return ro.normalize(e)},relative(n,e){if(ur(n,"from"),ur(e,"to"),n===e)return"";const t=ro.resolve(n),i=ro.resolve(e);if(t===i||(n=t.toLowerCase(),e=i.toLowerCase(),n===e))return"";let r=0;for(;r<n.length&&n.charCodeAt(r)===zo;)r++;let s=n.length;for(;s-1>r&&n.charCodeAt(s-1)===zo;)s--;const o=s-r;let a=0;for(;a<e.length&&e.charCodeAt(a)===zo;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===zo;)l--;const c=l-a,u=o<c?o:c;let d=-1,h=0;for(;h<u;h++){const g=n.charCodeAt(r+h);if(g!==e.charCodeAt(a+h))break;g===zo&&(d=h)}if(h!==u){if(d===-1)return i}else{if(c>u){if(e.charCodeAt(a+h)===zo)return i.slice(a+h+1);if(h===2)return i.slice(a+h)}o>u&&(n.charCodeAt(r+h)===zo?d=h:h===2&&(d=3)),d===-1&&(d=0)}let f="";for(h=r+d+1;h<=s;++h)(h===s||n.charCodeAt(h)===zo)&&(f+=f.length===0?"..":"\\..");return a+=d,f.length>0?`${f}${i.slice(a,l)}`:(i.charCodeAt(a)===zo&&++a,i.slice(a,l))},toNamespacedPath(n){if(typeof n!="string"||n.length===0)return n;const e=ro.resolve(n);if(e.length<=2)return n;if(e.charCodeAt(0)===zo){if(e.charCodeAt(1)===zo){const t=e.charCodeAt(2);if(t!==V$e&&t!==ff)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(oh(e.charCodeAt(0))&&e.charCodeAt(1)===sh&&e.charCodeAt(2)===zo)return`\\\\?\\${e}`;return n},dirname(n){ur(n,"path");const e=n.length;if(e===0)return".";let t=-1,i=0;const r=n.charCodeAt(0);if(e===1)return Nn(r)?n:".";if(Nn(r)){if(t=i=1,Nn(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Nn(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Nn(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Nn(n.charCodeAt(a));)a++;if(a===e)return n;a!==l&&(t=i=a+1)}}}}else oh(r)&&n.charCodeAt(1)===sh&&(t=e>2&&Nn(n.charCodeAt(2))?3:2,i=t);let s=-1,o=!0;for(let a=e-1;a>=i;--a)if(Nn(n.charCodeAt(a))){if(!o){s=a;break}}else o=!1;if(s===-1){if(t===-1)return".";s=t}return n.slice(0,s)},basename(n,e){e!==void 0&&ur(e,"suffix"),ur(n,"path");let t=0,i=-1,r=!0,s;if(n.length>=2&&oh(n.charCodeAt(0))&&n.charCodeAt(1)===sh&&(t=2),e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let o=e.length-1,a=-1;for(s=n.length-1;s>=t;--s){const l=n.charCodeAt(s);if(Nn(l)){if(!r){t=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(s=n.length-1;s>=t;--s)if(Nn(n.charCodeAt(s))){if(!r){t=s+1;break}}else i===-1&&(r=!1,i=s+1);return i===-1?"":n.slice(t,i)},extname(n){ur(n,"path");let e=0,t=-1,i=0,r=-1,s=!0,o=0;n.length>=2&&n.charCodeAt(1)===sh&&oh(n.charCodeAt(0))&&(e=i=2);for(let a=n.length-1;a>=e;--a){const l=n.charCodeAt(a);if(Nn(l)){if(!s){i=a+1;break}continue}r===-1&&(s=!1,r=a+1),l===ff?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||r===-1||o===0||o===1&&t===r-1&&t===i+1?"":n.slice(t,r)},format:Kue.bind(null,"\\"),parse(n){ur(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.length;let i=0,r=n.charCodeAt(0);if(t===1)return Nn(r)?(e.root=e.dir=n,e):(e.base=e.name=n,e);if(Nn(r)){if(i=1,Nn(n.charCodeAt(1))){let d=2,h=d;for(;d<t&&!Nn(n.charCodeAt(d));)d++;if(d<t&&d!==h){for(h=d;d<t&&Nn(n.charCodeAt(d));)d++;if(d<t&&d!==h){for(h=d;d<t&&!Nn(n.charCodeAt(d));)d++;d===t?i=d:d!==h&&(i=d+1)}}}}else if(oh(r)&&n.charCodeAt(1)===sh){if(t<=2)return e.root=e.dir=n,e;if(i=2,Nn(n.charCodeAt(2))){if(t===3)return e.root=e.dir=n,e;i=3}}i>0&&(e.root=n.slice(0,i));let s=-1,o=i,a=-1,l=!0,c=n.length-1,u=0;for(;c>=i;--c){if(r=n.charCodeAt(c),Nn(r)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),r===ff?s===-1?s=c:u!==1&&(u=1):s!==-1&&(u=-1)}return a!==-1&&(s===-1||u===0||u===1&&s===a-1&&s===o+1?e.base=e.name=n.slice(o,a):(e.name=n.slice(o,s),e.base=n.slice(o,a),e.ext=n.slice(s,a))),o>0&&o!==i?e.dir=n.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},$$e=(()=>{if(Gd){const n=/\\/g;return()=>{const e=ML().replace(n,"/");return e.slice(e.indexOf("/"))}}return()=>ML()})(),Ai={resolve(...n){let e="",t=!1;for(let i=n.length-1;i>=-1&&!t;i--){const r=i>=0?n[i]:$$e();ur(r,`paths[${i}]`),r.length!==0&&(e=`${r}/${e}`,t=r.charCodeAt(0)===ns)}return e=RL(e,!t,"/",WP),t?`/${e}`:e.length>0?e:"."},normalize(n){if(ur(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===ns,t=n.charCodeAt(n.length-1)===ns;return n=RL(n,!e,"/",WP),n.length===0?e?"/":t?"./":".":(t&&(n+="/"),e?`/${n}`:n)},isAbsolute(n){return ur(n,"path"),n.length>0&&n.charCodeAt(0)===ns},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const i=n[t];ur(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":Ai.normalize(e)},relative(n,e){if(ur(n,"from"),ur(e,"to"),n===e||(n=Ai.resolve(n),e=Ai.resolve(e),n===e))return"";const t=1,i=n.length,r=i-t,s=1,o=e.length-s,a=r<o?r:o;let l=-1,c=0;for(;c<a;c++){const d=n.charCodeAt(t+c);if(d!==e.charCodeAt(s+c))break;d===ns&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(s+c)===ns)return e.slice(s+c+1);if(c===0)return e.slice(s+c)}else r>a&&(n.charCodeAt(t+c)===ns?l=c:c===0&&(l=0));let u="";for(c=t+l+1;c<=i;++c)(c===i||n.charCodeAt(c)===ns)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(s+l)}`},toNamespacedPath(n){return n},dirname(n){if(ur(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===ns;let t=-1,i=!0;for(let r=n.length-1;r>=1;--r)if(n.charCodeAt(r)===ns){if(!i){t=r;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":n.slice(0,t)},basename(n,e){e!==void 0&&ur(e,"ext"),ur(n,"path");let t=0,i=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let o=e.length-1,a=-1;for(s=n.length-1;s>=0;--s){const l=n.charCodeAt(s);if(l===ns){if(!r){t=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===ns){if(!r){t=s+1;break}}else i===-1&&(r=!1,i=s+1);return i===-1?"":n.slice(t,i)},extname(n){ur(n,"path");let e=-1,t=0,i=-1,r=!0,s=0;for(let o=n.length-1;o>=0;--o){const a=n.charCodeAt(o);if(a===ns){if(!r){t=o+1;break}continue}i===-1&&(r=!1,i=o+1),a===ff?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===t+1?"":n.slice(e,i)},format:Kue.bind(null,"/"),parse(n){ur(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.charCodeAt(0)===ns;let i;t?(e.root="/",i=1):i=0;let r=-1,s=0,o=-1,a=!0,l=n.length-1,c=0;for(;l>=i;--l){const u=n.charCodeAt(l);if(u===ns){if(!a){s=l+1;break}continue}o===-1&&(a=!1,o=l+1),u===ff?r===-1?r=l:c!==1&&(c=1):r!==-1&&(c=-1)}if(o!==-1){const u=s===0&&t?1:s;r===-1||c===0||c===1&&r===o-1&&r===s+1?e.base=e.name=n.slice(u,o):(e.name=n.slice(u,r),e.base=n.slice(u,o),e.ext=n.slice(r,o))}return s>0?e.dir=n.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Ai.win32=ro.win32=ro;Ai.posix=ro.posix=Ai;const que=Gd?ro.normalize:Ai.normalize,U$e=Gd?ro.join:Ai.join,j$e=Gd?ro.resolve:Ai.resolve,K$e=Gd?ro.relative:Ai.relative,q$e=Gd?ro.dirname:Ai.dirname,Gue=Gd?ro.basename:Ai.basename,G$e=Gd?ro.extname:Ai.extname,gf=Gd?ro.sep:Ai.sep,Y$e=/^\w[\w\d+.-]*$/,Z$e=/^\//,X$e=/^\/\//;function Q$e(n,e){if(!n.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${n.authority}", path: "${n.path}", query: "${n.query}", fragment: "${n.fragment}"}`);if(n.scheme&&!Y$e.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!Z$e.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(X$e.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function J$e(n,e){return!n&&!e?"file":n}function eUe(n,e){switch(n){case"https":case"http":case"file":e?e[0]!==Gl&&(e=Gl+e):e=Gl;break}return e}const Di="",Gl="/",tUe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Ut{static isUri(e){return e instanceof Ut?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,i,r,s,o=!1){typeof e=="object"?(this.scheme=e.scheme||Di,this.authority=e.authority||Di,this.path=e.path||Di,this.query=e.query||Di,this.fragment=e.fragment||Di):(this.scheme=J$e(e,o),this.authority=t||Di,this.path=eUe(this.scheme,i||Di),this.query=r||Di,this.fragment=s||Di,Q$e(this,o))}get fsPath(){return AL(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:r,query:s,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=Di),i===void 0?i=this.authority:i===null&&(i=Di),r===void 0?r=this.path:r===null&&(r=Di),s===void 0?s=this.query:s===null&&(s=Di),o===void 0?o=this.fragment:o===null&&(o=Di),t===this.scheme&&i===this.authority&&r===this.path&&s===this.query&&o===this.fragment?this:new Um(t,i,r,s,o)}static parse(e,t=!1){const i=tUe.exec(e);return i?new Um(i[2]||Di,Ux(i[4]||Di),Ux(i[5]||Di),Ux(i[7]||Di),Ux(i[9]||Di),t):new Um(Di,Di,Di,Di,Di)}static file(e){let t=Di;if(Ao&&(e=e.replace(/\\/g,Gl)),e[0]===Gl&&e[1]===Gl){const i=e.indexOf(Gl,2);i===-1?(t=e.substring(2),e=Gl):(t=e.substring(2,i),e=e.substring(i)||Gl)}return new Um("file",t,e,Di,Di)}static from(e,t){return new Um(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return Ao&&e.scheme==="file"?i=Ut.file(ro.join(AL(e,!0),...t)).path:i=Ai.join(e.path,...t),e.with({path:i})}toString(e=!1){return $P(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Ut)return e;{const t=new Um(e);return t._formatted=e.external??null,t._fsPath=e._sep===Yue?e.fsPath??null:null,t}}else return e}}const Yue=Ao?1:void 0;class Um extends Ut{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=AL(this,!1)),this._fsPath}toString(e=!1){return e?$P(this,!0):(this._formatted||(this._formatted=$P(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Yue),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const Zue={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function NG(n,e,t){let i,r=-1;for(let s=0;s<n.length;s++){const o=n.charCodeAt(s);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47||t&&o===91||t&&o===93||t&&o===58)r!==-1&&(i+=encodeURIComponent(n.substring(r,s)),r=-1),i!==void 0&&(i+=n.charAt(s));else{i===void 0&&(i=n.substr(0,s));const a=Zue[o];a!==void 0?(r!==-1&&(i+=encodeURIComponent(n.substring(r,s)),r=-1),i+=a):r===-1&&(r=s)}}return r!==-1&&(i+=encodeURIComponent(n.substring(r))),i!==void 0?i:n}function nUe(n){let e;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i===35||i===63?(e===void 0&&(e=n.substr(0,t)),e+=Zue[i]):e!==void 0&&(e+=n[t])}return e!==void 0?e:n}function AL(n,e){let t;return n.authority&&n.path.length>1&&n.scheme==="file"?t=`//${n.authority}${n.path}`:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?e?t=n.path.substr(1):t=n.path[1].toLowerCase()+n.path.substr(2):t=n.path,Ao&&(t=t.replace(/\//g,"\\")),t}function $P(n,e){const t=e?nUe:NG;let i="",{scheme:r,authority:s,path:o,query:a,fragment:l}=n;if(r&&(i+=r,i+=":"),(s||r==="file")&&(i+=Gl,i+=Gl),s){let c=s.indexOf("@");if(c!==-1){const u=s.substr(0,c);s=s.substr(c+1),c=u.lastIndexOf(":"),c===-1?i+=t(u,!1,!1):(i+=t(u.substr(0,c),!1,!1),i+=":",i+=t(u.substr(c+1),!1,!0)),i+="@"}s=s.toLowerCase(),c=s.lastIndexOf(":"),c===-1?i+=t(s,!1,!0):(i+=t(s.substr(0,c),!1,!0),i+=s.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}i+=t(o,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),l&&(i+="#",i+=e?l:NG(l,!1,!1)),i}function Xue(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+Xue(n.substr(3)):n}}const TG=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Ux(n){return n.match(TG)?n.replace(TG,e=>Xue(e)):n}class de{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new de(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return de.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return de.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return de.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,r=t.lineNumber|0;if(i===r){const s=e.column|0,o=t.column|0;return s-o}return i-r}clone(){return new de(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new de(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}let te=class _r{constructor(e,t,i,r){e>i||e===i&&t>r?(this.startLineNumber=i,this.startColumn=r,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=r)}isEmpty(){return _r.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return _r.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return _r.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return _r.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return _r.plusRange(this,e)}static plusRange(e,t){let i,r,s,o;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,r=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,r=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,r=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,o=e.endColumn),new _r(i,r,s,o)}intersectRanges(e){return _r.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,u=t.endColumn;return i<a?(i=a,r=l):i===a&&(r=Math.max(r,l)),s>c?(s=c,o=u):s===c&&(o=Math.min(o,u)),i>s||i===s&&r>o?null:new _r(i,r,s,o)}equalsRange(e){return _r.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return _r.getEndPosition(this)}static getEndPosition(e){return new de(e.endLineNumber,e.endColumn)}getStartPosition(){return _r.getStartPosition(this)}static getStartPosition(e){return new de(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new _r(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new _r(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return _r.collapseToStart(this)}static collapseToStart(e){return new _r(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return _r.collapseToEnd(this)}static collapseToEnd(e){return new _r(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new _r(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new _r(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new _r(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,o=t.startLineNumber|0;if(s===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,u=t.endLineNumber|0;if(c===u){const d=e.endColumn|0,h=t.endColumn|0;return d-h}return c-u}return a-l}return s-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};class an extends te{constructor(e,t,i,r){super(e,t,i,r),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=r}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return an.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new an(this.startLineNumber,this.startColumn,e,t):new an(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new de(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new de(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new an(e,t,this.endLineNumber,this.endColumn):new an(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new an(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new an(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new an(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new an(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,r,s){return s===0?new an(e,t,i,r):new an(i,r,e,t)}}const UP=Object.create(null);function I(n,e){if(aa(e)){const t=UP[e];if(t===void 0)throw new Error(`${n} references an unknown codicon: ${e}`);e=t}return UP[n]=e,{id:n}}function Que(){return UP}const iUe={add:I("add",6e4),plus:I("plus",6e4),gistNew:I("gist-new",6e4),repoCreate:I("repo-create",6e4),lightbulb:I("lightbulb",60001),lightBulb:I("light-bulb",60001),repo:I("repo",60002),repoDelete:I("repo-delete",60002),gistFork:I("gist-fork",60003),repoForked:I("repo-forked",60003),gitPullRequest:I("git-pull-request",60004),gitPullRequestAbandoned:I("git-pull-request-abandoned",60004),recordKeys:I("record-keys",60005),keyboard:I("keyboard",60005),tag:I("tag",60006),gitPullRequestLabel:I("git-pull-request-label",60006),tagAdd:I("tag-add",60006),tagRemove:I("tag-remove",60006),person:I("person",60007),personFollow:I("person-follow",60007),personOutline:I("person-outline",60007),personFilled:I("person-filled",60007),gitBranch:I("git-branch",60008),gitBranchCreate:I("git-branch-create",60008),gitBranchDelete:I("git-branch-delete",60008),sourceControl:I("source-control",60008),mirror:I("mirror",60009),mirrorPublic:I("mirror-public",60009),star:I("star",60010),starAdd:I("star-add",60010),starDelete:I("star-delete",60010),starEmpty:I("star-empty",60010),comment:I("comment",60011),commentAdd:I("comment-add",60011),alert:I("alert",60012),warning:I("warning",60012),search:I("search",60013),searchSave:I("search-save",60013),logOut:I("log-out",60014),signOut:I("sign-out",60014),logIn:I("log-in",60015),signIn:I("sign-in",60015),eye:I("eye",60016),eyeUnwatch:I("eye-unwatch",60016),eyeWatch:I("eye-watch",60016),circleFilled:I("circle-filled",60017),primitiveDot:I("primitive-dot",60017),closeDirty:I("close-dirty",60017),debugBreakpoint:I("debug-breakpoint",60017),debugBreakpointDisabled:I("debug-breakpoint-disabled",60017),debugHint:I("debug-hint",60017),terminalDecorationSuccess:I("terminal-decoration-success",60017),primitiveSquare:I("primitive-square",60018),edit:I("edit",60019),pencil:I("pencil",60019),info:I("info",60020),issueOpened:I("issue-opened",60020),gistPrivate:I("gist-private",60021),gitForkPrivate:I("git-fork-private",60021),lock:I("lock",60021),mirrorPrivate:I("mirror-private",60021),close:I("close",60022),removeClose:I("remove-close",60022),x:I("x",60022),repoSync:I("repo-sync",60023),sync:I("sync",60023),clone:I("clone",60024),desktopDownload:I("desktop-download",60024),beaker:I("beaker",60025),microscope:I("microscope",60025),vm:I("vm",60026),deviceDesktop:I("device-desktop",60026),file:I("file",60027),fileText:I("file-text",60027),more:I("more",60028),ellipsis:I("ellipsis",60028),kebabHorizontal:I("kebab-horizontal",60028),mailReply:I("mail-reply",60029),reply:I("reply",60029),organization:I("organization",60030),organizationFilled:I("organization-filled",60030),organizationOutline:I("organization-outline",60030),newFile:I("new-file",60031),fileAdd:I("file-add",60031),newFolder:I("new-folder",60032),fileDirectoryCreate:I("file-directory-create",60032),trash:I("trash",60033),trashcan:I("trashcan",60033),history:I("history",60034),clock:I("clock",60034),folder:I("folder",60035),fileDirectory:I("file-directory",60035),symbolFolder:I("symbol-folder",60035),logoGithub:I("logo-github",60036),markGithub:I("mark-github",60036),github:I("github",60036),terminal:I("terminal",60037),console:I("console",60037),repl:I("repl",60037),zap:I("zap",60038),symbolEvent:I("symbol-event",60038),error:I("error",60039),stop:I("stop",60039),variable:I("variable",60040),symbolVariable:I("symbol-variable",60040),array:I("array",60042),symbolArray:I("symbol-array",60042),symbolModule:I("symbol-module",60043),symbolPackage:I("symbol-package",60043),symbolNamespace:I("symbol-namespace",60043),symbolObject:I("symbol-object",60043),symbolMethod:I("symbol-method",60044),symbolFunction:I("symbol-function",60044),symbolConstructor:I("symbol-constructor",60044),symbolBoolean:I("symbol-boolean",60047),symbolNull:I("symbol-null",60047),symbolNumeric:I("symbol-numeric",60048),symbolNumber:I("symbol-number",60048),symbolStructure:I("symbol-structure",60049),symbolStruct:I("symbol-struct",60049),symbolParameter:I("symbol-parameter",60050),symbolTypeParameter:I("symbol-type-parameter",60050),symbolKey:I("symbol-key",60051),symbolText:I("symbol-text",60051),symbolReference:I("symbol-reference",60052),goToFile:I("go-to-file",60052),symbolEnum:I("symbol-enum",60053),symbolValue:I("symbol-value",60053),symbolRuler:I("symbol-ruler",60054),symbolUnit:I("symbol-unit",60054),activateBreakpoints:I("activate-breakpoints",60055),archive:I("archive",60056),arrowBoth:I("arrow-both",60057),arrowDown:I("arrow-down",60058),arrowLeft:I("arrow-left",60059),arrowRight:I("arrow-right",60060),arrowSmallDown:I("arrow-small-down",60061),arrowSmallLeft:I("arrow-small-left",60062),arrowSmallRight:I("arrow-small-right",60063),arrowSmallUp:I("arrow-small-up",60064),arrowUp:I("arrow-up",60065),bell:I("bell",60066),bold:I("bold",60067),book:I("book",60068),bookmark:I("bookmark",60069),debugBreakpointConditionalUnverified:I("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:I("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:I("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:I("debug-breakpoint-data-unverified",60072),debugBreakpointData:I("debug-breakpoint-data",60073),debugBreakpointDataDisabled:I("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:I("debug-breakpoint-log-unverified",60074),debugBreakpointLog:I("debug-breakpoint-log",60075),debugBreakpointLogDisabled:I("debug-breakpoint-log-disabled",60075),briefcase:I("briefcase",60076),broadcast:I("broadcast",60077),browser:I("browser",60078),bug:I("bug",60079),calendar:I("calendar",60080),caseSensitive:I("case-sensitive",60081),check:I("check",60082),checklist:I("checklist",60083),chevronDown:I("chevron-down",60084),chevronLeft:I("chevron-left",60085),chevronRight:I("chevron-right",60086),chevronUp:I("chevron-up",60087),chromeClose:I("chrome-close",60088),chromeMaximize:I("chrome-maximize",60089),chromeMinimize:I("chrome-minimize",60090),chromeRestore:I("chrome-restore",60091),circleOutline:I("circle-outline",60092),circle:I("circle",60092),debugBreakpointUnverified:I("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:I("terminal-decoration-incomplete",60092),circleSlash:I("circle-slash",60093),circuitBoard:I("circuit-board",60094),clearAll:I("clear-all",60095),clippy:I("clippy",60096),closeAll:I("close-all",60097),cloudDownload:I("cloud-download",60098),cloudUpload:I("cloud-upload",60099),code:I("code",60100),collapseAll:I("collapse-all",60101),colorMode:I("color-mode",60102),commentDiscussion:I("comment-discussion",60103),creditCard:I("credit-card",60105),dash:I("dash",60108),dashboard:I("dashboard",60109),database:I("database",60110),debugContinue:I("debug-continue",60111),debugDisconnect:I("debug-disconnect",60112),debugPause:I("debug-pause",60113),debugRestart:I("debug-restart",60114),debugStart:I("debug-start",60115),debugStepInto:I("debug-step-into",60116),debugStepOut:I("debug-step-out",60117),debugStepOver:I("debug-step-over",60118),debugStop:I("debug-stop",60119),debug:I("debug",60120),deviceCameraVideo:I("device-camera-video",60121),deviceCamera:I("device-camera",60122),deviceMobile:I("device-mobile",60123),diffAdded:I("diff-added",60124),diffIgnored:I("diff-ignored",60125),diffModified:I("diff-modified",60126),diffRemoved:I("diff-removed",60127),diffRenamed:I("diff-renamed",60128),diff:I("diff",60129),diffSidebyside:I("diff-sidebyside",60129),discard:I("discard",60130),editorLayout:I("editor-layout",60131),emptyWindow:I("empty-window",60132),exclude:I("exclude",60133),extensions:I("extensions",60134),eyeClosed:I("eye-closed",60135),fileBinary:I("file-binary",60136),fileCode:I("file-code",60137),fileMedia:I("file-media",60138),filePdf:I("file-pdf",60139),fileSubmodule:I("file-submodule",60140),fileSymlinkDirectory:I("file-symlink-directory",60141),fileSymlinkFile:I("file-symlink-file",60142),fileZip:I("file-zip",60143),files:I("files",60144),filter:I("filter",60145),flame:I("flame",60146),foldDown:I("fold-down",60147),foldUp:I("fold-up",60148),fold:I("fold",60149),folderActive:I("folder-active",60150),folderOpened:I("folder-opened",60151),gear:I("gear",60152),gift:I("gift",60153),gistSecret:I("gist-secret",60154),gist:I("gist",60155),gitCommit:I("git-commit",60156),gitCompare:I("git-compare",60157),compareChanges:I("compare-changes",60157),gitMerge:I("git-merge",60158),githubAction:I("github-action",60159),githubAlt:I("github-alt",60160),globe:I("globe",60161),grabber:I("grabber",60162),graph:I("graph",60163),gripper:I("gripper",60164),heart:I("heart",60165),home:I("home",60166),horizontalRule:I("horizontal-rule",60167),hubot:I("hubot",60168),inbox:I("inbox",60169),issueReopened:I("issue-reopened",60171),issues:I("issues",60172),italic:I("italic",60173),jersey:I("jersey",60174),json:I("json",60175),kebabVertical:I("kebab-vertical",60176),key:I("key",60177),law:I("law",60178),lightbulbAutofix:I("lightbulb-autofix",60179),linkExternal:I("link-external",60180),link:I("link",60181),listOrdered:I("list-ordered",60182),listUnordered:I("list-unordered",60183),liveShare:I("live-share",60184),loading:I("loading",60185),location:I("location",60186),mailRead:I("mail-read",60187),mail:I("mail",60188),markdown:I("markdown",60189),megaphone:I("megaphone",60190),mention:I("mention",60191),milestone:I("milestone",60192),gitPullRequestMilestone:I("git-pull-request-milestone",60192),mortarBoard:I("mortar-board",60193),move:I("move",60194),multipleWindows:I("multiple-windows",60195),mute:I("mute",60196),noNewline:I("no-newline",60197),note:I("note",60198),octoface:I("octoface",60199),openPreview:I("open-preview",60200),package:I("package",60201),paintcan:I("paintcan",60202),pin:I("pin",60203),play:I("play",60204),run:I("run",60204),plug:I("plug",60205),preserveCase:I("preserve-case",60206),preview:I("preview",60207),project:I("project",60208),pulse:I("pulse",60209),question:I("question",60210),quote:I("quote",60211),radioTower:I("radio-tower",60212),reactions:I("reactions",60213),references:I("references",60214),refresh:I("refresh",60215),regex:I("regex",60216),remoteExplorer:I("remote-explorer",60217),remote:I("remote",60218),remove:I("remove",60219),replaceAll:I("replace-all",60220),replace:I("replace",60221),repoClone:I("repo-clone",60222),repoForcePush:I("repo-force-push",60223),repoPull:I("repo-pull",60224),repoPush:I("repo-push",60225),report:I("report",60226),requestChanges:I("request-changes",60227),rocket:I("rocket",60228),rootFolderOpened:I("root-folder-opened",60229),rootFolder:I("root-folder",60230),rss:I("rss",60231),ruby:I("ruby",60232),saveAll:I("save-all",60233),saveAs:I("save-as",60234),save:I("save",60235),screenFull:I("screen-full",60236),screenNormal:I("screen-normal",60237),searchStop:I("search-stop",60238),server:I("server",60240),settingsGear:I("settings-gear",60241),settings:I("settings",60242),shield:I("shield",60243),smiley:I("smiley",60244),sortPrecedence:I("sort-precedence",60245),splitHorizontal:I("split-horizontal",60246),splitVertical:I("split-vertical",60247),squirrel:I("squirrel",60248),starFull:I("star-full",60249),starHalf:I("star-half",60250),symbolClass:I("symbol-class",60251),symbolColor:I("symbol-color",60252),symbolConstant:I("symbol-constant",60253),symbolEnumMember:I("symbol-enum-member",60254),symbolField:I("symbol-field",60255),symbolFile:I("symbol-file",60256),symbolInterface:I("symbol-interface",60257),symbolKeyword:I("symbol-keyword",60258),symbolMisc:I("symbol-misc",60259),symbolOperator:I("symbol-operator",60260),symbolProperty:I("symbol-property",60261),wrench:I("wrench",60261),wrenchSubaction:I("wrench-subaction",60261),symbolSnippet:I("symbol-snippet",60262),tasklist:I("tasklist",60263),telescope:I("telescope",60264),textSize:I("text-size",60265),threeBars:I("three-bars",60266),thumbsdown:I("thumbsdown",60267),thumbsup:I("thumbsup",60268),tools:I("tools",60269),triangleDown:I("triangle-down",60270),triangleLeft:I("triangle-left",60271),triangleRight:I("triangle-right",60272),triangleUp:I("triangle-up",60273),twitter:I("twitter",60274),unfold:I("unfold",60275),unlock:I("unlock",60276),unmute:I("unmute",60277),unverified:I("unverified",60278),verified:I("verified",60279),versions:I("versions",60280),vmActive:I("vm-active",60281),vmOutline:I("vm-outline",60282),vmRunning:I("vm-running",60283),watch:I("watch",60284),whitespace:I("whitespace",60285),wholeWord:I("whole-word",60286),window:I("window",60287),wordWrap:I("word-wrap",60288),zoomIn:I("zoom-in",60289),zoomOut:I("zoom-out",60290),listFilter:I("list-filter",60291),listFlat:I("list-flat",60292),listSelection:I("list-selection",60293),selection:I("selection",60293),listTree:I("list-tree",60294),debugBreakpointFunctionUnverified:I("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:I("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:I("debug-breakpoint-function-disabled",60296),debugStackframeActive:I("debug-stackframe-active",60297),circleSmallFilled:I("circle-small-filled",60298),debugStackframeDot:I("debug-stackframe-dot",60298),terminalDecorationMark:I("terminal-decoration-mark",60298),debugStackframe:I("debug-stackframe",60299),debugStackframeFocused:I("debug-stackframe-focused",60299),debugBreakpointUnsupported:I("debug-breakpoint-unsupported",60300),symbolString:I("symbol-string",60301),debugReverseContinue:I("debug-reverse-continue",60302),debugStepBack:I("debug-step-back",60303),debugRestartFrame:I("debug-restart-frame",60304),debugAlt:I("debug-alt",60305),callIncoming:I("call-incoming",60306),callOutgoing:I("call-outgoing",60307),menu:I("menu",60308),expandAll:I("expand-all",60309),feedback:I("feedback",60310),gitPullRequestReviewer:I("git-pull-request-reviewer",60310),groupByRefType:I("group-by-ref-type",60311),ungroupByRefType:I("ungroup-by-ref-type",60312),account:I("account",60313),gitPullRequestAssignee:I("git-pull-request-assignee",60313),bellDot:I("bell-dot",60314),debugConsole:I("debug-console",60315),library:I("library",60316),output:I("output",60317),runAll:I("run-all",60318),syncIgnored:I("sync-ignored",60319),pinned:I("pinned",60320),githubInverted:I("github-inverted",60321),serverProcess:I("server-process",60322),serverEnvironment:I("server-environment",60323),pass:I("pass",60324),issueClosed:I("issue-closed",60324),stopCircle:I("stop-circle",60325),playCircle:I("play-circle",60326),record:I("record",60327),debugAltSmall:I("debug-alt-small",60328),vmConnect:I("vm-connect",60329),cloud:I("cloud",60330),merge:I("merge",60331),export:I("export",60332),graphLeft:I("graph-left",60333),magnet:I("magnet",60334),notebook:I("notebook",60335),redo:I("redo",60336),checkAll:I("check-all",60337),pinnedDirty:I("pinned-dirty",60338),passFilled:I("pass-filled",60339),circleLargeFilled:I("circle-large-filled",60340),circleLarge:I("circle-large",60341),circleLargeOutline:I("circle-large-outline",60341),combine:I("combine",60342),gather:I("gather",60342),table:I("table",60343),variableGroup:I("variable-group",60344),typeHierarchy:I("type-hierarchy",60345),typeHierarchySub:I("type-hierarchy-sub",60346),typeHierarchySuper:I("type-hierarchy-super",60347),gitPullRequestCreate:I("git-pull-request-create",60348),runAbove:I("run-above",60349),runBelow:I("run-below",60350),notebookTemplate:I("notebook-template",60351),debugRerun:I("debug-rerun",60352),workspaceTrusted:I("workspace-trusted",60353),workspaceUntrusted:I("workspace-untrusted",60354),workspaceUnknown:I("workspace-unknown",60355),terminalCmd:I("terminal-cmd",60356),terminalDebian:I("terminal-debian",60357),terminalLinux:I("terminal-linux",60358),terminalPowershell:I("terminal-powershell",60359),terminalTmux:I("terminal-tmux",60360),terminalUbuntu:I("terminal-ubuntu",60361),terminalBash:I("terminal-bash",60362),arrowSwap:I("arrow-swap",60363),copy:I("copy",60364),personAdd:I("person-add",60365),filterFilled:I("filter-filled",60366),wand:I("wand",60367),debugLineByLine:I("debug-line-by-line",60368),inspect:I("inspect",60369),layers:I("layers",60370),layersDot:I("layers-dot",60371),layersActive:I("layers-active",60372),compass:I("compass",60373),compassDot:I("compass-dot",60374),compassActive:I("compass-active",60375),azure:I("azure",60376),issueDraft:I("issue-draft",60377),gitPullRequestClosed:I("git-pull-request-closed",60378),gitPullRequestDraft:I("git-pull-request-draft",60379),debugAll:I("debug-all",60380),debugCoverage:I("debug-coverage",60381),runErrors:I("run-errors",60382),folderLibrary:I("folder-library",60383),debugContinueSmall:I("debug-continue-small",60384),beakerStop:I("beaker-stop",60385),graphLine:I("graph-line",60386),graphScatter:I("graph-scatter",60387),pieChart:I("pie-chart",60388),bracket:I("bracket",60175),bracketDot:I("bracket-dot",60389),bracketError:I("bracket-error",60390),lockSmall:I("lock-small",60391),azureDevops:I("azure-devops",60392),verifiedFilled:I("verified-filled",60393),newline:I("newline",60394),layout:I("layout",60395),layoutActivitybarLeft:I("layout-activitybar-left",60396),layoutActivitybarRight:I("layout-activitybar-right",60397),layoutPanelLeft:I("layout-panel-left",60398),layoutPanelCenter:I("layout-panel-center",60399),layoutPanelJustify:I("layout-panel-justify",60400),layoutPanelRight:I("layout-panel-right",60401),layoutPanel:I("layout-panel",60402),layoutSidebarLeft:I("layout-sidebar-left",60403),layoutSidebarRight:I("layout-sidebar-right",60404),layoutStatusbar:I("layout-statusbar",60405),layoutMenubar:I("layout-menubar",60406),layoutCentered:I("layout-centered",60407),target:I("target",60408),indent:I("indent",60409),recordSmall:I("record-small",60410),errorSmall:I("error-small",60411),terminalDecorationError:I("terminal-decoration-error",60411),arrowCircleDown:I("arrow-circle-down",60412),arrowCircleLeft:I("arrow-circle-left",60413),arrowCircleRight:I("arrow-circle-right",60414),arrowCircleUp:I("arrow-circle-up",60415),layoutSidebarRightOff:I("layout-sidebar-right-off",60416),layoutPanelOff:I("layout-panel-off",60417),layoutSidebarLeftOff:I("layout-sidebar-left-off",60418),blank:I("blank",60419),heartFilled:I("heart-filled",60420),map:I("map",60421),mapHorizontal:I("map-horizontal",60421),foldHorizontal:I("fold-horizontal",60421),mapFilled:I("map-filled",60422),mapHorizontalFilled:I("map-horizontal-filled",60422),foldHorizontalFilled:I("fold-horizontal-filled",60422),circleSmall:I("circle-small",60423),bellSlash:I("bell-slash",60424),bellSlashDot:I("bell-slash-dot",60425),commentUnresolved:I("comment-unresolved",60426),gitPullRequestGoToChanges:I("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:I("git-pull-request-new-changes",60428),searchFuzzy:I("search-fuzzy",60429),commentDraft:I("comment-draft",60430),send:I("send",60431),sparkle:I("sparkle",60432),insert:I("insert",60433),mic:I("mic",60434),thumbsdownFilled:I("thumbsdown-filled",60435),thumbsupFilled:I("thumbsup-filled",60436),coffee:I("coffee",60437),snake:I("snake",60438),game:I("game",60439),vr:I("vr",60440),chip:I("chip",60441),piano:I("piano",60442),music:I("music",60443),micFilled:I("mic-filled",60444),repoFetch:I("repo-fetch",60445),copilot:I("copilot",60446),lightbulbSparkle:I("lightbulb-sparkle",60447),robot:I("robot",60448),sparkleFilled:I("sparkle-filled",60449),diffSingle:I("diff-single",60450),diffMultiple:I("diff-multiple",60451),surroundWith:I("surround-with",60452),share:I("share",60453),gitStash:I("git-stash",60454),gitStashApply:I("git-stash-apply",60455),gitStashPop:I("git-stash-pop",60456),vscode:I("vscode",60457),vscodeInsiders:I("vscode-insiders",60458),codeOss:I("code-oss",60459),runCoverage:I("run-coverage",60460),runAllCoverage:I("run-all-coverage",60461),coverage:I("coverage",60462),githubProject:I("github-project",60463),mapVertical:I("map-vertical",60464),foldVertical:I("fold-vertical",60464),mapVerticalFilled:I("map-vertical-filled",60465),foldVerticalFilled:I("fold-vertical-filled",60465),goToSearch:I("go-to-search",60466),percentage:I("percentage",60467),sortPercentage:I("sort-percentage",60467),attach:I("attach",60468)},rUe={dialogError:I("dialog-error","error"),dialogWarning:I("dialog-warning","warning"),dialogInfo:I("dialog-info","info"),dialogClose:I("dialog-close","close"),treeItemExpanded:I("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:I("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:I("tree-filter-on-type-off","list-selection"),treeFilterClear:I("tree-filter-clear","close"),treeItemLoading:I("tree-item-loading","loading"),menuSelection:I("menu-selection","check"),menuSubmenu:I("menu-submenu","chevron-right"),menuBarMore:I("menubar-more","more"),scrollbarButtonLeft:I("scrollbar-button-left","triangle-left"),scrollbarButtonRight:I("scrollbar-button-right","triangle-right"),scrollbarButtonUp:I("scrollbar-button-up","triangle-up"),scrollbarButtonDown:I("scrollbar-button-down","triangle-down"),toolBarMore:I("toolbar-more","more"),quickInputBack:I("quick-input-back","arrow-left"),dropDownButton:I("drop-down-button",60084),symbolCustomColor:I("symbol-customcolor",60252),exportIcon:I("export",60332),workspaceUnspecified:I("workspace-unspecified",60355),newLine:I("newline",60394),thumbsDownFilled:I("thumbsdown-filled",60435),thumbsUpFilled:I("thumbsup-filled",60436),gitFetch:I("git-fetch",60445),lightbulbSparkleAutofix:I("lightbulb-sparkle-autofix",60447),debugBreakpointPending:I("debug-breakpoint-pending",60377)},rt={...iUe,...rUe};let Jue=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new ae,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),Pt(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var r;(r=this._factories.get(e))==null||r.dispose();const i=new sUe(this,e,t);return this._factories.set(e,i),Pt(()=>{const s=this._factories.get(e);!s||s!==i||(this._factories.delete(e),s.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class sUe extends ke{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let Yy=class{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class vH{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class DD{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var IG;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(IG||(IG={}));var DG;(function(n){const e=new Map;e.set(0,rt.symbolMethod),e.set(1,rt.symbolFunction),e.set(2,rt.symbolConstructor),e.set(3,rt.symbolField),e.set(4,rt.symbolVariable),e.set(5,rt.symbolClass),e.set(6,rt.symbolStruct),e.set(7,rt.symbolInterface),e.set(8,rt.symbolModule),e.set(9,rt.symbolProperty),e.set(10,rt.symbolEvent),e.set(11,rt.symbolOperator),e.set(12,rt.symbolUnit),e.set(13,rt.symbolValue),e.set(15,rt.symbolEnum),e.set(14,rt.symbolConstant),e.set(15,rt.symbolEnum),e.set(16,rt.symbolEnumMember),e.set(17,rt.symbolKeyword),e.set(27,rt.symbolSnippet),e.set(18,rt.symbolText),e.set(19,rt.symbolColor),e.set(20,rt.symbolFile),e.set(21,rt.symbolReference),e.set(22,rt.symbolCustomColor),e.set(23,rt.symbolFolder),e.set(24,rt.symbolTypeParameter),e.set(25,rt.account),e.set(26,rt.issues);function t(s){let o=e.get(s);return o||(console.info("No codicon found for CompletionItemKind "+s),o=rt.symbolProperty),o}n.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function r(s,o){let a=i.get(s);return typeof a>"u"&&!o&&(a=9),a}n.fromString=r})(DG||(DG={}));var MG;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(MG||(MG={}));class oUe{constructor(e,t,i,r){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=r}equals(e){return te.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var RG;(function(n){n[n.Automatic=0]="Automatic",n[n.PasteAs=1]="PasteAs"})(RG||(RG={}));var AG;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(AG||(AG={}));var OG;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(OG||(OG={}));S("Array","array"),S("Boolean","boolean"),S("Class","class"),S("Constant","constant"),S("Constructor","constructor"),S("Enum","enumeration"),S("EnumMember","enumeration member"),S("Event","event"),S("Field","field"),S("File","file"),S("Function","function"),S("Interface","interface"),S("Key","key"),S("Method","method"),S("Module","module"),S("Namespace","namespace"),S("Null","null"),S("Number","number"),S("Object","object"),S("Operator","operator"),S("Package","package"),S("Property","property"),S("String","string"),S("Struct","struct"),S("TypeParameter","type parameter"),S("Variable","variable");var jP;(function(n){const e=new Map;e.set(0,rt.symbolFile),e.set(1,rt.symbolModule),e.set(2,rt.symbolNamespace),e.set(3,rt.symbolPackage),e.set(4,rt.symbolClass),e.set(5,rt.symbolMethod),e.set(6,rt.symbolProperty),e.set(7,rt.symbolField),e.set(8,rt.symbolConstructor),e.set(9,rt.symbolEnum),e.set(10,rt.symbolInterface),e.set(11,rt.symbolFunction),e.set(12,rt.symbolVariable),e.set(13,rt.symbolConstant),e.set(14,rt.symbolString),e.set(15,rt.symbolNumber),e.set(16,rt.symbolBoolean),e.set(17,rt.symbolArray),e.set(18,rt.symbolObject),e.set(19,rt.symbolKey),e.set(20,rt.symbolNull),e.set(21,rt.symbolEnumMember),e.set(22,rt.symbolStruct),e.set(23,rt.symbolEvent),e.set(24,rt.symbolOperator),e.set(25,rt.symbolTypeParameter);function t(i){let r=e.get(i);return r||(console.info("No codicon found for SymbolKind "+i),r=rt.symbolProperty),r}n.toIcon=t})(jP||(jP={}));const Za=class Za{static fromValue(e){switch(e){case"comment":return Za.Comment;case"imports":return Za.Imports;case"region":return Za.Region}return new Za(e)}constructor(e){this.value=e}};Za.Comment=new Za("comment"),Za.Imports=new Za("imports"),Za.Region=new Za("region");let KP=Za;var PG;(function(n){n[n.AIGenerated=1]="AIGenerated"})(PG||(PG={}));var FG;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(FG||(FG={}));var BG;(function(n){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}n.is=e})(BG||(BG={}));var HG;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(HG||(HG={}));class aUe{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const Hi=new Jue,qP=new Jue;var VG;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(VG||(VG={}));var GP;(function(n){n[n.Unknown=0]="Unknown",n[n.Disabled=1]="Disabled",n[n.Enabled=2]="Enabled"})(GP||(GP={}));var YP;(function(n){n[n.Invoke=1]="Invoke",n[n.Auto=2]="Auto"})(YP||(YP={}));var ZP;(function(n){n[n.None=0]="None",n[n.KeepWhitespace=1]="KeepWhitespace",n[n.InsertAsSnippet=4]="InsertAsSnippet"})(ZP||(ZP={}));var XP;(function(n){n[n.Method=0]="Method",n[n.Function=1]="Function",n[n.Constructor=2]="Constructor",n[n.Field=3]="Field",n[n.Variable=4]="Variable",n[n.Class=5]="Class",n[n.Struct=6]="Struct",n[n.Interface=7]="Interface",n[n.Module=8]="Module",n[n.Property=9]="Property",n[n.Event=10]="Event",n[n.Operator=11]="Operator",n[n.Unit=12]="Unit",n[n.Value=13]="Value",n[n.Constant=14]="Constant",n[n.Enum=15]="Enum",n[n.EnumMember=16]="EnumMember",n[n.Keyword=17]="Keyword",n[n.Text=18]="Text",n[n.Color=19]="Color",n[n.File=20]="File",n[n.Reference=21]="Reference",n[n.Customcolor=22]="Customcolor",n[n.Folder=23]="Folder",n[n.TypeParameter=24]="TypeParameter",n[n.User=25]="User",n[n.Issue=26]="Issue",n[n.Snippet=27]="Snippet"})(XP||(XP={}));var QP;(function(n){n[n.Deprecated=1]="Deprecated"})(QP||(QP={}));var JP;(function(n){n[n.Invoke=0]="Invoke",n[n.TriggerCharacter=1]="TriggerCharacter",n[n.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(JP||(JP={}));var e5;(function(n){n[n.EXACT=0]="EXACT",n[n.ABOVE=1]="ABOVE",n[n.BELOW=2]="BELOW"})(e5||(e5={}));var t5;(function(n){n[n.NotSet=0]="NotSet",n[n.ContentFlush=1]="ContentFlush",n[n.RecoverFromMarkers=2]="RecoverFromMarkers",n[n.Explicit=3]="Explicit",n[n.Paste=4]="Paste",n[n.Undo=5]="Undo",n[n.Redo=6]="Redo"})(t5||(t5={}));var n5;(function(n){n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(n5||(n5={}));var i5;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(i5||(i5={}));var r5;(function(n){n[n.None=0]="None",n[n.Keep=1]="Keep",n[n.Brackets=2]="Brackets",n[n.Advanced=3]="Advanced",n[n.Full=4]="Full"})(r5||(r5={}));var s5;(function(n){n[n.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",n[n.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",n[n.accessibilitySupport=2]="accessibilitySupport",n[n.accessibilityPageSize=3]="accessibilityPageSize",n[n.ariaLabel=4]="ariaLabel",n[n.ariaRequired=5]="ariaRequired",n[n.autoClosingBrackets=6]="autoClosingBrackets",n[n.autoClosingComments=7]="autoClosingComments",n[n.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",n[n.autoClosingDelete=9]="autoClosingDelete",n[n.autoClosingOvertype=10]="autoClosingOvertype",n[n.autoClosingQuotes=11]="autoClosingQuotes",n[n.autoIndent=12]="autoIndent",n[n.automaticLayout=13]="automaticLayout",n[n.autoSurround=14]="autoSurround",n[n.bracketPairColorization=15]="bracketPairColorization",n[n.guides=16]="guides",n[n.codeLens=17]="codeLens",n[n.codeLensFontFamily=18]="codeLensFontFamily",n[n.codeLensFontSize=19]="codeLensFontSize",n[n.colorDecorators=20]="colorDecorators",n[n.colorDecoratorsLimit=21]="colorDecoratorsLimit",n[n.columnSelection=22]="columnSelection",n[n.comments=23]="comments",n[n.contextmenu=24]="contextmenu",n[n.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",n[n.cursorBlinking=26]="cursorBlinking",n[n.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",n[n.cursorStyle=28]="cursorStyle",n[n.cursorSurroundingLines=29]="cursorSurroundingLines",n[n.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",n[n.cursorWidth=31]="cursorWidth",n[n.disableLayerHinting=32]="disableLayerHinting",n[n.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",n[n.domReadOnly=34]="domReadOnly",n[n.dragAndDrop=35]="dragAndDrop",n[n.dropIntoEditor=36]="dropIntoEditor",n[n.emptySelectionClipboard=37]="emptySelectionClipboard",n[n.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",n[n.extraEditorClassName=39]="extraEditorClassName",n[n.fastScrollSensitivity=40]="fastScrollSensitivity",n[n.find=41]="find",n[n.fixedOverflowWidgets=42]="fixedOverflowWidgets",n[n.folding=43]="folding",n[n.foldingStrategy=44]="foldingStrategy",n[n.foldingHighlight=45]="foldingHighlight",n[n.foldingImportsByDefault=46]="foldingImportsByDefault",n[n.foldingMaximumRegions=47]="foldingMaximumRegions",n[n.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",n[n.fontFamily=49]="fontFamily",n[n.fontInfo=50]="fontInfo",n[n.fontLigatures=51]="fontLigatures",n[n.fontSize=52]="fontSize",n[n.fontWeight=53]="fontWeight",n[n.fontVariations=54]="fontVariations",n[n.formatOnPaste=55]="formatOnPaste",n[n.formatOnType=56]="formatOnType",n[n.glyphMargin=57]="glyphMargin",n[n.gotoLocation=58]="gotoLocation",n[n.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",n[n.hover=60]="hover",n[n.inDiffEditor=61]="inDiffEditor",n[n.inlineSuggest=62]="inlineSuggest",n[n.inlineEdit=63]="inlineEdit",n[n.letterSpacing=64]="letterSpacing",n[n.lightbulb=65]="lightbulb",n[n.lineDecorationsWidth=66]="lineDecorationsWidth",n[n.lineHeight=67]="lineHeight",n[n.lineNumbers=68]="lineNumbers",n[n.lineNumbersMinChars=69]="lineNumbersMinChars",n[n.linkedEditing=70]="linkedEditing",n[n.links=71]="links",n[n.matchBrackets=72]="matchBrackets",n[n.minimap=73]="minimap",n[n.mouseStyle=74]="mouseStyle",n[n.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",n[n.mouseWheelZoom=76]="mouseWheelZoom",n[n.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",n[n.multiCursorModifier=78]="multiCursorModifier",n[n.multiCursorPaste=79]="multiCursorPaste",n[n.multiCursorLimit=80]="multiCursorLimit",n[n.occurrencesHighlight=81]="occurrencesHighlight",n[n.overviewRulerBorder=82]="overviewRulerBorder",n[n.overviewRulerLanes=83]="overviewRulerLanes",n[n.padding=84]="padding",n[n.pasteAs=85]="pasteAs",n[n.parameterHints=86]="parameterHints",n[n.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",n[n.placeholder=88]="placeholder",n[n.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",n[n.quickSuggestions=90]="quickSuggestions",n[n.quickSuggestionsDelay=91]="quickSuggestionsDelay",n[n.readOnly=92]="readOnly",n[n.readOnlyMessage=93]="readOnlyMessage",n[n.renameOnType=94]="renameOnType",n[n.renderControlCharacters=95]="renderControlCharacters",n[n.renderFinalNewline=96]="renderFinalNewline",n[n.renderLineHighlight=97]="renderLineHighlight",n[n.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",n[n.renderValidationDecorations=99]="renderValidationDecorations",n[n.renderWhitespace=100]="renderWhitespace",n[n.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",n[n.roundedSelection=102]="roundedSelection",n[n.rulers=103]="rulers",n[n.scrollbar=104]="scrollbar",n[n.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",n[n.scrollBeyondLastLine=106]="scrollBeyondLastLine",n[n.scrollPredominantAxis=107]="scrollPredominantAxis",n[n.selectionClipboard=108]="selectionClipboard",n[n.selectionHighlight=109]="selectionHighlight",n[n.selectOnLineNumbers=110]="selectOnLineNumbers",n[n.showFoldingControls=111]="showFoldingControls",n[n.showUnused=112]="showUnused",n[n.snippetSuggestions=113]="snippetSuggestions",n[n.smartSelect=114]="smartSelect",n[n.smoothScrolling=115]="smoothScrolling",n[n.stickyScroll=116]="stickyScroll",n[n.stickyTabStops=117]="stickyTabStops",n[n.stopRenderingLineAfter=118]="stopRenderingLineAfter",n[n.suggest=119]="suggest",n[n.suggestFontSize=120]="suggestFontSize",n[n.suggestLineHeight=121]="suggestLineHeight",n[n.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",n[n.suggestSelection=123]="suggestSelection",n[n.tabCompletion=124]="tabCompletion",n[n.tabIndex=125]="tabIndex",n[n.unicodeHighlighting=126]="unicodeHighlighting",n[n.unusualLineTerminators=127]="unusualLineTerminators",n[n.useShadowDOM=128]="useShadowDOM",n[n.useTabStops=129]="useTabStops",n[n.wordBreak=130]="wordBreak",n[n.wordSegmenterLocales=131]="wordSegmenterLocales",n[n.wordSeparators=132]="wordSeparators",n[n.wordWrap=133]="wordWrap",n[n.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",n[n.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",n[n.wordWrapColumn=136]="wordWrapColumn",n[n.wordWrapOverride1=137]="wordWrapOverride1",n[n.wordWrapOverride2=138]="wordWrapOverride2",n[n.wrappingIndent=139]="wrappingIndent",n[n.wrappingStrategy=140]="wrappingStrategy",n[n.showDeprecated=141]="showDeprecated",n[n.inlayHints=142]="inlayHints",n[n.editorClassName=143]="editorClassName",n[n.pixelRatio=144]="pixelRatio",n[n.tabFocusMode=145]="tabFocusMode",n[n.layoutInfo=146]="layoutInfo",n[n.wrappingInfo=147]="wrappingInfo",n[n.defaultColorDecorators=148]="defaultColorDecorators",n[n.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",n[n.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(s5||(s5={}));var o5;(function(n){n[n.TextDefined=0]="TextDefined",n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(o5||(o5={}));var a5;(function(n){n[n.LF=0]="LF",n[n.CRLF=1]="CRLF"})(a5||(a5={}));var l5;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(l5||(l5={}));var c5;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(c5||(c5={}));var u5;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(u5||(u5={}));var d5;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(d5||(d5={}));var h5;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(h5||(h5={}));var f5;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(f5||(f5={}));var g5;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(g5||(g5={}));var p5;(function(n){n[n.DependsOnKbLayout=-1]="DependsOnKbLayout",n[n.Unknown=0]="Unknown",n[n.Backspace=1]="Backspace",n[n.Tab=2]="Tab",n[n.Enter=3]="Enter",n[n.Shift=4]="Shift",n[n.Ctrl=5]="Ctrl",n[n.Alt=6]="Alt",n[n.PauseBreak=7]="PauseBreak",n[n.CapsLock=8]="CapsLock",n[n.Escape=9]="Escape",n[n.Space=10]="Space",n[n.PageUp=11]="PageUp",n[n.PageDown=12]="PageDown",n[n.End=13]="End",n[n.Home=14]="Home",n[n.LeftArrow=15]="LeftArrow",n[n.UpArrow=16]="UpArrow",n[n.RightArrow=17]="RightArrow",n[n.DownArrow=18]="DownArrow",n[n.Insert=19]="Insert",n[n.Delete=20]="Delete",n[n.Digit0=21]="Digit0",n[n.Digit1=22]="Digit1",n[n.Digit2=23]="Digit2",n[n.Digit3=24]="Digit3",n[n.Digit4=25]="Digit4",n[n.Digit5=26]="Digit5",n[n.Digit6=27]="Digit6",n[n.Digit7=28]="Digit7",n[n.Digit8=29]="Digit8",n[n.Digit9=30]="Digit9",n[n.KeyA=31]="KeyA",n[n.KeyB=32]="KeyB",n[n.KeyC=33]="KeyC",n[n.KeyD=34]="KeyD",n[n.KeyE=35]="KeyE",n[n.KeyF=36]="KeyF",n[n.KeyG=37]="KeyG",n[n.KeyH=38]="KeyH",n[n.KeyI=39]="KeyI",n[n.KeyJ=40]="KeyJ",n[n.KeyK=41]="KeyK",n[n.KeyL=42]="KeyL",n[n.KeyM=43]="KeyM",n[n.KeyN=44]="KeyN",n[n.KeyO=45]="KeyO",n[n.KeyP=46]="KeyP",n[n.KeyQ=47]="KeyQ",n[n.KeyR=48]="KeyR",n[n.KeyS=49]="KeyS",n[n.KeyT=50]="KeyT",n[n.KeyU=51]="KeyU",n[n.KeyV=52]="KeyV",n[n.KeyW=53]="KeyW",n[n.KeyX=54]="KeyX",n[n.KeyY=55]="KeyY",n[n.KeyZ=56]="KeyZ",n[n.Meta=57]="Meta",n[n.ContextMenu=58]="ContextMenu",n[n.F1=59]="F1",n[n.F2=60]="F2",n[n.F3=61]="F3",n[n.F4=62]="F4",n[n.F5=63]="F5",n[n.F6=64]="F6",n[n.F7=65]="F7",n[n.F8=66]="F8",n[n.F9=67]="F9",n[n.F10=68]="F10",n[n.F11=69]="F11",n[n.F12=70]="F12",n[n.F13=71]="F13",n[n.F14=72]="F14",n[n.F15=73]="F15",n[n.F16=74]="F16",n[n.F17=75]="F17",n[n.F18=76]="F18",n[n.F19=77]="F19",n[n.F20=78]="F20",n[n.F21=79]="F21",n[n.F22=80]="F22",n[n.F23=81]="F23",n[n.F24=82]="F24",n[n.NumLock=83]="NumLock",n[n.ScrollLock=84]="ScrollLock",n[n.Semicolon=85]="Semicolon",n[n.Equal=86]="Equal",n[n.Comma=87]="Comma",n[n.Minus=88]="Minus",n[n.Period=89]="Period",n[n.Slash=90]="Slash",n[n.Backquote=91]="Backquote",n[n.BracketLeft=92]="BracketLeft",n[n.Backslash=93]="Backslash",n[n.BracketRight=94]="BracketRight",n[n.Quote=95]="Quote",n[n.OEM_8=96]="OEM_8",n[n.IntlBackslash=97]="IntlBackslash",n[n.Numpad0=98]="Numpad0",n[n.Numpad1=99]="Numpad1",n[n.Numpad2=100]="Numpad2",n[n.Numpad3=101]="Numpad3",n[n.Numpad4=102]="Numpad4",n[n.Numpad5=103]="Numpad5",n[n.Numpad6=104]="Numpad6",n[n.Numpad7=105]="Numpad7",n[n.Numpad8=106]="Numpad8",n[n.Numpad9=107]="Numpad9",n[n.NumpadMultiply=108]="NumpadMultiply",n[n.NumpadAdd=109]="NumpadAdd",n[n.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",n[n.NumpadSubtract=111]="NumpadSubtract",n[n.NumpadDecimal=112]="NumpadDecimal",n[n.NumpadDivide=113]="NumpadDivide",n[n.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",n[n.ABNT_C1=115]="ABNT_C1",n[n.ABNT_C2=116]="ABNT_C2",n[n.AudioVolumeMute=117]="AudioVolumeMute",n[n.AudioVolumeUp=118]="AudioVolumeUp",n[n.AudioVolumeDown=119]="AudioVolumeDown",n[n.BrowserSearch=120]="BrowserSearch",n[n.BrowserHome=121]="BrowserHome",n[n.BrowserBack=122]="BrowserBack",n[n.BrowserForward=123]="BrowserForward",n[n.MediaTrackNext=124]="MediaTrackNext",n[n.MediaTrackPrevious=125]="MediaTrackPrevious",n[n.MediaStop=126]="MediaStop",n[n.MediaPlayPause=127]="MediaPlayPause",n[n.LaunchMediaPlayer=128]="LaunchMediaPlayer",n[n.LaunchMail=129]="LaunchMail",n[n.LaunchApp2=130]="LaunchApp2",n[n.Clear=131]="Clear",n[n.MAX_VALUE=132]="MAX_VALUE"})(p5||(p5={}));var m5;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(m5||(m5={}));var v5;(function(n){n[n.Unnecessary=1]="Unnecessary",n[n.Deprecated=2]="Deprecated"})(v5||(v5={}));var b5;(function(n){n[n.Inline=1]="Inline",n[n.Gutter=2]="Gutter"})(b5||(b5={}));var _5;(function(n){n[n.Normal=1]="Normal",n[n.Underlined=2]="Underlined"})(_5||(_5={}));var C5;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.TEXTAREA=1]="TEXTAREA",n[n.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",n[n.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",n[n.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",n[n.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",n[n.CONTENT_TEXT=6]="CONTENT_TEXT",n[n.CONTENT_EMPTY=7]="CONTENT_EMPTY",n[n.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",n[n.CONTENT_WIDGET=9]="CONTENT_WIDGET",n[n.OVERVIEW_RULER=10]="OVERVIEW_RULER",n[n.SCROLLBAR=11]="SCROLLBAR",n[n.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",n[n.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(C5||(C5={}));var y5;(function(n){n[n.AIGenerated=1]="AIGenerated"})(y5||(y5={}));var w5;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(w5||(w5={}));var S5;(function(n){n[n.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",n[n.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",n[n.TOP_CENTER=2]="TOP_CENTER"})(S5||(S5={}));var x5;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(x5||(x5={}));var k5;(function(n){n[n.Word=0]="Word",n[n.Line=1]="Line",n[n.Suggest=2]="Suggest"})(k5||(k5={}));var E5;(function(n){n[n.Left=0]="Left",n[n.Right=1]="Right",n[n.None=2]="None",n[n.LeftOfInjectedText=3]="LeftOfInjectedText",n[n.RightOfInjectedText=4]="RightOfInjectedText"})(E5||(E5={}));var L5;(function(n){n[n.Off=0]="Off",n[n.On=1]="On",n[n.Relative=2]="Relative",n[n.Interval=3]="Interval",n[n.Custom=4]="Custom"})(L5||(L5={}));var N5;(function(n){n[n.None=0]="None",n[n.Text=1]="Text",n[n.Blocks=2]="Blocks"})(N5||(N5={}));var T5;(function(n){n[n.Smooth=0]="Smooth",n[n.Immediate=1]="Immediate"})(T5||(T5={}));var I5;(function(n){n[n.Auto=1]="Auto",n[n.Hidden=2]="Hidden",n[n.Visible=3]="Visible"})(I5||(I5={}));var D5;(function(n){n[n.LTR=0]="LTR",n[n.RTL=1]="RTL"})(D5||(D5={}));var M5;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(M5||(M5={}));var R5;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(R5||(R5={}));var A5;(function(n){n[n.File=0]="File",n[n.Module=1]="Module",n[n.Namespace=2]="Namespace",n[n.Package=3]="Package",n[n.Class=4]="Class",n[n.Method=5]="Method",n[n.Property=6]="Property",n[n.Field=7]="Field",n[n.Constructor=8]="Constructor",n[n.Enum=9]="Enum",n[n.Interface=10]="Interface",n[n.Function=11]="Function",n[n.Variable=12]="Variable",n[n.Constant=13]="Constant",n[n.String=14]="String",n[n.Number=15]="Number",n[n.Boolean=16]="Boolean",n[n.Array=17]="Array",n[n.Object=18]="Object",n[n.Key=19]="Key",n[n.Null=20]="Null",n[n.EnumMember=21]="EnumMember",n[n.Struct=22]="Struct",n[n.Event=23]="Event",n[n.Operator=24]="Operator",n[n.TypeParameter=25]="TypeParameter"})(A5||(A5={}));var O5;(function(n){n[n.Deprecated=1]="Deprecated"})(O5||(O5={}));var P5;(function(n){n[n.Hidden=0]="Hidden",n[n.Blink=1]="Blink",n[n.Smooth=2]="Smooth",n[n.Phase=3]="Phase",n[n.Expand=4]="Expand",n[n.Solid=5]="Solid"})(P5||(P5={}));var F5;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(F5||(F5={}));var B5;(function(n){n[n.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",n[n.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",n[n.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",n[n.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(B5||(B5={}));var H5;(function(n){n[n.None=0]="None",n[n.Same=1]="Same",n[n.Indent=2]="Indent",n[n.DeepIndent=3]="DeepIndent"})(H5||(H5={}));const t0=class t0{static chord(e,t){return A$e(e,t)}};t0.CtrlCmd=2048,t0.Shift=1024,t0.Alt=512,t0.WinCtrl=256;let V5=t0;function ede(){return{editor:void 0,languages:void 0,CancellationTokenSource:pb,Emitter:ae,KeyCode:p5,KeyMod:V5,Position:de,Range:te,Selection:an,SelectionDirection:D5,MarkerSeverity:m5,MarkerTag:v5,Uri:Ut,Token:Yy}}function lUe(n,e){const t=n;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const zn=window;function tde(n){return n}class cUe{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=tde):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class zG{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=tde):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const i=this._fn(e);return this._map.set(e,i),this._map2.set(t,i),i}}class kf{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function uUe(n){return!n||typeof n!="string"?!0:n.trim().length===0}const dUe=/{(\d+)}/g;function z5(n,...e){return e.length===0?n:n.replace(dUe,function(t,i){const r=parseInt(i,10);return isNaN(r)||r<0||r>=e.length?t:e[r]})}function hUe(n){return n.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function gC(n){return n.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function zd(n){return n.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function MD(n,e){if(!n||!e)return n;const t=e.length;if(t===0||n.length===0)return n;let i=0;for(;n.indexOf(e,i)===i;)i=i+t;return n.substring(i)}function fUe(n,e){if(!n||!e)return n;const t=e.length,i=n.length;if(t===0||i===0)return n;let r=i,s=-1;for(;s=n.lastIndexOf(e,r-1),!(s===-1||s+t!==r);){if(s===0)return"";r=s}return n.substring(0,r)}function gUe(n){return n.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function nde(n,e,t={}){if(!n)throw new Error("Cannot create regex from empty string");e||(n=zd(n)),t.wholeWord&&(/\B/.test(n.charAt(0))||(n="\\b"+n),/\B/.test(n.charAt(n.length-1))||(n=n+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(n,i)}function pUe(n){return n.source==="^"||n.source==="^$"||n.source==="$"||n.source==="^\\s*$"?!1:!!(n.exec("")&&n.lastIndex===0)}function mb(n){return n.split(/\r\n|\r|\n/)}function To(n){for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function Ts(n,e=0,t=n.length){for(let i=e;i<t;i++){const r=n.charCodeAt(i);if(r!==32&&r!==9)return n.substring(e,i)}return n.substring(e,t)}function mm(n,e=n.length-1){for(let t=e;t>=0;t--){const i=n.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function W5(n,e){return n<e?-1:n>e?1:0}function bH(n,e,t=0,i=n.length,r=0,s=e.length){for(;t<i&&r<s;t++,r++){const l=n.charCodeAt(t),c=e.charCodeAt(r);if(l<c)return-1;if(l>c)return 1}const o=i-t,a=s-r;return o<a?-1:o>a?1:0}function WG(n,e){return uS(n,e,0,n.length,0,e.length)}function uS(n,e,t=0,i=n.length,r=0,s=e.length){for(;t<i&&r<s;t++,r++){let l=n.charCodeAt(t),c=e.charCodeAt(r);if(l===c)continue;if(l>=128||c>=128)return bH(n.toLowerCase(),e.toLowerCase(),t,i,r,s);Av(l)&&(l-=32),Av(c)&&(c-=32);const u=l-c;if(u!==0)return u}const o=i-t,a=s-r;return o<a?-1:o>a?1:0}function jx(n){return n>=48&&n<=57}function Av(n){return n>=97&&n<=122}function _h(n){return n>=65&&n<=90}function Ov(n,e){return n.length===e.length&&uS(n,e)===0}function _H(n,e){const t=e.length;return e.length>n.length?!1:uS(n,e,0,t)===0}function $5(n,e){const t=Math.min(n.length,e.length);let i;for(i=0;i<t;i++)if(n.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function U5(n,e){const t=Math.min(n.length,e.length);let i;const r=n.length-1,s=e.length-1;for(i=0;i<t;i++)if(n.charCodeAt(r-i)!==e.charCodeAt(s-i))return i;return t}function gr(n){return 55296<=n&&n<=56319}function N1(n){return 56320<=n&&n<=57343}function CH(n,e){return(n-55296<<10)+(e-56320)+65536}function OL(n,e,t){const i=n.charCodeAt(t);if(gr(i)&&t+1<e){const r=n.charCodeAt(t+1);if(N1(r))return CH(i,r)}return i}function mUe(n,e){const t=n.charCodeAt(e-1);if(N1(t)&&e>1){const i=n.charCodeAt(e-2);if(gr(i))return CH(i,t)}return t}class yH{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=mUe(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=OL(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class PL{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new yH(e,t)}nextGraphemeLength(){const e=FL.getInstance(),t=this._iterator,i=t.offset;let r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if($G(r,o)){t.setOffset(s);break}r=o}return t.offset-i}prevGraphemeLength(){const e=FL.getInstance(),t=this._iterator,i=t.offset;let r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if($G(o,r)){t.setOffset(s);break}r=o}return i-t.offset}eol(){return this._iterator.eol()}}function wH(n,e){return new PL(n,e).nextGraphemeLength()}function ide(n,e){return new PL(n,e).prevGraphemeLength()}function vUe(n,e){e>0&&N1(n.charCodeAt(e))&&e--;const t=e+wH(n,e);return[t-ide(n,t),t]}let NR;function bUe(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function Zy(n){return NR||(NR=bUe()),NR.test(n)}const _Ue=/^[\t\n\r\x20-\x7E]*$/;function SH(n){return _Ue.test(n)}const rde=/[\u2028\u2029]/;function sde(n){return rde.test(n)}function Ef(n){return n>=11904&&n<=55215||n>=63744&&n<=64255||n>=65281&&n<=65374}function xH(n){return n>=127462&&n<=127487||n===8986||n===8987||n===9200||n===9203||n>=9728&&n<=10175||n===11088||n===11093||n>=127744&&n<=128591||n>=128640&&n<=128764||n>=128992&&n<=129008||n>=129280&&n<=129535||n>=129648&&n<=129782}const CUe="\uFEFF";function kH(n){return!!(n&&n.length>0&&n.charCodeAt(0)===65279)}function ode(n){return n=n%(2*26),n<26?String.fromCharCode(97+n):String.fromCharCode(65+n-26)}function $G(n,e){return n===0?e!==5&&e!==7:n===2&&e===3?!1:n===4||n===2||n===3||e===4||e===2||e===3?!0:!(n===8&&(e===8||e===9||e===11||e===12)||(n===11||n===9)&&(e===9||e===10)||(n===12||n===10)&&e===10||e===5||e===13||e===7||n===1||n===13&&e===14||n===6&&e===6)}const Rg=class Rg{static getInstance(){return Rg._INSTANCE||(Rg._INSTANCE=new Rg),Rg._INSTANCE}constructor(){this._data=yUe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let r=1;for(;r<=i;)if(e<t[3*r])r=2*r;else if(e>t[3*r+1])r=2*r+1;else return t[3*r+2];return 0}};Rg._INSTANCE=null;let FL=Rg;function yUe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function wUe(n,e){if(n===0)return 0;const t=SUe(n,e);if(t!==void 0)return t;const i=new yH(e,n);return i.prevCodePoint(),i.offset}function SUe(n,e){const t=new yH(e,n);let i=t.prevCodePoint();for(;xUe(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!xH(i))return;let r=t.offset;return r>0&&t.prevCodePoint()===8205&&(r=t.offset),r}function xUe(n){return 127995<=n&&n<=127999}const jc=class jc{static getInstance(e){return jc.cache.get(Array.from(e))}static getLocales(){return jc._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};jc.ambiguousCharacterData=new kf(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),jc.cache=new cUe({getCacheKey:JSON.stringify},e=>{function t(u){const d=new Map;for(let h=0;h<u.length;h+=2)d.set(u[h],u[h+1]);return d}function i(u,d){const h=new Map(u);for(const[f,g]of d)h.set(f,g);return h}function r(u,d){if(!u)return d;const h=new Map;for(const[f,g]of u)d.has(f)&&h.set(f,g);return h}const s=jc.ambiguousCharacterData.value;let o=e.filter(u=>!u.startsWith("_")&&u in s);o.length===0&&(o=["_default"]);let a;for(const u of o){const d=t(s[u]);a=r(a,d)}const l=t(s._common),c=i(l,a);return new jc(c)}),jc._locales=new kf(()=>Object.keys(jc.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let Xy=jc;const n0=class n0{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(n0.getRawData())),this._data}static isInvisibleCharacter(e){return n0.getData().has(e)}static get codePoints(){return n0.getData()}};n0._data=void 0;let pC=n0;const vT=class vT{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}};vT.INSTANCE=new vT;let j5=vT;function ade(n,e,t){typeof e=="string"&&(e=n.matchMedia(e)),e.addEventListener("change",t)}function kUe(n){return j5.INSTANCE.getZoomFactor(n)}const vb=navigator.userAgent,Sl=vb.indexOf("Firefox")>=0,pp=vb.indexOf("AppleWebKit")>=0,dS=vb.indexOf("Chrome")>=0,Wd=!dS&&vb.indexOf("Safari")>=0,lde=!dS&&!Wd&&pp;vb.indexOf("Electron/")>=0;const UG=vb.indexOf("Android")>=0;let pE=!1;if(typeof zn.matchMedia=="function"){const n=zn.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=zn.matchMedia("(display-mode: fullscreen)");pE=n.matches,ade(zn,n,({matches:t})=>{pE&&e.matches||(pE=t)})}function EUe(){return pE}const cde={clipboard:{writeText:hC||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:hC||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:hC||EUe()?0:navigator.keyboard||Wd?1:2,touch:"ontouchstart"in zn||navigator.maxTouchPoints>0,pointerEvents:zn.PointerEvent&&("ontouchstart"in zn||navigator.maxTouchPoints>0)};function K5(n,e){if(typeof n=="number"){if(n===0)return null;const t=(n&65535)>>>0,i=(n&4294901760)>>>16;return i!==0?new TR([Kx(t,e),Kx(i,e)]):new TR([Kx(t,e)])}else{const t=[];for(let i=0;i<n.length;i++)t.push(Kx(n[i],e));return new TR(t)}}function Kx(n,e){const t=!!(n&2048),i=!!(n&256),r=e===2?i:t,s=!!(n&1024),o=!!(n&512),a=e===2?t:i,l=n&255;return new Xp(r,s,o,a,l)}class Xp{constructor(e,t,i,r,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=r,this.keyCode=s}equals(e){return e instanceof Xp&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class TR{constructor(e){if(e.length===0)throw ID("chords");this.chords=e}}class LUe{constructor(e,t,i,r,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=r,this.keyLabel=s,this.keyAriaLabel=o}}class NUe{}function TUe(n){if(n.charCode){const t=String.fromCharCode(n.charCode).toUpperCase();return rd.fromString(t)}const e=n.keyCode;if(e===3)return 7;if(Sl)switch(e){case 59:return 85;case 60:if(co)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(hn)return 57;break}else if(pp){if(hn&&e===93)return 57;if(!hn&&e===92)return 57}return Uue[e]||0}const IUe=hn?256:2048,DUe=512,MUe=1024,RUe=hn?2048:256;class ii{constructor(e){var i;this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(i=t.getModifierState)==null?void 0:i.call(t,"AltGraph"),this.keyCode=TUe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=IUe),this.altKey&&(t|=DUe),this.shiftKey&&(t|=MUe),this.metaKey&&(t|=RUe),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Xp(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const jG=new WeakMap;function AUe(n){if(!n.parent||n.parent===n)return null;try{const e=n.location,t=n.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return n.parent}class OUe{static getSameOriginWindowChain(e){let t=jG.get(e);if(!t){t=[],jG.set(e,t);let i=e,r;do r=AUe(i),r?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=r;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,r=0;const s=this.getSameOriginWindowChain(e);for(const o of s){const a=o.window.deref();if(i+=(a==null?void 0:a.scrollY)??0,r+=(a==null?void 0:a.scrollX)??0,a===t||!o.iframeElement)break;const l=o.iframeElement.getBoundingClientRect();i+=l.top,r+=l.left}return{top:i,left:r}}}class nc{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=OUe.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Qp{constructor(e,t=0,i=0){var s;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let r=!1;if(dS){const o=navigator.userAgent.match(/Chrome\/(\d+)/);r=(o?parseInt(o[1]):123)<=122}if(e){const o=e,a=e,l=((s=e.view)==null?void 0:s.devicePixelRatio)||1;if(typeof o.wheelDeltaY<"u")r?this.deltaY=o.wheelDeltaY/(120*l):this.deltaY=o.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?Sl&&!hn?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")Wd&&Ao?this.deltaX=-(o.wheelDeltaX/120):r?this.deltaX=o.wheelDeltaX/(120*l):this.deltaX=o.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?Sl&&!hn?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(r?this.deltaY=e.wheelDelta/(120*l):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}}const ude=Symbol("MicrotaskDelay");function q5(n){return!!n&&typeof n.then=="function"}function dde(n){const e=new pb,t=n(e.token),i=new Promise((r,s)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),s(new lS)});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),r(a)},a=>{o.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(r,s){return i.then(r,s)}catch(r){return this.then(void 0,r)}finally(r){return i.finally(r)}}}class PUe{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(r=>{this.activePromise=null,t(r)},r=>{this.activePromise=null,i(r)})})}dispose(){this.isDisposed=!0}}const FUe=(n,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},n);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},BUe=n=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,n())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class hS{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,s)=>{this.doResolve=r,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const r=this.task;return this.task=null,r()}}));const i=()=>{var r;this.deferred=null,(r=this.doResolve)==null||r.call(this,null)};return this.deferred=t===ude?BUe(i):FUe(t,i),this.completionPromise}isTriggered(){var e;return!!((e=this.deferred)!=null&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)==null||e.call(this,new lS),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)==null||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class hde{constructor(e){this.delayer=new hS(e),this.throttler=new PUe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function Qy(n,e){return e?new Promise((t,i)=>{const r=setTimeout(()=>{s.dispose(),t()},n),s=e.onCancellationRequested(()=>{clearTimeout(r),s.dispose(),i(new lS)})}):dde(t=>Qy(n,t))}function G5(n,e=0,t){const i=setTimeout(()=>{n(),t&&r.dispose()},e),r=Pt(()=>{clearTimeout(i),t==null||t.deleteAndLeak(r)});return t==null||t.add(r),r}class vm{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Tn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Tn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class EH{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new Tn("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const r=i.setInterval(()=>{e()},t);this.disposable=Pt(()=>{i.clearInterval(r),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class bs{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)==null||e.call(this)}}let fde,mC;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?mC=(n,e)=>{Rue(()=>{if(t)return;const i=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:mC=(n,e,t)=>{const i=n.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let r=!1;return{dispose(){r||(r=!0,n.cancelIdleCallback(i))}}},fde=n=>mC(globalThis,n)})();class HUe{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=mC(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class VUe extends HUe{constructor(e){super(globalThis,e)}}class gde{get isRejected(){var e;return((e=this.outcome)==null?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new lS)}}var Y5;(function(n){async function e(i){let r;const s=await Promise.all(i.map(o=>o.then(a=>a,a=>{r||(r=a)})));if(typeof r<"u")throw r;return s}n.settled=e;function t(i){return new Promise(async(r,s)=>{try{await i(r,s)}catch(o){s(o)}})}n.withAsyncBody=t})(Y5||(Y5={}));const _o=class _o{static fromArray(e){return new _o(t=>{t.emitMany(e)})}static fromPromise(e){return new _o(async t=>{t.emitMany(await e)})}static fromPromises(e){return new _o(async t=>{await Promise.all(e.map(async i=>t.emitOne(await i)))})}static merge(e){return new _o(async t=>{await Promise.all(e.map(async i=>{for await(const r of i)t.emitOne(r)}))})}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new ae,queueMicrotask(async()=>{const i={emitOne:r=>this.emitOne(r),emitMany:r=>this.emitMany(r),reject:r=>this.reject(r)};try{await Promise.resolve(e(i)),this.resolve()}catch(r){this.reject(r)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Be.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var t;return(t=this._onReturn)==null||t.call(this),{done:!0,value:void 0}}}}static map(e,t){return new _o(async i=>{for await(const r of e)i.emitOne(t(r))})}map(e){return _o.map(this,e)}static filter(e,t){return new _o(async i=>{for await(const r of e)t(r)&&i.emitOne(r)})}filter(e){return _o.filter(this,e)}static coalesce(e){return _o.filter(e,t=>!!t)}coalesce(){return _o.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return _o.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};_o.EMPTY=_o.fromArray([]);let KG=_o;/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:pde,setPrototypeOf:qG,isFrozen:zUe,getPrototypeOf:WUe,getOwnPropertyDescriptor:$Ue}=Object;let{freeze:Oo,seal:xl,create:mde}=Object,{apply:Z5,construct:X5}=typeof Reflect<"u"&&Reflect;Oo||(Oo=function(e){return e});xl||(xl=function(e){return e});Z5||(Z5=function(e,t,i){return e.apply(t,i)});X5||(X5=function(e,t){return new e(...t)});const qx=Pa(Array.prototype.forEach),GG=Pa(Array.prototype.pop),Yb=Pa(Array.prototype.push),mE=Pa(String.prototype.toLowerCase),IR=Pa(String.prototype.toString),YG=Pa(String.prototype.match),Zb=Pa(String.prototype.replace),UUe=Pa(String.prototype.indexOf),jUe=Pa(String.prototype.trim),Hl=Pa(Object.prototype.hasOwnProperty),mo=Pa(RegExp.prototype.test),Xb=KUe(TypeError);function Pa(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return Z5(n,e,i)}}function KUe(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return X5(n,t)}}function Hn(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mE;qG&&qG(n,null);let i=e.length;for(;i--;){let r=e[i];if(typeof r=="string"){const s=t(r);s!==r&&(zUe(e)||(e[i]=s),r=s)}n[r]=!0}return n}function qUe(n){for(let e=0;e<n.length;e++)Hl(n,e)||(n[e]=null);return n}function cg(n){const e=mde(null);for(const[t,i]of pde(n))Hl(n,t)&&(Array.isArray(i)?e[t]=qUe(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=cg(i):e[t]=i);return e}function Qb(n,e){for(;n!==null;){const i=$Ue(n,e);if(i){if(i.get)return Pa(i.get);if(typeof i.value=="function")return Pa(i.value)}n=WUe(n)}function t(){return null}return t}const ZG=Oo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),DR=Oo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),MR=Oo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),GUe=Oo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),RR=Oo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),YUe=Oo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),XG=Oo(["#text"]),QG=Oo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),AR=Oo(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),JG=Oo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Gx=Oo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ZUe=xl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),XUe=xl(/<%[\w\W]*|[\w\W]*%>/gm),QUe=xl(/\${[\w\W]*}/gm),JUe=xl(/^data-[\-\w.\u00B7-\uFFFF]/),eje=xl(/^aria-[\-\w]+$/),vde=xl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),tje=xl(/^(?:\w+script|data):/i),nje=xl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),bde=xl(/^html$/i),ije=xl(/^[a-z][.\w]*(-[.\w]+)+$/i);var eY=Object.freeze({__proto__:null,MUSTACHE_EXPR:ZUe,ERB_EXPR:XUe,TMPLIT_EXPR:QUe,DATA_ATTR:JUe,ARIA_ATTR:eje,IS_ALLOWED_URI:vde,IS_SCRIPT_OR_DATA:tje,ATTR_WHITESPACE:nje,DOCTYPE_NAME:bde,CUSTOM_ELEMENT:ije});const Jb={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},rje=function(){return typeof window>"u"?null:window},sje=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(i=t.getAttribute(r));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function _de(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rje();const e=pt=>_de(pt);if(e.version="3.1.7",e.removed=[],!n||!n.document||n.document.nodeType!==Jb.document)return e.isSupported=!1,e;let{document:t}=n;const i=t,r=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:f}=n,g=l.prototype,p=Qb(g,"cloneNode"),v=Qb(g,"remove"),b=Qb(g,"nextSibling"),_=Qb(g,"childNodes"),y=Qb(g,"parentNode");if(typeof o=="function"){const pt=t.createElement("template");pt.content&&pt.content.ownerDocument&&(t=pt.content.ownerDocument)}let C,w="";const{implementation:x,createNodeIterator:k,createDocumentFragment:E,getElementsByTagName:L}=t,{importNode:M}=i;let D={};e.isSupported=typeof pde=="function"&&typeof y=="function"&&x&&x.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:O,ERB_EXPR:A,TMPLIT_EXPR:R,DATA_ATTR:V,ARIA_ATTR:F,IS_SCRIPT_OR_DATA:T,ATTR_WHITESPACE:N,CUSTOM_ELEMENT:B}=eY;let{IS_ALLOWED_URI:$}=eY,j=null;const Y=Hn({},[...ZG,...DR,...MR,...RR,...XG]);let G=null;const X=Hn({},[...QG,...AR,...JG,...Gx]);let q=Object.seal(mde(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),re=null,ge=null,ye=!0,we=!0,Ie=!1,Fe=!0,ze=!1,Me=!0,Pe=!1,tt=!1,Ae=!1,mt=!1,ft=!1,Le=!1,Ge=!0,Oe=!1;const xe="user-content-";let at=!0,gt=!1,Ct={},nt=null;const se=Hn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let fe=null;const Ne=Hn({},["audio","video","img","source","image","track"]);let Ve=null;const lt=Hn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dt="http://www.w3.org/1998/Math/MathML",Qt="http://www.w3.org/2000/svg",he="http://www.w3.org/1999/xhtml";let Ke=he,ue=!1,ee=null;const oe=Hn({},[Dt,Qt,he],IR);let pe=null;const le=["application/xhtml+xml","text/html"],ve="text/html";let He=null,Qe=null;const ut=t.createElement("form"),St=function(ce){return ce instanceof RegExp||ce instanceof Function},Lt=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Qe&&Qe===ce)){if((!ce||typeof ce!="object")&&(ce={}),ce=cg(ce),pe=le.indexOf(ce.PARSER_MEDIA_TYPE)===-1?ve:ce.PARSER_MEDIA_TYPE,He=pe==="application/xhtml+xml"?IR:mE,j=Hl(ce,"ALLOWED_TAGS")?Hn({},ce.ALLOWED_TAGS,He):Y,G=Hl(ce,"ALLOWED_ATTR")?Hn({},ce.ALLOWED_ATTR,He):X,ee=Hl(ce,"ALLOWED_NAMESPACES")?Hn({},ce.ALLOWED_NAMESPACES,IR):oe,Ve=Hl(ce,"ADD_URI_SAFE_ATTR")?Hn(cg(lt),ce.ADD_URI_SAFE_ATTR,He):lt,fe=Hl(ce,"ADD_DATA_URI_TAGS")?Hn(cg(Ne),ce.ADD_DATA_URI_TAGS,He):Ne,nt=Hl(ce,"FORBID_CONTENTS")?Hn({},ce.FORBID_CONTENTS,He):se,re=Hl(ce,"FORBID_TAGS")?Hn({},ce.FORBID_TAGS,He):{},ge=Hl(ce,"FORBID_ATTR")?Hn({},ce.FORBID_ATTR,He):{},Ct=Hl(ce,"USE_PROFILES")?ce.USE_PROFILES:!1,ye=ce.ALLOW_ARIA_ATTR!==!1,we=ce.ALLOW_DATA_ATTR!==!1,Ie=ce.ALLOW_UNKNOWN_PROTOCOLS||!1,Fe=ce.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ze=ce.SAFE_FOR_TEMPLATES||!1,Me=ce.SAFE_FOR_XML!==!1,Pe=ce.WHOLE_DOCUMENT||!1,mt=ce.RETURN_DOM||!1,ft=ce.RETURN_DOM_FRAGMENT||!1,Le=ce.RETURN_TRUSTED_TYPE||!1,Ae=ce.FORCE_BODY||!1,Ge=ce.SANITIZE_DOM!==!1,Oe=ce.SANITIZE_NAMED_PROPS||!1,at=ce.KEEP_CONTENT!==!1,gt=ce.IN_PLACE||!1,$=ce.ALLOWED_URI_REGEXP||vde,Ke=ce.NAMESPACE||he,q=ce.CUSTOM_ELEMENT_HANDLING||{},ce.CUSTOM_ELEMENT_HANDLING&&St(ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&St(ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&typeof ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ze&&(we=!1),ft&&(mt=!0),Ct&&(j=Hn({},XG),G=[],Ct.html===!0&&(Hn(j,ZG),Hn(G,QG)),Ct.svg===!0&&(Hn(j,DR),Hn(G,AR),Hn(G,Gx)),Ct.svgFilters===!0&&(Hn(j,MR),Hn(G,AR),Hn(G,Gx)),Ct.mathMl===!0&&(Hn(j,RR),Hn(G,JG),Hn(G,Gx))),ce.ADD_TAGS&&(j===Y&&(j=cg(j)),Hn(j,ce.ADD_TAGS,He)),ce.ADD_ATTR&&(G===X&&(G=cg(G)),Hn(G,ce.ADD_ATTR,He)),ce.ADD_URI_SAFE_ATTR&&Hn(Ve,ce.ADD_URI_SAFE_ATTR,He),ce.FORBID_CONTENTS&&(nt===se&&(nt=cg(nt)),Hn(nt,ce.FORBID_CONTENTS,He)),at&&(j["#text"]=!0),Pe&&Hn(j,["html","head","body"]),j.table&&(Hn(j,["tbody"]),delete re.tbody),ce.TRUSTED_TYPES_POLICY){if(typeof ce.TRUSTED_TYPES_POLICY.createHTML!="function")throw Xb('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ce.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Xb('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=ce.TRUSTED_TYPES_POLICY,w=C.createHTML("")}else C===void 0&&(C=sje(f,r)),C!==null&&typeof w=="string"&&(w=C.createHTML(""));Oo&&Oo(ce),Qe=ce}},be=Hn({},["mi","mo","mn","ms","mtext"]),H=Hn({},["annotation-xml"]),W=Hn({},["title","style","font","a","script"]),K=Hn({},[...DR,...MR,...GUe]),Q=Hn({},[...RR,...YUe]),ie=function(ce){let Xe=y(ce);(!Xe||!Xe.tagName)&&(Xe={namespaceURI:Ke,tagName:"template"});const Re=mE(ce.tagName),st=mE(Xe.tagName);return ee[ce.namespaceURI]?ce.namespaceURI===Qt?Xe.namespaceURI===he?Re==="svg":Xe.namespaceURI===Dt?Re==="svg"&&(st==="annotation-xml"||be[st]):!!K[Re]:ce.namespaceURI===Dt?Xe.namespaceURI===he?Re==="math":Xe.namespaceURI===Qt?Re==="math"&&H[st]:!!Q[Re]:ce.namespaceURI===he?Xe.namespaceURI===Qt&&!H[st]||Xe.namespaceURI===Dt&&!be[st]?!1:!Q[Re]&&(W[Re]||!K[Re]):!!(pe==="application/xhtml+xml"&&ee[ce.namespaceURI]):!1},me=function(ce){Yb(e.removed,{element:ce});try{y(ce).removeChild(ce)}catch{v(ce)}},Se=function(ce,Xe){try{Yb(e.removed,{attribute:Xe.getAttributeNode(ce),from:Xe})}catch{Yb(e.removed,{attribute:null,from:Xe})}if(Xe.removeAttribute(ce),ce==="is"&&!G[ce])if(mt||ft)try{me(Xe)}catch{}else try{Xe.setAttribute(ce,"")}catch{}},Ze=function(ce){let Xe=null,Re=null;if(Ae)ce="<remove></remove>"+ce;else{const fn=YG(ce,/^[\r\n\t ]+/);Re=fn&&fn[0]}pe==="application/xhtml+xml"&&Ke===he&&(ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ce+"</body></html>");const st=C?C.createHTML(ce):ce;if(Ke===he)try{Xe=new h().parseFromString(st,pe)}catch{}if(!Xe||!Xe.documentElement){Xe=x.createDocument(Ke,"template",null);try{Xe.documentElement.innerHTML=ue?w:st}catch{}}const Bt=Xe.body||Xe.documentElement;return ce&&Re&&Bt.insertBefore(t.createTextNode(Re),Bt.childNodes[0]||null),Ke===he?L.call(Xe,Pe?"html":"body")[0]:Pe?Xe.documentElement:Bt},Je=function(ce){return k.call(ce.ownerDocument||ce,ce,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},wt=function(ce){return ce instanceof d&&(typeof ce.nodeName!="string"||typeof ce.textContent!="string"||typeof ce.removeChild!="function"||!(ce.attributes instanceof u)||typeof ce.removeAttribute!="function"||typeof ce.setAttribute!="function"||typeof ce.namespaceURI!="string"||typeof ce.insertBefore!="function"||typeof ce.hasChildNodes!="function")},zt=function(ce){return typeof a=="function"&&ce instanceof a},Zt=function(ce,Xe,Re){D[ce]&&qx(D[ce],st=>{st.call(e,Xe,Re,Qe)})},Dn=function(ce){let Xe=null;if(Zt("beforeSanitizeElements",ce,null),wt(ce))return me(ce),!0;const Re=He(ce.nodeName);if(Zt("uponSanitizeElement",ce,{tagName:Re,allowedTags:j}),ce.hasChildNodes()&&!zt(ce.firstElementChild)&&mo(/<[/\w]/g,ce.innerHTML)&&mo(/<[/\w]/g,ce.textContent)||ce.nodeType===Jb.progressingInstruction||Me&&ce.nodeType===Jb.comment&&mo(/<[/\w]/g,ce.data))return me(ce),!0;if(!j[Re]||re[Re]){if(!re[Re]&&oi(Re)&&(q.tagNameCheck instanceof RegExp&&mo(q.tagNameCheck,Re)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Re)))return!1;if(at&&!nt[Re]){const st=y(ce)||ce.parentNode,Bt=_(ce)||ce.childNodes;if(Bt&&st){const fn=Bt.length;for(let jn=fn-1;jn>=0;--jn){const Nr=p(Bt[jn],!0);Nr.__removalCount=(ce.__removalCount||0)+1,st.insertBefore(Nr,b(ce))}}}return me(ce),!0}return ce instanceof l&&!ie(ce)||(Re==="noscript"||Re==="noembed"||Re==="noframes")&&mo(/<\/no(script|embed|frames)/i,ce.innerHTML)?(me(ce),!0):(ze&&ce.nodeType===Jb.text&&(Xe=ce.textContent,qx([O,A,R],st=>{Xe=Zb(Xe,st," ")}),ce.textContent!==Xe&&(Yb(e.removed,{element:ce.cloneNode()}),ce.textContent=Xe)),Zt("afterSanitizeElements",ce,null),!1)},on=function(ce,Xe,Re){if(Ge&&(Xe==="id"||Xe==="name")&&(Re in t||Re in ut))return!1;if(!(we&&!ge[Xe]&&mo(V,Xe))){if(!(ye&&mo(F,Xe))){if(!G[Xe]||ge[Xe]){if(!(oi(ce)&&(q.tagNameCheck instanceof RegExp&&mo(q.tagNameCheck,ce)||q.tagNameCheck instanceof Function&&q.tagNameCheck(ce))&&(q.attributeNameCheck instanceof RegExp&&mo(q.attributeNameCheck,Xe)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(Xe))||Xe==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&mo(q.tagNameCheck,Re)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Re))))return!1}else if(!Ve[Xe]){if(!mo($,Zb(Re,N,""))){if(!((Xe==="src"||Xe==="xlink:href"||Xe==="href")&&ce!=="script"&&UUe(Re,"data:")===0&&fe[ce])){if(!(Ie&&!mo(T,Zb(Re,N,"")))){if(Re)return!1}}}}}}return!0},oi=function(ce){return ce!=="annotation-xml"&&YG(ce,B)},nn=function(ce){Zt("beforeSanitizeAttributes",ce,null);const{attributes:Xe}=ce;if(!Xe)return;const Re={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:G};let st=Xe.length;for(;st--;){const Bt=Xe[st],{name:fn,namespaceURI:jn,value:Nr}=Bt,$r=He(fn);let Wi=fn==="value"?Nr:jUe(Nr);if(Re.attrName=$r,Re.attrValue=Wi,Re.keepAttr=!0,Re.forceKeepAttr=void 0,Zt("uponSanitizeAttribute",ce,Re),Wi=Re.attrValue,Re.forceKeepAttr||(Se(fn,ce),!Re.keepAttr))continue;if(!Fe&&mo(/\/>/i,Wi)){Se(fn,ce);continue}ze&&qx([O,A,R],Iu=>{Wi=Zb(Wi,Iu," ")});const eh=He(ce.nodeName);if(on(eh,$r,Wi)){if(Oe&&($r==="id"||$r==="name")&&(Se(fn,ce),Wi=xe+Wi),Me&&mo(/((--!?|])>)|<\/(style|title)/i,Wi)){Se(fn,ce);continue}if(C&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!jn)switch(f.getAttributeType(eh,$r)){case"TrustedHTML":{Wi=C.createHTML(Wi);break}case"TrustedScriptURL":{Wi=C.createScriptURL(Wi);break}}try{jn?ce.setAttributeNS(jn,fn,Wi):ce.setAttribute(fn,Wi),wt(ce)?me(ce):GG(e.removed)}catch{}}}Zt("afterSanitizeAttributes",ce,null)},bn=function pt(ce){let Xe=null;const Re=Je(ce);for(Zt("beforeSanitizeShadowDOM",ce,null);Xe=Re.nextNode();)Zt("uponSanitizeShadowNode",Xe,null),!Dn(Xe)&&(Xe.content instanceof s&&pt(Xe.content),nn(Xe));Zt("afterSanitizeShadowDOM",ce,null)};return e.sanitize=function(pt){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Xe=null,Re=null,st=null,Bt=null;if(ue=!pt,ue&&(pt="<!-->"),typeof pt!="string"&&!zt(pt))if(typeof pt.toString=="function"){if(pt=pt.toString(),typeof pt!="string")throw Xb("dirty is not a string, aborting")}else throw Xb("toString is not a function");if(!e.isSupported)return pt;if(tt||Lt(ce),e.removed=[],typeof pt=="string"&&(gt=!1),gt){if(pt.nodeName){const Nr=He(pt.nodeName);if(!j[Nr]||re[Nr])throw Xb("root node is forbidden and cannot be sanitized in-place")}}else if(pt instanceof a)Xe=Ze("<!---->"),Re=Xe.ownerDocument.importNode(pt,!0),Re.nodeType===Jb.element&&Re.nodeName==="BODY"||Re.nodeName==="HTML"?Xe=Re:Xe.appendChild(Re);else{if(!mt&&!ze&&!Pe&&pt.indexOf("<")===-1)return C&&Le?C.createHTML(pt):pt;if(Xe=Ze(pt),!Xe)return mt?null:Le?w:""}Xe&&Ae&&me(Xe.firstChild);const fn=Je(gt?pt:Xe);for(;st=fn.nextNode();)Dn(st)||(st.content instanceof s&&bn(st.content),nn(st));if(gt)return pt;if(mt){if(ft)for(Bt=E.call(Xe.ownerDocument);Xe.firstChild;)Bt.appendChild(Xe.firstChild);else Bt=Xe;return(G.shadowroot||G.shadowrootmode)&&(Bt=M.call(i,Bt,!0)),Bt}let jn=Pe?Xe.outerHTML:Xe.innerHTML;return Pe&&j["!doctype"]&&Xe.ownerDocument&&Xe.ownerDocument.doctype&&Xe.ownerDocument.doctype.name&&mo(bde,Xe.ownerDocument.doctype.name)&&(jn="<!DOCTYPE "+Xe.ownerDocument.doctype.name+`>
`+jn),ze&&qx([O,A,R],Nr=>{jn=Zb(jn,Nr," ")}),C&&Le?C.createHTML(jn):jn},e.setConfig=function(){let pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lt(pt),tt=!0},e.clearConfig=function(){Qe=null,tt=!1},e.isValidAttribute=function(pt,ce,Xe){Qe||Lt({});const Re=He(pt),st=He(ce);return on(Re,st,Xe)},e.addHook=function(pt,ce){typeof ce=="function"&&(D[pt]=D[pt]||[],Yb(D[pt],ce))},e.removeHook=function(pt){if(D[pt])return GG(D[pt])},e.removeHooks=function(pt){D[pt]&&(D[pt]=[])},e.removeAllHooks=function(){D={}},e}var ku=_de();ku.version;ku.isSupported;const Cde=ku.sanitize;ku.setConfig;ku.clearConfig;ku.isValidAttribute;const yde=ku.addHook,wde=ku.removeHook;ku.removeHooks;ku.removeAllHooks;var Wt;(function(n){n.inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.vscodeManagedRemoteResource="vscode-managed-remote-resource",n.vscodeUserData="vscode-userdata",n.vscodeCustomEditor="vscode-custom-editor",n.vscodeNotebookCell="vscode-notebook-cell",n.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",n.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",n.vscodeNotebookCellOutput="vscode-notebook-cell-output",n.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",n.vscodeNotebookMetadata="vscode-notebook-metadata",n.vscodeInteractiveInput="vscode-interactive-input",n.vscodeSettings="vscode-settings",n.vscodeWorkspaceTrust="vscode-workspace-trust",n.vscodeTerminal="vscode-terminal",n.vscodeChatCodeBlock="vscode-chat-code-block",n.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",n.vscodeChatSesssion="vscode-chat-editor",n.webviewPanel="webview-panel",n.vscodeWebview="vscode-webview",n.extension="extension",n.vscodeFileResource="vscode-file",n.tmp="tmp",n.vsls="vsls",n.vscodeSourceControl="vscode-scm",n.commentsInput="comment",n.codeSetting="code-setting",n.outputChannel="output"})(Wt||(Wt={}));function LH(n,e){return Ut.isUri(n)?Ov(n.scheme,e):_H(n,e+":")}function tY(n,...e){return e.some(t=>LH(n,t))}const oje="tkn";class aje{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return Ai.join(this._serverRootPath,Wt.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return $n(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const r=this._ports[t],s=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(o+=`&${oje}=${encodeURIComponent(s)}`),Ut.from({scheme:fb?this._preferredWebSchema:Wt.vscodeRemoteResource,authority:`${i}:${r}`,path:this._remoteResourcesPath,query:o})}}const Sde=new aje,lje="vscode-app",jC=class jC{asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===Wt.vscodeRemote?Sde.rewrite(e):e.scheme===Wt.file&&(hC||CWe===`${Wt.vscodeFileResource}://${jC.FALLBACK_AUTHORITY}`)?e.with({scheme:Wt.vscodeFileResource,authority:e.authority||jC.FALLBACK_AUTHORITY,query:null,fragment:null}):e}toUri(e,t){if(Ut.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return Ut.joinPath(Ut.parse(i,!0),e);const r=U$e(i,e);return Ut.file(r)}return Ut.parse(t.toUrl(e))}};jC.FALLBACK_AUTHORITY=lje;let Q5=jC;const RD=new Q5;var J5;(function(n){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);n.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(s){let o;typeof s=="string"?o=new URL(s).searchParams:s instanceof URL?o=s.searchParams:Ut.isUri(s)&&(o=new URL(s.toString(!0)).searchParams);const a=o==null?void 0:o.get(t);if(a)return e.get(a)}n.getHeadersFromQuery=i;function r(s,o,a){if(!globalThis.crossOriginIsolated)return;const l=o&&a?"3":a?"2":"1";s instanceof URLSearchParams?s.set(t,l):s[t]=l}n.addSearchParam=r})(J5||(J5={}));function xde(n){return AD(n,0)}function AD(n,e){switch(typeof n){case"object":return n===null?pd(349,e):Array.isArray(n)?uje(n,e):dje(n,e);case"string":return NH(n,e);case"boolean":return cje(n,e);case"number":return pd(n,e);case"undefined":return pd(937,e);default:return pd(617,e)}}function pd(n,e){return(e<<5)-e+n|0}function cje(n,e){return pd(n?433:863,e)}function NH(n,e){e=pd(149417,e);for(let t=0,i=n.length;t<i;t++)e=pd(n.charCodeAt(t),e);return e}function uje(n,e){return e=pd(104579,e),n.reduce((t,i)=>AD(i,t),e)}function dje(n,e){return e=pd(181387,e),Object.keys(n).sort().reduce((t,i)=>(t=NH(i,t),AD(n[i],t)),e)}function OR(n,e,t=32){const i=t-e,r=~((1<<i)-1);return(n<<e|(r&n)>>>i)>>>0}function nY(n,e=0,t=n.byteLength,i=0){for(let r=0;r<t;r++)n[e+r]=i}function hje(n,e,t="0"){for(;n.length<e;)n=t+n;return n}function e_(n,e=32){return n instanceof ArrayBuffer?Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join(""):hje((n>>>0).toString(16),e/4)}const bT=class bT{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let r=this._buffLen,s=this._leftoverHighSurrogate,o,a;for(s!==0?(o=s,a=-1,s=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(gr(o))if(a+1<t){const c=e.charCodeAt(a+1);N1(c)?(a++,l=CH(o,c)):l=65533}else{s=o;break}else N1(o)&&(l=65533);if(r=this._push(i,r,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=r,this._leftoverHighSurrogate=s}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),e_(this._h0)+e_(this._h1)+e_(this._h2)+e_(this._h3)+e_(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,nY(this._buff,this._buffLen),this._buffLen>56&&(this._step(),nY(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=bT._bigBlock32,t=this._buffDV;for(let d=0;d<64;d+=4)e.setUint32(d,t.getUint32(d,!1),!1);for(let d=64;d<320;d+=4)e.setUint32(d,OR(e.getUint32(d-12,!1)^e.getUint32(d-32,!1)^e.getUint32(d-56,!1)^e.getUint32(d-64,!1),1),!1);let i=this._h0,r=this._h1,s=this._h2,o=this._h3,a=this._h4,l,c,u;for(let d=0;d<80;d++)d<20?(l=r&s|~r&o,c=1518500249):d<40?(l=r^s^o,c=1859775393):d<60?(l=r&s|r&o|s&o,c=2400959708):(l=r^s^o,c=3395469782),u=OR(i,5)+l+a+c+e.getUint32(d*4,!1)&4294967295,a=o,o=s,s=OR(r,30),r=i,i=u;this._h0=this._h0+i&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}};bT._bigBlock32=new DataView(new ArrayBuffer(320));let e8=bT;const{registerWindow:Bft,getWindow:bt,getDocument:Hft,getWindows:kde,getWindowsCount:fje,getWindowId:BL,getWindowById:iY,hasWindow:Vft,onDidRegisterWindow:OD,onWillUnregisterWindow:gje,onDidUnregisterWindow:pje}=function(){const n=new Map;lUe(zn,1);const e={window:zn,disposables:new dt};n.set(zn.vscodeWindowId,e);const t=new ae,i=new ae,r=new ae;function s(o,a){return(typeof o=="number"?n.get(o):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:r.event,onDidUnregisterWindow:i.event,registerWindow(o){if(n.has(o.vscodeWindowId))return ke.None;const a=new dt,l={window:o,disposables:a.add(new dt)};return n.set(o.vscodeWindowId,l),a.add(Pt(()=>{n.delete(o.vscodeWindowId),i.fire(o)})),a.add(_e(o,We.BEFORE_UNLOAD,()=>{r.fire(o)})),t.fire(l),a},getWindows(){return n.values()},getWindowsCount(){return n.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return n.has(o)},getWindowById:s,getWindow(o){var c;const a=o;if((c=a==null?void 0:a.ownerDocument)!=null&&c.defaultView)return a.ownerDocument.defaultView.window;const l=o;return l!=null&&l.view?l.view.window:zn},getDocument(o){return bt(o).document}}}();function pc(n){for(;n.firstChild;)n.firstChild.remove()}class mje{constructor(e,t,i,r){this._node=e,this._type=t,this._handler=i,this._options=r||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function _e(n,e,t,i){return new mje(n,e,t,i)}function vje(n,e){return function(t){return e(new nc(n,t))}}function bje(n){return function(e){return n(new ii(e))}}const vr=function(e,t,i,r){let s=i;return t==="click"||t==="mousedown"||t==="contextmenu"?s=vje(bt(e),i):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=bje(i)),_e(e,t,s,r)};function Yx(n,e,t){return mC(n,e,t)}let Ede,Po;class TH extends EH{constructor(e){super(),this.defaultTarget=e&&bt(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class PR{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){$n(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const n=new Map,e=new Map,t=new Map,i=new Map,r=s=>{t.set(s,!1);const o=n.get(s)??[];for(e.set(s,o),n.set(s,[]),i.set(s,!0);o.length>0;)o.sort(PR.sort),o.shift().execute();i.set(s,!1)};Po=(s,o,a=0)=>{const l=BL(s),c=new PR(o,a);let u=n.get(l);return u||(u=[],n.set(l,u)),u.push(c),t.get(l)||(t.set(l,!0),s.requestAnimationFrame(()=>r(l))),c},Ede=(s,o,a)=>{const l=BL(s);if(i.get(l)){const c=new PR(o,a);let u=e.get(l);return u||(u=[],e.set(l,u)),u.push(c),c}else return Po(s,o,a)}})();function IH(n){return bt(n).getComputedStyle(n,null)}function t8(n,e){const t=bt(n),i=t.document;if(n!==i.body)return new sd(n.clientWidth,n.clientHeight);if(Yp&&(t!=null&&t.visualViewport))return new sd(t.visualViewport.width,t.visualViewport.height);if(t!=null&&t.innerWidth&&t.innerHeight)return new sd(t.innerWidth,t.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new sd(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new sd(i.documentElement.clientWidth,i.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class ki{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const r=IH(e),s=r?r.getPropertyValue(t):"0";return ki.convertToPixels(e,s)}static getBorderLeftWidth(e){return ki.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return ki.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return ki.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return ki.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return ki.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return ki.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return ki.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return ki.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return ki.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return ki.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return ki.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return ki.getDimension(e,"margin-bottom","marginBottom")}}const Ag=class Ag{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Ag(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Ag?e:new Ag(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};Ag.None=new Ag(0,0);let sd=Ag;function _je(n){let e=n.offsetParent,t=n.offsetTop,i=n.offsetLeft;for(;(n=n.parentNode)!==null&&n!==n.ownerDocument.body&&n!==n.ownerDocument.documentElement;){t-=n.scrollTop;const r=Nde(n)?null:IH(n);r&&(i-=r.direction!=="rtl"?n.scrollLeft:-n.scrollLeft),n===e&&(i+=ki.getBorderLeftWidth(n),t+=ki.getBorderTopWidth(n),t+=n.offsetTop,i+=n.offsetLeft,e=n.offsetParent)}return{left:i,top:t}}function Ta(n){const e=n.getBoundingClientRect(),t=bt(n);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function Lde(n){let e=n,t=1;do{const i=IH(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function DH(n){const e=ki.getMarginLeft(n)+ki.getMarginRight(n);return n.offsetWidth+e}function FR(n){const e=ki.getBorderLeftWidth(n)+ki.getBorderRightWidth(n),t=ki.getPaddingLeft(n)+ki.getPaddingRight(n);return n.offsetWidth-e-t}function Cje(n){const e=ki.getBorderTopWidth(n)+ki.getBorderBottomWidth(n),t=ki.getPaddingTop(n)+ki.getPaddingBottom(n);return n.offsetHeight-e-t}function n8(n){const e=ki.getMarginTop(n)+ki.getMarginBottom(n);return n.offsetHeight+e}function mr(n,e){return!!(e!=null&&e.contains(n))}function yje(n,e,t){for(;n&&n.nodeType===n.ELEMENT_NODE;){if(n.classList.contains(e))return n;if(t){if(typeof t=="string"){if(n.classList.contains(t))return null}else if(n===t)return null}n=n.parentNode}return null}function BR(n,e,t){return!!yje(n,e,t)}function Nde(n){return n&&!!n.host&&!!n.mode}function HL(n){return!!T1(n)}function T1(n){var e;for(;n.parentNode;){if(n===((e=n.ownerDocument)==null?void 0:e.body))return null;n=n.parentNode}return Nde(n)?n:null}function _s(){let n=RH().activeElement;for(;n!=null&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function MH(n){return _s()===n}function Tde(n){return mr(_s(),n)}function RH(){return fje()<=1?zn.document:Array.from(kde()).map(({window:e})=>e.document).find(e=>e.hasFocus())??zn.document}function L_(){var e;return((e=RH().defaultView)==null?void 0:e.window)??zn}const Ide=new Map;function Fa(n=zn.document.head,e,t){const i=document.createElement("style");if(i.type="text/css",i.media="screen",e==null||e(i),n.appendChild(i),t&&t.add(Pt(()=>i.remove())),n===zn.document.head){const r=new Set;Ide.set(i,r);for(const{window:s,disposables:o}of kde()){if(s===zn)continue;const a=o.add(wje(i,r,s));t==null||t.add(a)}}return i}function wje(n,e,t){var s,o;const i=new dt,r=n.cloneNode(!0);t.document.head.appendChild(r),i.add(Pt(()=>r.remove()));for(const a of kje(n))(o=r.sheet)==null||o.insertRule(a.cssText,(s=r.sheet)==null?void 0:s.cssRules.length);return i.add(Sje.observe(n,i,{childList:!0})(()=>{r.textContent=n.textContent})),e.add(r),i.add(Pt(()=>e.delete(r))),i}const Sje=new class{constructor(){this.mutationObservers=new Map}observe(n,e,t){let i=this.mutationObservers.get(n);i||(i=new Map,this.mutationObservers.set(n,i));const r=xde(t);let s=i.get(r);if(s)s.users+=1;else{const o=new ae,a=new MutationObserver(c=>o.fire(c));a.observe(n,t);const l=s={users:1,observer:a,onDidMutate:o.event};e.add(Pt(()=>{l.users-=1,l.users===0&&(o.dispose(),a.disconnect(),i==null||i.delete(r),(i==null?void 0:i.size)===0&&this.mutationObservers.delete(n))})),i.set(r,s)}return s.onDidMutate}};let HR=null;function xje(){return HR||(HR=Fa()),HR}function kje(n){var e,t;return(e=n==null?void 0:n.sheet)!=null&&e.rules?n.sheet.rules:(t=n==null?void 0:n.sheet)!=null&&t.cssRules?n.sheet.cssRules:[]}function i8(n,e,t=xje()){var i;if(!(!t||!e)){(i=t.sheet)==null||i.insertRule(`${n} {${e}}`,0);for(const r of Ide.get(t)??[])i8(n,e,r)}}function kr(n){return n instanceof HTMLElement||n instanceof bt(n).HTMLElement}function rY(n){return n instanceof HTMLAnchorElement||n instanceof bt(n).HTMLAnchorElement}function Eje(n){return n instanceof SVGElement||n instanceof bt(n).SVGElement}function AH(n){return n instanceof MouseEvent||n instanceof bt(n).MouseEvent}function td(n){return n instanceof KeyboardEvent||n instanceof bt(n).KeyboardEvent}const We={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:pp?"webkitAnimationStart":"animationstart",ANIMATION_END:pp?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:pp?"webkitAnimationIteration":"animationiteration"};function Lje(n){const e=n;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const en={stop:(n,e)=>(n.preventDefault(),e&&n.stopPropagation(),n)};function Nje(n){const e=[];for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)e[t]=n.scrollTop,n=n.parentNode;return e}function Tje(n,e){for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)n.scrollTop!==e[t]&&(n.scrollTop=e[t]),n=n.parentNode}class VL extends ke{static hasFocusWithin(e){if(kr(e)){const t=T1(e),i=t?t.activeElement:e.ownerDocument.activeElement;return mr(i,e)}else{const t=e;return mr(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new ae),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new ae),this.onDidBlur=this._onDidBlur.event;let t=VL.hasFocusWithin(e),i=!1;const r=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(i=!0,(kr(e)?bt(e):e).setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{VL.hasFocusWithin(e)!==t&&(t?s():r())},this._register(_e(e,We.FOCUS,r,!0)),this._register(_e(e,We.BLUR,s,!0)),kr(e)&&(this._register(_e(e,We.FOCUS_IN,()=>this._refreshStateHandler())),this._register(_e(e,We.FOCUS_OUT,()=>this._refreshStateHandler())))}}function Jy(n){return new VL(n)}function Ije(n,e){return n.after(e),e}function ct(n,...e){if(n.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function OH(n,e){return n.insertBefore(e,n.firstChild),e}function Fs(n,...e){n.innerText="",ct(n,...e)}const Dje=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var ew;(function(n){n.HTML="http://www.w3.org/1999/xhtml",n.SVG="http://www.w3.org/2000/svg"})(ew||(ew={}));function Dde(n,e,t,...i){const r=Dje.exec(e);if(!r)throw new Error("Bad use of emmet");const s=r[1]||"div";let o;return n!==ew.HTML?o=document.createElementNS(n,s):o=document.createElement(s),r[3]&&(o.id=r[3]),r[4]&&(o.className=r[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...i),o}function xt(n,e,...t){return Dde(ew.HTML,n,e,...t)}xt.SVG=function(n,e,...t){return Dde(ew.SVG,n,e,...t)};function Mde(...n){for(const e of n)e.style.display="",e.removeAttribute("aria-hidden")}function sY(...n){for(const e of n)e.style.display="none",e.setAttribute("aria-hidden","true")}function oY(n,e){const t=n.devicePixelRatio*e;return Math.max(1,Math.floor(t))/n.devicePixelRatio}function Rde(n){zn.open(n,"_blank","noopener")}function Mje(n,e){const t=()=>{e(),i=Po(n,t)};let i=Po(n,t);return Pt(()=>i.dispose())}Sde.setPreferredWebSchema(/^https:/.test(zn.location.href)?"https":"http");function $d(n){return n?`url('${RD.uriToBrowserUri(n).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function VR(n){return`'${n.replace(/'/g,"%27")}'`}function kd(n,e){if(n!==void 0){const t=n.match(/^\s*var\((.+)\)$/);if(t){const i=t[1].split(",",2);return i.length===2&&(e=kd(i[1].trim(),e)),`var(${i[0]}, ${e})`}return n}return e}function Rje(n,e=!1){const t=document.createElement("a");return yde("afterSanitizeAttributes",i=>{for(const r of["href","src"])if(i.hasAttribute(r)){const s=i.getAttribute(r);if(r==="href"&&s.startsWith("#"))continue;if(t.href=s,!n.includes(t.protocol.replace(/:$/,""))){if(e&&r==="src"&&t.href.startsWith("data:"))continue;i.removeAttribute(r)}}}),Pt(()=>{wde("afterSanitizeAttributes")})}const Aje=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class jh extends ae{constructor(){super(),this._subscriptions=new dt,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Be.runAndSubscribe(OD,({window:e,disposables:t})=>this.registerListeners(e,t),{window:zn,disposables:this._subscriptions}))}registerListeners(e,t){t.add(_e(e,"keydown",i=>{if(i.defaultPrevented)return;const r=new ii(i);if(!(r.keyCode===6&&i.repeat)){if(i.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(i.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(i.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(i.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(r.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=i,this.fire(this._keyStatus))}},!0)),t.add(_e(e,"keyup",i=>{i.defaultPrevented||(!i.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!i.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!i.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!i.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=i,this.fire(this._keyStatus)))},!0)),t.add(_e(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(_e(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(_e(e.document.body,"mousemove",i=>{i.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(_e(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return jh.instance||(jh.instance=new jh),jh.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class Oje extends ke{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(_e(this.element,We.DRAG_START,e=>{var t,i;(i=(t=this.callbacks).onDragStart)==null||i.call(t,e)})),this.callbacks.onDrag&&this._register(_e(this.element,We.DRAG,e=>{var t,i;(i=(t=this.callbacks).onDrag)==null||i.call(t,e)})),this._register(_e(this.element,We.DRAG_ENTER,e=>{var t,i;this.counter++,this.dragStartTime=e.timeStamp,(i=(t=this.callbacks).onDragEnter)==null||i.call(t,e)})),this._register(_e(this.element,We.DRAG_OVER,e=>{var t,i;e.preventDefault(),(i=(t=this.callbacks).onDragOver)==null||i.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(_e(this.element,We.DRAG_LEAVE,e=>{var t,i;this.counter--,this.counter===0&&(this.dragStartTime=0,(i=(t=this.callbacks).onDragLeave)==null||i.call(t,e))})),this._register(_e(this.element,We.DRAG_END,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDragEnd)==null||i.call(t,e)})),this._register(_e(this.element,We.DROP,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDrop)==null||i.call(t,e)}))}}const Pje=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function pn(n,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const r=Pje.exec(n);if(!r||!r.groups)throw new Error("Bad use of h");const s=r.groups.tag||"div",o=document.createElement(s);r.groups.id&&(o.id=r.groups.id);const a=[];if(r.groups.class)for(const c of r.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(o.className=a.join(" "));const l={};if(r.groups.name&&(l[r.groups.name]=o),i)for(const c of i)kr(c)?o.appendChild(c):typeof c=="string"?o.append(c):"root"in c&&(Object.assign(l,c),o.appendChild(c.root));for(const[c,u]of Object.entries(t))if(c!=="className")if(c==="style")for(const[d,h]of Object.entries(u))o.style.setProperty(aY(d),typeof h=="number"?h+"px":""+h);else c==="tabIndex"?o.tabIndex=u:o.setAttribute(aY(c),u.toString());return l.root=o,l}function aY(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class Fje extends ke{constructor(e){super(),this._onDidChange=this._register(new ae),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){var i;(i=this._mediaQueryList)==null||i.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class Bje extends ke{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new ae),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new Fje(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/r}}class Hje{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=BL(e);let i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=new Bje(e),this.mapWindowIdToPixelRatioMonitor.set(t,i),Be.once(pje)(({vscodeWindowId:r})=>{r===t&&(i==null||i.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const zL=new Hje;class Ade{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=Ml(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Ml(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Ml(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Ml(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Ml(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Ml(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Ml(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=Ml(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Ml(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Ml(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Ml(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Ml(n){return typeof n=="number"?`${n}px`:n}function Cn(n){return new Ade(n)}function Gr(n,e){n instanceof Ade?(n.setFontFamily(e.getMassagedFontFamily()),n.setFontWeight(e.fontWeight),n.setFontSize(e.fontSize),n.setFontFeatureSettings(e.fontFeatureSettings),n.setFontVariationSettings(e.fontVariationSettings),n.setLineHeight(e.lineHeight),n.setLetterSpacing(e.letterSpacing)):(n.style.fontFamily=e.getMassagedFontFamily(),n.style.fontWeight=e.fontWeight,n.style.fontSize=e.fontSize+"px",n.style.fontFeatureSettings=e.fontFeatureSettings,n.style.fontVariationSettings=e.fontVariationSettings,n.style.lineHeight=e.lineHeight+"px",n.style.letterSpacing=e.letterSpacing+"px")}class Vje{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class PH{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){var t;this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),(t=this._container)==null||t.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");Gr(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");Gr(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const r=document.createElement("div");Gr(r,this._bareFontInfo),r.style.fontStyle="italic",e.appendChild(r);const s=[];for(const o of this._requests){let a;o.type===0&&(a=t),o.type===2&&(a=i),o.type===1&&(a=r),a.appendChild(document.createElement("br"));const l=document.createElement("span");PH._render(l,o),a.appendChild(l),s.push(l)}this._container=e,this._testElements=s}static _render(e,t){if(t.chr===" "){let i="";for(let r=0;r<8;r++)i+=i;e.innerText=i}else{let i=t.chr;for(let r=0;r<8;r++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],r=this._testElements[e];i.fulfill(r.offsetWidth/256)}}}function zje(n,e,t){new PH(e,t).read(n)}const Th=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new ae,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(n){n=Math.min(Math.max(-5,n),20),this._zoomLevel!==n&&(this._zoomLevel=n,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},Wje=hn?1.5:1.35,zR=8;class mp{static createFromValidatedSettings(e,t,i){const r=e.get(49),s=e.get(53),o=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),u=e.get(64);return mp._create(r,s,o,a,l,c,u,t,i)}static _create(e,t,i,r,s,o,a,l,c){o===0?o=Wje*i:o<zR&&(o=o*i),o=Math.round(o),o<zR&&(o=zR);const u=1+(c?0:Th.getZoomLevel()*.1);return i*=u,o*=u,s===qy.TRANSLATE&&(t==="normal"||t==="bold"?s=qy.OFF:(s=`'wght' ${parseInt(t,10)}`,t="normal")),new mp({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:r,fontVariationSettings:s,lineHeight:o,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=la.fontFamily,t=mp._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const $je=2;class r8 extends mp{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=$je,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class Uje extends ke{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new ae),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=BL(e);let i=this._cache.get(t);return i||(i=new jje,this._cache.set(t,i)),i}_writeToCache(e,t,i){this._ensureCache(e).put(t,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),i=t.getValues();let r=!1;for(const s of i)s.isTrusted||(r=!0,t.remove(s));r&&this._onDidChange.fire()}readFontInfo(e,t){const i=this._ensureCache(e);if(!i.has(t)){let r=this._actualReadFontInfo(e,t);(r.typicalHalfwidthCharacterWidth<=2||r.typicalFullwidthCharacterWidth<=2||r.spaceWidth<=2||r.maxDigitWidth<=2)&&(r=new r8({pixelRatio:zL.getInstance(e).value,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontSize:r.fontSize,fontFeatureSettings:r.fontFeatureSettings,fontVariationSettings:r.fontVariationSettings,lineHeight:r.lineHeight,letterSpacing:r.letterSpacing,isMonospace:r.isMonospace,typicalHalfwidthCharacterWidth:Math.max(r.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(r.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:r.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(r.spaceWidth,5),middotWidth:Math.max(r.middotWidth,5),wsmiddotWidth:Math.max(r.wsmiddotWidth,5),maxDigitWidth:Math.max(r.maxDigitWidth,5)},!1)),this._writeToCache(e,t,r)}return i.get(t)}_createRequest(e,t,i,r){const s=new Vje(e,t);return i.push(s),r==null||r.push(s),s}_actualReadFontInfo(e,t){const i=[],r=[],s=this._createRequest("n",0,i,r),o=this._createRequest("",0,i,null),a=this._createRequest(" ",0,i,r),l=this._createRequest("0",0,i,r),c=this._createRequest("1",0,i,r),u=this._createRequest("2",0,i,r),d=this._createRequest("3",0,i,r),h=this._createRequest("4",0,i,r),f=this._createRequest("5",0,i,r),g=this._createRequest("6",0,i,r),p=this._createRequest("7",0,i,r),v=this._createRequest("8",0,i,r),b=this._createRequest("9",0,i,r),_=this._createRequest("",0,i,r),y=this._createRequest("",0,i,null),C=this._createRequest("",0,i,r),w=this._createRequest("",0,i,null),x="|/-_ilm%";for(let D=0,O=x.length;D<O;D++)this._createRequest(x.charAt(D),0,i,r),this._createRequest(x.charAt(D),1,i,r),this._createRequest(x.charAt(D),2,i,r);zje(e,t,i);const k=Math.max(l.width,c.width,u.width,d.width,h.width,f.width,g.width,p.width,v.width,b.width);let E=t.fontFeatureSettings===Zp.OFF;const L=r[0].width;for(let D=1,O=r.length;E&&D<O;D++){const A=L-r[D].width;if(A<-.001||A>.001){E=!1;break}}let M=!0;return E&&y.width!==L&&(M=!1),y.width>_.width&&(M=!1),new r8({pixelRatio:zL.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:E,typicalHalfwidthCharacterWidth:s.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:M,spaceWidth:a.width,middotWidth:C.width,wsmiddotWidth:w.width,maxDigitWidth:k},!0)}}class jje{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const s8=new Uje;var ic;(function(n){n.serviceIds=new Map,n.DI_TARGET="$di$target",n.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[n.DI_DEPENDENCIES]||[]}n.getServiceDependencies=e})(ic||(ic={}));const Fn=cn("instantiationService");function Kje(n,e,t){e[ic.DI_TARGET]===e?e[ic.DI_DEPENDENCIES].push({id:n,index:t}):(e[ic.DI_DEPENDENCIES]=[{id:n,index:t}],e[ic.DI_TARGET]=e)}function cn(n){if(ic.serviceIds.has(n))return ic.serviceIds.get(n);const e=function(t,i,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");Kje(e,t,r)};return e.toString=()=>n,ic.serviceIds.set(n,e),e}const or=cn("codeEditorService"),$s=cn("modelService"),PD=cn("textModelService");class Ed extends ke{constructor(e,t="",i="",r=!0,s){super(),this._onDidChange=this._register(new ae),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=r,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class Jp extends ke{constructor(){super(...arguments),this._onWillRun=this._register(new ae),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new ae),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let i;try{await this.runAction(e,t)}catch(r){i=r}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}const KC=class KC{constructor(){this.id=KC.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new KC,...i]:t=i);return t}async run(){}};KC.ID="vs.actions.separator";let Cs=KC;class FD{get actions(){return this._actions}constructor(e,t,i,r){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=r,this._actions=i}async run(){}}const _T=class _T extends Ed{constructor(){super(_T.ID,S("submenu.empty","(empty)"),void 0,!1)}};_T.ID="vs.actions.empty";let o8=_T;function I0(n){return{id:n.id,label:n.label,tooltip:n.tooltip??n.label,class:n.class,enabled:n.enabled??!0,checked:n.checked,run:async(...e)=>n.run(...e)}}var a8;(function(n){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}n.isThemeColor=e})(a8||(a8={}));var vn;(function(n){n.iconNameSegment="[A-Za-z0-9]+",n.iconNameExpression="[A-Za-z0-9-]+",n.iconModifierExpression="~[A-Za-z]+",n.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${n.iconNameExpression})(${n.iconModifierExpression})?$`);function t(h){const f=e.exec(h.id);if(!f)return t(rt.error);const[,g,p]=f,v=["codicon","codicon-"+g];return p&&v.push("codicon-modifier-"+p.substring(1)),v}n.asClassNameArray=t;function i(h){return t(h).join(" ")}n.asClassName=i;function r(h){return"."+t(h).join(".")}n.asCSSSelector=r;function s(h){return h&&typeof h=="object"&&typeof h.id=="string"&&(typeof h.color>"u"||a8.isThemeColor(h.color))}n.isThemeIcon=s;const o=new RegExp(`^\\$\\((${n.iconNameExpression}(?:${n.iconModifierExpression})?)\\)$`);function a(h){const f=o.exec(h);if(!f)return;const[,g]=f;return{id:g}}n.fromString=a;function l(h){return{id:h}}n.fromId=l;function c(h,f){let g=h.id;const p=g.lastIndexOf("~");return p!==-1&&(g=g.substring(0,p)),f&&(g=`${g}~${f}`),{id:g}}n.modify=c;function u(h){const f=h.id.lastIndexOf("~");if(f!==-1)return h.id.substring(f+1)}n.getModifier=u;function d(h,f){var g,p;return h.id===f.id&&((g=h.color)==null?void 0:g.id)===((p=f.color)==null?void 0:p.id)}n.isEqual=d})(vn||(vn={}));const ga=cn("commandService"),po=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new ae,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(n,e){if(!n)throw new Error("invalid command");if(typeof n=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:n,handler:e})}if(n.metadata&&Array.isArray(n.metadata.args)){const o=[];for(const l of n.metadata.args)o.push(l.constraint);const a=n.handler;n.handler=function(l,...c){return cWe(c,o),a(l,...c)}}const{id:t}=n;let i=this._commands.get(t);i||(i=new Eo,this._commands.set(t,i));const r=i.unshift(n),s=Pt(()=>{r();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(n,e){return po.registerCommand(n,(t,...i)=>t.get(ga).executeCommand(e,...i))}getCommand(n){const e=this._commands.get(n);if(!(!e||e.isEmpty()))return Sn.first(e)}getCommands(){const n=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&n.set(e,t)}return n}};po.registerCommand("noop",()=>{});function WR(...n){switch(n.length){case 1:return S("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",n[0]);case 2:return S("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",n[0],n[1]);case 3:return S("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",n[0],n[1],n[2]);default:return}}const qje=S("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),Gje=S("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),i0=class i0{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw hH(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(WR("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(WR("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(WR("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),r={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(r)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=i0._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(qje);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(Gje);return}const s=this._input.charCodeAt(e);if(t)t=!1;else if(s===47&&!i){e++;break}else s===91?i=!0:s===92?t=!0:s===93&&(i=!1);e++}for(;e<this._input.length&&i0._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const r=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:r,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};i0._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),i0._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);let _g=i0;const Zr=new Map;Zr.set("false",!1);Zr.set("true",!0);Zr.set("isMac",hn);Zr.set("isLinux",co);Zr.set("isWindows",Ao);Zr.set("isWeb",fb);Zr.set("isMacNative",hn&&!fb);Zr.set("isEdge",kWe);Zr.set("isFirefox",SWe);Zr.set("isChrome",Aue);Zr.set("isSafari",xWe);const Yje=Object.prototype.hasOwnProperty,Zje={regexParsingWithErrorRecovery:!0},Xje=S("contextkey.parser.error.emptyString","Empty context key expression"),Qje=S("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),Jje=S("contextkey.parser.error.noInAfterNot","'in' after 'not'."),lY=S("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),eKe=S("contextkey.parser.error.unexpectedToken","Unexpected token"),tKe=S("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),nKe=S("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),iKe=S("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");var iu;let rKe=(iu=class{constructor(e=Zje){this._config=e,this._scanner=new _g,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:Xje,offset:0,lexeme:"",additionalInfo:Qje});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),r=i.type===17?tKe:void 0;throw this._parsingErrors.push({message:eKe,offset:i.offset,lexeme:_g.getLexeme(i),additionalInfo:r}),iu._parseError}return t}catch(t){if(t!==iu._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:Ln.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:Ln.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Vs.INSTANCE;case 12:return this._advance(),uo.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,lY),t==null?void 0:t.negate()}case 17:return this._advance(),_m.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),Ln.true();case 12:return this._advance(),Ln.false();case 0:{this._advance();const t=this._expr();return this._consume(1,lY),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const r=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),r.type!==10)throw this._errExpectedButGot("REGEX",r);const s=r.lexeme,o=s.lastIndexOf("/"),a=o===s.length-1?void 0:this._removeFlagsGY(s.substring(o+1));let l;try{l=new RegExp(s.substring(1,o),a)}catch{throw this._errExpectedButGot("REGEX",r)}return tw.create(t,l)}switch(r.type){case 10:case 19:{const s=[r.lexeme];this._advance();let o=this._peek(),a=0;for(let h=0;h<r.lexeme.length;h++)r.lexeme.charCodeAt(h)===40?a++:r.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<o.lexeme.length;h++)o.lexeme.charCodeAt(h)===40?a++:r.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;s.push(_g.getLexeme(o)),this._advance(),o=this._peek()}const l=s.join(""),c=l.lastIndexOf("/"),u=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let d;try{d=new RegExp(l.substring(1,c),u)}catch{throw this._errExpectedButGot("REGEX",r)}return Ln.regex(t,d)}case 18:{const s=r.lexeme;this._advance();let o=null;if(!uUe(s)){const a=s.indexOf("/"),l=s.lastIndexOf("/");if(a!==l&&a>=0){const c=s.slice(a+1,l),u=s[l+1]==="i"?"i":"";try{o=new RegExp(c,u)}catch{throw this._errExpectedButGot("REGEX",r)}}}if(o===null)throw this._errExpectedButGot("REGEX",r);return tw.create(t,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,Jje);const r=this._value();return Ln.notIn(t,r)}switch(this._peek().type){case 3:{this._advance();const r=this._value();if(this._previous().type===18)return Ln.equals(t,r);switch(r){case"true":return Ln.has(t);case"false":return Ln.not(t);default:return Ln.equals(t,r)}}case 4:{this._advance();const r=this._value();if(this._previous().type===18)return Ln.notEquals(t,r);switch(r){case"true":return Ln.not(t);case"false":return Ln.has(t);default:return Ln.notEquals(t,r)}}case 5:return this._advance(),UD.create(t,this._value());case 6:return this._advance(),jD.create(t,this._value());case 7:return this._advance(),WD.create(t,this._value());case 8:return this._advance(),$D.create(t,this._value());case 13:return this._advance(),Ln.in(t,this._value());default:return Ln.has(t)}}case 20:throw this._parsingErrors.push({message:nKe,offset:e.offset,lexeme:"",additionalInfo:iKe}),iu._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const r=S("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,_g.getLexeme(t)),s=t.offset,o=_g.getLexeme(t);return this._parsingErrors.push({message:r,offset:s,lexeme:o,additionalInfo:i}),iu._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},iu._parseError=new Error,iu);const Fz=class Fz{static false(){return Vs.INSTANCE}static true(){return uo.INSTANCE}static has(e){return bm.create(e)}static equals(e,t){return fS.create(e,t)}static notEquals(e,t){return VD.create(e,t)}static regex(e,t){return tw.create(e,t)}static in(e,t){return BD.create(e,t)}static notIn(e,t){return HD.create(e,t)}static not(e){return _m.create(e)}static and(...e){return qg.create(e,null,!0)}static or(...e){return od.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};Fz._parser=new rKe({regexParsingWithErrorRecovery:!1});let Ln=Fz;function sKe(n,e){const t=n?n.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function vC(n,e){return n.cmp(e)}const CT=class CT{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return uo.INSTANCE}};CT.INSTANCE=new CT;let Vs=CT;const yT=class yT{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Vs.INSTANCE}};yT.INSTANCE=new yT;let uo=yT;class bm{static create(e,t=null){const i=Zr.get(e);return typeof i=="boolean"?i?uo.INSTANCE:Vs.INSTANCE:new bm(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:Pde(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Zr.get(this.key);return typeof e=="boolean"?e?uo.INSTANCE:Vs.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=_m.create(this.key,this)),this.negated}}class fS{static create(e,t,i=null){if(typeof t=="boolean")return t?bm.create(e,i):_m.create(e,i);const r=Zr.get(e);return typeof r=="boolean"?t===(r?"true":"false")?uo.INSTANCE:Vs.INSTANCE:new fS(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:Cm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Zr.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?uo.INSTANCE:Vs.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=VD.create(this.key,this.value,this)),this.negated}}class BD{static create(e,t){return new BD(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:Cm(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?Yje.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=HD.create(this.key,this.valueKey)),this.negated}}class HD{static create(e,t){return new HD(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=BD.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class VD{static create(e,t,i=null){if(typeof t=="boolean")return t?_m.create(e,i):bm.create(e,i);const r=Zr.get(e);return typeof r=="boolean"?t===(r?"true":"false")?Vs.INSTANCE:uo.INSTANCE:new VD(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:Cm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Zr.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Vs.INSTANCE:uo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=fS.create(this.key,this.value,this)),this.negated}}class _m{static create(e,t=null){const i=Zr.get(e);return typeof i=="boolean"?i?Vs.INSTANCE:uo.INSTANCE:new _m(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:Pde(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Zr.get(this.key);return typeof e=="boolean"?e?Vs.INSTANCE:uo.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=bm.create(this.key,this)),this.negated}}function zD(n,e){if(typeof n=="string"){const t=parseFloat(n);isNaN(t)||(n=t)}return typeof n=="string"||typeof n=="number"?e(n):Vs.INSTANCE}class WD{static create(e,t,i=null){return zD(t,r=>new WD(e,r,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:Cm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=jD.create(this.key,this.value,this)),this.negated}}class $D{static create(e,t,i=null){return zD(t,r=>new $D(e,r,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:Cm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=UD.create(this.key,this.value,this)),this.negated}}class UD{static create(e,t,i=null){return zD(t,r=>new UD(e,r,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:Cm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=$D.create(this.key,this.value,this)),this.negated}}class jD{static create(e,t,i=null){return zD(t,r=>new jD(e,r,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:Cm(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=WD.create(this.key,this.value,this)),this.negated}}class tw{static create(e,t){return new tw(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=FH.create(this)),this.negated}}class FH{static create(e){return new FH(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function Ode(n){let e=null;for(let t=0,i=n.length;t<i;t++){const r=n[t].substituteConstants();if(n[t]!==r&&e===null){e=[];for(let s=0;s<t;s++)e[s]=n[s]}e!==null&&(e[t]=r)}return e===null?n:e}class qg{static create(e,t,i){return qg._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const r=vC(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Ode(this.expr);return e===this.expr?this:qg.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const r=[];let s=!1;for(const o of e)if(o){if(o.type===1){s=!0;continue}if(o.type===0)return Vs.INSTANCE;if(o.type===6){r.push(...o.expr);continue}r.push(o)}if(r.length===0&&s)return uo.INSTANCE;if(r.length!==0){if(r.length===1)return r[0];r.sort(vC);for(let o=1;o<r.length;o++)r[o-1].equals(r[o])&&(r.splice(o,1),o--);if(r.length===1)return r[0];for(;r.length>1;){const o=r[r.length-1];if(o.type!==9)break;r.pop();const a=r.pop(),l=r.length===0,c=od.create(o.expr.map(u=>qg.create([u,a],null,i)),null,l);c&&(r.push(c),r.sort(vC))}if(r.length===1)return r[0];if(i){for(let o=0;o<r.length;o++)for(let a=o+1;a<r.length;a++)if(r[o].negate().equals(r[a]))return Vs.INSTANCE;if(r.length===1)return r[0]}return new qg(r,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=od.create(e,this,!0)}return this.negated}}class od{static create(e,t,i){return od._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const r=vC(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Ode(this.expr);return e===this.expr?this:od.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let r=[],s=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){s=!0;continue}if(l.type===1)return uo.INSTANCE;if(l.type===9){r=r.concat(l.expr);continue}r.push(l)}}if(r.length===0&&s)return Vs.INSTANCE;r.sort(vC)}if(r.length!==0){if(r.length===1)return r[0];for(let o=1;o<r.length;o++)r[o-1].equals(r[o])&&(r.splice(o,1),o--);if(r.length===1)return r[0];if(i){for(let o=0;o<r.length;o++)for(let a=o+1;a<r.length;a++)if(r[o].negate().equals(r[a]))return uo.INSTANCE;if(r.length===1)return r[0]}return new od(r,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),r=[];for(const s of uY(t))for(const o of uY(i))r.push(qg.create([s,o],null,!1));e.unshift(od.create(r,null,!1))}this.negated=od.create(e,this,!0)}return this.negated}}const r0=class r0 extends bm{static all(){return r0._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?r0._info.push({...i,key:e}):i!==!0&&r0._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return fS.create(this.key,e)}};r0._info=[];let ht=r0;const In=cn("contextKeyService");function Pde(n,e){return n<e?-1:n>e?1:0}function Cm(n,e,t,i){return n<t?-1:n>t?1:e<i?-1:e>i?1:0}function l8(n,e){if(n.type===0||e.type===1)return!0;if(n.type===9)return e.type===9?cY(n.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(l8(n,t))return!0;return!1}if(n.type===6){if(e.type===6)return cY(e.expr,n.expr);for(const t of n.expr)if(l8(t,e))return!0;return!1}return n.equals(e)}function cY(n,e){let t=0,i=0;for(;t<n.length&&i<e.length;){const r=n[t].cmp(e[i]);if(r<0)return!1;r===0&&t++,i++}return t===n.length}function uY(n){return n.type===9?n.expr:[n]}function $R(n,e){if(!n)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function BH(n,e="Unreachable"){throw new Error(e)}function dY(n){n||$n(new Tn("Soft Assertion Failed"))}function em(n){if(!n()){debugger;n(),$n(new Tn("Assertion Failed"))}}function HH(n,e){let t=0;for(;t<n.length-1;){const i=n[t],r=n[t+1];if(!e(i,r))return!1;t++}return!0}class oKe{constructor(){this.data=new Map}add(e,t){$R(aa(e)),$R(no(t)),$R(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Lr=new oKe;class VH{constructor(){this._coreKeybindings=new Eo,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(al===1){if(e&&e.win)return e.win}else if(al===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=VH.bindToCurrentPlatform(e),i=new dt;if(t&&t.primary){const r=K5(t.primary,al);r&&i.add(this._registerDefaultKeybinding(r,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let r=0,s=t.secondary.length;r<s;r++){const o=t.secondary[r],a=K5(o,al);a&&i.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-r-1,e.when))}return i}registerCommandAndKeybindingRule(e){return du(this.registerKeybindingRule(e),po.registerCommand(e))}_registerDefaultKeybinding(e,t,i,r,s,o){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:o,weight1:r,weight2:s,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,Pt(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(lKe)),this._cachedMergedKeybindings.slice(0)}}const gS=new VH,aKe={EditorModes:"platform.keybindingsRegistry"};Lr.add(aKe.EditorModes,gS);function lKe(n,e){if(n.weight1!==e.weight1)return n.weight1-e.weight1;if(n.command&&e.command){if(n.command<e.command)return-1;if(n.command>e.command)return 1}return n.weight2-e.weight2}var cKe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},hY=function(n,e){return function(t,i){e(t,i,n)}},vE;function bC(n){return n.command!==void 0}function uKe(n){return n.submenu!==void 0}const U=class U{constructor(e){if(U._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);U._instances.set(e,this),this.id=e}};U._instances=new Map,U.CommandPalette=new U("CommandPalette"),U.DebugBreakpointsContext=new U("DebugBreakpointsContext"),U.DebugCallStackContext=new U("DebugCallStackContext"),U.DebugConsoleContext=new U("DebugConsoleContext"),U.DebugVariablesContext=new U("DebugVariablesContext"),U.NotebookVariablesContext=new U("NotebookVariablesContext"),U.DebugHoverContext=new U("DebugHoverContext"),U.DebugWatchContext=new U("DebugWatchContext"),U.DebugToolBar=new U("DebugToolBar"),U.DebugToolBarStop=new U("DebugToolBarStop"),U.DebugCallStackToolbar=new U("DebugCallStackToolbar"),U.DebugCreateConfiguration=new U("DebugCreateConfiguration"),U.EditorContext=new U("EditorContext"),U.SimpleEditorContext=new U("SimpleEditorContext"),U.EditorContent=new U("EditorContent"),U.EditorLineNumberContext=new U("EditorLineNumberContext"),U.EditorContextCopy=new U("EditorContextCopy"),U.EditorContextPeek=new U("EditorContextPeek"),U.EditorContextShare=new U("EditorContextShare"),U.EditorTitle=new U("EditorTitle"),U.EditorTitleRun=new U("EditorTitleRun"),U.EditorTitleContext=new U("EditorTitleContext"),U.EditorTitleContextShare=new U("EditorTitleContextShare"),U.EmptyEditorGroup=new U("EmptyEditorGroup"),U.EmptyEditorGroupContext=new U("EmptyEditorGroupContext"),U.EditorTabsBarContext=new U("EditorTabsBarContext"),U.EditorTabsBarShowTabsSubmenu=new U("EditorTabsBarShowTabsSubmenu"),U.EditorTabsBarShowTabsZenModeSubmenu=new U("EditorTabsBarShowTabsZenModeSubmenu"),U.EditorActionsPositionSubmenu=new U("EditorActionsPositionSubmenu"),U.ExplorerContext=new U("ExplorerContext"),U.ExplorerContextShare=new U("ExplorerContextShare"),U.ExtensionContext=new U("ExtensionContext"),U.GlobalActivity=new U("GlobalActivity"),U.CommandCenter=new U("CommandCenter"),U.CommandCenterCenter=new U("CommandCenterCenter"),U.LayoutControlMenuSubmenu=new U("LayoutControlMenuSubmenu"),U.LayoutControlMenu=new U("LayoutControlMenu"),U.MenubarMainMenu=new U("MenubarMainMenu"),U.MenubarAppearanceMenu=new U("MenubarAppearanceMenu"),U.MenubarDebugMenu=new U("MenubarDebugMenu"),U.MenubarEditMenu=new U("MenubarEditMenu"),U.MenubarCopy=new U("MenubarCopy"),U.MenubarFileMenu=new U("MenubarFileMenu"),U.MenubarGoMenu=new U("MenubarGoMenu"),U.MenubarHelpMenu=new U("MenubarHelpMenu"),U.MenubarLayoutMenu=new U("MenubarLayoutMenu"),U.MenubarNewBreakpointMenu=new U("MenubarNewBreakpointMenu"),U.PanelAlignmentMenu=new U("PanelAlignmentMenu"),U.PanelPositionMenu=new U("PanelPositionMenu"),U.ActivityBarPositionMenu=new U("ActivityBarPositionMenu"),U.MenubarPreferencesMenu=new U("MenubarPreferencesMenu"),U.MenubarRecentMenu=new U("MenubarRecentMenu"),U.MenubarSelectionMenu=new U("MenubarSelectionMenu"),U.MenubarShare=new U("MenubarShare"),U.MenubarSwitchEditorMenu=new U("MenubarSwitchEditorMenu"),U.MenubarSwitchGroupMenu=new U("MenubarSwitchGroupMenu"),U.MenubarTerminalMenu=new U("MenubarTerminalMenu"),U.MenubarViewMenu=new U("MenubarViewMenu"),U.MenubarHomeMenu=new U("MenubarHomeMenu"),U.OpenEditorsContext=new U("OpenEditorsContext"),U.OpenEditorsContextShare=new U("OpenEditorsContextShare"),U.ProblemsPanelContext=new U("ProblemsPanelContext"),U.SCMInputBox=new U("SCMInputBox"),U.SCMChangesSeparator=new U("SCMChangesSeparator"),U.SCMChangesContext=new U("SCMChangesContext"),U.SCMIncomingChanges=new U("SCMIncomingChanges"),U.SCMIncomingChangesContext=new U("SCMIncomingChangesContext"),U.SCMIncomingChangesSetting=new U("SCMIncomingChangesSetting"),U.SCMOutgoingChanges=new U("SCMOutgoingChanges"),U.SCMOutgoingChangesContext=new U("SCMOutgoingChangesContext"),U.SCMOutgoingChangesSetting=new U("SCMOutgoingChangesSetting"),U.SCMIncomingChangesAllChangesContext=new U("SCMIncomingChangesAllChangesContext"),U.SCMIncomingChangesHistoryItemContext=new U("SCMIncomingChangesHistoryItemContext"),U.SCMOutgoingChangesAllChangesContext=new U("SCMOutgoingChangesAllChangesContext"),U.SCMOutgoingChangesHistoryItemContext=new U("SCMOutgoingChangesHistoryItemContext"),U.SCMChangeContext=new U("SCMChangeContext"),U.SCMResourceContext=new U("SCMResourceContext"),U.SCMResourceContextShare=new U("SCMResourceContextShare"),U.SCMResourceFolderContext=new U("SCMResourceFolderContext"),U.SCMResourceGroupContext=new U("SCMResourceGroupContext"),U.SCMSourceControl=new U("SCMSourceControl"),U.SCMSourceControlInline=new U("SCMSourceControlInline"),U.SCMSourceControlTitle=new U("SCMSourceControlTitle"),U.SCMHistoryTitle=new U("SCMHistoryTitle"),U.SCMTitle=new U("SCMTitle"),U.SearchContext=new U("SearchContext"),U.SearchActionMenu=new U("SearchActionContext"),U.StatusBarWindowIndicatorMenu=new U("StatusBarWindowIndicatorMenu"),U.StatusBarRemoteIndicatorMenu=new U("StatusBarRemoteIndicatorMenu"),U.StickyScrollContext=new U("StickyScrollContext"),U.TestItem=new U("TestItem"),U.TestItemGutter=new U("TestItemGutter"),U.TestProfilesContext=new U("TestProfilesContext"),U.TestMessageContext=new U("TestMessageContext"),U.TestMessageContent=new U("TestMessageContent"),U.TestPeekElement=new U("TestPeekElement"),U.TestPeekTitle=new U("TestPeekTitle"),U.TestCallStack=new U("TestCallStack"),U.TouchBarContext=new U("TouchBarContext"),U.TitleBarContext=new U("TitleBarContext"),U.TitleBarTitleContext=new U("TitleBarTitleContext"),U.TunnelContext=new U("TunnelContext"),U.TunnelPrivacy=new U("TunnelPrivacy"),U.TunnelProtocol=new U("TunnelProtocol"),U.TunnelPortInline=new U("TunnelInline"),U.TunnelTitle=new U("TunnelTitle"),U.TunnelLocalAddressInline=new U("TunnelLocalAddressInline"),U.TunnelOriginInline=new U("TunnelOriginInline"),U.ViewItemContext=new U("ViewItemContext"),U.ViewContainerTitle=new U("ViewContainerTitle"),U.ViewContainerTitleContext=new U("ViewContainerTitleContext"),U.ViewTitle=new U("ViewTitle"),U.ViewTitleContext=new U("ViewTitleContext"),U.CommentEditorActions=new U("CommentEditorActions"),U.CommentThreadTitle=new U("CommentThreadTitle"),U.CommentThreadActions=new U("CommentThreadActions"),U.CommentThreadAdditionalActions=new U("CommentThreadAdditionalActions"),U.CommentThreadTitleContext=new U("CommentThreadTitleContext"),U.CommentThreadCommentContext=new U("CommentThreadCommentContext"),U.CommentTitle=new U("CommentTitle"),U.CommentActions=new U("CommentActions"),U.CommentsViewThreadActions=new U("CommentsViewThreadActions"),U.InteractiveToolbar=new U("InteractiveToolbar"),U.InteractiveCellTitle=new U("InteractiveCellTitle"),U.InteractiveCellDelete=new U("InteractiveCellDelete"),U.InteractiveCellExecute=new U("InteractiveCellExecute"),U.InteractiveInputExecute=new U("InteractiveInputExecute"),U.InteractiveInputConfig=new U("InteractiveInputConfig"),U.ReplInputExecute=new U("ReplInputExecute"),U.IssueReporter=new U("IssueReporter"),U.NotebookToolbar=new U("NotebookToolbar"),U.NotebookStickyScrollContext=new U("NotebookStickyScrollContext"),U.NotebookCellTitle=new U("NotebookCellTitle"),U.NotebookCellDelete=new U("NotebookCellDelete"),U.NotebookCellInsert=new U("NotebookCellInsert"),U.NotebookCellBetween=new U("NotebookCellBetween"),U.NotebookCellListTop=new U("NotebookCellTop"),U.NotebookCellExecute=new U("NotebookCellExecute"),U.NotebookCellExecuteGoTo=new U("NotebookCellExecuteGoTo"),U.NotebookCellExecutePrimary=new U("NotebookCellExecutePrimary"),U.NotebookDiffCellInputTitle=new U("NotebookDiffCellInputTitle"),U.NotebookDiffCellMetadataTitle=new U("NotebookDiffCellMetadataTitle"),U.NotebookDiffCellOutputsTitle=new U("NotebookDiffCellOutputsTitle"),U.NotebookOutputToolbar=new U("NotebookOutputToolbar"),U.NotebookOutlineFilter=new U("NotebookOutlineFilter"),U.NotebookOutlineActionMenu=new U("NotebookOutlineActionMenu"),U.NotebookEditorLayoutConfigure=new U("NotebookEditorLayoutConfigure"),U.NotebookKernelSource=new U("NotebookKernelSource"),U.BulkEditTitle=new U("BulkEditTitle"),U.BulkEditContext=new U("BulkEditContext"),U.TimelineItemContext=new U("TimelineItemContext"),U.TimelineTitle=new U("TimelineTitle"),U.TimelineTitleContext=new U("TimelineTitleContext"),U.TimelineFilterSubMenu=new U("TimelineFilterSubMenu"),U.AccountsContext=new U("AccountsContext"),U.SidebarTitle=new U("SidebarTitle"),U.PanelTitle=new U("PanelTitle"),U.AuxiliaryBarTitle=new U("AuxiliaryBarTitle"),U.AuxiliaryBarHeader=new U("AuxiliaryBarHeader"),U.TerminalInstanceContext=new U("TerminalInstanceContext"),U.TerminalEditorInstanceContext=new U("TerminalEditorInstanceContext"),U.TerminalNewDropdownContext=new U("TerminalNewDropdownContext"),U.TerminalTabContext=new U("TerminalTabContext"),U.TerminalTabEmptyAreaContext=new U("TerminalTabEmptyAreaContext"),U.TerminalStickyScrollContext=new U("TerminalStickyScrollContext"),U.WebviewContext=new U("WebviewContext"),U.InlineCompletionsActions=new U("InlineCompletionsActions"),U.InlineEditsActions=new U("InlineEditsActions"),U.InlineEditActions=new U("InlineEditActions"),U.NewFile=new U("NewFile"),U.MergeInput1Toolbar=new U("MergeToolbar1Toolbar"),U.MergeInput2Toolbar=new U("MergeToolbar2Toolbar"),U.MergeBaseToolbar=new U("MergeBaseToolbar"),U.MergeInputResultToolbar=new U("MergeToolbarResultToolbar"),U.InlineSuggestionToolbar=new U("InlineSuggestionToolbar"),U.InlineEditToolbar=new U("InlineEditToolbar"),U.ChatContext=new U("ChatContext"),U.ChatCodeBlock=new U("ChatCodeblock"),U.ChatCompareBlock=new U("ChatCompareBlock"),U.ChatMessageTitle=new U("ChatMessageTitle"),U.ChatExecute=new U("ChatExecute"),U.ChatExecuteSecondary=new U("ChatExecuteSecondary"),U.ChatInputSide=new U("ChatInputSide"),U.AccessibleView=new U("AccessibleView"),U.MultiDiffEditorFileToolbar=new U("MultiDiffEditorFileToolbar"),U.DiffEditorHunkToolbar=new U("DiffEditorHunkToolbar"),U.DiffEditorSelectionToolbar=new U("DiffEditorSelectionToolbar");let Br=U;const ym=cn("menuService"),qC=class qC{static for(e){let t=this._all.get(e);return t||(t=new qC(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof qC&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};qC._all=new Map;let Cg=qC;const I1=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new I$e({merge:Cg.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(n){return this._commands.set(n.id,n),this._onDidChangeMenu.fire(Cg.for(Br.CommandPalette)),Pt(()=>{this._commands.delete(n.id)&&this._onDidChangeMenu.fire(Cg.for(Br.CommandPalette))})}getCommand(n){return this._commands.get(n)}getCommands(){const n=new Map;return this._commands.forEach((e,t)=>n.set(t,e)),n}appendMenuItem(n,e){let t=this._menuItems.get(n);t||(t=new Eo,this._menuItems.set(n,t));const i=t.push(e);return this._onDidChangeMenu.fire(Cg.for(n)),Pt(()=>{i(),this._onDidChangeMenu.fire(Cg.for(n))})}appendMenuItems(n){const e=new dt;for(const{id:t,item:i}of n)e.add(this.appendMenuItem(t,i));return e}getMenuItems(n){let e;return this._menuItems.has(n)?e=[...this._menuItems.get(n)]:e=[],n===Br.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(n){const e=new Set;for(const t of n)bC(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||n.push({command:t})})}};class _C extends FD{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let Ld=vE=class{static label(e,t){return t!=null&&t.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,i,r,s,o,a){var c;this.hideActions=r,this.menuKeybinding=s,this._commandService=a,this.id=e.id,this.label=vE.label(e,i),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:(c=e.tooltip)==null?void 0:c.value)??"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const u=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(u.condition),this.checked&&u.tooltip&&(this.tooltip=typeof u.tooltip=="string"?u.tooltip:u.tooltip.value),this.checked&&vn.isThemeIcon(u.icon)&&(l=u.icon),this.checked&&u.title&&(this.label=typeof u.title=="string"?u.title:u.title.value)}l||(l=vn.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new vE(t,void 0,i,r,void 0,o,a):void 0,this._options=i,this.class=l&&vn.asClassName(l)}run(...e){var i,r;let t=[];return(i=this._options)!=null&&i.arg&&(t=[...t,this._options.arg]),(r=this._options)!=null&&r.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};Ld=vE=cKe([hY(5,In),hY(6,ga)],Ld);const wm=cn("telemetryService"),kc=cn("logService");var eo;(function(n){n[n.Off=0]="Off",n[n.Trace=1]="Trace",n[n.Debug=2]="Debug",n[n.Info=3]="Info",n[n.Warning=4]="Warning",n[n.Error=5]="Error"})(eo||(eo={}));const Fde=eo.Info;class Bde extends ke{constructor(){super(...arguments),this.level=Fde,this._onDidChangeLogLevel=this._register(new ae),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==eo.Off&&this.level<=e}}class dKe extends Bde{constructor(e=Fde,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(eo.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(eo.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(eo.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(eo.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(eo.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class hKe extends Bde{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function fKe(n){switch(n){case eo.Trace:return"trace";case eo.Debug:return"debug";case eo.Info:return"info";case eo.Warning:return"warn";case eo.Error:return"error";case eo.Off:return"off"}}new ht("logLevel",fKe(eo.Info));class KD{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=Ln.and(i,this.precondition):i=this.precondition);const r={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};gS.registerKeybindingRule(r)}}po.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){I1.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class zH extends KD{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,r){return this._implementations.push({priority:e,name:t,implementation:i,when:r}),this._implementations.sort((s,o)=>o.priority-s.priority),{dispose:()=>{for(let s=0;s<this._implementations.length;s++)if(this._implementations[s].implementation===i){this._implementations.splice(s,1);return}}}}runCommand(e,t){const i=e.get(kc),r=e.get(In);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){if(s.when){const a=r.getContext(_s());if(!s.when.evaluate(a))continue}const o=s.implementation(e,t);if(o)return i.trace(`Command '${this.id}' was handled by '${s.name}'.`),typeof o=="boolean"?void 0:o}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class Hde extends KD{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class tm extends KD{static bindToContribution(e){return class extends tm{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,r,s){const o=e(r);o&&this._callback(o,s)}}}static runEditorCommand(e,t,i,r){const s=e.get(or),o=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(o)return o.invokeWithinContext(a=>{if(a.get(In).contextMatchesRules(i??void 0))return r(a,o,t)})}runCommand(e,t){return tm.runEditorCommand(e,t,this.precondition,(i,r,s)=>this.runEditorCommand(i,r,s))}}function At(n){return tu.INSTANCE.registerEditorCommand(n),n}function Vde(n,e,t){tu.INSTANCE.registerEditorContribution(n,e,t)}var D0;(function(n){function e(o){return tu.INSTANCE.getEditorCommand(o)}n.getEditorCommand=e;function t(){return tu.INSTANCE.getEditorActions()}n.getEditorActions=t;function i(){return tu.INSTANCE.getEditorContributions()}n.getEditorContributions=i;function r(o){return tu.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}n.getSomeEditorContributions=r;function s(){return tu.INSTANCE.getDiffEditorContributions()}n.getDiffEditorContributions=s})(D0||(D0={}));const gKe={EditorCommonContributions:"editor.contributions"},wT=class wT{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};wT.INSTANCE=new wT;let tu=wT;Lr.add(gKe.EditorCommonContributions,tu.INSTANCE);function pS(n){return n.register(),n}const zde=pS(new zH({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:Br.MenubarEditMenu,group:"1_do",title:S({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Br.CommandPalette,group:"",title:S("undo","Undo"),order:1}]}));pS(new Hde(zde,{id:"default:undo",precondition:void 0}));const Wde=pS(new zH({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:Br.MenubarEditMenu,group:"1_do",title:S({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Br.CommandPalette,group:"",title:S("redo","Redo"),order:1}]}));pS(new Hde(Wde,{id:"default:redo",precondition:void 0}));const pKe=pS(new zH({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:Br.MenubarSelectionMenu,group:"1_basic",title:S({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Br.CommandPalette,group:"",title:S("selectAll","Select All"),order:1}]})),fY="default",mKe="$initialize";let gY=!1;function c8(n){fb&&(gY||(gY=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(n.message))}class vKe{constructor(e,t,i,r,s){this.vsWorker=e,this.req=t,this.channel=i,this.method=r,this.args=s,this.type=0}}class pY{constructor(e,t,i,r){this.vsWorker=e,this.seq=t,this.res=i,this.err=r,this.type=1}}class bKe{constructor(e,t,i,r,s){this.vsWorker=e,this.req=t,this.channel=i,this.eventName=r,this.arg=s,this.type=2}}class _Ke{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class CKe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class yKe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,i){const r=String(++this._lastSentReq);return new Promise((s,o)=>{this._pendingReplies[r]={resolve:s,reject:o},this._send(new vKe(this._workerId,r,e,t,i))})}listen(e,t,i){let r=null;const s=new ae({onWillAddFirstListener:()=>{r=String(++this._lastSentReq),this._pendingEmitters.set(r,s),this._send(new bKe(this._workerId,r,e,t,i))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(r),this._send(new CKe(this._workerId,r)),r=null}});return s.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const i={get:(r,s)=>(typeof s=="string"&&!r[s]&&(Ude(s)?r[s]=o=>this.listen(e,s,o):$de(s)?r[s]=this.listen(e,s,void 0):s.charCodeAt(0)===36&&(r[s]=async(...o)=>(await(t==null?void 0:t()),this.sendMessage(e,s,o)))),r[s])};return new Proxy(Object.create(null),i)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(r=>{this._send(new pY(this._workerId,t,r,void 0))},r=>{r.detail instanceof Error&&(r.detail=kG(r.detail)),this._send(new pY(this._workerId,t,void 0,kG(r)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.channel,e.eventName,e.arg)(r=>{this._send(new _Ke(this._workerId,t,r))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class wKe extends ke{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},s=>{this._protocol.handleMessage(s)},s=>{$n(s)})),this._protocol=new yKe({sendMessage:(s,o)=>{this._worker.postMessage(s,o)},handleMessage:(s,o,a)=>this._handleMessage(s,o,a),handleEvent:(s,o,a)=>this._handleEvent(s,o,a)}),this._protocol.setWorkerId(this._worker.getId());let i=null;const r=globalThis.require;typeof r<"u"&&typeof r.getConfig=="function"?i=r.getConfig():typeof globalThis.requirejs<"u"&&(i=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(fY,mKe,[this._worker.getId(),JSON.parse(JSON.stringify(i)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(fY,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(s=>{this._onError("Worker failed to load "+t.amdModuleId,s)})}_handleMessage(e,t,i){const r=this._localChannels.get(e);if(!r)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof r[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(r[t].apply(r,i))}catch(s){return Promise.reject(s)}}_handleEvent(e,t,i){const r=this._localChannels.get(e);if(!r)throw new Error(`Missing channel ${e} on main thread`);if(Ude(t)){const s=r[t].call(r,i);if(typeof s!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return s}if($de(t)){const s=r[t];if(typeof s!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return s}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function $de(n){return n[0]==="o"&&n[1]==="n"&&_h(n.charCodeAt(2))}function Ude(n){return/^onDynamic/.test(n)&&_h(n.charCodeAt(9))}function Sm(n,e){var i;const t=globalThis.MonacoEnvironment;if(t!=null&&t.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(n,e)}catch(r){$n(r);return}try{return(i=globalThis.trustedTypes)==null?void 0:i.createPolicy(n,e)}catch(r){$n(r);return}}let Pv;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?Pv=globalThis.workerttPolicy:Pv=Sm("defaultWorkerFactory",{createScriptURL:n=>n});function SKe(n,e){const t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){const i=t.getWorkerUrl("workerMain.js",e);return new Worker(Pv?Pv.createScriptURL(i):i,{name:e,type:"module"})}}if(n){const i=xKe(e,n.toString(!0)),r=new Worker(Pv?Pv.createScriptURL(i):i,{name:e,type:"module"});return kKe(r)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function xKe(n,e,t){if(!(/^((http:)|(https:)|(file:)|(vscode-file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const s=e.lastIndexOf("?"),o=e.lastIndexOf("#",s),a=s>0?new URLSearchParams(e.substring(s+1,~o?o:void 0)):new URLSearchParams;J5.addSearchParam(a,!0,!0),a.toString()?e=`${e}?${a.toString()}#${n}`:e=`${e}#${n}`}const r=new Blob([rH([`/*${n}*/`,void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(Tue())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(oH())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL('${e}') ?? '${e}');`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${n}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(r)}function kKe(n){return new Promise((e,t)=>{n.onmessage=function(i){i.data.type==="vscode-worker-ready"&&(n.onmessage=null,e(n))},n.onerror=t})}function EKe(n){return typeof n.then=="function"}class LKe extends ke{constructor(e,t,i,r,s,o){super(),this.id=i,this.label=r;const a=SKe(e,r);EKe(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(t,[]),this.worker.then(l=>{l.onmessage=function(c){s(c.data)},l.onmessageerror=o,typeof l.addEventListener=="function"&&l.addEventListener("error",o)}),this._register(Pt(()=>{var l;(l=this.worker)==null||l.then(c=>{c.onmessage=null,c.onmessageerror=null,c.removeEventListener("error",o),c.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var i;(i=this.worker)==null||i.then(r=>{try{r.postMessage(e,t)}catch(s){$n(s),$n(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:s}))}})}}class NKe{constructor(e,t){this.amdModuleId=e,this.label=t,this.esmModuleLocation=RD.asBrowserUri(`${e}.esm.js`)}}const ST=class ST{constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,i){const r=++ST.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new LKe(e.esmModuleLocation,e.amdModuleId,r,e.label||"anonymous"+r,t,s=>{c8(s),this._webWorkerFailedBeforeError=s,i(s)})}};ST.LAST_WORKER_ID=0;let u8=ST;function TKe(n,e){const t=typeof n=="string"?new NKe(n,e):n;return new wKe(new u8,t)}var Rs;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(Rs||(Rs={}));class UR{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),r=e.getStandardTokenType(i);return this.isOK(r)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const r=String.fromCharCode(i);if(!this.open.includes(r)&&!this.close.includes(r))return r}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class IKe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)t_(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),t_(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),t_(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),t_(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&t_(this.autoClosingPairsCloseSingleChar,t.close,t)}}function t_(n,e,t){n.has(e)?n.get(e).push(t):n.set(e,[t])}const s0=class s0{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new UR(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new UR({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new UR({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:s0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:s0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};s0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,s0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;let d8=s0;function Gg(n,e){const t=n.getCount(),i=n.findTokenIndexAtOffset(e),r=n.getLanguageId(i);let s=i;for(;s+1<t&&n.getLanguageId(s+1)===r;)s++;let o=i;for(;o>0&&n.getLanguageId(o-1)===r;)o--;return new DKe(n,r,o,s+1,n.getStartOffset(o),n.getEndOffset(s))}class DKe{constructor(e,t,i,r,s,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=r,this.firstCharOffset=s,this._lastCharOffset=o,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function Pc(n){return(n&3)!==0}const mY=typeof Buffer<"u";let jR;class WH{static wrap(e){return mY&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new WH(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return mY?this.buffer.toString():(jR||(jR=new TextDecoder),jR.decode(this.buffer))}}function MKe(n,e){return n[e+0]<<0>>>0|n[e+1]<<8>>>0}function RKe(n,e,t){n[t+0]=e&255,e=e>>>8,n[t+1]=e&255}function zl(n,e){return n[e]*2**24+n[e+1]*2**16+n[e+2]*2**8+n[e+3]}function Wl(n,e,t){n[t+3]=e,e=e>>>8,n[t+2]=e,e=e>>>8,n[t+1]=e,e=e>>>8,n[t]=e}function vY(n,e){return n[e]}function bY(n,e,t){n[t]=e}let KR;function jde(){return KR||(KR=new TextDecoder("UTF-16LE")),KR}let qR;function AKe(){return qR||(qR=new TextDecoder("UTF-16BE")),qR}let GR;function Kde(){return GR||(GR=wWe()?jde():AKe()),GR}function OKe(n,e,t){const i=new Uint16Array(n.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?PKe(n,e,t):jde().decode(i)}function PKe(n,e,t){const i=[];let r=0;for(let s=0;s<t;s++){const o=MKe(n,e);e+=2,i[r++]=String.fromCharCode(o)}return i.join("")}class qD{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Kde().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||gr(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class WL{constructor(e,t,i,r,s,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=r,this.forwardRegex=s,this.reversedRegex=o,this._openSet=WL._toSet(this.open),this._closeSet=WL._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function FKe(n){const e=n.length;n=n.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const i=(o,a)=>{const[l,c]=o,[u,d]=a;return l===u||l===d||c===u||c===d},r=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let u=0;u<e;u++)t[u]===c&&(t[u]=l)};for(let o=0;o<e;o++){const a=n[o];for(let l=o+1;l<e;l++){const c=n[l];i(a,c)&&r(t[o],t[l])}}const s=[];for(let o=0;o<e;o++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[u,d]=n[c];a.push(u),l.push(d)}a.length>0&&s.push({open:a,close:l})}return s}class BKe{constructor(e,t){this._richEditBracketsBrand=void 0;const i=FKe(t);this.brackets=i.map((r,s)=>new WL(e,s,r.open,r.close,HKe(r.open,r.close,i,s),VKe(r.open,r.close,i,s))),this.forwardRegex=zKe(this.brackets),this.reversedRegex=WKe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const r of this.brackets){for(const s of r.open)this.textIsBracket[s]=r,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of r.close)this.textIsBracket[s]=r,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}}function qde(n,e,t,i){for(let r=0,s=e.length;r<s;r++){if(r===t)continue;const o=e[r];for(const a of o.open)a.indexOf(n)>=0&&i.push(a);for(const a of o.close)a.indexOf(n)>=0&&i.push(a)}}function Gde(n,e){return n.length-e.length}function GD(n){if(n.length<=1)return n;const e=[],t=new Set;for(const i of n)t.has(i)||(e.push(i),t.add(i));return e}function HKe(n,e,t,i){let r=[];r=r.concat(n),r=r.concat(e);for(let s=0,o=r.length;s<o;s++)qde(r[s],t,i,r);return r=GD(r),r.sort(Gde),r.reverse(),mS(r)}function VKe(n,e,t,i){let r=[];r=r.concat(n),r=r.concat(e);for(let s=0,o=r.length;s<o;s++)qde(r[s],t,i,r);return r=GD(r),r.sort(Gde),r.reverse(),mS(r.map($H))}function zKe(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=GD(e),mS(e)}function WKe(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=GD(e),mS(e.map($H))}function $Ke(n){const e=/^[\w ]+$/.test(n);return n=zd(n),e?`\\b${n}\\b`:n}function mS(n,e){const t=`(${n.map($Ke).join(")|(")})`;return nde(t,!0,e)}const $H=function(){function n(i){const r=new Uint16Array(i.length);let s=0;for(let o=i.length-1;o>=0;o--)r[s++]=i.charCodeAt(o);return Kde().decode(r)}let e=null,t=null;return function(r){return e!==r&&(e=r,t=n(e)),t}}();class Ya{static _findPrevBracketInText(e,t,i,r){const s=i.match(e);if(!s)return null;const o=i.length-(s.index||0),a=s[0].length,l=r+o;return new te(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,r,s){const a=$H(i).substring(i.length-s,i.length-r);return this._findPrevBracketInText(e,t,a,r)}static findNextBracketInText(e,t,i,r){const s=i.match(e);if(!s)return null;const o=s.index||0,a=s[0].length;if(a===0)return null;const l=r+o;return new te(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,r,s){const o=i.substring(r,s);return this.findNextBracketInText(e,t,o,r)}}class UKe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const r=i.charAt(i.length-1);e.push(r)}return Gp(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const r=t.findTokenIndexAtOffset(i-1);if(Pc(t.getStandardTokenType(r)))return null;const s=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,i-1)+e,a=Ya.findPrevBracketInRange(s,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const u=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(u)?{matchOpenBracket:l}:null}}function Zx(n){return n.global&&(n.lastIndex=0),!0}class jKe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Zx(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Zx(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Zx(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Zx(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Fv{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=Fv._createOpenBracketRegExp(t[0]),r=Fv._createCloseBracketRegExp(t[1]);i&&r&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:r})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,r){if(e>=3)for(let s=0,o=this._regExpRules.length;s<o;s++){const a=this._regExpRules[s];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:r},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&r.length>0)for(let s=0,o=this._brackets.length;s<o;s++){const a=this._brackets[s];if(a.openRegExp.test(i)&&a.closeRegExp.test(r))return{indentAction:Rs.IndentOutdent}}if(e>=2&&i.length>0){for(let s=0,o=this._brackets.length;s<o;s++)if(this._brackets[s].openRegExp.test(i))return{indentAction:Rs.Indent}}return null}static _createOpenBracketRegExp(e){let t=zd(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Fv._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=zd(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Fv._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return $n(t),null}}}const Ti=cn("configurationService");function h8(n,e){const t=Object.create(null);for(const i in n)Yde(t,i,n[i],e);return t}function Yde(n,e,t,i){const r=e.split("."),s=r.pop();let o=n;for(let a=0;a<r.length;a++){const l=r[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":if(c===null){i(`Ignoring ${e} as ${r.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${e} as ${r.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[s]=t}catch{i(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(o)}`)}function KKe(n,e){const t=e.split(".");Zde(n,t)}function Zde(n,e){const t=e.shift();if(e.length===0){delete n[t];return}if(Object.keys(n).indexOf(t)!==-1){const i=n[t];typeof i=="object"&&!Array.isArray(i)&&(Zde(i,e),Object.keys(i).length===0&&delete n[t])}}function _Y(n,e,t){function i(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const r=e.split("."),s=i(n,r);return typeof s>"u"?t:s}function qKe(n){return n.replace(/[\[\]]/g,"")}const br=cn("languageService");class Xc{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const Xde=[];function yn(n,e,t){e instanceof Xc||(e=new Xc(e,[],!!t)),Xde.push([n,e])}function CY(){return Xde}const ad=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),YD={JSONContribution:"base.contributions.json"};function GKe(n){return n.length>0&&n.charAt(n.length-1)==="#"?n.substring(0,n.length-1):n}class YKe{constructor(){this._onDidChangeSchema=new ae,this.schemasById={}}registerSchema(e,t){this.schemasById[GKe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const ZKe=new YKe;Lr.add(YD.JSONContribution,ZKe);const xm={Configuration:"base.contributions.configuration"},n_="vscode://schemas/settings/resourceLanguage",yY=Lr.as(YD.JSONContribution);class XKe{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new ae,this._onDidUpdateConfiguration=new ae,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:S("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},yY.registerSchema(n_,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),yY.registerSchema(n_,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const i=[];for(const{overrides:r,source:s}of e)for(const o in r){t.add(o);const a=this.configurationDefaultsOverrides.get(o)??this.configurationDefaultsOverrides.set(o,{configurationDefaultOverrides:[]}).get(o),l=r[o];if(a.configurationDefaultOverrides.push({value:l,source:s}),Lf.test(o)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(o,l,s,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(o,c,s),i.push(...$L(o))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(o,l,s,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const u=this.configurationProperties[o];u&&(this.updatePropertyDefaultValue(o,u),this.updateSchema(o,u))}}this.doRegisterOverrideIdentifiers(i)}updateDefaultOverrideProperty(e,t,i){const r={type:"object",default:t.value,description:S("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",qKe(e)),$ref:n_,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.configurationProperties[e]=r,this.defaultLanguageConfigurationOverridesNode.properties[e]=r}mergeDefaultConfigurationsForOverrideIdentifier(e,t,i,r){const s=(r==null?void 0:r.value)||{},o=(r==null?void 0:r.source)??new Map;if(!(o instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(no(l)&&(Na(s[a])||no(s[a]))){if(s[a]={...s[a]??{},...l},i)for(const u in l)o.set(`${a}.${u}`,i)}else s[a]=l,i?o.set(a,i):o.delete(a)}return{value:s,source:o}}mergeDefaultConfigurationsForConfigurationProperty(e,t,i,r){const s=this.configurationProperties[e],o=(r==null?void 0:r.value)??(s==null?void 0:s.defaultDefaultValue);let a=i;if(no(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(Na(o)||no(o)))){if(a=(r==null?void 0:r.source)??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&a.set(`${e}.${c}`,i);t={...no(o)?o:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(r=>{this.validateAndRegisterProperties(r,t,r.extensionInfo,r.restrictedProperties,void 0,i),this.configurationContributors.push(r),this.registerJSONConfiguration(r)})}validateAndRegisterProperties(e,t=!0,i,r,s=3,o){var c;s=Yo(e.scope)?s:e.scope;const a=e.properties;if(a)for(const u in a){const d=a[u];if(t&&eqe(u,d)){delete a[u];continue}if(d.source=i,d.defaultDefaultValue=a[u].default,this.updatePropertyDefaultValue(u,d),Lf.test(u)?d.scope=void 0:(d.scope=Yo(d.scope)?s:d.scope,d.restricted=Yo(d.restricted)?!!(r!=null&&r.includes(u)):d.restricted),a[u].hasOwnProperty("included")&&!a[u].included){this.excludedConfigurationProperties[u]=a[u],delete a[u];continue}else this.configurationProperties[u]=a[u],(c=a[u].policy)!=null&&c.name&&this.policyConfigurations.set(a[u].policy.name,u);!a[u].deprecationMessage&&a[u].markdownDeprecationMessage&&(a[u].deprecationMessage=a[u].markdownDeprecationMessage),o.add(u)}const l=e.allOf;if(l)for(const u of l)this.validateAndRegisterProperties(u,t,i,r,s,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=i=>{const r=i.properties;if(r)for(const o in r)this.updateSchema(o,r[o]);const s=i.allOf;s==null||s.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:S("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:S("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:n_};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){S("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),S("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){var o;const i=(o=this.configurationDefaultsOverrides.get(e))==null?void 0:o.configurationDefaultOverrideValue;let r,s;i&&(!t.disallowConfigurationDefault||!i.source)&&(r=i.value,s=i.source),Na(r)&&(r=t.defaultDefaultValue,s=void 0),Na(r)&&(r=JKe(t.type)),t.default=r,t.defaultValueSource=s}}const Qde="\\[([^\\]]+)\\]",wY=new RegExp(Qde,"g"),QKe=`^(${Qde})+$`,Lf=new RegExp(QKe);function $L(n){const e=[];if(Lf.test(n)){let t=wY.exec(n);for(;t!=null&&t.length;){const i=t[1].trim();i&&e.push(i),t=wY.exec(n)}}return Gp(e)}function JKe(n){switch(Array.isArray(n)?n[0]:n){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const bE=new XKe;Lr.add(xm.Configuration,bE);function eqe(n,e){var t,i,r,s;return n.trim()?Lf.test(n)?S("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",n):bE.getConfigurationProperties()[n]!==void 0?S("config.property.duplicate","Cannot register '{0}'. This property is already registered.",n):(t=e.policy)!=null&&t.name&&bE.getPolicyConfigurations().get((i=e.policy)==null?void 0:i.name)!==void 0?S("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",n,(r=e.policy)==null?void 0:r.name,bE.getPolicyConfigurations().get((s=e.policy)==null?void 0:s.name)):null:S("config.property.empty","Cannot register an empty property")}const tqe={ModesRegistry:"editor.modesRegistry"};class nqe{constructor(){this._onDidChangeLanguages=new ae,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const D1=new nqe;Lr.add(tqe.ModesRegistry,D1);const gl="plaintext",iqe=".txt";D1.registerLanguage({id:gl,extensions:[iqe],aliases:[S("plainText.alias","Plain Text"),"text"],mimetypes:[ad.text]});Lr.as(xm.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class rqe{constructor(e,t){this.languageId=e;const i=t.brackets?SY(t.brackets):[],r=new zG(a=>{const l=new Set;return{info:new sqe(this,a,l),closing:l}}),s=new zG(a=>{const l=new Set,c=new Set;return{info:new oqe(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of i){const c=r.get(a),u=s.get(l);c.closing.add(u.info),u.opening.add(c.info)}const o=t.colorizedBracketPairs?SY(t.colorizedBracketPairs):i.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of o){const c=r.get(a),u=s.get(l);c.closing.add(u.info),u.openingColorized.add(c.info),u.opening.add(c.info)}this._openingBrackets=new Map([...r.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return mS(t,e)}}function SY(n){return n.filter(([e,t])=>e!==""&&t!=="")}class Jde{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class sqe extends Jde{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class oqe extends Jde{constructor(e,t,i,r){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=r,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var aqe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},xY=function(n,e){return function(t,i){e(t,i,n)}};class YR{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const Eu=cn("languageConfigurationService");let f8=class extends ke{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new dqe),this.onDidChangeEmitter=this._register(new ae),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(g8));this._register(this.configurationService.onDidChangeConfiguration(r=>{const s=r.change.keys.some(a=>i.has(a)),o=r.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new YR(void 0));else for(const a of o)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new YR(a)))})),this._register(this._registry.onDidChange(r=>{this.configurations.delete(r.languageId),this.onDidChangeEmitter.fire(new YR(r.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=lqe(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};f8=aqe([xY(0,Ti),xY(1,br)],f8);function lqe(n,e,t,i){let r=e.getLanguageConfiguration(n);if(!r){if(!i.isRegisteredLanguageId(n))return new M0(n,{});r=new M0(n,{})}const s=cqe(r.languageId,t),o=the([r.underlyingConfig,s]);return new M0(r.languageId,o)}const g8={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function cqe(n,e){const t=e.getValue(g8.brackets,{overrideIdentifier:n}),i=e.getValue(g8.colorizedBracketPairs,{overrideIdentifier:n});return{brackets:kY(t),colorizedBracketPairs:kY(i)}}function kY(n){if(Array.isArray(n))return n.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function ehe(n,e,t){const i=n.getLineContent(e);let r=Ts(i);return r.length>t-1&&(r=r.substring(0,t-1)),r}class uqe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new EY(e,t,++this._order);return this._entries.push(i),this._resolved=null,Pt(()=>{for(let r=0;r<this._entries.length;r++)if(this._entries[r]===i){this._entries.splice(r,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new M0(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(EY.cmp),the(this._entries.map(e=>e.configuration)))}}function the(n){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of n)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class EY{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class LY{constructor(e){this.languageId=e}}class dqe extends ke{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new ae),this.onDidChange=this._onDidChange.event,this._register(this.register(gl,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let r=this._entries.get(e);r||(r=new uqe(e),this._entries.set(e,r));const s=r.register(t,i);return this._onDidChange.fire(new LY(e)),Pt(()=>{s.dispose(),this._onDidChange.fire(new LY(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class M0{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Fv(this.underlyingConfig):null,this.comments=M0._handleComments(this.underlyingConfig),this.characterPair=new d8(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||cH,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new jKe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new rqe(e,this.underlyingConfig)}getWordDefinition(){return uH(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new BKe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new UKe(this.brackets)),this._electricCharacter}onEnter(e,t,i,r){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,r):null}getAutoClosingPairs(){return new IKe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[r,s]=t.blockComment;i.blockCommentStartToken=r,i.blockCommentEndToken=s}return i}}yn(Eu,f8,1);class uh{constructor(e,t,i,r){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=r}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class NY{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,r=e.length;i<r;i++)t[i]=e.charCodeAt(i);return t}}function hqe(n,e,t){return new ld(new NY(n),new NY(e)).ComputeDiff(t).changes}class jm{static Assert(e,t){if(!e)throw new Error(t)}}class Km{static Copy(e,t,i,r,s){for(let o=0;o<s;o++)i[r+o]=e[t+o]}static Copy2(e,t,i,r,s){for(let o=0;o<s;o++)i[r+o]=e[t+o]}}class TY{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new uh(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class ld{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[r,s,o]=ld._getElements(e),[a,l,c]=ld._getElements(t);this._hasStrings=o&&c,this._originalStringElements=r,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(ld._isStringArray(t)){const i=new Int32Array(t.length);for(let r=0,s=t.length;r<s;r++)i[r]=NH(t[r],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=ld._getStrictElement(this._originalSequence,e),r=ld._getStrictElement(this._modifiedSequence,t);return i===r}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,r,s){const o=[!1];let a=this.ComputeDiffRecursive(e,t,i,r,o);return s&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,i,r,s){for(s[0]=!1;e<=t&&i<=r&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&r>=i&&this.ElementsAreEqual(t,r);)t--,r--;if(e>t||i>r){let d;return i<=r?(jm.Assert(e===t+1,"originalStart should only be one more than originalEnd"),d=[new uh(e,0,i,r-i+1)]):e<=t?(jm.Assert(i===r+1,"modifiedStart should only be one more than modifiedEnd"),d=[new uh(e,t-e+1,i,0)]):(jm.Assert(e===t+1,"originalStart should only be one more than originalEnd"),jm.Assert(i===r+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,r,o,a,s),c=o[0],u=a[0];if(l!==null)return l;if(!s[0]){const d=this.ComputeDiffRecursive(e,c,i,u,s);let h=[];return s[0]?h=[new uh(c+1,t-(c+1)+1,u+1,r-(u+1)+1)]:h=this.ComputeDiffRecursive(c+1,t,u+1,r,s),this.ConcatenateChanges(d,h)}return[new uh(e,t-e+1,i,r-i+1)]}WALKTRACE(e,t,i,r,s,o,a,l,c,u,d,h,f,g,p,v,b,_){let y=null,C=null,w=new TY,x=t,k=i,E=f[0]-v[0]-r,L=-1073741824,M=this.m_forwardHistory.length-1;do{const D=E+e;D===x||D<k&&c[D-1]<c[D+1]?(d=c[D+1],g=d-E-r,d<L&&w.MarkNextChange(),L=d,w.AddModifiedElement(d+1,g),E=D+1-e):(d=c[D-1]+1,g=d-E-r,d<L&&w.MarkNextChange(),L=d-1,w.AddOriginalElement(d,g+1),E=D-1-e),M>=0&&(c=this.m_forwardHistory[M],e=c[0],x=1,k=c.length-1)}while(--M>=-1);if(y=w.getReverseChanges(),_[0]){let D=f[0]+1,O=v[0]+1;if(y!==null&&y.length>0){const A=y[y.length-1];D=Math.max(D,A.getOriginalEnd()),O=Math.max(O,A.getModifiedEnd())}C=[new uh(D,h-D+1,O,p-O+1)]}else{w=new TY,x=o,k=a,E=f[0]-v[0]-l,L=1073741824,M=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const D=E+s;D===x||D<k&&u[D-1]>=u[D+1]?(d=u[D+1]-1,g=d-E-l,d>L&&w.MarkNextChange(),L=d+1,w.AddOriginalElement(d+1,g+1),E=D+1-s):(d=u[D-1],g=d-E-l,d>L&&w.MarkNextChange(),L=d,w.AddModifiedElement(d+1,g+1),E=D-1-s),M>=0&&(u=this.m_reverseHistory[M],s=u[0],x=1,k=u.length-1)}while(--M>=-1);C=w.getChanges()}return this.ConcatenateChanges(y,C)}ComputeRecursionPoint(e,t,i,r,s,o,a){let l=0,c=0,u=0,d=0,h=0,f=0;e--,i--,s[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(r-i),p=g+1,v=new Int32Array(p),b=new Int32Array(p),_=r-i,y=t-e,C=e-i,w=t-r,k=(y-_)%2===0;v[_]=e,b[y]=t,a[0]=!1;for(let E=1;E<=g/2+1;E++){let L=0,M=0;u=this.ClipDiagonalBound(_-E,E,_,p),d=this.ClipDiagonalBound(_+E,E,_,p);for(let O=u;O<=d;O+=2){O===u||O<d&&v[O-1]<v[O+1]?l=v[O+1]:l=v[O-1]+1,c=l-(O-_)-C;const A=l;for(;l<t&&c<r&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(v[O]=l,l+c>L+M&&(L=l,M=c),!k&&Math.abs(O-y)<=E-1&&l>=b[O])return s[0]=l,o[0]=c,A<=b[O]&&E<=1448?this.WALKTRACE(_,u,d,C,y,h,f,w,v,b,l,t,s,c,r,o,k,a):null}const D=(L-e+(M-i)-E)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(L,D))return a[0]=!0,s[0]=L,o[0]=M,D>0&&E<=1448?this.WALKTRACE(_,u,d,C,y,h,f,w,v,b,l,t,s,c,r,o,k,a):(e++,i++,[new uh(e,t-e+1,i,r-i+1)]);h=this.ClipDiagonalBound(y-E,E,y,p),f=this.ClipDiagonalBound(y+E,E,y,p);for(let O=h;O<=f;O+=2){O===h||O<f&&b[O-1]>=b[O+1]?l=b[O+1]-1:l=b[O-1],c=l-(O-y)-w;const A=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(b[O]=l,k&&Math.abs(O-_)<=E&&l<=v[O])return s[0]=l,o[0]=c,A>=v[O]&&E<=1448?this.WALKTRACE(_,u,d,C,y,h,f,w,v,b,l,t,s,c,r,o,k,a):null}if(E<=1447){let O=new Int32Array(d-u+2);O[0]=_-u+1,Km.Copy2(v,u,O,1,d-u+1),this.m_forwardHistory.push(O),O=new Int32Array(f-h+2),O[0]=y-h+1,Km.Copy2(b,h,O,1,f-h+1),this.m_reverseHistory.push(O)}}return this.WALKTRACE(_,u,d,C,y,h,f,w,v,b,l,t,s,c,r,o,k,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],r=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<r&&i.modifiedStart+i.modifiedLength<s&&(!o||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let r=0,s=0;if(t>0){const d=e[t-1];r=d.originalStart+d.originalLength,s=d.modifiedStart+d.modifiedLength}const o=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let d=1;;d++){const h=i.originalStart-d,f=i.modifiedStart-d;if(h<r||f<s||o&&!this.OriginalElementsAreEqual(h,h+i.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+i.modifiedLength))break;const p=(h===r&&f===s?5:0)+this._boundaryScore(h,i.originalLength,f,i.modifiedLength);p>c&&(c=p,l=d)}i.originalStart-=l,i.modifiedStart-=l;const u=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],u)){e[t-1]=u[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const r=e[t-1],s=e[t],o=s.originalStart-r.originalStart-r.originalLength,a=r.originalStart,l=s.originalStart+s.originalLength,c=l-a,u=r.modifiedStart,d=s.modifiedStart+s.modifiedLength,h=d-u;if(o<5&&c<20&&h<20){const f=this._findBetterContiguousSequence(a,c,u,h,o);if(f){const[g,p]=f;(g!==r.originalStart+r.originalLength||p!==r.modifiedStart+r.modifiedLength)&&(r.originalLength=g-r.originalStart,r.modifiedLength=p-r.modifiedStart,s.originalStart=g+o,s.modifiedStart=p+o,s.originalLength=l-s.originalStart,s.modifiedLength=d-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,r,s){if(t<s||r<s)return null;const o=e+t-s+1,a=i+r-s+1;let l=0,c=0,u=0;for(let d=e;d<o;d++)for(let h=i;h<a;h++){const f=this._contiguousSequenceScore(d,h,s);f>0&&f>l&&(l=f,c=d,u=h)}return l>0?[c,u]:null}_contiguousSequenceScore(e,t,i){let r=0;for(let s=0;s<i;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;r+=this._originalStringElements[e+s].length}return r}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,r){const s=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(i,r)?1:0;return s+o}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const r=new Array(e.length+t.length-1);return Km.Copy(e,0,r,0,e.length-1),r[e.length-1]=i[0],Km.Copy(t,1,r,e.length,t.length-1),r}else{const r=new Array(e.length+t.length);return Km.Copy(e,0,r,0,e.length),Km.Copy(t,0,r,e.length,t.length),r}}ChangesOverlap(e,t,i){if(jm.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),jm.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const r=e.originalStart;let s=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new uh(r,s,o,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,r){if(e>=0&&e<r)return e;const s=i,o=r-i-1,a=t%2===0;if(e<0){const l=s%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?r-1:r-2}}}function UL(n){return n<0?0:n>255?255:n|0}function qm(n){return n<0?0:n>4294967295?4294967295:n|0}class vS{constructor(e){const t=UL(e);this._defaultValue=t,this._asciiMap=vS._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=UL(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class fqe{constructor(e,t,i){const r=new Uint8Array(e*t);for(let s=0,o=e*t;s<o;s++)r[s]=i;this._data=r,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class gqe{constructor(e){let t=0,i=0;for(let s=0,o=e.length;s<o;s++){const[a,l,c]=e[s];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const r=new fqe(i,t,0);for(let s=0,o=e.length;s<o;s++){const[a,l,c]=e[s];r.set(a,l,c)}this._states=r,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let ZR=null;function pqe(){return ZR===null&&(ZR=new gqe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),ZR}let i_=null;function mqe(){if(i_===null){i_=new vS(0);const n=` 	<>'"`;for(let t=0;t<n.length;t++)i_.set(n.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)i_.set(e.charCodeAt(t),2)}return i_}class jL{static _createLink(e,t,i,r,s){let o=s-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>r);if(r>0){const a=t.charCodeAt(r-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:i,startColumn:r+1,endLineNumber:i,endColumn:o+2},url:t.substring(r,o+1)}}static computeLinks(e,t=pqe()){const i=mqe(),r=[];for(let s=1,o=e.getLineCount();s<=o;s++){const a=e.getLineContent(s),l=a.length;let c=0,u=0,d=0,h=1,f=!1,g=!1,p=!1,v=!1;for(;c<l;){let b=!1;const _=a.charCodeAt(c);if(h===13){let y;switch(_){case 40:f=!0,y=0;break;case 41:y=f?0:1;break;case 91:p=!0,g=!0,y=0;break;case 93:p=!1,y=g?0:1;break;case 123:v=!0,y=0;break;case 125:y=v?0:1;break;case 39:case 34:case 96:d===_?y=1:d===39||d===34||d===96?y=0:y=1;break;case 42:y=d===42?1:0;break;case 124:y=d===124?1:0;break;case 32:y=p?0:1;break;default:y=i.get(_)}y===1&&(r.push(jL._createLink(i,a,s,u,c)),b=!0)}else if(h===12){let y;_===91?(g=!0,y=0):y=i.get(_),y===1?b=!0:h=13}else h=t.nextState(h,_),h===0&&(b=!0);b&&(h=1,f=!1,g=!1,v=!1,u=c+1,d=_),c++}h===13&&r.push(jL._createLink(i,a,s,u,l))}return r}}function vqe(n){return!n||typeof n.getLineCount!="function"||typeof n.getLineContent!="function"?[]:jL.computeLinks(n)}const xT=class xT{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,r,s){if(e&&t){const o=this.doNavigateValueSet(t,s);if(o)return{range:e,value:o}}if(i&&r){const o=this.doNavigateValueSet(r,s);if(o)return{range:i,value:o}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let r=Number(e);const s=parseFloat(e);return!isNaN(r)&&!isNaN(s)&&r===s?r===0&&!t?null:(r=Math.floor(r*i),r+=t?i:-i,String(r/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let r=null;for(let s=0,o=e.length;r===null&&s<o;s++)r=this.valueSetReplace(e[s],t,i);return r}valueSetReplace(e,t,i){let r=e.indexOf(t);return r>=0?(r+=i?1:-1,r<0?r=e.length-1:r%=e.length,e[r]):null}};xT.INSTANCE=new xT;let p8=xT;const GC=class GC{static getChannel(e){return e.getChannel(GC.CHANNEL_NAME)}static setChannel(e,t){e.setChannel(GC.CHANNEL_NAME,t)}};GC.CHANNEL_NAME="editorWorkerHost";let m8=GC;var IY,DY;class bqe{constructor(e,t){this.uri=e,this.value=t}}function _qe(n){return Array.isArray(n)}const Og=class Og{constructor(e,t){if(this[IY]="ResourceMap",e instanceof Og)this.map=new Map(e.map),this.toKey=t??Og.defaultToKey;else if(_qe(e)){this.map=new Map,this.toKey=t??Og.defaultToKey;for(const[i,r]of e)this.set(i,r)}else this.map=new Map,this.toKey=e??Og.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new bqe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))==null?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,r]of this.map)e(r.value,r.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(IY=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};Og.defaultToKey=e=>e.toString();let ca=Og;class Cqe{constructor(){this[DY]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let r=this._map.get(e);if(r)r.value=t,i!==0&&this.touch(r,i);else{switch(r={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let i=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.key,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let i=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.value,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let i=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:[i.key,i.value],done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}[(DY=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,r=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class yqe extends Cqe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class bS extends yqe{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class wqe{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class nhe{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class Sqe extends vS{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,r=e.length;i<r;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const r of this._getIntlSegmenterWordsOnLine(e)){if(r.index>t)break;i=r}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const MY=new bS(10);function M1(n,e){const t=`${n}/${e.join(",")}`;let i=MY.get(t);return i||(i=new Sqe(n,e),MY.set(t,i)),i}var KL;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(KL||(KL={}));var Nf;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(Nf||(Nf={}));var R1;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(R1||(R1={}));class _E{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&No(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class nw{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function xqe(n){return n&&typeof n.read=="function"}class XR{constructor(e,t,i,r,s,o){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=r,this.isAutoWhitespaceEdit=s,this._isTracked=o}}class kqe{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class Eqe{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function Lqe(n){return!n.isTooLargeForSyncing()&&!n.isForSimpleWidget}const Nqe=999;class Gm{constructor(e,t,i,r){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=Tqe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=nde(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new kqe(t,this.wordSeparators?M1(this.wordSeparators,[]):null,i?this.searchString:null)}}function Tqe(n){if(!n||n.length===0)return!1;for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const r=n.charCodeAt(e);if(r===110||r===114||r===87)return!0}}return!1}function yg(n,e,t){if(!t)return new nw(n,null);const i=[];for(let r=0,s=e.length;r<s;r++)i[r]=e[r];return new nw(n,i)}class RY{constructor(e){const t=[];let i=0;for(let r=0,s=e.length;r<s;r++)e.charCodeAt(r)===10&&(t[i++]=r);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,r=t.length-1;if(r===-1||e<=t[0])return 0;for(;i<r;){const s=i+((r-i)/2>>0);t[s]>=e?r=s-1:t[s+1]>=e?(i=s,r=s):i=s+1}return i+1}}class Xx{static findMatches(e,t,i,r,s){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,i,new Bv(o.wordSeparators,o.regex),r,s):this._doFindMatchesLineByLine(e,i,o,r,s):[]}static _getMultilineMatchRange(e,t,i,r,s,o){let a,l=0;r?(l=r.findLineFeedCountBeforeOffset(s),a=t+s+l):a=t+s;let c;if(r){const f=r.findLineFeedCountBeforeOffset(s+o.length)-l;c=a+o.length+f}else c=a+o.length;const u=e.getPositionAt(a),d=e.getPositionAt(c);return new te(u.lineNumber,u.column,d.lineNumber,d.column)}static _doFindMatchesMultiline(e,t,i,r,s){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new RY(a):null,c=[];let u=0,d;for(i.reset(0);d=i.next(a);)if(c[u++]=yg(this._getMultilineMatchRange(e,o,a,l,d.index,d[0]),d,r),u>=s)return c;return c}static _doFindMatchesLineByLine(e,t,i,r,s){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,o,r,s),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,o,r,s);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<s;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,o,r,s);if(a<s){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,o,r,s)}return o}static _findMatchesInLine(e,t,i,r,s,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=t.length;let p=-f;for(;(p=t.indexOf(h,p+f))!==-1;)if((!c||UH(c,t,g,p,f))&&(o[s++]=new nw(new te(i,p+1+r,i,p+1+f+r),null),s>=l))return s;return s}const u=new Bv(e.wordSeparators,e.regex);let d;u.reset(0);do if(d=u.next(t),d&&(o[s++]=yg(new te(i,d.index+1+r,i,d.index+1+d[0].length+r),d,a),s>=l))return s;while(d);return s}static findNextMatch(e,t,i,r){const s=t.parseSearchRequest();if(!s)return null;const o=new Bv(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,i,o,r):this._doFindNextMatchLineByLine(e,i,o,r)}static _doFindNextMatchMultiline(e,t,i,r){const s=new de(t.lineNumber,1),o=e.getOffsetAt(s),a=e.getLineCount(),l=e.getValueInRange(new te(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new RY(l):null;i.reset(t.column-1);const u=i.next(l);return u?yg(this._getMultilineMatchRange(e,o,l,c,u.index,u[0]),u,r):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new de(1,1),i,r):null}static _doFindNextMatchLineByLine(e,t,i,r){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(i,a,o,t.column,r);if(l)return l;for(let c=1;c<=s;c++){const u=(o+c-1)%s,d=e.getLineContent(u+1),h=this._findFirstMatchInLine(i,d,u+1,1,r);if(h)return h}return null}static _findFirstMatchInLine(e,t,i,r,s){e.reset(r-1);const o=e.next(t);return o?yg(new te(i,o.index+1,i,o.index+1+o[0].length),o,s):null}static findPreviousMatch(e,t,i,r){const s=t.parseSearchRequest();if(!s)return null;const o=new Bv(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,i,o,r):this._doFindPreviousMatchLineByLine(e,i,o,r)}static _doFindPreviousMatchMultiline(e,t,i,r){const s=this._doFindMatchesMultiline(e,new te(1,1,t.lineNumber,t.column),i,r,10*Nqe);if(s.length>0)return s[s.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new de(o,e.getLineMaxColumn(o)),i,r):null}static _doFindPreviousMatchLineByLine(e,t,i,r){const s=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,o,r);if(l)return l;for(let c=1;c<=s;c++){const u=(s+o-c-1)%s,d=e.getLineContent(u+1),h=this._findLastMatchInLine(i,d,u+1,r);if(h)return h}return null}static _findLastMatchInLine(e,t,i,r){let s=null,o;for(e.reset(0);o=e.next(t);)s=yg(new te(i,o.index+1,i,o.index+1+o[0].length),o,r);return s}}function Iqe(n,e,t,i,r){if(i===0)return!0;const s=e.charCodeAt(i-1);if(n.get(s)!==0||s===13||s===10)return!0;if(r>0){const o=e.charCodeAt(i);if(n.get(o)!==0)return!0}return!1}function Dqe(n,e,t,i,r){if(i+r===t)return!0;const s=e.charCodeAt(i+r);if(n.get(s)!==0||s===13||s===10)return!0;if(r>0){const o=e.charCodeAt(i+r-1);if(n.get(o)!==0)return!0}return!1}function UH(n,e,t,i,r){return Iqe(n,e,t,i,r)&&Dqe(n,e,t,i,r)}class Bv{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const r=i.index,s=i[0].length;if(r===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){OL(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=r,this._prevMatchLength=s,!this._wordSeparators||UH(this._wordSeparators,e,t,r,s))return i}while(i);return null}}class Mqe{static computeUnicodeHighlights(e,t,i){const r=i?i.startLineNumber:1,s=i?i.endLineNumber:e.getLineCount(),o=new AY(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${Rqe(Array.from(a))}`,"g");const c=new Bv(null,l),u=[];let d=!1,h,f=0,g=0,p=0;e:for(let v=r,b=s;v<=b;v++){const _=e.getLineContent(v),y=_.length;c.reset(0);do if(h=c.next(_),h){let C=h.index,w=h.index+h[0].length;if(C>0){const L=_.charCodeAt(C-1);gr(L)&&C--}if(w+1<y){const L=_.charCodeAt(w-1);gr(L)&&w++}const x=_.substring(C,w);let k=Ky(C+1,cH,_,0);k&&k.endColumn<=C+1&&(k=null);const E=o.shouldHighlightNonBasicASCII(x,k?k.word:null);if(E!==0){if(E===3?f++:E===2?g++:E===1?p++:BH(),u.length>=1e3){d=!0;break e}u.push(new te(v,C+1,v,w+1))}}while(h)}return{ranges:u,hasMore:d,ambiguousCharacterCount:f,invisibleCharacterCount:g,nonBasicAsciiCharacterCount:p}}static computeUnicodeHighlightReason(e,t){const i=new AY(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const s=e.codePointAt(0),o=i.ambiguousCharacters.getPrimaryConfusable(s),a=Xy.getLocales().filter(l=>!Xy.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(s));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function Rqe(n,e){return`[${zd(n.map(i=>String.fromCodePoint(i)).join(""))}]`}class AY{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Xy.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of pC.codePoints)OY(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let r=!1,s=!1;if(t)for(const o of t){const a=o.codePointAt(0),l=SH(o);r=r||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!pC.isInvisibleCharacter(a)&&(s=!0)}return!r&&s?0:this.options.invisibleCharacters&&!OY(e)&&pC.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function OY(n){return n===" "||n===`
`||n==="	"}class CE{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class ihe{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class Ht{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let r=i;for(;r<t.length&&t[r].start<=e.endExclusive;)r++;if(i===r)t.splice(i,0,e);else{const s=Math.min(e.start,t[i].start),o=Math.max(e.endExclusive,t[r-1].endExclusive);t.splice(i,r-i,new Ht(s,o))}}static tryCreate(e,t){if(!(e>t))return new Ht(e,t)}static ofLength(e){return new Ht(0,e)}static ofStartAndLength(e,t){return new Ht(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Tn(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new Ht(this.start+e,this.endExclusive+e)}deltaStart(e){return new Ht(this.start+e,this.endExclusive)}deltaEnd(e){return new Ht(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new Ht(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new Ht(t,i)}intersects(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<i}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Tn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Tn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class jH{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const r=Math.min(e.start,this._sortedRanges[t].start),s=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new Ht(r,s))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new jH;for(const i of this._sortedRanges){const r=i.intersect(e);r&&t.addRange(r)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function qL(n,e){const t=Aqe(n,e);if(t!==-1)return n[t]}function Aqe(n,e,t=n.length-1){for(let i=t;i>=0;i--){const r=n[i];if(e(r))return i}return-1}function A1(n,e){const t=iw(n,e);return t===-1?void 0:n[t]}function iw(n,e,t=0,i=n.length){let r=t,s=i;for(;r<s;){const o=Math.floor((r+s)/2);e(n[o])?r=o+1:s=o}return r-1}function Oqe(n,e){const t=v8(n,e);return t===n.length?void 0:n[t]}function v8(n,e,t=0,i=n.length){let r=t,s=i;for(;r<s;){const o=Math.floor((r+s)/2);e(n[o])?s=o:r=o+1}return r}const kT=class kT{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(kT.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!e(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=iw(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};kT.assertInvariants=!1;let GL=kT;function rhe(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const r=n[i];e(r,t)>0&&(t=r)}return t}function Pqe(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const r=n[i];e(r,t)>=0&&(t=r)}return t}function Fqe(n,e){return rhe(n,(t,i)=>-e(t,i))}function Bqe(n,e){if(n.length===0)return-1;let t=0;for(let i=1;i<n.length;i++){const r=n[i];e(r,n[t])>0&&(t=i)}return t}let It=class zu{static fromRangeInclusive(e){return new zu(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new Sa(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new Sa(e[i].slice()));return t.ranges}static join(e){if(e.length===0)throw new Tn("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let r=1;r<e.length;r++)t=Math.min(t,e[r].startLineNumber),i=Math.max(i,e[r].endLineNumberExclusive);return new zu(t,i)}static ofLength(e,t){return new zu(e,e+t)}static deserialize(e){return new zu(e[0],e[1])}constructor(e,t){if(e>t)throw new Tn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new zu(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new zu(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new zu(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new zu(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new te(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new te(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Ht(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class Sa{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=v8(this._normalizedRanges,r=>r.endLineNumberExclusive>=e.startLineNumber),i=iw(this._normalizedRanges,r=>r.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const r=this._normalizedRanges[t];this._normalizedRanges[t]=r.join(e)}else{const r=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,r)}}contains(e){const t=A1(this._normalizedRanges,i=>i.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=A1(this._normalizedRanges,i=>i.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let i=0,r=0,s=null;for(;i<this._normalizedRanges.length||r<e._normalizedRanges.length;){let o=null;if(i<this._normalizedRanges.length&&r<e._normalizedRanges.length){const a=this._normalizedRanges[i],l=e._normalizedRanges[r];a.startLineNumber<l.startLineNumber?(o=a,i++):(o=l,r++)}else i<this._normalizedRanges.length?(o=this._normalizedRanges[i],i++):(o=e._normalizedRanges[r],r++);s===null?s=o:s.endLineNumberExclusive>=o.startLineNumber?s=new It(s.startLineNumber,Math.max(s.endLineNumberExclusive,o.endLineNumberExclusive)):(t.push(s),s=o)}return s!==null&&t.push(s),new Sa(t)}subtractFrom(e){const t=v8(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),i=iw(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new Sa([e]);const r=[];let s=e.startLineNumber;for(let o=t;o<i;o++){const a=this._normalizedRanges[o];a.startLineNumber>s&&r.push(new It(s,a.startLineNumber)),s=a.endLineNumberExclusive}return s<e.endLineNumberExclusive&&r.push(new It(s,e.endLineNumberExclusive)),new Sa(r)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let i=0,r=0;for(;i<this._normalizedRanges.length&&r<e._normalizedRanges.length;){const s=this._normalizedRanges[i],o=e._normalizedRanges[r],a=s.intersect(o);a&&!a.isEmpty&&t.push(a),s.endLineNumberExclusive<o.endLineNumberExclusive?i++:r++}return new Sa(t)}getWithDelta(e){return new Sa(this._normalizedRanges.map(t=>t.delta(e)))}}const yh=class yh{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new yh(0,t.column-e.column):new yh(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return yh.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(const r of e)r===`
`?(t++,i=0):i++;return new yh(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return this.lineCount===0?new te(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new te(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new de(e.lineNumber,e.column+this.columnCount):new de(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};yh.zero=new yh(0,0);let Tf=yh;class Hqe{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Ht(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new Tf(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class Vqe{constructor(e){this.edits=e,em(()=>HH(e,(t,i)=>t.range.getEndPosition().isBeforeOrEqual(i.range.getStartPosition())))}apply(e){let t="",i=new de(1,1);for(const s of this.edits){const o=s.range,a=o.getStartPosition(),l=o.getEndPosition(),c=PY(i,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=s.text,i=l}const r=PY(i,e.endPositionExclusive);return r.isEmpty()||(t+=e.getValueOfRange(r)),t}applyToString(e){const t=new Wqe(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,i=0,r=0;for(const s of this.edits){const o=Tf.ofText(s.text),a=de.lift({lineNumber:s.range.startLineNumber+i,column:s.range.startColumn+(s.range.startLineNumber===t?r:0)}),l=o.createRange(a);e.push(l),i=l.endLineNumber-s.range.endLineNumber,r=l.endColumn-s.range.endColumn,t=s.range.endLineNumber}return e}}class zqe{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function PY(n,e){if(n.lineNumber===e.lineNumber&&n.column===Number.MAX_SAFE_INTEGER)return te.fromPositions(e,e);if(!n.isBeforeOrEqual(e))throw new Tn("start must be before end");return new te(n.lineNumber,n.column,e.lineNumber,e.column)}class she{get endPositionExclusive(){return this.length.addToPosition(new de(1,1))}}class Wqe extends she{constructor(e){super(),this.value=e,this._t=new Hqe(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class ds{static inverse(e,t,i){const r=[];let s=1,o=1;for(const l of e){const c=new ds(new It(s,l.original.startLineNumber),new It(o,l.modified.startLineNumber));c.modified.isEmpty||r.push(c),s=l.original.endLineNumberExclusive,o=l.modified.endLineNumberExclusive}const a=new ds(new It(s,t+1),new It(o,i+1));return a.modified.isEmpty||r.push(a),r}static clip(e,t,i){const r=[];for(const s of e){const o=s.original.intersect(t),a=s.modified.intersect(i);o&&!o.isEmpty&&a&&!a.isEmpty&&r.push(new ds(o,a))}return r}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new ds(this.modified,this.original)}join(e){return new ds(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new Go(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new Tn("not a valid diff");return new Go(new te(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new te(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Go(new te(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new te(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(FY(this.original.endLineNumberExclusive,e)&&FY(this.modified.endLineNumberExclusive,t))return new Go(new te(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new te(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Go(te.fromPositions(new de(this.original.startLineNumber,1),Ym(new de(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),te.fromPositions(new de(this.modified.startLineNumber,1),Ym(new de(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Go(te.fromPositions(Ym(new de(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),Ym(new de(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),te.fromPositions(Ym(new de(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),Ym(new de(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new Tn}}function Ym(n,e){if(n.lineNumber<1)return new de(1,1);if(n.lineNumber>e.length)return new de(e.length,e[e.length-1].length+1);const t=e[n.lineNumber-1];return n.column>t.length+1?new de(n.lineNumber,t.length+1):n}function FY(n,e){return n>=1&&n<=e.length}class ua extends ds{static fromRangeMappings(e){const t=It.join(e.map(r=>It.fromRangeInclusive(r.originalRange))),i=It.join(e.map(r=>It.fromRangeInclusive(r.modifiedRange)));return new ua(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){var e;return new ua(this.modified,this.original,(e=this.innerChanges)==null?void 0:e.map(t=>t.flip()))}withInnerChangesFromLineRanges(){return new ua(this.original,this.modified,[this.toRangeMapping()])}}class Go{static assertSorted(e){for(let t=1;t<e.length;t++){const i=e[t-1],r=e[t];if(!(i.originalRange.getEndPosition().isBeforeOrEqual(r.originalRange.getStartPosition())&&i.modifiedRange.getEndPosition().isBeforeOrEqual(r.modifiedRange.getStartPosition())))throw new Tn("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new Go(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new zqe(this.originalRange,t)}}const $qe=3;class Uqe{computeDiff(e,t,i){var l;const s=new qqe(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),o=[];let a=null;for(const c of s.changes){let u;c.originalEndLineNumber===0?u=new It(c.originalStartLineNumber+1,c.originalStartLineNumber+1):u=new It(c.originalStartLineNumber,c.originalEndLineNumber+1);let d;c.modifiedEndLineNumber===0?d=new It(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):d=new It(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let h=new ua(u,d,(l=c.charChanges)==null?void 0:l.map(f=>new Go(new te(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new te(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===h.modified.startLineNumber||a.original.endLineNumberExclusive===h.original.startLineNumber)&&(h=new ua(a.original.join(h.original),a.modified.join(h.modified),a.innerChanges&&h.innerChanges?a.innerChanges.concat(h.innerChanges):void 0),o.pop()),o.push(h),a=h}return em(()=>HH(o,(c,u)=>u.original.startLineNumber-c.original.endLineNumberExclusive===u.modified.startLineNumber-c.modified.endLineNumberExclusive&&c.original.endLineNumberExclusive<u.original.startLineNumber&&c.modified.endLineNumberExclusive<u.modified.startLineNumber)),new CE(o,[],s.quitEarly)}}function ohe(n,e,t,i){return new ld(n,e,t).ComputeDiff(i)}let BY=class{constructor(e){const t=[],i=[];for(let r=0,s=e.length;r<s;r++)t[r]=b8(e[r],1),i[r]=_8(e[r],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const r=[],s=[],o=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],u=e?this._startColumns[l]:1,d=e?this._endColumns[l]:c.length+1;for(let h=u;h<d;h++)r[a]=c.charCodeAt(h-1),s[a]=l+1,o[a]=h,a++;!e&&l<i&&(r[a]=10,s[a]=l+1,o[a]=c.length+1,a++)}return new jqe(r,s,o)}};class jqe{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class R0{constructor(e,t,i,r,s,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=r,this.modifiedStartLineNumber=s,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const r=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),u=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),d=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new R0(r,s,o,a,l,c,u,d)}}function Kqe(n){if(n.length<=1)return n;const e=[n[0]];let t=e[0];for(let i=1,r=n.length;i<r;i++){const s=n[i],o=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<$qe?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}class CC{constructor(e,t,i,r,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=r,this.charChanges=s}static createFromDiffResult(e,t,i,r,s,o,a){let l,c,u,d,h;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(u=r.getStartLineNumber(t.modifiedStart)-1,d=0):(u=r.getStartLineNumber(t.modifiedStart),d=r.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const f=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=r.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&g.getElements().length>0){let p=ohe(f,g,s,!0).changes;a&&(p=Kqe(p)),h=[];for(let v=0,b=p.length;v<b;v++)h.push(R0.createFromDiffChange(p[v],f,g))}}return new CC(l,c,u,d,h)}}class qqe{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new BY(e),this.modified=new BY(t),this.continueLineDiff=HY(i.maxComputationTime),this.continueCharDiff=HY(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=ohe(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(CC.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const r=[];let s=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,u=c?c.originalStart:this.originalLines.length,d=c?c.modifiedStart:this.modifiedLines.length;for(;s<u&&o<d;){const h=this.originalLines[s],f=this.modifiedLines[o];if(h!==f){{let g=b8(h,1),p=b8(f,1);for(;g>1&&p>1;){const v=h.charCodeAt(g-2),b=f.charCodeAt(p-2);if(v!==b)break;g--,p--}(g>1||p>1)&&this._pushTrimWhitespaceCharChange(r,s+1,1,g,o+1,1,p)}{let g=_8(h,1),p=_8(f,1);const v=h.length+1,b=f.length+1;for(;g<v&&p<b;){const _=h.charCodeAt(g-1),y=h.charCodeAt(p-1);if(_!==y)break;g++,p++}(g<v||p<b)&&this._pushTrimWhitespaceCharChange(r,s+1,g,v,o+1,p,b)}}s++,o++}c&&(r.push(CC.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:i,changes:r}}_pushTrimWhitespaceCharChange(e,t,i,r,s,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,r,s,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new R0(t,i,t,r,s,o,s,a)]),e.push(new CC(t,t,s,s,l))}_mergeTrimWhitespaceCharChange(e,t,i,r,s,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===s?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new R0(t,i,t,r,s,o,s,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===s?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new R0(t,i,t,r,s,o,s,a)),!0):!1}}function b8(n,e){const t=To(n);return t===-1?e:t+1}function _8(n,e){const t=mm(n);return t===-1?e:t+2}function HY(n){if(n===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<n}class Nd{static trivial(e,t){return new Nd([new Ji(Ht.ofLength(e.length),Ht.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new Nd([new Ji(Ht.ofLength(e.length),Ht.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class Ji{static invert(e,t){const i=[];return Sue(e,(r,s)=>{i.push(Ji.fromOffsetPairs(r?r.getEndExclusives():md.zero,s?s.getStarts():new md(t,(r?r.seq2Range.endExclusive-r.seq1Range.endExclusive:0)+t)))}),i}static fromOffsetPairs(e,t){return new Ji(new Ht(e.offset1,t.offset1),new Ht(e.offset2,t.offset2))}static assertSorted(e){let t;for(const i of e){if(t&&!(t.seq1Range.endExclusive<=i.seq1Range.start&&t.seq2Range.endExclusive<=i.seq2Range.start))throw new Tn("Sequence diffs must be sorted");t=i}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new Ji(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new Ji(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new Ji(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new Ji(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new Ji(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(!(!t||!i))return new Ji(t,i)}getStarts(){return new md(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new md(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}const Pg=class Pg{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new Pg(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};Pg.zero=new Pg(0,0),Pg.max=new Pg(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let md=Pg;const ET=class ET{isValid(){return!0}};ET.instance=new ET;let rw=ET;class Gqe{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Tn("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class QR{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function C8(n){return n===32||n===9}const YC=class YC{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let r=0;for(let s=e.startLineNumber-1;s<e.endLineNumberExclusive-1;s++){const o=t[s];for(let l=0;l<o.length;l++){r++;const c=o[l],u=YC.getKey(c);this.histogram[u]=(this.histogram[u]||0)+1}r++;const a=YC.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=r}computeSimilarity(e){let t=0;const i=Math.max(this.histogram.length,e.histogram.length);for(let r=0;r<i;r++)t+=Math.abs((this.histogram[r]??0)-(e.histogram[r]??0));return 1-t/(this.totalCount+e.totalCount)}};YC.chrKeys=new Map;let YL=YC;class Yqe{compute(e,t,i=rw.instance,r){if(e.length===0||t.length===0)return Nd.trivial(e,t);const s=new QR(e.length,t.length),o=new QR(e.length,t.length),a=new QR(e.length,t.length);for(let g=0;g<e.length;g++)for(let p=0;p<t.length;p++){if(!i.isValid())return Nd.trivialTimedOut(e,t);const v=g===0?0:s.get(g-1,p),b=p===0?0:s.get(g,p-1);let _;e.getElement(g)===t.getElement(p)?(g===0||p===0?_=0:_=s.get(g-1,p-1),g>0&&p>0&&o.get(g-1,p-1)===3&&(_+=a.get(g-1,p-1)),_+=r?r(g,p):1):_=-1;const y=Math.max(v,b,_);if(y===_){const C=g>0&&p>0?a.get(g-1,p-1):0;a.set(g,p,C+1),o.set(g,p,3)}else y===v?(a.set(g,p,0),o.set(g,p,1)):y===b&&(a.set(g,p,0),o.set(g,p,2));s.set(g,p,y)}const l=[];let c=e.length,u=t.length;function d(g,p){(g+1!==c||p+1!==u)&&l.push(new Ji(new Ht(g+1,c),new Ht(p+1,u))),c=g,u=p}let h=e.length-1,f=t.length-1;for(;h>=0&&f>=0;)o.get(h,f)===3?(d(h,f),h--,f--):o.get(h,f)===1?h--:f--;return d(-1,-1),l.reverse(),new Nd(l,!1)}}class ahe{compute(e,t,i=rw.instance){if(e.length===0||t.length===0)return Nd.trivial(e,t);const r=e,s=t;function o(p,v){for(;p<r.length&&v<s.length&&r.getElement(p)===s.getElement(v);)p++,v++;return p}let a=0;const l=new Zqe;l.set(0,o(0,0));const c=new Xqe;c.set(0,l.get(0)===0?null:new VY(null,0,0,l.get(0)));let u=0;e:for(;;){if(a++,!i.isValid())return Nd.trivialTimedOut(r,s);const p=-Math.min(a,s.length+a%2),v=Math.min(a,r.length+a%2);for(u=p;u<=v;u+=2){const b=u===v?-1:l.get(u+1),_=u===p?-1:l.get(u-1)+1,y=Math.min(Math.max(b,_),r.length),C=y-u;if(y>r.length||C>s.length)continue;const w=o(y,C);l.set(u,w);const x=y===b?c.get(u+1):c.get(u-1);if(c.set(u,w!==y?new VY(x,y,C,w-y):x),l.get(u)===r.length&&l.get(u)-u===s.length)break e}}let d=c.get(u);const h=[];let f=r.length,g=s.length;for(;;){const p=d?d.x+d.length:0,v=d?d.y+d.length:0;if((p!==f||v!==g)&&h.push(new Ji(new Ht(p,f),new Ht(v,g))),!d)break;f=d.x,g=d.y,d=d.prev}return h.reverse(),new Nd(h,!1)}}class VY{constructor(e,t,i,r){this.prev=e,this.x=t,this.y=i,this.length=r}}class Zqe{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const i=this.negativeArr;this.negativeArr=new Int32Array(i.length*2),this.negativeArr.set(i)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const i=this.positiveArr;this.positiveArr=new Int32Array(i.length*2),this.positiveArr.set(i)}this.positiveArr[e]=t}}}class Xqe{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class ZL{constructor(e,t,i){this.lines=e,this.range=t,this.considerWhitespaceChanges=i,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let r=this.range.startLineNumber;r<=this.range.endLineNumber;r++){let s=e[r-1],o=0;r===this.range.startLineNumber&&this.range.startColumn>1&&(o=this.range.startColumn-1,s=s.substring(o)),this.lineStartOffsets.push(o);let a=0;if(!i){const c=s.trimStart();a=s.length-c.length,s=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=r===this.range.endLineNumber?Math.min(this.range.endColumn-1-o-a,s.length):s.length;for(let c=0;c<l;c++)this.elements.push(s.charCodeAt(c));r<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new Ht(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=WY(e>0?this.elements[e-1]:-1),i=WY(e<this.elements.length?this.elements[e]:-1);if(t===7&&i===8)return 0;if(t===8)return 150;let r=0;return t!==i&&(r+=10,t===0&&i===1&&(r+=1)),r+=zY(t),r+=zY(i),r}translateOffset(e,t="right"){const i=iw(this.firstElementOffsetByLineIdx,s=>s<=e),r=e-this.firstElementOffsetByLineIdx[i];return new de(this.range.startLineNumber+i,1+this.lineStartOffsets[i]+r+(r===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[i]))}translateRange(e){const t=this.translateOffset(e.start,"right"),i=this.translateOffset(e.endExclusive,"left");return i.isBefore(t)?te.fromPositions(i,i):te.fromPositions(t,i)}findWordContaining(e){if(e<0||e>=this.elements.length||!JR(this.elements[e]))return;let t=e;for(;t>0&&JR(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&JR(this.elements[i]);)i++;return new Ht(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=A1(this.firstElementOffsetByLineIdx,r=>r<=e.start)??0,i=Oqe(this.firstElementOffsetByLineIdx,r=>e.endExclusive<=r)??this.elements.length;return new Ht(t,i)}}function JR(n){return n>=97&&n<=122||n>=65&&n<=90||n>=48&&n<=57}const Qqe={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function zY(n){return Qqe[n]}function WY(n){return n===10?8:n===13?7:C8(n)?6:n>=97&&n<=122?0:n>=65&&n<=90?1:n>=48&&n<=57?2:n===-1?3:n===44||n===59?5:4}function Jqe(n,e,t,i,r,s){let{moves:o,excludedChanges:a}=tGe(n,e,t,s);if(!s.isValid())return[];const l=n.filter(u=>!a.has(u)),c=nGe(l,i,r,e,t,s);return RP(o,c),o=iGe(o),o=o.filter(u=>{const d=u.original.toOffsetRange().slice(e).map(f=>f.trim());return d.join(`
`).length>=15&&eGe(d,f=>f.length>=2)>=2}),o=rGe(n,o),o}function eGe(n,e){let t=0;for(const i of n)e(i)&&t++;return t}function tGe(n,e,t,i){const r=[],s=n.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new YL(l.original,e,l)),o=new Set(n.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new YL(l.modified,t,l))),a=new Set;for(const l of s){let c=-1,u;for(const d of o){const h=l.computeSimilarity(d);h>c&&(c=h,u=d)}if(c>.9&&u&&(o.delete(u),r.push(new ds(l.range,u.range)),a.add(l.source),a.add(u.source)),!i.isValid())return{moves:r,excludedChanges:a}}return{moves:r,excludedChanges:a}}function nGe(n,e,t,i,r,s){const o=[],a=new nhe;for(const h of n)for(let f=h.original.startLineNumber;f<h.original.endLineNumberExclusive-2;f++){const g=`${e[f-1]}:${e[f+1-1]}:${e[f+2-1]}`;a.add(g,{range:new It(f,f+3)})}const l=[];n.sort(fl(h=>h.modified.startLineNumber,df));for(const h of n){let f=[];for(let g=h.modified.startLineNumber;g<h.modified.endLineNumberExclusive-2;g++){const p=`${t[g-1]}:${t[g+1-1]}:${t[g+2-1]}`,v=new It(g,g+3),b=[];a.forEach(p,({range:_})=>{for(const C of f)if(C.originalLineRange.endLineNumberExclusive+1===_.endLineNumberExclusive&&C.modifiedLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive){C.originalLineRange=new It(C.originalLineRange.startLineNumber,_.endLineNumberExclusive),C.modifiedLineRange=new It(C.modifiedLineRange.startLineNumber,v.endLineNumberExclusive),b.push(C);return}const y={modifiedLineRange:v,originalLineRange:_};l.push(y),b.push(y)}),f=b}if(!s.isValid())return[]}l.sort(aWe(fl(h=>h.modifiedLineRange.length,df)));const c=new Sa,u=new Sa;for(const h of l){const f=h.modifiedLineRange.startLineNumber-h.originalLineRange.startLineNumber,g=c.subtractFrom(h.modifiedLineRange),p=u.subtractFrom(h.originalLineRange).getWithDelta(f),v=g.getIntersection(p);for(const b of v.ranges){if(b.length<3)continue;const _=b,y=b.delta(-f);o.push(new ds(y,_)),c.addRange(_),u.addRange(y)}}o.sort(fl(h=>h.original.startLineNumber,df));const d=new GL(n);for(let h=0;h<o.length;h++){const f=o[h],g=d.findLastMonotonous(x=>x.original.startLineNumber<=f.original.startLineNumber),p=A1(n,x=>x.modified.startLineNumber<=f.modified.startLineNumber),v=Math.max(f.original.startLineNumber-g.original.startLineNumber,f.modified.startLineNumber-p.modified.startLineNumber),b=d.findLastMonotonous(x=>x.original.startLineNumber<f.original.endLineNumberExclusive),_=A1(n,x=>x.modified.startLineNumber<f.modified.endLineNumberExclusive),y=Math.max(b.original.endLineNumberExclusive-f.original.endLineNumberExclusive,_.modified.endLineNumberExclusive-f.modified.endLineNumberExclusive);let C;for(C=0;C<v;C++){const x=f.original.startLineNumber-C-1,k=f.modified.startLineNumber-C-1;if(x>i.length||k>r.length||c.contains(k)||u.contains(x)||!$Y(i[x-1],r[k-1],s))break}C>0&&(u.addRange(new It(f.original.startLineNumber-C,f.original.startLineNumber)),c.addRange(new It(f.modified.startLineNumber-C,f.modified.startLineNumber)));let w;for(w=0;w<y;w++){const x=f.original.endLineNumberExclusive+w,k=f.modified.endLineNumberExclusive+w;if(x>i.length||k>r.length||c.contains(k)||u.contains(x)||!$Y(i[x-1],r[k-1],s))break}w>0&&(u.addRange(new It(f.original.endLineNumberExclusive,f.original.endLineNumberExclusive+w)),c.addRange(new It(f.modified.endLineNumberExclusive,f.modified.endLineNumberExclusive+w))),(C>0||w>0)&&(o[h]=new ds(new It(f.original.startLineNumber-C,f.original.endLineNumberExclusive+w),new It(f.modified.startLineNumber-C,f.modified.endLineNumberExclusive+w)))}return o}function $Y(n,e,t){if(n.trim()===e.trim())return!0;if(n.length>300&&e.length>300)return!1;const r=new ahe().compute(new ZL([n],new te(1,1,1,n.length),!1),new ZL([e],new te(1,1,1,e.length),!1),t);let s=0;const o=Ji.invert(r.diffs,n.length);for(const u of o)u.seq1Range.forEach(d=>{C8(n.charCodeAt(d))||s++});function a(u){let d=0;for(let h=0;h<n.length;h++)C8(u.charCodeAt(h))||d++;return d}const l=a(n.length>e.length?n:e);return s/l>.6&&l>10}function iGe(n){if(n.length===0)return n;n.sort(fl(t=>t.original.startLineNumber,df));const e=[n[0]];for(let t=1;t<n.length;t++){const i=e[e.length-1],r=n[t],s=r.original.startLineNumber-i.original.endLineNumberExclusive,o=r.modified.startLineNumber-i.modified.endLineNumberExclusive;if(s>=0&&o>=0&&s+o<=2){e[e.length-1]=i.join(r);continue}e.push(r)}return e}function rGe(n,e){const t=new GL(n);return e=e.filter(i=>{const r=t.findLastMonotonous(a=>a.original.startLineNumber<i.original.endLineNumberExclusive)||new ds(new It(1,1),new It(1,1)),s=A1(n,a=>a.modified.startLineNumber<i.modified.endLineNumberExclusive);return r!==s}),e}function y8(n,e,t){let i=t;return i=UY(n,e,i),i=UY(n,e,i),i=sGe(n,e,i),i}function UY(n,e,t){if(t.length===0)return t;const i=[];i.push(t[0]);for(let s=1;s<t.length;s++){const o=i[i.length-1];let a=t[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-o.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(n.getElement(a.seq1Range.start-c)!==n.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){i[i.length-1]=new Ji(new Ht(o.seq1Range.start,a.seq1Range.endExclusive-l),new Ht(o.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}i.push(a)}const r=[];for(let s=0;s<i.length-1;s++){const o=i[s+1];let a=i[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=o.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!n.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){i[s+1]=new Ji(new Ht(a.seq1Range.start+l,o.seq1Range.endExclusive),new Ht(a.seq2Range.start+l,o.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}r.push(a)}return i.length>0&&r.push(i[i.length-1]),r}function sGe(n,e,t){if(!n.getBoundaryScore||!e.getBoundaryScore)return t;for(let i=0;i<t.length;i++){const r=i>0?t[i-1]:void 0,s=t[i],o=i+1<t.length?t[i+1]:void 0,a=new Ht(r?r.seq1Range.endExclusive+1:0,o?o.seq1Range.start-1:n.length),l=new Ht(r?r.seq2Range.endExclusive+1:0,o?o.seq2Range.start-1:e.length);s.seq1Range.isEmpty?t[i]=jY(s,n,e,a,l):s.seq2Range.isEmpty&&(t[i]=jY(s.swap(),e,n,l,a).swap())}return t}function jY(n,e,t,i,r){let o=1;for(;n.seq1Range.start-o>=i.start&&n.seq2Range.start-o>=r.start&&t.isStronglyEqual(n.seq2Range.start-o,n.seq2Range.endExclusive-o)&&o<100;)o++;o--;let a=0;for(;n.seq1Range.start+a<i.endExclusive&&n.seq2Range.endExclusive+a<r.endExclusive&&t.isStronglyEqual(n.seq2Range.start+a,n.seq2Range.endExclusive+a)&&a<100;)a++;if(o===0&&a===0)return n;let l=0,c=-1;for(let u=-o;u<=a;u++){const d=n.seq2Range.start+u,h=n.seq2Range.endExclusive+u,f=n.seq1Range.start+u,g=e.getBoundaryScore(f)+t.getBoundaryScore(d)+t.getBoundaryScore(h);g>c&&(c=g,l=u)}return n.delta(l)}function oGe(n,e,t){const i=[];for(const r of t){const s=i[i.length-1];if(!s){i.push(r);continue}r.seq1Range.start-s.seq1Range.endExclusive<=2||r.seq2Range.start-s.seq2Range.endExclusive<=2?i[i.length-1]=new Ji(s.seq1Range.join(r.seq1Range),s.seq2Range.join(r.seq2Range)):i.push(r)}return i}function aGe(n,e,t){const i=Ji.invert(t,n.length),r=[];let s=new md(0,0);function o(l,c){if(l.offset1<s.offset1||l.offset2<s.offset2)return;const u=n.findWordContaining(l.offset1),d=e.findWordContaining(l.offset2);if(!u||!d)return;let h=new Ji(u,d);const f=h.intersect(c);let g=f.seq1Range.length,p=f.seq2Range.length;for(;i.length>0;){const v=i[0];if(!(v.seq1Range.intersects(h.seq1Range)||v.seq2Range.intersects(h.seq2Range)))break;const _=n.findWordContaining(v.seq1Range.start),y=e.findWordContaining(v.seq2Range.start),C=new Ji(_,y),w=C.intersect(v);if(g+=w.seq1Range.length,p+=w.seq2Range.length,h=h.join(C),h.seq1Range.endExclusive>=v.seq1Range.endExclusive)i.shift();else break}g+p<(h.seq1Range.length+h.seq2Range.length)*2/3&&r.push(h),s=h.getEndExclusives()}for(;i.length>0;){const l=i.shift();l.seq1Range.isEmpty||(o(l.getStarts(),l),o(l.getEndExclusives().delta(-1),l))}return lGe(t,r)}function lGe(n,e){const t=[];for(;n.length>0||e.length>0;){const i=n[0],r=e[0];let s;i&&(!r||i.seq1Range.start<r.seq1Range.start)?s=n.shift():s=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=s.seq1Range.start?t[t.length-1]=t[t.length-1].join(s):t.push(s)}return t}function cGe(n,e,t){let i=t;if(i.length===0)return i;let r=0,s;do{s=!1;const o=[i[0]];for(let a=1;a<i.length;a++){let u=function(h,f){const g=new Ht(c.seq1Range.endExclusive,l.seq1Range.start);return n.getText(g).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||f.seq1Range.length+f.seq2Range.length>5)};const l=i[a],c=o[o.length-1];u(c,l)?(s=!0,o[o.length-1]=o[o.length-1].join(l)):o.push(l)}i=o}while(r++<10&&s);return i}function uGe(n,e,t){let i=t;if(i.length===0)return i;let r=0,s;do{s=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let d=function(f,g){const p=new Ht(u.seq1Range.endExclusive,c.seq1Range.start);if(n.countLinesIn(p)>5||p.length>500)return!1;const b=n.getText(p).trim();if(b.length>20||b.split(/\r\n|\r|\n/).length>1)return!1;const _=n.countLinesIn(f.seq1Range),y=f.seq1Range.length,C=e.countLinesIn(f.seq2Range),w=f.seq2Range.length,x=n.countLinesIn(g.seq1Range),k=g.seq1Range.length,E=e.countLinesIn(g.seq2Range),L=g.seq2Range.length,M=2*40+50;function D(O){return Math.min(O,M)}return Math.pow(Math.pow(D(_*40+y),1.5)+Math.pow(D(C*40+w),1.5),1.5)+Math.pow(Math.pow(D(x*40+k),1.5)+Math.pow(D(E*40+L),1.5),1.5)>(M**1.5)**1.5*1.3};const c=i[l],u=a[a.length-1];d(u,c)?(s=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(r++<10&&s);const o=[];return nWe(i,(a,l,c)=>{let u=l;function d(b){return b.length>0&&b.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const h=n.extendToFullLines(l.seq1Range),f=n.getText(new Ht(h.start,l.seq1Range.start));d(f)&&(u=u.deltaStart(-f.length));const g=n.getText(new Ht(l.seq1Range.endExclusive,h.endExclusive));d(g)&&(u=u.deltaEnd(g.length));const p=Ji.fromOffsetPairs(a?a.getEndExclusives():md.zero,c?c.getStarts():md.max),v=u.intersect(p);o.length>0&&v.getStarts().equals(o[o.length-1].getEndExclusives())?o[o.length-1]=o[o.length-1].join(v):o.push(v)}),o}class KY{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:qY(this.lines[e-1]),i=e===this.lines.length?0:qY(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function qY(n){let e=0;for(;e<n.length&&(n.charCodeAt(e)===32||n.charCodeAt(e)===9);)e++;return e}class lhe{constructor(){this.dynamicProgrammingDiffing=new Yqe,this.myersDiffingAlgorithm=new ahe}computeDiff(e,t,i){if(e.length<=1&&rr(e,t,(w,x)=>w===x))return new CE([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new CE([new ua(new It(1,e.length+1),new It(1,t.length+1),[new Go(new te(1,1,e.length,e[e.length-1].length+1),new te(1,1,t.length,t[t.length-1].length+1))])],[],!1);const r=i.maxComputationTimeMs===0?rw.instance:new Gqe(i.maxComputationTimeMs),s=!i.ignoreTrimWhitespace,o=new Map;function a(w){let x=o.get(w);return x===void 0&&(x=o.size,o.set(w,x)),x}const l=e.map(w=>a(w.trim())),c=t.map(w=>a(w.trim())),u=new KY(l,e),d=new KY(c,t),h=u.length+d.length<1700?this.dynamicProgrammingDiffing.compute(u,d,r,(w,x)=>e[w]===t[x]?t[x].length===0?.1:1+Math.log(1+t[x].length):.99):this.myersDiffingAlgorithm.compute(u,d,r);let f=h.diffs,g=h.hitTimeout;f=y8(u,d,f),f=cGe(u,d,f);const p=[],v=w=>{if(s)for(let x=0;x<w;x++){const k=b+x,E=_+x;if(e[k]!==t[E]){const L=this.refineDiff(e,t,new Ji(new Ht(k,k+1),new Ht(E,E+1)),r,s);for(const M of L.mappings)p.push(M);L.hitTimeout&&(g=!0)}}};let b=0,_=0;for(const w of f){em(()=>w.seq1Range.start-b===w.seq2Range.start-_);const x=w.seq1Range.start-b;v(x),b=w.seq1Range.endExclusive,_=w.seq2Range.endExclusive;const k=this.refineDiff(e,t,w,r,s);k.hitTimeout&&(g=!0);for(const E of k.mappings)p.push(E)}v(e.length-b);const y=GY(p,e,t);let C=[];return i.computeMoves&&(C=this.computeMoves(y,e,t,l,c,r,s)),em(()=>{function w(k,E){if(k.lineNumber<1||k.lineNumber>E.length)return!1;const L=E[k.lineNumber-1];return!(k.column<1||k.column>L.length+1)}function x(k,E){return!(k.startLineNumber<1||k.startLineNumber>E.length+1||k.endLineNumberExclusive<1||k.endLineNumberExclusive>E.length+1)}for(const k of y){if(!k.innerChanges)return!1;for(const E of k.innerChanges)if(!(w(E.modifiedRange.getStartPosition(),t)&&w(E.modifiedRange.getEndPosition(),t)&&w(E.originalRange.getStartPosition(),e)&&w(E.originalRange.getEndPosition(),e)))return!1;if(!x(k.modified,t)||!x(k.original,e))return!1}return!0}),new CE(y,C,g)}computeMoves(e,t,i,r,s,o,a){return Jqe(e,t,i,r,s,o).map(u=>{const d=this.refineDiff(t,i,new Ji(u.original.toOffsetRange(),u.modified.toOffsetRange()),o,a),h=GY(d.mappings,t,i,!0);return new ihe(u,h)})}refineDiff(e,t,i,r,s){const a=hGe(i).toRangeMapping2(e,t),l=new ZL(e,a.originalRange,s),c=new ZL(t,a.modifiedRange,s),u=l.length+c.length<500?this.dynamicProgrammingDiffing.compute(l,c,r):this.myersDiffingAlgorithm.compute(l,c,r);let d=u.diffs;return d=y8(l,c,d),d=aGe(l,c,d),d=oGe(l,c,d),d=uGe(l,c,d),{mappings:d.map(f=>new Go(l.translateRange(f.seq1Range),c.translateRange(f.seq2Range))),hitTimeout:u.hitTimeout}}}function GY(n,e,t,i=!1){const r=[];for(const s of iH(n.map(o=>dGe(o,e,t)),(o,a)=>o.original.overlapOrTouch(a.original)||o.modified.overlapOrTouch(a.modified))){const o=s[0],a=s[s.length-1];r.push(new ua(o.original.join(a.original),o.modified.join(a.modified),s.map(l=>l.innerChanges[0])))}return em(()=>!i&&r.length>0&&(r[0].modified.startLineNumber!==r[0].original.startLineNumber||t.length-r[r.length-1].modified.endLineNumberExclusive!==e.length-r[r.length-1].original.endLineNumberExclusive)?!1:HH(r,(s,o)=>o.original.startLineNumber-s.original.endLineNumberExclusive===o.modified.startLineNumber-s.modified.endLineNumberExclusive&&s.original.endLineNumberExclusive<o.original.startLineNumber&&s.modified.endLineNumberExclusive<o.modified.startLineNumber)),r}function dGe(n,e,t){let i=0,r=0;n.modifiedRange.endColumn===1&&n.originalRange.endColumn===1&&n.originalRange.startLineNumber+i<=n.originalRange.endLineNumber&&n.modifiedRange.startLineNumber+i<=n.modifiedRange.endLineNumber&&(r=-1),n.modifiedRange.startColumn-1>=t[n.modifiedRange.startLineNumber-1].length&&n.originalRange.startColumn-1>=e[n.originalRange.startLineNumber-1].length&&n.originalRange.startLineNumber<=n.originalRange.endLineNumber+r&&n.modifiedRange.startLineNumber<=n.modifiedRange.endLineNumber+r&&(i=1);const s=new It(n.originalRange.startLineNumber+i,n.originalRange.endLineNumber+1+r),o=new It(n.modifiedRange.startLineNumber+i,n.modifiedRange.endLineNumber+1+r);return new ua(s,o,[n])}function hGe(n){return new ds(new It(n.seq1Range.start+1,n.seq1Range.endExclusive+1),new It(n.seq2Range.start+1,n.seq2Range.endExclusive+1))}const YY={getLegacy:()=>new Uqe,getDefault:()=>new lhe};function pf(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}class _n{constructor(e,t,i,r=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=pf(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class tl{constructor(e,t,i,r){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=pf(Math.max(Math.min(1,t),0),3),this.l=pf(Math.max(Math.min(1,i),0),3),this.a=pf(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,r=e.b/255,s=e.a,o=Math.max(t,i,r),a=Math.min(t,i,r);let l=0,c=0;const u=(a+o)/2,d=o-a;if(d>0){switch(c=Math.min(u<=.5?d/(2*u):d/(2-2*u),1),o){case t:l=(i-r)/d+(i<r?6:0);break;case i:l=(r-t)/d+2;break;case r:l=(t-i)/d+4;break}l*=60,l=Math.round(l)}return new tl(l,c,u,s)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:r,a:s}=e;let o,a,l;if(i===0)o=a=l=r;else{const c=r<.5?r*(1+i):r+i-r*i,u=2*r-c;o=tl._hue2rgb(u,c,t+1/3),a=tl._hue2rgb(u,c,t),l=tl._hue2rgb(u,c,t-1/3)}return new _n(Math.round(o*255),Math.round(a*255),Math.round(l*255),s)}}class Hv{constructor(e,t,i,r){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=pf(Math.max(Math.min(1,t),0),3),this.v=pf(Math.max(Math.min(1,i),0),3),this.a=pf(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,r=e.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=s-o,l=s===0?0:a/s;let c;return a===0?c=0:s===t?c=((i-r)/a%6+6)%6:s===i?c=(r-t)/a+2:c=(t-i)/a+4,new Hv(Math.round(c*60),l,s,e.a)}static toRGBA(e){const{h:t,s:i,v:r,a:s}=e,o=r*i,a=o*(1-Math.abs(t/60%2-1)),l=r-o;let[c,u,d]=[0,0,0];return t<60?(c=o,u=a):t<120?(c=a,u=o):t<180?(u=o,d=a):t<240?(u=a,d=o):t<300?(c=a,d=o):t<=360&&(c=o,d=a),c=Math.round((c+l)*255),u=Math.round((u+l)*255),d=Math.round((d+l)*255),new _n(c,u,d,s)}}const vi=class vi{static fromHex(e){return vi.Format.CSS.parseHex(e)||vi.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:tl.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Hv.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof _n)this.rgba=e;else if(e instanceof tl)this._hsla=e,this.rgba=tl.toRGBA(e);else if(e instanceof Hv)this._hsva=e,this.rgba=Hv.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&_n.equals(this.rgba,e.rgba)&&tl.equals(this.hsla,e.hsla)&&Hv.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=vi._relativeLuminanceForComponent(this.rgba.r),t=vi._relativeLuminanceForComponent(this.rgba.g),i=vi._relativeLuminanceForComponent(this.rgba.b),r=.2126*e+.7152*t+.0722*i;return pf(r,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new vi(new tl(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new vi(new tl(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:r,a:s}=this.rgba;return new vi(new _n(t,i,r,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new vi(new _n(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:r,a:s}=this.rgba;return new vi(new _n(e.rgba.r-s*(e.rgba.r-t),e.rgba.g-s*(e.rgba.g-i),e.rgba.b-s*(e.rgba.b-r),1))}toString(){return this._toString||(this._toString=vi.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const r=e.getRelativeLuminance(),s=t.getRelativeLuminance();return i=i*(s-r)/s,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const r=e.getRelativeLuminance(),s=t.getRelativeLuminance();return i=i*(r-s)/r,e.darken(i)}};vi.white=new vi(new _n(255,255,255,1)),vi.black=new vi(new _n(0,0,0,1)),vi.red=new vi(new _n(255,0,0,1)),vi.blue=new vi(new _n(0,0,255,1)),vi.green=new vi(new _n(0,255,0,1)),vi.cyan=new vi(new _n(0,255,255,1)),vi.lightgrey=new vi(new _n(211,211,211,1)),vi.transparent=new vi(new _n(0,0,0,0));let De=vi;(function(n){(function(e){(function(t){function i(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:n.Format.CSS.formatRGBA(f)}t.formatRGB=i;function r(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=r;function s(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:n.Format.CSS.formatHSLA(f)}t.formatHSL=s;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?n.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function u(f){return f.isOpaque()?n.Format.CSS.formatHex(f):n.Format.CSS.formatRGBA(f)}t.format=u;function d(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const p=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),v=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),b=16*h(f.charCodeAt(5))+h(f.charCodeAt(6));return new n(new _n(p,v,b,1))}if(g===9){const p=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),v=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),b=16*h(f.charCodeAt(5))+h(f.charCodeAt(6)),_=16*h(f.charCodeAt(7))+h(f.charCodeAt(8));return new n(new _n(p,v,b,_/255))}if(g===4){const p=h(f.charCodeAt(1)),v=h(f.charCodeAt(2)),b=h(f.charCodeAt(3));return new n(new _n(16*p+p,16*v+v,16*b+b))}if(g===5){const p=h(f.charCodeAt(1)),v=h(f.charCodeAt(2)),b=h(f.charCodeAt(3)),_=h(f.charCodeAt(4));return new n(new _n(16*p+p,16*v+v,16*b+b,(16*_+_)/255))}return null}t.parseHex=d;function h(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(n.Format||(n.Format={}))})(De||(De={}));function che(n){const e=[];for(const t of n){const i=Number(t);(i||i===0&&t.replace(/\s/g,"")!=="")&&e.push(i)}return e}function KH(n,e,t,i){return{red:n/255,blue:t/255,green:e/255,alpha:i}}function r_(n,e){const t=e.index,i=e[0].length;if(!t)return;const r=n.positionAt(t);return{startLineNumber:r.lineNumber,startColumn:r.column,endLineNumber:r.lineNumber,endColumn:r.column+i}}function fGe(n,e){if(!n)return;const t=De.Format.CSS.parseHex(e);if(t)return{range:n,color:KH(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function ZY(n,e,t){if(!n||e.length!==1)return;const r=e[0].values(),s=che(r);return{range:n,color:KH(s[0],s[1],s[2],t?s[3]:1)}}function XY(n,e,t){if(!n||e.length!==1)return;const r=e[0].values(),s=che(r),o=new De(new tl(s[0],s[1]/100,s[2]/100,t?s[3]:1));return{range:n,color:KH(o.rgba.r,o.rgba.g,o.rgba.b,o.rgba.a)}}function s_(n,e){return typeof n=="string"?[...n.matchAll(e)]:n.findMatches(e)}function gGe(n){const e=[],i=s_(n,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const r of i){const s=r.filter(c=>c!==void 0),o=s[1],a=s[2];if(!a)continue;let l;if(o==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=ZY(r_(n,r),s_(a,c),!1)}else if(o==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=ZY(r_(n,r),s_(a,c),!0)}else if(o==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=XY(r_(n,r),s_(a,c),!1)}else if(o==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=XY(r_(n,r),s_(a,c),!0)}else o==="#"&&(l=fGe(r_(n,r),o+a));l&&e.push(l)}return e}function pGe(n){return!n||typeof n.getValue!="function"||typeof n.positionAt!="function"?[]:gGe(n)}const QY=new RegExp("\\bMARK:\\s*(.*)$","d"),mGe=/^-+|-+$/g;function vGe(n,e){var i;let t=[];if(e.findRegionSectionHeaders&&((i=e.foldingRules)!=null&&i.markers)){const r=bGe(n,e);t=t.concat(r)}if(e.findMarkSectionHeaders){const r=_Ge(n);t=t.concat(r)}return t}function bGe(n,e){const t=[],i=n.getLineCount();for(let r=1;r<=i;r++){const s=n.getLineContent(r),o=s.match(e.foldingRules.markers.start);if(o){const a={startLineNumber:r,startColumn:o[0].length+1,endLineNumber:r,endColumn:s.length+1};if(a.endColumn>a.startColumn){const l={range:a,...uhe(s.substring(o[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function _Ge(n){const e=[],t=n.getLineCount();for(let i=1;i<=t;i++){const r=n.getLineContent(i);CGe(r,i,e)}return e}function CGe(n,e,t){QY.lastIndex=0;const i=QY.exec(n);if(i){const r=i.indices[1][0]+1,s=i.indices[1][1]+1,o={startLineNumber:e,startColumn:r,endLineNumber:e,endColumn:s};if(o.endColumn>o.startColumn){const a={range:o,...uhe(i[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function uhe(n){n=n.trim();const e=n.startsWith("-");return n=n.replace(mGe,""),{text:n,hasSeparatorLine:e}}class yGe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=qm(e);const i=this.values,r=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(i.length+s),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=qm(e),t=qm(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=qm(e),t=qm(t);const i=this.values,r=this.prefixSum;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=qm(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,r=0,s=0,o=0;for(;t<=i;)if(r=t+(i-t)/2|0,s=this.prefixSum[r],o=s-this.values[r],e<o)i=r-1;else if(e>=s)t=r+1;else break;return new dhe(r,e-o)}}class wGe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new dhe(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=ND(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],r=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=r+i;for(let s=0;s<i;s++)this._indexBySum[r+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class dhe{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class SGe{constructor(e,t,i,r){this._uri=e,this._lines=t,this._eol=i,this._versionId=r,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new de(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let r=0;r<t;r++)i[r]=this._lines[r].length+e;this._lineStarts=new yGe(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=mb(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const r=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this._lines.splice(e.lineNumber+s-1,0,i[s]),r[s-1]=i[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,r)}}const JY=60*1e3;class xGe extends ke{constructor(e,t,i=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const r=new EH;r.cancelAndSet(()=>this._checkStopModelSync(),Math.round(JY/2)),this._register(r)}}dispose(){for(const e in this._syncedModels)zr(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const i of e){const r=i.toString();this._syncedModels[r]||this._beginModelSync(i,t),this._syncedModels[r]&&(this._syncedModelsLastUsedTime[r]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>JY&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const r=e.toString();this._proxy.$acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const s=new dt;s.add(i.onDidChangeContent(o=>{this._proxy.$acceptModelChanged(r.toString(),o)})),s.add(i.onWillDispose(()=>{this._stopModelSync(r)})),s.add(Pt(()=>{this._proxy.$acceptRemovedModel(r)})),this._syncedModels[r]=s}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],zr(t)}}class kGe{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new EGe(Ut.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class EGe extends SGe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const r=this._lines[i],s=this.offsetAt(new de(i+1,1)),o=r.matchAll(e);for(const a of o)(a.index||a.index===0)&&(a.index=a.index+s),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=Ky(e.column,uH(t),this._lines[e.lineNumber-1],0);return i?new te(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let r=0,s="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=s.substring(a[o].start,a[o].end);o+=1,yield l}else if(r<t.length)s=t[r],a=i(s,e),o=0,r+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],r=this._wordenize(i,t),s=[];for(const o of r)s.push({word:i.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return s}_wordenize(e,t){const i=[];let r;for(t.lastIndex=0;(r=t.exec(e))&&r[0].length!==0;)i.push({start:r.index,end:r.index+r[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,r=e.endLineNumber-1,s=[];s.push(this._lines[i].substring(e.startColumn-1));for(let o=i+1;o<r;o++)s.push(this._lines[o]);return s.push(this._lines[r].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!de.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,r=!1;if(t<1)t=1,i=1,r=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,r=!0;else{const s=this._lines[t-1].length+1;i<1?(i=1,r=!0):i>s&&(i=s,r=!0)}return r?{lineNumber:t,column:i}:e}}const LT=class LT{constructor(){this._workerTextModelSyncServer=new kGe}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,i){const r=this._getModel(e);return r?Mqe.computeUnicodeHighlights(r,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const i=this._getModel(e);return i?vGe(i,t):[]}async $computeDiff(e,t,i,r){const s=this._getModel(e),o=this._getModel(t);return!s||!o?null:yE.computeDiff(s,o,i,r)}static computeDiff(e,t,i,r){const s=r==="advanced"?YY.getDefault():YY.getLegacy(),o=e.getLinesContent(),a=t.getLinesContent(),l=s.computeDiff(o,a,i),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function u(d){return d.map(h=>{var f;return[h.original.startLineNumber,h.original.endLineNumberExclusive,h.modified.startLineNumber,h.modified.endLineNumberExclusive,(f=h.innerChanges)==null?void 0:f.map(g=>[g.originalRange.startLineNumber,g.originalRange.startColumn,g.originalRange.endLineNumber,g.originalRange.endColumn,g.modifiedRange.startLineNumber,g.modifiedRange.startColumn,g.modifiedRange.endLineNumber,g.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:u(l.changes),moves:l.moves.map(d=>[d.lineRangeMapping.original.startLineNumber,d.lineRangeMapping.original.endLineNumberExclusive,d.lineRangeMapping.modified.startLineNumber,d.lineRangeMapping.modified.endLineNumberExclusive,u(d.changes)])}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),r=t.getLineCount();if(i!==r)return!1;for(let s=1;s<=i;s++){const o=e.getLineContent(s),a=t.getLineContent(s);if(o!==a)return!1}return!0}async $computeMoreMinimalEdits(e,t,i){const r=this._getModel(e);if(!r)return t;const s=[];let o;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return te.compareRangesUsingStarts(l.range,c.range);const u=l.range?0:1,d=c.range?0:1;return u-d});let a=0;for(let l=1;l<t.length;l++)te.getEndPosition(t[a].range).equals(te.getStartPosition(t[l].range))?(t[a].range=te.fromPositions(te.getStartPosition(t[a].range),te.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:u}of t){if(typeof u=="number"&&(o=u),te.isEmpty(l)&&!c)continue;const d=r.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,r.eol),d===c)continue;if(Math.max(c.length,d.length)>yE._diffLimit){s.push({range:l,text:c});continue}const h=hqe(d,c,i),f=r.offsetAt(te.lift(l).getStartPosition());for(const g of h){const p=r.positionAt(f+g.originalStart),v=r.positionAt(f+g.originalStart+g.originalLength),b={text:c.substr(g.modifiedStart,g.modifiedLength),range:{startLineNumber:p.lineNumber,startColumn:p.column,endLineNumber:v.lineNumber,endColumn:v.column}};r.getValueInRange(b.range)!==b.text&&s.push(b)}}return typeof o=="number"&&s.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s}async $computeLinks(e){const t=this._getModel(e);return t?vqe(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?pGe(t):null}async $textualSuggest(e,t,i,r){const s=new pm,o=new RegExp(i,r),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const u of c.words(o))if(!(u===t||!isNaN(Number(u)))&&(a.add(u),a.size>yE._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}}async $computeWordRanges(e,t,i,r){const s=this._getModel(e);if(!s)return Object.create(null);const o=new RegExp(i,r),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=s.getLineWords(l,o);for(const u of c){if(!isNaN(Number(u.word)))continue;let d=a[u.word];d||(d=[],a[u.word]=d),d.push({startLineNumber:l,startColumn:u.startColumn,endLineNumber:l,endColumn:u.endColumn})}}return a}async $navigateValueSet(e,t,i,r,s){const o=this._getModel(e);if(!o)return null;const a=new RegExp(r,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const u=o.getValueInRange(c);return p8.INSTANCE.navigateValueSet(t,l,c,u,i)}};LT._diffLimit=1e5,LT._suggestionsLimit=1e4;let w8=LT;class yE extends w8{constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(e,t,i){const o={host:fWe(i,(a,l)=>this._host.$fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(OP(this._foreignModule))):new Promise((a,l)=>{const c=u=>{this._foreignModule=u.create(o,t),a(OP(this._foreignModule))};{const u=RD.asBrowserUri(`${e}.js`).toString(!0);dce(()=>import(`${u}`),[],import.meta.url).then(c).catch(l)}})}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}typeof importScripts=="function"&&(globalThis.monaco=ede());const qH=cn("textResourceConfigurationService"),hhe=cn("textResourcePropertiesService"),Yn=cn("ILanguageFeaturesService");var GH=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},wg=function(n,e){return function(t,i){e(t,i,n)}};const eZ=5*60*1e3;function Sg(n,e){const t=n.getModel(e);return!(!t||t.isTooLargeForSyncing())}let S8=class extends ke{constructor(e,t,i,r,s,o){super(),this._languageConfigurationService=s,this._modelService=t,this._workerManager=this._register(new x8(e,this._modelService)),this._logService=r,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!Sg(this._modelService,a.uri))return Promise.resolve({links:[]});const u=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return u&&{links:u}}})),this._register(o.completionProvider.register("*",new LGe(this._workerManager,i,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return Sg(this._modelService,e)}async computedUnicodeHighlights(e,t,i){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,i)}async computeDiff(e,t,i,r){const o=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),i,r);if(!o)return null;return{identical:o.identical,quitEarly:o.quitEarly,changes:l(o.changes),moves:o.moves.map(c=>new ihe(new ds(new It(c[0],c[1]),new It(c[2],c[3])),l(c[4])))};function l(c){return c.map(u=>{var d;return new ua(new It(u[0],u[1]),new It(u[2],u[3]),(d=u[4])==null?void 0:d.map(h=>new Go(new te(h[0],h[1],h[2],h[3]),new te(h[4],h[5],h[6],h[7]))))})}}async computeMoreMinimalEdits(e,t,i=!1){if(LD(t)){if(!Sg(this._modelService,e))return Promise.resolve(t);const r=pm.create(),s=this._workerWithResources([e]).then(o=>o.$computeMoreMinimalEdits(e.toString(),t,i));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),r.elapsed())),Promise.race([s,Qy(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Sg(this._modelService,e)}async navigateValueSet(e,t,i){const r=this._modelService.getModel(e);if(!r)return null;const s=this._languageConfigurationService.getLanguageConfiguration(r.getLanguageId()).getWordDefinition(),o=s.source,a=s.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,i,o,a)}canComputeWordRanges(e){return Sg(this._modelService,e)}async computeWordRanges(e,t){const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const r=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),s=r.source,o=r.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,s,o)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};S8=GH([wg(1,$s),wg(2,qH),wg(3,kc),wg(4,Eu),wg(5,Yn)],S8);class LGe{constructor(e,t,i,r){this.languageConfigurationService=r,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if(i.wordBasedSuggestions==="off")return;const r=[];if(i.wordBasedSuggestions==="currentDocument")Sg(this._modelService,e.uri)&&r.push(e.uri);else for(const d of this._modelService.getModels())Sg(this._modelService,d.uri)&&(d===e?r.unshift(d.uri):(i.wordBasedSuggestions==="allDocuments"||d.getLanguageId()===e.getLanguageId())&&r.push(d.uri));if(r.length===0)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),a=o?new te(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):te.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),u=await(await this._workerManager.withWorker()).textualSuggest(r,o==null?void 0:o.word,s);if(u)return{duration:u.duration,suggestions:u.words.map(d=>({kind:18,label:d,insertText:d,range:{insert:l,replace:a}}))}}}let x8=class extends ke{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new TH).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(eZ/2),zn),this._register(this._modelService.onModelRemoved(r=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>eZ&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new XL(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};x8=GH([wg(1,$s)],x8);class NGe{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let XL=class extends ke{constructor(e,t,i){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=i,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(TKe(this._workerDescriptor)),m8.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){c8(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return c8(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new NGe(new yE(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new xGe(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(y$e());const i=await this._getProxy();return this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i}async textualSuggest(e,t,i){const r=await this.workerWithSyncedResources(e),s=i.source,o=i.flags;return r.$textualSuggest(e.map(a=>a.toString()),t,s,o)}dispose(){super.dispose(),this._disposed=!0}};XL=GH([wg(2,$s)],XL);var Ia;(function(n){n.DARK="dark",n.LIGHT="light",n.HIGH_CONTRAST_DARK="hcDark",n.HIGH_CONTRAST_LIGHT="hcLight"})(Ia||(Ia={}));function A0(n){return n===Ia.HIGH_CONTRAST_DARK||n===Ia.HIGH_CONTRAST_LIGHT}function ZD(n){return n===Ia.DARK||n===Ia.HIGH_CONTRAST_DARK}const Nl=cn("themeService");function Zm(n){return{id:n}}function k8(n){switch(n){case Ia.DARK:return"vs-dark";case Ia.HIGH_CONTRAST_DARK:return"hc-black";case Ia.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const fhe={ThemingContribution:"base.contributions.theming"};class TGe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new ae}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Pt(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const ghe=new TGe;Lr.add(fhe.ThemingContribution,ghe);function Yd(n){return ghe.onColorThemeChange(n)}class IGe extends ke{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var DGe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},MGe=function(n,e){return function(t,i){e(t,i,n)}};let E8=class extends ke{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new ae),this._onCodeEditorAdd=this._register(new ae),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new ae),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new ae),this._onDiffEditorAdd=this._register(new ae),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new ae),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new Eo,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const r=e.toString();let s;this._modelProperties.has(r)?s=this._modelProperties.get(r):(s=new Map,this._modelProperties.set(r,s)),s.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(const r of this._codeEditorOpenHandlers){const s=await r(e,t,i);if(s!==null)return s}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return Pt(t)}};E8=DGe([MGe(0,Nl)],E8);var RGe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},tZ=function(n,e){return function(t,i){e(t,i,n)}};let QL=class extends E8{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(i,r,s)=>r?this.doOpenEditor(r,i):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===Wt.http||s===Wt.https)return Rde(t.resource.toString()),e}return null}const r=t.options?t.options.selection:null;if(r)if(typeof r.endLineNumber=="number"&&typeof r.endColumn=="number")e.setSelection(r),e.revealRangeInCenter(r,1);else{const s={lineNumber:r.startLineNumber,column:r.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};QL=RGe([tZ(0,In),tZ(1,Nl)],QL);yn(or,QL,0);const jf=cn("layoutService");var phe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},mhe=function(n,e){return function(t,i){e(t,i,n)}};let JL=class{get mainContainer(){var e;return((e=sH(this._codeEditorService.listCodeEditors()))==null?void 0:e.getContainerDomNode())??zn.document.body}get activeContainer(){const e=this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor();return(e==null?void 0:e.getContainerDomNode())??this.mainContainer}get mainContainerDimension(){return t8(this.mainContainer)}get activeContainerDimension(){return t8(this.activeContainer)}get containers(){return rH(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())==null||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=Be.None,this.onDidLayoutActiveContainer=Be.None,this.onDidLayoutContainer=Be.None,this.onDidChangeActiveContainer=Be.None,this.onDidAddContainer=Be.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};JL=phe([mhe(0,or)],JL);let L8=class extends JL{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};L8=phe([mhe(1,or)],L8);yn(jf,JL,1);var sw;(function(n){n[n.Ignore=0]="Ignore",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error"})(sw||(sw={}));(function(n){const e="error",t="warning",i="warn",r="info",s="ignore";function o(l){return l?Ov(e,l)?n.Error:Ov(t,l)||Ov(i,l)?n.Warning:Ov(r,l)?n.Info:n.Ignore:n.Ignore}n.fromValue=o;function a(l){switch(l){case n.Error:return e;case n.Warning:return t;case n.Info:return r;default:return s}}n.toString=a})(sw||(sw={}));const Ki=sw,vhe=cn("dialogService");var AGe=Ki;const Ec=cn("notificationService");class OGe{}const YH=cn("undoRedoService");class bhe{constructor(e,t){this.resource=e,this.elements=t}}const o0=class o0{constructor(){this.id=o0._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};o0._ID=0,o0.None=new o0;let N8=o0;const a0=class a0{constructor(){this.id=a0._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};a0._ID=0,a0.None=new a0;let xg=a0;var PGe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},nZ=function(n,e){return function(t,i){e(t,i,n)}};function Qx(n){return n.scheme===Wt.file?n.fsPath:n.path}let _he=0;class Jx{constructor(e,t,i,r,s,o,a){this.id=++_he,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=r,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class iZ{constructor(e,t){this.resourceLabel=e,this.reason=t}}class rZ{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,r]of this.elements)(r.reason===0?e:t).push(r.resourceLabel);const i=[];return e.length>0&&i.push(S({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(S({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class FGe{constructor(e,t,i,r,s,o,a){this.id=++_he,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=r,this.groupOrder=s,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new rZ),this.removedResources.has(t)||this.removedResources.set(t,new iZ(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new rZ),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new iZ(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Che{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,r=this._past.length;i<r;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new bhe(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,r=0,s=-1;for(let a=0,l=this._past.length;a<l;a++,r++){const c=this._past[a];i&&(r>=t||c.id!==e.elements[r])&&(i=!1,s=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,r++){const l=this._future[a];i&&(r>=t||l.id!==e.elements[r])&&(i=!1,o=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class eA{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const yhe=new Che("","");yhe.locked=!0;let T8=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=N8.None,i=xg.None){if(e.type===0){const r=Qx(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new Jx(e,r,s,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const r=new Set,s=[],o=[];for(const a of e.resources){const l=Qx(a),c=this.getUriComparisonKey(a);r.has(c)||(r.add(c),s.push(l),o.push(c))}s.length===1?this._pushElement(new Jx(e,s[0],o[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new FGe(e,s,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const r=e.resourceLabels[t],s=e.strResources[t];let o;this._editStacks.has(s)?o=this._editStacks.get(s):(o=new Che(r,s),this._editStacks.set(s,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const r=i.getClosestPastElement();return r?r.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),r=new Map;for(const s of i){const o=Qx(s.resource),a=this.getUriComparisonKey(s.resource),l=new Jx(s,o,a,0,0,0,0);r.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,r)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),r=new Map;for(const s of i){const o=Qx(s.resource),a=this.getUriComparisonKey(s.resource),l=new Jx(s,o,a,0,0,0,0);r.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,r)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const r=this.getUriComparisonKey(e);this._editStacks.has(r)&&this._editStacks.get(r).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new bhe(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[r,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,i=r)}return[t,i]}canUndo(e){if(e instanceof xg){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){$n(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,r,s){const o=this._acquireLocks(i);let a;try{a=t()}catch(l){return o(),r.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),r.dispose(),s()),l=>(o(),r.dispose(),this._onError(l,e))):(o(),r.dispose(),s())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return ke.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?ke.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(ke.None);const i=e.actual.prepareUndoRedo();return i?Vue(i)?t(i):i.then(r=>t(r)):t(ke.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||yhe);return new eA(t)}_tryToSplitAndUndo(e,t,i,r){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(r),new ek(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(r),new ek}_checkWorkspaceUndo(e,t,i,r){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,S({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,S({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,S({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,S({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,S({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const r=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,r,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,r,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const r=t.getSecondClosestPastElement();if(r&&r.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,r){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(u){u[u.All=0]="All",u[u.This=1]="This",u[u.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:Ki.Info,message:S("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:S({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>a.All},{label:S({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,i,!1);if(c)return c.returnValue;r=!0}let s;try{s=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,i,!0);if(o)return s.dispose(),o.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,s,()=>this._continueUndoInGroup(t.groupId,r))}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const r=S({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(r);return}return this._invokeResourcePrepare(t,r=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new eA([e]),r,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[r,s]of this._editStacks){const o=s.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,i=r)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof xg){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const r=this._editStacks.get(e),s=r.getClosestPastElement();if(!s)return;if(s.groupId){const[a,l]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&l)return this._undo(l,t,i)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,i):this._resourceUndo(r,s,i)}finally{}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:S("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:S({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:S("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[r,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,i=r)}return[t,i]}canRedo(e){if(e instanceof xg){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,r){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(r),new ek(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(r),new ek}_checkWorkspaceRedo(e,t,i,r){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,S({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,S({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,S({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,S({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,S({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),r=this._checkWorkspaceRedo(e,t,i,!1);return r?r.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let r;try{r=await this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const s=this._checkWorkspaceRedo(e,t,i,!0);if(s)return r.dispose(),s.returnValue;for(const o of i.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,r,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=S({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new eA([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[r,s]of this._editStacks){const o=s.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,i=r)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof xg){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[r,s]=this._findClosestRedoElementInGroup(i.groupId);if(i!==r&&s)return this._redo(s)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};T8=PGe([nZ(0,vhe),nZ(1,Ec)],T8);class ek{constructor(e){this.returnValue=e}}yn(YH,T8,1);function Qs(n,e,t){return Math.min(Math.max(n,e),t)}class whe{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class BGe{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const She=cn("environmentService");var HGe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},sZ=function(n,e){return function(t,i){e(t,i,n)}};const VGe=cn("ILanguageFeatureDebounceService");var eN;(function(n){const e=new WeakMap;let t=0;function i(r){let s=e.get(r);return s===void 0&&(s=++t,e.set(r,s)),s}n.of=i})(eN||(eN={}));class zGe{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class WGe{constructor(e,t,i,r,s,o){this._logService=e,this._name=t,this._registry=i,this._default=r,this._min=s,this._max=o,this._cache=new bS(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>AD(eN.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?Qs(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let r=this._cache.get(i);r||(r=new BGe(6),this._cache.set(i,r));const s=Qs(r.update(t),this._min,this._max);return LH(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${s}ms`),s}_overall(){const e=new whe;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return Qs(e,this._min,this._max)}}let I8=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){const r=(i==null?void 0:i.min)??50,s=(i==null?void 0:i.max)??r**2,o=(i==null?void 0:i.key)??void 0,a=`${eN.of(e)},${r}${o?","+o:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new zGe(r*1.5)):l=new WGe(this._logService,t,e,this._overallAverage()|0||r*1.5,r,s),this._data.set(a,l)),l}_overallAverage(){const e=new whe;for(const t of this._data.values())e.update(t.default());return e.value}};I8=HGe([sZ(0,kc),sZ(1,She)],I8);yn(VGe,I8,1);class Yl{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const r=this.getFontStyle(e);return r&1&&(i+=" mtki"),r&2&&(i+=" mtkb"),r&4&&(i+=" mtku"),r&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),r=this.getFontStyle(e);let s=`color: ${t[i]};`;r&1&&(s+="font-style: italic;"),r&2&&(s+="font-weight: bold;");let o="";return r&4&&(o+=" underline"),r&8&&(o+=" line-through"),o&&(s+=`text-decoration:${o};`),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&1),bold:!!(i&2),underline:!!(i&4),strikethrough:!!(i&8)}}}function O1(n){let e=0,t=0,i=0,r=0;for(let s=0,o=n.length;s<o;s++){const a=n.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<o&&n.charCodeAt(s+1)===10?(r|=2,s++):r|=3,i=s+1):a===10&&(r|=1,e===0&&(t=s),e++,i=s+1)}return e===0&&(t=n.length),[e,t,n.length-i,r]}var $Ge=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},tA=function(n,e){return function(t,i){e(t,i,n)}};let D8=class{constructor(e,t,i,r){this._legend=e,this._themeService=t,this._languageService=i,this._logService=r,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new M8}getMetadata(e,t,i){const r=this._languageService.languageIdCodec.encodeLanguageId(i),s=this._hashTable.get(e,t,r);let o;if(s)o=s.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let d=0;c>0&&d<this._legend.tokenModifiers.length;d++)c&1&&l.push(this._legend.tokenModifiers[d]),c=c>>1;const u=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof u>"u")o=2147483647;else{if(o=0,typeof u.italic<"u"){const d=(u.italic?1:0)<<11;o|=d|1}if(typeof u.bold<"u"){const d=(u.bold?2:0)<<11;o|=d|2}if(typeof u.underline<"u"){const d=(u.underline?4:0)<<11;o|=d|4}if(typeof u.strikethrough<"u"){const d=(u.strikethrough?8:0)<<11;o|=d|8}if(u.foreground){const d=u.foreground<<15;o|=d|16}o===0&&(o=2147483647)}}else o=2147483647,a="not-in-legend";this._hashTable.add(e,t,r,o)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,r,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${r} is outside the previous data (length ${s}).`))}};D8=$Ge([tA(1,Nl),tA(2,br),tA(3,kc)],D8);class UGe{constructor(e,t,i,r){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=r,this.next=null}}const Xu=class Xu{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Xu._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Xu._SIZES.length?2/3*this._currentLength:0),this._elements=[],Xu._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const r=this._hashFunc(e,t,i);let s=this._elements[r];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===i)return s;s=s.next}return null}add(e,t,i,r){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=Xu._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Xu._SIZES.length?2/3*this._currentLength:0),this._elements=[],Xu._nullOutEntries(this._elements,this._currentLength);for(const o of s){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new UGe(e,t,i,r))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};Xu._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];let M8=Xu;const jGe=cn("semanticTokensStylingService");var KGe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},nA=function(n,e){return function(t,i){e(t,i,n)}};let R8=class extends ke{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new D8(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};R8=KGe([nA(0,Nl),nA(1,kc),nA(2,br)],R8);yn(jGe,R8,1);function ah(n){return n===47||n===92}function xhe(n){return n.replace(/[\\/]/g,Ai.sep)}function qGe(n){return n.indexOf("/")===-1&&(n=xhe(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}function oZ(n,e=Ai.sep){if(!n)return"";const t=n.length,i=n.charCodeAt(0);if(ah(i)){if(ah(n.charCodeAt(1))&&!ah(n.charCodeAt(2))){let s=3;const o=s;for(;s<t&&!ah(n.charCodeAt(s));s++);if(o!==s&&!ah(n.charCodeAt(s+1))){for(s+=1;s<t;s++)if(ah(n.charCodeAt(s)))return n.slice(0,s+1).replace(/[\\/]/g,e)}}return e}else if(GGe(i)&&n.charCodeAt(1)===58)return ah(n.charCodeAt(2))?n.slice(0,2)+e:n.slice(0,2);let r=n.indexOf("://");if(r!==-1){for(r+=3;r<t;r++)if(ah(n.charCodeAt(r)))return n.slice(0,r+1)}return""}function A8(n,e,t,i=gf){if(n===e)return!0;if(!n||!e||e.length>n.length)return!1;if(t){if(!_H(n,e))return!1;if(e.length===n.length)return!0;let s=e.length;return e.charAt(e.length-1)===i&&s--,n.charAt(s)===i}return e.charAt(e.length-1)!==i&&(e+=i),n.indexOf(e)===0}function GGe(n){return n>=65&&n<=90||n>=97&&n<=122}const tk="**",aZ="/",wE="[/\\\\]",SE="[^/\\\\]",YGe=/\//g;function lZ(n,e){switch(n){case 0:return"";case 1:return`${SE}*?`;default:return`(?:${wE}|${SE}+${wE}${e?`|${wE}${SE}+`:""})*?`}}function cZ(n,e){if(!n)return[];const t=[];let i=!1,r=!1,s="";for(const o of n){switch(o){case e:if(!i&&!r){t.push(s),s="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":r=!0;break;case"]":r=!1;break}s+=o}return s&&t.push(s),t}function khe(n){if(!n)return"";let e="";const t=cZ(n,aZ);if(t.every(i=>i===tk))e=".*";else{let i=!1;t.forEach((r,s)=>{if(r===tk){if(i)return;e+=lZ(2,s===t.length-1)}else{let o=!1,a="",l=!1,c="";for(const u of r){if(u!=="}"&&o){a+=u;continue}if(l&&(u!=="]"||!c)){let d;u==="-"?d=u:(u==="^"||u==="!")&&!c?d="^":u===aZ?d="":d=zd(u),c+=d;continue}switch(u){case"{":o=!0;continue;case"[":l=!0;continue;case"}":{const h=`(?:${cZ(a,",").map(f=>khe(f)).join("|")})`;e+=h,o=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=SE;continue;case"*":e+=lZ(1);continue;default:e+=zd(u)}}s<t.length-1&&(t[s+1]!==tk||s+2<t.length)&&(e+=wE)}i=r===tk})}return e}const ZGe=/^\*\*\/\*\.[\w\.-]+$/,XGe=/^\*\*\/([\w\.-]+)\/?$/,QGe=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,JGe=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,eYe=/^\*\*((\/[\w\.-]+)+)\/?$/,tYe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,uZ=new bS(1e4),dZ=function(){return!1},hu=function(){return null};function ZH(n,e){if(!n)return hu;let t;typeof n!="string"?t=n.pattern:t=n,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let r=uZ.get(i);if(r)return hZ(r,n);let s;return ZGe.test(t)?r=nYe(t.substr(4),t):(s=XGe.exec(iA(t,e)))?r=iYe(s[1],t):(e.trimForExclusions?JGe:QGe).test(t)?r=rYe(t,e):(s=eYe.exec(iA(t,e)))?r=fZ(s[1].substr(1),t,!0):(s=tYe.exec(iA(t,e)))?r=fZ(s[1],t,!1):r=sYe(t),uZ.set(i,r),hZ(r,n)}function hZ(n,e){if(typeof e=="string")return n;const t=function(i,r){return A8(i,e.base,!co)?n(MD(i.substr(e.base.length),gf),r):null};return t.allBasenames=n.allBasenames,t.allPaths=n.allPaths,t.basenames=n.basenames,t.patterns=n.patterns,t}function iA(n,e){return e.trimForExclusions&&n.endsWith("/**")?n.substr(0,n.length-2):n}function nYe(n,e){return function(t,i){return typeof t=="string"&&t.endsWith(n)?e:null}}function iYe(n,e){const t=`/${n}`,i=`\\${n}`,r=function(o,a){return typeof o!="string"?null:a?a===n?e:null:o===n||o.endsWith(t)||o.endsWith(i)?e:null},s=[n];return r.basenames=s,r.patterns=[e],r.allBasenames=s,r}function rYe(n,e){const t=Lhe(n.slice(1,-1).split(",").map(a=>ZH(a,e)).filter(a=>a!==hu),n),i=t.length;if(!i)return hu;if(i===1)return t[0];const r=function(a,l){for(let c=0,u=t.length;c<u;c++)if(t[c](a,l))return n;return null},s=t.find(a=>!!a.allBasenames);s&&(r.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(r.allPaths=o),r}function fZ(n,e,t){const i=gf===Ai.sep,r=i?n:n.replace(YGe,gf),s=gf+r,o=Ai.sep+n;let a;return t?a=function(l,c){return typeof l=="string"&&(l===r||l.endsWith(s)||!i&&(l===n||l.endsWith(o)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===r||!i&&l===n)?e:null},a.allPaths=[(t?"*/":"./")+n],a}function sYe(n){try{const e=new RegExp(`^${khe(n)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?n:null}}catch{return hu}}function oYe(n,e,t){return!n||typeof e!="string"?!1:Ehe(n)(e,void 0,t)}function Ehe(n,e={}){if(!n)return dZ;if(typeof n=="string"||aYe(n)){const t=ZH(n,e);if(t===hu)return dZ;const i=function(r,s){return!!t(r,s)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return lYe(n,e)}function aYe(n){const e=n;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function lYe(n,e){const t=Lhe(Object.getOwnPropertyNames(n).map(a=>cYe(a,n[a],e)).filter(a=>a!==hu)),i=t.length;if(!i)return hu;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(u,d){let h;for(let f=0,g=t.length;f<g;f++){const p=t[f](u,d);if(typeof p=="string")return p;q5(p)&&(h||(h=[]),h.push(p))}return h?(async()=>{for(const f of h){const g=await f;if(typeof g=="string")return g}return null})():null},l=t.find(u=>!!u.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((u,d)=>d.allPaths?u.concat(d.allPaths):u,[]);return c.length&&(a.allPaths=c),a}const r=function(a,l,c){let u,d;for(let h=0,f=t.length;h<f;h++){const g=t[h];g.requiresSiblings&&c&&(l||(l=Gue(a)),u||(u=l.substr(0,l.length-G$e(a).length)));const p=g(a,l,u,c);if(typeof p=="string")return p;q5(p)&&(d||(d=[]),d.push(p))}return d?(async()=>{for(const h of d){const f=await h;if(typeof f=="string")return f}return null})():null},s=t.find(a=>!!a.allBasenames);s&&(r.allBasenames=s.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(r.allPaths=o),r}function cYe(n,e,t){if(e===!1)return hu;const i=ZH(n,t);if(i===hu)return hu;if(typeof e=="boolean")return i;if(e){const r=e.when;if(typeof r=="string"){const s=(o,a,l,c)=>{if(!c||!i(o,a))return null;const u=r.replace("$(basename)",()=>l),d=c(u);return q5(d)?d.then(h=>h?n:null):d?n:null};return s.requiresSiblings=!0,s}}return i}function Lhe(n,e){const t=n.filter(a=>!!a.basenames);if(t.length<2)return n;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let r;if(e){r=[];for(let a=0,l=i.length;a<l;a++)r.push(e)}else r=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const s=function(a,l){if(typeof a!="string")return null;if(!l){let u;for(u=a.length;u>0;u--){const d=a.charCodeAt(u-1);if(d===47||d===92)break}l=a.substr(u)}const c=i.indexOf(l);return c!==-1?r[c]:null};s.basenames=i,s.patterns=r,s.allBasenames=i;const o=n.filter(a=>!a.basenames);return o.push(s),o}function Nhe(n,e,t,i,r,s){if(Array.isArray(n)){let o=0;for(const a of n){const l=Nhe(a,e,t,i,r,s);if(l===10)return l;l>o&&(o=l)}return o}else{if(typeof n=="string")return i?n==="*"?5:n===t?10:0:0;if(n){const{language:o,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:u}=n;if(!i&&!c)return 0;u&&r&&(e=r);let d=0;if(l)if(l===e.scheme)d=10;else if(l==="*")d=5;else return 0;if(o)if(o===t)d=10;else if(o==="*")d=Math.max(d,5);else return 0;if(u)if(u===s)d=10;else if(u==="*"&&s!==void 0)d=Math.max(d,5);else return 0;if(a){let h;if(typeof a=="string"?h=a:h={...a,base:que(a.base)},h===e.fsPath||oYe(h,e.fsPath))d=10;else return 0}return d}else return 0}}function The(n){return typeof n=="string"?!1:Array.isArray(n)?n.every(The):!!n.exclusive}class gZ{constructor(e,t,i,r,s){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=r,this.recursive=s}equals(e){var t,i;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)==null?void 0:t.toString())===((i=e.notebookUri)==null?void 0:i.toString())&&this.recursive===e.recursive}}class ci{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new ae,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Pt(()=>{if(i){const r=this._entries.indexOf(i);r>=0&&(this._entries.splice(r,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e,t=!1){const i=[];return this._orderedForEach(e,t,r=>i.push(r.provider)),i}orderedGroups(e){const t=[];let i,r;return this._orderedForEach(e,!1,s=>{i&&r===s._score?i.push(s.provider):(r=s._score,i=[s.provider],t.push(i))}),t}_orderedForEach(e,t,i){this._updateScores(e,t);for(const r of this._entries)r._score>0&&i(r)}_updateScores(e,t){var s,o;const i=(s=this._notebookInfoResolver)==null?void 0:s.call(this,e.uri),r=i?new gZ(e.uri,e.getLanguageId(),i.uri,i.type,t):new gZ(e.uri,e.getLanguageId(),void 0,void 0,t);if(!((o=this._lastCandidate)!=null&&o.equals(r))){this._lastCandidate=r;for(const a of this._entries)if(a._score=Nhe(a.selector,r.uri,r.languageId,Lqe(e),r.notebookUri,r.notebookType),The(a.selector)&&a._score>0)if(t)a._score=0;else{for(const l of this._entries)l._score=0;a._score=1e3;break}this._entries.sort(ci._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:N_(e.selector)&&!N_(t.selector)?1:!N_(e.selector)&&N_(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function N_(n){return typeof n=="string"?!1:Array.isArray(n)?n.some(N_):!!n.isBuiltin}class uYe{constructor(){this.referenceProvider=new ci(this._score.bind(this)),this.renameProvider=new ci(this._score.bind(this)),this.newSymbolNamesProvider=new ci(this._score.bind(this)),this.codeActionProvider=new ci(this._score.bind(this)),this.definitionProvider=new ci(this._score.bind(this)),this.typeDefinitionProvider=new ci(this._score.bind(this)),this.declarationProvider=new ci(this._score.bind(this)),this.implementationProvider=new ci(this._score.bind(this)),this.documentSymbolProvider=new ci(this._score.bind(this)),this.inlayHintsProvider=new ci(this._score.bind(this)),this.colorProvider=new ci(this._score.bind(this)),this.codeLensProvider=new ci(this._score.bind(this)),this.documentFormattingEditProvider=new ci(this._score.bind(this)),this.documentRangeFormattingEditProvider=new ci(this._score.bind(this)),this.onTypeFormattingEditProvider=new ci(this._score.bind(this)),this.signatureHelpProvider=new ci(this._score.bind(this)),this.hoverProvider=new ci(this._score.bind(this)),this.documentHighlightProvider=new ci(this._score.bind(this)),this.multiDocumentHighlightProvider=new ci(this._score.bind(this)),this.selectionRangeProvider=new ci(this._score.bind(this)),this.foldingRangeProvider=new ci(this._score.bind(this)),this.linkProvider=new ci(this._score.bind(this)),this.inlineCompletionsProvider=new ci(this._score.bind(this)),this.inlineEditProvider=new ci(this._score.bind(this)),this.completionProvider=new ci(this._score.bind(this)),this.linkedEditingRangeProvider=new ci(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new ci(this._score.bind(this)),this.documentSemanticTokensProvider=new ci(this._score.bind(this)),this.documentDropEditProvider=new ci(this._score.bind(this)),this.documentPasteEditProvider=new ci(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)==null?void 0:t.call(this,e)}}yn(Yn,uYe,1);function XH(n){return`--vscode-${n.replace(/\./g,"-")}`}function $e(n){return`var(${XH(n)})`}function dYe(n,e){return`var(${XH(n)}, ${e})`}function hYe(n){return n!==null&&typeof n=="object"&&"light"in n&&"dark"in n}const Ihe={ColorContribution:"base.contributions.colors"},fYe="default";class gYe{constructor(){this._onDidChangeSchema=new ae,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,r=!1,s){const o={id:e,description:i,defaults:t,needsTransparency:r,deprecationMessage:s};this.colorsById[e]=o;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),r&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=S("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:i,oneOf:[a,{type:"string",const:fYe,description:S("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i!=null&&i.defaults){const r=hYe(i.defaults)?i.defaults[t.type]:i.defaults;return Ol(r,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const r=t.indexOf(".")===-1?0:1,s=i.indexOf(".")===-1?0:1;return r!==s?r-s:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const XD=new gYe;Lr.add(Ihe.ColorContribution,XD);function Z(n,e,t,i,r){return XD.registerColor(n,e,t,i,r)}function pYe(n,e){var t,i,r,s;switch(n.op){case 0:return(t=Ol(n.value,e))==null?void 0:t.darken(n.factor);case 1:return(i=Ol(n.value,e))==null?void 0:i.lighten(n.factor);case 2:return(r=Ol(n.value,e))==null?void 0:r.transparent(n.factor);case 3:{const o=Ol(n.background,e);return o?(s=Ol(n.value,e))==null?void 0:s.makeOpaque(o):Ol(n.value,e)}case 4:for(const o of n.values){const a=Ol(o,e);if(a)return a}return;case 6:return Ol(e.defines(n.if)?n.then:n.else,e);case 5:{const o=Ol(n.value,e);if(!o)return;const a=Ol(n.background,e);return a?o.isDarkerThan(a)?De.getLighterColor(o,a,n.factor).transparent(n.transparency):De.getDarkerColor(o,a,n.factor).transparent(n.transparency):o.transparent(n.factor*n.transparency)}default:throw BH()}}function km(n,e){return{op:0,value:n,factor:e}}function ac(n,e){return{op:1,value:n,factor:e}}function Yt(n,e){return{op:2,value:n,factor:e}}function pZ(...n){return{op:4,values:n}}function mYe(n,e,t){return{op:6,if:n,then:e,else:t}}function mZ(n,e,t,i){return{op:5,value:n,background:e,factor:t,transparency:i}}function Ol(n,e){if(n!==null){if(typeof n=="string")return n[0]==="#"?De.fromHex(n):e.getColor(n);if(n instanceof De)return n;if(typeof n=="object")return pYe(n,e)}}const Dhe="vscode://schemas/workbench-colors",Mhe=Lr.as(YD.JSONContribution);Mhe.registerSchema(Dhe,XD.getColorSchema());const vZ=new bs(()=>Mhe.notifySchemaChanged(Dhe),200);XD.onDidChangeSchema(()=>{vZ.isScheduled()||vZ.schedule()});const Wn=Z("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},S("foreground","Overall foreground color. This color is only used if not overridden by a component."));Z("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},S("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));Z("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},S("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));Z("descriptionForeground",{light:"#717171",dark:Yt(Wn,.7),hcDark:Yt(Wn,.7),hcLight:Yt(Wn,.7)},S("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const O8=Z("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},S("iconForeground","The default color for icons in the workbench.")),_u=Z("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},S("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),kn=Z("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},S("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Fi=Z("contrastActiveBorder",{light:null,dark:null,hcDark:_u,hcLight:_u},S("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));Z("selection.background",null,S("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const vYe=Z("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},S("textLinkForeground","Foreground color for links in text."));Z("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},S("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));Z("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:De.black,hcLight:"#292929"},S("textSeparatorForeground","Color for text separators."));Z("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},S("textPreformatForeground","Foreground color for preformatted text segments."));Z("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},S("textPreformatBackground","Background color for preformatted text segments."));Z("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},S("textBlockQuoteBackground","Background color for block quotes in text."));Z("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:De.white,hcLight:"#292929"},S("textBlockQuoteBorder","Border color for block quotes in text."));Z("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:De.black,hcLight:"#F2F2F2"},S("textCodeBlockBackground","Background color for code blocks in text."));Z("sash.hoverBorder",_u,S("sashActiveBorder","Border color of active sashes."));const xE=Z("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:De.black,hcLight:"#0F4A85"},S("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),bYe=Z("badge.foreground",{dark:De.white,light:"#333",hcDark:De.white,hcLight:De.white},S("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),QH=Z("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},S("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Rhe=Z("scrollbarSlider.background",{dark:De.fromHex("#797979").transparent(.4),light:De.fromHex("#646464").transparent(.4),hcDark:Yt(kn,.6),hcLight:Yt(kn,.4)},S("scrollbarSliderBackground","Scrollbar slider background color.")),Ahe=Z("scrollbarSlider.hoverBackground",{dark:De.fromHex("#646464").transparent(.7),light:De.fromHex("#646464").transparent(.7),hcDark:Yt(kn,.8),hcLight:Yt(kn,.8)},S("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Ohe=Z("scrollbarSlider.activeBackground",{dark:De.fromHex("#BFBFBF").transparent(.4),light:De.fromHex("#000000").transparent(.6),hcDark:kn,hcLight:kn},S("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),_Ye=Z("progressBar.background",{dark:De.fromHex("#0E70C0"),light:De.fromHex("#0E70C0"),hcDark:kn,hcLight:kn},S("progressBarBackground","Background color of the progress bar that can show for long running operations.")),mc=Z("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:De.black,hcLight:De.white},S("editorBackground","Editor background color.")),_S=Z("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:De.white,hcLight:Wn},S("editorForeground","Editor default foreground color."));Z("editorStickyScroll.background",mc,S("editorStickyScrollBackground","Background color of sticky scroll in the editor"));Z("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:De.fromHex("#0F4A85").transparent(.1)},S("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));Z("editorStickyScroll.border",{dark:null,light:null,hcDark:kn,hcLight:kn},S("editorStickyScrollBorder","Border color of sticky scroll in the editor"));Z("editorStickyScroll.shadow",QH,S("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const ll=Z("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:De.white},S("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),QD=Z("editorWidget.foreground",Wn,S("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Phe=Z("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:kn,hcLight:kn},S("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));Z("editorWidget.resizeBorder",null,S("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));Z("editorError.background",null,S("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const JH=Z("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},S("editorError.foreground","Foreground color of error squigglies in the editor."));Z("editorError.border",{dark:null,light:null,hcDark:De.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},S("errorBorder","If set, color of double underlines for errors in the editor."));const CYe=Z("editorWarning.background",null,S("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),If=Z("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},S("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),tN=Z("editorWarning.border",{dark:null,light:null,hcDark:De.fromHex("#FFCC00").transparent(.8),hcLight:De.fromHex("#FFCC00").transparent(.8)},S("warningBorder","If set, color of double underlines for warnings in the editor."));Z("editorInfo.background",null,S("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const nm=Z("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},S("editorInfo.foreground","Foreground color of info squigglies in the editor.")),nN=Z("editorInfo.border",{dark:null,light:null,hcDark:De.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},S("infoBorder","If set, color of double underlines for infos in the editor.")),yYe=Z("editorHint.foreground",{dark:De.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},S("editorHint.foreground","Foreground color of hint squigglies in the editor."));Z("editorHint.border",{dark:null,light:null,hcDark:De.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},S("hintBorder","If set, color of double underlines for hints in the editor."));Z("editorLink.activeForeground",{dark:"#4E94CE",light:De.blue,hcDark:De.cyan,hcLight:"#292929"},S("activeLinkForeground","Color of active links."));const Vv=Z("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},S("editorSelectionBackground","Color of the editor selection.")),wYe=Z("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:De.white},S("editorSelectionForeground","Color of the selected text for high contrast.")),Fhe=Z("editor.inactiveSelectionBackground",{light:Yt(Vv,.5),dark:Yt(Vv,.5),hcDark:Yt(Vv,.7),hcLight:Yt(Vv,.5)},S("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Bhe=Z("editor.selectionHighlightBackground",{light:mZ(Vv,mc,.3,.6),dark:mZ(Vv,mc,.3,.6),hcDark:null,hcLight:null},S("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);Z("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Fi,hcLight:Fi},S("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));Z("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},S("editorFindMatch","Color of the current search match."));Z("editor.findMatchForeground",null,S("editorFindMatchForeground","Text color of the current search match."));const Kh=Z("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},S("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);Z("editor.findMatchHighlightForeground",null,S("findMatchHighlightForeground","Foreground color of the other search matches."),!0);Z("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},S("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);Z("editor.findMatchBorder",{light:null,dark:null,hcDark:Fi,hcLight:Fi},S("editorFindMatchBorder","Border color of the current search match."));const zv=Z("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Fi,hcLight:Fi},S("findMatchHighlightBorder","Border color of the other search matches."));Z("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Yt(Fi,.4),hcLight:Yt(Fi,.4)},S("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);Z("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},S("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const bZ=Z("editorHoverWidget.background",ll,S("hoverBackground","Background color of the editor hover."));Z("editorHoverWidget.foreground",QD,S("hoverForeground","Foreground color of the editor hover."));const SYe=Z("editorHoverWidget.border",Phe,S("hoverBorder","Border color of the editor hover."));Z("editorHoverWidget.statusBarBackground",{dark:ac(bZ,.2),light:km(bZ,.05),hcDark:ll,hcLight:ll},S("statusBarBackground","Background color of the editor hover status bar."));const Hhe=Z("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:De.white,hcLight:De.black},S("editorInlayHintForeground","Foreground color of inline hints")),Vhe=Z("editorInlayHint.background",{dark:Yt(xE,.1),light:Yt(xE,.1),hcDark:Yt(De.white,.1),hcLight:Yt(xE,.1)},S("editorInlayHintBackground","Background color of inline hints"));Z("editorInlayHint.typeForeground",Hhe,S("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));Z("editorInlayHint.typeBackground",Vhe,S("editorInlayHintBackgroundTypes","Background color of inline hints for types"));Z("editorInlayHint.parameterForeground",Hhe,S("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));Z("editorInlayHint.parameterBackground",Vhe,S("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const xYe=Z("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},S("editorLightBulbForeground","The color used for the lightbulb actions icon."));Z("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},S("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));Z("editorLightBulbAi.foreground",xYe,S("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));Z("editor.snippetTabstopHighlightBackground",{dark:new De(new _n(124,124,124,.3)),light:new De(new _n(10,50,100,.2)),hcDark:new De(new _n(124,124,124,.3)),hcLight:new De(new _n(10,50,100,.2))},S("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));Z("editor.snippetTabstopHighlightBorder",null,S("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));Z("editor.snippetFinalTabstopHighlightBackground",null,S("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));Z("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new De(new _n(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},S("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const P8=new De(new _n(155,185,85,.2)),F8=new De(new _n(255,0,0,.2)),kYe=Z("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},S("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),EYe=Z("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},S("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);Z("diffEditor.insertedLineBackground",{dark:P8,light:P8,hcDark:null,hcLight:null},S("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);Z("diffEditor.removedLineBackground",{dark:F8,light:F8,hcDark:null,hcLight:null},S("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);Z("diffEditorGutter.insertedLineBackground",null,S("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));Z("diffEditorGutter.removedLineBackground",null,S("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const LYe=Z("diffEditorOverview.insertedForeground",null,S("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),NYe=Z("diffEditorOverview.removedForeground",null,S("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));Z("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},S("diffEditorInsertedOutline","Outline color for the text that got inserted."));Z("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},S("diffEditorRemovedOutline","Outline color for text that got removed."));Z("diffEditor.border",{dark:null,light:null,hcDark:kn,hcLight:kn},S("diffEditorBorder","Border color between the two text editors."));Z("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},S("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));Z("diffEditor.unchangedRegionBackground","sideBar.background",S("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));Z("diffEditor.unchangedRegionForeground","foreground",S("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));Z("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},S("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const CS=Z("widget.shadow",{dark:Yt(De.black,.36),light:Yt(De.black,.16),hcDark:null,hcLight:null},S("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),TYe=Z("widget.border",{dark:null,light:null,hcDark:kn,hcLight:kn},S("widgetBorder","Border color of widgets such as find/replace inside the editor.")),_Z=Z("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},S("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));Z("toolbar.hoverOutline",{dark:null,light:null,hcDark:Fi,hcLight:Fi},S("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));Z("toolbar.activeBackground",{dark:ac(_Z,.1),light:km(_Z,.1),hcDark:null,hcLight:null},S("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const IYe=Z("breadcrumb.foreground",Yt(Wn,.8),S("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),DYe=Z("breadcrumb.background",mc,S("breadcrumbsBackground","Background color of breadcrumb items.")),CZ=Z("breadcrumb.focusForeground",{light:km(Wn,.2),dark:ac(Wn,.1),hcDark:ac(Wn,.1),hcLight:ac(Wn,.1)},S("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),MYe=Z("breadcrumb.activeSelectionForeground",{light:km(Wn,.2),dark:ac(Wn,.1),hcDark:ac(Wn,.1),hcLight:ac(Wn,.1)},S("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));Z("breadcrumbPicker.background",ll,S("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const zhe=.5,yZ=De.fromHex("#40C8AE").transparent(zhe),wZ=De.fromHex("#40A6FF").transparent(zhe),SZ=De.fromHex("#606060").transparent(.4),eV=.4,P1=1,B8=Z("merge.currentHeaderBackground",{dark:yZ,light:yZ,hcDark:null,hcLight:null},S("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Z("merge.currentContentBackground",Yt(B8,eV),S("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const H8=Z("merge.incomingHeaderBackground",{dark:wZ,light:wZ,hcDark:null,hcLight:null},S("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Z("merge.incomingContentBackground",Yt(H8,eV),S("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const V8=Z("merge.commonHeaderBackground",{dark:SZ,light:SZ,hcDark:null,hcLight:null},S("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Z("merge.commonContentBackground",Yt(V8,eV),S("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const F1=Z("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},S("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));Z("editorOverviewRuler.currentContentForeground",{dark:Yt(B8,P1),light:Yt(B8,P1),hcDark:F1,hcLight:F1},S("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));Z("editorOverviewRuler.incomingContentForeground",{dark:Yt(H8,P1),light:Yt(H8,P1),hcDark:F1,hcLight:F1},S("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));Z("editorOverviewRuler.commonContentForeground",{dark:Yt(V8,P1),light:Yt(V8,P1),hcDark:F1,hcLight:F1},S("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));Z("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},S("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0);Z("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",S("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const RYe=Z("problemsErrorIcon.foreground",JH,S("problemsErrorIconForeground","The color used for the problems error icon.")),AYe=Z("problemsWarningIcon.foreground",If,S("problemsWarningIconForeground","The color used for the problems warning icon.")),OYe=Z("problemsInfoIcon.foreground",nm,S("problemsInfoIconForeground","The color used for the problems info icon.")),PYe=Z("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},S("minimapFindMatchHighlight","Minimap marker color for find matches."),!0);Z("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},S("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0);const xZ=Z("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},S("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),FYe=Z("minimap.infoHighlight",{dark:nm,light:nm,hcDark:nN,hcLight:nN},S("minimapInfo","Minimap marker color for infos.")),BYe=Z("minimap.warningHighlight",{dark:If,light:If,hcDark:tN,hcLight:tN},S("overviewRuleWarning","Minimap marker color for warnings.")),HYe=Z("minimap.errorHighlight",{dark:new De(new _n(255,18,18,.7)),light:new De(new _n(255,18,18,.7)),hcDark:new De(new _n(255,50,50,1)),hcLight:"#B5200D"},S("minimapError","Minimap marker color for errors.")),VYe=Z("minimap.background",null,S("minimapBackground","Minimap background color.")),zYe=Z("minimap.foregroundOpacity",De.fromHex("#000f"),S("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));Z("minimapSlider.background",Yt(Rhe,.5),S("minimapSliderBackground","Minimap slider background color."));Z("minimapSlider.hoverBackground",Yt(Ahe,.5),S("minimapSliderHoverBackground","Minimap slider background color when hovering."));Z("minimapSlider.activeBackground",Yt(Ohe,.5),S("minimapSliderActiveBackground","Minimap slider background color when clicked on."));Z("charts.foreground",Wn,S("chartsForeground","The foreground color used in charts."));Z("charts.lines",Yt(Wn,.5),S("chartsLines","The color used for horizontal lines in charts."));Z("charts.red",JH,S("chartsRed","The red color used in chart visualizations."));Z("charts.blue",nm,S("chartsBlue","The blue color used in chart visualizations."));Z("charts.yellow",If,S("chartsYellow","The yellow color used in chart visualizations."));Z("charts.orange",PYe,S("chartsOrange","The orange color used in chart visualizations."));Z("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},S("chartsGreen","The green color used in chart visualizations."));Z("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},S("chartsPurple","The purple color used in chart visualizations."));const WYe=Z("input.background",{dark:"#3C3C3C",light:De.white,hcDark:De.black,hcLight:De.white},S("inputBoxBackground","Input box background.")),$Ye=Z("input.foreground",Wn,S("inputBoxForeground","Input box foreground.")),UYe=Z("input.border",{dark:null,light:null,hcDark:kn,hcLight:kn},S("inputBoxBorder","Input box border.")),Whe=Z("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:kn,hcLight:kn},S("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),jYe=Z("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},S("inputOption.hoverBackground","Background color of activated options in input fields.")),$he=Z("inputOption.activeBackground",{dark:Yt(_u,.4),light:Yt(_u,.2),hcDark:De.transparent,hcLight:De.transparent},S("inputOption.activeBackground","Background hover color of options in input fields.")),Uhe=Z("inputOption.activeForeground",{dark:De.white,light:De.black,hcDark:Wn,hcLight:Wn},S("inputOption.activeForeground","Foreground color of activated options in input fields."));Z("input.placeholderForeground",{light:Yt(Wn,.5),dark:Yt(Wn,.5),hcDark:Yt(Wn,.7),hcLight:Yt(Wn,.7)},S("inputPlaceholderForeground","Input box foreground color for placeholder text."));const KYe=Z("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:De.black,hcLight:De.white},S("inputValidationInfoBackground","Input validation background color for information severity.")),qYe=Z("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Wn},S("inputValidationInfoForeground","Input validation foreground color for information severity.")),GYe=Z("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:kn,hcLight:kn},S("inputValidationInfoBorder","Input validation border color for information severity.")),YYe=Z("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:De.black,hcLight:De.white},S("inputValidationWarningBackground","Input validation background color for warning severity.")),ZYe=Z("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Wn},S("inputValidationWarningForeground","Input validation foreground color for warning severity.")),XYe=Z("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:kn,hcLight:kn},S("inputValidationWarningBorder","Input validation border color for warning severity.")),QYe=Z("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:De.black,hcLight:De.white},S("inputValidationErrorBackground","Input validation background color for error severity.")),JYe=Z("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Wn},S("inputValidationErrorForeground","Input validation foreground color for error severity.")),eZe=Z("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:kn,hcLight:kn},S("inputValidationErrorBorder","Input validation border color for error severity.")),JD=Z("dropdown.background",{dark:"#3C3C3C",light:De.white,hcDark:De.black,hcLight:De.white},S("dropdownBackground","Dropdown background.")),tZe=Z("dropdown.listBackground",{dark:null,light:null,hcDark:De.black,hcLight:De.white},S("dropdownListBackground","Dropdown list background.")),tV=Z("dropdown.foreground",{dark:"#F0F0F0",light:Wn,hcDark:De.white,hcLight:Wn},S("dropdownForeground","Dropdown foreground.")),nV=Z("dropdown.border",{dark:JD,light:"#CECECE",hcDark:kn,hcLight:kn},S("dropdownBorder","Dropdown border.")),jhe=Z("button.foreground",De.white,S("buttonForeground","Button foreground color.")),nZe=Z("button.separator",Yt(jhe,.4),S("buttonSeparator","Button separator color.")),T_=Z("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},S("buttonBackground","Button background color.")),iZe=Z("button.hoverBackground",{dark:ac(T_,.2),light:km(T_,.2),hcDark:T_,hcLight:T_},S("buttonHoverBackground","Button background color when hovering.")),rZe=Z("button.border",kn,S("buttonBorder","Button border color.")),sZe=Z("button.secondaryForeground",{dark:De.white,light:De.white,hcDark:De.white,hcLight:Wn},S("buttonSecondaryForeground","Secondary button foreground color.")),z8=Z("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:De.white},S("buttonSecondaryBackground","Secondary button background color.")),oZe=Z("button.secondaryHoverBackground",{dark:ac(z8,.2),light:km(z8,.2),hcDark:null,hcLight:null},S("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),I_=Z("radio.activeForeground",Uhe,S("radioActiveForeground","Foreground color of active radio option.")),aZe=Z("radio.activeBackground",$he,S("radioBackground","Background color of active radio option.")),lZe=Z("radio.activeBorder",Whe,S("radioActiveBorder","Border color of the active radio option.")),cZe=Z("radio.inactiveForeground",null,S("radioInactiveForeground","Foreground color of inactive radio option.")),uZe=Z("radio.inactiveBackground",null,S("radioInactiveBackground","Background color of inactive radio option.")),dZe=Z("radio.inactiveBorder",{light:Yt(I_,.2),dark:Yt(I_,.2),hcDark:Yt(I_,.4),hcLight:Yt(I_,.2)},S("radioInactiveBorder","Border color of the inactive radio option.")),hZe=Z("radio.inactiveHoverBackground",jYe,S("radioHoverBackground","Background color of inactive active radio option when hovering.")),fZe=Z("checkbox.background",JD,S("checkbox.background","Background color of checkbox widget."));Z("checkbox.selectBackground",ll,S("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const gZe=Z("checkbox.foreground",tV,S("checkbox.foreground","Foreground color of checkbox widget.")),pZe=Z("checkbox.border",nV,S("checkbox.border","Border color of checkbox widget."));Z("checkbox.selectBorder",O8,S("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const mZe=Z("keybindingLabel.background",{dark:new De(new _n(128,128,128,.17)),light:new De(new _n(221,221,221,.4)),hcDark:De.transparent,hcLight:De.transparent},S("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),vZe=Z("keybindingLabel.foreground",{dark:De.fromHex("#CCCCCC"),light:De.fromHex("#555555"),hcDark:De.white,hcLight:Wn},S("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),bZe=Z("keybindingLabel.border",{dark:new De(new _n(51,51,51,.6)),light:new De(new _n(204,204,204,.4)),hcDark:new De(new _n(111,195,223)),hcLight:kn},S("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),_Ze=Z("keybindingLabel.bottomBorder",{dark:new De(new _n(68,68,68,.6)),light:new De(new _n(187,187,187,.4)),hcDark:new De(new _n(111,195,223)),hcLight:Wn},S("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),CZe=Z("list.focusBackground",null,S("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),yZe=Z("list.focusForeground",null,S("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),wZe=Z("list.focusOutline",{dark:_u,light:_u,hcDark:Fi,hcLight:Fi},S("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),SZe=Z("list.focusAndSelectionOutline",null,S("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),im=Z("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:De.fromHex("#0F4A85").transparent(.1)},S("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ow=Z("list.activeSelectionForeground",{dark:De.white,light:De.white,hcDark:null,hcLight:null},S("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Khe=Z("list.activeSelectionIconForeground",null,S("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),xZe=Z("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:De.fromHex("#0F4A85").transparent(.1)},S("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),kZe=Z("list.inactiveSelectionForeground",null,S("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),EZe=Z("list.inactiveSelectionIconForeground",null,S("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),LZe=Z("list.inactiveFocusBackground",null,S("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),NZe=Z("list.inactiveFocusOutline",null,S("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),qhe=Z("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:De.white.transparent(.1),hcLight:De.fromHex("#0F4A85").transparent(.1)},S("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Ghe=Z("list.hoverForeground",null,S("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),TZe=Z("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},S("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),IZe=Z("list.dropBetweenBackground",{dark:O8,light:O8,hcDark:null,hcLight:null},S("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),nk=Z("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:_u,hcLight:_u},S("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));Z("list.focusHighlightForeground",{dark:nk,light:mYe(im,nk,"#BBE7FF"),hcDark:nk,hcLight:nk},S("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));Z("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},S("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));Z("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},S("listErrorForeground","Foreground color of list items containing errors."));Z("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},S("listWarningForeground","Foreground color of list items containing warnings."));const DZe=Z("listFilterWidget.background",{light:km(ll,0),dark:ac(ll,0),hcDark:ll,hcLight:ll},S("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),MZe=Z("listFilterWidget.outline",{dark:De.transparent,light:De.transparent,hcDark:"#f38518",hcLight:"#007ACC"},S("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),RZe=Z("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:kn,hcLight:kn},S("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),AZe=Z("listFilterWidget.shadow",CS,S("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));Z("list.filterMatchBackground",{dark:Kh,light:Kh,hcDark:null,hcLight:null},S("listFilterMatchHighlight","Background color of the filtered match."));Z("list.filterMatchBorder",{dark:zv,light:zv,hcDark:kn,hcLight:Fi},S("listFilterMatchHighlightBorder","Border color of the filtered match."));Z("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},S("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const Yhe=Z("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},S("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),OZe=Z("tree.inactiveIndentGuidesStroke",Yt(Yhe,.4),S("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),PZe=Z("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},S("tableColumnsBorder","Table border color between columns.")),FZe=Z("tree.tableOddRowsBackground",{dark:Yt(Wn,.04),light:Yt(Wn,.04),hcDark:null,hcLight:null},S("tableOddRowsBackgroundColor","Background color for odd table rows."));Z("editorActionList.background",ll,S("editorActionListBackground","Action List background color."));Z("editorActionList.foreground",QD,S("editorActionListForeground","Action List foreground color."));Z("editorActionList.focusForeground",ow,S("editorActionListFocusForeground","Action List foreground color for the focused item."));Z("editorActionList.focusBackground",im,S("editorActionListFocusBackground","Action List background color for the focused item."));const BZe=Z("menu.border",{dark:null,light:null,hcDark:kn,hcLight:kn},S("menuBorder","Border color of menus.")),HZe=Z("menu.foreground",tV,S("menuForeground","Foreground color of menu items.")),VZe=Z("menu.background",JD,S("menuBackground","Background color of menu items.")),zZe=Z("menu.selectionForeground",ow,S("menuSelectionForeground","Foreground color of the selected menu item in menus.")),WZe=Z("menu.selectionBackground",im,S("menuSelectionBackground","Background color of the selected menu item in menus.")),$Ze=Z("menu.selectionBorder",{dark:null,light:null,hcDark:Fi,hcLight:Fi},S("menuSelectionBorder","Border color of the selected menu item in menus.")),UZe=Z("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:kn,hcLight:kn},S("menuSeparatorBackground","Color of a separator menu item in menus.")),kZ=Z("quickInput.background",ll,S("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),jZe=Z("quickInput.foreground",QD,S("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),KZe=Z("quickInputTitle.background",{dark:new De(new _n(255,255,255,.105)),light:new De(new _n(0,0,0,.06)),hcDark:"#000000",hcLight:De.white},S("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Zhe=Z("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:De.white,hcLight:"#0F4A85"},S("pickerGroupForeground","Quick picker color for grouping labels.")),qZe=Z("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:De.white,hcLight:"#0F4A85"},S("pickerGroupBorder","Quick picker color for grouping borders.")),EZ=Z("quickInput.list.focusBackground",null,"",void 0,S("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),W8=Z("quickInputList.focusForeground",ow,S("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Xhe=Z("quickInputList.focusIconForeground",Khe,S("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),$8=Z("quickInputList.focusBackground",{dark:pZ(EZ,im),light:pZ(EZ,im),hcDark:null,hcLight:null},S("quickInput.listFocusBackground","Quick picker background color for the focused item."));Z("search.resultsInfoForeground",{light:Wn,dark:Yt(Wn,.65),hcDark:Wn,hcLight:Wn},S("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));Z("searchEditor.findMatchBackground",{light:Yt(Kh,.66),dark:Yt(Kh,.66),hcDark:Kh,hcLight:Kh},S("searchEditor.queryMatch","Color of the Search Editor query matches."));Z("searchEditor.findMatchBorder",{light:Yt(zv,.66),dark:Yt(zv,.66),hcDark:zv,hcLight:zv},S("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var GZe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},LZ=function(n,e){return function(t,i){e(t,i,n)}};const yS=cn("hoverService");let aw=class extends ke{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,i={},r,s){super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=r,this.hoverService=s,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new dt),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const i=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const r=kr(e.target)?[e.target]:e.target.targetElements;for(const o of r)this.hoverDisposables.add(vr(o,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const s=kr(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:s,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};aw=GZe([LZ(3,Ti),LZ(4,yS)],aw);const wS=cn("contextViewService"),Zd=cn("contextMenuService"),Wr=cn("keybindingService");class eM{constructor(){this._hooks=new dt,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,r,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=r,this._onStopCallback=s;let o=e;try{e.setPointerCapture(t),this._hooks.add(Pt(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{o=bt(e)}this._hooks.add(_e(o,We.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(_e(o,We.POINTER_UP,a=>this.stopMonitoring(!0)))}}function Ii(n,e,t){let i=null,r=null;if(typeof t.value=="function"?(i="value",r=t.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",r=t.get),!r)throw new Error("not supported");const s=`$memoize$${e}`;t[i]=function(...o){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,o)}),this[s]}}var YZe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Qn;(function(n){n.Tap="-monaco-gesturetap",n.Change="-monaco-gesturechange",n.Start="-monaco-gesturestart",n.End="-monaco-gesturesend",n.Contextmenu="-monaco-gesturecontextmenu"})(Qn||(Qn={}));const Rr=class Rr extends ke{constructor(){super(),this.dispatched=!1,this.targets=new Eo,this.ignoreTargets=new Eo,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Be.runAndSubscribe(OD,({window:e,disposables:t})=>{t.add(_e(e.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),t.add(_e(e.document,"touchend",i=>this.onTouchEnd(e,i))),t.add(_e(e.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:zn,disposables:this._store}))}static addTarget(e){if(!Rr.isTouchDevice())return ke.None;Rr.INSTANCE||(Rr.INSTANCE=new Rr);const t=Rr.INSTANCE.targets.push(e);return Pt(t)}static ignoreTarget(e){if(!Rr.isTouchDevice())return ke.None;Rr.INSTANCE||(Rr.INSTANCE=new Rr);const t=Rr.INSTANCE.ignoreTargets.push(e);return Pt(t)}static isTouchDevice(){return"ontouchstart"in zn||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,r=e.targetTouches.length;i<r;i++){const s=e.targetTouches.item(i);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};const o=this.newGestureEvent(Qn.Start,s.target);o.pageX=s.pageX,o.pageY=s.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),r=Object.keys(this.activeTouches).length;for(let s=0,o=t.changedTouches.length;s<o;s++){const a=t.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<Rr.HOLD_DELAY&&Math.abs(l.initialPageX-va(l.rollingPageX))<30&&Math.abs(l.initialPageY-va(l.rollingPageY))<30){const u=this.newGestureEvent(Qn.Tap,l.initialTarget);u.pageX=va(l.rollingPageX),u.pageY=va(l.rollingPageY),this.dispatchEvent(u)}else if(c>=Rr.HOLD_DELAY&&Math.abs(l.initialPageX-va(l.rollingPageX))<30&&Math.abs(l.initialPageY-va(l.rollingPageY))<30){const u=this.newGestureEvent(Qn.Contextmenu,l.initialTarget);u.pageX=va(l.rollingPageX),u.pageY=va(l.rollingPageY),this.dispatchEvent(u)}else if(r===1){const u=va(l.rollingPageX),d=va(l.rollingPageY),h=va(l.rollingTimestamps)-l.rollingTimestamps[0],f=u-l.rollingPageX[0],g=d-l.rollingPageY[0],p=[...this.targets].filter(v=>l.initialTarget instanceof Node&&v.contains(l.initialTarget));this.inertia(e,p,i,Math.abs(f)/h,f>0?1:-1,u,Math.abs(g)/h,g>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(Qn.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===Qn.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>Rr.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===Qn.Change||e.type===Qn.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let r=0,s=e.initialTarget;for(;s&&s!==i;)r++,s=s.parentElement;t.push([r,i])}t.sort((i,r)=>i[0]-r[0]);for(const[i,r]of t)r.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,r,s,o,a,l,c){this.handle=Po(e,()=>{const u=Date.now(),d=u-i;let h=0,f=0,g=!0;r+=Rr.SCROLL_FRICTION*d,a+=Rr.SCROLL_FRICTION*d,r>0&&(g=!1,h=s*r*d),a>0&&(g=!1,f=l*a*d);const p=this.newGestureEvent(Qn.Change);p.translationX=h,p.translationY=f,t.forEach(v=>v.dispatchEvent(p)),g||this.inertia(e,t,u,r,s,o+h,a,l,c+f)})}onTouchMove(e){const t=Date.now();for(let i=0,r=e.changedTouches.length;i<r;i++){const s=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}const o=this.activeTouches[s.identifier],a=this.newGestureEvent(Qn.Change,o.initialTarget);a.translationX=s.pageX-va(o.rollingPageX),a.translationY=s.pageY-va(o.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(s.pageX),o.rollingPageY.push(s.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};Rr.SCROLL_FRICTION=-.005,Rr.HOLD_DELAY=700,Rr.CLEAR_TAP_COUNT_TIME=400;let zs=Rr;YZe([Ii],zs,"isTouchDevice",null);let Xd=class extends ke{onclick(e,t){this._register(_e(e,We.CLICK,i=>t(new nc(bt(e),i))))}onmousedown(e,t){this._register(_e(e,We.MOUSE_DOWN,i=>t(new nc(bt(e),i))))}onmouseover(e,t){this._register(_e(e,We.MOUSE_OVER,i=>t(new nc(bt(e),i))))}onmouseleave(e,t){this._register(_e(e,We.MOUSE_LEAVE,i=>t(new nc(bt(e),i))))}onkeydown(e,t){this._register(_e(e,We.KEY_DOWN,i=>t(new ii(i))))}onkeyup(e,t){this._register(_e(e,We.KEY_UP,i=>t(new ii(i))))}oninput(e,t){this._register(_e(e,We.INPUT,t))}onblur(e,t){this._register(_e(e,We.BLUR,t))}onfocus(e,t){this._register(_e(e,We.FOCUS,t))}ignoreGesture(e){return zs.ignoreTarget(e)}};const B1=11;class ZZe extends Xd{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...vn.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=B1+"px",this.domNode.style.height=B1+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new eM),this._register(vr(this.bgDomNode,We.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(vr(this.domNode,We.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new TH),this._pointerdownScheduleRepeatTimer=this._register(new vm)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,bt(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class XZe extends ke{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new vm)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const QZe=140;class Qhe extends Xd{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new XZe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new eM),this._shouldRender=!0,this.domNode=Cn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(_e(this.domNode.domNode,We.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new ZZe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,r){this.slider=Cn(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof r=="number"&&this.slider.setHeight(r),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(_e(this.slider.domNode,We.POINTER_DOWN,s=>{s.button===0&&(s.preventDefault(),this._sliderPointerDown(s))})),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),r=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);i<=s&&s<=r?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const s=Ta(this.domNode.domNode);t=e.pageX-s.left,i=e.pageY-s.top}const r=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(r):this._scrollbarState.getDesiredScrollPositionFromOffset(r)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>{const o=this._sliderOrthogonalPointerPosition(s),a=Math.abs(o-i);if(Ao&&a>QZe){this._setDesiredScrollPositionNow(r.getScrollPosition());return}const c=this._sliderPointerPosition(s)-t;this._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const JZe=20;class H1{constructor(e,t,i,r,s,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=s,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new H1(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,r,s){const o=Math.max(0,i-e),a=Math.max(0,o-2*t),l=r>0&&r>i;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(JZe,Math.floor(i*a/r))),u=(a-c)/(r-i),d=s*u;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:u,computedSliderPosition:Math.round(d)}}_refreshComputedValues(){const e=H1._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class eXe extends Qhe{constructor(e,t,i){const r=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new H1(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,r.width,r.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-B1)/2,a=(t.horizontalScrollbarSize-B1)/2;this._createArrow({className:"scra",icon:rt.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Qp(null,1,0))}),this._createArrow({className:"scra",icon:rt.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Qp(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class tXe extends Qhe{constructor(e,t,i){const r=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new H1(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,r.height,r.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-B1)/2,a=(t.verticalScrollbarSize-B1)/2;this._createArrow({className:"scra",icon:rt.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Qp(null,0,1))}),this._createArrow({className:"scra",icon:rt.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Qp(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class iN{constructor(e,t,i,r,s,o,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,r=r|0,s=s|0,o=o|0,a=a|0),this.rawScrollLeft=r,this.rawScrollTop=a,t<0&&(t=0),r+t>i&&(r=i-t),r<0&&(r=0),s<0&&(s=0),a+s>o&&(a=o-s),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=r,this.height=s,this.scrollHeight=o,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new iN(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new iN(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:r,scrollLeftChanged:s,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class bb extends ke{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new ae),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new iN(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var r;const i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),(r=this._smoothScrolling)==null||r.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let r;t?r=new lw(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):r=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=r}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=lw.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class NZ{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function rA(n,e){const t=e-n;return function(i){return n+t*rXe(i)}}function nXe(n,e,t){return function(i){return i<t?n(i/t):e((i-t)/(1-t))}}class lw{constructor(e,t,i,r){this.from=e,this.to=t,this.duration=r,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let s,o;return e<t?(s=e+.75*i,o=t-.75*i):(s=e-.75*i,o=t+.75*i),nXe(rA(e,s),rA(o,t),.33)}return rA(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),r=this.scrollTop(t);return new NZ(i,r,!1)}return new NZ(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return lw.start(e,t,i)}static start(e,t,i){i=i+10;const r=Date.now()-10;return new lw(e,t,r,i)}}function iXe(n){return Math.pow(n,3)}function rXe(n){return 1-iXe(1-n)}const sXe=500,TZ=50;class oXe{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}const NT=class NT{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,r=this._rear;do{const s=r===this._front?e:Math.pow(2,-i);if(e-=s,t+=this._memory[r].score*s,r===this._front)break;r=(this._capacity+r-1)%this._capacity,i++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(dS){const t=bt(e.browserEvent),i=kUe(t);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let r=null;const s=new oXe(e,t,i);this._front===-1&&this._rear===-1?(this._memory[0]=s,this._front=0,this._rear=0):(r=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s),s.score=this._computeScore(s,r)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),t){const r=Math.abs(e.deltaX),s=Math.abs(e.deltaY),o=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(r,o),1),c=Math.max(Math.min(s,a),1),u=Math.max(r,o),d=Math.max(s,a);u%l===0&&d%c===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};NT.INSTANCE=new NT;let rN=NT;class iV extends Xd{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new ae),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new ae),e.style.overflow="hidden",this._options=lXe(t),this._scrollable=i,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const r={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new tXe(this._scrollable,this._options,r)),this._horizontalScrollbar=this._register(new eXe(this._scrollable,this._options,r)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Cn(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Cn(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Cn(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onmouseleave(this._listenOnDomNode,s=>this._onMouseLeave(s)),this._hideTimeout=this._register(new vm),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=zr(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,hn&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Qp(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=zr(this._mouseWheelToDispose),e)){const i=r=>{this._onMouseWheel(new Qp(r))};this._mouseWheelToDispose.push(_e(this._listenOnDomNode,We.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){var s;if((s=e.browserEvent)!=null&&s.defaultPrevented)return;const t=rN.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+o===0?a=o=0:Math.abs(o)>=Math.abs(a)?a=0:o=0),this._options.flipAxes&&([o,a]=[a,o]);const l=!hn&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let u={};if(o){const d=TZ*o,h=c.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(u,h)}if(a){const d=TZ*a,h=c.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(u,h)}u=this._scrollable.validateScrollPosition(u),(c.scrollLeft!==u.scrollLeft||c.scrollTop!==u.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),i=!0)}let r=i;!r&&this._options.alwaysConsumeMouseWheel&&(r=!0),!r&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(r=!0),r&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,r=i?" left":"",s=t?" top":"",o=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${r}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${s}${r}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),sXe)}}class aXe extends iV{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new bb({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:r=>Po(bt(e),r)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class tM extends iV{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class rV extends iV{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new bb({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:r=>Po(bt(e),r)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(r=>{r.scrollTopChanged&&(this._element.scrollTop=r.scrollTop),r.scrollLeftChanged&&(this._element.scrollLeft=r.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function lXe(n){const e={lazyRender:typeof n.lazyRender<"u"?n.lazyRender:!1,className:typeof n.className<"u"?n.className:"",useShadows:typeof n.useShadows<"u"?n.useShadows:!0,handleMouseWheel:typeof n.handleMouseWheel<"u"?n.handleMouseWheel:!0,flipAxes:typeof n.flipAxes<"u"?n.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof n.consumeMouseWheelIfScrollbarIsNeeded<"u"?n.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof n.alwaysConsumeMouseWheel<"u"?n.alwaysConsumeMouseWheel:!1,scrollYToX:typeof n.scrollYToX<"u"?n.scrollYToX:!1,mouseWheelScrollSensitivity:typeof n.mouseWheelScrollSensitivity<"u"?n.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof n.fastScrollSensitivity<"u"?n.fastScrollSensitivity:5,scrollPredominantAxis:typeof n.scrollPredominantAxis<"u"?n.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof n.mouseWheelSmoothScroll<"u"?n.mouseWheelSmoothScroll:!0,arrowSize:typeof n.arrowSize<"u"?n.arrowSize:11,listenOnDomNode:typeof n.listenOnDomNode<"u"?n.listenOnDomNode:null,horizontal:typeof n.horizontal<"u"?n.horizontal:1,horizontalScrollbarSize:typeof n.horizontalScrollbarSize<"u"?n.horizontalScrollbarSize:10,horizontalSliderSize:typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:0,horizontalHasArrows:typeof n.horizontalHasArrows<"u"?n.horizontalHasArrows:!1,vertical:typeof n.vertical<"u"?n.vertical:1,verticalScrollbarSize:typeof n.verticalScrollbarSize<"u"?n.verticalScrollbarSize:10,verticalHasArrows:typeof n.verticalHasArrows<"u"?n.verticalHasArrows:!1,verticalSliderSize:typeof n.verticalSliderSize<"u"?n.verticalSliderSize:0,scrollByPage:typeof n.scrollByPage<"u"?n.scrollByPage:!1};return e.horizontalSliderSize=typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof n.verticalSliderSize<"u"?n.verticalSliderSize:e.verticalScrollbarSize,hn&&(e.className+=" mac"),e}const ik=xt;let cXe=class extends ke{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new rV(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class sV extends ke{static render(e,t,i){return new sV(e,t,i)}constructor(e,t,i){super(),this.actionLabel=t.label,this.actionKeybindingLabel=i,this.actionContainer=ct(e,ik("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=ct(this.actionContainer,ik("a.action")),this.action.setAttribute("role","button"),t.iconClass&&ct(this.action,ik(`span.icon.${t.iconClass}`));const r=ct(this.action,ik("span"));r.textContent=i?`${t.label} (${i})`:t.label,this._store.add(new dXe(this.actionContainer,t.run)),this._store.add(new hXe(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function uXe(n,e){return n&&e?S("acessibleViewHint","Inspect this in the accessible view with {0}.",e):n?S("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class dXe extends ke{constructor(e,t){super(),this._register(_e(e,We.CLICK,i=>{i.stopPropagation(),i.preventDefault(),t(e)}))}}class hXe extends ke{constructor(e,t,i){super(),this._register(_e(e,We.KEY_DOWN,r=>{const s=new ii(r);i.some(o=>s.equals(o))&&(r.stopPropagation(),r.preventDefault(),t(e))}))}}const SS=cn("openerService");function fXe(n){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(n.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},n=n.with({fragment:""})),{selection:e,uri:n}}class qt{get event(){return this.emitter.event}constructor(e,t,i){const r=s=>this.emitter.fire(s);this.emitter=new ae({onWillAddFirstListener:()=>e.addEventListener(t,r,i),onDidRemoveLastListener:()=>e.removeEventListener(t,r,i)})}dispose(){this.emitter.dispose()}}function gXe(n,e={}){const t=oV(e);return t.textContent=n,t}function pXe(n,e={}){const t=oV(e);return Jhe(t,vXe(n,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function oV(n){const e=n.inline?"span":"div",t=document.createElement(e);return n.className&&(t.className=n.className),t}class mXe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function Jhe(n,e,t,i){let r;if(e.type===2)r=document.createTextNode(e.content||"");else if(e.type===3)r=document.createElement("b");else if(e.type===4)r=document.createElement("i");else if(e.type===7&&i)r=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");t.disposables.add(vr(s,"click",o=>{t.callback(String(e.index),o)})),r=s}else e.type===8?r=document.createElement("br"):e.type===1&&(r=n);r&&n!==r&&n.appendChild(r),r&&Array.isArray(e.children)&&e.children.forEach(s=>{Jhe(r,s,t,i)})}function vXe(n,e){const t={type:1,children:[]};let i=0,r=t;const s=[],o=new mXe(n);for(;!o.eos();){let a=o.next();const l=a==="\\"&&U8(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&bXe(a,e)&&a===o.peek()){o.advance(),r.type===2&&(r=s.pop());const c=U8(a,e);if(r.type===c||r.type===5&&c===6)r=s.pop();else{const u={type:c,children:[]};c===5&&(u.index=i,i++),r.children.push(u),s.push(r),r=u}}else if(a===`
`)r.type===2&&(r=s.pop()),r.children.push({type:8});else if(r.type!==2){const c={type:2,content:a};r.children.push(c),s.push(r),r=c}else r.content+=a}return r.type===2&&(r=s.pop()),t}function bXe(n,e){return U8(n,e)!==0}function U8(n,e){switch(n){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const _Xe=new RegExp(`(\\\\)?\\$\\((${vn.iconNameExpression}(?:${vn.iconModifierExpression})?)\\)`,"g");function vp(n){const e=new Array;let t,i=0,r=0;for(;(t=_Xe.exec(n))!==null;){r=t.index||0,i<r&&e.push(n.substring(i,r)),i=(t.index||0)+t[0].length;const[,s,o]=t;e.push(s?`$(${o})`:sN({id:o}))}return i<n.length&&e.push(n.substring(i)),e}function sN(n){const e=xt("span");return e.classList.add(...vn.asClassNameArray(n)),e}function efe(...n){return function(e,t){for(let i=0,r=n.length;i<r;i++){const s=n[i](e,t);if(s)return s}return null}}tfe.bind(void 0,!1);const oN=tfe.bind(void 0,!0);function tfe(n,e,t){if(!t||t.length<e.length)return null;let i;return n?i=_H(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function CXe(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t===-1?null:[{start:t,end:t+n.length}]}function yXe(n,e){return j8(n.toLowerCase(),e.toLowerCase(),0,0)}function j8(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]===e[i]){let r=null;return(r=j8(n,e,t+1,i+1))?ife({start:i,end:i+1},r):null}return j8(n,e,t,i+1)}function aV(n){return 97<=n&&n<=122}function nM(n){return 65<=n&&n<=90}function lV(n){return 48<=n&&n<=57}function wXe(n){return n===32||n===9||n===10||n===13}const SXe=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(n=>SXe.add(n.charCodeAt(0)));function nfe(n){return aV(n)||nM(n)||lV(n)}function ife(n,e){return e.length===0?e=[n]:n.end===e[0].start?e[0].start=n.start:e.unshift(n),e}function rfe(n,e){for(let t=e;t<n.length;t++){const i=n.charCodeAt(t);if(nM(i)||lV(i)||t>0&&!nfe(n.charCodeAt(t-1)))return t}return n.length}function K8(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]!==e[i].toLowerCase())return null;{let r=null,s=i+1;for(r=K8(n,e,t+1,i+1);!r&&(s=rfe(e,s))<e.length;)r=K8(n,e,t+1,s),s++;return r===null?null:ife({start:i,end:i+1},r)}}function xXe(n){let e=0,t=0,i=0,r=0,s=0;for(let u=0;u<n.length;u++)s=n.charCodeAt(u),nM(s)&&e++,aV(s)&&t++,nfe(s)&&i++,lV(s)&&r++;const o=e/n.length,a=t/n.length,l=i/n.length,c=r/n.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function kXe(n){const{upperPercent:e,lowerPercent:t}=n;return t===0&&e>.6}function EXe(n){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:r}=n;return t>.2&&e<.8&&i>.6&&r<.2}function LXe(n){let e=0,t=0,i=0,r=0;for(let s=0;s<n.length;s++)i=n.charCodeAt(s),nM(i)&&e++,aV(i)&&t++,wXe(i)&&r++;return(e===0||t===0)&&r===0?n.length<=30:e<=5}function sfe(n,e){if(!e||(e=e.trim(),e.length===0)||!LXe(n))return null;e.length>60&&(e=e.substring(0,60));const t=xXe(e);if(!EXe(t)){if(!kXe(t))return null;e=e.toLowerCase()}let i=null,r=0;for(n=n.toLowerCase();r<e.length&&(i=K8(n,e,0,r))===null;)r=rfe(e,r+1);return i}const NXe=efe(oN,sfe,CXe),TXe=efe(oN,sfe,yXe),IZ=new bS(1e4);function DZ(n,e,t=!1){if(typeof n!="string"||typeof e!="string")return null;let i=IZ.get(n);i||(i=new RegExp(gUe(n),"i"),IZ.set(n,i));const r=i.exec(e);return r?[{start:r.index,end:r.index+r[0].length}]:t?TXe(n,e):NXe(n,e)}function IXe(n,e){const t=lfe(n,n.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?DXe(t):null}function DXe(n){if(typeof n>"u")return[];const e=[],t=n[1];for(let i=n.length-1;i>1;i--){const r=n[i]+t,s=e[e.length-1];s&&s.end===r?s.end=r+1:e.push({start:r,end:r+1})}return e}const qh=128;function cV(){const n=[],e=[];for(let t=0;t<=qh;t++)e[t]=0;for(let t=0;t<=qh;t++)n.push(e.slice(0));return n}function ofe(n){const e=[];for(let t=0;t<=n;t++)e[t]=0;return e}const afe=ofe(2*qh),q8=ofe(2*qh),Au=cV(),Qf=cV(),rk=cV();function sk(n,e){if(e<0||e>=n.length)return!1;const t=n.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!xH(t)}}function MZ(n,e){if(e<0||e>=n.length)return!1;switch(n.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function kE(n,e,t){return e[n]!==t[n]}function MXe(n,e,t,i,r,s,o=!1){for(;e<t&&r<s;)n[e]===i[r]&&(o&&(afe[e]=r),e+=1),r+=1;return e===t}var O0;(function(n){n.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}n.isDefault=e})(O0||(O0={}));const Bz=class Bz{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};Bz.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let G8=Bz;function lfe(n,e,t,i,r,s,o=G8.default){const a=n.length>qh?qh:n.length,l=i.length>qh?qh:i.length;if(t>=a||s>=l||a-t>l-s||!MXe(e,t,a,r,s,l,!0))return;RXe(a,l,t,s,e,r);let c=1,u=1,d=t,h=s;const f=[!1];for(c=1,d=t;d<a;c++,d++){const _=afe[d],y=q8[d],C=d+1<a?q8[d+1]:l;for(u=_-s+1,h=_;h<C;u++,h++){let w=Number.MIN_SAFE_INTEGER,x=!1;h<=y&&(w=AXe(n,e,d,t,i,r,h,l,s,Au[c-1][u-1]===0,f));let k=0;w!==Number.MAX_SAFE_INTEGER&&(x=!0,k=w+Qf[c-1][u-1]);const E=h>_,L=E?Qf[c][u-1]+(Au[c][u-1]>0?-5:0):0,M=h>_+1&&Au[c][u-1]>0,D=M?Qf[c][u-2]+(Au[c][u-2]>0?-5:0):0;if(M&&(!E||D>=L)&&(!x||D>=k))Qf[c][u]=D,rk[c][u]=3,Au[c][u]=0;else if(E&&(!x||L>=k))Qf[c][u]=L,rk[c][u]=2,Au[c][u]=0;else if(x)Qf[c][u]=k,rk[c][u]=1,Au[c][u]=Au[c-1][u-1]+1;else throw new Error("not possible")}}if(!f[0]&&!o.firstMatchCanBeWeak)return;c--,u--;const g=[Qf[c][u],s];let p=0,v=0;for(;c>=1;){let _=u;do{const y=rk[c][_];if(y===3)_=_-2;else if(y===2)_=_-1;else break}while(_>=1);p>1&&e[t+c-1]===r[s+u-1]&&!kE(_+s-1,i,r)&&p+1>Au[c][_]&&(_=u),_===u?p++:p=1,v||(v=_),c--,u=_-1,g.push(u)}l-s===a&&o.boostFullMatch&&(g[0]+=2);const b=v-a;return g[0]-=b,g}function RXe(n,e,t,i,r,s){let o=n-1,a=e-1;for(;o>=t&&a>=i;)r[o]===s[a]&&(q8[o]=a,o--),a--}function AXe(n,e,t,i,r,s,o,a,l,c,u){if(e[t]!==s[o])return Number.MIN_SAFE_INTEGER;let d=1,h=!1;return o===t-i?d=n[t]===r[o]?7:5:kE(o,r,s)&&(o===0||!kE(o-1,r,s))?(d=n[t]===r[o]?7:5,h=!0):sk(s,o)&&(o===0||!sk(s,o-1))?d=5:(sk(s,o-1)||MZ(s,o-1))&&(d=5,h=!0),d>1&&t===i&&(u[0]=!0),h||(h=kE(o,r,s)||sk(s,o-1)||MZ(s,o-1)),t===i?o>l&&(d-=h?3:5):c?d+=h?2:0:d+=h?0:1,o+1===a&&(d-=h?3:5),d}const OXe="$(",uV=new RegExp(`\\$\\(${vn.iconNameExpression}(?:${vn.iconModifierExpression})?\\)`,"g"),PXe=new RegExp(`(\\\\)?${uV.source}`,"g");function FXe(n){return n.replace(PXe,(e,t)=>t?e:`\\${e}`)}const BXe=new RegExp(`\\\\${uV.source}`,"g");function HXe(n){return n.replace(BXe,e=>`\\${e}`)}const VXe=new RegExp(`(\\s)?(\\\\)?${uV.source}(\\s)?`,"g");function cfe(n){return n.indexOf(OXe)===-1?n:n.replace(VXe,(e,t,i,r)=>i?e:t||r||"")}function zXe(n){return n?n.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const sA=new RegExp(`\\$\\(${vn.iconNameCharacter}+\\)`,"g");function D_(n){sA.lastIndex=0;let e="";const t=[];let i=0;for(;;){const r=sA.lastIndex,s=sA.exec(n),o=n.substring(r,s==null?void 0:s.index);if(o.length>0){e+=o;for(let a=0;a<o.length;a++)t.push(i)}if(!s)break;i+=s[0].length}return{text:e,iconOffsets:t}}function oA(n,e,t=!1){const{text:i,iconOffsets:r}=e;if(!r||r.length===0)return DZ(n,i,t);const s=MD(i," "),o=i.length-s.length,a=DZ(n,s,t);if(a)for(const l of a){const c=r[l.start+o]+o;l.start+=c,l.end+=c}return a}function Ou(n){return AL(n,!0)}class WXe{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:W5(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===Wt.file)return A8(Ou(e),Ou(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(AZ(e.authority,t.authority))return A8(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Ut.joinPath(e,...t)}basenameOrAuthority(e){return dV(e)||e.authority}basename(e){return Ai.basename(e.path)}extname(e){return Ai.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Wt.file?t=Ut.file(q$e(Ou(e))).path:(t=Ai.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Wt.file?t=Ut.file(que(Ou(e))).path:t=Ai.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!AZ(e.authority,t.authority))return;if(e.scheme===Wt.file){const s=K$e(Ou(e),Ou(t));return Ao?xhe(s):s}let i=e.path||"/";const r=t.path||"/";if(this._ignorePathCasing(e)){let s=0;for(const o=Math.min(i.length,r.length);s<o&&!(i.charCodeAt(s)!==r.charCodeAt(s)&&i.charAt(s).toLowerCase()!==r.charAt(s).toLowerCase());s++);i=r.substr(0,s)+i.substr(s)}return Ai.relative(i,r)}resolvePath(e,t){if(e.scheme===Wt.file){const i=Ut.file(j$e(Ou(e),t));return e.with({authority:i.authority,path:i.path})}return t=qGe(t),e.with({path:Ai.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Ov(e,t)}hasTrailingPathSeparator(e,t=gf){if(e.scheme===Wt.file){const i=Ou(e);return i.length>oZ(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=gf){return OZ(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=gf){let i=!1;if(e.scheme===Wt.file){const r=Ou(e);i=r!==void 0&&r.length===oZ(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;i=r.length===1&&r.charCodeAt(r.length-1)===47}return!i&&!OZ(e,t)?e.with({path:e.path+"/"}):e}}const ui=new WXe(()=>!1),$Xe=ui.isEqual.bind(ui);ui.isEqualOrParent.bind(ui);ui.getComparisonKey.bind(ui);ui.basenameOrAuthority.bind(ui);const dV=ui.basename.bind(ui);ui.extname.bind(ui);const UXe=ui.dirname.bind(ui);ui.joinPath.bind(ui);const jXe=ui.normalizePath.bind(ui);ui.relativePath.bind(ui);const RZ=ui.resolvePath.bind(ui);ui.isAbsolutePath.bind(ui);const AZ=ui.isEqualAuthority.bind(ui),OZ=ui.hasTrailingPathSeparator.bind(ui);ui.removeTrailingPathSeparator.bind(ui);ui.addTrailingPathSeparator.bind(ui);var aN;(function(n){n.META_DATA_LABEL="label",n.META_DATA_DESCRIPTION="description",n.META_DATA_SIZE="size",n.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&i.set(a,l)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&i.set(n.META_DATA_MIME,s),i}n.parseMetaData=e})(aN||(aN={}));class ufe{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw ID("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=qXe(this.supportThemeIcons?FXe(e):e).replace(/([ \t]+)/g,(i,r)=>"&nbsp;".repeat(r.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${GXe(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(zd(t),"g");return e.replace(i,(r,s)=>e.charAt(s-1)!=="\\"?`\\${r}`:r)}}function P0(n){return n instanceof ufe?!0:n&&typeof n=="object"?typeof n.value=="string"&&(typeof n.isTrusted=="boolean"||typeof n.isTrusted=="object"||n.isTrusted===void 0)&&(typeof n.supportThemeIcons=="boolean"||n.supportThemeIcons===void 0):!1}function KXe(n,e){return n===e?!0:!n||!e?!1:n.value===e.value&&n.isTrusted===e.isTrusted&&n.supportThemeIcons===e.supportThemeIcons&&n.supportHtml===e.supportHtml&&(n.baseUri===e.baseUri||!!n.baseUri&&!!e.baseUri&&$Xe(Ut.from(n.baseUri),Ut.from(e.baseUri)))}function qXe(n){return n.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function GXe(n,e){var r;const t=((r=n.match(/^`+/gm))==null?void 0:r.reduce((s,o)=>s.length>o.length?s:o).length)??0,i=t>=3?t+1:3;return[`${"`".repeat(i)}${e}`,n,`${"`".repeat(i)}`].join(`
`)}function ok(n){return n.replace(/"/g,"&quot;")}function aA(n){return n&&n.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function YXe(n){const e=[],t=n.split("|").map(r=>r.trim());n=t[0];const i=t[1];if(i){const r=/height=(\d+)/.exec(i),s=/width=(\d+)/.exec(i),o=r?r[1]:"",a=s?s[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:n,dimensions:e}}class dfe{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const PZ=new dfe("id#");let Xr={};(function(){function n(e,t){t(Xr)}n.amd=!0,function(e,t){typeof n=="function"&&n.amd?n(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function i(be){e.defaults=be}const r=/[&<>"']/,s=new RegExp(r.source,"g"),o=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(o.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=be=>l[be];function u(be,H){if(H){if(r.test(be))return be.replace(s,c)}else if(o.test(be))return be.replace(a,c);return be}const d=/(^|[^\[])\^/g;function h(be,H){let W=typeof be=="string"?be:be.source;H=H||"";const K={replace:(Q,ie)=>{let me=typeof ie=="string"?ie:ie.source;return me=me.replace(d,"$1"),W=W.replace(Q,me),K},getRegex:()=>new RegExp(W,H)};return K}function f(be){try{be=encodeURI(be).replace(/%25/g,"%")}catch{return null}return be}const g={exec:()=>null};function p(be,H){const W=be.replace(/\|/g,(ie,me,Se)=>{let Ze=!1,Je=me;for(;--Je>=0&&Se[Je]==="\\";)Ze=!Ze;return Ze?"|":" |"}),K=W.split(/ \|/);let Q=0;if(K[0].trim()||K.shift(),K.length>0&&!K[K.length-1].trim()&&K.pop(),H)if(K.length>H)K.splice(H);else for(;K.length<H;)K.push("");for(;Q<K.length;Q++)K[Q]=K[Q].trim().replace(/\\\|/g,"|");return K}function v(be,H,W){const K=be.length;if(K===0)return"";let Q=0;for(;Q<K;){const ie=be.charAt(K-Q-1);if(ie===H&&!W)Q++;else if(ie!==H&&W)Q++;else break}return be.slice(0,K-Q)}function b(be,H){if(be.indexOf(H[1])===-1)return-1;let W=0;for(let K=0;K<be.length;K++)if(be[K]==="\\")K++;else if(be[K]===H[0])W++;else if(be[K]===H[1]&&(W--,W<0))return K;return-1}function _(be,H,W,K){const Q=H.href,ie=H.title?u(H.title):null,me=be[1].replace(/\\([\[\]])/g,"$1");if(be[0].charAt(0)!=="!"){K.state.inLink=!0;const Se={type:"link",raw:W,href:Q,title:ie,text:me,tokens:K.inlineTokens(me)};return K.state.inLink=!1,Se}return{type:"image",raw:W,href:Q,title:ie,text:u(me)}}function y(be,H){const W=be.match(/^(\s+)(?:```)/);if(W===null)return H;const K=W[1];return H.split(`
`).map(Q=>{const ie=Q.match(/^\s+/);if(ie===null)return Q;const[me]=ie;return me.length>=K.length?Q.slice(K.length):Q}).join(`
`)}class C{constructor(H){Bi(this,"options");Bi(this,"rules");Bi(this,"lexer");this.options=H||e.defaults}space(H){const W=this.rules.block.newline.exec(H);if(W&&W[0].length>0)return{type:"space",raw:W[0]}}code(H){const W=this.rules.block.code.exec(H);if(W){const K=W[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:W[0],codeBlockStyle:"indented",text:this.options.pedantic?K:v(K,`
`)}}}fences(H){const W=this.rules.block.fences.exec(H);if(W){const K=W[0],Q=y(K,W[3]||"");return{type:"code",raw:K,lang:W[2]?W[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):W[2],text:Q}}}heading(H){const W=this.rules.block.heading.exec(H);if(W){let K=W[2].trim();if(/#$/.test(K)){const Q=v(K,"#");(this.options.pedantic||!Q||/ $/.test(Q))&&(K=Q.trim())}return{type:"heading",raw:W[0],depth:W[1].length,text:K,tokens:this.lexer.inline(K)}}}hr(H){const W=this.rules.block.hr.exec(H);if(W)return{type:"hr",raw:v(W[0],`
`)}}blockquote(H){const W=this.rules.block.blockquote.exec(H);if(W){let K=v(W[0],`
`).split(`
`),Q="",ie="";const me=[];for(;K.length>0;){let Se=!1;const Ze=[];let Je;for(Je=0;Je<K.length;Je++)if(/^ {0,3}>/.test(K[Je]))Ze.push(K[Je]),Se=!0;else if(!Se)Ze.push(K[Je]);else break;K=K.slice(Je);const wt=Ze.join(`
`),zt=wt.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");Q=Q?`${Q}
${wt}`:wt,ie=ie?`${ie}
${zt}`:zt;const Zt=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(zt,me,!0),this.lexer.state.top=Zt,K.length===0)break;const Dn=me[me.length-1];if((Dn==null?void 0:Dn.type)==="code")break;if((Dn==null?void 0:Dn.type)==="blockquote"){const on=Dn,oi=on.raw+`
`+K.join(`
`),nn=this.blockquote(oi);me[me.length-1]=nn,Q=Q.substring(0,Q.length-on.raw.length)+nn.raw,ie=ie.substring(0,ie.length-on.text.length)+nn.text;break}else if((Dn==null?void 0:Dn.type)==="list"){const on=Dn,oi=on.raw+`
`+K.join(`
`),nn=this.list(oi);me[me.length-1]=nn,Q=Q.substring(0,Q.length-Dn.raw.length)+nn.raw,ie=ie.substring(0,ie.length-on.raw.length)+nn.raw,K=oi.substring(me[me.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:Q,tokens:me,text:ie}}}list(H){let W=this.rules.block.list.exec(H);if(W){let K=W[1].trim();const Q=K.length>1,ie={type:"list",raw:"",ordered:Q,start:Q?+K.slice(0,-1):"",loose:!1,items:[]};K=Q?`\\d{1,9}\\${K.slice(-1)}`:`\\${K}`,this.options.pedantic&&(K=Q?K:"[*+-]");const me=new RegExp(`^( {0,3}${K})((?:[	 ][^\\n]*)?(?:\\n|$))`);let Se=!1;for(;H;){let Ze=!1,Je="",wt="";if(!(W=me.exec(H))||this.rules.block.hr.test(H))break;Je=W[0],H=H.substring(Je.length);let zt=W[2].split(`
`,1)[0].replace(/^\t+/,bn=>" ".repeat(3*bn.length)),Zt=H.split(`
`,1)[0],Dn=!zt.trim(),on=0;if(this.options.pedantic?(on=2,wt=zt.trimStart()):Dn?on=W[1].length+1:(on=W[2].search(/[^ ]/),on=on>4?1:on,wt=zt.slice(on),on+=W[1].length),Dn&&/^ *$/.test(Zt)&&(Je+=Zt+`
`,H=H.substring(Zt.length+1),Ze=!0),!Ze){const bn=new RegExp(`^ {0,${Math.min(3,on-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),pt=new RegExp(`^ {0,${Math.min(3,on-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ce=new RegExp(`^ {0,${Math.min(3,on-1)}}(?:\`\`\`|~~~)`),Xe=new RegExp(`^ {0,${Math.min(3,on-1)}}#`);for(;H;){const Re=H.split(`
`,1)[0];if(Zt=Re,this.options.pedantic&&(Zt=Zt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ce.test(Zt)||Xe.test(Zt)||bn.test(Zt)||pt.test(H))break;if(Zt.search(/[^ ]/)>=on||!Zt.trim())wt+=`
`+Zt.slice(on);else{if(Dn||zt.search(/[^ ]/)>=4||ce.test(zt)||Xe.test(zt)||pt.test(zt))break;wt+=`
`+Zt}!Dn&&!Zt.trim()&&(Dn=!0),Je+=Re+`
`,H=H.substring(Re.length+1),zt=Zt.slice(on)}}ie.loose||(Se?ie.loose=!0:/\n *\n *$/.test(Je)&&(Se=!0));let oi=null,nn;this.options.gfm&&(oi=/^\[[ xX]\] /.exec(wt),oi&&(nn=oi[0]!=="[ ] ",wt=wt.replace(/^\[[ xX]\] +/,""))),ie.items.push({type:"list_item",raw:Je,task:!!oi,checked:nn,loose:!1,text:wt,tokens:[]}),ie.raw+=Je}ie.items[ie.items.length-1].raw=ie.items[ie.items.length-1].raw.trimEnd(),ie.items[ie.items.length-1].text=ie.items[ie.items.length-1].text.trimEnd(),ie.raw=ie.raw.trimEnd();for(let Ze=0;Ze<ie.items.length;Ze++)if(this.lexer.state.top=!1,ie.items[Ze].tokens=this.lexer.blockTokens(ie.items[Ze].text,[]),!ie.loose){const Je=ie.items[Ze].tokens.filter(zt=>zt.type==="space"),wt=Je.length>0&&Je.some(zt=>/\n.*\n/.test(zt.raw));ie.loose=wt}if(ie.loose)for(let Ze=0;Ze<ie.items.length;Ze++)ie.items[Ze].loose=!0;return ie}}html(H){const W=this.rules.block.html.exec(H);if(W)return{type:"html",block:!0,raw:W[0],pre:W[1]==="pre"||W[1]==="script"||W[1]==="style",text:W[0]}}def(H){const W=this.rules.block.def.exec(H);if(W){const K=W[1].toLowerCase().replace(/\s+/g," "),Q=W[2]?W[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",ie=W[3]?W[3].substring(1,W[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):W[3];return{type:"def",tag:K,raw:W[0],href:Q,title:ie}}}table(H){const W=this.rules.block.table.exec(H);if(!W||!/[:|]/.test(W[2]))return;const K=p(W[1]),Q=W[2].replace(/^\||\| *$/g,"").split("|"),ie=W[3]&&W[3].trim()?W[3].replace(/\n[ \t]*$/,"").split(`
`):[],me={type:"table",raw:W[0],header:[],align:[],rows:[]};if(K.length===Q.length){for(const Se of Q)/^ *-+: *$/.test(Se)?me.align.push("right"):/^ *:-+: *$/.test(Se)?me.align.push("center"):/^ *:-+ *$/.test(Se)?me.align.push("left"):me.align.push(null);for(let Se=0;Se<K.length;Se++)me.header.push({text:K[Se],tokens:this.lexer.inline(K[Se]),header:!0,align:me.align[Se]});for(const Se of ie)me.rows.push(p(Se,me.header.length).map((Ze,Je)=>({text:Ze,tokens:this.lexer.inline(Ze),header:!1,align:me.align[Je]})));return me}}lheading(H){const W=this.rules.block.lheading.exec(H);if(W)return{type:"heading",raw:W[0],depth:W[2].charAt(0)==="="?1:2,text:W[1],tokens:this.lexer.inline(W[1])}}paragraph(H){const W=this.rules.block.paragraph.exec(H);if(W){const K=W[1].charAt(W[1].length-1)===`
`?W[1].slice(0,-1):W[1];return{type:"paragraph",raw:W[0],text:K,tokens:this.lexer.inline(K)}}}text(H){const W=this.rules.block.text.exec(H);if(W)return{type:"text",raw:W[0],text:W[0],tokens:this.lexer.inline(W[0])}}escape(H){const W=this.rules.inline.escape.exec(H);if(W)return{type:"escape",raw:W[0],text:u(W[1])}}tag(H){const W=this.rules.inline.tag.exec(H);if(W)return!this.lexer.state.inLink&&/^<a /i.test(W[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(W[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(W[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(W[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:W[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:W[0]}}link(H){const W=this.rules.inline.link.exec(H);if(W){const K=W[2].trim();if(!this.options.pedantic&&/^</.test(K)){if(!/>$/.test(K))return;const me=v(K.slice(0,-1),"\\");if((K.length-me.length)%2===0)return}else{const me=b(W[2],"()");if(me>-1){const Ze=(W[0].indexOf("!")===0?5:4)+W[1].length+me;W[2]=W[2].substring(0,me),W[0]=W[0].substring(0,Ze).trim(),W[3]=""}}let Q=W[2],ie="";if(this.options.pedantic){const me=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Q);me&&(Q=me[1],ie=me[3])}else ie=W[3]?W[3].slice(1,-1):"";return Q=Q.trim(),/^</.test(Q)&&(this.options.pedantic&&!/>$/.test(K)?Q=Q.slice(1):Q=Q.slice(1,-1)),_(W,{href:Q&&Q.replace(this.rules.inline.anyPunctuation,"$1"),title:ie&&ie.replace(this.rules.inline.anyPunctuation,"$1")},W[0],this.lexer)}}reflink(H,W){let K;if((K=this.rules.inline.reflink.exec(H))||(K=this.rules.inline.nolink.exec(H))){const Q=(K[2]||K[1]).replace(/\s+/g," "),ie=W[Q.toLowerCase()];if(!ie){const me=K[0].charAt(0);return{type:"text",raw:me,text:me}}return _(K,ie,K[0],this.lexer)}}emStrong(H,W,K=""){let Q=this.rules.inline.emStrongLDelim.exec(H);if(!Q||Q[3]&&K.match(/[\p{L}\p{N}]/u))return;if(!(Q[1]||Q[2]||"")||!K||this.rules.inline.punctuation.exec(K)){const me=[...Q[0]].length-1;let Se,Ze,Je=me,wt=0;const zt=Q[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(zt.lastIndex=0,W=W.slice(-1*H.length+me);(Q=zt.exec(W))!=null;){if(Se=Q[1]||Q[2]||Q[3]||Q[4]||Q[5]||Q[6],!Se)continue;if(Ze=[...Se].length,Q[3]||Q[4]){Je+=Ze;continue}else if((Q[5]||Q[6])&&me%3&&!((me+Ze)%3)){wt+=Ze;continue}if(Je-=Ze,Je>0)continue;Ze=Math.min(Ze,Ze+Je+wt);const Zt=[...Q[0]][0].length,Dn=H.slice(0,me+Q.index+Zt+Ze);if(Math.min(me,Ze)%2){const oi=Dn.slice(1,-1);return{type:"em",raw:Dn,text:oi,tokens:this.lexer.inlineTokens(oi)}}const on=Dn.slice(2,-2);return{type:"strong",raw:Dn,text:on,tokens:this.lexer.inlineTokens(on)}}}}codespan(H){const W=this.rules.inline.code.exec(H);if(W){let K=W[2].replace(/\n/g," ");const Q=/[^ ]/.test(K),ie=/^ /.test(K)&&/ $/.test(K);return Q&&ie&&(K=K.substring(1,K.length-1)),K=u(K,!0),{type:"codespan",raw:W[0],text:K}}}br(H){const W=this.rules.inline.br.exec(H);if(W)return{type:"br",raw:W[0]}}del(H){const W=this.rules.inline.del.exec(H);if(W)return{type:"del",raw:W[0],text:W[2],tokens:this.lexer.inlineTokens(W[2])}}autolink(H){const W=this.rules.inline.autolink.exec(H);if(W){let K,Q;return W[2]==="@"?(K=u(W[1]),Q="mailto:"+K):(K=u(W[1]),Q=K),{type:"link",raw:W[0],text:K,href:Q,tokens:[{type:"text",raw:K,text:K}]}}}url(H){var K;let W;if(W=this.rules.inline.url.exec(H)){let Q,ie;if(W[2]==="@")Q=u(W[0]),ie="mailto:"+Q;else{let me;do me=W[0],W[0]=((K=this.rules.inline._backpedal.exec(W[0]))==null?void 0:K[0])??"";while(me!==W[0]);Q=u(W[0]),W[1]==="www."?ie="http://"+W[0]:ie=W[0]}return{type:"link",raw:W[0],text:Q,href:ie,tokens:[{type:"text",raw:Q,text:Q}]}}}inlineText(H){const W=this.rules.inline.text.exec(H);if(W){let K;return this.lexer.state.inRawBlock?K=W[0]:K=u(W[0]),{type:"text",raw:W[0],text:K}}}}const w=/^(?: *(?:\n|$))+/,x=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,k=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,E=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,L=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,M=/(?:[*+-]|\d{1,9}[.)])/,D=h(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,M).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),O=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,A=/^[^\n]+/,R=/(?!\s*\])(?:\\.|[^\[\]\\])+/,V=h(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",R).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),F=h(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,M).getRegex(),T="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",N=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,B=h("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",N).replace("tag",T).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$=h(O).replace("hr",E).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex(),Y={blockquote:h(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$).getRegex(),code:x,def:V,fences:k,heading:L,hr:E,html:B,lheading:D,list:F,newline:w,paragraph:$,table:g,text:A},G=h("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",E).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex(),X={...Y,table:G,paragraph:h(O).replace("hr",E).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",G).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex()},q={...Y,html:h(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",N).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:g,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h(O).replace("hr",E).replace("heading",` *#{1,6} *[^
]`).replace("lheading",D).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},re=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ge=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ye=/^( {2,}|\\)\n(?!\s*$)/,we=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ie="\\p{P}\\p{S}",Fe=h(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ie).getRegex(),ze=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Me=h(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ie).getRegex(),Pe=h("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ie).getRegex(),tt=h("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ie).getRegex(),Ae=h(/\\([punct])/,"gu").replace(/punct/g,Ie).getRegex(),mt=h(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ft=h(N).replace("(?:-->|$)","-->").getRegex(),Le=h("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ft).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ge=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Oe=h(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ge).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),xe=h(/^!?\[(label)\]\[(ref)\]/).replace("label",Ge).replace("ref",R).getRegex(),at=h(/^!?\[(ref)\](?:\[\])?/).replace("ref",R).getRegex(),gt=h("reflink|nolink(?!\\()","g").replace("reflink",xe).replace("nolink",at).getRegex(),Ct={_backpedal:g,anyPunctuation:Ae,autolink:mt,blockSkip:ze,br:ye,code:ge,del:g,emStrongLDelim:Me,emStrongRDelimAst:Pe,emStrongRDelimUnd:tt,escape:re,link:Oe,nolink:at,punctuation:Fe,reflink:xe,reflinkSearch:gt,tag:Le,text:we,url:g},nt={...Ct,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",Ge).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ge).getRegex()},se={...Ct,escape:h(re).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},fe={...se,br:h(ye).replace("{2,}","*").getRegex(),text:h(se.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ne={normal:Y,gfm:X,pedantic:q},Ve={normal:Ct,gfm:se,breaks:fe,pedantic:nt};class lt{constructor(H){Bi(this,"tokens");Bi(this,"options");Bi(this,"state");Bi(this,"tokenizer");Bi(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=H||e.defaults,this.options.tokenizer=this.options.tokenizer||new C,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const W={block:Ne.normal,inline:Ve.normal};this.options.pedantic?(W.block=Ne.pedantic,W.inline=Ve.pedantic):this.options.gfm&&(W.block=Ne.gfm,this.options.breaks?W.inline=Ve.breaks:W.inline=Ve.gfm),this.tokenizer.rules=W}static get rules(){return{block:Ne,inline:Ve}}static lex(H,W){return new lt(W).lex(H)}static lexInline(H,W){return new lt(W).inlineTokens(H)}lex(H){H=H.replace(/\r\n|\r/g,`
`),this.blockTokens(H,this.tokens);for(let W=0;W<this.inlineQueue.length;W++){const K=this.inlineQueue[W];this.inlineTokens(K.src,K.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(H,W=[],K=!1){this.options.pedantic?H=H.replace(/\t/g,"    ").replace(/^ +$/gm,""):H=H.replace(/^( *)(\t+)/gm,(Se,Ze,Je)=>Ze+"    ".repeat(Je.length));let Q,ie,me;for(;H;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(Se=>(Q=Se.call({lexer:this},H,W))?(H=H.substring(Q.raw.length),W.push(Q),!0):!1))){if(Q=this.tokenizer.space(H)){H=H.substring(Q.raw.length),Q.raw.length===1&&W.length>0?W[W.length-1].raw+=`
`:W.push(Q);continue}if(Q=this.tokenizer.code(H)){H=H.substring(Q.raw.length),ie=W[W.length-1],ie&&(ie.type==="paragraph"||ie.type==="text")?(ie.raw+=`
`+Q.raw,ie.text+=`
`+Q.text,this.inlineQueue[this.inlineQueue.length-1].src=ie.text):W.push(Q);continue}if(Q=this.tokenizer.fences(H)){H=H.substring(Q.raw.length),W.push(Q);continue}if(Q=this.tokenizer.heading(H)){H=H.substring(Q.raw.length),W.push(Q);continue}if(Q=this.tokenizer.hr(H)){H=H.substring(Q.raw.length),W.push(Q);continue}if(Q=this.tokenizer.blockquote(H)){H=H.substring(Q.raw.length),W.push(Q);continue}if(Q=this.tokenizer.list(H)){H=H.substring(Q.raw.length),W.push(Q);continue}if(Q=this.tokenizer.html(H)){H=H.substring(Q.raw.length),W.push(Q);continue}if(Q=this.tokenizer.def(H)){H=H.substring(Q.raw.length),ie=W[W.length-1],ie&&(ie.type==="paragraph"||ie.type==="text")?(ie.raw+=`
`+Q.raw,ie.text+=`
`+Q.raw,this.inlineQueue[this.inlineQueue.length-1].src=ie.text):this.tokens.links[Q.tag]||(this.tokens.links[Q.tag]={href:Q.href,title:Q.title});continue}if(Q=this.tokenizer.table(H)){H=H.substring(Q.raw.length),W.push(Q);continue}if(Q=this.tokenizer.lheading(H)){H=H.substring(Q.raw.length),W.push(Q);continue}if(me=H,this.options.extensions&&this.options.extensions.startBlock){let Se=1/0;const Ze=H.slice(1);let Je;this.options.extensions.startBlock.forEach(wt=>{Je=wt.call({lexer:this},Ze),typeof Je=="number"&&Je>=0&&(Se=Math.min(Se,Je))}),Se<1/0&&Se>=0&&(me=H.substring(0,Se+1))}if(this.state.top&&(Q=this.tokenizer.paragraph(me))){ie=W[W.length-1],K&&(ie==null?void 0:ie.type)==="paragraph"?(ie.raw+=`
`+Q.raw,ie.text+=`
`+Q.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ie.text):W.push(Q),K=me.length!==H.length,H=H.substring(Q.raw.length);continue}if(Q=this.tokenizer.text(H)){H=H.substring(Q.raw.length),ie=W[W.length-1],ie&&ie.type==="text"?(ie.raw+=`
`+Q.raw,ie.text+=`
`+Q.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ie.text):W.push(Q);continue}if(H){const Se="Infinite loop on byte: "+H.charCodeAt(0);if(this.options.silent){console.error(Se);break}else throw new Error(Se)}}return this.state.top=!0,W}inline(H,W=[]){return this.inlineQueue.push({src:H,tokens:W}),W}inlineTokens(H,W=[]){let K,Q,ie,me=H,Se,Ze,Je;if(this.tokens.links){const wt=Object.keys(this.tokens.links);if(wt.length>0)for(;(Se=this.tokenizer.rules.inline.reflinkSearch.exec(me))!=null;)wt.includes(Se[0].slice(Se[0].lastIndexOf("[")+1,-1))&&(me=me.slice(0,Se.index)+"["+"a".repeat(Se[0].length-2)+"]"+me.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Se=this.tokenizer.rules.inline.blockSkip.exec(me))!=null;)me=me.slice(0,Se.index)+"["+"a".repeat(Se[0].length-2)+"]"+me.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Se=this.tokenizer.rules.inline.anyPunctuation.exec(me))!=null;)me=me.slice(0,Se.index)+"++"+me.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;H;)if(Ze||(Je=""),Ze=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(wt=>(K=wt.call({lexer:this},H,W))?(H=H.substring(K.raw.length),W.push(K),!0):!1))){if(K=this.tokenizer.escape(H)){H=H.substring(K.raw.length),W.push(K);continue}if(K=this.tokenizer.tag(H)){H=H.substring(K.raw.length),Q=W[W.length-1],Q&&K.type==="text"&&Q.type==="text"?(Q.raw+=K.raw,Q.text+=K.text):W.push(K);continue}if(K=this.tokenizer.link(H)){H=H.substring(K.raw.length),W.push(K);continue}if(K=this.tokenizer.reflink(H,this.tokens.links)){H=H.substring(K.raw.length),Q=W[W.length-1],Q&&K.type==="text"&&Q.type==="text"?(Q.raw+=K.raw,Q.text+=K.text):W.push(K);continue}if(K=this.tokenizer.emStrong(H,me,Je)){H=H.substring(K.raw.length),W.push(K);continue}if(K=this.tokenizer.codespan(H)){H=H.substring(K.raw.length),W.push(K);continue}if(K=this.tokenizer.br(H)){H=H.substring(K.raw.length),W.push(K);continue}if(K=this.tokenizer.del(H)){H=H.substring(K.raw.length),W.push(K);continue}if(K=this.tokenizer.autolink(H)){H=H.substring(K.raw.length),W.push(K);continue}if(!this.state.inLink&&(K=this.tokenizer.url(H))){H=H.substring(K.raw.length),W.push(K);continue}if(ie=H,this.options.extensions&&this.options.extensions.startInline){let wt=1/0;const zt=H.slice(1);let Zt;this.options.extensions.startInline.forEach(Dn=>{Zt=Dn.call({lexer:this},zt),typeof Zt=="number"&&Zt>=0&&(wt=Math.min(wt,Zt))}),wt<1/0&&wt>=0&&(ie=H.substring(0,wt+1))}if(K=this.tokenizer.inlineText(ie)){H=H.substring(K.raw.length),K.raw.slice(-1)!=="_"&&(Je=K.raw.slice(-1)),Ze=!0,Q=W[W.length-1],Q&&Q.type==="text"?(Q.raw+=K.raw,Q.text+=K.text):W.push(K);continue}if(H){const wt="Infinite loop on byte: "+H.charCodeAt(0);if(this.options.silent){console.error(wt);break}else throw new Error(wt)}}return W}}class Dt{constructor(H){Bi(this,"options");Bi(this,"parser");this.options=H||e.defaults}space(H){return""}code({text:H,lang:W,escaped:K}){var me;const Q=(me=(W||"").match(/^\S*/))==null?void 0:me[0],ie=H.replace(/\n$/,"")+`
`;return Q?'<pre><code class="language-'+u(Q)+'">'+(K?ie:u(ie,!0))+`</code></pre>
`:"<pre><code>"+(K?ie:u(ie,!0))+`</code></pre>
`}blockquote({tokens:H}){return`<blockquote>
${this.parser.parse(H)}</blockquote>
`}html({text:H}){return H}heading({tokens:H,depth:W}){return`<h${W}>${this.parser.parseInline(H)}</h${W}>
`}hr(H){return`<hr>
`}list(H){const W=H.ordered,K=H.start;let Q="";for(let Se=0;Se<H.items.length;Se++){const Ze=H.items[Se];Q+=this.listitem(Ze)}const ie=W?"ol":"ul",me=W&&K!==1?' start="'+K+'"':"";return"<"+ie+me+`>
`+Q+"</"+ie+`>
`}listitem(H){let W="";if(H.task){const K=this.checkbox({checked:!!H.checked});H.loose?H.tokens.length>0&&H.tokens[0].type==="paragraph"?(H.tokens[0].text=K+" "+H.tokens[0].text,H.tokens[0].tokens&&H.tokens[0].tokens.length>0&&H.tokens[0].tokens[0].type==="text"&&(H.tokens[0].tokens[0].text=K+" "+H.tokens[0].tokens[0].text)):H.tokens.unshift({type:"text",raw:K+" ",text:K+" "}):W+=K+" "}return W+=this.parser.parse(H.tokens,!!H.loose),`<li>${W}</li>
`}checkbox({checked:H}){return"<input "+(H?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:H}){return`<p>${this.parser.parseInline(H)}</p>
`}table(H){let W="",K="";for(let ie=0;ie<H.header.length;ie++)K+=this.tablecell(H.header[ie]);W+=this.tablerow({text:K});let Q="";for(let ie=0;ie<H.rows.length;ie++){const me=H.rows[ie];K="";for(let Se=0;Se<me.length;Se++)K+=this.tablecell(me[Se]);Q+=this.tablerow({text:K})}return Q&&(Q=`<tbody>${Q}</tbody>`),`<table>
<thead>
`+W+`</thead>
`+Q+`</table>
`}tablerow({text:H}){return`<tr>
${H}</tr>
`}tablecell(H){const W=this.parser.parseInline(H.tokens),K=H.header?"th":"td";return(H.align?`<${K} align="${H.align}">`:`<${K}>`)+W+`</${K}>
`}strong({tokens:H}){return`<strong>${this.parser.parseInline(H)}</strong>`}em({tokens:H}){return`<em>${this.parser.parseInline(H)}</em>`}codespan({text:H}){return`<code>${H}</code>`}br(H){return"<br>"}del({tokens:H}){return`<del>${this.parser.parseInline(H)}</del>`}link({href:H,title:W,tokens:K}){const Q=this.parser.parseInline(K),ie=f(H);if(ie===null)return Q;H=ie;let me='<a href="'+H+'"';return W&&(me+=' title="'+W+'"'),me+=">"+Q+"</a>",me}image({href:H,title:W,text:K}){const Q=f(H);if(Q===null)return K;H=Q;let ie=`<img src="${H}" alt="${K}"`;return W&&(ie+=` title="${W}"`),ie+=">",ie}text(H){return"tokens"in H&&H.tokens?this.parser.parseInline(H.tokens):H.text}}class Qt{strong({text:H}){return H}em({text:H}){return H}codespan({text:H}){return H}del({text:H}){return H}html({text:H}){return H}text({text:H}){return H}link({text:H}){return""+H}image({text:H}){return""+H}br(){return""}}class he{constructor(H){Bi(this,"options");Bi(this,"renderer");Bi(this,"textRenderer");this.options=H||e.defaults,this.options.renderer=this.options.renderer||new Dt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Qt}static parse(H,W){return new he(W).parse(H)}static parseInline(H,W){return new he(W).parseInline(H)}parse(H,W=!0){let K="";for(let Q=0;Q<H.length;Q++){const ie=H[Q];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ie.type]){const Se=ie,Ze=this.options.extensions.renderers[Se.type].call({parser:this},Se);if(Ze!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Se.type)){K+=Ze||"";continue}}const me=ie;switch(me.type){case"space":{K+=this.renderer.space(me);continue}case"hr":{K+=this.renderer.hr(me);continue}case"heading":{K+=this.renderer.heading(me);continue}case"code":{K+=this.renderer.code(me);continue}case"table":{K+=this.renderer.table(me);continue}case"blockquote":{K+=this.renderer.blockquote(me);continue}case"list":{K+=this.renderer.list(me);continue}case"html":{K+=this.renderer.html(me);continue}case"paragraph":{K+=this.renderer.paragraph(me);continue}case"text":{let Se=me,Ze=this.renderer.text(Se);for(;Q+1<H.length&&H[Q+1].type==="text";)Se=H[++Q],Ze+=`
`+this.renderer.text(Se);W?K+=this.renderer.paragraph({type:"paragraph",raw:Ze,text:Ze,tokens:[{type:"text",raw:Ze,text:Ze}]}):K+=Ze;continue}default:{const Se='Token with "'+me.type+'" type was not found.';if(this.options.silent)return console.error(Se),"";throw new Error(Se)}}}return K}parseInline(H,W){W=W||this.renderer;let K="";for(let Q=0;Q<H.length;Q++){const ie=H[Q];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ie.type]){const Se=this.options.extensions.renderers[ie.type].call({parser:this},ie);if(Se!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ie.type)){K+=Se||"";continue}}const me=ie;switch(me.type){case"escape":{K+=W.text(me);break}case"html":{K+=W.html(me);break}case"link":{K+=W.link(me);break}case"image":{K+=W.image(me);break}case"strong":{K+=W.strong(me);break}case"em":{K+=W.em(me);break}case"codespan":{K+=W.codespan(me);break}case"br":{K+=W.br(me);break}case"del":{K+=W.del(me);break}case"text":{K+=W.text(me);break}default:{const Se='Token with "'+me.type+'" type was not found.';if(this.options.silent)return console.error(Se),"";throw new Error(Se)}}}return K}}class Ke{constructor(H){Bi(this,"options");this.options=H||e.defaults}preprocess(H){return H}postprocess(H){return H}processAllTokens(H){return H}}Bi(Ke,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class ue{constructor(...H){Bi(this,"defaults",t());Bi(this,"options",this.setOptions);Bi(this,"parse",this.parseMarkdown(lt.lex,he.parse));Bi(this,"parseInline",this.parseMarkdown(lt.lexInline,he.parseInline));Bi(this,"Parser",he);Bi(this,"Renderer",Dt);Bi(this,"TextRenderer",Qt);Bi(this,"Lexer",lt);Bi(this,"Tokenizer",C);Bi(this,"Hooks",Ke);this.use(...H)}walkTokens(H,W){var Q,ie;let K=[];for(const me of H)switch(K=K.concat(W.call(this,me)),me.type){case"table":{const Se=me;for(const Ze of Se.header)K=K.concat(this.walkTokens(Ze.tokens,W));for(const Ze of Se.rows)for(const Je of Ze)K=K.concat(this.walkTokens(Je.tokens,W));break}case"list":{const Se=me;K=K.concat(this.walkTokens(Se.items,W));break}default:{const Se=me;(ie=(Q=this.defaults.extensions)==null?void 0:Q.childTokens)!=null&&ie[Se.type]?this.defaults.extensions.childTokens[Se.type].forEach(Ze=>{const Je=Se[Ze].flat(1/0);K=K.concat(this.walkTokens(Je,W))}):Se.tokens&&(K=K.concat(this.walkTokens(Se.tokens,W)))}}return K}use(...H){const W=this.defaults.extensions||{renderers:{},childTokens:{}};return H.forEach(K=>{const Q={...K};if(Q.async=this.defaults.async||Q.async||!1,K.extensions&&(K.extensions.forEach(ie=>{if(!ie.name)throw new Error("extension name required");if("renderer"in ie){const me=W.renderers[ie.name];me?W.renderers[ie.name]=function(...Se){let Ze=ie.renderer.apply(this,Se);return Ze===!1&&(Ze=me.apply(this,Se)),Ze}:W.renderers[ie.name]=ie.renderer}if("tokenizer"in ie){if(!ie.level||ie.level!=="block"&&ie.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const me=W[ie.level];me?me.unshift(ie.tokenizer):W[ie.level]=[ie.tokenizer],ie.start&&(ie.level==="block"?W.startBlock?W.startBlock.push(ie.start):W.startBlock=[ie.start]:ie.level==="inline"&&(W.startInline?W.startInline.push(ie.start):W.startInline=[ie.start]))}"childTokens"in ie&&ie.childTokens&&(W.childTokens[ie.name]=ie.childTokens)}),Q.extensions=W),K.renderer){const ie=this.defaults.renderer||new Dt(this.defaults);for(const me in K.renderer){if(!(me in ie))throw new Error(`renderer '${me}' does not exist`);if(["options","parser"].includes(me))continue;const Se=me,Ze=K.renderer[Se],Je=ie[Se];ie[Se]=(...wt)=>{let zt=Ze.apply(ie,wt);return zt===!1&&(zt=Je.apply(ie,wt)),zt||""}}Q.renderer=ie}if(K.tokenizer){const ie=this.defaults.tokenizer||new C(this.defaults);for(const me in K.tokenizer){if(!(me in ie))throw new Error(`tokenizer '${me}' does not exist`);if(["options","rules","lexer"].includes(me))continue;const Se=me,Ze=K.tokenizer[Se],Je=ie[Se];ie[Se]=(...wt)=>{let zt=Ze.apply(ie,wt);return zt===!1&&(zt=Je.apply(ie,wt)),zt}}Q.tokenizer=ie}if(K.hooks){const ie=this.defaults.hooks||new Ke;for(const me in K.hooks){if(!(me in ie))throw new Error(`hook '${me}' does not exist`);if(me==="options")continue;const Se=me,Ze=K.hooks[Se],Je=ie[Se];Ke.passThroughHooks.has(me)?ie[Se]=wt=>{if(this.defaults.async)return Promise.resolve(Ze.call(ie,wt)).then(Zt=>Je.call(ie,Zt));const zt=Ze.call(ie,wt);return Je.call(ie,zt)}:ie[Se]=(...wt)=>{let zt=Ze.apply(ie,wt);return zt===!1&&(zt=Je.apply(ie,wt)),zt}}Q.hooks=ie}if(K.walkTokens){const ie=this.defaults.walkTokens,me=K.walkTokens;Q.walkTokens=function(Se){let Ze=[];return Ze.push(me.call(this,Se)),ie&&(Ze=Ze.concat(ie.call(this,Se))),Ze}}this.defaults={...this.defaults,...Q}}),this}setOptions(H){return this.defaults={...this.defaults,...H},this}lexer(H,W){return lt.lex(H,W??this.defaults)}parser(H,W){return he.parse(H,W??this.defaults)}parseMarkdown(H,W){return(Q,ie)=>{const me={...ie},Se={...this.defaults,...me},Ze=this.onError(!!Se.silent,!!Se.async);if(this.defaults.async===!0&&me.async===!1)return Ze(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof Q>"u"||Q===null)return Ze(new Error("marked(): input parameter is undefined or null"));if(typeof Q!="string")return Ze(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Q)+", string expected"));if(Se.hooks&&(Se.hooks.options=Se),Se.async)return Promise.resolve(Se.hooks?Se.hooks.preprocess(Q):Q).then(Je=>H(Je,Se)).then(Je=>Se.hooks?Se.hooks.processAllTokens(Je):Je).then(Je=>Se.walkTokens?Promise.all(this.walkTokens(Je,Se.walkTokens)).then(()=>Je):Je).then(Je=>W(Je,Se)).then(Je=>Se.hooks?Se.hooks.postprocess(Je):Je).catch(Ze);try{Se.hooks&&(Q=Se.hooks.preprocess(Q));let Je=H(Q,Se);Se.hooks&&(Je=Se.hooks.processAllTokens(Je)),Se.walkTokens&&this.walkTokens(Je,Se.walkTokens);let wt=W(Je,Se);return Se.hooks&&(wt=Se.hooks.postprocess(wt)),wt}catch(Je){return Ze(Je)}}}onError(H,W){return K=>{if(K.message+=`
Please report this to https://github.com/markedjs/marked.`,H){const Q="<p>An error occurred:</p><pre>"+u(K.message+"",!0)+"</pre>";return W?Promise.resolve(Q):Q}if(W)return Promise.reject(K);throw K}}}const ee=new ue;function oe(be,H){return ee.parse(be,H)}oe.options=oe.setOptions=function(be){return ee.setOptions(be),oe.defaults=ee.defaults,i(oe.defaults),oe},oe.getDefaults=t,oe.defaults=e.defaults,oe.use=function(...be){return ee.use(...be),oe.defaults=ee.defaults,i(oe.defaults),oe},oe.walkTokens=function(be,H){return ee.walkTokens(be,H)},oe.parseInline=ee.parseInline,oe.Parser=he,oe.parser=he.parse,oe.Renderer=Dt,oe.TextRenderer=Qt,oe.Lexer=lt,oe.lexer=lt.lex,oe.Tokenizer=C,oe.Hooks=Ke,oe.parse=oe;const pe=oe.options,le=oe.setOptions,ve=oe.use,He=oe.walkTokens,Qe=oe.parseInline,ut=oe,St=he.parse,Lt=lt.lex;e.Hooks=Ke,e.Lexer=lt,e.Marked=ue,e.Parser=he,e.Renderer=Dt,e.TextRenderer=Qt,e.Tokenizer=C,e.getDefaults=t,e.lexer=Lt,e.marked=oe,e.options=pe,e.parse=ut,e.parseInline=Qe,e.parser=St,e.setOptions=le,e.use=ve,e.walkTokens=He})})();Xr.Hooks||exports.Hooks;Xr.Lexer||exports.Lexer;Xr.Marked||exports.Marked;Xr.Parser||exports.Parser;var hfe=Xr.Renderer||exports.Renderer;Xr.TextRenderer||exports.TextRenderer;Xr.Tokenizer||exports.Tokenizer;var ZXe=Xr.defaults||exports.defaults;Xr.getDefaults||exports.getDefaults;var iM=Xr.lexer||exports.lexer;Xr.marked||exports.marked;Xr.options||exports.options;var ffe=Xr.parse||exports.parse;Xr.parseInline||exports.parseInline;var XXe=Xr.parser||exports.parser;Xr.setOptions||exports.setOptions;Xr.use||exports.use;Xr.walkTokens||exports.walkTokens;function QXe(n){return JSON.stringify(n,JXe)}function Y8(n){let e=JSON.parse(n);return e=Z8(e),e}function JXe(n,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function Z8(n,e=0){if(!n||e>200)return n;if(typeof n=="object"){switch(n.$mid){case 1:return Ut.revive(n);case 2:return new RegExp(n.source,n.flags);case 17:return new Date(n.source)}if(n instanceof WH||n instanceof Uint8Array)return n;if(Array.isArray(n))for(let t=0;t<n.length;++t)n[t]=Z8(n[t],e+1);else for(const t in n)Object.hasOwnProperty.call(n,t)&&(n[t]=Z8(n[t],e+1))}return n}const lA=Object.freeze({image:({href:n,title:e,text:t})=>{let i=[],r=[];return n&&({href:n,dimensions:i}=YXe(n),r.push(`src="${ok(n)}"`)),t&&r.push(`alt="${ok(t)}"`),e&&r.push(`title="${ok(e)}"`),i.length&&(r=r.concat(i)),"<img "+r.join(" ")+">"},paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>`},link({href:n,title:e,tokens:t}){let i=this.parser.parseInline(t);return typeof n!="string"?"":(n===i&&(i=aA(i)),e=typeof e=="string"?ok(aA(e)):"",n=aA(n),n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${n}" title="${e||n}" draggable="false">${i}</a>`)}});function hV(n,e={},t={}){const i=new dt;let r=!1;const s=oV(e),o=function(p){let v;try{v=Y8(decodeURIComponent(p))}catch{}return v?(v=Nue(v,b=>{if(n.uris&&n.uris[b])return Ut.revive(n.uris[b])}),encodeURIComponent(JSON.stringify(v))):p},a=function(p,v){const b=n.uris&&n.uris[p];let _=Ut.revive(b);return v?p.startsWith(Wt.data+":")?p:(_||(_=Ut.parse(p)),RD.uriToBrowserUri(_).toString(!0)):!_||Ut.parse(p).toString()===_.toString()?p:(_.query&&(_=_.with({query:o(_.query)})),_.toString())},l=new hfe;l.image=lA.image,l.link=lA.link,l.paragraph=lA.paragraph;const c=[],u=[];if(e.codeBlockRendererSync?l.code=({text:p,lang:v})=>{const b=PZ.nextId(),_=e.codeBlockRendererSync(FZ(v),p);return u.push([b,_]),`<div class="code" data-code="${b}">${gC(p)}</div>`}:e.codeBlockRenderer&&(l.code=({text:p,lang:v})=>{const b=PZ.nextId(),_=e.codeBlockRenderer(FZ(v),p);return c.push(_.then(y=>[b,y])),`<div class="code" data-code="${b}">${gC(p)}</div>`}),e.actionHandler){const p=function(_){let y=_.target;if(!(y.tagName!=="A"&&(y=y.parentElement,!y||y.tagName!=="A")))try{let C=y.dataset.href;C&&(n.baseUri&&(C=cA(Ut.from(n.baseUri),C)),e.actionHandler.callback(C,_))}catch(C){$n(C)}finally{_.preventDefault()}},v=e.actionHandler.disposables.add(new qt(s,"click")),b=e.actionHandler.disposables.add(new qt(s,"auxclick"));e.actionHandler.disposables.add(Be.any(v.event,b.event)(_=>{const y=new nc(bt(s),_);!y.leftButton&&!y.middleButton||p(y)})),e.actionHandler.disposables.add(_e(s,"keydown",_=>{const y=new ii(_);!y.equals(10)&&!y.equals(3)||p(y)}))}n.supportHtml||(l.html=({text:p})=>{var b;return(b=e.sanitizerOptions)!=null&&b.replaceWithPlaintext?gC(p):(n.isTrusted?p.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?p:""}),t.renderer=l;let d=n.value??"";d.length>1e5&&(d=`${d.substr(0,1e5)}`),n.supportThemeIcons&&(d=HXe(d));let h;if(e.fillInIncompleteTokens){const p={...ZXe,...t},v=iM(d,p),b=hQe(v);h=XXe(b,p)}else h=ffe(d,{...t,async:!1});n.supportThemeIcons&&(h=vp(h).map(v=>typeof v=="string"?v:v.outerHTML).join(""));const g=new DOMParser().parseFromString(X8({isTrusted:n.isTrusted,...e.sanitizerOptions},h),"text/html");if(g.body.querySelectorAll("img, audio, video, source").forEach(p=>{const v=p.getAttribute("src");if(v){let b=v;try{n.baseUri&&(b=cA(Ut.from(n.baseUri),b))}catch{}if(p.setAttribute("src",a(b,!0)),e.remoteImageIsAllowed){const _=Ut.parse(b);_.scheme!==Wt.file&&_.scheme!==Wt.data&&!e.remoteImageIsAllowed(_)&&p.replaceWith(xt("",void 0,p.outerHTML))}}}),g.body.querySelectorAll("a").forEach(p=>{const v=p.getAttribute("href");if(p.setAttribute("href",""),!v||/^data:|javascript:/i.test(v)||/^command:/i.test(v)&&!n.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(v))p.replaceWith(...p.childNodes);else{let b=a(v,!1);n.baseUri&&(b=cA(Ut.from(n.baseUri),v)),p.dataset.href=b}}),s.innerHTML=X8({isTrusted:n.isTrusted,...e.sanitizerOptions},g.body.innerHTML),c.length>0)Promise.all(c).then(p=>{var _;if(r)return;const v=new Map(p),b=s.querySelectorAll("div[data-code]");for(const y of b){const C=v.get(y.dataset.code??"");C&&Fs(y,C)}(_=e.asyncRenderCallback)==null||_.call(e)});else if(u.length>0){const p=new Map(u),v=s.querySelectorAll("div[data-code]");for(const b of v){const _=p.get(b.dataset.code??"");_&&Fs(b,_)}}if(e.asyncRenderCallback)for(const p of s.getElementsByTagName("img")){const v=i.add(_e(p,"load",()=>{v.dispose(),e.asyncRenderCallback()}))}return{element:s,dispose:()=>{r=!0,i.dispose()}}}function FZ(n){if(!n)return"";const e=n.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:n}function cA(n,e){return/^\w[\w\d+.-]*:/.test(e)?e:n.path.endsWith("/")?RZ(n,e).toString():RZ(UXe(n),e).toString()}const eQe=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function X8(n,e){const{config:t,allowedSchemes:i}=nQe(n),r=new dt;r.add(BZ("uponSanitizeAttribute",(s,o)=>{var a;if(o.attrName==="style"||o.attrName==="class"){if(s.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}else if(s.tagName==="INPUT"&&((a=s.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"){if(o.attrName==="type"&&o.attrValue==="checkbox"||o.attrName==="disabled"||o.attrName==="checked"){o.keepAttr=!0;return}o.keepAttr=!1}})),r.add(BZ("uponSanitizeElement",(s,o)=>{var a;if(o.tagName==="input"&&(((a=s.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"?s.setAttribute("disabled",""):n.replaceWithPlaintext||s.remove()),n.replaceWithPlaintext&&!o.allowedTags[o.tagName]&&o.tagName!=="body"&&s.parentElement){let l,c;if(o.tagName==="#comment")l=`<!--${s.textContent}-->`;else{const f=eQe.includes(o.tagName),g=s.attributes.length?" "+Array.from(s.attributes).map(p=>`${p.name}="${p.value}"`).join(" "):"";l=`<${o.tagName}${g}>`,f||(c=`</${o.tagName}>`)}const u=document.createDocumentFragment(),d=s.parentElement.ownerDocument.createTextNode(l);u.appendChild(d);const h=c?s.parentElement.ownerDocument.createTextNode(c):void 0;for(;s.firstChild;)u.appendChild(s.firstChild);h&&u.appendChild(h),s.nodeType===Node.COMMENT_NODE?s.parentElement.insertBefore(u,s):s.parentElement.replaceChild(u,s)}})),r.add(Rje(i));try{return Cde(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{r.dispose()}}const tQe=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function nQe(n){const e=[Wt.http,Wt.https,Wt.mailto,Wt.data,Wt.file,Wt.vscodeFileResource,Wt.vscodeRemote,Wt.vscodeRemoteResource];return n.isTrusted&&e.push(Wt.command),{config:{ALLOWED_TAGS:n.allowedTags??[...Aje],ALLOWED_ATTR:tQe,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function iQe(n){return typeof n=="string"?n:rQe(n)}function rQe(n,e){let t=n.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}`);const i=ffe(t,{async:!1,renderer:aQe.value}).replace(/&(#\d+|[a-zA-Z]+);/g,r=>sQe.get(r)??r);return X8({isTrusted:!1},i).toString()}const sQe=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function oQe(){const n=new hfe;return n.code=({text:e})=>e,n.blockquote=({text:e})=>e+`
`,n.html=e=>"",n.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},n.hr=()=>"",n.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},n.listitem=({text:e})=>e+`
`,n.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},n.table=function({header:e,rows:t}){return e.map(i=>this.tablecell(i)).join(" ")+`
`+t.map(i=>i.map(r=>this.tablecell(r)).join(" ")).join(`
`)+`
`},n.tablerow=({text:e})=>e,n.tablecell=function({tokens:e}){return this.parser.parseInline(e)},n.strong=({text:e})=>e,n.em=({text:e})=>e,n.codespan=({text:e})=>e,n.br=e=>`
`,n.del=({text:e})=>e,n.image=e=>"",n.text=({text:e})=>e,n.link=({text:e})=>e,n}const aQe=new kf(n=>oQe());function lN(n){let e="";return n.forEach(t=>{e+=t.raw}),e}function gfe(n){var e,t;if(n.tokens)for(let i=n.tokens.length-1;i>=0;i--){const r=n.tokens[i];if(r.type==="text"){const s=r.raw.split(`
`),o=s[s.length-1];if(o.includes("`"))return gQe(n);if(o.includes("**"))return CQe(n);if(o.match(/\*\w/))return pQe(n);if(o.match(/(^|\s)__\w/))return yQe(n);if(o.match(/(^|\s)_\w/))return mQe(n);if(lQe(o)||cQe(o)&&n.tokens.slice(0,i).some(a=>a.type==="text"&&a.raw.match(/\[[^\]]*$/))){const a=n.tokens.slice(i+1);return((e=a[0])==null?void 0:e.type)==="link"&&((t=a[1])==null?void 0:t.type)==="text"&&a[1].raw.match(/^ *"[^"]*$/)||o.match(/^[^"]* +"[^"]*$/)?bQe(n):vQe(n)}else if(o.match(/(^|\s)\[\w*/))return _Qe(n)}}}function lQe(n){return!!n.match(/(^|\s)\[.*\]\(\w*/)}function cQe(n){return!!n.match(/^[^\[]*\]\([^\)]*$/)}function uQe(n){var l;const e=n.items[n.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0;let i;if((t==null?void 0:t.type)==="text"&&!("inRawBlock"in e)&&(i=gfe(t)),!i||i.type!=="paragraph")return;const r=lN(n.items.slice(0,-1)),s=(l=e.raw.match(/^(\s*(-|\d+\.|\*) +)/))==null?void 0:l[0];if(!s)return;const o=s+lN(e.tokens.slice(0,-1))+i.raw,a=iM(r+o)[0];if(a.type==="list")return a}const dQe=3;function hQe(n){for(let e=0;e<dQe;e++){const t=fQe(n);if(t)n=t;else break}return n}function fQe(n){let e,t;for(e=0;e<n.length;e++){const i=n[e];if(i.type==="paragraph"&&i.raw.match(/(\n|^)\|/)){t=wQe(n.slice(e));break}if(e===n.length-1&&i.type==="list"){const r=uQe(i);if(r){t=[r];break}}if(e===n.length-1&&i.type==="paragraph"){const r=gfe(i);if(r){t=[r];break}}}if(t){const i=[...n.slice(0,e),...t];return i.links=n.links,i}return null}function gQe(n){return Kf(n,"`")}function pQe(n){return Kf(n,"*")}function mQe(n){return Kf(n,"_")}function vQe(n){return Kf(n,")")}function bQe(n){return Kf(n,'")')}function _Qe(n){return Kf(n,"](https://microsoft.com)")}function CQe(n){return Kf(n,"**")}function yQe(n){return Kf(n,"__")}function Kf(n,e){const t=lN(Array.isArray(n)?n:[n]);return iM(t+e)[0]}function wQe(n){const e=lN(n),t=e.split(`
`);let i,r=!1;for(let s=0;s<t.length;s++){const o=t[s].trim();if(typeof i>"u"&&o.match(/^\s*\|/)){const a=o.match(/(\|[^\|]+)(?=\||$)/g);a&&(i=a.length)}else if(typeof i=="number")if(o.match(/^\s*\|/)){if(s!==t.length-1)return;r=!0}else return}if(typeof i=="number"&&i>0){const s=r?t.slice(0,-1).join(`
`):e,o=!!s.match(/\|\s*$/),a=s+(o?"":"|")+`
|${" --- |".repeat(i)}`;return iM(a)}}function BZ(n,e){return yde(n,e),Pt(()=>wde(n))}const Qu=class Qu{static createEmpty(e,t){const i=Qu.defaultTokenMetadata,r=new Uint32Array(2);return r[0]=e.length,r[1]=i,new Qu(r,e,t)}static createFromTextAndMetadata(e,t){let i=0,r="";const s=new Array;for(const{text:o,metadata:a}of e)s.push(i+o.length,a),i+=o.length,r+=o;return new Qu(new Uint32Array(s),r,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=i}equals(e){return e instanceof Qu?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const r=t<<1,s=r+(i<<1);for(let o=r;o<s;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=Yl.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Yl.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Yl.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Yl.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return Yl.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return Yl.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Qu.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new fV(this,e,t,i)}static convertToEndOffset(e,t){const r=(e.length>>>1)-1;for(let s=0;s<r;s++)e[s<<1]=e[s+1<<1];e[r<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,r=(e.length>>>1)-1;for(;i<r;){const s=i+Math.floor((r-i)/2),o=e[s<<1];if(o===t)return s+1;o<t?i=s+1:o>t&&(r=s)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,r="";const s=new Array;let o=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){r+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];s.push(r.length,c),t++,o=a}else if(l){if(l.offset>o){r+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];s.push(r.length,c),o=l.offset}r+=l.text,s.push(r.length,l.tokenMetadata),i++}else break}return new Qu(new Uint32Array(s),r,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),i=this.getEndOffset(e);return this._text.substring(t,i)}forEach(e){const t=this.getCount();for(let i=0;i<t;i++)e(i)}};Qu.defaultTokenMetadata=(32768|2<<24)>>>0;let Er=Qu;class fV{constructor(e,t,i,r){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=r,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let s=this._firstTokenIndex,o=e.getCount();s<o&&!(e.getStartOffset(s)>=i);s++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof fV?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,i=this._source.getStartOffset(t),r=this._source.getEndOffset(t);let s=this._source.getTokenText(t);return i<this._startOffset&&(s=s.substring(this._startOffset-i)),r>this._endOffset&&(s=s.substring(0,s.length-(r-this._endOffset))),s}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}const cw=new class{clone(){return this}equals(n){return this===n}};function pfe(n,e){return new vH([new Yy(0,"",n)],e)}function gV(n,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(n<<0|0|0|32768|2<<24)>>>0,new DD(t,e===null?cw:e)}const HZ={getInitialState:()=>cw,tokenizeEncoded:(n,e,t)=>gV(0,t)};async function SQe(n,e,t){if(!t)return VZ(e,n.languageIdCodec,HZ);const i=await Hi.getOrCreate(t);return VZ(e,n.languageIdCodec,i||HZ)}function xQe(n,e,t,i,r,s,o){let a="<div>",l=i,c=0,u=!0;for(let d=0,h=e.getCount();d<h;d++){const f=e.getEndOffset(d);if(f<=i)continue;let g="";for(;l<f&&l<r;l++){const p=n.charCodeAt(l);switch(p){case 9:{let v=s-(l+c)%s;for(c+=v-1;v>0;)o&&u?(g+="&#160;",u=!1):(g+=" ",u=!0),v--;break}case 60:g+="&lt;",u=!1;break;case 62:g+="&gt;",u=!1;break;case 38:g+="&amp;",u=!1;break;case 0:g+="&#00;",u=!1;break;case 65279:case 8232:case 8233:case 133:g+="",u=!1;break;case 13:g+="&#8203",u=!1;break;case 32:o&&u?(g+="&#160;",u=!1):(g+=" ",u=!0);break;default:g+=String.fromCharCode(p),u=!1}}if(a+=`<span style="${e.getInlineStyle(d,t)}">${g}</span>`,f>r||l>=r)break}return a+="</div>",a}function VZ(n,e,t){let i='<div class="monaco-tokenized-source">';const r=mb(n);let s=t.getInitialState();for(let o=0,a=r.length;o<a;o++){const l=r[o];o>0&&(i+="<br/>");const c=t.tokenizeEncoded(l,!0,s);Er.convertToEndOffset(c.tokens,l.length);const d=new Er(c.tokens,l,e).inflate();let h=0;for(let f=0,g=d.getCount();f<g;f++){const p=d.getClassName(f),v=d.getEndOffset(f);i+=`<span class="${p}">${gC(l.substring(h,v))}</span>`,h=v}s=c.endState}return i+="</div>",i}var kQe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},zZ=function(n,e){return function(t,i){e(t,i,n)}},Q8,xp;let J8=(xp=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new ae,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const r=new dt,s=r.add(hV(e,{...this._getRenderOptions(e,r),...t},i));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>r.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(i,r)=>{var l,c;let s;i?s=this._languageService.getLanguageIdByLanguageName(i):this._options.editor&&(s=(l=this._options.editor.getModel())==null?void 0:l.getLanguageId()),s||(s=gl);const o=await SQe(this._languageService,r,s),a=document.createElement("span");if(a.innerHTML=((c=Q8._ttpTokenizer)==null?void 0:c.createHTML(o))??o,this._options.editor){const u=this._options.editor.getOption(50);Gr(a,u)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>mfe(this._openerService,i,e.isTrusted),disposables:t}}}},Q8=xp,xp._ttpTokenizer=Sm("tokenizeToString",{createHTML(e){return e}}),xp);J8=Q8=kQe([zZ(1,br),zZ(2,SS)],J8);async function mfe(n,e,t){try{return await n.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:EQe(t)})}catch(i){return $n(i),!1}}function EQe(n){return n===!0?!0:n&&Array.isArray(n.enabledCommands)?n.enabledCommands:!1}const Lc=cn("accessibilityService"),LQe=new ht("accessibilityModeEnabled",!1),WZ=2e4;let kg,EE,e6,LE,t6;function NQe(n){kg=document.createElement("div"),kg.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),kg.appendChild(i),i};EE=e(),e6=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),kg.appendChild(i),i};LE=t(),t6=t(),n.appendChild(kg)}function uw(n){kg&&(EE.textContent!==n?(pc(e6),uN(EE,n)):(pc(EE),uN(e6,n)))}function cN(n){kg&&(LE.textContent!==n?(pc(t6),uN(LE,n)):(pc(LE),uN(t6,n)))}function uN(n,e){pc(n),e.length>WZ&&(e=e.substr(0,WZ)),n.textContent=e,n.style.visibility="hidden",n.style.visibility="visible"}var TQe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},o_=function(n,e){return function(t,i){e(t,i,n)}};const Dc=xt;let n6=class extends Xd{get _targetWindow(){return bt(this._target.targetElements[0])}get _targetDocumentElement(){return bt(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,r,s,o){var h,f,g,p,v,b,_;super(),this._keybindingService=t,this._configurationService=i,this._openerService=r,this._instantiationService=s,this._accessibilityService=o,this._messageListeners=new dt,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new ae),this._onRequestLayout=this._register(new ae),this._linkHandler=e.linkHandler||(y=>mfe(this._openerService,y,P0(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new IQe(e.target),this._hoverPointer=(h=e.appearance)!=null&&h.showPointer?Dc("div.workbench-hover-pointer"):void 0,this._hover=this._register(new cXe),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(f=e.appearance)!=null&&f.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),(g=e.appearance)!=null&&g.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),(p=e.position)!=null&&p.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=((v=e.position)==null?void 0:v.hoverPosition)??3,this.onmousedown(this._hover.containerDomNode,y=>y.stopPropagation()),this.onkeydown(this._hover.containerDomNode,y=>{y.equals(9)&&this.dispose()}),this._register(_e(this._targetWindow,"blur",()=>this.dispose()));const a=Dc("div.hover-row.markdown-hover"),l=Dc("div.hover-contents");if(typeof e.content=="string")l.textContent=e.content,l.style.whiteSpace="pre-wrap";else if(kr(e.content))l.appendChild(e.content),l.classList.add("html-hover-contents");else{const y=e.content,C=this._instantiationService.createInstance(J8,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||la.fontFamily}),{element:w}=C.render(y,{actionHandler:{callback:x=>this._linkHandler(x),disposables:this._messageListeners},asyncRenderCallback:()=>{l.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});l.appendChild(w)}if(a.appendChild(l),this._hover.contentsDomNode.appendChild(a),e.actions&&e.actions.length>0){const y=Dc("div.hover-row.status-bar"),C=Dc("div.actions");e.actions.forEach(w=>{const x=this._keybindingService.lookupKeybinding(w.commandId),k=x?x.getLabel():null;sV.render(C,{label:w.label,commandId:w.commandId,run:E=>{w.run(E),this.dispose()},iconClass:w.iconClass},k)}),y.appendChild(C),this._hover.containerDomNode.appendChild(y)}this._hoverContainer=Dc("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let c;if(e.actions&&e.actions.length>0?c=!1:((b=e.persistence)==null?void 0:b.hideOnHover)===void 0?c=typeof e.content=="string"||P0(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):c=e.persistence.hideOnHover,(_=e.appearance)!=null&&_.showHoverHint){const y=Dc("div.hover-row.status-bar"),C=Dc("div.info");C.textContent=S("hoverhint","Hold {0} key to mouse over",hn?"Option":"Alt"),y.appendChild(C),this._hover.containerDomNode.appendChild(y)}const u=[...this._target.targetElements];c||u.push(this._hoverContainer);const d=this._register(new $Z(u));if(this._register(d.onMouseOut(()=>{this._isLocked||this.dispose()})),c){const y=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new $Z(y)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=d}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=OH(this._hoverContainer,Dc("div")),r=ct(this._hoverContainer,Dc("div"));i.tabIndex=0,r.tabIndex=0,this._register(_e(r,"focus",s=>{e.focus(),s.preventDefault()})),this._register(_e(i,"focus",s=>{t.focus(),s.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const s=i;if(typeof s.tabIndex=="number"&&s.tabIndex>=0)return s}const r=this.findLastFocusableChild(i);if(r)return r}}render(e){var r;e.appendChild(this._hoverContainer);const i=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&uXe(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(r=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:r.getAriaLabel());i&&cN(i),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=u=>{const d=Lde(u),h=u.getBoundingClientRect();return{top:h.top*d,bottom:h.bottom*d,right:h.right*d,left:h.left*d}},t=this._target.targetElements.map(u=>e(u)),{top:i,right:r,bottom:s,left:o}=t[0],a=r-o,l=s-i,c={top:i,right:r,bottom:s,left:o,width:a,height:l,center:{x:o+a/2,y:i+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-i}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-i}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-i):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const i=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const r=this._x+i;(r<e.left||r>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};n6=TQe([o_(1,Wr),o_(2,Ti),o_(3,SS),o_(4,Fn),o_(5,Lc)],n6);class $Z extends Xd{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new ae),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=bt(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(bt(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class IQe{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var Ur;(function(n){function e(s,o){if(s.start>=o.end||o.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,o.start),l=Math.min(s.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}n.intersect=e;function t(s){return s.end-s.start<=0}n.isEmpty=t;function i(s,o){return!t(e(s,o))}n.intersects=i;function r(s,o){const a=[],l={start:s.start,end:Math.min(o.start,s.end)},c={start:Math.max(o.end,s.start),end:s.end};return t(l)||a.push(l),t(c)||a.push(c),a}n.relativeComplement=r})(Ur||(Ur={}));function DQe(n){const e=n;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var Gh;(function(n){n[n.AVOID=0]="AVOID",n[n.ALIGN=1]="ALIGN"})(Gh||(Gh={}));function Wv(n,e,t){const i=t.mode===Gh.ALIGN?t.offset:t.offset+t.size,r=t.mode===Gh.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=n-i?i:e<=r?r-e:Math.max(n-e,0):e<=r?r-e:e<=n-i?i:0}const l0=class l0 extends ke{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=ke.None,this.toDisposeOnSetContainer=ke.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=xt(".context-view"),sY(this.view),this.setContainer(e,t),this._register(Pt(()=>this.setContainer(null,1)))}setContainer(e,t){var r;this.useFixedPosition=t!==1;const i=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&i===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,(r=this.shadowRootHostElement)==null||r.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=xt(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=MQe,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(xt("slot"))}else this.container.appendChild(this.view);const s=new dt;l0.BUBBLE_UP_EVENTS.forEach(o=>{s.add(vr(this.container,o,a=>{this.onDOMEvent(a,!1)}))}),l0.BUBBLE_DOWN_EVENTS.forEach(o=>{s.add(vr(this.container,o,a=>{this.onDOMEvent(a,!0)},!0))}),this.toDisposeOnSetContainer=s}}show(e){var t,i;this.isVisible()&&this.hide(),pc(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",Mde(this.view),this.toDisposeOnClean=e.render(this.view)||ke.None,this.delegate=e,this.doLayout(),(i=(t=this.delegate).focus)==null||i.call(t)}getViewElement(){return this.view}layout(){var e,t;if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Yp&&cde.pointerEvents)){this.hide();return}(t=(e=this.delegate)==null?void 0:e.layout)==null||t.call(e),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(kr(e)){const h=Ta(e),f=Lde(e);t={top:h.top*f,left:h.left*f,width:h.width*f,height:h.height*f}}else DQe(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const i=DH(this.view),r=n8(this.view),s=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const u=L_();if(a===0){const h={offset:t.top-u.pageYOffset,size:t.height,position:s===0?0:1},f={offset:t.left,size:t.width,position:o===0?0:1,mode:Gh.ALIGN};l=Wv(u.innerHeight,r,h)+u.pageYOffset,Ur.intersects({start:l,end:l+r},{start:h.offset,end:h.offset+h.size})&&(f.mode=Gh.AVOID),c=Wv(u.innerWidth,i,f)}else{const h={offset:t.left,size:t.width,position:o===0?0:1},f={offset:t.top,size:t.height,position:s===0?0:1,mode:Gh.ALIGN};c=Wv(u.innerWidth,i,h),Ur.intersects({start:c,end:c+i},{start:h.offset,end:h.offset+h.size})&&(f.mode=Gh.AVOID),l=Wv(u.innerHeight,r,f)+u.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=Ta(this.container);this.view.style.top=`${l-(this.useFixedPosition?Ta(this.view).top:d.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Ta(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),sY(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,bt(e).document.activeElement):t&&!mr(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};l0.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],l0.BUBBLE_DOWN_EVENTS=["click"];let i6=l0;const MQe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var RQe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},AQe=function(n,e){return function(t,i){e(t,i,n)}};let dN=class extends ke{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new i6(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let r;t?t===this.layoutService.getContainer(bt(t))?r=1:i?r=3:r=2:r=1,this.contextView.setContainer(t??this.layoutService.activeContainer,r),this.contextView.show(e);const s={close:()=>{this.openContextView===s&&this.hideContextView()}};return this.openContextView=s,s}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};dN=RQe([AQe(0,jf)],dN);class OQe extends dN{getContextViewElement(){return this.contextView.getViewElement()}}class PQe{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let r;if(e===void 0||aa(e)||kr(e))r=e;else if(!LL(e.markdown))r=e.markdown??e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(S("iconLabel.loading","Loading..."),t,i),this._cancellationTokenSource=new pb;const s=this._cancellationTokenSource.token;if(r=await e.markdown(s),r===void 0&&(r=e.markdownNotSupportedFallback),this.isDisposed||s.isCancellationRequested)return}this.show(r,t,i)}show(e,t,i){var s;const r=this._hoverWidget;if(this.hasContent(e)){const o={content:e,target:this.target,actions:i==null?void 0:i.actions,linkHandler:i==null?void 0:i.linkHandler,trapFocus:i==null?void 0:i.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!r,showHoverHint:(s=i==null?void 0:i.appearance)==null?void 0:s.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(o,t)}r==null||r.dispose()}hasContent(e){return e?P0(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)==null?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)==null||e.dispose(),(t=this._cancellationTokenSource)==null||t.dispose(!0),this._cancellationTokenSource=void 0}}var FQe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},a_=function(n,e){return function(t,i){e(t,i,n)}};let r6=class extends ke{constructor(e,t,i,r,s){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=r,this._accessibilityService=s,this._managedHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new dN(this._layoutService))}showHover(e,t,i){var l,c,u,d;if(UZ(this._currentHoverOptions)===UZ(e)||this._currentHover&&((c=(l=this._currentHoverOptions)==null?void 0:l.persistence)!=null&&c.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const r=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),s=_s();i||(r&&s?s.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=s):this._lastFocusedElementBeforeOpen=void 0);const o=new dt,a=this._instantiationService.createInstance(n6,e);if((u=e.persistence)!=null&&u.sticky&&(a.isLocked=!0),a.onDispose(()=>{var f,g;((f=this._currentHover)==null?void 0:f.domNode)&&Tde(this._currentHover.domNode)&&((g=this._lastFocusedElementBeforeOpen)==null||g.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),o.dispose()},void 0,o),!e.container){const h=kr(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(bt(h))}if(this._contextViewHandler.showContextView(new BQe(a,t),e.container),a.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,o),(d=e.persistence)!=null&&d.sticky)o.add(_e(bt(e.container).document,We.MOUSE_DOWN,h=>{mr(h.target,a.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const f of e.target.targetElements)o.add(_e(f,We.CLICK,()=>this.hideHover()));else o.add(_e(e.target,We.CLICK,()=>this.hideHover()));const h=_s();if(h){const f=bt(h).document;o.add(_e(h,We.KEY_DOWN,g=>{var p;return this._keyDown(g,a,!!((p=e.persistence)!=null&&p.hideOnKeyDown))})),o.add(_e(f,We.KEY_DOWN,g=>{var p;return this._keyDown(g,a,!!((p=e.persistence)!=null&&p.hideOnKeyDown))})),o.add(_e(h,We.KEY_UP,g=>this._keyUp(g,a))),o.add(_e(f,We.KEY_UP,g=>this._keyUp(g,a)))}}if("IntersectionObserver"in zn){const h=new IntersectionObserver(g=>this._intersectionChange(g,a),{threshold:0}),f="targetElements"in e.target?e.target.targetElements[0]:e.target;h.observe(f),o.add(Pt(()=>h.disconnect()))}return this._currentHover=a,a}hideHover(){var e;(e=this._currentHover)!=null&&e.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){var o,a;if(e.key==="Alt"){t.isLocked=!0;return}const r=new ii(e);this._keybindingService.resolveKeyboardEvent(r).getSingleModifierDispatchChords().some(l=>!!l)||this._keybindingService.softDispatch(r,r.target).kind!==0||i&&(!((o=this._currentHoverOptions)!=null&&o.trapFocus)||e.key!=="Tab")&&(this.hideHover(),(a=this._lastFocusedElementBeforeOpen)==null||a.focus())}_keyUp(e,t){var i;e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),(i=this._lastFocusedElementBeforeOpen)==null||i.focus()))}setupManagedHover(e,t,i,r){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let s,o;const a=(y,C)=>{var x;const w=o!==void 0;y&&(o==null||o.dispose(),o=void 0),C&&(s==null||s.dispose(),s=void 0),w&&((x=e.onDidHideHover)==null||x.call(e),o=void 0)},l=(y,C,w,x)=>new vm(async()=>{(!o||o.isDisposed)&&(o=new PQe(e,w||t,y>0),await o.update(typeof i=="function"?i():i,C,{...r,trapFocus:x}))},y);let c=!1;const u=_e(t,We.MOUSE_DOWN,()=>{c=!0,a(!0,!0)},!0),d=_e(t,We.MOUSE_UP,()=>{c=!1},!0),h=_e(t,We.MOUSE_LEAVE,y=>{c=!1,a(!1,y.fromElement===t)},!0),f=y=>{if(s)return;const C=new dt,w={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const x=k=>{w.x=k.x+10,kr(k.target)&&jZ(k.target,t)!==t&&a(!0,!0)};C.add(_e(t,We.MOUSE_MOVE,x,!0))}s=C,!(kr(y.target)&&jZ(y.target,t)!==t)&&C.add(l(e.delay,!1,w))},g=_e(t,We.MOUSE_OVER,f,!0),p=()=>{if(c||s)return;const y={targetElements:[t],dispose:()=>{}},C=new dt,w=()=>a(!0,!0);C.add(_e(t,We.BLUR,w,!0)),C.add(l(e.delay,!1,y)),s=C};let v;const b=t.tagName.toLowerCase();b!=="input"&&b!=="textarea"&&(v=_e(t,We.FOCUS,p,!0));const _={show:y=>{a(!1,!0),l(0,y,void 0,y)},hide:()=>{a(!0,!0)},update:async(y,C)=>{i=y,await(o==null?void 0:o.update(i,void 0,C))},dispose:()=>{this._managedHovers.delete(t),g.dispose(),h.dispose(),u.dispose(),d.dispose(),v==null||v.dispose(),a(!0,!0)}};return this._managedHovers.set(t,_),_}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};r6=FQe([a_(0,Fn),a_(1,Zd),a_(2,Wr),a_(3,jf),a_(4,Lc)],r6);function UZ(n){if(n!==void 0)return(n==null?void 0:n.id)??n}class BQe{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function jZ(n,e){for(e=e??bt(n).document.body;!n.hasAttribute("custom-hover")&&n!==e;)n=n.parentElement;return n}yn(yS,r6,1);Yd((n,e)=>{const t=n.getColor(SYe);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const HQe=cn("IWorkspaceEditService");class pV{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(bp.is(t))return bp.lift(t);if(F0.is(t))return F0.lift(t);throw new Error("Unsupported edit")})}}class bp extends pV{static is(e){return e instanceof bp?!0:no(e)&&Ut.isUri(e.resource)&&no(e.textEdit)}static lift(e){return e instanceof bp?e:new bp(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,r){super(r),this.resource=e,this.textEdit=t,this.versionId=i}}class F0 extends pV{static is(e){return e instanceof F0?!0:no(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof F0?e:new F0(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},r){super(r),this.oldResource=e,this.newResource=t,this.options=i}}const Ir={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},VQe=Object.freeze({id:"editor",order:5,type:"object",title:S("editorConfigurationTitle","Editor"),scope:5}),hN={...VQe,properties:{"editor.tabSize":{type:"number",default:Kr.tabSize,minimum:1,markdownDescription:S("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:S("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Kr.insertSpaces,markdownDescription:S("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Kr.detectIndentation,markdownDescription:S("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Kr.trimAutoWhitespace,description:S("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Kr.largeFileOptimizations,description:S("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[S("wordBasedSuggestions.off","Turn off Word Based Suggestions."),S("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),S("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),S("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:S("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[S("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),S("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),S("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:S("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:S("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:S("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:S("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:S("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:S("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:S("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:S("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:S("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:S("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:S("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:S("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:S("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:Ir.maxComputationTime,description:S("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:Ir.maxFileSize,description:S("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:Ir.renderSideBySide,description:S("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:Ir.renderSideBySideInlineBreakpoint,description:S("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:Ir.useInlineViewWhenSpaceIsLimited,description:S("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:Ir.renderMarginRevertIcon,description:S("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:Ir.renderGutterMenu,description:S("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:Ir.ignoreTrimWhitespace,description:S("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:Ir.renderIndicators,description:S("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:Ir.diffCodeLens,description:S("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:Ir.diffWordWrap,markdownEnumDescriptions:[S("wordWrap.off","Lines will never wrap."),S("wordWrap.on","Lines will wrap at the viewport width."),S("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:Ir.diffAlgorithm,markdownEnumDescriptions:[S("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),S("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:Ir.hideUnchangedRegions.enabled,markdownDescription:S("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:Ir.hideUnchangedRegions.revealLineCount,markdownDescription:S("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:Ir.hideUnchangedRegions.minimumLineCount,markdownDescription:S("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:Ir.hideUnchangedRegions.contextLineCount,markdownDescription:S("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:Ir.experimental.showMoves,markdownDescription:S("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:Ir.experimental.showEmptyDecorations,description:S("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:Ir.experimental.useTrueInlineView,description:S("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function zQe(n){return typeof n.type<"u"||typeof n.anyOf<"u"}for(const n of Rv){const e=n.schema;if(typeof e<"u")if(zQe(e))hN.properties[`editor.${n.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(hN.properties[t]=e[t])}let ak=null;function vfe(){return ak===null&&(ak=Object.create(null),Object.keys(hN.properties).forEach(n=>{ak[n]=!0})),ak}function WQe(n){return vfe()[`editor.${n}`]||!1}function $Qe(n){return vfe()[`diffEditor.${n}`]||!1}const UQe=Lr.as(xm.Configuration);UQe.registerConfiguration(hN);class jQe{static insert(e,t){return{range:new te(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function lk(n){return Object.isFrozen(n)?n:dWe(n)}class xr{static createEmptyModel(e){return new xr({},[],[],void 0,e)}constructor(e,t,i,r,s){this._contents=e,this._keys=t,this._overrides=i,this.raw=r,this.logService=s,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if((e=this.raw)!=null&&e.length){const t=this.raw.map(i=>{if(i instanceof xr)return i;const r=new KQe("",this.logService);return r.parseRaw(i),r.configurationModel});this._rawConfiguration=t.reduce((i,r)=>r===i?r:i.merge(r),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?_Y(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return lk(i.rawConfiguration.getValue(e))},get override(){return t?lk(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return lk(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const r=[];for(const{contents:s,identifiers:o,keys:a}of i.rawConfiguration.overrides){const l=new xr(s,a,[],void 0,i.logService).getValue(e);l!==void 0&&r.push({identifiers:o,value:l})}return r.length?lk(r):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?_Y(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var o,a;const t=bh(this.contents),i=bh(this.overrides),r=[...this.keys],s=(o=this.raw)!=null&&o.length?[...this.raw]:[this];for(const l of e)if(s.push(...(a=l.raw)!=null&&a.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(t,l.contents);for(const c of l.overrides){const[u]=i.filter(d=>rr(d.identifiers,c.identifiers));u?(this.mergeContents(u.contents,c.contents),u.keys.push(...c.keys),u.keys=Gp(u.keys)):i.push(bh(c))}for(const c of l.keys)r.indexOf(c)===-1&&r.push(c)}return new xr(t,r,i,s.every(l=>l instanceof xr)?void 0:s,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const r of Gp([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[r];const o=t[r];o&&(typeof s=="object"&&typeof o=="object"?(s=bh(s),this.mergeContents(s,o)):s=o),i[r]=s}return new xr(i,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&no(e[i])&&no(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=bh(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const r=s=>{s&&(i?this.mergeContents(i,s):i=bh(s))};for(const s of this.overrides)s.identifiers.length===1&&s.identifiers[0]===e?t=s.contents:s.identifiers.includes(e)&&r(s.contents);return r(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),KKe(this.contents,e),Lf.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>rr(i.identifiers,$L(e))),1))}updateValue(e,t,i){if(Yde(this.contents,e,t,r=>this.logService.error(r)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),Lf.test(e)){const r=$L(e),s={identifiers:r,keys:Object.keys(this.contents[e]),contents:h8(this.contents[e],a=>this.logService.error(a))},o=this.overrides.findIndex(a=>rr(a.identifiers,r));o!==-1?this.overrides[o]=s:this.overrides.push(s)}}}class KQe{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||xr.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:i,keys:r,overrides:s,restricted:o,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new xr(i,r,s,a?[e]:void 0,this.logService),this._restrictedConfigurations=o||[]}doParseRaw(e,t){const i=Lr.as(xm.Configuration).getConfigurationProperties(),r=this.filter(e,i,!0,t);e=r.raw;const s=h8(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),o=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:s,keys:o,overrides:a,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}filter(e,t,i,r){var l,c,u;let s=!1;if(!(r!=null&&r.scopes)&&!(r!=null&&r.skipRestricted)&&!((l=r==null?void 0:r.exclude)!=null&&l.length))return{raw:e,restricted:[],hasExcludedProperties:s};const o={},a=[];for(const d in e)if(Lf.test(d)&&i){const h=this.filter(e[d],t,!1,r);o[d]=h.raw,s=s||h.hasExcludedProperties,a.push(...h.restricted)}else{const h=t[d],f=h?typeof h.scope<"u"?h.scope:3:void 0;h!=null&&h.restricted&&a.push(d),!((c=r.exclude)!=null&&c.includes(d))&&((u=r.include)!=null&&u.includes(d)||(f===void 0||r.scopes===void 0||r.scopes.includes(f))&&!(r.skipRestricted&&(h!=null&&h.restricted)))?o[d]=e[d]:s=!0}return{raw:o,restricted:a,hasExcludedProperties:s}}toOverrides(e,t){const i=[];for(const r of Object.keys(e))if(Lf.test(r)){const s={};for(const o in e[r])s[o]=e[r][o];i.push({identifiers:$L(r),keys:Object.keys(s),contents:h8(s,t)})}return i}}class qQe{constructor(e,t,i,r,s,o,a,l,c,u,d,h,f){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=r,this.defaultConfiguration=s,this.policyConfiguration=o,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=u,this.workspaceConfiguration=d,this.folderConfigurationModel=h,this.memoryConfigurationModel=f}toInspectValue(e){return(e==null?void 0:e.value)!==void 0||(e==null?void 0:e.override)!==void 0||(e==null?void 0:e.overrides)!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class rM{constructor(e,t,i,r,s,o,a,l,c,u){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=r,this._remoteUserConfiguration=s,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=u,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new ca,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let r;i.resource?(r=this._memoryConfigurationByResource.get(i.resource),r||(r=xr.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(i.resource,r))):r=this._memoryConfiguration,t===void 0?r.removeValue(e):r.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const r=this.getConsolidatedConfigurationModel(e,t,i),s=this.getFolderConfigurationModelForResource(t.resource,i),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of r.overrides)for(const c of l.identifiers)r.getOverrideValue(e,c)!==void 0&&a.add(c);return new qQe(e,t,r.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,s||void 0,o)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let r=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(r=r.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(r=r.merge(this._policyConfiguration)),r}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const r=t.getFolder(e);r&&(i=this.getFolderConsolidatedConfiguration(r.uri)||i);const s=this._memoryConfigurationByResource.get(e);s&&(i=i.merge(s))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(e);r?(t=i.merge(r),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:r,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:r,keys:s}]),e},[])}}static parse(e,t){const i=this.parseConfigurationModel(e.defaults,t),r=this.parseConfigurationModel(e.policy,t),s=this.parseConfigurationModel(e.application,t),o=this.parseConfigurationModel(e.user,t),a=this.parseConfigurationModel(e.workspace,t),l=e.folders.reduce((c,u)=>(c.set(Ut.revive(u[0]),this.parseConfigurationModel(u[1],t)),c),new ca);return new rM(i,r,s,o,xr.createEmptyModel(t),a,l,xr.createEmptyModel(t),new ca,t)}static parseConfigurationModel(e,t){return new xr(e.contents,e.keys,e.overrides,void 0,t)}}class GQe{constructor(e,t,i,r,s){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=r,this.logService=s,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const o of e.keys)this.affectedKeys.add(o);for(const[,o]of e.overrides)for(const a of o)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const o of this.affectedKeys)this._affectsConfigStr+=o+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=rM.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){var a;const i=this._marker+e,r=this._affectsConfigStr.indexOf(i);if(r<0)return!1;const s=r+i.length;if(s>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(s);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(a=this.previous)==null?void 0:a.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!No(l,c)}return!0}}class YQe{constructor(){this._onDidChange=new ae,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const yC=new YQe,fN={kind:0},ZQe={kind:1};function XQe(n,e,t){return{kind:2,commandId:n,commandArgs:e,isBubble:t}}class wC{constructor(e,t,i){var r;this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const s of e){const o=s.command;o&&o.charAt(0)!=="-"&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=wC.handleRemovals([].concat(e).concat(t));for(let s=0,o=this._keybindings.length;s<o;s++){const a=this._keybindings[s];if(a.chords.length===0)continue;const l=(r=a.when)==null?void 0:r.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,i){if(t){for(let r=0;r<t.length;r++)if(t[r]!==e.chords[r])return!1}return!(i&&i.type!==1&&(!e.when||!sKe(i,e.when)))}static handleRemovals(e){const t=new Map;for(let r=0,s=e.length;r<s;r++){const o=e[r];if(o.command&&o.command.charAt(0)==="-"){const a=o.command.substring(1);t.has(a)?t.get(a).push(o):t.set(a,[o])}}if(t.size===0)return e;const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];if(!o.command||o.command.length===0){i.push(o);continue}if(o.command.charAt(0)==="-")continue;const a=t.get(o.command);if(!a||!o.isDefault){i.push(o);continue}let l=!1;for(const c of a){const u=c.when;if(this._isTargetedForRemoval(o,c.chords,u)){l=!0;break}}if(!l){i.push(o);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.command===t.command)continue;let o=!0;for(let a=1;a<s.chords.length&&a<t.chords.length;a++)if(s.chords[a]!==t.chords[a]){o=!1;break}o&&wC.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,r=t.length;i<r;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:l8(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i>"u"||i.length===0)return null;if(i.length===1)return i[0];for(let r=i.length-1;r>=0;r--){const s=i[r];if(t.contextMatchesRules(s.when))return s}return i[i.length-1]}resolve(e,t,i){const r=[...t,i];this._log(`| Resolving ${r}`);const s=this._map.get(r[0]);if(s===void 0)return this._log("\\ No keybinding entries."),fN;let o=null;if(r.length<2)o=s;else{o=[];for(let l=0,c=s.length;l<c;l++){const u=s[l];if(r.length>u.chords.length)continue;let d=!0;for(let h=1;h<r.length;h++)if(u.chords[h]!==r[h]){d=!1;break}d&&o.push(u)}}const a=this._findCommand(e,o);return a?r.length<a.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${a.chords.length-r.length} more chord(s), when: ${KZ(a.when)}, source: ${qZ(a)}.`),ZQe):(this._log(`\\ From ${o.length} keybinding entries, matched ${a.command}, when: ${KZ(a.when)}, source: ${qZ(a)}.`),XQe(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),fN)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const r=t[i];if(wC._contextMatchesRules(e,r.when))return r}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function KZ(n){return n?`${n.serialize()}`:"no when condition"}function qZ(n){return n.extensionId?n.isBuiltinExtension?`built-in extension ${n.extensionId}`:`user extension ${n.extensionId}`:n.isDefault?"built-in":"user"}const QQe=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class JQe extends ke{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Be.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,r,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=r,this._logService=s,this._onDidUpdateKeybindings=this._register(new ae),this._currentChords=[],this._currentChordChecker=new EH,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=$v.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new vm,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),fN;const[r]=i.getDispatchChords();if(r===null)return this._log("\\ Keyboard event cannot be dispatched"),fN;const s=this._contextKeyService.getContext(t),o=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(s,o,r)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw hH("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(S("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const i=this._currentChords.map(({label:r})=>r).join(", ");this._currentChordStatusMessage=this._notificationService.status(S("next.chord","({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),yC.enabled&&yC.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],yC.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[r]=i.getSingleModifierDispatchChords();if(r)return this._ignoreSingleModifiers.has(r)?(this._log(`+ Ignoring single modifier ${r} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=$v.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=$v.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${r}.`),this._currentSingleModifier=r,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):r===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${r} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=i.getChords();return this._ignoreSingleModifiers=new $v(s),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let r=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let s=null,o=null;if(i){const[u]=e.getSingleModifierDispatchChords();s=u,o=u?[u]:[]}else[s]=e.getDispatchChords(),o=this._currentChords.map(({keypress:u})=>u);if(s===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),r;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,s);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const u=this._currentChords.map(({label:d})=>d).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${u}, ${l}".`),this._notificationService.status(S("missing.chord","The key combination ({0}, {1}) is not a command.",u,l),{hideAfter:10*1e3}),this._leaveChordMode(),r=!0}return r}case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),r=!0,this._expectAnotherChord(s,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),r;case 2:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const u=this._currentChords.map(({label:d})=>d).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${u}, ${l}".`),this._notificationService.status(S("missing.chord","The key combination ({0}, {1}) is not a command.",u,l),{hideAfter:10*1e3}),this._leaveChordMode(),r=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(r=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,u=>this._notificationService.warn(u)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,u=>this._notificationService.warn(u))}finally{this._currentlyDispatchingCommandId=null}QQe.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return r}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}const TT=class TT{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};TT.EMPTY=new TT(null);let $v=TT;class GZ{constructor(e,t,i,r,s,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?s6(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=s6(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=r,this.isDefault=s,this.extensionId=o,this.isBuiltinExtension=a}}function s6(n){const e=[];for(let t=0,i=n.length;t<i;t++){const r=n[t];if(!r)return[];e.push(r)}return e}class sM{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=i(a);if(l===null)return null;r[s]=iJe(a,l,this.modifierLabels[e])}return r.join(" ")}}const mV=new sM({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:S({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:S({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:S({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:S({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),eJe=new sM({ctrlKey:S({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:S({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:S({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:S({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:S({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:S({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:S({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),tJe=new sM({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),nJe=new sM({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function iJe(n,e,t){if(e===null)return"";const i=[];return n.ctrlKey&&i.push(t.ctrlKey),n.shiftKey&&i.push(t.shiftKey),n.altKey&&i.push(t.altKey),n.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class rJe extends NUe{constructor(e,t){if(super(),t.length===0)throw ID("chords");this._os=e,this._chords=t}getLabel(){return mV.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return eJe.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:tJe.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return nJe.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new LUe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class dw extends rJe{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return rd.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":rd.toString(e.keyCode)}_getElectronAccelerator(e){return rd.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=rd.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return dw.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=rd.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=mH[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof Xp)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Xp(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=s6(e.chords.map(r=>this._toKeyCodeChord(r)));return i.length>0?[new dw(i,t)]:[]}}const sJe=cn("labelService"),oJe=cn("progressService"),Hz=class Hz{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};Hz.None=Object.freeze({report(){}});let YZ=Hz;const vV=cn("editorProgressService");class aJe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class lJe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?bH(e,this._value,0,e.length,this._from,this._to):uS(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class cJe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?bH(e,this._value,0,e.length,this._from,this._to):uS(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class uJe{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new cJe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return WG(e,this._value.scheme);if(this._states[this._stateIdx]===2)return WG(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return W5(e,this._value.query);if(this._states[this._stateIdx]===5)return W5(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class ck{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e;return((e=this.left)==null?void 0:e.height)??0}get heightRight(){var e;return((e=this.right)==null?void 0:e.height)??0}}class SC{static forUris(e=()=>!1,t=()=>!1){return new SC(new uJe(e,t))}static forStrings(){return new SC(new aJe)}static forConfigKeys(){return new SC(new lJe)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let r;this._root||(this._root=new ck,this._root.segment=i.value());const s=[];for(r=this._root;;){const a=i.cmp(r.segment);if(a>0)r.left||(r.left=new ck,r.left.segment=i.value()),s.push([-1,r]),r=r.left;else if(a<0)r.right||(r.right=new ck,r.right.segment=i.value()),s.push([1,r]),r=r.right;else if(i.hasNext())i.next(),r.mid||(r.mid=new ck,r.mid.segment=i.value()),s.push([0,r]),r=r.mid;else break}const o=r.value;r.value=t,r.key=e;for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const u=s[a][0],d=s[a+1][0];if(u===1&&d===1)s[a][1]=l.rotateLeft();else if(u===-1&&d===-1)s[a][1]=l.rotateRight();else if(u===1&&d===-1)l.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=l.rotateLeft();else if(u===-1&&d===1)l.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return o}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const r=t.cmp(i.segment);if(r>0)i=i.left;else if(r<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),r=[];let s=this._root;for(;s;){const o=i.cmp(s.segment);if(o>0)r.push([-1,s]),s=s.left;else if(o<0)r.push([1,s]),s=s.right;else if(i.hasNext())i.next(),r.push([0,s]),s=s.mid;else break}if(s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const o=this._min(s.right);if(o.key){const{key:a,value:l,segment:c}=o;this._delete(o.key,!1),s.key=a,s.value=l,s.segment=c}}else{const o=s.left??s.right;if(r.length>0){const[a,l]=r[r.length-1];switch(a){case-1:l.left=o;break;case 0:l.mid=o;break;case 1:l.right=o;break}}else this._root=o}for(let o=r.length-1;o>=0;o--){const a=r[o][1];a.updateHeight();const l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),r[o][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),r[o][1]=a.rotateRight()),o>0)switch(r[o-1][0]){case-1:r[o-1][1].left=r[o][1];break;case 1:r[o-1][1].right=r[o][1];break;case 0:r[o-1][1].mid=r[o][1];break}else this._root=r[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,r;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),r=i.value||r,i=i.mid;else break}return i&&i.value||r}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let r=this._root;for(;r;){const s=i.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(i.hasNext())i.next(),r=r.mid;else return r.mid?this._entries(r.mid):t?r.value:void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const dJe=cn("contextService");class hJe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const fJe="code-workspace";S("codeWorkspace","Code Workspace");const gJe="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var ZZ;(function(n){n.inspectTokensAction=S("inspectTokens","Developer: Inspect Tokens")})(ZZ||(ZZ={}));var XZ;(function(n){n.gotoLineActionLabel=S("gotoLineActionLabel","Go to Line/Column...")})(XZ||(XZ={}));var QZ;(function(n){n.helpQuickAccessActionLabel=S("helpQuickAccess","Show all Quick Access Providers")})(QZ||(QZ={}));var JZ;(function(n){n.quickCommandActionLabel=S("quickCommandActionLabel","Command Palette"),n.quickCommandHelp=S("quickCommandActionHelp","Show And Run Commands")})(JZ||(JZ={}));var eX;(function(n){n.quickOutlineActionLabel=S("quickOutlineActionLabel","Go to Symbol..."),n.quickOutlineByCategoryActionLabel=S("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(eX||(eX={}));var o6;(function(n){n.editorViewAccessibleLabel=S("editorViewAccessibleLabel","Editor content")})(o6||(o6={}));var tX;(function(n){n.toggleHighContrast=S("toggleHighContrast","Toggle High Contrast Theme")})(tX||(tX={}));var a6;(function(n){n.bulkEditServiceSummary=S("bulkEditServiceSummary","Made {0} edits in {1} files")})(a6||(a6={}));const pJe=cn("workspaceTrustManagementService");let V1=[],bV=[],bfe=[];function uk(n,e=!1){mJe(n,!1,e)}function mJe(n,e,t){const i=vJe(n,e);V1.push(i),i.userConfigured?bfe.push(i):bV.push(i),t&&!i.userConfigured&&V1.forEach(r=>{r.mime===i.mime||r.userConfigured||(i.extension&&r.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&r.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&r.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&r.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function vJe(n,e){return{id:n.id,mime:n.mime,filename:n.filename,extension:n.extension,filepattern:n.filepattern,firstline:n.firstline,userConfigured:e,filenameLowercase:n.filename?n.filename.toLowerCase():void 0,extensionLowercase:n.extension?n.extension.toLowerCase():void 0,filepatternLowercase:n.filepattern?Ehe(n.filepattern.toLowerCase()):void 0,filepatternOnPath:n.filepattern?n.filepattern.indexOf(Ai.sep)>=0:!1}}function bJe(){V1=V1.filter(n=>n.userConfigured),bV=[]}function _Je(n,e){return CJe(n,e).map(t=>t.id)}function CJe(n,e){let t;if(n)switch(n.scheme){case Wt.file:t=n.fsPath;break;case Wt.data:{t=aN.parseMetaData(n).get(aN.META_DATA_LABEL);break}case Wt.vscodeNotebookCell:t=void 0;break;default:t=n.path}if(!t)return[{id:"unknown",mime:ad.unknown}];t=t.toLowerCase();const i=Gue(t),r=nX(t,i,bfe);if(r)return[r,{id:gl,mime:ad.text}];const s=nX(t,i,bV);if(s)return[s,{id:gl,mime:ad.text}];if(e){const o=yJe(e);if(o)return[o,{id:gl,mime:ad.text}]}return[{id:"unknown",mime:ad.unknown}]}function nX(n,e,t){var o;let i,r,s;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!r||l.filepattern.length>r.filepattern.length)){const c=l.filepatternOnPath?n:e;(o=l.filepatternLowercase)!=null&&o.call(l,c)&&(r=l)}l.extension&&(!s||l.extension.length>s.extension.length)&&e.endsWith(l.extensionLowercase)&&(s=l)}if(i)return i;if(r)return r;if(s)return s}function yJe(n){if(kH(n)&&(n=n.substr(1)),n.length>0)for(let e=V1.length-1;e>=0;e--){const t=V1[e];if(!t.firstline)continue;const i=n.match(t.firstline);if(i&&i.length>0)return t}}const dk=Object.prototype.hasOwnProperty,iX="vs.editor.nullLanguage";class wJe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(iX,0),this._register(gl,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||iX}}const ZC=class ZC extends ke{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new ae),this.onDidChange=this._onDidChange.event,ZC.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new wJe,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(D1.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){ZC.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},bJe();const e=[].concat(D1.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(r=>{this._lowercaseNameMap[r.toLowerCase()]=i.identifier}),i.mimetypes.forEach(r=>{this._mimeTypesMap[r]=i.identifier})}),Lr.as(xm.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;dk.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let r=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),r=t.mimetypes[0]),r||(r=`text/x-${i}`,e.mimetypes.push(r)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)uk({id:i,mime:r,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)uk({id:i,mime:r,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)uk({id:i,mime:r,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);pUe(l)||uk({id:i,mime:r,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(i);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);const o=s!==null&&s.length>0;if(!(o&&s[0]===null)){const a=(o?s[0]:null)||i;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?dk.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return dk.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&dk.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:_Je(e,t)}};ZC.instanceCount=0;let l6=ZC;const kl=(n,e)=>n===e;function SJe(n=kl){return(e,t)=>rr(e,t,n)}function rX(n,e,t){{const i=n;return(r,s)=>r==null||s===void 0||s===null?s===r:i(r,s)}}class Ws{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return xJe(e,this)}}const sX=new Map,c6=new WeakMap;function xJe(n,e){const t=c6.get(n);if(t)return t;const i=kJe(n,e);if(i){let r=sX.get(i)??0;r++,sX.set(i,r);const s=r===1?i:`${i}#${r}`;return c6.set(n,s),s}}function kJe(n,e){const t=c6.get(n);if(t)return t;const i=e.owner?LJe(e.owner)+".":"";let r;const s=e.debugNameSource;if(s!==void 0)if(typeof s=="function"){if(r=s(),r!==void 0)return i+r}else return i+s;const o=e.referenceFn;if(o!==void 0&&(r=_V(o),r!==void 0))return i+r;if(e.owner!==void 0){const a=EJe(e.owner,n);if(a!==void 0)return i+a}}function EJe(n,e){for(const t in n)if(n[t]===e)return t}const oX=new Map,aX=new WeakMap;function LJe(n){const e=aX.get(n);if(e)return e;const t=NJe(n);let i=oX.get(t)??0;i++,oX.set(t,i);const r=i===1?t:`${t}#${i}`;return aX.set(n,r),r}function NJe(n){const e=n.constructor;return e?e.name:"Object"}function _V(n){const e=n.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),r=i?i[1]:void 0;return r==null?void 0:r.trim()}let TJe;function _fe(){return TJe}let Cfe;function IJe(n){Cfe=n}let yfe;function DJe(n){yfe=n}let u6;function MJe(n){u6=n}class wfe{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,r=t===void 0?e:t;return u6({owner:i,debugName:()=>{const s=_V(r);if(s!==void 0)return s;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(r.toString());if(a)return`${this.debugName}.${a[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:r},s=>r(this.read(s),s))}flatten(){return u6({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(Cfe(this,t)),this}keepObserved(e){return e.add(yfe(this)),this}}class _b extends wfe{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function tr(n,e){const t=new xS(n,e);try{n(t)}finally{t.finish()}}let hk;function M_(n){if(hk)n(hk);else{const e=new xS(n,void 0);hk=e;try{n(e)}finally{e.finish(),hk=void 0}}}function CV(n,e,t){n?e(n):tr(e,t)}class xS{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():_V(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:i,observable:r}=e[t];i.endUpdate(r)}this.updatingObservers=null}}function mn(n,e){let t;return typeof n=="string"?t=new Ws(void 0,n,void 0):t=new Ws(n,void 0,void 0),new yV(t,e,kl)}class yV extends _b{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._value=t}get(){return this._value}set(e,t,i){var s;if(i===void 0&&this._equalityComparator(this._value,e))return;let r;t||(t=r=new xS(()=>{},()=>`Setting ${this.debugName}`));try{const o=this._value;this._setValue(e),(s=_fe())==null||s.handleObservableChanged(this,{oldValue:o,newValue:e,change:i,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,i)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function Sfe(n,e){let t;return typeof n=="string"?t=new Ws(void 0,n,void 0):t=new Ws(n,void 0,void 0),new RJe(t,e,kl)}class RJe extends yV{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)==null||e.dispose()}}function Ot(n,e){return e!==void 0?new z1(new Ws(n,void 0,e),e,void 0,void 0,void 0,kl):new z1(new Ws(void 0,void 0,n),n,void 0,void 0,void 0,kl)}function wV(n,e,t){return new AJe(new Ws(n,void 0,e),e,void 0,void 0,void 0,kl,t)}function oM(n,e){return new z1(new Ws(n.owner,n.debugName,n.debugReferenceFn),e,void 0,void 0,n.onLastObserverRemoved,n.equalsFn??kl)}MJe(oM);function Cb(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);const r=new dt;return new z1(new Ws(i,void 0,t),s=>(r.clear(),t(s,r)),void 0,void 0,()=>r.dispose(),kl)}function Wc(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);let r;return new z1(new Ws(i,void 0,t),s=>{r?r.clear():r=new dt;const o=t(s);return o&&r.add(o),o},void 0,void 0,()=>{r&&(r.dispose(),r=void 0)},kl)}class z1 extends _b{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r,s=void 0,o){var a;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=r,this._handleLastObserverRemoved=s,this._equalityComparator=o,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)==null?void 0:a.call(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)==null||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)==null?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var o;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=this.state!==0,i=this.value;this.state=3;const r=this.changeSummary;this.changeSummary=(o=this.createChangeSummary)==null?void 0:o.call(this);try{this.value=this._computeFn(this,r)}finally{for(const a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}if(t&&!this._equalityComparator(i,this.value))for(const a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const i of this.observers)i.handlePossibleChange(this);if(t)for(const i of this.observers)i.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const i of t)i.endUpdate(this)}em(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary):!0,r=this.state===3;if(i&&(this.state===1||r)&&(this.state=2,r))for(const s of this.observers)s.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class AJe extends z1{constructor(e,t,i,r,s=void 0,o,a){super(e,t,i,r,s,o),this.set=a}}function xn(n){return new cM(new Ws(void 0,void 0,n),n,void 0,void 0)}function aM(n,e){return new cM(new Ws(n.owner,n.debugName,n.debugReferenceFn??e),e,void 0,void 0)}function lM(n,e){return new cM(new Ws(n.owner,n.debugName,n.debugReferenceFn??e),e,n.createEmptyChangeSummary,n.handleChange)}function lc(n){const e=new dt,t=aM({owner:void 0,debugName:void 0,debugReferenceFn:n},i=>{e.clear(),n(i,e)});return Pt(()=>{t.dispose(),e.dispose()})}class cM{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r){var s;this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=r,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(s=this.createChangeSummary)==null?void 0:s.call(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var i,r;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){(i=_fe())==null||i.handleAutorunTriggered(this);const s=this.changeSummary;this.changeSummary=(r=this.createChangeSummary)==null?void 0:r.call(this),this._runFn(this,s)}}finally{for(const s of this.dependenciesToBeRemoved)s.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,em(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(n){n.Observer=cM})(xn||(xn={}));function gN(n){return new OJe(n)}class OJe extends wfe{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function Ei(...n){let e,t,i;return n.length===3?[e,t,i]=n:[t,i]=n,new Uv(new Ws(e,void 0,i),t,i,()=>Uv.globalTransaction,kl)}class Uv extends _b{constructor(e,t,i,r,s){super(),this._debugNameData=e,this.event=t,this._getValue=i,this._getTransaction=r,this._equalityComparator=s,this.hasValue=!1,this.handleEvent=o=>{const a=this._getValue(o),l=this.value;(!this.hasValue||!this._equalityComparator(l,a))&&(this.value=a,this.hasValue&&CV(this._getTransaction(),u=>{for(const d of this.observers)u.updateObserver(d,this),d.handleChange(this,void 0)},()=>{const u=this.getDebugName();return"Event fired"+(u?`: ${u}`:"")}),this.hasValue=!0)}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(n){n.Observer=Uv;function e(t,i){let r=!1;Uv.globalTransaction===void 0&&(Uv.globalTransaction=t,r=!0);try{i()}finally{r&&(Uv.globalTransaction=void 0)}}n.batchEventsGlobally=e})(Ei||(Ei={}));function xa(n,e){return new PJe(n,e)}class PJe extends _b{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{tr(i=>{for(const r of this.observers)i.updateObserver(r,this),r.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function SV(n){return typeof n=="string"?new lX(n):new lX(void 0,n)}class lX extends _b{get debugName(){return new Ws(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){tr(i=>{this.trigger(i,t)},()=>`Trigger signal ${this.debugName}`);return}for(const i of this.observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}}function FJe(n){const e=new xfe(!1,void 0);return n.addObserver(e),Pt(()=>{n.removeObserver(e)})}DJe(FJe);function uM(n,e){const t=new xfe(!0,e);return n.addObserver(t),e?e(n.get()):n.reportChanges(),Pt(()=>{n.removeObserver(t)})}IJe(uM);class xfe{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function BJe(n,e){let t;return oM({owner:n,debugReferenceFn:e},r=>(t=e(r,t),t))}function HJe(n,e){return BJe(n,(t,i)=>i??e(t))}function VJe(n,e,t,i){return e||(e=r=>r!=null),new Promise((r,s)=>{let o=!0,a=!1;const l=n.map(u=>({isFinished:e(u),error:!1,state:u})),c=xn(u=>{const{isFinished:d,error:h,state:f}=l.read(u);(d||h)&&(o?a=!0:c.dispose(),h?s(h===!0?f:h):r(f))});o=!1,a&&c.dispose()})}class zJe extends _b{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,i){if(i===void 0&&this._equalityComparator(this._value,e))return;let r;t||(t=r=new xS(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),i!==void 0&&this._deltas.push(i),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(s,o)=>{},handlePossibleChange:s=>{}},this),this._updateCounter>1)for(const s of this.observers)s.handlePossibleChange(this)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function d6(n,e){return n.lazy?new zJe(new Ws(n.owner,n.debugName,void 0),e,n.equalsFn??kl):new yV(new Ws(n.owner,n.debugName,void 0),e,n.equalsFn??kl)}const XC=class XC extends ke{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new ae),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new ae),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new ae({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,XC.instanceCount++,this._registry=this._register(new l6(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){XC.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return sH(i,null)}createById(e){return new cX(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new cX(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=gl),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Hi.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};XC.instanceCount=0;let h6=XC;class cX{constructor(e,t){this._value=Ei(this,e,()=>t()),this.onDidChange=Be.fromObservable(this._value)}get languageId(){return this._value.get()}}const kfe={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:ad.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},WJe=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let dM=WJe;const $Je=new kf(()=>dM("mouse",!1)),UJe=new kf(()=>dM("element",!1));function jJe(n){dM=n}function Wa(n){return n==="element"?UJe.value:$Je.value}function xV(){return dM("element",!0)}let Efe={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function KJe(n){Efe=n}function Lu(){return Efe}class qJe{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(r=>r.splice(e,t,i))}}class Jf extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function uX(n,e){const t=[];for(const i of e){if(n.start>=i.range.end)continue;if(n.end<i.range.start)break;const r=Ur.intersect(n,i.range);Ur.isEmpty(r)||t.push({range:r,size:i.size})}return t}function f6({start:n,end:e},t){return{start:n+t,end:e+t}}function GJe(n){const e=[];let t=null;for(const i of n){const r=i.range.start,s=i.range.end,o=i.size;if(t&&o===t.size){t.range.end=s;continue}t={range:{start:r,end:s},size:o},e.push(t)}return e}function YJe(...n){return GJe(n.reduce((e,t)=>e.concat(t),[]))}class ZJe{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const r=i.length-t,s=uX({start:0,end:e},this.groups),o=uX({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:f6(l.range,r),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=YJe(s,a,o),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const r of this.groups){const s=r.range.end-r.range.start,o=i+s*r.size;if(e<o)return t+Math.floor((e-i)/r.size);t+=s,i=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const r of this.groups){const s=r.range.end-r.range.start,o=i+s;if(e<o)return this._paddingTop+t+(e-i)*r.size;t+=s*r.size,i=o}return-1}}class XJe{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const r=xt(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(r);t={domNode:r,templateId:e,templateData:o}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var Qd=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};const eg={CurrentDragAndDropData:void 0},Mc={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(n){return[n]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class kS{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class QJe{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class JJe{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function eet(n,e){return Array.isArray(n)&&Array.isArray(e)?rr(n,e):n===e}class tet{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,r)=>r,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const IT=class IT{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:FR(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,r=Mc){var o,a;if(this.virtualDelegate=t,this.domId=`list_id_${++IT.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new hS(50),this.splicing=!1,this.dragOverAnimationStopDisposable=ke.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=ke.None,this.onDragLeaveTimeout=ke.None,this.disposables=new dt,this._onDidChangeContentHeight=new ae,this._onDidChangeContentWidth=new ae,this.onDidChangeContentHeight=Be.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,r.horizontalScrolling&&r.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(r.paddingTop??0);for(const l of i)this.renderers.set(l.templateId,l);this.cache=this.disposables.add(new XJe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof r.mouseSupport=="boolean"?r.mouseSupport:!0),this._horizontalScrolling=r.horizontalScrolling??Mc.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof r.paddingBottom>"u"?0:r.paddingBottom,this.accessibilityProvider=new tet(r.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(r.transformOptimization??Mc.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(zs.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new bb({forceIntegerValues:!0,smoothScrollDuration:r.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:l=>Po(bt(this.domNode),l)})),this.scrollableElement=this.disposables.add(new tM(this.rowsContainer,{alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel??Mc.alwaysConsumeMouseWheel,horizontal:1,vertical:r.verticalScrollMode??Mc.verticalScrollMode,useShadows:r.useShadows??Mc.useShadows,mouseWheelScrollSensitivity:r.mouseWheelScrollSensitivity,fastScrollSensitivity:r.fastScrollSensitivity,scrollByPage:r.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(_e(this.rowsContainer,Qn.Change,l=>this.onTouchChange(l))),this.disposables.add(_e(this.scrollableElement.getDomNode(),"scroll",l=>l.target.scrollTop=0)),this.disposables.add(_e(this.domNode,"dragover",l=>this.onDragOver(this.toDragEvent(l)))),this.disposables.add(_e(this.domNode,"drop",l=>this.onDrop(this.toDragEvent(l)))),this.disposables.add(_e(this.domNode,"dragleave",l=>this.onDragLeave(this.toDragEvent(l)))),this.disposables.add(_e(this.domNode,"dragend",l=>this.onDragEnd(l))),this.setRowLineHeight=r.setRowLineHeight??Mc.setRowLineHeight,this.setRowHeight=r.setRowHeight??Mc.setRowHeight,this.supportDynamicHeights=r.supportDynamicHeights??Mc.supportDynamicHeights,this.dnd=r.dnd??this.disposables.add(Mc.dnd),this.layout((o=r.initialSize)==null?void 0:o.height,(a=r.initialSize)==null?void 0:a.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+r),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new ZJe(e)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},o=Ur.intersect(r,s),a=new Map;for(let w=o.end-1;w>=o.start;w--){const x=this.items[w];if(x.dragStartDisposable.dispose(),x.checkedDisposable.dispose(),x.row){let k=a.get(x.templateId);k||(k=[],a.set(x.templateId,k));const E=this.renderers.get(x.templateId);E&&E.disposeElement&&E.disposeElement(x.element,w,x.row.templateData,x.size),k.unshift(x.row)}x.row=null,x.stale=!0}const l={start:e+t,end:this.items.length},c=Ur.intersect(l,r),u=Ur.relativeComplement(l,r),d=i.map(w=>({id:String(this.itemId++),element:w,templateId:this.virtualDelegate.getTemplateId(w),size:this.virtualDelegate.getHeight(w),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(w),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:ke.None,checkedDisposable:ke.None,stale:!1}));let h;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,d),h=this.items,this.items=d):(this.rangeMap.splice(e,t,d),h=this.items.splice(e,t,...d));const f=i.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=f6(c,f),v=Ur.intersect(g,p);for(let w=v.start;w<v.end;w++)this.updateItemInDOM(this.items[w],w);const b=Ur.relativeComplement(p,g);for(const w of b)for(let x=w.start;x<w.end;x++)this.removeItemFromDOM(x);const _=u.map(w=>f6(w,f)),C=[{start:e,end:e+i.length},..._].map(w=>Ur.intersect(g,w)).reverse();for(const w of C)for(let x=w.end-1;x>=w.start;x--){const k=this.items[x],E=a.get(k.templateId),L=E==null?void 0:E.pop();this.insertItemInDOM(x,L)}for(const w of a.values())for(const x of w)this.cache.release(x);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(w=>w.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Po(bt(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:Cje(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:FR(this.domNode)})}render(e,t,i,r,s,o=!1){const a=this.getRenderRange(t,i),l=Ur.relativeComplement(a,e).reverse(),c=Ur.relativeComplement(e,a);if(o){const u=Ur.intersect(e,a);for(let d=u.start;d<u.end;d++)this.updateItemInDOM(this.items[d],d)}this.cache.transact(()=>{for(const u of c)for(let d=u.start;d<u.end;d++)this.removeItemFromDOM(d);for(const u of l)for(let d=u.end-1;d>=u.start;d--)this.insertItemInDOM(d)}),r!==void 0&&(this.rowsContainer.style.left=`-${r}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){var l,c;const i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{const u=this.cache.alloc(i.templateId);i.row=u.row,i.stale||(i.stale=u.isReusingConnectedDomNode)}const r=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",r);const s=this.accessibilityProvider.isChecked(i.element);if(typeof s=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!s));else if(s){const u=d=>i.row.domNode.setAttribute("aria-checked",String(!!d));u(s.value),i.checkedDisposable=s.onDidChange(()=>u(s.value))}if(i.stale||!i.row.domNode.parentElement){const u=((c=(l=this.items.at(e+1))==null?void 0:l.row)==null?void 0:c.domNode)??null;(i.row.domNode.parentElement!==this.rowsContainer||i.row.domNode.nextElementSibling!==u)&&this.rowsContainer.insertBefore(i.row.domNode,u),i.stale=!1}this.updateItemInDOM(i,e);const o=this.renderers.get(i.templateId);if(!o)throw new Error(`No renderer found for template id ${i.templateId}`);o==null||o.renderElement(i.element,e,i.row.templateData,i.size);const a=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!a,a&&(i.dragStartDisposable=_e(i.row.domNode,"dragstart",u=>this.onDragStart(i.element,a,u))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=FR(e.row.domNode);const t=bt(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Be.map(this.disposables.add(new qt(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Be.map(this.disposables.add(new qt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Be.filter(Be.map(this.disposables.add(new qt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Be.map(this.disposables.add(new qt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Be.map(this.disposables.add(new qt(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Be.map(this.disposables.add(new qt(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Be.any(Be.map(this.disposables.add(new qt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Be.map(this.disposables.add(new qt(this.domNode,Qn.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Be.map(this.disposables.add(new qt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Be.map(this.disposables.add(new qt(this.rowsContainer,Qn.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],r=i&&i.element;return{browserEvent:e,index:t,element:r}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],r=i&&i.element;return{browserEvent:e,index:t,element:r}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],r=i&&i.element;return{browserEvent:e,index:t,element:r}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],r=i&&i.element,s=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:r,sector:s}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){var s,o;if(!i.dataTransfer)return;const r=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(kfe.TEXT,t),i.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(r,i)),typeof a>"u"&&(a=String(r.length));const l=xt(".monaco-drag-image");l.textContent=a,(d=>{for(;d&&!d.classList.contains("monaco-workbench");)d=d.parentElement;return d||this.domNode.ownerDocument})(this.domNode).appendChild(l),i.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>l.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new kS(r),eg.CurrentDragAndDropData=new QJe(r),(o=(s=this.dnd).onDragStart)==null||o.call(s,this.currentDragData,i)}onDragOver(e){var s,o;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),eg.CurrentDragAndDropData&&eg.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(eg.CurrentDragAndDropData)this.currentDragData=eg.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new JJe}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&((s=t.effect)==null?void 0:s.type)===0?"copy":"move";let i;typeof t!="boolean"&&t.feedback?i=t.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=Gp(i).filter(a=>a>=-1&&a<this.length).sort((a,l)=>a-l),i=i[0]===-1?[-1]:i;let r=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(eet(this.currentDragFeedback,i)&&this.currentDragFeedbackPosition===r)return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=r,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add(r),this.rowsContainer.classList.add(r),this.currentDragFeedbackDisposable=Pt(()=>{this.domNode.classList.remove(r),this.rowsContainer.classList.remove(r)});else{if(i.length>1&&r!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");r==="drop-target-after"&&i[0]<this.length-1&&(i[0]+=1,r="drop-target-before");for(const a of i){const l=this.items[a];l.dropTarget=!0,(o=l.row)==null||o.domNode.classList.add(r)}this.currentDragFeedbackDisposable=Pt(()=>{var a;for(const l of i){const c=this.items[l];c.dropTarget=!1,(a=c.row)==null||a.domNode.classList.remove(r)}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=G5(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&((i=(t=this.dnd).onDragLeave)==null||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,eg.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,eg.CurrentDragAndDropData=void 0,(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=ke.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=_je(this.domNode).top;this.dragOverAnimationDisposable=Mje(bt(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=G5(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const i=e.offsetY/this.items[t].size,r=Math.floor(i/.25);return Qs(r,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;(kr(i)||Eje(i))&&i!==this.rowsContainer&&t.contains(i);){const r=i.getAttribute("data-index");if(r){const s=Number(r);if(!isNaN(s))return s}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const r=this.getRenderRange(e,t);let s,o;e===this.elementTop(r.start)?(s=r.start,o=0):r.end-r.start>1&&(s=r.start+1,o=this.elementTop(s)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let u=l.start;u<l.end;u++){const d=this.probeDynamicHeight(u);d!==0&&this.rangeMap.splice(u,1,[this.items[u]]),a+=d,c=c||d!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const u=Ur.relativeComplement(r,l);for(const h of u)for(let f=h.start;f<h.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const d=Ur.relativeComplement(l,r).reverse();for(const h of d)for(let f=h.end-1;f>=h.start;f--)this.insertItemInDOM(f);for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof s=="number"){const h=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(s)-o+h;this.setScrollTop(f,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var o,a,l;const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(t.element);if(c!==null){const u=t.size;return t.size=c,t.lastDynamicHeightWidth=this.renderWidth,c-u}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!mr(t.row.domNode,bt(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-i;const{row:r}=this.cache.alloc(t.templateId);r.domNode.style.height="",this.rowsContainer.appendChild(r.domNode);const s=this.renderers.get(t.templateId);if(!s)throw new Tn("Missing renderer for templateId: "+t.templateId);return s.renderElement(t.element,e,r.templateData,void 0),t.size=r.domNode.offsetHeight,(o=s.disposeElement)==null||o.call(s,t.element,e,r.templateData,void 0),(l=(a=this.virtualDelegate).setDynamicHeight)==null||l.call(a,t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,r.domNode.remove(),this.cache.release(r),t.size-i}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t,i;for(const r of this.items)if(r.dragStartDisposable.dispose(),r.checkedDisposable.dispose(),r.row){const s=this.renderers.get(r.row.templateId);s&&((e=s.disposeElement)==null||e.call(s,r.element,-1,r.row.templateData,void 0),s.disposeTemplate(r.row.templateData))}this.items=[],(t=this.domNode)==null||t.remove(),(i=this.dragOverAnimationDisposable)==null||i.dispose(),this.disposables.dispose()}};IT.InstanceCount=0;let El=IT;Qd([Ii],El.prototype,"onMouseClick",null);Qd([Ii],El.prototype,"onMouseDblClick",null);Qd([Ii],El.prototype,"onMouseMiddleClick",null);Qd([Ii],El.prototype,"onMouseDown",null);Qd([Ii],El.prototype,"onMouseOver",null);Qd([Ii],El.prototype,"onMouseOut",null);Qd([Ii],El.prototype,"onContextMenu",null);Qd([Ii],El.prototype,"onTouchStart",null);Qd([Ii],El.prototype,"onTap",null);var qf=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};class net{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const r=this.renderedElements.findIndex(s=>s.templateData===i);if(r>=0){const s=this.renderedElements[r];this.trait.unrender(i),s.index=t}else{const s={index:t,templateData:i};this.renderedElements.push(s)}this.trait.renderIndex(t,i)}splice(e,t,i){const r=[];for(const s of this.renderedElements)s.index<e?r.push(s):s.index>=e+t&&r.push({index:s.index+i-t,templateData:s.templateData});this.renderedElements=r}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}let pN=class{get name(){return this._trait}get renderer(){return new net(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new ae,this.onChange=this._onChange.event}splice(e,t,i){const r=i.length-t,s=e+t,o=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)o.push(this.sortedIndexes[a++]);for(let l=0;l<i.length;l++)i[l]&&o.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=s;)o.push(this.sortedIndexes[a++]+r);this.renderer.splice(e,t,i.length),this._set(o,o)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(hX),t)}_set(e,t,i){const r=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=g6(s,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:i}),r}get(){return this.indexes}contains(e){return eWe(this.sortedIndexes,e,hX)>=0}dispose(){zr(this._onChange)}};qf([Ii],pN.prototype,"renderer",null);class iet extends pN{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class uA{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const r=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(r.length===0)return this.trait.splice(e,t,new Array(i.length).fill(!1));const s=new Set(r),o=i.map(a=>s.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,o)}}function mf(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}function ES(n,e){return n.classList.contains(e)?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:ES(n.parentElement,e)}function R_(n){return ES(n,"monaco-editor")}function ret(n){return ES(n,"monaco-custom-toggle")}function set(n){return ES(n,"action-item")}function xC(n){return ES(n,"monaco-tree-sticky-row")}function hw(n){return n.classList.contains("monaco-tree-sticky-container")}function Lfe(n){return n.tagName==="A"&&n.classList.contains("monaco-button")||n.tagName==="DIV"&&n.classList.contains("monaco-button-dropdown")?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:Lfe(n.parentElement)}class Nfe{get onKeyDown(){return Be.chain(this.disposables.add(new qt(this.view.domNode,"keydown")).event,e=>e.filter(t=>!mf(t.target)).map(t=>new ii(t)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new dt,this.multipleSelectionDisposables=new dt,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(r=>{switch(r.keyCode){case 3:return this.onEnter(r);case 16:return this.onUpArrow(r);case 18:return this.onDownArrow(r);case 11:return this.onPageUpArrow(r);case 12:return this.onPageDownArrow(r);case 9:return this.onEscape(r);case 31:this.multipleSelectionSupport&&(hn?r.metaKey:r.ctrlKey)&&this.onCtrlA(r)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Zs(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}qf([Ii],Nfe.prototype,"onKeyDown",null);var nu;(function(n){n[n.Automatic=0]="Automatic",n[n.Trigger=1]="Trigger"})(nu||(nu={}));var jv;(function(n){n[n.Idle=0]="Idle",n[n.Typing=1]="Typing"})(jv||(jv={}));const oet=new class{mightProducePrintableCharacter(n){return n.ctrlKey||n.metaKey||n.altKey?!1:n.keyCode>=31&&n.keyCode<=56||n.keyCode>=21&&n.keyCode<=30||n.keyCode>=98&&n.keyCode<=107||n.keyCode>=85&&n.keyCode<=95}};class aet{constructor(e,t,i,r,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=r,this.delegate=s,this.enabled=!1,this.state=jv.Idle,this.mode=nu.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new dt,this.disposables=new dt,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??nu.Automatic}enable(){if(this.enabled)return;let e=!1;const t=Be.chain(this.enabledDisposables.add(new qt(this.view.domNode,"keydown")).event,s=>s.filter(o=>!mf(o.target)).filter(()=>this.mode===nu.Automatic||this.triggered).map(o=>new ii(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(o=>en.stop(o,!0)).map(o=>o.browserEvent.key)),i=Be.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Be.reduce(Be.any(t,i),(s,o)=>o===null?null:(s||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var t;const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const i=(t=this.list.options.accessibilityProvider)==null?void 0:t.getAriaLabel(this.list.element(e[0]));typeof i=="string"?uw(i):i&&uw(i.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=jv.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,r=this.state===jv.Idle?1:0;this.state=jv.Typing;for(let s=0;s<this.list.length;s++){const o=(i+s+r)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(oN(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}const c=IXe(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}else if(typeof l>"u"||oN(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class cet{constructor(e,t){this.list=e,this.view=t,this.disposables=new dt;const i=Be.chain(this.disposables.add(new qt(t.domNode,"keydown")).event,s=>s.filter(o=>!mf(o.target)).map(o=>new ii(o)));Be.chain(i,s=>s.filter(o=>o.keyCode===2&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const r=i.querySelector("[tabIndex]");if(!r||!kr(r)||r.tabIndex===-1)return;const s=bt(r).getComputedStyle(r);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),r.focus())}dispose(){this.disposables.dispose()}}function Tfe(n){return hn?n.browserEvent.metaKey:n.browserEvent.ctrlKey}function Ife(n){return n.browserEvent.shiftKey}function uet(n){return AH(n)&&n.button===2}const dX={isSelectionSingleChangeEvent:Tfe,isSelectionRangeChangeEvent:Ife};class Dfe{constructor(e){this.list=e,this.disposables=new dt,this._onPointer=new ae,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||dX),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(zs.addTarget(e.getHTMLElement()))),Be.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||dX))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){R_(e.browserEvent.target)||_s()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(mf(e.browserEvent.target)||R_(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||mf(e.browserEvent.target)||R_(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),uet(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(mf(e.browserEvent.target)||R_(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof i>"u"&&(i=this.list.getFocus()[0]??t,this.list.setAnchor(i));const r=Math.min(i,t),s=Math.max(i,t),o=Zs(r,s+1),a=this.list.getSelection(),l=fet(g6(a,[i]),i);if(l.length===0)return;const c=g6(o,get(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const r=this.list.getSelection(),s=r.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),r.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}class Mfe{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const r=kd(e.listFocusAndSelectionOutline,kd(e.listSelectionOutline,e.listFocusOutline??""));r&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),e.listFocusOutline&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const s=kd(e.listSelectionOutline,e.listInactiveFocusOutline??"");s&&i.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${s}; outline-offset: -1px; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&i.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&i.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&i.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=i.join(`
`)}}const det={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:De.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:De.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:De.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},het={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function fet(n,e){const t=n.indexOf(e);if(t===-1)return[];const i=[];let r=t-1;for(;r>=0&&n[r]===e-(t-r);)i.push(n[r--]);for(i.reverse(),r=t;r<n.length&&n[r]===e+(r-t);)i.push(n[r++]);return i}function g6(n,e){const t=[];let i=0,r=0;for(;i<n.length||r<e.length;)if(i>=n.length)t.push(e[r++]);else if(r>=e.length)t.push(n[i++]);else if(n[i]===e[r]){t.push(n[i]),i++,r++;continue}else n[i]<e[r]?t.push(n[i++]):t.push(e[r++]);return t}function get(n,e){const t=[];let i=0,r=0;for(;i<n.length||r<e.length;)if(i>=n.length)t.push(e[r++]);else if(r>=e.length)t.push(n[i++]);else if(n[i]===e[r]){i++,r++;continue}else n[i]<e[r]?t.push(n[i++]):r++;return t}const hX=(n,e)=>n-e;class pet{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,r){let s=0;for(const o of this.renderers)o.renderElement(e,t,i[s++],r)}disposeElement(e,t,i,r){var o;let s=0;for(const a of this.renderers)(o=a.disposeElement)==null||o.call(a,e,t,i[s],r),s+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class met{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new dt}}renderElement(e,t,i){const r=this.accessibilityProvider.getAriaLabel(e),s=r&&typeof r!="string"?r:gN(r);i.disposables.add(xn(a=>{this.setAriaLabel(a.readObservable(s),i.container)}));const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?i.container.setAttribute("aria-level",`${o}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i,r){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class vet{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var i,r;(r=(i=this.dnd).onDragStart)==null||r.call(i,e,t)}onDragOver(e,t,i,r,s){return this.dnd.onDragOver(e,t,i,r,s)}onDragLeave(e,t,i,r){var s,o;(o=(s=this.dnd).onDragLeave)==null||o.call(s,e,t,i,r)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}drop(e,t,i,r,s){this.dnd.drop(e,t,i,r,s)}dispose(){this.dnd.dispose()}}class Nc{get onDidChangeFocus(){return Be.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Be.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Be.chain(this.disposables.add(new qt(this.view.domNode,"keydown")).event,s=>s.map(o=>new ii(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>en.stop(o,!0)).filter(()=>!1)),i=Be.chain(this.disposables.add(new qt(this.view.domNode,"keyup")).event,s=>s.forEach(()=>e=!1).map(o=>new ii(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>en.stop(o,!0)).map(({browserEvent:o})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,u=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:u,browserEvent:o}})),r=Be.chain(this.view.onContextMenu,s=>s.filter(o=>!e).map(({element:o,index:a,browserEvent:l})=>({element:o,index:a,anchor:new nc(bt(this.view.domNode),l),browserEvent:l})));return Be.any(t,i,r)}get onKeyDown(){return this.disposables.add(new qt(this.view.domNode,"keydown")).event}get onDidFocus(){return Be.signal(this.disposables.add(new qt(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Be.signal(this.disposables.add(new qt(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,r,s=het){var c,u,d;this.user=e,this._options=s,this.focus=new pN("focused"),this.anchor=new pN("anchor"),this.eventBufferer=new cS,this._ariaLabel="",this.disposables=new dt,this._onDidDispose=new ae,this.onDidDispose=this._onDidDispose.event;const o=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(c=this._options.accessibilityProvider)==null?void 0:c.getWidgetRole():"list";this.selection=new iet(o!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(a.push(new met(this.accessibilityProvider)),(d=(u=this.accessibilityProvider).onDidChangeActiveDescendant)==null||d.call(u,this.onDidChangeActiveDescendant,this,this.disposables)),r=r.map(h=>new pet(h.templateId,[...a,h]));const l={...s,dnd:s.dnd&&new vet(this,s.dnd)};if(this.view=this.createListView(t,i,r,l),this.view.domNode.setAttribute("role",o),s.styleController)this.styleController=s.styleController(this.view.domId);else{const h=Fa(this.view.domNode);this.styleController=new Mfe(h,this.view.domId)}if(this.spliceable=new qJe([new uA(this.focus,this.view,s.identityProvider),new uA(this.selection,this.view,s.identityProvider),new uA(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new cet(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new Nfe(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const h=s.keyboardNavigationDelegate||oet;this.typeNavigationController=new aet(this,this.view,s.keyboardNavigationLabelProvider,s.keyboardNavigationEventFilter??(()=>!0),h),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,r){return new El(e,t,i,r)}createMouseController(e){return new Dfe(this)}updateOptions(e={}){var t,i;this._options={...this._options,...e},(t=this.typeNavigationController)==null||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(i=this.keyboardController)==null||i.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new Jf(this.user,`Invalid start index: ${e}`);if(t<0)throw new Jf(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new Jf(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Jf(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return sH(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new Jf(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,r){if(this.length===0)return;const s=this.focus.get(),o=this.findNextIndex(s.length>0?s[0]+e:0,t,r);o>-1&&this.setFocus([o],i)}focusPrevious(e=1,t=!1,i,r){if(this.length===0)return;const s=this.focus.get(),o=this.findPreviousIndex(s.length>0?s[0]-e:0,t,r);o>-1&&this.setFocus([o],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const r=this.getFocus()[0];if(r!==i&&(r===void 0||i>r)){const s=this.findPreviousIndex(i,!1,t);s>-1&&r!==s?this.setFocus([s],e):this.setFocus([i],e)}else{const s=this.view.getScrollTop();let o=s+this.view.renderHeight;i>r&&(o-=this.view.elementHeight(i)),this.view.setScrollTop(o),this.view.getScrollTop()!==s&&(this.setFocus([]),await Qy(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=()=>0){let r;const s=i(),o=this.view.getScrollTop()+s;o===0?r=this.view.indexAt(o):r=this.view.indexAfter(o-1);const a=this.getFocus()[0];if(a!==r&&(a===void 0||a>=r)){const l=this.findNextIndex(r,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([r],e)}else{const l=o;this.view.setScrollTop(o-this.view.renderHeight-s),this.view.getScrollTop()+i()!==l&&(this.setFocus([]),await Qy(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const r=this.findNextIndex(e,!1,i);r>-1&&this.setFocus([r],t)}findNextIndex(e,t=!1,i){for(let r=0;r<this.length;r++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let r=0;r<this.length;r++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new Jf(this.user,`Invalid index ${e}`);const r=this.view.getScrollTop(),s=this.view.elementTop(e),o=this.view.elementHeight(e);if(hb(t)){const a=o-this.view.renderHeight+i;this.view.setScrollTop(a*Qs(t,0,1)+s-i)}else{const a=s+o,l=r+this.view.renderHeight;s<r+i&&a>=l||(s<r+i||a>=l&&o>=this.view.renderHeight?this.view.setScrollTop(s-i):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new Jf(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),r=this.view.elementTop(e),s=this.view.elementHeight(e);if(r<i+t||r+s>i+this.view.renderHeight)return null;const o=s-this.view.renderHeight+t;return Math.abs((i+t-r)/o)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var t;const e=this.focus.get();if(e.length>0){let i;(t=this.accessibilityProvider)!=null&&t.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}qf([Ii],Nc.prototype,"onDidChangeFocus",null);qf([Ii],Nc.prototype,"onDidChangeSelection",null);qf([Ii],Nc.prototype,"onContextMenu",null);qf([Ii],Nc.prototype,"onKeyDown",null);qf([Ii],Nc.prototype,"onDidFocus",null);qf([Ii],Nc.prototype,"onDidBlur",null);const Yg=xt,Rfe="selectOption.entry.template";class bet{get templateId(){return Rfe}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=ct(e,Yg(".option-text")),t.detail=ct(e,Yg(".option-detail")),t.decoratorRight=ct(e,Yg(".option-decorator-right")),t}renderElement(e,t,i){const r=i,s=e.text,o=e.detail,a=e.decoratorRight,l=e.isDisabled;r.text.textContent=s,r.detail.textContent=o||"",r.decoratorRight.innerText=a||"",l?r.root.classList.add("option-disabled"):r.root.classList.remove("option-disabled")}disposeTemplate(e){}}const Kc=class Kc extends ke{constructor(e,t,i,r,s){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=r,this.selectBoxOptions=s||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=Kc.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new ae,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(Lu().setupManagedHover(Wa("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return Rfe}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=xt(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=ct(this.selectDropDownContainer,Yg(".select-box-details-pane"));const t=ct(this.selectDropDownContainer,Yg(".select-box-dropdown-container-width-control")),i=ct(t,Yg(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",ct(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=Fa(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(_e(this.selectDropDownContainer,We.DRAG_START,r=>{en.stop(r,!0)}))}registerListeners(){this._register(vr(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(_e(this.selectElement,We.CLICK,t=>{en.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(_e(this.selectElement,We.MOUSE_DOWN,t=>{en.stop(t)}));let e;this._register(_e(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(_e(this.selectElement,"touchend",t=>{en.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(_e(this.selectElement,We.KEY_DOWN,t=>{const i=new ii(t);let r=!1;hn?(i.keyCode===18||i.keyCode===16||i.keyCode===10||i.keyCode===3)&&(r=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(r=!0),r&&(this.showSelectDropDown(),en.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){rr(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((i,r)=>{this.selectElement.add(this.createOption(i.text,r,i.isDisabled)),typeof i.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)==null||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",i=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=i}styleList(){const e=this.styles.selectBackground??"",t=kd(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const i=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=i,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const r=document.createElement("option");return r.value=e,r.text=e,r.disabled=!!i,r}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=bt(this.selectElement),i=Ta(this.selectElement),r=bt(this.selectElement).getComputedStyle(this.selectElement),s=parseFloat(r.getPropertyValue("--dropdown-padding-top"))+parseFloat(r.getPropertyValue("--dropdown-padding-bottom")),o=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),a=i.top-Kc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),u=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=u,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let d=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const h=this._hasDetails?this._cachedMaxDetailsHeight:0,f=d+s+h,g=Math.floor((o-s-h)/this.getHeight()),p=Math.floor((a-s-h)/this.getHeight());if(e)return i.top+i.height>t.innerHeight-22||i.top<Kc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||g<1&&p<1?!1:(g<Kc.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&p>g&&this.options.length>g?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<Kc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&g<1||this._dropDownPosition===1&&p<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&g+p<1)return this.hideSelectDropDown(!0),!1;f>o&&(d=g*this.getHeight())}else f>a&&(d=p*this.getHeight());return this.selectList.layout(d),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=d+s+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=d+s+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=u,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let i=0,r=0;this.options.forEach((s,o)=>{const a=s.detail?s.detail.length:0,l=s.decoratorRight?s.decoratorRight.length:0,c=s.text.length+a+l;c>r&&(i=o,r=c)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=DH(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=ct(e,Yg(".select-box-dropdown-list-container")),this.listRenderer=new bet,this.selectList=this._register(new Nc("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:r=>{let s=r.text;return r.detail&&(s+=`. ${r.detail}`),r.decoratorRight&&(s+=`. ${r.decoratorRight}`),r.description&&(s+=`. ${r.description}`),s},getWidgetAriaLabel:()=>S({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>hn?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new qt(this.selectDropDownListContainer,"keydown")),i=Be.chain(t.event,r=>r.filter(()=>this.selectList.length>0).map(s=>new ii(s)));this._register(Be.chain(i,r=>r.filter(s=>s.keyCode===3))(this.onEnter,this)),this._register(Be.chain(i,r=>r.filter(s=>s.keyCode===2))(this.onEnter,this)),this._register(Be.chain(i,r=>r.filter(s=>s.keyCode===9))(this.onEscape,this)),this._register(Be.chain(i,r=>r.filter(s=>s.keyCode===16))(this.onUpArrow,this)),this._register(Be.chain(i,r=>r.filter(s=>s.keyCode===18))(this.onDownArrow,this)),this._register(Be.chain(i,r=>r.filter(s=>s.keyCode===12))(this.onPageDown,this)),this._register(Be.chain(i,r=>r.filter(s=>s.keyCode===11))(this.onPageUp,this)),this._register(Be.chain(i,r=>r.filter(s=>s.keyCode===14))(this.onHome,this)),this._register(Be.chain(i,r=>r.filter(s=>s.keyCode===13))(this.onEnd,this)),this._register(Be.chain(i,r=>r.filter(s=>s.keyCode>=21&&s.keyCode<=56||s.keyCode>=85&&s.keyCode<=113))(this.onCharacter,this)),this._register(_e(this.selectList.getHTMLElement(),We.POINTER_UP,r=>this.onPointerUp(r))),this._register(this.selectList.onMouseOver(r=>typeof r.index<"u"&&this.selectList.setFocus([r.index]))),this._register(this.selectList.onDidChangeFocus(r=>this.onListFocus(r))),this._register(_e(this.selectDropDownContainer,We.FOCUS_OUT,r=>{!this._isVisible||mr(r.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;en.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const r=Number(i.getAttribute("data-index")),s=i.classList.contains("option-disabled");r>=0&&r<this.options.length&&!s&&(this.selected=r,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=s=>{for(let o=0;o<s.childNodes.length;o++){const a=s.childNodes.item(o);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():i(a)}},r=hV({value:e,supportThemeIcons:!0},{actionHandler:t});return r.element.classList.add("select-box-description-markdown"),i(r.element),r.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],i=(t==null?void 0:t.description)??"",r=(t==null?void 0:t.descriptionIsMarkdown)??!1;if(i){if(r){const s=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(i,s))}else this.selectionDetailsPane.innerText=i;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){en.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){en.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){en.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(en.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){en.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){en.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){en.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){en.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=rd.toString(e.keyCode);let i=-1;for(let r=0;r<this.options.length-1;r++)if(i=(r+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),en.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};Kc.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,Kc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,Kc.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let p6=Kc;class _et extends ke{constructor(e,t,i,r){super(),this.selected=0,this.selectBoxOptions=r||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new ae),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(zs.addTarget(this.selectElement)),[Qn.Tap].forEach(e=>{this._register(_e(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(vr(this.selectElement,"click",e=>{en.stop(e,!0)})),this._register(vr(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(vr(this.selectElement,"keydown",e=>{let t=!1;hn?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!rr(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((i,r)=>{this.selectElement.add(this.createOption(i.text,r,i.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,i){const r=document.createElement("option");return r.value=e,r.text=e,r.disabled=!!i,r}}class Cet extends Xd{constructor(e,t,i,r,s){super(),hn&&!(s!=null&&s.useCustomDrawn)?this.selectBoxDelegate=new _et(e,t,r,s):this.selectBoxDelegate=new p6(e,t,i,r,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class Zl extends ke{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof Ed&&this._register(t.onDidChange(r=>{this.element&&this.handleActionChangeEvent(r)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Jp)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(zs.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,Sl&&this._register(_e(e,We.DRAG_START,r=>{var s;return(s=r.dataTransfer)==null?void 0:s.setData(kfe.TEXT,this._action.label)}))),this._register(_e(t,Qn.Tap,r=>this.onClick(r,!0))),this._register(_e(t,We.MOUSE_DOWN,r=>{i||en.stop(r,!0),this._action.enabled&&r.button===0&&t.classList.add("active")})),hn&&this._register(_e(t,We.CONTEXT_MENU,r=>{r.button===0&&r.ctrlKey===!0&&this.onClick(r)})),this._register(_e(t,We.CLICK,r=>{en.stop(r,!0),this.options&&this.options.isMenu||this.onClick(r)})),this._register(_e(t,We.DBLCLICK,r=>{en.stop(r,!0)})),[We.MOUSE_UP,We.MOUSE_OUT].forEach(r=>{this._register(_e(t,r,s=>{en.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){var r;en.stop(e,!0);const i=Yo(this._context)?(r=this.options)!=null&&r.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var t;if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),(t=this.options.hoverDelegate)!=null&&t.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const i=this.options.hoverDelegate??Wa("element");this.customHover=this._store.add(Lu().setupManagedHover(i,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class kV extends Zl{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),hf(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const i=document.createElement("span");i.classList.add("keybinding"),i.textContent=this.options.keybinding,this.element.appendChild(i)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Cs.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=S({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)==null||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)==null||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)==null||t.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class yet extends Zl{constructor(e,t,i,r,s,o,a){super(e,t),this.selectBox=new Cet(i,r,s,o,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)==null||e.focus()}blur(){var e;(e=this.selectBox)==null||e.blur()}render(e){this.selectBox.render(e)}}class wet extends Jp{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new ae),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=ct(e,xt(".monaco-dropdown")),this._label=ct(this._element,xt(".dropdown-label"));let i=t.labelRenderer;i||(i=s=>(s.textContent=t.label||"",null));for(const s of[We.CLICK,We.MOUSE_DOWN,Qn.Tap])this._register(_e(this.element,s,o=>en.stop(o,!0)));for(const s of[We.MOUSE_DOWN,Qn.Tap])this._register(_e(this._label,s,o=>{AH(o)&&(o.detail>1||o.button!==0)||(this.visible?this.hide():this.show())}));this._register(_e(this._label,We.KEY_UP,s=>{const o=new ii(s);(o.equals(3)||o.equals(10))&&(en.stop(s,!0),this.visible?this.hide():this.show())}));const r=i(this._label);r&&this._register(r),this._register(zs.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class xet extends wet{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class mN extends Zl{constructor(e,t,i,r=Object.create(null)){super(null,e,r),this.actionItem=null,this._onDidChangeVisibility=this._register(new ae),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=r,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=s=>{this.element=ct(s,xt("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(Lu().setupManagedHover(this.options.hoverDelegate??Wa("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),r={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new xet(e,r)),this._register(this.dropdownMenu.onDidChangeVisibility(s=>{var o;(o=this.element)==null||o.setAttribute("aria-expanded",`${s}`),this._onDidChangeVisibility.fire(s)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const s=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return s.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)==null||e.show()}updateEnabled(){var t,i;const e=!this.action.enabled;(t=this.actionItem)==null||t.classList.toggle("disabled",e),(i=this.element)==null||i.classList.toggle("disabled",e)}}function ket(n){return n?n.condition!==void 0:!1}var B0;(function(n){n[n.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",n[n.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(B0||(B0={}));var Kv;(function(n){n[n.None=0]="None",n[n.Initialized=1]="Initialized",n[n.Closed=2]="Closed"})(Kv||(Kv={}));const DT=class DT extends ke{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new Gy),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Kv.None,this.cache=new Map,this.flushDelayer=this._register(new hde(DT.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;this._onDidChangeStorage.pause();try{(t=e.changed)==null||t.forEach((r,s)=>this.acceptExternal(s,r)),(i=e.deleted)==null||i.forEach(r=>this.acceptExternal(r,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===Kv.Closed)return;let i=!1;Yo(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return Yo(i)?t:i}getBoolean(e,t){const i=this.get(e);return Yo(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return Yo(i)?t:parseInt(i,10)}async set(e,t,i=!1){if(this.state===Kv.Closed)return;if(Yo(t))return this.delete(e,i);const r=no(t)||Array.isArray(t)?QXe(t):String(t);if(this.cache.get(e)!==r)return this.cache.set(e,r),this.pendingInserts.set(e,r),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()}async delete(e,t=!1){if(!(this.state===Kv.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())==null||t()})}async doFlush(e){return this.options.hint===B0.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}};DT.DEFAULT_FLUSH_DELAY=100;let kC=DT;class dA{constructor(){this.onDidChangeItemsExternal=Be.None,this.items=new Map}async updateItems(e){var t,i;(t=e.insert)==null||t.forEach((r,s)=>this.items.set(s,r)),(i=e.delete)==null||i.forEach(r=>this.items.delete(r))}}const NE="__$__targetStorageMarker",hM=cn("storageService");var fX;(function(n){n[n.NONE=0]="NONE",n[n.SHUTDOWN=1]="SHUTDOWN"})(fX||(fX={}));function Eet(n){const e=n.get(NE);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}const MT=class MT extends ke{constructor(e={flushInterval:MT.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new Gy),this._onDidChangeTarget=this._register(new Gy),this._onWillSaveState=this._register(new ae),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return Be.filter(this._onDidChangeValue.event,r=>r.scope===e&&(t===void 0||r.key===t),i)}emitDidChangeValue(e,t){const{key:i,external:r}=t;if(i===NE){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:r})}get(e,t,i){var r;return(r=this.getStorage(t))==null?void 0:r.get(e,i)}getBoolean(e,t,i){var r;return(r=this.getStorage(t))==null?void 0:r.getBoolean(e,i)}getNumber(e,t,i){var r;return(r=this.getStorage(t))==null?void 0:r.getNumber(e,i)}store(e,t,i,r,s=!1){if(Yo(t)){this.remove(e,i,s);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,i,r),(o=this.getStorage(i))==null||o.set(e,t,s)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,t,void 0),(r=this.getStorage(t))==null||r.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,r=!1){var o,a;const s=this.getKeyTargets(t);typeof i=="number"?s[e]!==i&&(s[e]=i,(o=this.getStorage(t))==null||o.set(NE,JSON.stringify(s),r)):typeof s[e]=="number"&&(delete s[e],(a=this.getStorage(t))==null||a.set(NE,JSON.stringify(s),r))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?Eet(t):Object.create(null)}};MT.DEFAULT_FLUSH_INTERVAL=60*1e3;let m6=MT;class Let extends m6{constructor(){super(),this.applicationStorage=this._register(new kC(new dA,{hint:B0.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new kC(new dA,{hint:B0.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new kC(new dA,{hint:B0.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function Net(n,e){const t={...e};for(const i in n){const r=n[i];t[i]=r!==void 0?$e(r):void 0}return t}const Tet={keybindingLabelBackground:$e(mZe),keybindingLabelForeground:$e(vZe),keybindingLabelBorder:$e(bZe),keybindingLabelBottomBorder:$e(_Ze),keybindingLabelShadow:$e(CS)},Iet={buttonForeground:$e(jhe),buttonSeparator:$e(nZe),buttonBackground:$e(T_),buttonHoverBackground:$e(iZe),buttonSecondaryForeground:$e(sZe),buttonSecondaryBackground:$e(z8),buttonSecondaryHoverBackground:$e(oZe),buttonBorder:$e(rZe)},Det={progressBarBackground:$e(_Ye)},Afe={inputActiveOptionBorder:$e(Whe),inputActiveOptionForeground:$e(Uhe),inputActiveOptionBackground:$e($he)};$e(I_),$e(aZe),$e(lZe),$e(cZe),$e(uZe),$e(dZe),$e(hZe);$e(fZe),$e(pZe),$e(gZe);$e(ll),$e(QD),$e(CS),$e(kn),$e(RYe),$e(AYe),$e(OYe),$e(vYe);const Ofe={inputBackground:$e(WYe),inputForeground:$e($Ye),inputBorder:$e(UYe),inputValidationInfoBorder:$e(GYe),inputValidationInfoBackground:$e(KYe),inputValidationInfoForeground:$e(qYe),inputValidationWarningBorder:$e(XYe),inputValidationWarningBackground:$e(YYe),inputValidationWarningForeground:$e(ZYe),inputValidationErrorBorder:$e(eZe),inputValidationErrorBackground:$e(QYe),inputValidationErrorForeground:$e(JYe)},Met={listFilterWidgetBackground:$e(DZe),listFilterWidgetOutline:$e(MZe),listFilterWidgetNoMatchesOutline:$e(RZe),listFilterWidgetShadow:$e(AZe),inputBoxStyles:Ofe,toggleStyles:Afe},Ret={badgeBackground:$e(xE),badgeForeground:$e(bYe),badgeBorder:$e(kn)};$e(DYe),$e(IYe),$e(CZ),$e(CZ),$e(MYe);const yb={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:$e(CZe),listFocusForeground:$e(yZe),listFocusOutline:$e(wZe),listActiveSelectionBackground:$e(im),listActiveSelectionForeground:$e(ow),listActiveSelectionIconForeground:$e(Khe),listFocusAndSelectionOutline:$e(SZe),listFocusAndSelectionBackground:$e(im),listFocusAndSelectionForeground:$e(ow),listInactiveSelectionBackground:$e(xZe),listInactiveSelectionIconForeground:$e(EZe),listInactiveSelectionForeground:$e(kZe),listInactiveFocusBackground:$e(LZe),listInactiveFocusOutline:$e(NZe),listHoverBackground:$e(qhe),listHoverForeground:$e(Ghe),listDropOverBackground:$e(TZe),listDropBetweenBackground:$e(IZe),listSelectionOutline:$e(Fi),listHoverOutline:$e(Fi),treeIndentGuidesStroke:$e(Yhe),treeInactiveIndentGuidesStroke:$e(OZe),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:$e(QH),tableColumnsBorder:$e(PZe),tableOddRowsBackgroundColor:$e(FZe)};function LS(n){return Net(n,yb)}const Aet={selectBackground:$e(JD),selectListBackground:$e(tZe),selectForeground:$e(tV),decoratorRightForeground:$e(Zhe),selectBorder:$e(nV),focusBorder:$e(_u),listFocusBackground:$e($8),listInactiveSelectionIconForeground:$e(Xhe),listFocusForeground:$e(W8),listFocusOutline:dYe(Fi,De.transparent.toString()),listHoverBackground:$e(qhe),listHoverForeground:$e(Ghe),listHoverOutline:$e(Fi),selectListBorder:$e(Phe),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},Oet={shadowColor:$e(CS),borderColor:$e(BZe),foregroundColor:$e(HZe),backgroundColor:$e(VZe),selectionForegroundColor:$e(zZe),selectionBackgroundColor:$e(WZe),selectionBorderColor:$e($Ze),separatorColor:$e(UZe),scrollbarShadow:$e(QH),scrollbarSliderBackground:$e(Rhe),scrollbarSliderHoverBackground:$e(Ahe),scrollbarSliderActiveBackground:$e(Ohe)};var fM=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},to=function(n,e){return function(t,i){e(t,i,n)}};function Pet(n,e,t,i){let r,s,o;if(Array.isArray(n))o=n,r=e,s=t;else{const c=e;o=n.getActions(c),r=t,s=i}const a=jh.getInstance(),l=a.keyStatus.altKey||(Ao||co)&&a.keyStatus.shiftKey;Pfe(o,r,l,s?c=>c===s:c=>c==="navigation")}function Fet(n,e,t,i,r,s){let o,a,l,c,u;if(Array.isArray(n))u=n,o=e,a=t,l=i,c=r;else{const h=e;u=n.getActions(h),o=t,a=i,l=r,c=s}Pfe(u,o,!1,typeof a=="string"?h=>h===a:a,l,c)}function Pfe(n,e,t,i=o=>o==="navigation",r=()=>!1,s=!1){let o,a;Array.isArray(e)?(o=e,a=e):(o=e.primary,a=e.secondary);const l=new Set;for(const[c,u]of n){let d;i(c)?(d=o,d.length>0&&s&&d.push(new Cs)):(d=a,d.length>0&&d.push(new Cs));for(let h of u){t&&(h=h instanceof Ld&&h.alt?h.alt:h);const f=d.push(h);h instanceof FD&&l.add({group:c,action:h,index:f-1})}}for(const{group:c,action:u,index:d}of l){const h=i(c)?o:a,f=u.actions;r(u,c,h.length)&&h.splice(d,1,...f)}}let fw=class extends kV{constructor(e,t,i,r,s,o,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._options=t,this._keybindingService=i,this._notificationService=r,this._contextKeyService=s,this._themeService=o,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Vd),this._altKey=jh.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{var s;const r=!!((s=this._menuItemAction.alt)!=null&&s.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(_e(e,"mouseleave",r=>{t=!1,i()})),this._register(_e(e,"mouseenter",r=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var s;const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let r=t?S("titleAndKb","{0} ({1})",i,t):i;if(!this._wantsAltCommand&&((s=this._menuItemAction.alt)!=null&&s.enabled)){const o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?S("titleAndKb","{0} ({1})",o,l):o;r=S("titleAndKbAndAlt",`{0}
[{1}] {2}`,r,mV.modifierLabels[al].altKey,c)}return r}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const r=this._commandAction.checked&&ket(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(r)if(vn.isThemeIcon(r)){const s=vn.asClassNameArray(r);i.classList.add(...s),this._itemClassDispose.value=Pt(()=>{i.classList.remove(...s)})}else i.style.backgroundImage=ZD(this._themeService.getColorTheme().type)?$d(r.dark):$d(r.light),i.classList.add("icon"),this._itemClassDispose.value=du(Pt(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};fw=fM([to(2,Wr),to(3,Ec),to(4,In),to(5,Nl),to(6,Zd),to(7,Lc)],fw);let v6=class extends mN{constructor(e,t,i,r,s){const o={...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!1,classNames:(t==null?void 0:t.classNames)??(vn.isThemeIcon(e.item.icon)?vn.asClassName(e.item.icon):void 0),keybindingProvider:(t==null?void 0:t.keybindingProvider)??(a=>i.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},r,o),this._keybindingService=i,this._contextMenuService=r,this._themeService=s}render(e){super.render(e),hf(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!vn.isThemeIcon(i)){this.element.classList.add("icon");const r=()=>{this.element&&(this.element.style.backgroundImage=ZD(this._themeService.getColorTheme().type)?$d(i.dark):$d(i.light))};r(),this._register(this._themeService.onDidColorThemeChange(()=>{r()}))}}};v6=fM([to(2,Wr),to(3,Zd),to(4,Nl)],v6);let b6=class extends Zl{constructor(e,t,i,r,s,o,a,l){super(null,e),this._keybindingService=i,this._notificationService=r,this._contextMenuService=s,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const u=t!=null&&t.persistLastActionId?l.get(this._storageKey,1):void 0;u&&(c=e.actions.find(h=>u===h.id)),c||(c=e.actions[0]),this._defaultAction=this._instaService.createInstance(fw,c,{keybinding:this._getDefaultActionKeybindingLabel(c)});const d={keybindingProvider:h=>this._keybindingService.lookupKeybinding(h.id),...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!0,classNames:(t==null?void 0:t.classNames)??["codicon","codicon-chevron-down"],actionRunner:(t==null?void 0:t.actionRunner)??new Jp};this._dropdown=new mN(e,e.actions,this._contextMenuService,d),this._register(this._dropdown.actionRunner.onDidRun(h=>{h.action instanceof Ld&&this.update(h.action)}))}update(e){var t;(t=this._options)!=null&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(fw,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends Jp{async runAction(i,r){await i.run(void 0)}},this._container&&this._defaultAction.render(OH(this._container,xt(".action-container")))}_getDefaultActionKeybindingLabel(e){var i;let t;if((i=this._options)!=null&&i.renderKeybindingWithDefaultActionLabel){const r=this._keybindingService.lookupKeybinding(e.id);r&&(t=`(${r.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=xt(".action-container");this._defaultAction.render(ct(this._container,t)),this._register(_e(t,We.KEY_DOWN,r=>{const s=new ii(r);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const i=xt(".dropdown-action-container");this._dropdown.render(ct(this._container,i)),this._register(_e(i,We.KEY_DOWN,r=>{var o;const s=new ii(r);s.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)==null||o.focus(),s.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};b6=fM([to(2,Wr),to(3,Ec),to(4,Zd),to(5,ym),to(6,Fn),to(7,hM)],b6);let _6=class extends yet{constructor(e,t){super(null,e,e.actions.map(i=>({text:i.id===Cs.ID?"":i.label,isDisabled:!i.enabled})),0,t,Aet,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(i=>i.checked)))}render(e){super.render(e),e.style.borderColor=$e(nV)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};_6=fM([to(1,wS)],_6);function Bet(n,e,t){return e instanceof Ld?n.createInstance(fw,e,t):e instanceof _C?e.item.isSelection?n.createInstance(_6,e):e.item.rememberDefaultAction?n.createInstance(b6,e,{...t,persistLastActionId:!0}):n.createInstance(v6,e,t):void 0}class Td extends ke{constructor(e,t={}){var s,o;super(),this._actionRunnerDisposables=this._register(new dt),this.viewItemDisposables=this._register(new fH),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new ae),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new ae({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new ae),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new ae),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:((s=this.options.triggerKeys)==null?void 0:s.keyDown)??!1,keys:((o=this.options.triggerKeys)==null?void 0:o.keys)??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(xV()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Jp,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(a=>this._onDidRun.fire(a))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(a=>this._onWillRun.fire(a))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let i,r;switch(this._orientation){case 0:i=[15],r=[17];break;case 1:i=[16],r=[18],this.domNode.className+=" vertical";break}this._register(_e(this.domNode,We.KEY_DOWN,a=>{const l=new ii(a);let c=!0;const u=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;i&&(l.equals(i[0])||l.equals(i[1]))?c=this.focusPrevious():r&&(l.equals(r[0])||l.equals(r[1]))?c=this.focusNext():l.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():l.equals(14)?c=this.focusFirst():l.equals(13)?c=this.focusLast():l.equals(2)&&u instanceof Zl&&u.trapsArrowNavigation?c=this.focusNext(void 0,!0):this.isTriggerKeyEvent(l)?this._triggerKeys.keyDown?this.doTrigger(l):this.triggerKeyDown=!0:c=!1,c&&(l.preventDefault(),l.stopPropagation())})),this._register(_e(this.domNode,We.KEY_UP,a=>{const l=new ii(a);this.isTriggerKeyEvent(l)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(l)),l.preventDefault(),l.stopPropagation()):(l.equals(2)||l.equals(1026)||l.equals(16)||l.equals(18)||l.equals(15)||l.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(Jy(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(_s()===this.domNode||!mr(_s(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof Zl&&i.isEnabled());t instanceof Zl&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Zl&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){var e,t;for(let i=0;i<this.actionsList.children.length;i++){const r=this.actionsList.children[i];if(mr(_s(),r)){this.focusedItem=i,(t=(e=this.viewItems[this.focusedItem])==null?void 0:e.showHover)==null||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])==null?void 0:t.action;if(kr(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let i=0;i<this.actionsList.childNodes.length;i++)if(this.actionsList.childNodes[i]===e)return this.viewItems[i].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let r=hb(t.index)?t.index:null;i.forEach(s=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s,l)),a||(a=new kV(this.context,s,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,_e(o,We.CONTEXT_MENU,c=>{en.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof Zl&&this.viewItems.length===0&&a.setFocusable(!0),r===null||r<0||r>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a)):(this.actionsList.insertBefore(o,this.actionsList.children[r]),this.viewItems.splice(r,0,a),r++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=zr(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),pc(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const r=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=r===-1?void 0:r,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let r;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,r=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!r.isEnabled()||r.action.id===Cs.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Cs.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){var s,o;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((s=this.viewItems[this.previouslyFocusedItem])==null||s.blur());const r=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(r){let a=!0;LL(r.focus)||(a=!1),this.options.focusOnlyEnabledItems&&LL(r.isEnabled)&&!r.isEnabled()&&(a=!1),r.action.id===Cs.ID&&(a=!1),a?(i||this.previouslyFocusedItem!==this.focusedItem)&&(r.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),a&&((o=r.showHover)==null||o.call(r))}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Zl){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=zr(this.viewItems),this.getContainer().remove(),super.dispose()}}const C6=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,hA=/(&amp;)?(&amp;)([^\s&])/g;var vN;(function(n){n[n.Right=0]="Right",n[n.Left=1]="Left"})(vN||(vN={}));var y6;(function(n){n[n.Above=0]="Above",n[n.Below=1]="Below"})(y6||(y6={}));class H0 extends Td{constructor(e,t,i,r){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,i,o),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...hn||co?[10]:[]],keyDown:!0}}),this.menuStyles=r,this.menuElement=s,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,r),this._register(zs.addTarget(s)),this._register(_e(s,We.KEY_DOWN,c=>{new ii(c).equals(2)&&c.preventDefault()})),i.enableMnemonics&&this._register(_e(s,We.KEY_DOWN,c=>{const u=c.key.toLocaleLowerCase();if(this.mnemonics.has(u)){en.stop(c,!0);const d=this.mnemonics.get(u);if(d.length===1&&(d[0]instanceof gX&&d[0].container&&this.focusItemByElement(d[0].container),d[0].onClick(c)),d.length>1){const h=d.shift();h&&h.container&&(this.focusItemByElement(h.container),d.push(h)),this.mnemonics.set(u,d)}}})),co&&this._register(_e(s,We.KEY_DOWN,c=>{const u=new ii(c);u.equals(14)||u.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),en.stop(c,!0)):(u.equals(13)||u.equals(12))&&(this.focusedItem=0,this.focusPrevious(),en.stop(c,!0))})),this._register(_e(this.domNode,We.MOUSE_OUT,c=>{const u=c.relatedTarget;mr(u,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(_e(this.actionsList,We.MOUSE_OVER,c=>{let u=c.target;if(!(!u||!mr(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}})),this._register(zs.addTarget(this.actionsList)),this._register(_e(this.actionsList,Qn.Tap,c=>{let u=c.initialTarget;if(!(!u||!mr(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}}));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new rV(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,r),this._register(_e(s,Qn.Change,c=>{en.stop(c,!0);const u=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:u-c.translationY})})),this._register(_e(a,We.MOUSE_UP,c=>{c.preventDefault()}));const l=bt(e);s.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,u)=>{var d;return(d=i.submenuIds)!=null&&d.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof Cs&&(u===t.length-1||u===0||t[u-1]instanceof Cs))}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof pX)).forEach((c,u,d)=>{c.updatePositionInSet(u+1,d.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(HL(e)?this.styleSheet=Fa(e):(H0.globalStyleSheet||(H0.globalStyleSheet=Fa()),this.styleSheet=H0.globalStyleSheet)),this.styleSheet.textContent=Vet(t,HL(e))}styleScrollElement(e,t){const i=t.foregroundColor??"",r=t.backgroundColor??"",s=t.borderColor?`1px solid ${t.borderColor}`:"",o="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=s,e.style.borderRadius=o,e.style.color=i,e.style.backgroundColor=r,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Cs)return new pX(t.context,e,{icon:!0},this.menuStyles);if(e instanceof FD){const r=new gX(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const s=r.getMnemonic();if(s&&r.isEnabled()){let o=[];this.mnemonics.has(s)&&(o=this.mnemonics.get(s)),o.push(r),this.mnemonics.set(s,o)}}return r}else{const r={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(r.keybinding=a)}}const s=new Ffe(t.context,e,r,this.menuStyles);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(s),this.mnemonics.set(o,a)}}return s}}}class Ffe extends Zl{constructor(e,t,i,r){if(i.isMenu=!0,super(t,t,i),this.menuStyle=r,this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){const s=this.action.label;if(s){const o=C6.exec(s);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new bs(()=>{this.element&&(this._register(_e(this.element,We.MOUSE_UP,s=>{if(en.stop(s,!0),Sl){if(new nc(bt(this.element),s).rightButton)return;this.onClick(s)}else setTimeout(()=>{this.onClick(s)},0)})),this._register(_e(this.element,We.CONTEXT_MENU,s=>{en.stop(s,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=ct(this.element,xt("a.action-menu-item")),this._action.id===Cs.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=ct(this.item,xt("span.menu-item-check"+vn.asCSSSelector(rt.menuSelection))),this.check.setAttribute("role","none"),this.label=ct(this.item,xt("span.action-label")),this.options.label&&this.options.keybinding&&(ct(this.item,xt("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)==null||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){pc(this.label);let t=cfe(this.action.label);if(t){const i=Het(t);this.options.enableMnemonics||(t=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));const r=C6.exec(t);if(r){t=gC(t),hA.lastIndex=0;let s=hA.exec(t);for(;s&&s[1];)s=hA.exec(t);const o=a=>a.replace(/&amp;&amp;/g,"&amp;");s?this.label.append(MD(o(t.substr(0,s.index))," "),xt("u",{"aria-hidden":"true"},s[3]),fUe(o(t.substr(s.index+s[0].length))," ")):this.label.innerText=o(t).trim(),(e=this.item)==null||e.setAttribute("aria-keyshortcuts",(r[1]?r[1]:r[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,r=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=r,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=t??"")}}class gX extends Ffe{constructor(e,t,i,r,s){super(e,e,r,s),this.submenuActions=t,this.parentData=i,this.submenuOptions=r,this.mysubmenu=null,this.submenuDisposables=this._register(new dt),this.mouseOver=!1,this.expandDirection=r&&r.expandDirection!==void 0?r.expandDirection:{horizontal:vN.Right,vertical:y6.Below},this.showScheduler=new bs(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new bs(()=>{this.element&&!mr(_s(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=ct(this.item,xt("span.submenu-indicator"+vn.asCSSSelector(rt.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(_e(this.element,We.KEY_UP,t=>{const i=new ii(t);(i.equals(17)||i.equals(3))&&(en.stop(t,!0),this.createSubmenu(!0))})),this._register(_e(this.element,We.KEY_DOWN,t=>{const i=new ii(t);_s()===this.item&&(i.equals(17)||i.equals(3))&&en.stop(t,!0)})),this._register(_e(this.element,We.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(_e(this.element,We.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(_e(this.element,We.FOCUS_OUT,t=>{this.element&&!mr(_s(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){en.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,r){const s={top:0,left:0};return s.left=Wv(e.width,t.width,{position:r.horizontal===vN.Right?0:1,offset:i.left,size:i.width}),s.left>=i.left&&s.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(s.left=i.left+10),i.top+=10,i.height=0),s.top=Wv(e.height,t.height,{position:0,offset:i.top,size:0}),s.top+t.height===i.top&&s.top+i.height+t.height<=e.height&&(s.top+=i.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=ct(this.element,xt("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=bt(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new H0(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new o8],this.submenuOptions,this.menuStyle);const r=this.element.getBoundingClientRect(),s={top:r.top-i,left:r.left,height:r.height+2*i,width:r.width},o=this.submenuContainer.getBoundingClientRect(),a=bt(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new sd(a.innerWidth,a.innerHeight),sd.lift(o),s,this.expandDirection);this.submenuContainer.style.left=`${c-o.left}px`,this.submenuContainer.style.top=`${l-o.top}px`,this.submenuDisposables.add(_e(this.submenuContainer,We.KEY_UP,u=>{new ii(u).equals(15)&&(en.stop(u,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(_e(this.submenuContainer,We.KEY_DOWN,u=>{new ii(u).equals(15)&&en.stop(u,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)==null||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class pX extends kV{constructor(e,t,i,r){super(e,t,i),this.menuStyles=r}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function Het(n){const e=C6,t=e.exec(n);if(!t)return n;const i=!t[1];return n.replace(e,i?"$2$3":"").trim()}function mX(n){const e=Que()[n.id];return`.codicon-${n.id}:before { content: '\\${e.toString(16)}'; }`}function Vet(n,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${mX(rt.menuSelection)}
${mX(rt.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const i=n.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const r=n.scrollbarSliderBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${r};
				}
			`);const s=n.scrollbarSliderHoverBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${s};
				}
			`);const o=n.scrollbarSliderActiveBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${o};
				}
			`)}return t}class zet{constructor(e,t,i,r){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=r,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=_s();let i;const r=kr(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{var u;this.lastContainer=s;const o=e.getMenuClassName?e.getMenuClassName():"";o&&(s.className+=" "+o),this.options.blockMouse&&(this.block=s.appendChild(xt(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(u=this.blockDisposable)==null||u.dispose(),this.blockDisposable=_e(this.block,We.MOUSE_DOWN,d=>d.stopPropagation()));const a=new dt,l=e.actionRunner||new Jp;l.onWillRun(d=>this.onActionRun(d,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),i=new H0(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:d=>this.keybindingService.lookupKeybinding(d.id)},Oet),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=bt(s);return a.add(_e(c,We.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(_e(c,We.MOUSE_DOWN,d=>{if(d.defaultPrevented)return;const h=new nc(c,d);let f=h.target;if(!h.rightButton){for(;f;){if(f===s)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),du(a,i)},focus:()=>{i==null||i.focus(!!e.autoSelectFirstItem)},onHide:s=>{var o,a,l;(o=e.onHide)==null||o.call(e,!!s),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)==null||a.dispose(),this.blockDisposable=null,this.lastContainer&&(_s()===this.lastContainer||mr(_s(),this.lastContainer))&&((l=this.focusToReturn)==null||l.focus()),this.lastContainer=null}},r,!!r)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!aS(e.error)&&this.notificationService.error(e.error)}}var Wet=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Xm=function(n,e){return function(t,i){e(t,i,n)}};let w6=class extends ke{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new zet(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,r,s,o){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=r,this.menuService=s,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new ae),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new ae)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=S6.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var i;(i=e.onHide)==null||i.call(e,t),this._onDidHideContextMenu.fire()}}),jh.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};w6=Wet([Xm(0,wm),Xm(1,Ec),Xm(2,wS),Xm(3,Wr),Xm(4,ym),Xm(5,In)],w6);var S6;(function(n){function e(i){return i&&i.menuId instanceof Br}function t(i,r,s){if(!e(i))return i;const{menuId:o,menuActionOptions:a,contextKeyService:l}=i;return{...i,getActions:()=>{const c=[];if(o){const u=r.getMenuActions(o,l??s,a);Pet(u,c)}return i.getActions?Cs.join(i.getActions(),c):c}}}n.transform=t})(S6||(S6={}));var bN;(function(n){n[n.API=0]="API",n[n.USER=1]="USER"})(bN||(bN={}));var EV=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_N=function(n,e){return function(t,i){e(t,i,n)}};let x6=class{constructor(e){this._commandService=e}async open(e,t){if(!LH(e,Wt.command))return!1;if(!(t!=null&&t.allowCommands)||(typeof e=="string"&&(e=Ut.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=Y8(decodeURIComponent(e.query))}catch{try{i=Y8(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};x6=EV([_N(0,ga)],x6);let k6=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=Ut.parse(e));const{selection:i,uri:r}=fXe(e);return e=r,e.scheme===Wt.file&&(e=jXe(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t!=null&&t.fromUserGesture?bN.USER:bN.API,...t==null?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0}};k6=EV([_N(0,or)],k6);let E6=class{constructor(e,t){this._openers=new Eo,this._validators=new Eo,this._resolvers=new Eo,this._resolvedUriTargets=new ca(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Eo,this._defaultExternalOpener={openExternal:async i=>(tY(i,Wt.http,Wt.https)?Rde(i):zn.location.href=i,!0)},this._openers.push({open:async(i,r)=>r!=null&&r.openExternal||tY(i,Wt.mailto,Wt.http,Wt.https,Wt.vsls)?(await this._doOpenExternal(i,r),!0):!1}),this._openers.push(new x6(t)),this._openers.push(new k6(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const i=typeof e=="string"?Ut.parse(e):e,r=this._resolvedUriTargets.get(i)??e;for(const s of this._validators)if(!await s.shouldOpen(r,t))return!1;for(const s of this._openers)if(await s.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const r=await i.resolveExternalUri(e,t);if(r)return this._resolvedUriTargets.has(r.resolved)||this._resolvedUriTargets.set(r.resolved,e),r}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i=typeof e=="string"?Ut.parse(e):e;let r;try{r=(await this.resolveExternalUri(i,t)).resolved}catch{r=i}let s;if(typeof e=="string"&&i.toString()===r.toString()?s=e:s=encodeURI(r.toString(!0)),t!=null&&t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(s,{sourceUri:i,preferredOpenerId:o},wl.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:i},wl.None)}dispose(){this._validators.clear()}};E6=EV([_N(0,or),_N(1,ga)],E6);const NS=cn("editorWorkerService");var ka;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(ka||(ka={}));(function(n){function e(o,a){return a-o}n.compare=e;const t=Object.create(null);t[n.Error]=S("sev.error","Error"),t[n.Warning]=S("sev.warning","Warning"),t[n.Info]=S("sev.info","Info");function i(o){return t[o]||""}n.toString=i;function r(o){switch(o){case Ki.Error:return n.Error;case Ki.Warning:return n.Warning;case Ki.Info:return n.Info;case Ki.Ignore:return n.Hint}}n.fromSeverity=r;function s(o){switch(o){case n.Error:return Ki.Error;case n.Warning:return Ki.Warning;case n.Info:return Ki.Info;case n.Hint:return Ki.Ignore}}n.toSeverity=s})(ka||(ka={}));var vX;(function(n){const e="";function t(r){return i(r,!0)}n.makeKey=t;function i(r,s){const o=[e];return r.source?o.push(r.source.replace("","\\")):o.push(e),r.code?typeof r.code=="string"?o.push(r.code.replace("","\\")):o.push(r.code.value.replace("","\\")):o.push(e),r.severity!==void 0&&r.severity!==null?o.push(ka.toString(r.severity)):o.push(e),r.message&&s?o.push(r.message.replace("","\\")):o.push(e),r.startLineNumber!==void 0&&r.startLineNumber!==null?o.push(r.startLineNumber.toString()):o.push(e),r.startColumn!==void 0&&r.startColumn!==null?o.push(r.startColumn.toString()):o.push(e),r.endLineNumber!==void 0&&r.endLineNumber!==null?o.push(r.endLineNumber.toString()):o.push(e),r.endColumn!==void 0&&r.endColumn!==null?o.push(r.endColumn.toString()):o.push(e),o.push(e),o.join("")}n.makeKeyOptionalMessage=i})(vX||(vX={}));const Em=cn("markerService"),Bfe=Z("editor.lineHighlightBackground",null,S("lineHighlight","Background color for the highlight of line at the cursor position.")),bX=Z("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:kn},S("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));Z("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},S("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);Z("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Fi,hcLight:Fi},S("rangeHighlightBorder","Background color of the border around highlighted ranges."));Z("editor.symbolHighlightBackground",{dark:Kh,light:Kh,hcDark:null,hcLight:null},S("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);Z("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Fi,hcLight:Fi},S("symbolHighlightBorder","Background color of the border around highlighted symbols."));const gM=Z("editorCursor.foreground",{dark:"#AEAFAD",light:De.black,hcDark:De.white,hcLight:"#0F4A85"},S("caret","Color of the editor cursor.")),LV=Z("editorCursor.background",null,S("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Hfe=Z("editorMultiCursor.primary.foreground",gM,S("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),$et=Z("editorMultiCursor.primary.background",LV,S("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Vfe=Z("editorMultiCursor.secondary.foreground",gM,S("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),Uet=Z("editorMultiCursor.secondary.background",LV,S("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),NV=Z("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},S("editorWhitespaces","Color of whitespace characters in the editor.")),jet=Z("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:De.white,hcLight:"#292929"},S("editorLineNumbers","Color of editor line numbers.")),Ket=Z("editorIndentGuide.background",NV,S("editorIndentGuides","Color of the editor indentation guides."),!1,S("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),qet=Z("editorIndentGuide.activeBackground",NV,S("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,S("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),TS=Z("editorIndentGuide.background1",Ket,S("editorIndentGuides1","Color of the editor indentation guides (1).")),Get=Z("editorIndentGuide.background2","#00000000",S("editorIndentGuides2","Color of the editor indentation guides (2).")),Yet=Z("editorIndentGuide.background3","#00000000",S("editorIndentGuides3","Color of the editor indentation guides (3).")),Zet=Z("editorIndentGuide.background4","#00000000",S("editorIndentGuides4","Color of the editor indentation guides (4).")),Xet=Z("editorIndentGuide.background5","#00000000",S("editorIndentGuides5","Color of the editor indentation guides (5).")),Qet=Z("editorIndentGuide.background6","#00000000",S("editorIndentGuides6","Color of the editor indentation guides (6).")),IS=Z("editorIndentGuide.activeBackground1",qet,S("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),Jet=Z("editorIndentGuide.activeBackground2","#00000000",S("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),ett=Z("editorIndentGuide.activeBackground3","#00000000",S("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),ttt=Z("editorIndentGuide.activeBackground4","#00000000",S("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),ntt=Z("editorIndentGuide.activeBackground5","#00000000",S("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),itt=Z("editorIndentGuide.activeBackground6","#00000000",S("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),rtt=Z("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Fi,hcLight:Fi},S("editorActiveLineNumber","Color of editor active line number"),!1,S("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));Z("editorLineNumber.activeForeground",rtt,S("editorActiveLineNumber","Color of editor active line number"));const stt=Z("editorLineNumber.dimmedForeground",null,S("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));Z("editorRuler.foreground",{dark:"#5A5A5A",light:De.lightgrey,hcDark:De.white,hcLight:"#292929"},S("editorRuler","Color of the editor rulers."));Z("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},S("editorCodeLensForeground","Foreground color of editor CodeLens"));Z("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},S("editorBracketMatchBackground","Background color behind matching brackets"));Z("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:kn,hcLight:kn},S("editorBracketMatchBorder","Color for matching brackets boxes"));const ott=Z("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},S("editorOverviewRulerBorder","Color of the overview ruler border.")),att=Z("editorOverviewRuler.background",null,S("editorOverviewRulerBackground","Background color of the editor overview ruler."));Z("editorGutter.background",mc,S("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));Z("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:De.fromHex("#fff").transparent(.8),hcLight:kn},S("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const ltt=Z("editorUnnecessaryCode.opacity",{dark:De.fromHex("#000a"),light:De.fromHex("#0007"),hcDark:null,hcLight:null},S("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));Z("editorGhostText.border",{dark:null,light:null,hcDark:De.fromHex("#fff").transparent(.8),hcLight:De.fromHex("#292929").transparent(.8)},S("editorGhostTextBorder","Border color of ghost text in the editor."));Z("editorGhostText.foreground",{dark:De.fromHex("#ffffff56"),light:De.fromHex("#0007"),hcDark:null,hcLight:null},S("editorGhostTextForeground","Foreground color of the ghost text in the editor."));Z("editorGhostText.background",null,S("editorGhostTextBackground","Background color of the ghost text in the editor."));const ctt=new De(new _n(0,122,204,.6));Z("editorOverviewRuler.rangeHighlightForeground",ctt,S("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const utt=Z("editorOverviewRuler.errorForeground",{dark:new De(new _n(255,18,18,.7)),light:new De(new _n(255,18,18,.7)),hcDark:new De(new _n(255,50,50,1)),hcLight:"#B5200D"},S("overviewRuleError","Overview ruler marker color for errors.")),dtt=Z("editorOverviewRuler.warningForeground",{dark:If,light:If,hcDark:tN,hcLight:tN},S("overviewRuleWarning","Overview ruler marker color for warnings.")),htt=Z("editorOverviewRuler.infoForeground",{dark:nm,light:nm,hcDark:nN,hcLight:nN},S("overviewRuleInfo","Overview ruler marker color for infos.")),zfe=Z("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},S("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Wfe=Z("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},S("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),$fe=Z("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},S("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),Ufe=Z("editorBracketHighlight.foreground4","#00000000",S("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),jfe=Z("editorBracketHighlight.foreground5","#00000000",S("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Kfe=Z("editorBracketHighlight.foreground6","#00000000",S("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),ftt=Z("editorBracketHighlight.unexpectedBracket.foreground",{dark:new De(new _n(255,18,18,.8)),light:new De(new _n(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},S("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),gtt=Z("editorBracketPairGuide.background1","#00000000",S("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),ptt=Z("editorBracketPairGuide.background2","#00000000",S("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),mtt=Z("editorBracketPairGuide.background3","#00000000",S("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),vtt=Z("editorBracketPairGuide.background4","#00000000",S("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),btt=Z("editorBracketPairGuide.background5","#00000000",S("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),_tt=Z("editorBracketPairGuide.background6","#00000000",S("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),Ctt=Z("editorBracketPairGuide.activeBackground1","#00000000",S("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),ytt=Z("editorBracketPairGuide.activeBackground2","#00000000",S("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),wtt=Z("editorBracketPairGuide.activeBackground3","#00000000",S("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Stt=Z("editorBracketPairGuide.activeBackground4","#00000000",S("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),xtt=Z("editorBracketPairGuide.activeBackground5","#00000000",S("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),ktt=Z("editorBracketPairGuide.activeBackground6","#00000000",S("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));Z("editorUnicodeHighlight.border",If,S("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));Z("editorUnicodeHighlight.background",CYe,S("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Yd((n,e)=>{const t=n.getColor(mc),i=n.getColor(Bfe),r=i&&!i.isTransparent()?i:t;r&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${r}; }`)});function Ett(n,e){const t=[],i=[];for(const r of n)e.has(r)||t.push(r);for(const r of e)n.has(r)||i.push(r);return{removed:t,added:i}}function Ltt(n,e){const t=new Set;for(const i of e)n.has(i)&&t.add(i);return t}var Ntt=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_X=function(n,e){return function(t,i){e(t,i,n)}};let L6=class extends ke{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new ae),this._markerDecorations=new ca,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new Ttt(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var i;const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Wt.inMemory||e.uri.scheme===Wt.internal||e.uri.scheme===Wt.vscode)&&((i=this._markerService)==null||i.read({resource:e.uri}).map(r=>r.owner).forEach(r=>this._markerService.remove(r,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};L6=Ntt([_X(0,$s),_X(1,Em)],L6);class Ttt extends ke{constructor(e){super(),this.model=e,this._map=new wqe,this._register(Pt(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:i}=Ett(new Set(this._map.keys()),new Set(e));if(t.length===0&&i.length===0)return!1;const r=i.map(a=>this._map.get(a)),s=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),o=this.model.deltaDecorations(r,s);for(const a of i)this._map.delete(a);for(let a=0;a<o.length;a++)this._map.set(t[a],o[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=te.lift(t);if(t.severity===ka.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const r=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(r===1||i.endColumn>=r)return i;const s=e.getWordAtPosition(i.getStartPosition());s&&(i=new te(i.startLineNumber,s.startColumn,i.endLineNumber,s.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const r=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);r<i.endColumn&&(i=new te(i.startLineNumber,r,i.endLineNumber,i.endColumn),t.startColumn=r)}return i}_createDecorationOption(e){let t,i,r,s,o;switch(e.severity){case ka.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",r=0;break;case ka.Info:t="squiggly-info",i=Zm(htt),r=10,o={color:Zm(FYe),position:1};break;case ka.Warning:t="squiggly-warning",i=Zm(dtt),r=20,o={color:Zm(BYe),position:1};break;case ka.Error:default:t="squiggly-error",i=Zm(utt),r=30,o={color:Zm(HYe),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:KL.Right},minimap:o,zIndex:r,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}const qfe=cn("markerDecorationsService");class er{static _nextVisibleColumn(e,t,i){return e===9?er.nextRenderTabStop(t,i):Ef(e)||xH(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const r=Math.min(t-1,e.length),s=e.substring(0,r),o=new PL(s);let a=0;for(;!o.eol();){const l=OL(s,r,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const r=e.length,s=new PL(e);let o=0,a=1;for(;!s.eol();){const l=OL(e,r,s.offset);s.nextGraphemeLength();const c=this._nextVisibleColumn(l,o,i),u=s.offset+1;if(c>=t){const d=t-o;return c-t<d?u:a}o=c,a=u}return r+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function Itt(n,e,t){let i=0;for(let s=0;s<n.length;s++)n.charAt(s)==="	"?i=er.nextIndentTabStop(i,e):i++;let r="";if(!t){const s=Math.floor(i/e);i=i%e;for(let o=0;o<s;o++)r+="	"}for(let s=0;s<i;s++)r+=" ";return r}function Gfe(n,e,t){let i=To(n);return i===-1&&(i=n.length),Itt(n.substring(0,i),e,t)+n.substring(i)}class CX{constructor(e,t,i,r){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=r}}class Dtt{constructor(e,t,i,r,s,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=r,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class Mtt extends Dtt{constructor(e,t,i,r,s,o,a){super(e,t,i,r,s,o),this.minVisibleColumnIndentation=a}}function Rtt(n,e,t,i){return n!==t?Ri(t-n,i):Ri(0,i-e)}const so=0;function CN(n){return n===0}const ea=2**26;function Ri(n,e){return n*ea+e}function Ma(n){const e=n,t=Math.floor(e/ea),i=e-t*ea;return new Tf(t,i)}function Att(n){return Math.floor(n/ea)}function ji(n,e){let t=n+e;return e>=ea&&(t=t-n%ea),t}function Ott(n,e){return n.reduce((t,i)=>ji(t,e(i)),so)}function Yfe(n,e){return n===e}function gw(n,e){const t=n,i=e;if(i-t<=0)return so;const s=Math.floor(t/ea),o=Math.floor(i/ea),a=i-o*ea;if(s===o){const l=t-s*ea;return Ri(0,a-l)}else return Ri(o-s,a)}function V0(n,e){return n<e}function z0(n,e){return n<=e}function A_(n,e){return n>=e}function qv(n){return Ri(n.lineNumber-1,n.column-1)}function _p(n,e){const t=n,i=Math.floor(t/ea),r=t-i*ea,s=e,o=Math.floor(s/ea),a=s-o*ea;return new te(i+1,r+1,o+1,a+1)}function Ptt(n){const e=mb(n);return Ri(e.length-1,e[e.length-1].length)}class vd{static fromModelContentChanges(e){return e.map(i=>{const r=te.lift(i.range);return new vd(qv(r.getStartPosition()),qv(r.getEndPosition()),Ptt(i.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${Ma(this.startOffset)}...${Ma(this.endOffset)}) -> ${Ma(this.newLength)}`}}class Ftt{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>TV.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return i===null?null:gw(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Ri(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Ri(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Ma(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Ri(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Ri(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(z0(i,e)){this.nextEditIdx++;const r=Ma(i),s=Ma(this.translateOldToCur(t.endOffsetBeforeObj)),o=r.lineCount-s.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=r.columnCount-s.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class TV{static from(e){return new TV(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=Ma(t),this.endOffsetAfterObj=Ma(ji(e,i)),this.offsetObj=Ma(e)}}const fk=[],_a=class _a{static create(e,t){if(e<=128&&t.length===0){let i=_a.cache[e];return i||(i=new _a(e,t),_a.cache[e]=i),i}return new _a(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let r=i>>5;if(r===0){const o=1<<i|this.items;return o===this.items?this:_a.create(o,this.additionalItems)}r--;const s=this.additionalItems.slice(0);for(;s.length<r;)s.push(0);return s[r]|=1<<(i&31),_a.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===fk&&e.additionalItems===fk)return t===this.items?this:t===e.items?e:_a.create(t,fk);const i=[];for(let r=0;r<Math.max(this.additionalItems.length,e.additionalItems.length);r++){const s=this.additionalItems[r]||0,o=e.additionalItems[r]||0;i.push(s|o)}return _a.create(t,i)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}};_a.cache=new Array(129),_a.empty=_a.create(0,fk);let xo=_a;const yX={getKey(n){return n}};class Btt{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class IV{get length(){return this._length}constructor(e){this._length=e}}class pw extends IV{static create(e,t,i){let r=e.length;return t&&(r=ji(r,t.length)),i&&(r=ji(r,i.length)),new pw(r,e,t,i,t?t.missingOpeningBracketIds:xo.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,r,s){super(e),this.openingBracket=t,this.child=i,this.closingBracket=r,this.missingOpeningBracketIds=s}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new pw(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(ji(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Cu extends IV{static create23(e,t,i,r=!1){let s=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=ji(s,t.length),o=o.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");s=ji(s,i.length),o=o.merge(i.missingOpeningBracketIds)}return r?new Htt(s,e.listHeight+1,e,t,i,o):new mw(s,e.listHeight+1,e,t,i,o)}static getEmpty(){return new Vtt(so,0,[],xo.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const i=t.childrenLength;if(i===0)throw new Tn;t=t.getChild(i-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let r=1;r<e;r++){const s=this.getChild(r);t=ji(t,s.length),i=i.merge(s.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,r=e;for(let s=0;s<this.childrenLength;s++){const o=this.getChild(s);o&&(i=Math.min(i,o.computeMinIndentation(r,t)),r=ji(r,o.length))}return this.cachedMinIndentation=i,i}}class mw extends Cu{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,r,s,o){super(e,t,o),this._item1=i,this._item2=r,this._item3=s}deepClone(){return new mw(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class Htt extends mw{toMutable(){return new mw(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class yN extends Cu{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,r){super(e,t,r),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new yN(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class Vtt extends yN{toMutable(){return new yN(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const ztt=[];class DV extends IV{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return ztt}deepClone(){return this}}class Eg extends DV{get kind(){return 0}get missingOpeningBracketIds(){return xo.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=Ma(e),r=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,s=Att(ji(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=r;a<=s;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const u=er.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,u)}return o}}class wN extends DV{static create(e,t,i){return new wN(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return xo.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class Wtt extends DV{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class Ih{constructor(e,t,i,r,s){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=r,this.astNode=s}}class $tt{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new Utt(this.textModel,this.bracketTokens),this._offset=so,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Ri(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=ji(this._offset,e);const t=Ma(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=ji(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class Utt{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const s=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s.length,s}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const s=this.lineTokens,o=s.getCount();let a=null;if(this.lineTokenOffset<o){const l=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=Yl.getTokenType(l)===0,u=Yl.containsBalancedBrackets(l),d=s.getEndOffset(this.lineTokenOffset);if(u&&c&&this.lineCharOffset<d){const h=s.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,d),g=this.bracketTokens.getSingleLanguageBracketTokens(h),p=g.regExpGlobal;if(p){p.lastIndex=0;const v=p.exec(f);v&&(a=g.getToken(v[0]),a&&(this.lineCharOffset+=v.index))}}if(i+=d-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=d}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const r=Rtt(e,t,this.lineIdx,this.lineCharOffset);return new Ih(r,0,-1,xo.getEmpty(),new Eg(r))}}class jtt{constructor(e,t){this.text=e,this._offset=so,this.idx=0;const i=t.getRegExpStr(),r=i?new RegExp(i+`|
`,"gi"):null,s=[];let o,a=0,l=0,c=0,u=0;const d=[];for(let g=0;g<60;g++)d.push(new Ih(Ri(0,g),0,-1,xo.getEmpty(),new Eg(Ri(0,g))));const h=[];for(let g=0;g<60;g++)h.push(new Ih(Ri(1,g),0,-1,xo.getEmpty(),new Eg(Ri(1,g))));if(r)for(r.lastIndex=0;(o=r.exec(e))!==null;){const g=o.index,p=o[0];if(p===`
`)a++,l=g+1;else{if(c!==g){let v;if(u===a){const b=g-c;if(b<d.length)v=d[b];else{const _=Ri(0,b);v=new Ih(_,0,-1,xo.getEmpty(),new Eg(_))}}else{const b=a-u,_=g-l;if(b===1&&_<h.length)v=h[_];else{const y=Ri(b,_);v=new Ih(y,0,-1,xo.getEmpty(),new Eg(y))}}s.push(v)}s.push(t.getToken(p)),c=g+p.length,u=a}}const f=e.length;if(c!==f){const g=u===a?Ri(0,f-c):Ri(a-u,f-l);s.push(new Ih(g,0,-1,xo.getEmpty(),new Eg(g)))}this.length=Ri(a,f-l),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new w$e}}class MV{static createFromLanguage(e,t){function i(s){return t.getKey(`${s.languageId}:::${s.bracketText}`)}const r=new Map;for(const s of e.bracketsNew.openingBrackets){const o=Ri(0,s.bracketText.length),a=i(s),l=xo.getEmpty().add(a,yX);r.set(s.bracketText,new Ih(o,1,a,l,wN.create(o,s,l)))}for(const s of e.bracketsNew.closingBrackets){const o=Ri(0,s.bracketText.length);let a=xo.getEmpty();const l=s.getOpeningBrackets();for(const c of l)a=a.add(i(c),yX);r.set(s.bracketText,new Ih(o,2,i(l[0]),a,wN.create(o,s,a)))}return new MV(r)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>Ktt(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function Ktt(n){let e=zd(n);return/^[\w ]+/.test(n)&&(e=`\\b${e}`),/[\w ]+$/.test(n)&&(e=`${e}\\b`),e}class qtt{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=MV.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function Gtt(n){if(n.length===0)return null;if(n.length===1)return n[0];let e=0;function t(){if(e>=n.length)return null;const o=e,a=n[o].listHeight;for(e++;e<n.length&&n[e].listHeight===a;)e++;return e-o>=2?Zfe(o===0&&e===n.length?n:n.slice(o,e),!1):n[o]}let i=t(),r=t();if(!r)return i;for(let o=t();o;o=t())wX(i,r)<=wX(r,o)?(i=fA(i,r),r=o):r=fA(r,o);return fA(i,r)}function Zfe(n,e=!1){if(n.length===0)return null;if(n.length===1)return n[0];let t=n.length;for(;t>3;){const i=t>>1;for(let r=0;r<i;r++){const s=r<<1;n[r]=Cu.create23(n[s],n[s+1],s+3===t?n[s+2]:null,e)}t=i}return Cu.create23(n[0],n[1],t>=3?n[2]:null,e)}function wX(n,e){return Math.abs(n.listHeight-e.listHeight)}function fA(n,e){return n.listHeight===e.listHeight?Cu.create23(n,e,null,!1):n.listHeight>e.listHeight?Ytt(n,e):Ztt(e,n)}function Ytt(n,e){n=n.toMutable();let t=n;const i=[];let r;for(;;){if(e.listHeight===t.listHeight){r=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let s=i.length-1;s>=0;s--){const o=i[s];r?o.childrenLength>=3?r=Cu.create23(o.unappendChild(),r,null,!1):(o.appendChildOfSameHeight(r),r=void 0):o.handleChildrenChanged()}return r?Cu.create23(n,r,null,!1):n}function Ztt(n,e){n=n.toMutable();let t=n;const i=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let r=e;for(let s=i.length-1;s>=0;s--){const o=i[s];r?o.childrenLength>=3?r=Cu.create23(r,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(r),r=void 0):o.handleChildrenChanged()}return r?Cu.create23(r,n,null,!1):n}class Xtt{constructor(e){this.lastOffset=so,this.nextNodes=[e],this.offsets=[so],this.idxs=[]}readLongestNodeAt(e,t){if(V0(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=l_(this.nextNodes);if(!i)return;const r=l_(this.offsets);if(V0(e,r))return;if(V0(r,e))if(ji(r,i.length)<=e)this.nextNodeAfterCurrent();else{const s=gA(i);s!==-1?(this.nextNodes.push(i.getChild(s)),this.offsets.push(r),this.idxs.push(s)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const s=gA(i);if(s===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(s)),this.offsets.push(r),this.idxs.push(s)}}}}nextNodeAfterCurrent(){for(;;){const e=l_(this.offsets),t=l_(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=l_(this.nextNodes),r=gA(i,this.idxs[this.idxs.length-1]);if(r!==-1){this.nextNodes.push(i.getChild(r)),this.offsets.push(ji(e,t.length)),this.idxs[this.idxs.length-1]=r;break}else this.idxs.pop()}}}function gA(n,e=-1){for(;;){if(e++,e>=n.childrenLength)return-1;if(n.getChild(e))return e}}function l_(n){return n.length>0?n[n.length-1]:void 0}function SX(n,e,t,i){return new Qtt(n,e,t,i).parseDocument()}class Qtt{constructor(e,t,i,r){if(this.tokenizer=e,this.createImmutableLists=r,this._itemsConstructed=0,this._itemsFromCache=0,i&&r)throw new Error("Not supported");this.oldNodeReader=i?new Xtt(i):void 0,this.positionMapper=new Ftt(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(xo.getEmpty(),0);return e||(e=Cu.getEmpty()),e}parseList(e,t){const i=[];for(;;){let s=this.tryReadChildFromCache(e);if(!s){const o=this.tokenizer.peek();if(!o||o.kind===2&&o.bracketIds.intersects(e))break;s=this.parseChild(e,t+1)}s.kind===4&&s.childrenLength===0||i.push(s)}return this.oldNodeReader?Gtt(i):Zfe(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!CN(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),r=>t!==null&&!V0(r.length,t)?!1:r.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new Wtt(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new Eg(i.length);const r=e.merge(i.bracketIds),s=this.parseList(r,t+1),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===i.bracketId||o.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),pw.create(i.astNode,s,o.astNode)):pw.create(i.astNode,s,null)}default:throw new Error("unexpected")}}}function SN(n,e){if(n.length===0)return e;if(e.length===0)return n;const t=new Hd(xX(n)),i=xX(e);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let r=t.dequeue();function s(c){if(c===void 0){const d=t.takeWhile(h=>!0)||[];return r&&d.unshift(r),d}const u=[];for(;r&&!CN(c);){const[d,h]=r.splitAt(c);u.push(d),c=gw(d.lengthAfter,c),r=h??t.dequeue()}return CN(c)||u.push(new Yh(!1,c,c)),u}const o=[];function a(c,u,d){if(o.length>0&&Yfe(o[o.length-1].endOffset,c)){const h=o[o.length-1];o[o.length-1]=new vd(h.startOffset,u,ji(h.newLength,d))}else o.push({startOffset:c,endOffset:u,newLength:d})}let l=so;for(const c of i){const u=s(c.lengthBefore);if(c.modified){const d=Ott(u,f=>f.lengthBefore),h=ji(l,d);a(l,h,c.lengthAfter),l=h}else for(const d of u){const h=l;l=ji(l,d.lengthBefore),d.modified&&a(h,l,d.lengthAfter)}}return o}class Yh{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=gw(e,this.lengthAfter);return Yfe(t,so)?[this,void 0]:this.modified?[new Yh(this.modified,this.lengthBefore,e),new Yh(this.modified,so,t)]:[new Yh(this.modified,e,e),new Yh(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Ma(this.lengthBefore)} -> ${Ma(this.lengthAfter)}`}}function xX(n){const e=[];let t=so;for(const i of n){const r=gw(t,i.startOffset);CN(r)||e.push(new Yh(!1,r,r));const s=gw(i.startOffset,i.endOffset);e.push(new Yh(!0,s,i.newLength)),t=i.endOffset}return e}class Jtt extends ke{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new ae,this.denseKeyProvider=new Btt,this.brackets=new qtt(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),r=new jtt(this.textModel.getValue(),i);this.initialAstWithoutTokens=SX(r,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new vd(Ri(i.fromLineNumber-1,0),Ri(i.toLineNumber,0),Ri(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=vd.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=SN(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=SN(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const r=t,s=new $tt(this.textModel,this.brackets);return SX(s,e,r,i)}getBracketsInRange(e,t){this.flushQueue();const i=Ri(e.startLineNumber-1,e.startColumn-1),r=Ri(e.endLineNumber-1,e.endColumn-1);return new gp(s=>{const o=this.initialAstWithoutTokens||this.astWithTokens;N6(o,so,o.length,i,r,s,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const i=qv(e.getStartPosition()),r=qv(e.getEndPosition());return new gp(s=>{const o=this.initialAstWithoutTokens||this.astWithTokens,a=new ent(s,t,this.textModel);T6(o,so,o.length,i,r,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return Qfe(t,so,t.length,qv(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return Xfe(t,so,t.length,qv(e))}}function Xfe(n,e,t,i){if(n.kind===4||n.kind===2){const r=[];for(const s of n.children)t=ji(e,s.length),r.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let s=r.length-1;s>=0;s--){const{nodeOffsetStart:o,nodeOffsetEnd:a}=r[s];if(V0(o,i)){const l=Xfe(n.children[s],o,a,i);if(l)return l}}return null}else{if(n.kind===3)return null;if(n.kind===1){const r=_p(e,t);return{bracketInfo:n.bracketInfo,range:r}}}return null}function Qfe(n,e,t,i){if(n.kind===4||n.kind===2){for(const r of n.children){if(t=ji(e,r.length),V0(i,t)){const s=Qfe(r,e,t,i);if(s)return s}e=t}return null}else{if(n.kind===3)return null;if(n.kind===1){const r=_p(e,t);return{bracketInfo:n.bracketInfo,range:r}}}return null}function N6(n,e,t,i,r,s,o,a,l,c,u=!1){if(o>200)return!0;e:for(;;)switch(n.kind){case 4:{const d=n.childrenLength;for(let h=0;h<d;h++){const f=n.getChild(h);if(f){if(t=ji(e,f.length),z0(e,r)&&A_(t,i)){if(A_(t,r)){n=f;continue e}if(!N6(f,e,t,i,r,s,o,0,l,c))return!1}e=t}}return!0}case 2:{const d=!c||!n.closingBracket||n.closingBracket.bracketInfo.closesColorized(n.openingBracket.bracketInfo);let h=0;if(l){let g=l.get(n.openingBracket.text);g===void 0&&(g=0),h=g,d&&(g++,l.set(n.openingBracket.text,g))}const f=n.childrenLength;for(let g=0;g<f;g++){const p=n.getChild(g);if(p){if(t=ji(e,p.length),z0(e,r)&&A_(t,i)){if(A_(t,r)&&p.kind!==1){n=p,d?(o++,a=h+1):a=h;continue e}if((d||p.kind!==1||!n.closingBracket)&&!N6(p,e,t,i,r,s,d?o+1:o,d?h+1:h,l,c,!n.closingBracket))return!1}e=t}}return l==null||l.set(n.openingBracket.text,h),!0}case 3:{const d=_p(e,t);return s(new CX(d,o-1,0,!0))}case 1:{const d=_p(e,t);return s(new CX(d,o-1,a-1,u))}case 0:return!0}}class ent{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function T6(n,e,t,i,r,s,o,a){var c;if(o>200)return!0;let l=!0;if(n.kind===2){let u=0;if(a){let f=a.get(n.openingBracket.text);f===void 0&&(f=0),u=f,f++,a.set(n.openingBracket.text,f)}const d=ji(e,n.openingBracket.length);let h=-1;if(s.includeMinIndentation&&(h=n.computeMinIndentation(e,s.textModel)),l=s.push(new Mtt(_p(e,t),_p(e,d),n.closingBracket?_p(ji(d,((c=n.child)==null?void 0:c.length)||so),t):void 0,o,u,n,h)),e=d,l&&n.child){const f=n.child;if(t=ji(e,f.length),z0(e,r)&&A_(t,i)&&(l=T6(f,e,t,i,r,s,o+1,a),!l))return!1}a==null||a.set(n.openingBracket.text,u)}else{let u=e;for(const d of n.children){const h=u;if(u=ji(u,d.length),z0(h,r)&&z0(i,u)&&(l=T6(d,h,u,i,r,s,o,a),!l))return!1}}return l}class tnt extends ke{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Vd),this.onDidChangeEmitter=new ae,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){var t;(!e.languageId||(t=this.bracketPairsTree.value)!=null&&t.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)==null||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new dt;this.bracketPairsTree.value=nnt(e.add(new Jtt(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!1))||gp.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!0))||gp.empty}getBracketsInRange(e,t=!1){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)==null?void 0:i.object.getBracketsInRange(e,t))||gp.empty}findMatchingBracketUp(e,t,i){const r=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(r.lineNumber,r.column);if(this.canBuildAST){const o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!o)return null;const a=this.getBracketPairsInRange(te.fromPositions(t,t)).findLast(l=>o.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const o=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!a)return null;const l=a.textIsBracket[o];return l?gk(this._findMatchingBracketUp(l,r,pA(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=this.getBracketPairsInRange(te.fromPositions(e,e)).filter(r=>r.closingBracketRange!==void 0&&(r.openingBracketRange.containsPosition(e)||r.closingBracketRange.containsPosition(e))).findLastMaxBy(fl(r=>r.openingBracketRange.containsPosition(e)?r.openingBracketRange:r.closingBracketRange,te.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=pA(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,r){const s=t.getCount(),o=t.getLanguageId(r);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=r-1;c>=0;c--){const u=t.getEndOffset(c);if(u<=a)break;if(Pc(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=u;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=r+1;c<s;c++){const u=t.getStartOffset(c);if(u>=l)break;if(Pc(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=u;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,r=this.textModel.tokenization.getLineTokens(i),s=this.textModel.getLineContent(i),o=r.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(o)).brackets;if(a&&!Pc(r.getStandardTokenType(o))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,r,a,o),u=null;for(;;){const d=Ya.findNextBracketInRange(a.forwardRegex,i,s,l,c);if(!d)break;if(d.startColumn<=e.column&&e.column<=d.endColumn){const h=s.substring(d.startColumn-1,d.endColumn-1).toLowerCase(),f=this._matchFoundBracket(d,a.textIsBracket[h],a.textIsOpenBracket[h],t);if(f){if(f instanceof nd)return null;u=f}}l=d.endColumn-1}if(u)return u}if(o>0&&r.getStartOffset(o)===e.column-1){const l=o-1,c=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(l)).brackets;if(c&&!Pc(r.getStandardTokenType(l))){const{searchStartOffset:u,searchEndOffset:d}=this._establishBracketSearchOffsets(e,r,c,l),h=Ya.findPrevBracketInRange(c.reversedRegex,i,s,u,d);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const f=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),g=this._matchFoundBracket(h,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(g)return g instanceof nd?null:g}}}return null}_matchFoundBracket(e,t,i,r){if(!t)return null;const s=i?this._findMatchingBracketDown(t,e.getEndPosition(),r):this._findMatchingBracketUp(t,e.getStartPosition(),r);return s?s instanceof nd?s:[e,s]:null}_findMatchingBracketUp(e,t,i){const r=e.languageId,s=e.reversedRegex;let o=-1,a=0;const l=(c,u,d,h)=>{for(;;){if(i&&++a%100===0&&!i())return nd.INSTANCE;const f=Ya.findPrevBracketInRange(s,c,u,d,h);if(!f)break;const g=u.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?o++:e.isClose(g)&&o--,o===0)return f;h=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const u=this.textModel.tokenization.getLineTokens(c),d=u.getCount(),h=this.textModel.getLineContent(c);let f=d-1,g=h.length,p=h.length;c===t.lineNumber&&(f=u.findTokenIndexAtOffset(t.column-1),g=t.column-1,p=t.column-1);let v=!0;for(;f>=0;f--){const b=u.getLanguageId(f)===r&&!Pc(u.getStandardTokenType(f));if(b)v?g=u.getStartOffset(f):(g=u.getStartOffset(f),p=u.getEndOffset(f));else if(v&&g!==p){const _=l(c,h,g,p);if(_)return _}v=b}if(v&&g!==p){const b=l(c,h,g,p);if(b)return b}}return null}_findMatchingBracketDown(e,t,i){const r=e.languageId,s=e.forwardRegex;let o=1,a=0;const l=(u,d,h,f)=>{for(;;){if(i&&++a%100===0&&!i())return nd.INSTANCE;const g=Ya.findNextBracketInRange(s,u,d,h,f);if(!g)break;const p=d.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?o++:e.isClose(p)&&o--,o===0)return g;h=g.endColumn-1}return null},c=this.textModel.getLineCount();for(let u=t.lineNumber;u<=c;u++){const d=this.textModel.tokenization.getLineTokens(u),h=d.getCount(),f=this.textModel.getLineContent(u);let g=0,p=0,v=0;u===t.lineNumber&&(g=d.findTokenIndexAtOffset(t.column-1),p=t.column-1,v=t.column-1);let b=!0;for(;g<h;g++){const _=d.getLanguageId(g)===r&&!Pc(d.getStandardTokenType(g));if(_)b||(p=d.getStartOffset(g)),v=d.getEndOffset(g);else if(b&&p!==v){const y=l(u,f,p,v);if(y)return y}b=_}if(b&&p!==v){const _=l(u,f,p,v);if(_)return _}}return null}findPrevBracket(e){var o;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((o=this.bracketPairsTree.value)==null?void 0:o.object.getFirstBracketBefore(t))||null;let i=null,r=null,s=null;for(let a=t.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),u=this.textModel.getLineContent(a);let d=c-1,h=u.length,f=u.length;if(a===t.lineNumber){d=l.findTokenIndexAtOffset(t.column-1),h=t.column-1,f=t.column-1;const p=l.getLanguageId(d);i!==p&&(i=p,r=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let g=!0;for(;d>=0;d--){const p=l.getLanguageId(d);if(i!==p){if(r&&s&&g&&h!==f){const b=Ya.findPrevBracketInRange(r.reversedRegex,a,u,h,f);if(b)return this._toFoundBracket(s,b);g=!1}i=p,r=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const v=!!r&&!Pc(l.getStandardTokenType(d));if(v)g?h=l.getStartOffset(d):(h=l.getStartOffset(d),f=l.getEndOffset(d));else if(s&&r&&g&&h!==f){const b=Ya.findPrevBracketInRange(r.reversedRegex,a,u,h,f);if(b)return this._toFoundBracket(s,b)}g=v}if(s&&r&&g&&h!==f){const p=Ya.findPrevBracketInRange(r.reversedRegex,a,u,h,f);if(p)return this._toFoundBracket(s,p)}}return null}findNextBracket(e){var a;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((a=this.bracketPairsTree.value)==null?void 0:a.object.getFirstBracketAfter(t))||null;const i=this.textModel.getLineCount();let r=null,s=null,o=null;for(let l=t.lineNumber;l<=i;l++){const c=this.textModel.tokenization.getLineTokens(l),u=c.getCount(),d=this.textModel.getLineContent(l);let h=0,f=0,g=0;if(l===t.lineNumber){h=c.findTokenIndexAtOffset(t.column-1),f=t.column-1,g=t.column-1;const v=c.getLanguageId(h);r!==v&&(r=v,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew)}let p=!0;for(;h<u;h++){const v=c.getLanguageId(h);if(r!==v){if(o&&s&&p&&f!==g){const _=Ya.findNextBracketInRange(s.forwardRegex,l,d,f,g);if(_)return this._toFoundBracket(o,_);p=!1}r=v,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew}const b=!!s&&!Pc(c.getStandardTokenType(h));if(b)p||(f=c.getStartOffset(h)),g=c.getEndOffset(h);else if(o&&s&&p&&f!==g){const _=Ya.findNextBracketInRange(s.forwardRegex,l,d,f,g);if(_)return this._toFoundBracket(o,_)}p=b}if(o&&s&&p&&f!==g){const v=Ya.findNextBracketInRange(s.forwardRegex,l,d,f,g);if(v)return this._toFoundBracket(o,v)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const f=te.fromPositions(i),g=this.getBracketPairsInRange(te.fromPositions(i,i)).findLast(p=>p.closingBracketRange!==void 0&&p.range.strictContainsRange(f));return g?[g.openingBracketRange,g.closingBracketRange]:null}const r=pA(t),s=this.textModel.getLineCount(),o=new Map;let a=[];const l=(f,g)=>{if(!o.has(f)){const p=[];for(let v=0,b=g?g.brackets.length:0;v<b;v++)p[v]=0;o.set(f,p)}a=o.get(f)};let c=0;const u=(f,g,p,v,b)=>{for(;;){if(r&&++c%100===0&&!r())return nd.INSTANCE;const _=Ya.findNextBracketInRange(f.forwardRegex,g,p,v,b);if(!_)break;const y=p.substring(_.startColumn-1,_.endColumn-1).toLowerCase(),C=f.textIsBracket[y];if(C&&(C.isOpen(y)?a[C.index]++:C.isClose(y)&&a[C.index]--,a[C.index]===-1))return this._matchFoundBracket(_,C,!1,r);v=_.endColumn-1}return null};let d=null,h=null;for(let f=i.lineNumber;f<=s;f++){const g=this.textModel.tokenization.getLineTokens(f),p=g.getCount(),v=this.textModel.getLineContent(f);let b=0,_=0,y=0;if(f===i.lineNumber){b=g.findTokenIndexAtOffset(i.column-1),_=i.column-1,y=i.column-1;const w=g.getLanguageId(b);d!==w&&(d=w,h=this.languageConfigurationService.getLanguageConfiguration(d).brackets,l(d,h))}let C=!0;for(;b<p;b++){const w=g.getLanguageId(b);if(d!==w){if(h&&C&&_!==y){const k=u(h,f,v,_,y);if(k)return gk(k);C=!1}d=w,h=this.languageConfigurationService.getLanguageConfiguration(d).brackets,l(d,h)}const x=!!h&&!Pc(g.getStandardTokenType(b));if(x)C||(_=g.getStartOffset(b)),y=g.getEndOffset(b);else if(h&&C&&_!==y){const k=u(h,f,v,_,y);if(k)return gk(k)}C=x}if(h&&C&&_!==y){const w=u(h,f,v,_,y);if(w)return gk(w)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const r=e.getBracketInfo(i);return r?{range:t,bracketInfo:r}:null}}function nnt(n,e){return{object:n,dispose:()=>e==null?void 0:e.dispose()}}function pA(n){if(typeof n>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=n}}const RT=class RT{constructor(){this._searchCanceledBrand=void 0}};RT.INSTANCE=new RT;let nd=RT;function gk(n){return n instanceof nd?null:n}class int extends ke{constructor(e){super(),this.textModel=e,this.colorProvider=new Jfe,this.onDidChangeEmitter=new ae,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,r){return r?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(o=>({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new te(1,1,this.textModel.getLineCount(),1),e,t):[]}}class Jfe{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}Yd((n,e)=>{const t=[zfe,Wfe,$fe,Ufe,jfe,Kfe],i=new Jfe;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${n.getColor(ftt)}; }`);const r=t.map(s=>n.getColor(s)).filter(s=>!!s).filter(s=>!s.isTransparent());for(let s=0;s<30;s++){const o=r[s%r.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(s)} { color: ${o}; }`)}});function pk(n){return n.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Or{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,r){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=r}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${pk(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${pk(this.oldText)}")`:`(replace@${this.oldPosition} "${pk(this.oldText)}" with "${pk(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const r=t.length;Wl(e,r,i),i+=4;for(let s=0;s<r;s++)RKe(e,t.charCodeAt(s),i),i+=2;return i}static _readString(e,t){const i=zl(e,t);return t+=4,OKe(e,t,i)}writeSize(){return 8+Or._writeStringSize(this.oldText)+Or._writeStringSize(this.newText)}write(e,t){return Wl(e,this.oldPosition,t),t+=4,Wl(e,this.newPosition,t),t+=4,t=Or._writeString(e,this.oldText,t),t=Or._writeString(e,this.newText,t),t}static read(e,t,i){const r=zl(e,t);t+=4;const s=zl(e,t);t+=4;const o=Or._readString(e,t);t+=Or._writeStringSize(o);const a=Or._readString(e,t);return t+=Or._writeStringSize(a),i.push(new Or(r,o,s,a)),t}}function rnt(n,e){return n===null||n.length===0?e:new $c(n,e).compress()}class $c{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),r=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(r),r=this._getCurr(++t);continue}if(r===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(r.oldEnd<=i.newPosition){this._acceptCurr(r),r=this._getCurr(++t);continue}if(i.newEnd<=r.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(r.oldPosition<i.newPosition){const[c,u]=$c._splitCurr(r,i.newPosition-r.oldPosition);this._acceptCurr(c),r=u;continue}if(i.newPosition<r.oldPosition){const[c,u]=$c._splitPrev(i,r.oldPosition-i.newPosition);this._acceptPrev(c),i=u;continue}let a,l;if(r.oldEnd===i.newEnd)a=i,l=r,i=this._getPrev(++e),r=this._getCurr(++t);else if(r.oldEnd<i.newEnd){const[c,u]=$c._splitPrev(i,r.oldLength);a=c,l=r,i=u,r=this._getCurr(++t)}else{const[c,u]=$c._splitCurr(r,i.newLength);a=i,l=c,i=this._getPrev(++e),r=u}this._result[this._resultLen++]=new Or(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const s=$c._merge(this._result);return $c._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=$c._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=$c._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Or(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Or(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),r=e.newText.substr(t);return[new Or(e.oldPosition,e.oldText,e.newPosition,i),new Or(e.oldEnd,"",e.newPosition+t,r)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),r=e.oldText.substr(t);return[new Or(e.oldPosition,i,e.newPosition,e.newText),new Or(e.oldPosition+t,r,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,r=e[0];for(let s=1;s<e.length;s++){const o=e[s];r.oldEnd===o.oldPosition?r=new Or(r.oldPosition,r.oldText+o.oldText,r.newPosition,r.newText+o.newText):(t[i++]=r,r=o)}return t[i++]=r,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let r=0;r<e.length;r++){const s=e[r];s.oldText!==s.newText&&(t[i++]=s)}return t}}function Qm(n){return n.toString()}class cr{static create(e,t){const i=e.getAlternativeVersionId(),r=I6(e);return new cr(i,i,r,r,t,t,[])}constructor(e,t,i,r,s,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=r,this.beforeCursorState=s,this.afterCursorState=o,this.changes=a}append(e,t,i,r,s){t.length>0&&(this.changes=rnt(this.changes,t)),this.afterEOL=i,this.afterVersionId=r,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(Wl(e,t?t.length:0,i),i+=4,t)for(const r of t)Wl(e,r.selectionStartLineNumber,i),i+=4,Wl(e,r.selectionStartColumn,i),i+=4,Wl(e,r.positionLineNumber,i),i+=4,Wl(e,r.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const r=zl(e,t);t+=4;for(let s=0;s<r;s++){const o=zl(e,t);t+=4;const a=zl(e,t);t+=4;const l=zl(e,t);t+=4;const c=zl(e,t);t+=4,i.push(new an(o,a,l,c))}return t}serialize(){let e=10+cr._writeSelectionsSize(this.beforeCursorState)+cr._writeSelectionsSize(this.afterCursorState)+4;for(const r of this.changes)e+=r.writeSize();const t=new Uint8Array(e);let i=0;Wl(t,this.beforeVersionId,i),i+=4,Wl(t,this.afterVersionId,i),i+=4,bY(t,this.beforeEOL,i),i+=1,bY(t,this.afterEOL,i),i+=1,i=cr._writeSelections(t,this.beforeCursorState,i),i=cr._writeSelections(t,this.afterCursorState,i),Wl(t,this.changes.length,i),i+=4;for(const r of this.changes)i=r.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const r=zl(t,i);i+=4;const s=zl(t,i);i+=4;const o=vY(t,i);i+=1;const a=vY(t,i);i+=1;const l=[];i=cr._readSelections(t,i,l);const c=[];i=cr._readSelections(t,i,c);const u=zl(t,i);i+=4;const d=[];for(let h=0;h<u;h++)i=Or.read(t,i,d);return new cr(r,s,o,a,l,c,d)}}class ege{get type(){return 0}get resource(){return Ut.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,r){this.label=e,this.code=t,this.model=i,this._data=cr.create(i,r)}toString(){return(this._data instanceof cr?this._data:cr.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Ut.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof cr}append(e,t,i,r,s){this._data instanceof cr&&this._data.append(e,t,i,r,s)}close(){this._data instanceof cr&&(this._data=this._data.serialize())}open(){this._data instanceof cr||(this._data=cr.deserialize(this._data))}undo(){if(Ut.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof cr&&(this._data=this._data.serialize());const e=cr.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Ut.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof cr&&(this._data=this._data.serialize());const e=cr.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof cr&&(this._data=this._data.serialize()),this._data.byteLength+168}}class snt{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const r of this._editStackElementsArr){const s=Qm(r.resource);this._editStackElementsMap.set(s,r)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=Qm(e);return this._editStackElementsMap.has(t)}setModel(e){const t=Qm(Ut.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=Qm(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,r,s){const o=Qm(e.uri);this._editStackElementsMap.get(o).append(e,t,i,r,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=Qm(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${dV(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function I6(n){return n.getEOL()===`
`?0:1}function id(n){return n?n instanceof ege||n instanceof snt:!1}class RV{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);id(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);id(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(id(i)&&i.canAppend(this._model))return i;const r=new ege(S("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(r,t),r}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],I6(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,r){const s=this._getOrCreateEditStackElement(e,r),o=this._model.applyEdits(t,!0),a=RV._computeCursorState(i,o),l=o.map((c,u)=>({index:u,textChange:c.textChange}));return l.sort((c,u)=>c.textChange.oldPosition===u.textChange.oldPosition?c.index-u.index:c.textChange.oldPosition-u.textChange.oldPosition),s.append(this._model,l.map(c=>c.textChange),I6(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return $n(i),null}}}class tge extends ke{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function ont(n,e){let t=0,i=0;const r=n.length;for(;i<r;){const s=n.charCodeAt(i);if(s===32)t++;else if(s===9)t=t-t%e+e;else break;i++}return i===r?-1:t}var Cp;(function(n){n[n.Disabled=0]="Disabled",n[n.EnabledForActive=1]="EnabledForActive",n[n.Enabled=2]="Enabled"})(Cp||(Cp={}));class Zg{constructor(e,t,i,r,s,o){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=r,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=o,e!==-1==(t!==-1))throw new Error}}class EC{constructor(e,t){this.top=e,this.endColumn=t}}class ant extends tge{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return ont(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const r=this.textModel.getLineCount();if(e<1||e>r)throw new Tn("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(s&&s.offSide);let a=-2,l=-1,c=-2,u=-1;const d=k=>{if(a!==-1&&(a===-2||a>k-1)){a=-1,l=-1;for(let E=k-2;E>=0;E--){const L=this._computeIndentLevel(E);if(L>=0){a=E,l=L;break}}}if(c===-2){c=-1,u=-1;for(let E=k;E<r;E++){const L=this._computeIndentLevel(E);if(L>=0){c=E,u=L;break}}}};let h=-2,f=-1,g=-2,p=-1;const v=k=>{if(h===-2){h=-1,f=-1;for(let E=k-2;E>=0;E--){const L=this._computeIndentLevel(E);if(L>=0){h=E,f=L;break}}}if(g!==-1&&(g===-2||g<k-1)){g=-1,p=-1;for(let E=k;E<r;E++){const L=this._computeIndentLevel(E);if(L>=0){g=E,p=L;break}}}};let b=0,_=!0,y=0,C=!0,w=0,x=0;for(let k=0;_||C;k++){const E=e-k,L=e+k;k>1&&(E<1||E<t)&&(_=!1),k>1&&(L>r||L>i)&&(C=!1),k>5e4&&(_=!1,C=!1);let M=-1;if(_&&E>=1){const O=this._computeIndentLevel(E-1);O>=0?(c=E-1,u=O,M=Math.ceil(O/this.textModel.getOptions().indentSize)):(d(E),M=this._getIndentLevelForWhitespaceLine(o,l,u))}let D=-1;if(C&&L<=r){const O=this._computeIndentLevel(L-1);O>=0?(h=L-1,f=O,D=Math.ceil(O/this.textModel.getOptions().indentSize)):(v(L),D=this._getIndentLevelForWhitespaceLine(o,f,p))}if(k===0){x=M;continue}if(k===1){if(L<=r&&D>=0&&x+1===D){_=!1,b=L,y=L,w=D;continue}if(E>=1&&M>=0&&M-1===x){C=!1,b=E,y=E,w=M;continue}if(b=e,y=e,w=x,w===0)return{startLineNumber:b,endLineNumber:y,indent:w}}_&&(M>=w?b=E:_=!1),C&&(D>=w?y=L:C=!1)}return{startLineNumber:b,endLineNumber:y,indent:w}}getLinesBracketGuides(e,t,i,r){var d;const s=[];for(let h=e;h<=t;h++)s.push([]);const o=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new te(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(i&&a.length>0){const h=(e<=i.lineNumber&&i.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(te.fromPositions(i)).toArray()).filter(f=>te.strictContainsPosition(f.range,i));l=(d=qL(h,f=>o))==null?void 0:d.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,u=new nge;for(const h of a){if(!h.closingBracketRange)continue;const f=l&&h.range.equalsRange(l);if(!f&&!r.includeInactive)continue;const g=u.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,c)+(r.highlightActive&&f?" "+u.activeClassName:""),p=h.openingBracketRange.getStartPosition(),v=h.closingBracketRange.getStartPosition(),b=r.horizontalGuides===Cp.Enabled||r.horizontalGuides===Cp.EnabledForActive&&f;if(h.range.startLineNumber===h.range.endLineNumber){b&&s[h.range.startLineNumber-e].push(new Zg(-1,h.openingBracketRange.getEndPosition().column,g,new EC(!1,v.column),-1,-1));continue}const _=this.getVisibleColumnFromPosition(v),y=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),C=Math.min(y,_,h.minVisibleColumnIndentation+1);let w=!1;To(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(w=!0);const E=Math.max(p.lineNumber,e),L=Math.min(v.lineNumber,t),M=w?1:0;for(let D=E;D<L+M;D++)s[D-e].push(new Zg(C,-1,g,null,D===p.lineNumber?p.column:-1,D===v.lineNumber?v.column:-1));b&&(p.lineNumber>=e&&y>C&&s[p.lineNumber-e].push(new Zg(C,-1,g,new EC(!1,p.column),-1,-1)),v.lineNumber<=t&&_>C&&s[v.lineNumber-e].push(new Zg(C,-1,g,new EC(!w,v.column),-1,-1)))}for(const h of s)h.sort((f,g)=>f.visibleColumn-g.visibleColumn);return s}getVisibleColumnFromPosition(e){return er.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const r=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(s&&s.offSide),a=new Array(t-e+1);let l=-2,c=-1,u=-2,d=-1;for(let h=e;h<=t;h++){const f=h-e,g=this._computeIndentLevel(h-1);if(g>=0){l=h-1,c=g,a[f]=Math.ceil(g/r.indentSize);continue}if(l===-2){l=-1,c=-1;for(let p=h-2;p>=0;p--){const v=this._computeIndentLevel(p);if(v>=0){l=p,c=v;break}}}if(u!==-1&&(u===-2||u<h-1)){u=-1,d=-1;for(let p=h;p<i;p++){const v=this._computeIndentLevel(p);if(v>=0){u=p,d=v;break}}}a[f]=this._getIndentLevelForWhitespaceLine(o,c,d)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const r=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/r.indentSize):t===i||e?Math.ceil(i/r.indentSize):1+Math.floor(i/r.indentSize)}}class nge{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class lnt{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function cnt(n,e,t,i,r){r.spacesDiff=0,r.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<i;s++){const h=n.charCodeAt(s),f=t.charCodeAt(s);if(h!==f)break}let o=0,a=0;for(let h=s;h<e;h++)n.charCodeAt(h)===32?o++:a++;let l=0,c=0;for(let h=s;h<i;h++)t.charCodeAt(h)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;const u=Math.abs(a-c),d=Math.abs(o-l);if(u===0){r.spacesDiff=d,d>0&&0<=l-1&&l-1<n.length&&l<t.length&&t.charCodeAt(l)!==32&&n.charCodeAt(l-1)===32&&n.charCodeAt(n.length-1)===44&&(r.looksLikeAlignment=!0);return}if(d%u===0){r.spacesDiff=d/u;return}}function kX(n,e,t){const i=Math.min(n.getLineCount(),1e4);let r=0,s=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8,u=[0,0,0,0,0,0,0,0,0],d=new lnt;for(let g=1;g<=i;g++){const p=n.getLineLength(g),v=n.getLineContent(g),b=p<=65536;let _=!1,y=0,C=0,w=0;for(let k=0,E=p;k<E;k++){const L=b?v.charCodeAt(k):n.getLineCharCode(g,k);if(L===9)w++;else if(L===32)C++;else{_=!0,y=k;break}}if(!_||(w>0?r++:C>1&&s++,cnt(o,a,v,y,d),d.looksLikeAlignment&&!(t&&e===d.spacesDiff)))continue;const x=d.spacesDiff;x<=c&&u[x]++,o=v,a=y}let h=t;r!==s&&(h=r<s);let f=e;if(h){let g=h?0:.1*i;l.forEach(p=>{const v=u[p];v>g&&(g=v,f=p)}),f===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(f=2)}return{insertSpaces:h,tabSize:f}}function Ys(n){return(n.metadata&1)>>>0}function ti(n,e){n.metadata=n.metadata&254|e<<0}function Hr(n){return(n.metadata&2)>>>1===1}function Jn(n,e){n.metadata=n.metadata&253|(e?1:0)<<1}function ige(n){return(n.metadata&4)>>>2===1}function EX(n,e){n.metadata=n.metadata&251|(e?1:0)<<2}function rge(n){return(n.metadata&64)>>>6===1}function LX(n,e){n.metadata=n.metadata&191|(e?1:0)<<6}function unt(n){return(n.metadata&24)>>>3}function NX(n,e){n.metadata=n.metadata&231|e<<3}function dnt(n){return(n.metadata&32)>>>5===1}function TX(n,e){n.metadata=n.metadata&223|(e?1:0)<<5}class sge{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,ti(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,EX(this,!1),LX(this,!1),NX(this,1),TX(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,Jn(this,!1)}reset(e,t,i,r){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=r}setOptions(e){this.options=e;const t=this.options.className;EX(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),LX(this,this.options.glyphMarginClassName!==null),NX(this,this.options.stickiness),TX(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const Vt=new sge(null,0,0);Vt.parent=Vt;Vt.left=Vt;Vt.right=Vt;ti(Vt,0);class mA{constructor(){this.root=Vt,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,r,s,o){return this.root===Vt?[]:_nt(this,e,t,i,r,s,o)}search(e,t,i,r){return this.root===Vt?[]:bnt(this,e,t,i,r)}collectNodesFromOwner(e){return mnt(this,e)}collectNodesPostOrder(){return vnt(this)}insert(e){IX(this,e),this._normalizeDeltaIfNecessary()}delete(e){DX(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let r=0;for(;e!==this.root;)e===e.parent.right&&(r+=e.parent.delta),e=e.parent;const s=i.start+r,o=i.end+r;i.setCachedOffsets(s,o,t)}acceptReplace(e,t,i,r){const s=gnt(this,e,e+t);for(let o=0,a=s.length;o<a;o++){const l=s[o];DX(this,l)}this._normalizeDeltaIfNecessary(),pnt(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let o=0,a=s.length;o<a;o++){const l=s[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,fnt(l,e,e+t,i,r),l.maxEnd=l.end,IX(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,hnt(this))}}function hnt(n){let e=n.root,t=0;for(;e!==Vt;){if(e.left!==Vt&&!Hr(e.left)){e=e.left;continue}if(e.right!==Vt&&!Hr(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Df(e),Jn(e,!0),Jn(e.left,!1),Jn(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Jn(n.root,!1)}function Jm(n,e,t,i){return n<t?!0:n>t||i===1?!1:i===2?!0:e}function fnt(n,e,t,i,r){const s=unt(n),o=s===0||s===2,a=s===1||s===2,l=t-e,c=i,u=Math.min(l,c),d=n.start;let h=!1;const f=n.end;let g=!1;e<=d&&f<=t&&dnt(n)&&(n.start=e,h=!0,n.end=e,g=!0);{const v=r?1:l>0?2:0;!h&&Jm(d,o,e,v)&&(h=!0),!g&&Jm(f,a,e,v)&&(g=!0)}if(u>0&&!r){const v=l>c?2:0;!h&&Jm(d,o,e+u,v)&&(h=!0),!g&&Jm(f,a,e+u,v)&&(g=!0)}{const v=r?1:0;!h&&Jm(d,o,t,v)&&(n.start=e+c,h=!0),!g&&Jm(f,a,t,v)&&(n.end=e+c,g=!0)}const p=c-l;h||(n.start=Math.max(0,d+p)),g||(n.end=Math.max(0,f+p)),n.start>n.end&&(n.end=n.start)}function gnt(n,e,t){let i=n.root,r=0,s=0,o=0,a=0;const l=[];let c=0;for(;i!==Vt;){if(Hr(i)){Jn(i.left,!1),Jn(i.right,!1),i===i.parent.right&&(r-=i.parent.delta),i=i.parent;continue}if(!Hr(i.left)){if(s=r+i.maxEnd,s<e){Jn(i,!0);continue}if(i.left!==Vt){i=i.left;continue}}if(o=r+i.start,o>t){Jn(i,!0);continue}if(a=r+i.end,a>=e&&(i.setCachedOffsets(o,a,0),l[c++]=i),Jn(i,!0),i.right!==Vt&&!Hr(i.right)){r+=i.delta,i=i.right;continue}}return Jn(n.root,!1),l}function pnt(n,e,t,i){let r=n.root,s=0,o=0,a=0;const l=i-(t-e);for(;r!==Vt;){if(Hr(r)){Jn(r.left,!1),Jn(r.right,!1),r===r.parent.right&&(s-=r.parent.delta),Df(r),r=r.parent;continue}if(!Hr(r.left)){if(o=s+r.maxEnd,o<e){Jn(r,!0);continue}if(r.left!==Vt){r=r.left;continue}}if(a=s+r.start,a>t){r.start+=l,r.end+=l,r.delta+=l,(r.delta<-1073741824||r.delta>1073741824)&&(n.requestNormalizeDelta=!0),Jn(r,!0);continue}if(Jn(r,!0),r.right!==Vt&&!Hr(r.right)){s+=r.delta,r=r.right;continue}}Jn(n.root,!1)}function mnt(n,e){let t=n.root;const i=[];let r=0;for(;t!==Vt;){if(Hr(t)){Jn(t.left,!1),Jn(t.right,!1),t=t.parent;continue}if(t.left!==Vt&&!Hr(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[r++]=t),Jn(t,!0),t.right!==Vt&&!Hr(t.right)){t=t.right;continue}}return Jn(n.root,!1),i}function vnt(n){let e=n.root;const t=[];let i=0;for(;e!==Vt;){if(Hr(e)){Jn(e.left,!1),Jn(e.right,!1),e=e.parent;continue}if(e.left!==Vt&&!Hr(e.left)){e=e.left;continue}if(e.right!==Vt&&!Hr(e.right)){e=e.right;continue}t[i++]=e,Jn(e,!0)}return Jn(n.root,!1),t}function bnt(n,e,t,i,r){let s=n.root,o=0,a=0,l=0;const c=[];let u=0;for(;s!==Vt;){if(Hr(s)){Jn(s.left,!1),Jn(s.right,!1),s===s.parent.right&&(o-=s.parent.delta),s=s.parent;continue}if(s.left!==Vt&&!Hr(s.left)){s=s.left;continue}a=o+s.start,l=o+s.end,s.setCachedOffsets(a,l,i);let d=!0;if(e&&s.ownerId&&s.ownerId!==e&&(d=!1),t&&ige(s)&&(d=!1),r&&!rge(s)&&(d=!1),d&&(c[u++]=s),Jn(s,!0),s.right!==Vt&&!Hr(s.right)){o+=s.delta,s=s.right;continue}}return Jn(n.root,!1),c}function _nt(n,e,t,i,r,s,o){let a=n.root,l=0,c=0,u=0,d=0;const h=[];let f=0;for(;a!==Vt;){if(Hr(a)){Jn(a.left,!1),Jn(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!Hr(a.left)){if(c=l+a.maxEnd,c<e){Jn(a,!0);continue}if(a.left!==Vt){a=a.left;continue}}if(u=l+a.start,u>t){Jn(a,!0);continue}if(d=l+a.end,d>=e){a.setCachedOffsets(u,d,s);let g=!0;i&&a.ownerId&&a.ownerId!==i&&(g=!1),r&&ige(a)&&(g=!1),o&&!rge(a)&&(g=!1),g&&(h[f++]=a)}if(Jn(a,!0),a.right!==Vt&&!Hr(a.right)){l+=a.delta,a=a.right;continue}}return Jn(n.root,!1),h}function IX(n,e){if(n.root===Vt)return e.parent=Vt,e.left=Vt,e.right=Vt,ti(e,0),n.root=e,n.root;Cnt(n,e),dh(e.parent);let t=e;for(;t!==n.root&&Ys(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;Ys(i)===1?(ti(t.parent,0),ti(i,0),ti(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,LC(n,t)),ti(t.parent,0),ti(t.parent.parent,1),NC(n,t.parent.parent))}else{const i=t.parent.parent.left;Ys(i)===1?(ti(t.parent,0),ti(i,0),ti(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,NC(n,t)),ti(t.parent,0),ti(t.parent.parent,1),LC(n,t.parent.parent))}return ti(n.root,0),e}function Cnt(n,e){let t=0,i=n.root;const r=e.start,s=e.end;for(;;)if(wnt(r,s,i.start+t,i.end+t)<0)if(i.left===Vt){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===Vt){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=Vt,e.right=Vt,ti(e,1)}function DX(n,e){let t,i;if(e.left===Vt?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Vt?(t=e.left,i=e):(i=ynt(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(n.requestNormalizeDelta=!0)),i===n.root){n.root=t,ti(t,0),e.detach(),vA(),Df(t),n.root.parent=Vt;return}const r=Ys(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,ti(i,Ys(e)),e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==Vt&&(i.left.parent=i),i.right!==Vt&&(i.right.parent=i)),e.detach(),r){dh(t.parent),i!==e&&(dh(i),dh(i.parent)),vA();return}dh(t),dh(t.parent),i!==e&&(dh(i),dh(i.parent));let s;for(;t!==n.root&&Ys(t)===0;)t===t.parent.left?(s=t.parent.right,Ys(s)===1&&(ti(s,0),ti(t.parent,1),LC(n,t.parent),s=t.parent.right),Ys(s.left)===0&&Ys(s.right)===0?(ti(s,1),t=t.parent):(Ys(s.right)===0&&(ti(s.left,0),ti(s,1),NC(n,s),s=t.parent.right),ti(s,Ys(t.parent)),ti(t.parent,0),ti(s.right,0),LC(n,t.parent),t=n.root)):(s=t.parent.left,Ys(s)===1&&(ti(s,0),ti(t.parent,1),NC(n,t.parent),s=t.parent.left),Ys(s.left)===0&&Ys(s.right)===0?(ti(s,1),t=t.parent):(Ys(s.left)===0&&(ti(s.right,0),ti(s,1),LC(n,s),s=t.parent.left),ti(s,Ys(t.parent)),ti(t.parent,0),ti(s.left,0),NC(n,t.parent),t=n.root));ti(t,0),vA()}function ynt(n){for(;n.left!==Vt;)n=n.left;return n}function vA(){Vt.parent=Vt,Vt.delta=0,Vt.start=0,Vt.end=0}function LC(n,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Vt&&(t.left.parent=e),t.parent=e.parent,e.parent===Vt?n.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Df(e),Df(t)}function NC(n,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(n.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Vt&&(t.right.parent=e),t.parent=e.parent,e.parent===Vt?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Df(e),Df(t)}function oge(n){let e=n.end;if(n.left!==Vt){const t=n.left.maxEnd;t>e&&(e=t)}if(n.right!==Vt){const t=n.right.maxEnd+n.delta;t>e&&(e=t)}return e}function Df(n){n.maxEnd=oge(n)}function dh(n){for(;n!==Vt;){const e=oge(n);if(n.maxEnd===e)return;n.maxEnd=e,n=n.parent}}function wnt(n,e,t,i){return n===t?e-i:n-t}class D6{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Nt)return AV(this.right);let e=this;for(;e.parent!==Nt&&e.parent.left!==e;)e=e.parent;return e.parent===Nt?Nt:e.parent}prev(){if(this.left!==Nt)return age(this.left);let e=this;for(;e.parent!==Nt&&e.parent.right!==e;)e=e.parent;return e.parent===Nt?Nt:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const Nt=new D6(null,0);Nt.parent=Nt;Nt.left=Nt;Nt.right=Nt;Nt.color=0;function AV(n){for(;n.left!==Nt;)n=n.left;return n}function age(n){for(;n.right!==Nt;)n=n.right;return n}function OV(n){return n===Nt?0:n.size_left+n.piece.length+OV(n.right)}function PV(n){return n===Nt?0:n.lf_left+n.piece.lineFeedCnt+PV(n.right)}function bA(){Nt.parent=Nt}function TC(n,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Nt&&(t.left.parent=e),t.parent=e.parent,e.parent===Nt?n.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function IC(n,e){const t=e.left;e.left=t.right,t.right!==Nt&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Nt?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function mk(n,e){let t,i;if(e.left===Nt?(i=e,t=i.right):e.right===Nt?(i=e,t=i.left):(i=AV(e.right),t=i.right),i===n.root){n.root=t,t.color=0,e.detach(),bA(),n.root.parent=Nt;return}const r=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,O_(n,t)):(i.parent===e?t.parent=i:t.parent=i.parent,O_(n,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==Nt&&(i.left.parent=i),i.right!==Nt&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,O_(n,i)),e.detach(),t.parent.left===t){const o=OV(t),a=PV(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,Wu(n,t.parent,l,c)}}if(O_(n,t.parent),r){bA();return}let s;for(;t!==n.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,TC(n,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,IC(n,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,TC(n,t.parent),t=n.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,IC(n,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,TC(n,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,IC(n,t.parent),t=n.root));t.color=0,bA()}function MX(n,e){for(O_(n,e);e!==n.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,TC(n,e)),e.parent.color=0,e.parent.parent.color=1,IC(n,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,IC(n,e)),e.parent.color=0,e.parent.parent.color=1,TC(n,e.parent.parent))}n.root.color=0}function Wu(n,e,t,i){for(;e!==n.root&&e!==Nt;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function O_(n,e){let t=0,i=0;if(e!==n.root){for(;e!==n.root&&e===e.parent.right;)e=e.parent;if(e!==n.root)for(e=e.parent,t=OV(e.left)-e.size_left,i=PV(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==n.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const Pu=65535;function lge(n){let e;return n[n.length-1]<65536?e=new Uint16Array(n.length):e=new Uint32Array(n.length),e.set(n,0),e}class Snt{constructor(e,t,i,r,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=r,this.isBasicASCII=s}}function Ku(n,e=!0){const t=[0];let i=1;for(let r=0,s=n.length;r<s;r++){const o=n.charCodeAt(r);o===13?r+1<s&&n.charCodeAt(r+1)===10?(t[i++]=r+2,r++):t[i++]=r+1:o===10&&(t[i++]=r+1)}return e?lge(t):t}function xnt(n,e){n.length=0,n[0]=0;let t=1,i=0,r=0,s=0,o=!0;for(let l=0,c=e.length;l<c;l++){const u=e.charCodeAt(l);u===13?l+1<c&&e.charCodeAt(l+1)===10?(s++,n[t++]=l+2,l++):(i++,n[t++]=l+1):u===10?(r++,n[t++]=l+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new Snt(lge(n),i,r,s,o);return n.length=0,a}class vo{constructor(e,t,i,r,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=r,this.length=s}}class Lg{constructor(e,t){this.buffer=e,this.lineStarts=t}}class knt{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Nt&&e.iterate(e.root,i=>(i!==Nt&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Ent{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let r=0;r<i.length;r++){const s=i[r];if(s.node.parent===null||s.nodeStartOffset>=e){i[r]=null,t=!0;continue}}if(t){const r=[];for(const s of i)s!==null&&r.push(s);this._cache=r}}}class Lnt{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new Lg("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Nt,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let r=null;for(let s=0,o=e.length;s<o;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Ku(e[s].buffer));const a=new vo(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),r=this.rbInsertRight(r,a)}this._searchCache=new Ent(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=Pu,i=t-Math.floor(t/3),r=i*2;let s="",o=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),u=c.length;if(o<=i||o+u<r)return s+=c,o+=u,!0;const d=s.replace(/\r\n|\r|\n/g,e);return a.push(new Lg(d,Ku(d))),s=c,o=u,!0}),o>0){const l=s.replace(/\r\n|\r|\n/g,e);a.push(new Lg(l,Ku(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new knt(this,e)}getOffsetAt(e,t){let i=0,r=this.root;for(;r!==Nt;)if(r.left!==Nt&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){i+=r.size_left;const s=this.getAccumulatedValue(r,e-r.lf_left-2);return i+=s+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const r=e;for(;t!==Nt;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+s.index,s.index===0){const o=this.getOffsetAt(i+1,1),a=r-o;return new de(i+1,a+1)}return new de(i+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===Nt){const s=this.getOffsetAt(i+1,1),o=r-e-s;return new de(i+1,o+1)}else t=t.right;return new de(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),r=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,r);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const r=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let o=r.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==Nt;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,i.piece.length);i=i.next()}return o}getLinesContent(){const e=[];let t=0,i="",r=!1;return this.iterate(this.root,s=>{if(s===Nt)return!0;const o=s.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,u=o.start.line,d=o.end.line;let h=c[u]+o.start.column;if(r&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=i,i="",r=!1,a===0))return!0;if(u===d)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(r=!0,i+=l.substr(h,a-1)):i+=l.substr(h,a),!0;i+=this._EOLNormalized?l.substring(h,Math.max(h,c[u+1]-this._EOLLength)):l.substring(h,c[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=u+1;f<d;f++)i=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[d]+o.end.column-1)===13?(r=!0,o.end.column===0?t--:i=l.substr(c[d],o.end.column-1)):i=l.substr(c[d],o.end.column),!0}),r&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],r=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(r)}else{const t=this._buffers[e.node.piece.bufferIndex],r=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,r,s,o,a,l,c,u,d){const h=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,s),p=this.offsetInBuffer(e.piece.bufferIndex,o);let v;const b={line:0,column:0};let _,y;t._wordSeparators?(_=h.buffer.substring(g,p),y=C=>C+g,t.reset(0)):(_=h.buffer,y=C=>C,t.reset(g));do if(v=t.next(_),v){if(y(v.index)>=p)return u;this.positionInBuffer(e,y(v.index)-f,b);const C=this.getLineFeedCnt(e.piece.bufferIndex,s,b),w=b.line===s.line?b.column-s.column+r:b.column+1,x=w+v[0].length;if(d[u++]=yg(new te(i+C,w,i+C,x),v,l),y(v.index)+v[0].length>=p||u>=c)return u}while(v);return u}findMatchesLineByLine(e,t,i,r){const s=[];let o=0;const a=new Bv(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let u=this.positionInBuffer(l.node,l.remainder);const d=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,u,d,t,i,r,o,s),s;let h=e.startLineNumber,f=l.node;for(;f!==c.node;){const p=this.getLineFeedCnt(f.piece.bufferIndex,u,f.piece.end);if(p>=1){const b=this._buffers[f.piece.bufferIndex].lineStarts,_=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),y=b[u.line+p],C=h===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(f,a,h,C,u,this.positionInBuffer(f,y-_),t,i,r,o,s),o>=r)return s;h+=p}const v=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const b=this.getLineContent(h).substring(v,e.endColumn-1);return o=this._findMatchesInLine(t,a,b,e.endLineNumber,v,o,s,i,r),s}if(o=this._findMatchesInLine(t,a,this.getLineContent(h).substr(v),h,v,o,s,i,r),o>=r)return s;h++,l=this.nodeAt2(h,1),f=l.node,u=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){const p=h===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(h).substring(p,e.endColumn-1);return o=this._findMatchesInLine(t,a,v,e.endLineNumber,p,o,s,i,r),s}const g=h===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,h,g,u,d,t,i,r,o,s),s}_findMatchesInLine(e,t,i,r,s,o,a,l,c){const u=e.wordSeparators;if(!l&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=i.length;let p=-f;for(;(p=i.indexOf(h,p+f))!==-1;)if((!u||UH(u,i,g,p,f))&&(a[o++]=new nw(new te(r,p+1+s,r,p+1+f+s),null),o>=c))return o;return o}let d;t.reset(0);do if(d=t.next(i),d&&(a[o++]=yg(new te(r,d.index+1+s,r,d.index+1+d[0].length+s),d,l),o>=c))return o;while(d);return o}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Nt){const{node:r,remainder:s,nodeStartOffset:o}=this.nodeAt(e),a=r.piece,l=a.bufferIndex,c=this.positionInBuffer(r,s);if(r.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<Pu){this.appendToNode(r,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,r),this._searchCache.validate(e);else if(o+r.piece.length>e){const u=[];let d=new vo(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(r,s)===10){const p={line:d.start.line+1,column:0};d=new vo(d.bufferIndex,p,d.end,this.getLineFeedCnt(d.bufferIndex,p,d.end),d.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(r,s-1)===13){const p=this.positionInBuffer(r,s-1);this.deleteNodeTail(r,p),t="\r"+t,r.piece.length===0&&u.push(r)}else this.deleteNodeTail(r,c);else this.deleteNodeTail(r,c);const h=this.createNewPieces(t);d.length>0&&this.rbInsertRight(r,d);let f=r;for(let g=0;g<h.length;g++)f=this.rbInsertRight(f,h[g]);this.deleteNodes(u)}else this.insertContentToNodeRight(t,r)}else{const r=this.createNewPieces(t);let s=this.rbInsertLeft(null,r[0]);for(let o=1;o<r.length;o++)s=this.rbInsertRight(s,r[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Nt)return;const i=this.nodeAt(e),r=this.nodeAt(e+t),s=i.node,o=r.node;if(s===o){const h=this.positionInBuffer(s,i.remainder),f=this.positionInBuffer(s,r.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const g=s.next();mk(this,s),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(s,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(i.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,h),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,h,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(s,i.remainder);this.deleteNodeTail(s,l),this._searchCache.validate(e),s.piece.length===0&&a.push(s);const c=this.positionInBuffer(o,r.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);const u=s.next();for(let h=u;h!==Nt&&h!==o;h=h.next())a.push(h);const d=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(d),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},l=new vo(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,Wu(this,t,-1,-1),t.piece.length===0&&i.push(t)}const r=this.createNewPieces(e);let s=this.rbInsertLeft(t,r[r.length-1]);for(let o=r.length-2;o>=0;o--)s=this.rbInsertLeft(s,r[o]);this.validateCRLFWithPrevNode(s),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),r=this.rbInsertRight(t,i[0]);let s=r;for(let o=1;o<i.length;o++)s=this.rbInsertRight(s,i[o]);this.validateCRLFWithPrevNode(r)}positionInBuffer(e,t,i){const r=e.piece,s=e.piece.bufferIndex,o=this._buffers[s].lineStarts,l=o[r.start.line]+r.start.column+t;let c=r.start.line,u=r.end.line,d=0,h=0,f=0;for(;c<=u&&(d=c+(u-c)/2|0,f=o[d],d!==u);)if(h=o[d+1],l<f)u=d-1;else if(l>=h)c=d+1;else break;return i?(i.line=d,i.column=l-f,null):{line:d,column:l-f}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const r=this._buffers[e].lineStarts;if(i.line===r.length-1)return i.line-t.line;const s=r[i.line+1],o=r[i.line]+i.column;if(s>o+1)return i.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)mk(this,e[t])}createNewPieces(e){if(e.length>Pu){const u=[];for(;e.length>Pu;){const h=e.charCodeAt(Pu-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,Pu-1),e=e.substring(Pu-1)):(f=e.substring(0,Pu),e=e.substring(Pu));const g=Ku(f);u.push(new vo(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new Lg(f,g))}const d=Ku(e);return u.push(new vo(this._buffers.length,{line:0,column:0},{line:d.length-1,column:e.length-d[d.length-1]},d.length-1,e.length)),this._buffers.push(new Lg(e,d)),u}let t=this._buffers[0].buffer.length;const i=Ku(e,!1);let r=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},r=this._lastChangeBufferPos;for(let u=0;u<i.length;u++)i[u]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let u=0;u<i.length;u++)i[u]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new vo(0,r,l,this.getLineFeedCnt(0,r,l),s-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,r="";const s=this._searchCache.get2(e);if(s){i=s.node;const o=this.getAccumulatedValue(i,e-s.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt===e)r=a.substring(l+o,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-s.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;i!==Nt;)if(i.left!==Nt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),u=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-i.lf_left)}),u.substring(d+l,d+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);r=c.substring(u+l,u+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==Nt;){const o=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r+=o.substring(l,l+a-t),r}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);r+=o.substr(a,i.piece.length)}i=i.next()}return r}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==Nt;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,r=this.positionInBuffer(e,t),s=r.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,i.start,r);if(o!==s)return{index:o,remainder:0}}return{index:s,remainder:r.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,r=this._buffers[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?r[i.end.line]+i.end.column-r[i.start.line]-i.start.column:r[s]-r[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.end),o=t,a=this.offsetInBuffer(i.bufferIndex,o),l=this.getLineFeedCnt(i.bufferIndex,i.start,o),c=l-r,u=a-s,d=i.length+u;e.piece=new vo(i.bufferIndex,i.start,o,l,d),Wu(this,e,u,c)}deleteNodeHead(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.start),o=t,a=this.getLineFeedCnt(i.bufferIndex,o,i.end),l=this.offsetInBuffer(i.bufferIndex,o),c=a-r,u=s-l,d=i.length+u;e.piece=new vo(i.bufferIndex,o,i.end,a,d),Wu(this,e,u,c)}shrinkNode(e,t,i){const r=e.piece,s=r.start,o=r.end,a=r.length,l=r.lineFeedCnt,c=t,u=this.getLineFeedCnt(r.bufferIndex,r.start,c),d=this.offsetInBuffer(r.bufferIndex,t)-this.offsetInBuffer(r.bufferIndex,s);e.piece=new vo(r.bufferIndex,r.start,c,u,d),Wu(this,e,d-a,u-l);const h=new vo(r.bufferIndex,i,o,this.getLineFeedCnt(r.bufferIndex,i,o),this.offsetInBuffer(r.bufferIndex,o)-this.offsetInBuffer(r.bufferIndex,i)),f=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),r=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=Ku(t,!1);for(let f=0;f<s.length;f++)s[f]+=r;if(i){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:r-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,u=e.piece.lineFeedCnt,d=this.getLineFeedCnt(0,e.piece.start,l),h=d-u;e.piece=new vo(e.piece.bufferIndex,e.piece.start,l,d,c),this._lastChangeBufferPos=l,Wu(this,e,t.length,h)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let r=0;for(;t!==Nt;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,r=0;for(;i!==Nt;)if(i.left!==Nt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1);return r+=i.size_left,{node:i,remainder:Math.min(s+t-1,o),nodeStartOffset:r}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:r};t-=i.piece.length-s;break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==Nt;){if(i.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(i,0),o=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,s),nodeStartOffset:o}}else if(i.piece.length>=t-1){const s=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:s}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(r)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Nt||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,r=t.start.line,s=i[r]+t.start.column;return r===i.length-1||i[r+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Nt||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],r=this._buffers[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new vo(e.piece.bufferIndex,e.piece.start,s,a,o),Wu(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new vo(t.piece.bufferIndex,l,t.piece.end,u,c),Wu(this,t,-1,-1),t.piece.length===0&&i.push(t);const d=this.createNewPieces(`\r
`);this.rbInsertRight(e,d[0]);for(let h=0;h<i.length;h++)mk(this,i[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)mk(this,i);else{const r=i.piece,s={line:r.start.line+1,column:0},o=r.length-1,a=this.getLineFeedCnt(r.bufferIndex,s,r.end);i.piece=new vo(r.bufferIndex,s,r.end,a,o),Wu(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Nt)return t(Nt);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Nt)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,r=this.offsetInBuffer(i.bufferIndex,i.start),s=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(r,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),r=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,r)}rbInsertRight(e,t){const i=new D6(t,1);if(i.left=Nt,i.right=Nt,i.parent=Nt,i.size_left=0,i.lf_left=0,this.root===Nt)this.root=i,i.color=0;else if(e.right===Nt)e.right=i,i.parent=e;else{const s=AV(e.right);s.left=i,i.parent=s}return MX(this,i),i}rbInsertLeft(e,t){const i=new D6(t,1);if(i.left=Nt,i.right=Nt,i.parent=Nt,i.size_left=0,i.lf_left=0,this.root===Nt)this.root=i,i.color=0;else if(e.left===Nt)e.left=i,i.parent=e;else{const r=age(e.left);r.right=i,i.parent=r}return MX(this,i),i}}class W0 extends ke{constructor(e,t,i,r,s,o,a){super(),this._onDidChangeContent=this._register(new ae),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._pieceTree=new Lnt(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,r=this.getPositionAt(e),s=this.getPositionAt(i);return new te(r.lineNumber,r.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),r=this.getOffsetAt(e.endLineNumber,e.endColumn);let s=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){const l=o.length-a.length,c=e.endLineNumber-e.startLineNumber;s=l*c}return r-i+s}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const r=e.startLineNumber,s=e.endLineNumber;for(let o=r;o<=s;o++){const a=this.getLineContent(o),l=o===r?e.startColumn-1:0,c=o===s?e.endColumn-1:a.length;for(let u=l;u<c;u++)gr(a.charCodeAt(u))?(i=i+1,u=u+1):i=i+1}return i+=this._getEndOfLine(t).length*(s-r),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=To(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=mm(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let r=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let p=0;p<e.length;p++){const v=e[p];a&&v._isTracked&&(a=!1);const b=v.range;if(v.text){let x=!0;o||(x=!SH(v.text),o=x),!r&&x&&(r=Zy(v.text)),!s&&x&&(s=sde(v.text))}let _="",y=0,C=0,w=0;if(v.text){let x;[y,C,w,x]=O1(v.text);const k=this.getEOL();x===0||x===(k===`\r
`?2:1)?_=v.text:_=v.text.replace(/\r\n|\r|\n/g,k)}l[p]={sortIndex:p,identifier:v.identifier||null,range:b,rangeOffset:this.getOffsetAt(b.startLineNumber,b.startColumn),rangeLength:this.getValueLengthInRange(b),text:_,eolCount:y,firstLineLength:C,lastLineLength:w,forceMoveMarkers:!!v.forceMoveMarkers,isAutoWhitespaceEdit:v.isAutoWhitespaceEdit||!1}}l.sort(W0._sortOpsAscending);let c=!1;for(let p=0,v=l.length-1;p<v;p++){const b=l[p].range.getEndPosition(),_=l[p+1].range.getStartPosition();if(_.isBeforeOrEqual(b)){if(_.isBefore(b))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const u=i||t?W0._getInverseEditRanges(l):[],d=[];if(t)for(let p=0;p<l.length;p++){const v=l[p],b=u[p];if(v.isAutoWhitespaceEdit&&v.range.isEmpty())for(let _=b.startLineNumber;_<=b.endLineNumber;_++){let y="";_===b.startLineNumber&&(y=this.getLineContent(v.range.startLineNumber),To(y)!==-1)||d.push({lineNumber:_,oldContent:y})}}let h=null;if(i){let p=0;h=[];for(let v=0;v<l.length;v++){const b=l[v],_=u[v],y=this.getValueInRange(b.range),C=b.rangeOffset+p;p+=b.text.length-y.length,h[v]={sortIndex:b.sortIndex,identifier:b.identifier,range:_,text:y,textChange:new Or(b.rangeOffset,y,C,b.text)}}c||h.sort((v,b)=>v.sortIndex-b.sortIndex)}this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=o;const f=this._doApplyEdits(l);let g=null;if(t&&d.length>0){d.sort((p,v)=>v.lineNumber-p.lineNumber),g=[];for(let p=0,v=d.length;p<v;p++){const b=d[p].lineNumber;if(p>0&&d[p-1].lineNumber===b)continue;const _=d[p].oldContent,y=this.getLineContent(b);y.length===0||y===_||To(y)!==-1||g.push(b)}}return this._onDidChangeContent.fire(),new Eqe(h,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,r=e[e.length-1].range,s=new te(i.startLineNumber,i.startColumn,r.endLineNumber,r.endColumn);let o=i.startLineNumber,a=i.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const p=e[f],v=p.range;t=t||p.forceMoveMarkers,l.push(this.getValueInRange(new te(o,a,v.startLineNumber,v.startColumn))),p.text.length>0&&l.push(p.text),o=v.endLineNumber,a=v.endColumn}const c=l.join(""),[u,d,h]=O1(c);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:c,eolCount:u,firstLineLength:d,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(W0._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const r=e[i],s=r.range.startLineNumber,o=r.range.startColumn,a=r.range.endLineNumber,l=r.range.endColumn;if(s===a&&o===l&&r.text.length===0)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);const c=new te(s,o,a,l);t.push({range:c,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,r){return this._pieceTree.findMatchesLineByLine(e,t,i,r)}static _getInverseEditRanges(e){const t=[];let i=0,r=0,s=null;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c,u;s?s.range.endLineNumber===l.range.startLineNumber?(c=i,u=r+(l.range.startColumn-s.range.endColumn)):(c=i+(l.range.startLineNumber-s.range.endLineNumber),u=l.range.startColumn):(c=l.range.startLineNumber,u=l.range.startColumn);let d;if(l.text.length>0){const h=l.eolCount+1;h===1?d=new te(c,u,c,u+l.firstLineLength):d=new te(c,u,c+h-1,l.lastLineLength+1)}else d=new te(c,u,c,u);i=d.endLineNumber,r=d.endColumn,t.push(d),s=l}return t}static _sortOpsAscending(e,t){const i=te.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=te.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class Nnt{constructor(e,t,i,r,s,o,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=r,this._crlf=s,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,o=i.length;s<o;s++){const a=i[s].buffer.replace(/\r\n|\r|\n/g,t),l=Ku(a);i[s]=new Lg(a,l)}const r=new W0(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:r,disposable:r}}}class cge{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&kH(e)&&(this.BOM=CUe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=xnt(this._tmpLineStarts,e);this.chunks.push(new Lg(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=Zy(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=sde(e)))}finish(e=!0){return this._finish(),new Nnt(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=Ku(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class Tnt{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(t===0){this.insert(e,i);return}else if(i===0){this.delete(e,t);return}const r=this._store.slice(0,e),s=this._store.slice(e+t),o=Int(i,this._default);this._store=r.concat(o,s)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let r=0;r<t;r++)i[r]=this._default;this._store=ND(this._store,e,i)}}function Int(n,e){const t=[];for(let i=0;i<n;i++)t[i]=e;return t}class Dnt{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class M6{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new Dnt(e,[t]))}finalize(){return this._tokens}}class Mnt{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new R6(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class Rnt extends Mnt{constructor(e,t,i,r){super(e,t),this._textModel=i,this._languageIdCodec=r}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const r=this.getFirstInvalidLine();if(!r||r.lineNumber>t)break;const s=this._textModel.getLineContent(r.lineNumber),o=c_(this._languageIdCodec,i,this.tokenizationSupport,s,!0,r.startState);e.add(r.lineNumber,o.tokens),this.store.setEndState(r.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const r=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),o=s.substring(0,e.column-1)+t+s.substring(e.column-1),a=c_(this._languageIdCodec,r,this.tokenizationSupport,o,!0,i),l=new Er(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,i){const r=e.lineNumber,s=e.column,o=this.getStartState(r);if(!o)return null;const a=this._textModel.getLineContent(r),l=a.substring(0,s-1)+i+a.substring(s-1+t),c=this._textModel.getLanguageIdAtPosition(r,0),u=c_(this._languageIdCodec,c,this.tokenizationSupport,l,!0,o);return new Er(u.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let r=this.guessStartState(t);const s=this._textModel.getLanguageId();for(let o=t;o<=i;o++){const a=this._textModel.getLineContent(o),l=c_(this._languageIdCodec,s,this.tokenizationSupport,a,!0,r);e.add(o,l.tokens),r=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let r=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(i.push(this._textModel.getLineContent(a)),t=l,r=this.getStartState(a),r))break}r||(r=this.tokenizationSupport.getInitialState()),i.reverse();const s=this._textModel.getLanguageId();let o=r;for(const a of i)o=c_(this._languageIdCodec,s,this.tokenizationSupport,a,!1,o).endState;return o}}class R6{constructor(e){this.lineCount=e,this._tokenizationStateStore=new Ant,this._invalidEndStatesLineNumbers=new Ont,this._invalidEndStatesLineNumbers.addRange(new Ht(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Tn("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Ht(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Ht(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[i]=O1(t.text);this.acceptChange(new It(t.range.startLineNumber,t.range.endLineNumber+1),i+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Ht(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const i=this.getStartState(t,e);if(!i)throw new Tn("Start state must be defined");return{lineNumber:t,startState:i}}}class Ant{constructor(){this._lineEndStates=new Tnt(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return i&&i.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class Ont{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(i=>i.contains(e));if(t!==-1){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Ht(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new Ht(i.start,e):this._ranges.splice(t,1,new Ht(i.start,e),new Ht(e+1,i.endExclusive))}}addRange(e){Ht.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let r=i;for(;!(r>=this._ranges.length||e.endExclusive<this._ranges[r].start);)r++;const s=t-e.length;for(let o=r;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(s);if(i===r){const o=new Ht(e.start,e.start+t);o.isEmpty||this._ranges.splice(i,0,o)}else{const o=Math.min(e.start,this._ranges[i].start),a=Math.max(e.endExclusive,this._ranges[r-1].endExclusive),l=new Ht(o,a+s);l.isEmpty?this._ranges.splice(i,r-i):this._ranges.splice(i,r-i,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function c_(n,e,t,i,r,s){let o=null;if(t)try{o=t.tokenizeEncoded(i,r,s.clone())}catch(a){$n(a)}return o||(o=gV(n.encodeLanguageId(e),s)),Er.convertToEndOffset(o.tokens,i.length),o}class Pnt{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,fde(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?Rue(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new M6,i=pm.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var i;const t=(i=this._tokenizerWithStateStore)==null?void 0:i.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new It(e,t))}}class Fnt{constructor(){this._onDidChangeVisibleRanges=new ae,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new Bnt(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class Bnt{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map(r=>new It(r.startLineNumber,r.endLineNumber+1));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}class Hnt extends ke{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new bs(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){rr(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class uge extends ke{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new ae),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new ae),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class RX extends uge{constructor(e,t,i,r){super(t,i,r),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==e)&&(this._lastLanguageId=e,this._tokenizationSupport=qP.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const i=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(i)return new Er(i,t,this._languageIdCodec)}return Er.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,i){return 0}tokenizeLineWithEdit(e,t,i){return null}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}}const dge=cn("treeSitterParserService"),qu=new Uint32Array(0).buffer;class qc{static deleteBeginning(e,t){return e===null||e===qu?e:qc.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===qu)return e;const i=cd(e),r=i[i.length-2];return qc.delete(e,t,r)}static delete(e,t,i){if(e===null||e===qu||t===i)return e;const r=cd(e),s=r.length>>>1;if(t===0&&r[r.length-2]===i)return qu;const o=Er.findIndexInTokensArray(r,t),a=o>0?r[o-1<<1]:0,l=r[o<<1];if(i<l){const f=i-t;for(let g=o;g<s;g++)r[g<<1]-=f;return e}let c,u;a!==t?(r[o<<1]=t,c=o+1<<1,u=t):(c=o<<1,u=a);const d=i-t;for(let f=o+1;f<s;f++){const g=r[f<<1]-d;g>u&&(r[c++]=g,r[c++]=r[(f<<1)+1],u=g)}if(c===r.length)return e;const h=new Uint32Array(c);return h.set(r.subarray(0,c),0),h.buffer}static append(e,t){if(t===qu)return e;if(e===qu)return t;if(e===null)return e;if(t===null)return null;const i=cd(e),r=cd(t),s=r.length>>>1,o=new Uint32Array(i.length+r.length);o.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<s;c++)o[a++]=r[c<<1]+l,o[a++]=r[(c<<1)+1];return o.buffer}static insert(e,t,i){if(e===null||e===qu)return e;const r=cd(e),s=r.length>>>1;let o=Er.findIndexInTokensArray(r,t);o>0&&r[o-1<<1]===t&&o--;for(let a=o;a<s;a++)r[a<<1]+=i;return e}}function cd(n){return n instanceof Uint32Array?n:new Uint32Array(n)}class vw{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let r=null;if(t<this._len&&(r=this._lineTokens[t]),r!==null&&r!==qu)return new Er(cd(r),i,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=i.length,s[1]=AX(this._languageIdCodec.encodeLanguageId(e)),new Er(s,i,this._languageIdCodec)}static _massageTokens(e,t,i){const r=i?cd(i):null;if(t===0){let s=!1;if(r&&r.length>1&&(s=Yl.getLanguageId(r[1])!==e),!s)return qu}if(!r||r.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=AX(e),s.buffer}return r[r.length-2]=t,r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let r=0;r<t;r++)i[r]=null;this._lineTokens=ND(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,r,s){const o=vw._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,r);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,s?!vw._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=cd(e),r=cd(t);if(i.length!==r.length)return!1;for(let s=0,o=i.length;s<o;s++)if(i[s]!==r[s])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new de(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=qc.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=qc.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let r=null;i<this._len&&(r=qc.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=qc.append(this._lineTokens[t],r),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const r=e.lineNumber-1;if(!(r>=this._len)){if(t===0){this._lineTokens[r]=qc.insert(this._lineTokens[r],e.column-1,i);return}this._lineTokens[r]=qc.deleteEnding(this._lineTokens[r],e.column-1),this._lineTokens[r]=qc.insert(this._lineTokens[r],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];let a=0,l=0,c=!1;for(let u=o.startLineNumber;u<=o.endLineNumber;u++)c?(this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),o.getLineTokens(u),!1),l=u):this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),o.getLineTokens(u),!0)&&(c=!0,a=u,l=u);c&&i.push({fromLineNumber:a,toLineNumber:l})}return{changes:i}}}function AX(n){return(n<<0|0|0|32768|2<<24|1024)>>>0}class FV{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const s=t[0].getRange(),o=t[t.length-1].getRange();if(!s||!o)return e;i=e.plusRange(s).plusRange(o)}let r=null;for(let s=0,o=this._pieces.length;s<o;s++){const a=this._pieces[s];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){r=r||{index:s};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(s,1),s--,o--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){r=r||{index:s};continue}const[l,c]=a.split(i);if(l.isEmpty()){r=r||{index:s};continue}c.isEmpty()||(this._pieces.splice(s,1,l,c),s++,o++,r=r||{index:s})}return r=r||{index:this._pieces.length},t.length>0&&(this._pieces=ND(this._pieces,r.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const i=this._pieces;if(i.length===0)return t;const r=FV._findFirstPieceWithLine(i,e),s=i[r].getLineTokens(e);if(!s)return t;const o=t.getCount(),a=s.getCount();let l=0;const c=[];let u=0,d=0;const h=(f,g)=>{f!==d&&(d=f,c[u++]=f,c[u++]=g)};for(let f=0;f<a;f++){const g=s.getStartCharacter(f),p=s.getEndCharacter(f),v=s.getMetadata(f),b=((v&1?2048:0)|(v&2?4096:0)|(v&4?8192:0)|(v&8?16384:0)|(v&16?16744448:0)|(v&32?4278190080:0))>>>0,_=~b>>>0;for(;l<o&&t.getEndOffset(l)<=g;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<g&&h(g,t.getMetadata(l));l<o&&t.getEndOffset(l)<p;)h(t.getEndOffset(l),t.getMetadata(l)&_|v&b),l++;if(l<o)h(p,t.getMetadata(l)&_|v&b),t.getEndOffset(l)===p&&l++;else{const y=Math.min(Math.max(0,l-1),o-1);h(p,t.getMetadata(y)&_|v&b)}}for(;l<o;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new Er(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,r=e.length-1;for(;i<r;){let s=i+Math.floor((r-i)/2);if(e[s].endLineNumber<t)i=s+1;else if(e[s].startLineNumber>t)r=s-1;else{for(;s>i&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return i}acceptEdit(e,t,i,r,s){for(const o of this._pieces)o.acceptEdit(e,t,i,r,s)}}var Vnt=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_A=function(n,e){return function(t,i){e(t,i,n)}},TE;let A6=TE=class extends tge{constructor(e,t,i,r,s,o,a){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=i,this._attachedViews=r,this._languageService=s,this._languageConfigurationService=o,this._treeSitterService=a,this._semanticTokens=new FV(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new ae),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new ae),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new ae),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new dt),this._register(this._languageConfigurationService.onDidChange(l=>{l.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(Be.filter(qP.onDidChange,l=>l.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new OX(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new RX(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(e){var i;const t=this._tokens!==void 0;(i=this._tokens)==null||i.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(r=>{this._emitModelTokensChangedEvent(r)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(r=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){qP.get(this._languageId)?this._tokens instanceof RX||this.createTokens(!0):this._tokens instanceof OX||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[i,r,s]=O1(t.text);this._semanticTokens.acceptEdit(t.range,i,r,s,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new Tn("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this._tokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),r=this.getLineTokens(t.lineNumber),s=r.findTokenIndexAtOffset(t.column-1),[o,a]=TE._findLanguageBoundaries(r,s),l=Ky(t.column,this.getLanguageConfiguration(r.getLanguageId(s)).getWordDefinition(),i.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(s>0&&o===t.column-1){const[c,u]=TE._findLanguageBoundaries(r,s-1),d=Ky(t.column,this.getLanguageConfiguration(r.getLanguageId(s-1)).getWordDefinition(),i.substring(c,u),c);if(d&&d.startColumn<=e.column&&e.column<=d.endColumn)return d}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let r=0;for(let o=t;o>=0&&e.getLanguageId(o)===i;o--)r=e.getStartOffset(o);let s=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===i;o++)s=e.getEndOffset(o);return[r,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new de(e,t)),r=this.getLineTokens(i.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};A6=TE=Vnt([_A(4,br),_A(5,Eu),_A(6,dge)],A6);class OX extends uge{constructor(e,t,i,r){super(e,t,i),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new Vd),this._tokens=new vw(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new Vd),this._attachedViewStates=this._register(new fH),this._register(Hi.onDidChange(s=>{const o=this.getLanguageId();s.changedLanguages.indexOf(o)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(r.onDidChangeVisibleRanges(({view:s,state:o})=>{if(o){let a=this._attachedViewStates.get(s);a||(a=new Hnt(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(s,a)),a.handleStateChange(o)}else this._attachedViewStates.deleteAndDispose(s)}))}resetTokenization(e=!0){var s;this._tokens.flush(),(s=this._debugBackgroundTokens)==null||s.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new R6(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const o=Hi.get(this.getLanguageId());if(!o)return[null,null];let a;try{a=o.getInitialState()}catch(l){return $n(l),[null,null]}return[o,a]},[i,r]=t();if(i&&r?this._tokenizer=new Rnt(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const o={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var u;if(!this._tokenizer)return;const c=this._tokenizer.store.getFirstInvalidEndStateLineNumber();c!==null&&a>=c&&((u=this._tokenizer)==null||u.store.setEndState(a,l))}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,o)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new Pnt(this._tokenizer,o),this._defaultBackgroundTokenizer.handleChanges()),i!=null&&i.backgroundTokenizerShouldOnlyVerifyTokens&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new vw(this._languageIdCodec),this._debugBackgroundStates=new R6(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)==null||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)==null||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)==null||e.handleChanges()}handleDidChangeContent(e){var t,i,r;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const s of e.changes){const[o,a]=O1(s.text);this._tokens.acceptEdit(s.range,o,a),(t=this._debugBackgroundTokens)==null||t.acceptEdit(s.range,o,a)}(i=this._debugBackgroundStates)==null||i.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(r=this._defaultBackgroundTokenizer)==null||r.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=It.joinMany([...this._attachedViewStates].map(([t,i])=>i.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var o,a;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const i=new M6,{heuristicTokens:r}=this._tokenizer.tokenizeHeuristically(i,e,t),s=this.setTokens(i.finalize());if(r)for(const l of s.changes)(o=this._backgroundTokenizer.value)==null||o.requestTokens(l.fromLineNumber,l.toLineNumber+1);(a=this._defaultBackgroundTokenizer)==null||a.checkFinished()}forceTokenization(e){var i,r;const t=new M6;(i=this._tokenizer)==null||i.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),(r=this._defaultBackgroundTokenizer)==null||r.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){var r;const t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const s=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!i.equals(s)&&((r=this._debugBackgroundTokenizer.value)!=null&&r.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const r=this._textModel.validatePosition(new de(e,t));return this.forceTokenization(r.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(r,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const r=this._textModel.validatePosition(e);return this.forceTokenization(r.lineNumber),this._tokenizer.tokenizeLineWithEdit(r,t,i)}get hasTokens(){return this._tokens.hasTokens}}class znt{constructor(){this.changeType=1}}class vc{static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",r=0;for(const s of t)i+=e.substring(r,s.column-1),r=s.column-1,i+=s.options.content;return i+=e.substring(r),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new vc(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new vc(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,r)=>i.lineNumber===r.lineNumber?i.column===r.column?i.order-r.order:i.column-r.column:i.lineNumber-r.lineNumber),t}constructor(e,t,i,r,s){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=r,this.order=s}}class PX{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class Wnt{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class $nt{constructor(e,t,i,r){this.changeType=4,this.injectedTexts=r,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class Unt{constructor(){this.changeType=5}}class $0{constructor(e,t,i,r){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=r,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),r=t.versionId,s=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new $0(i,r,s,o)}}class hge{constructor(e){this.changes=e}}class yp{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=$0.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=yp._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new yp(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),r=t.eol,s=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:i,eol:r,isEolChange:c,versionId:s,isUndoing:o,isRedoing:a,isFlush:l}}}var jnt=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},vk=function(n,e){return function(t,i){e(t,i,n)}},ug;function Knt(n){const e=new cge;return e.acceptChunk(n),e.finish()}function qnt(n){const e=new cge;let t;for(;typeof(t=n.read())=="string";)e.acceptChunk(t);return e.finish()}function FX(n,e){let t;return typeof n=="string"?t=Knt(n):xqe(n)?t=qnt(n):t=n,t.create(e)}let bk=0;const Gnt=999,Ynt=1e4;class Znt{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const r=this._source.read();if(r===null)return this._eos=!0,t===0?null:e.join("");if(r.length>0&&(e[t++]=r,i+=r.length),i>=64*1024)return e.join("")}while(!0)}}const u_=()=>{throw new Error("Invalid change accessor")};var Xl;let O6=(Xl=class extends ke{static resolveOptions(e,t){if(t.detectIndentation){const i=kX(e,t.tabSize,t.insertSpaces);return new _E({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new _E(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return du(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,r=null,s,o,a,l){super(),this._undoRedoService=s,this._languageService=o,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new ae),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new nit(g=>this.handleBeforeFireDecorationsChangedEvent(g))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new ae),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new ae),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new ae),this._eventEmitter=this._register(new iit),this._languageSelectionListener=this._register(new Vd),this._deltaDecorationCallCnt=0,this._attachedViews=new Fnt,bk++,this.id="$model"+bk,this.isForSimpleWidget=i.isForSimpleWidget,typeof r>"u"||r===null?this._associatedResource=Ut.parse("inmemory://model/"+bk):this._associatedResource=r,this._attachedEditorCount=0;const{textBuffer:c,disposable:u}=FX(e,i.defaultEOL);this._buffer=c,this._bufferDisposable=u,this._options=ug.resolveOptions(this._buffer,i);const d=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new tnt(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new ant(this,this._languageConfigurationService)),this._decorationProvider=this._register(new int(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(A6,this,this._bracketPairs,d,this._attachedViews);const h=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new te(1,1,h,this._buffer.getLineLength(h)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=f>ug.LARGE_FILE_SIZE_THRESHOLD||h>ug.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=f>ug.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=f>ug._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=ode(bk),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new BX,this._commandManager=new RV(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(d),this._register(this._languageConfigurationService.onDidChange(g=>{this._bracketPairs.handleLanguageConfigurationServiceChange(g),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(g)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new W0([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=ke.None}_assertNotDisposed(){if(this._isDisposed)throw new Tn("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new yp(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw ID();const{textBuffer:t,disposable:i}=FX(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,r,s,o,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:r}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:s,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),r=this.getValueLengthInRange(i),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new BX,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new $0([new znt],this._versionId,!1,!1),this._createContentChanged2(new te(1,1,s,o),0,r,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),r=this.getValueLengthInRange(i),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new $0([new Unt],this._versionId,!1,!1),this._createContentChanged2(new te(1,1,s,o),0,r,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,r=t.length;i<r;i++){const s=t[i],o=s.range,a=s.cachedAbsoluteStart-s.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);s.cachedAbsoluteStart=l,s.cachedAbsoluteEnd=c,s.cachedVersionId=e,s.start=l-a,s.end=c-a,Df(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let r=1;r<=i;r++){const s=this._buffer.getLineLength(r);s>=Ynt?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,r=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new _E({tabSize:t,indentSize:i,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:o});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=kX(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),Gfe(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(rde.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Tn("Operation would exceed heap memory limits");const i=this.getFullModelRange(),r=this.getValueInRange(i,e);return t?this._buffer.getBOM()+r:r}createSnapshot(e=!1){return new Znt(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),r=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+r:r}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Tn("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Tn("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Tn("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Tn("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Tn("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Tn("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,r=e.startColumn;let s=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),o=Math.floor(typeof r=="number"&&!isNaN(r)?r:1);if(s<1)s=1,o=1;else if(s>t)s=t,o=this.getLineMaxColumn(s);else if(o<=1)o=1;else{const d=this.getLineMaxColumn(s);o>=d&&(o=d)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),u=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,u=1;else if(c>t)c=t,u=this.getLineMaxColumn(c);else if(u<=1)u=1;else{const d=this.getLineMaxColumn(c);u>=d&&(u=d)}return i===s&&r===o&&a===c&&l===u&&e instanceof te&&!(e instanceof an)?e:new te(s,o,c,u)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const r=this._buffer.getLineCount();if(e>r)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(i===1){const o=this._buffer.getLineCharCode(e,t-2);if(gr(o))return!1}return!0}_validatePosition(e,t,i){const r=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(r<1)return new de(1,1);if(r>o)return new de(o,this.getLineMaxColumn(o));if(s<=1)return new de(r,1);const a=this.getLineMaxColumn(r);if(s>=a)return new de(r,a);if(i===1){const l=this._buffer.getLineCharCode(r,s-2);if(gr(l))return new de(r,s-1)}return new de(r,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof de&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(i,r,0)||!this._isValidPosition(s,o,0))return!1;if(t===1){const a=r>1?this._buffer.getLineCharCode(i,r-2):0,l=o>1&&o<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,o-2):0,c=gr(a),u=gr(l);return!c&&!u}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof te&&!(e instanceof an)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),r=this._validatePosition(e.endLineNumber,e.endColumn,0),s=i.lineNumber,o=i.column,a=r.lineNumber,l=r.column;{const c=o>1?this._buffer.getLineCharCode(s,o-2):0,u=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,d=gr(c),h=gr(u);return!d&&!h?new te(s,o,a,l):s===a&&o===l?new te(s,o-1,a,l-1):d&&h?new te(s,o-1,a,l+1):d?new te(s,o-1,a,l):new te(s,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new te(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,r){return this._buffer.findMatchesLineByLine(e,t,i,r)}findMatches(e,t,i,r,s,o,a=Gnt){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(d=>te.isIRange(d))&&(l=t.map(d=>this.validateRange(d)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((d,h)=>d.startLineNumber-h.startLineNumber||d.startColumn-h.startColumn);const c=[];c.push(l.reduce((d,h)=>te.areIntersecting(d,h)?d.plusRange(h):(c.push(d),h)));let u;if(!i&&e.indexOf(`
`)<0){const h=new Gm(e,i,r,s).parseSearchRequest();if(!h)return[];u=f=>this.findMatchesLineByLine(f,h,o,a)}else u=d=>Xx.findMatches(this,new Gm(e,i,r,s),d,o,a);return c.map(u).reduce((d,h)=>d.concat(h),[])}findNextMatch(e,t,i,r,s,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new Gm(e,i,r,s).parseSearchRequest();if(!c)return null;const u=this.getLineCount();let d=new te(a.lineNumber,a.column,u,this.getLineMaxColumn(u)),h=this.findMatchesLineByLine(d,c,o,1);return Xx.findNextMatch(this,new Gm(e,i,r,s),a,o),h.length>0||(d=new te(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),h=this.findMatchesLineByLine(d,c,o,1),h.length>0)?h[0]:null}return Xx.findNextMatch(this,new Gm(e,i,r,s),a,o)}findPreviousMatch(e,t,i,r,s,o){this._assertNotDisposed();const a=this.validatePosition(t);return Xx.findPreviousMatch(this,new Gm(e,i,r,s),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof XR?e:new XR(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,r=e.length;i<r;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,r){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,r)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,r){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const s=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let o=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let u=!1;for(let d=0,h=s.length;d<h;d++){const f=s[d].range,g=f.startLineNumber>c.endLineNumber,p=c.startLineNumber>f.endLineNumber;if(!g&&!p){u=!0;break}}if(!u){o=!1;break}}if(o)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],u=this.getLineMaxColumn(c);let d=!0;for(let h=0,f=s.length;h<f;h++){const g=s[h].range,p=s[h].text;if(!(c<g.startLineNumber||c>g.endLineNumber)&&!(c===g.startLineNumber&&g.startColumn===u&&g.isEmpty()&&p&&p.length>0&&p.charAt(0)===`
`)&&!(c===g.startLineNumber&&g.startColumn===1&&g.isEmpty()&&p&&p.length>0&&p.charAt(p.length-1)===`
`)){d=!1;break}}if(d){const h=new te(c,1,c,u);t.push(new XR(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,r)}_applyUndo(e,t,i,r){const s=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new te(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,i,r)}_applyRedo(e,t,i,r){const s=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new te(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(s,t,!1,!0,i,r)}_applyUndoRedoEdits(e,t,i,r,s,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=r,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),r=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),o=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,u=o.length;c<u;c++){const d=o[c];this._decorationsTree.acceptReplace(d.rangeOffset,d.rangeLength,d.text.length,d.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=i;for(let c=0,u=o.length;c<u;c++){const d=o[c],[h]=O1(d.text);this._onDidChangeDecorations.fire();const f=d.range.startLineNumber,g=d.range.endLineNumber,p=g-f,v=h,b=Math.min(p,v),_=v-p,y=s-l-_+f,C=y,w=y+v,x=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new de(C,1)),this.getOffsetAt(new de(w,this.getLineMaxColumn(w))),0),k=vc.fromDecorations(x),E=new Hd(k);for(let L=b;L>=0;L--){const M=f+L,D=y+L;E.takeFromEndWhile(A=>A.lineNumber>D);const O=E.takeFromEndWhile(A=>A.lineNumber===D);a.push(new PX(M,this.getLineContent(D),O))}if(b<p){const L=f+b;a.push(new Wnt(L+1,g))}if(b<v){const L=new Hd(k),M=f+b,D=v-b,O=s-l-D+M+1,A=[],R=[];for(let V=0;V<D;V++){const F=O+V;R[V]=this.getLineContent(F),L.takeWhile(T=>T.lineNumber<F),A[V]=L.takeWhile(T=>T.lineNumber===F)}a.push(new $nt(M+1,f+v,R,A))}l+=_}this._emitContentChangedEvent(new $0(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits===null?void 0:r.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=Array.from(e).map(r=>new PX(r,this.getLineContent(r),this._getInjectedTextInLine(r)));this._onDidChangeInjectedText.fire(new hge(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(s,o)=>this._deltaDecorationsImpl(e,[],[{range:s,options:o}])[0],changeDecoration:(s,o)=>{this._changeDecorationImpl(s,o)},changeDecorationOptions:(s,o)=>{this._changeDecorationOptionsImpl(s,VX(o))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,o)=>s.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,s,o)};let r=null;try{r=t(i)}catch(s){$n(s)}return i.addDecoration=u_,i.changeDecoration=u_,i.changeDecorationOptions=u_,i.removeDecoration=u_,i.deltaDecorations=u_,r}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),$n(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const r=e?this._decorations[e]:null;if(!r)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:HX[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;const s=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),o,a,s),r.setOptions(HX[i]),this._decorationsTree.insert(r),r.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,r=t.length;i<r;i++){const s=t[i];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,r=!1,s=!1){const o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),l=Math.min(o,Math.max(1,t)),c=this.getLineMaxColumn(l),u=new te(a,1,l,c),d=this._getDecorationsInRange(u,i,r,s);return RP(d,this._decorationProvider.getDecorationsInRange(u,i,r)),d}getDecorationsInRange(e,t=0,i=!1,r=!1,s=!1){const o=this.validateRange(e),a=this._getDecorationsInRange(o,t,i,s);return RP(a,this._decorationProvider.getDecorationsInRange(o,t,i,r)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),r=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return vc.fromDecorations(r).filter(s=>s.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,r){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,o,t,i,r)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const r=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),o=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,o,r),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const r=!!(i.options.overviewRuler&&i.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const o=r!==s,a=Qnt(t)!==IE(i);o||a?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,r=!1){const s=this.getVersionId(),o=t.length;let a=0;const l=i.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const u=new Array(l);for(;a<o||c<l;){let d=null;if(a<o){do d=this._decorations[t[a++]];while(!d&&a<o);if(d){if(d.options.after){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(d.options.before){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(d),r||this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(c<l){if(!d){const b=++this._lastDecorationId,_=`${this._instanceId};${b}`;d=new sge(_,0,0),this._decorations[_]=d}const h=i[c],f=this._validateRangeRelaxedNoAllocations(h.range),g=VX(h.options),p=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),v=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);d.ownerId=e,d.reset(s,p,v,f),d.setOptions(g),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),r||this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(d),u[c]=d.id,c++}else d&&delete this._decorations[d.id]}return u}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return Xnt(this.getLineContent(e))+1}},ug=Xl,Xl._MODEL_SYNC_LIMIT=50*1024*1024,Xl.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,Xl.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,Xl.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024,Xl.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Kr.tabSize,indentSize:Kr.indentSize,insertSpaces:Kr.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Kr.trimAutoWhitespace,largeFileOptimizations:Kr.largeFileOptimizations,bracketPairColorizationOptions:Kr.bracketPairColorizationOptions},Xl);O6=ug=jnt([vk(4,YH),vk(5,br),vk(6,Eu),vk(7,Fn)],O6);function Xnt(n){let e=0;for(const t of n)if(t===" "||t==="	")e++;else break;return e}function CA(n){return!!(n.options.overviewRuler&&n.options.overviewRuler.color)}function Qnt(n){return!!n.after||!!n.before}function IE(n){return!!n.options.after||!!n.options.before}class BX{constructor(){this._decorationsTree0=new mA,this._decorationsTree1=new mA,this._injectedTextDecorationsTree=new mA}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,r,s,o){const a=e.getVersionId(),l=this._intervalSearch(t,i,r,s,a,o);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,r,s,o){const a=this._decorationsTree0.intervalSearch(e,t,i,r,s,o),l=this._decorationsTree1.intervalSearch(e,t,i,r,s,o),c=this._injectedTextDecorationsTree.intervalSearch(e,t,i,r,s,o);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,i,r){const s=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,i,r,!1,s,!1);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),r=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,r).filter(s=>s.options.showIfCollapsed||!s.range.isEmpty())}getAll(e,t,i,r,s){const o=e.getVersionId(),a=this._search(t,i,r,o,s);return this._ensureNodesHaveRanges(e,a)}_search(e,t,i,r,s){if(i)return this._decorationsTree1.search(e,t,r,s);{const o=this._decorationsTree0.search(e,t,r,s),a=this._decorationsTree1.search(e,t,r,s),l=this._injectedTextDecorationsTree.search(e,t,r,s);return o.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),r=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(r)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){IE(e)?this._injectedTextDecorationsTree.insert(e):CA(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){IE(e)?this._injectedTextDecorationsTree.delete(e):CA(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){IE(e)?this._injectedTextDecorationsTree.resolveNode(e,t):CA(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,r){this._decorationsTree0.acceptReplace(e,t,i,r),this._decorationsTree1.acceptReplace(e,t,i,r),this._injectedTextDecorationsTree.acceptReplace(e,t,i,r)}}function Rc(n){return n.replace(/[^a-z0-9\-_]/gi," ")}class fge{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class Jnt extends fge{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:KL.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class eit{constructor(e){this.position=(e==null?void 0:e.position)??Nf.Center,this.persistLane=e==null?void 0:e.persistLane}}class tit extends fge{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?De.fromHex(e):t.getColor(e.id)}}class bw{static from(e){return e instanceof bw?e:new bw(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class nr{static register(e){return new nr(e)}static createDynamic(e){return new nr(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?Rc(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?Rc(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new Jnt(e.overviewRuler):null,this.minimap=e.minimap?new tit(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new eit(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?Rc(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?Rc(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?Rc(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?hUe(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?Rc(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?Rc(e.marginClassName):null,this.inlineClassName=e.inlineClassName?Rc(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?Rc(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?Rc(e.afterContentClassName):null,this.after=e.after?bw.from(e.after):null,this.before=e.before?bw.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}nr.EMPTY=nr.register({description:"empty"});const HX=[nr.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),nr.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),nr.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),nr.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function VX(n){return n instanceof nr?n:nr.createDynamic(n)}class nit extends ke{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new ae),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)==null||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,i;this._affectsMinimap||(this._affectsMinimap=!!((t=e.minimap)!=null&&t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!((i=e.overviewRuler)!=null&&i.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class iit extends ke{constructor(){super(),this._fastEmitter=this._register(new ae),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new ae),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var rit=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},_k=function(n,e){return function(t,i){e(t,i,n)}},dv;function tg(n){return n.toString()}let sit=class{constructor(e,t,i){this.model=e,this._modelEventListeners=new dt,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(r=>i(e,r)))}dispose(){this._modelEventListeners.dispose()}};const oit=co||hn?1:2;class ait{constructor(e,t,i,r,s,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=r,this.heapSize=s,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}var kp;let P6=(kp=class extends ke{constructor(e,t,i,r){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._instantiationService=r,this._onModelAdded=this._register(new ae),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new ae),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new ae),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(s=>this._updateModelOptions(s))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var h;let i=Kr.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(i=f),i<1&&(i=1)}let r="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(r=Math.max(f,1))}let s=Kr.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(s=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let o=oit;const a=e.eol;a===`\r
`?o=2:a===`
`&&(o=1);let l=Kr.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=Kr.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let u=Kr.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let d=Kr.bracketPairColorizationOptions;return(h=e.editor)!=null&&h.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(d={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:r,insertSpaces:s,detectIndentation:c,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:u,bracketPairColorizationOptions:d}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:al===3||al===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){const r=typeof e=="string"?e:e.languageId;let s=this._modelCreationOptionsByLanguageAndResource[r+t];if(!s){const o=this._configurationService.getValue("editor",{overrideIdentifier:r,resource:t}),a=this._getEOL(t,r);s=dv._readModelOptions({editor:o,eol:a},i),this._modelCreationOptionsByLanguageAndResource[r+t]=s}return s}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let r=0,s=i.length;r<s;r++){const o=i[r],a=this._models[o],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const u=t[l+c],d=this.getCreationOptions(l,c,a.model.isForSimpleWidget);dv._setModelOptionsForModel(a.model,d,u)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&No(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(tg(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(tg(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(tg(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,r)=>i.time-r.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,r){const s=this.getCreationOptions(t,i,r),o=this._instantiationService.createInstance(O6,e,t,s,i);if(i&&this._disposedModels.has(tg(i))){const c=this._removeDisposedModel(i),u=this._undoRedoService.getElements(i),d=this._getSHA1Computer(),h=d.canComputeSHA1(o)?d.computeSHA1(o)===c.sha1:!1;if(h||c.sharesUndoRedoStack){for(const f of u.past)id(f)&&f.matchesResource(i)&&f.setModel(o);for(const f of u.future)id(f)&&f.matchesResource(i)&&f.setModel(o);this._undoRedoService.setElementsValidFlag(i,!0,f=>id(f)&&f.matchesResource(i)),h&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=tg(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new sit(o,c=>this._onWillDispose(c),(c,u)=>this._onDidChangeLanguage(c,u));return this._models[a]=l,l}createModel(e,t,i,r=!1){let s;return t?s=this._createModelData(e,t,i,r):s=this._createModelData(e,gl,i,r),this._onModelAdded.fire(s.model),s.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,r=t.length;i<r;i++){const s=t[i];e.push(this._models[s].model)}return e}getModel(e){const t=tg(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Wt.file||e.scheme===Wt.vscodeRemote||e.scheme===Wt.vscodeUserData||e.scheme===Wt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=tg(e.uri),i=this._models[t],r=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,o=0;if(r||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const u of c.past)id(u)&&u.matchesResource(e.uri)&&(s=!0,o+=u.heapSize(e.uri),u.setModel(e.uri));for(const u of c.future)id(u)&&u.matchesResource(e.uri)&&(s=!0,o+=u.heapSize(e.uri),u.setModel(e.uri))}}const a=dv.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(s)if(!r&&(o>a||!l.canComputeSHA1(e))){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>id(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new ait(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),r,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!r){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,r=e.getLanguageId(),s=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(r,e.uri,e.isForSimpleWidget);dv._setModelOptionsForModel(e,o,s),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new F6}},dv=kp,kp.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,kp);P6=dv=rit([_k(0,Ti),_k(1,hhe),_k(2,YH),_k(3,Fn)],P6);const AT=class AT{canComputeSHA1(e){return e.getValueLength()<=AT.MAX_MODEL_SIZE}computeSHA1(e){const t=new e8,i=e.createSnapshot();let r;for(;r=i.read();)t.update(r);return t.digest()}};AT.MAX_MODEL_SIZE=10*1024*1024;let F6=AT;var B6;(function(n){n[n.PRESERVE=0]="PRESERVE",n[n.LAST=1]="LAST"})(B6||(B6={}));const gge={Quickaccess:"workbench.contributions.quickaccess"};class lit{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),Pt(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return rH([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}Lr.add(gge.Quickaccess,new lit);const cit={ctrlCmd:!1,alt:!1};var W1;(function(n){n[n.Blur=1]="Blur",n[n.Gesture=2]="Gesture",n[n.Other=3]="Other"})(W1||(W1={}));var Gc;(function(n){n[n.NONE=0]="NONE",n[n.FIRST=1]="FIRST",n[n.SECOND=2]="SECOND",n[n.LAST=3]="LAST"})(Gc||(Gc={}));var Xn;(function(n){n[n.First=1]="First",n[n.Second=2]="Second",n[n.Last=3]="Last",n[n.Next=4]="Next",n[n.Previous=5]="Previous",n[n.NextPage=6]="NextPage",n[n.PreviousPage=7]="PreviousPage",n[n.NextSeparator=8]="NextSeparator",n[n.PreviousSeparator=9]="PreviousSeparator"})(Xn||(Xn={}));var xN;(function(n){n[n.Title=1]="Title",n[n.Inline=2]="Inline"})(xN||(xN={}));const pM=cn("quickInputService");var uit=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},zX=function(n,e){return function(t,i){e(t,i,n)}};let H6=class extends ke{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Lr.as(gge.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var g,p;const[r,s]=this.getOrInstantiateProvider(e,i==null?void 0:i.enabledProviderPrefixes),o=this.visibleQuickAccess,a=o==null?void 0:o.descriptor;if(o&&s&&a===s){e!==s.prefix&&!(i!=null&&i.preserveValue)&&(o.picker.value=e),this.adjustValueSelection(o.picker,s,i);return}if(s&&!(i!=null&&i.preserveValue)){let v;if(o&&a&&a!==s){const b=o.value.substr(a.prefix.length);b&&(v=`${s.prefix}${b}`)}if(!v){const b=r==null?void 0:r.defaultFilterValue;b===B6.LAST?v=this.lastAcceptedPickerValues.get(s):typeof b=="string"&&(v=`${s.prefix}${b}`)}typeof v=="string"&&(e=v)}const l=(g=o==null?void 0:o.picker)==null?void 0:g.valueSelection,c=(p=o==null?void 0:o.picker)==null?void 0:p.value,u=new dt,d=u.add(this.quickInputService.createQuickPick({useSeparators:!0}));d.value=e,this.adjustValueSelection(d,s,i),d.placeholder=(i==null?void 0:i.placeholder)??(s==null?void 0:s.placeholder),d.quickNavigate=i==null?void 0:i.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!o,(typeof(i==null?void 0:i.itemActivation)=="number"||i!=null&&i.quickNavigateConfiguration)&&(d.itemActivation=(i==null?void 0:i.itemActivation)??Gc.SECOND),d.contextKey=s==null?void 0:s.contextKey,d.filterValue=v=>v.substring(s?s.prefix.length:0);let h;t&&(h=new gde,u.add(Be.once(d.onWillAccept)(v=>{v.veto(),d.hide()}))),u.add(this.registerPickerListeners(d,r,s,e,i));const f=u.add(new pb);if(r&&u.add(r.provide(d,f.token,i==null?void 0:i.providerOptions)),Be.once(d.onDidHide)(()=>{d.selectedItems.length===0&&f.cancel(),u.dispose(),h==null||h.complete(d.selectedItems.slice(0))}),d.show(),l&&c===e&&(d.valueSelection=l),t)return h==null?void 0:h.p}adjustValueSelection(e,t,i){let r;i!=null&&i.preserveValue?r=[e.value.length,e.value.length]:r=[(t==null?void 0:t.prefix.length)??0,e.value.length],e.valueSelection=r}registerPickerListeners(e,t,i,r,s){const o=new dt,a=this.visibleQuickAccess={picker:e,descriptor:i,value:r};return o.add(Pt(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,s==null?void 0:s.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:s==null?void 0:s.enabledProviderPrefixes,preserveValue:!0,providerOptions:s==null?void 0:s.providerOptions}):a.value=l})),i&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),o}getOrInstantiateProvider(e,t){const i=this.registry.getQuickAccessProvider(e);if(!i||t&&!(t!=null&&t.includes(i.prefix)))return[void 0,void 0];let r=this.mapProviderToDescriptor.get(i);return r||(r=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,r)),[r,i]}};H6=uit([zX(0,pM),zX(1,Fn)],H6);class mM extends Xd{constructor(e){super(),this._onChange=this._register(new ae),this.onChange=this._onChange.event,this._onKeyDown=this._register(new ae),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...vn.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(Lu().setupManagedHover(e.hoverDelegate??Wa("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,i=>{if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault(),i.stopPropagation();return}this._onKeyDown.fire(i)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var dit=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};class pge{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}dit([Ii],pge.prototype,"toString",null);const hit=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function fit(n){const e=[];let t=0,i;for(;i=hit.exec(n);){i.index-t>0&&e.push(n.substring(t,i.index));const[,r,s,,o]=i;o?e.push({label:r,href:s,title:o}):e.push({label:r,href:s}),t=i.index+i[0].length}return t<n.length&&e.push(n.substring(t)),new pge(e)}const yA={},git=new dfe("quick-input-button-icon-");function pit(n){if(!n)return;let e;const t=n.dark.toString();return yA[t]?e=yA[t]:(e=git.nextId(),i8(`.${e}, .hc-light .${e}`,`background-image: ${$d(n.light||n.dark)}`),i8(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${$d(n.dark)}`),yA[t]=e),e}function DC(n,e,t){let i=n.iconClass||pit(n.iconPath);return n.alwaysVisible&&(i=i?`${i} always-visible`:"always-visible"),{id:e,label:"",tooltip:n.tooltip||"",class:i,enabled:!0,run:t}}function mit(n,e,t){Fs(e);const i=fit(n);let r=0;for(const s of i.nodes)if(typeof s=="string")e.append(...vp(s));else{let o=s.title;!o&&s.href.startsWith("command:")?o=S("executeCommand","Click to execute command '{0}'",s.href.substring(8)):o||(o=s.href);const a=xt("a",{href:s.href,title:o,tabIndex:r++},s.label);a.style.textDecoration="underline";const l=f=>{Lje(f)&&en.stop(f,!0),t.callback(s.href)},c=t.disposables.add(new qt(a,We.CLICK)).event,u=t.disposables.add(new qt(a,We.KEY_DOWN)).event,d=Be.chain(u,f=>f.filter(g=>{const p=new ii(g);return p.equals(10)||p.equals(3)}));t.disposables.add(zs.addTarget(a));const h=t.disposables.add(new qt(a,Qn.Tap)).event;Be.any(c,h,d)(l,null,t.disposables),e.appendChild(a)}}var vit=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},WX=function(n,e){return function(t,i){e(t,i,n)}};const mge="inQuickInput",bit=new ht(mge,!1,S("inQuickInput","Whether keyboard focus is inside the quick input control")),_it=Ln.has(mge),vge="quickInputType",Cit=new ht(vge,void 0,S("quickInputType","The type of the currently visible quick input")),bge="cursorAtEndOfQuickInputBox",yit=new ht(bge,!1,S("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),wit=Ln.has(bge),V6={iconClass:vn.asClassName(rt.quickInputBack),tooltip:S("quickInput.back","Back"),handle:-1},OT=class OT extends ke{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=OT.noPromptMessage,this._severity=Ki.Ignore,this.onDidTriggerButtonEmitter=this._register(new ae),this.onDidHideEmitter=this._register(new ae),this.onWillHideEmitter=this._register(new ae),this.onDisposeEmitter=this._register(new ae),this.visibleDisposables=this._register(new dt),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Yp;this._ignoreFocusOut=e&&!Yp,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===V6),this._rightButtons=e.filter(t=>t!==V6&&t.location!==xN.Inline),this._inlineButtons=e.filter(t=>t.location===xN.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=W1.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=W1.Other){this.onWillHideEmitter.fire({reason:e})}update(){var r;if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Fs(this.ui.widget,this._widget):Fs(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new vm,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const s=this._leftButtons.map((l,c)=>DC(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.leftActionBar.push(s,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const o=this._rightButtons.map((l,c)=>DC(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.rightActionBar.push(o,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const a=this._inlineButtons.map((l,c)=>DC(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.inlineActionBar.push(a,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const s=((r=this.toggles)==null?void 0:r.filter(o=>o instanceof mM))??[];this.ui.inputBox.toggles=s}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,Fs(this.ui.message),mit(i,this.ui.message,{callback:s=>{this.ui.linkOpenerDelegate(s)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?S("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Ki.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};OT.noPromptMessage=S("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");let kN=OT;const PT=class PT extends kN{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new ae),this.onWillAcceptEmitter=this._register(new ae),this.onDidAcceptEmitter=this._register(new ae),this.onDidCustomEmitter=this._register(new ae),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=Gc.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new ae),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new ae),this.onDidTriggerItemButtonEmitter=this._register(new ae),this.onDidTriggerSeparatorButtonEmitter=this._register(new ae),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new cS,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?cit:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(Xn.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&rr(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&rr(e,this._selectedItems,(i,r)=>i===r)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(AH(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&rr(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return _e(this.ui.container,We.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new ii(e),i=t.keyCode;this._quickNavigate.keybindings.some(o=>{const a=o.getChords();return a.length>1?!1:a[0].shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&i===6||a[0].ctrlKey&&i===5||a[0].metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let r=this.ariaLabel;!r&&i.inputBox&&(r=this.placeholder||PT.DEFAULT_ARIA_LABEL,this.title&&(r+=` - ${this.title}`)),this.ui.list.ariaLabel!==r&&(this.ui.list.ariaLabel=r??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case Gc.NONE:this._itemActivation=Gc.FIRST;break;case Gc.SECOND:this.ui.list.focus(Xn.Second),this._itemActivation=Gc.FIRST;break;case Gc.LAST:this.ui.list.focus(Xn.Last),this._itemActivation=Gc.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Xn.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}};PT.DEFAULT_ARIA_LABEL=S("quickInputBox.ariaLabel","Type to narrow down results.");let EN=PT,Sit=class extends kN{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new ae),this.onDidAcceptEmitter=this._register(new ae),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}},z6=class extends aw{constructor(e,t){super("element",!1,i=>this.getOverrideOptions(i),e,t)}getOverrideOptions(e){const t=(kr(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};z6=vit([WX(0,Ti),WX(1,yS)],z6);De.white.toString(),De.white.toString();class W6 extends ke{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new ae),this._onDidEscape=this._register(new ae),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,r=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=r||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(zs.addTarget(this._element)),[We.CLICK,Qn.Tap].forEach(s=>{this._register(_e(this._element,s,o=>{if(!this.enabled){en.stop(o);return}this._onDidClick.fire(o)}))}),this._register(_e(this._element,We.KEY_DOWN,s=>{const o=new ii(s);let a=!1;this.enabled&&(o.equals(3)||o.equals(10))?(this._onDidClick.fire(s),a=!0):o.equals(9)&&(this._onDidEscape.fire(s),this._element.blur(),a=!0),a&&en.stop(o,!0)})),this._register(_e(this._element,We.MOUSE_OVER,s=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(_e(this._element,We.MOUSE_OUT,s=>{this.updateBackground(!1)})),this.focusTracker=this._register(Jy(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of vp(e))if(typeof i=="string"){if(i=i.trim(),i==="")continue;const r=document.createElement("span");r.textContent=i,t.push(r)}else t.push(i);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var r;if(this._label===e||P0(this._label)&&P0(e)&&KXe(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(P0(e)){const s=hV(e,{inline:!0});s.dispose();const o=(r=s.element.querySelector("p"))==null?void 0:r.innerHTML;if(o){const a=Cde(o,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=a}else Fs(t)}else this.options.supportIcons?Fs(t,...this.getContentElements(e)):t.textContent=e;let i="";typeof this.options.title=="string"?i=this.options.title:this.options.title&&(i=iQe(e)),this.setTitle(i),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",i),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...vn.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(Lu().setupManagedHover(this.options.hoverDelegate??Wa("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}class $X{constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=ct(e,xt(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=z5(this.countFormat,this.count),this.element.title=z5(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const UX="done",jX="active",wA="infinite",SA="infinite-long-running",KX="discrete",FT=class FT extends ke{constructor(e,t){super(),this.progressSignal=this._register(new Vd),this.workedVal=0,this.showDelayedScheduler=this._register(new bs(()=>Mde(this.element),0)),this.longRunningScheduler=this._register(new bs(()=>this.infiniteLongRunning(),FT.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(t==null?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(jX,wA,SA,KX),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(UX),this.element.classList.contains(wA)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(KX,UX,SA),this.element.classList.add(jX,wA),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(SA)}getContainer(){return this.element}};FT.LONG_RUNNING_INFINITE_THRESHOLD=1e4;let $6=FT;const xit=S("caseDescription","Match Case"),kit=S("wordsDescription","Match Whole Word"),Eit=S("regexDescription","Use Regular Expression");class Lit extends mM{constructor(e){super({icon:rt.caseSensitive,title:xit+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Wa("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Nit extends mM{constructor(e){super({icon:rt.wholeWord,title:kit+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Wa("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Tit extends mM{constructor(e){super({icon:rt.regex,title:Eit+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Wa("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Iit{constructor(e,t=0,i=e.length,r=t-1){this.items=e,this.start=t,this.end=i,this.index=r}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class Dit{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new Iit(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const d_=xt;class Mit extends Xd{constructor(e,t,i){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new ae),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new ae),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=ct(e,d_(".monaco-inputbox.idle"));const r=this.options.flexibleHeight?"textarea":"input",s=ct(this.element,d_(".ibwrapper"));if(this.input=ct(s,d_(r+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=ct(s,d_("div.mirror")),this.mirror.innerText="",this.scrollableElement=new aXe(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),ct(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const o=this._register(new qt(e.ownerDocument,"selectionchange")),a=Be.filter(o.event,()=>{const l=e.ownerDocument.getSelection();return(l==null?void 0:l.anchorNode)===s});this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Td(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(Lu().setupManagedHover(Wa("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:n8(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return MH(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if(this.state==="open"&&No(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${kd(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=DH(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:r=>{if(!this.message)return null;e=ct(r,d_(".monaco-inputbox-container")),t();const s={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?pXe(this.message.content,s):gXe(this.message.content,s);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background??"",o.style.color=a.foreground??"",o.style.border=a.border?`1px solid ${a.border}`:"",ct(e,o),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=S("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=S("alertWarningMessage","Warning: {0}",this.message.content):i=S("alertInfoMessage","Info: {0}",this.message.content),uw(i),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText="",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",i=e.inputForeground??"",r=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=i,this.input.style.backgroundColor="inherit",this.input.style.color=i,this.element.style.border=`1px solid ${kd(r,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=n8(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,r=t.selectionEnd,s=t.value;i!==null&&r!==null&&(this.value=s.substr(0,i)+e+s.substr(r),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)==null||e.dispose(),super.dispose()}}class Rit extends Mit{constructor(e,t,i){const r=S({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is  to represent the up and down arrow keys.']}," or {0} for history",""),s=S({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is  to represent the up and down arrow keys.']}," ({0} for history)","");super(e,t,i),this._onDidFocus=this._register(new ae),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new ae),this.onDidBlur=this._onDidBlur.event,this.history=new Dit(i.history,100);const o=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(r)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?r:s,l=this.placeholder+a;i.showPlaceholderOnFocus&&!MH(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||o()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>o()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return i.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(s)||a(r)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",cN(this.value?this.value:S("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,cN(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const Ait=S("defaultLabel","input");class Oit extends Xd{constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new Vd),this.additionalToggles=[],this._onDidOptionChange=this._register(new ae),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new ae),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new ae),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new ae),this._onKeyUp=this._register(new ae),this._onCaseSensitiveKeyDown=this._register(new ae),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new ae),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||Ait,this.showCommonFindToggles=!!i.showCommonFindToggles;const r=i.appendCaseSensitiveLabel||"",s=i.appendWholeWordsLabel||"",o=i.appendRegexLabel||"",a=i.history||[],l=!!i.flexibleHeight,c=!!i.flexibleWidth,u=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Rit(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:i.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:u,inputBoxStyles:i.inputBoxStyles}));const d=this._register(xV());if(this.showCommonFindToggles){this.regex=this._register(new Tit({appendTitle:o,isChecked:!1,hoverDelegate:d,...i.toggleStyles})),this._register(this.regex.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(f=>{this._onRegexKeyDown.fire(f)})),this.wholeWords=this._register(new Nit({appendTitle:s,isChecked:!1,hoverDelegate:d,...i.toggleStyles})),this._register(this.wholeWords.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new Lit({appendTitle:r,isChecked:!1,hoverDelegate:d,...i.toggleStyles})),this._register(this.caseSensitive.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(f=>{this._onCaseSensitiveKeyDown.fire(f)}));const h=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,f=>{if(f.equals(15)||f.equals(17)||f.equals(9)){const g=h.indexOf(this.domNode.ownerDocument.activeElement);if(g>=0){let p=-1;f.equals(17)?p=(g+1)%h.length:f.equals(15)&&(g===0?p=h.length-1:p=g-1),f.equals(9)?(h[g].blur(),this.inputBox.focus()):p>=0&&h[p].focus(),en.stop(f,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i==null?void 0:i.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register(_e(this.inputBox.inputElement,"compositionstart",h=>{this.imeSessionInProgress=!0})),this._register(_e(this.inputBox.inputElement,"compositionend",h=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,i;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)==null||e.enable(),(t=this.wholeWords)==null||t.enable(),(i=this.caseSensitive)==null||i.enable();for(const r of this.additionalToggles)r.enable()}disable(){var e,t,i;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)==null||e.disable(),(t=this.wholeWords)==null||t.disable(),(i=this.caseSensitive)==null||i.disable();for(const r of this.additionalToggles)r.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new dt;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(i=>{this._onDidOptionChange.fire(i),!i&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,i,r;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(((t=this.caseSensitive)==null?void 0:t.width())??0)+(((i=this.wholeWords)==null?void 0:i.width())??0)+(((r=this.regex)==null?void 0:r.width())??0)+this.additionalToggles.reduce((s,o)=>s+o.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e;return((e=this.caseSensitive)==null?void 0:e.checked)??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e;return((e=this.wholeWords)==null?void 0:e.checked)??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e;return((e=this.regex)==null?void 0:e.checked)??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)==null||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const Pit=xt;class Fit extends ke{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=s=>vr(this.findInput.inputBox.inputElement,We.KEY_DOWN,s),this.onDidChange=s=>this.findInput.onDidChange(s),this.container=ct(this.parent,Pit(".quick-input-box")),this.findInput=this._register(new Oit(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const r=this.findInput.inputBox.inputElement;r.role="combobox",r.ariaHasPopup="menu",r.ariaAutoComplete="list",r.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===Ki.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===Ki.Info?1:e===Ki.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===Ki.Info?1:e===Ki.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class Bit{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:ke.None}}renderElement(e,t,i,r){var l;if((l=i.disposable)==null||l.dispose(),!i.data)return;const s=this.modelProvider();if(s.isResolved(e))return this.renderer.renderElement(s.get(e),e,i.data,r);const o=new pb,a=s.resolve(e,o.token);i.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(c=>this.renderer.renderElement(c,e,i.data,r))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class Hit{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function Vit(n,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new Hit(n,e.accessibilityProvider)}}class zit{constructor(e,t,i,r,s={}){const o=()=>this.model,a=r.map(l=>new Bit(l,o));this.list=new Nc(e,t,i,a,Vit(o,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Be.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return Be.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return Be.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(r=>this._model.get(r)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Zs(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var wb=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};const Wit=!1;var qX;(function(n){n.North="north",n.South="south",n.East="east",n.West="west"})(qX||(qX={}));let $it=4;const Uit=new ae;let jit=300;const Kit=new ae;class BV{constructor(e){this.el=e,this.disposables=new dt}get onPointerMove(){return this.disposables.add(new qt(bt(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new qt(bt(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}wb([Ii],BV.prototype,"onPointerMove",null);wb([Ii],BV.prototype,"onPointerUp",null);class HV{get onPointerMove(){return this.disposables.add(new qt(this.el,Qn.Change)).event}get onPointerUp(){return this.disposables.add(new qt(this.el,Qn.End)).event}constructor(e){this.el=e,this.disposables=new dt}dispose(){this.disposables.dispose()}}wb([Ii],HV.prototype,"onPointerMove",null);wb([Ii],HV.prototype,"onPointerUp",null);class LN{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}wb([Ii],LN.prototype,"onPointerMove",null);wb([Ii],LN.prototype,"onPointerUp",null);const GX="pointer-events-disabled";class Ca extends ke{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=ct(this.el,xt(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Pt(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new qt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Ca.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new qt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Ca.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=ct(this.el,xt(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Pt(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new qt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Ca.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new qt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Ca.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=jit,this.hoverDelayer=this._register(new hS(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new ae),this._onDidStart=this._register(new ae),this._onDidChange=this._register(new ae),this._onDidReset=this._register(new ae),this._onDidEnd=this._register(new ae),this.orthogonalStartSashDisposables=this._register(new dt),this.orthogonalStartDragHandleDisposables=this._register(new dt),this.orthogonalEndSashDisposables=this._register(new dt),this.orthogonalEndDragHandleDisposables=this._register(new dt),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=ct(e,xt(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),hn&&this.el.classList.add("mac");const r=this._register(new qt(this.el,"mousedown")).event;this._register(r(d=>this.onPointerStart(d,new BV(e)),this));const s=this._register(new qt(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const o=this._register(new qt(this.el,"mouseenter")).event;this._register(o(()=>Ca.onMouseEnter(this)));const a=this._register(new qt(this.el,"mouseleave")).event;this._register(a(()=>Ca.onMouseLeave(this))),this._register(zs.addTarget(this.el));const l=this._register(new qt(this.el,Qn.Start)).event;this._register(l(d=>this.onPointerStart(d,new HV(this.el)),this));const c=this._register(new qt(this.el,Qn.Tap)).event;let u;this._register(c(d=>{if(u){clearTimeout(u),u=void 0,this.onPointerDoublePress(d);return}clearTimeout(u),u=setTimeout(()=>u=void 0,250)},this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=$it,this._register(Uit.event(d=>{this.size=d,this.layout()}))),this._register(Kit.event(d=>this.hoverDelay=d)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",Wit),this.layout()}onPointerStart(e,t){en.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(i=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new LN(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new LN(t))),!this.state)return;const r=this.el.ownerDocument.getElementsByTagName("iframe");for(const g of r)g.classList.add(GX);const s=e.pageX,o=e.pageY,a=e.altKey,l={startX:s,currentX:s,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=Fa(this.el),u=()=>{let g="";i?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=hn?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=hn?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},d=new dt;u(),i||this.onDidEnablementChange.event(u,null,d);const h=g=>{en.stop(g,!1);const p={startX:s,currentX:g.pageX,startY:o,currentY:g.pageY,altKey:a};this._onDidChange.fire(p)},f=g=>{en.stop(g,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),d.dispose();for(const p of r)p.classList.remove(GX)};t.onPointerMove(h,null,d),t.onPointerUp(f,null,d),d.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Ca.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Ca.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Ca.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!kr(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const qit={separatorBorder:De.transparent};class _ge{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var i,r;if(e!==this.visible){e?(this.size=Qs(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{(r=(i=this.view).setVisible)==null||r.call(i,e)}catch(s){console.error("Splitview: Failed to set visible view"),console.error(s)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,r){this.container=e,this.view=t,this.disposable=r,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(i){console.error("Splitview: Failed to layout view"),console.error(i)}}dispose(){this.disposable.dispose()}}class Git extends _ge{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class Yit extends _ge{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Gu;(function(n){n[n.Idle=0]="Idle",n[n.Busy=1]="Busy"})(Gu||(Gu={}));var YX;(function(n){n.Distribute={type:"distribute"};function e(r){return{type:"split",index:r}}n.Split=e;function t(r){return{type:"auto",index:r}}n.Auto=t;function i(r){return{type:"invisible",cachedVisibleSize:r}}n.Invisible=i})(YX||(YX={}));class Zit extends ke{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Gu.Idle,this._onDidSashChange=this._register(new ae),this._onDidSashReset=this._register(new ae),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=ct(this.el,xt(".sash-container")),this.viewContainer=xt(".split-view-container"),this.scrollable=this._register(new bb({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:r=>Po(bt(this.el),r)})),this.scrollableElement=this._register(new tM(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));const i=this._register(new qt(this.viewContainer,"scroll")).event;this._register(i(r=>{const s=this.scrollableElement.getScrollPosition(),o=Math.abs(this.viewContainer.scrollLeft-s.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-s.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(o!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:o,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(r=>{r.scrollTopChanged&&(this.viewContainer.scrollTop=r.scrollTop),r.scrollLeftChanged&&(this.viewContainer.scrollLeft=r.scrollLeft)})),ct(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||qit),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((r,s)=>{const o=Na(r.visible)||r.visible?r.size:{type:"invisible",cachedVisibleSize:r.size},a=r.view;this.doAddView(a,o,s,!0)}),this._contentSize=this.viewItems.reduce((r,s)=>r+s.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,r){this.doAddView(e,t,i,r)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let r=0;for(let s=0;s<this.viewItems.length;s++){const o=this.viewItems[s],a=this.proportions[s];typeof a=="number"?r+=a:e-=o.size}for(let s=0;s<this.viewItems.length;s++){const o=this.viewItems[s],a=this.proportions[s];typeof a=="number"&&r>0&&(o.size=Qs(Math.round(a*e/r),o.minimumSize,o.maximumSize))}}else{const r=Zs(this.viewItems.length),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,s,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const r=this.sashItems.findIndex(a=>a.sash===e),s=du(_e(this.el.ownerDocument.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),_e(this.el.ownerDocument.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(g=>g.size);let u=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(r===this.sashItems.length-1){const p=this.viewItems[r];u=(p.minimumSize-p.size)/2,d=(p.maximumSize-p.size)/2}else{const p=this.viewItems[r+1];u=(p.size-p.maximumSize)/2,d=(p.size-p.minimumSize)/2}let h,f;if(!l){const g=Zs(r,-1),p=Zs(r+1,this.viewItems.length),v=g.reduce((E,L)=>E+(this.viewItems[L].minimumSize-c[L]),0),b=g.reduce((E,L)=>E+(this.viewItems[L].viewMaximumSize-c[L]),0),_=p.length===0?Number.POSITIVE_INFINITY:p.reduce((E,L)=>E+(c[L]-this.viewItems[L].minimumSize),0),y=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((E,L)=>E+(c[L]-this.viewItems[L].viewMaximumSize),0),C=Math.max(v,y),w=Math.min(_,b),x=this.findFirstSnapIndex(g),k=this.findFirstSnapIndex(p);if(typeof x=="number"){const E=this.viewItems[x],L=Math.floor(E.viewMinimumSize/2);h={index:x,limitDelta:E.visible?C-L:C+L,size:E.size}}if(typeof k=="number"){const E=this.viewItems[k],L=Math.floor(E.viewMinimumSize/2);f={index:k,limitDelta:E.visible?w+L:w-L,size:E.size}}}this.sashDragState={start:a,current:a,index:r,sizes:c,minDelta:u,maxDelta:d,alt:l,snapBefore:h,snapAfter:f,disposable:s}};o(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:r,alt:s,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const u=e-i,d=this.resize(t,u,r,void 0,void 0,o,a,l,c);if(s){const h=t===this.sashItems.length-1,f=this.viewItems.map(y=>y.size),g=h?t:t+1,p=this.viewItems[g],v=p.size-p.maximumSize,b=p.size-p.minimumSize,_=h?t-1:t+1;this.resize(_,-d,f,void 0,void 0,v,b)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Qs(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==Gu.Idle)throw new Error("Cant modify splitview");this.state=Gu.Busy;try{const i=Zs(this.viewItems.length).filter(a=>a!==e),r=[...i.filter(a=>this.viewItems[a].priority===1),e],s=i.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=Qs(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(r,s)}finally{this.state=Gu.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=Qs(i,a.minimumSize,a.maximumSize);const r=Zs(this.viewItems.length),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);this.relayout(s,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,r){if(this.state!==Gu.Idle)throw new Error("Cant modify splitview");this.state=Gu.Busy;try{const s=xt(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(i));const o=e.onDidChange(h=>this.onViewChange(u,h)),a=Pt(()=>s.remove()),l=du(o,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const u=this.orientation===0?new Git(s,e,c,l):new Yit(s,e,c,l);if(this.viewItems.splice(i,0,u),this.viewItems.length>1){const h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new Ca(this.sashContainer,{getHorizontalSashTop:E=>this.getSashPosition(E),getHorizontalSashWidth:this.getSashOrthogonalSize},{...h,orientation:1}):new Ca(this.sashContainer,{getVerticalSashLeft:E=>this.getSashPosition(E),getVerticalSashHeight:this.getSashOrthogonalSize},{...h,orientation:0}),g=this.orientation===0?E=>({sash:f,start:E.startY,current:E.currentY,alt:E.altKey}):E=>({sash:f,start:E.startX,current:E.currentX,alt:E.altKey}),v=Be.map(f.onDidStart,g)(this.onSashStart,this),_=Be.map(f.onDidChange,g)(this.onSashChange,this),C=Be.map(f.onDidEnd,()=>this.sashItems.findIndex(E=>E.sash===f))(this.onSashEnd,this),w=f.onDidReset(()=>{const E=this.sashItems.findIndex(A=>A.sash===f),L=Zs(E,-1),M=Zs(E+1,this.viewItems.length),D=this.findFirstSnapIndex(L),O=this.findFirstSnapIndex(M);typeof D=="number"&&!this.viewItems[D].visible||typeof O=="number"&&!this.viewItems[O].visible||this._onDidSashReset.fire(E)}),x=du(v,_,C,w,f),k={sash:f,disposable:x};this.sashItems.splice(i-1,0,k)}s.appendChild(e.element);let d;typeof t!="number"&&t.type==="split"&&(d=[t.index]),r||this.relayout([i],d),!r&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=Gu.Idle}}relayout(e,t){const i=this.viewItems.reduce((r,s)=>r+s.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(u=>u.size),r,s,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const u=Zs(e,-1),d=Zs(e+1,this.viewItems.length);if(s)for(const k of s)xR(u,k),xR(d,k);if(r)for(const k of r)zx(u,k),zx(d,k);const h=u.map(k=>this.viewItems[k]),f=u.map(k=>i[k]),g=d.map(k=>this.viewItems[k]),p=d.map(k=>i[k]),v=u.reduce((k,E)=>k+(this.viewItems[E].minimumSize-i[E]),0),b=u.reduce((k,E)=>k+(this.viewItems[E].maximumSize-i[E]),0),_=d.length===0?Number.POSITIVE_INFINITY:d.reduce((k,E)=>k+(i[E]-this.viewItems[E].minimumSize),0),y=d.length===0?Number.NEGATIVE_INFINITY:d.reduce((k,E)=>k+(i[E]-this.viewItems[E].maximumSize),0),C=Math.max(v,y,o),w=Math.min(_,b,a);let x=!1;if(l){const k=this.viewItems[l.index],E=t>=l.limitDelta;x=E!==k.visible,k.setVisible(E,l.size)}if(!x&&c){const k=this.viewItems[c.index],E=t<c.limitDelta;x=E!==k.visible,k.setVisible(E,c.size)}if(x)return this.resize(e,t,i,r,s,o,a);t=Qs(t,C,w);for(let k=0,E=t;k<h.length;k++){const L=h[k],M=Qs(f[k]+E,L.minimumSize,L.maximumSize),D=M-f[k];E-=D,L.size=M}for(let k=0,E=t;k<g.length;k++){const L=g[k],M=Qs(p[k]-E,L.minimumSize,L.maximumSize),D=M-p[k];E+=D,L.size=M}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const r=Zs(this.viewItems.length-1,-1),s=r.filter(a=>this.viewItems[a].priority===1),o=r.filter(a=>this.viewItems[a].priority===2);for(const a of o)xR(r,a);for(const a of s)zx(r,a);typeof e=="number"&&zx(r,e);for(let a=0;i!==0&&a<r.length;a++){const l=this.viewItems[r[a]],c=Qs(l.size+i,l.minimumSize,l.maximumSize),u=c-l.size;i-=u,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),r=[...this.viewItems].reverse();e=!1;const s=r.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=r.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],u=this.viewItems[l];a+=u.size;const d=!(t[l]&&o[l+1]),h=!(i[l]&&s[l+1]);if(d&&h){const f=Zs(l,-1),g=Zs(l+1,this.viewItems.length),p=this.findFirstSnapIndex(f),v=this.findFirstSnapIndex(g),b=typeof p=="number"&&!this.viewItems[p].visible,_=typeof v=="number"&&!this.viewItems[v].visible;b&&s[l]&&(a>0||this.startSnappingEnabled)?c.state=1:_&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else d&&!h?c.state=1:!d&&h?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=e===void 0?i.size:Math.min(e,i.size),t=t===void 0?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)==null||e.disposable.dispose(),zr(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}const BT=class BT{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=BT.TemplateId,this.renderedTemplates=new Set;const r=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const o=r.get(s.templateId);if(!o)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=ct(e,xt(".monaco-table-tr")),i=[],r=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=ct(t,xt(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,i.push(l),r.push(a.renderTemplate(l))}const s={container:e,cellContainers:i,cellTemplateData:r};return this.renderedTemplates.add(s),s}renderElement(e,t,i,r){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,i.cellTemplateData[s],r)}}disposeElement(e,t,i,r){for(let s=0;s<this.columns.length;s++){const o=this.renderers[s];if(o.disposeElement){const l=this.columns[s].project(e);o.disposeElement(l,t,i.cellTemplateData[s],r)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);pc(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}};BT.TemplateId="row";let NN=BT;function Xit(n){return{getHeight(e){return n.getHeight(e)},getTemplateId(){return NN.TemplateId}}}class Qit extends ke{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??Be.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new ae,this.onDidLayout=this._onDidLayout.event,this.element=xt(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(Lu().setupManagedHover(Wa("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}const HT=class HT{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,r,s,o){this.virtualDelegate=i,this.columns=r,this.domId=`table_id_${++HT.InstanceCount}`,this.disposables=new dt,this.cachedWidth=0,this.cachedHeight=0,this.domNode=ct(t,xt(`.monaco-table.${this.domId}`));const a=r.map((u,d)=>this.disposables.add(new Qit(u,d))),l={size:a.reduce((u,d)=>u+d.column.weight,0),views:a.map(u=>({size:u.column.weight,view:u}))};this.splitview=this.disposables.add(new Zit(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new NN(r,s,u=>this.splitview.getViewSize(u));this.list=this.disposables.add(new Nc(e,this.domNode,Xit(i),[c],o)),Be.any(...a.map(u=>u.onDidLayout))(([u,d])=>c.layoutColumn(u,d),null,this.disposables),this.splitview.onDidSashReset(u=>{const d=r.reduce((f,g)=>f+g.weight,0),h=r[u].weight/d*this.cachedWidth;this.splitview.resizeView(u,h)},null,this.disposables),this.styleElement=Fa(this.domNode),this.style(det)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};HT.InstanceCount=0;let U6=HT;var Uo;(function(n){n[n.Expanded=0]="Expanded",n[n.Collapsed=1]="Collapsed",n[n.PreserveOrExpanded=2]="PreserveOrExpanded",n[n.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(Uo||(Uo={}));var Xg;(function(n){n[n.Unknown=0]="Unknown",n[n.Twistie=1]="Twistie",n[n.Element=2]="Element",n[n.Filter=3]="Filter"})(Xg||(Xg={}));class Zo extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class VV{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function zV(n){return typeof n=="object"&&"visibility"in n&&"data"in n}function _w(n){switch(n){case!0:return 1;case!1:return 0;default:return n}}function xA(n){return typeof n.collapsible=="boolean"}class Jit{constructor(e,t,i,r={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new cS,this._onDidChangeCollapseState=new ae,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new ae,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new ae,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new hS(ude),this.collapseByDefault=typeof r.collapseByDefault>"u"?!1:r.collapseByDefault,this.allowNonCollapsibleParents=r.allowNonCollapsibleParents??!1,this.filter=r.filter,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=Sn.empty(),r={}){if(e.length===0)throw new Zo(this.user,"Invalid tree location");r.diffIdentityProvider?this.spliceSmart(r.diffIdentityProvider,e,t,i,r):this.spliceSimple(e,t,i,r)}spliceSmart(e,t,i,r=Sn.empty(),s,o=s.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,i,r,s);const l=[...r],c=t[t.length-1],u=new ld({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+i)].map(p=>e.getId(p.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,i,l,s);const d=t.slice(0,-1),h=(p,v,b)=>{if(o>0)for(let _=0;_<b;_++)p--,v--,this.spliceSmart(e,[...d,p,0],Number.MAX_SAFE_INTEGER,l[v].children,s,o-1)};let f=Math.min(a.children.length,c+i),g=l.length;for(const p of u.changes.sort((v,b)=>b.originalStart-v.originalStart))h(f,g,f-(p.originalStart+p.originalLength)),f=p.originalStart,g=p.modifiedStart-c,this.spliceSimple([...d,f],p.originalLength,Sn.slice(l,g,g+p.modifiedLength),s);h(f,g,f)}spliceSimple(e,t,i=Sn.empty(),{onDidCreateNode:r,onDidDeleteNode:s,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:u}=this.getParentNodeWithListIndex(e),d=[],h=Sn.map(i,w=>this.createTreeNode(w,a,a.visible?1:0,c,d,r)),f=e[e.length-1];let g=0;for(let w=f;w>=0&&w<a.children.length;w--){const x=a.children[w];if(x.visible){g=x.visibleChildIndex;break}}const p=[];let v=0,b=0;for(const w of h)p.push(w),b+=w.renderNodeCount,w.visible&&(w.visibleChildIndex=g+v++);const _=bG(a.children,f,t,p);o?a.lastDiffIds?bG(a.lastDiffIds,f,t,p.map(w=>o.getId(w.element).toString())):a.lastDiffIds=a.children.map(w=>o.getId(w.element).toString()):a.lastDiffIds=void 0;let y=0;for(const w of _)w.visible&&y++;if(y!==0)for(let w=f+p.length;w<a.children.length;w++){const x=a.children[w];x.visible&&(x.visibleChildIndex-=y)}if(a.visibleChildrenCount+=v-y,c&&u){const w=_.reduce((x,k)=>x+(k.visible?k.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,b-w),this.list.splice(l,w,d)}if(_.length>0&&s){const w=x=>{s(x),x.children.forEach(w)};_.forEach(w)}this._onDidSplice.fire({insertedNodes:p,deletedNodes:_});let C=a;for(;C;){if(C.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}C=C.parent}}rerender(e){if(e.length===0)throw new Zo(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:r}=this.getTreeNodeWithListIndex(e);t.visible&&r&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:r}=this.getTreeNodeWithListIndex(e);return i&&r?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const r={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const r=this.getTreeNode(e);typeof t>"u"&&(t=!r.collapsed);const s={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:i,listIndex:r,revealed:s}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(i,r,s,t);if(i!==this.root&&this.autoExpandSingleChildren&&o&&!xA(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,i,r){const s=this._setNodeCollapseState(e,r,!1);if(!i||!e.visible||!s)return s;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),s}_setNodeCollapseState(e,t,i){let r;if(e===this.root?r=!1:(xA(t)?(r=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(r=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):r=!1,r&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!xA(t)&&t.recursive)for(const s of e.children)r=this._setNodeCollapseState(s,t,!0)||r;return r}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,r,s,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,r&&s.push(a);const c=e.children||Sn.empty(),u=r&&l!==0&&!a.collapsed;let d=0,h=1;for(const f of c){const g=this.createTreeNode(f,a,l,u,s,o);a.children.push(g),h+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=d++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=d,a.visible=l===2?d>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=h):(a.renderNodeCount=0,r&&s.pop()),o==null||o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,r=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;r&&i.push(e)}const o=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,s,i,r&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=i.length-o):(e.renderNodeCount=0,r&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):zV(i)?(e.filterData=i.data,_w(i.visibility)):(e.filterData=void 0,_w(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...r]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(r,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...r]=e;if(i<0||i>t.children.length)throw new Zo(this.user,"Invalid tree location");return this.getTreeNode(r,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:r,visible:s}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Zo(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:i,revealed:r,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,r=!0,s=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Zo(this.user,"Invalid tree location");for(let l=0;l<o;l++)i+=t.children[l].renderNodeCount;return r=r&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:r,visible:s}:this.getParentNodeWithListIndex(a,t.children[o],i+1,r,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:Qze(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class ert extends kS{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function kA(n){return n instanceof kS?new ert(n):n}class trt{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=ke.None,this.disposables=new dt}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,r;(r=(i=this.dnd).onDragStart)==null||r.call(i,kA(e),t)}onDragOver(e,t,i,r,s,o=!0){const a=this.dnd.onDragOver(kA(e),t&&t.element,i,r,s),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=G5(()=>{const f=this.modelProvider(),g=f.getNodeLocation(t);f.isCollapsed(g)&&f.setCollapsed(g,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!o){const f=typeof a=="boolean"?a:a.accept,g=typeof a=="boolean"?void 0:a.effect;return{accept:f,effect:g,feedback:[i]}}return a}if(a.bubble===1){const f=this.modelProvider(),g=f.getNodeLocation(t),p=f.getParentNodeLocation(g),v=f.getNode(p),b=p&&f.getListIndex(p);return this.onDragOver(e,v,b,r,s,!1)}const c=this.modelProvider(),u=c.getNodeLocation(t),d=c.getListIndex(u),h=c.getListRenderCount(u);return{...a,feedback:Zs(d,d+h)}}drop(e,t,i,r,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(kA(e),t&&t.element,i,r,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function nrt(n,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new trt(n,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const i=n(),r=i.getNodeLocation(t),s=i.getParentNodeLocation(r);return i.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class WV{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,r;(r=(i=this.delegate).setDynamicHeight)==null||r.call(i,e.element,t)}}var $1;(function(n){n.None="none",n.OnHover="onHover",n.Always="always"})($1||($1={}));class irt{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new dt,this.onDidChange=Be.forEach(e,i=>this._elements=i,this.disposables)}dispose(){this.disposables.dispose()}}const QC=class QC{constructor(e,t,i,r,s,o={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=r,this.renderedIndentGuides=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=QC.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=ke.None,this.disposables=new dt,this.templateId=e.templateId,this.updateOptions(o),Be.map(i,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)==null||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=Qs(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[i,r]of this.renderedNodes)this.renderTreeElement(i,r)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==$1.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[i,r]of this.renderedNodes)this._renderIndentGuides(i,r);if(this.indentGuidesDisposable.dispose(),t){const i=new dt;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=ct(e,xt(".monaco-tl-row")),i=ct(t,xt(".monaco-tl-indent")),r=ct(t,xt(".monaco-tl-twistie")),s=ct(t,xt(".monaco-tl-contents")),o=this.renderer.renderTemplate(s);return{container:e,indent:i,twistie:r,indentGuidesDisposable:ke.None,templateData:o}}renderElement(e,t,i,r){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,r)}disposeElement(e,t,i,r){var s,o;i.indentGuidesDisposable.dispose(),(o=(s=this.renderer).disposeElement)==null||o.call(s,e,t,i.templateData,r),typeof r=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=QC.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=`${i+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...vn.asClassNameArray(rt.treeItemExpanded));let r=!1;this.renderer.renderTwistie&&(r=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(r||t.twistie.classList.add(...vn.asClassNameArray(rt.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(pc(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new dt,r=this.modelProvider();for(;;){const s=r.getNodeLocation(e),o=r.getParentNodeLocation(s);if(!o)break;const a=r.getNode(o),l=xt(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),i.add(Pt(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(r=>{const s=i.getNodeLocation(r);try{const o=i.getParentNodeLocation(s);r.collapsible&&r.children.length>0&&!r.collapsed?t.add(r):o&&t.add(i.getNode(o))}catch{}}),this.activeIndentNodes.forEach(r=>{t.has(r)||this.renderedIndentGuides.forEach(r,s=>s.classList.remove("active"))}),t.forEach(r=>{this.activeIndentNodes.has(r)||this.renderedIndentGuides.forEach(r,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),zr(this.disposables)}};QC.DefaultIndent=8;let j6=QC;class rrt{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new dt,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const o=this._filter.filter(e,t);if(typeof o=="boolean"?i=o?1:0:zV(o)?i=_w(o.visibility):i=o,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:O0.Default,visibility:i};const r=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(r)?r:[r];for(const o of s){const a=o&&o.toString();if(typeof a>"u")return{data:O0.Default,visibility:i};let l;if(this.tree.findMatchType===rm.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let u=this._lowercasePattern.length;u>0;u--)l.push(c+u-1)}}else l=lfe(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,s.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this.tree.findMode===bd.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:O0.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){zr(this.disposables)}}var bd;(function(n){n[n.Highlight=0]="Highlight",n[n.Filter=1]="Filter"})(bd||(bd={}));var rm;(function(n){n[n.Fuzzy=0]="Fuzzy",n[n.Contiguous=1]="Contiguous"})(rm||(rm={}));class srt{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,r,s,o={}){this.tree=e,this.view=i,this.filter=r,this.contextViewProvider=s,this.options=o,this._pattern="",this.width=0,this._onDidChangeMode=new ae,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new ae,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new ae,this._onDidChangeOpenState=new ae,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new dt,this.disposables=new dt,this._mode=e.options.defaultFindMode??bd.Highlight,this._matchType=e.options.defaultFindMatchType??rm.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var t,i,r;const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(uw(S("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?(t=this.widget)==null||t.showMessage({type:2,content:S("not found","No elements found.")}):(i=this.widget)==null||i.showMessage({type:2})):((r=this.widget)==null||r.clearMessage(),this.pattern&&uw(S("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!O0.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)==null||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function ort(n,e){return n.position===e.position&&Cge(n,e)}function Cge(n,e){return n.node.element===e.node.element&&n.startIndex===e.startIndex&&n.height===e.height&&n.endIndex===e.endIndex}class art{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return rr(this.stickyNodes,e.stickyNodes,ort)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!rr(this.stickyNodes,e.stickyNodes,Cge)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class lrt{constrainStickyScrollNodes(e,t,i){for(let r=0;r<e.length;r++){const s=e[r];if(s.position+s.height>i||r>=t)return e.slice(0,r)}return e}}class ZX extends ke{constructor(e,t,i,r,s,o={}){super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=s,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(o);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=o.stickyScrollDelegate??new lrt,this._widget=this._register(new crt(i.getScrollableElement(),i,e,r,s,o.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,r=0,s=this.getNextStickyNode(i,void 0,r);for(;s&&(t.push(s),r+=s.height,!(t.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(s),!i)));)s=this.getNextStickyNode(i,s.node,r);const o=this.constrainStickyNodes(t);return o.length?new art(o):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const r=this.getAncestorUnderPrevious(e,t);if(r&&!(r===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,i))))return this.createStickyScrollNode(r,i)}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),r=this.view.getElementTop(i),s=t;return this.view.scrollTop===r-s}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:r,endIndex:s}=this.getNodeRange(e),o=this.calculateStickyNodePosition(s,t,i);return{node:e,position:o,height:i,startIndex:r,endIndex:s}}getAncestorUnderPrevious(e,t=void 0){let i=e,r=this.getParentNode(i);for(;r;){if(r===t)return i;i=r,r=this.getParentNode(i)}if(t===void 0)return i}calculateStickyNodePosition(e,t,i){let r=this.view.getRelativeTop(e);if(r===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),u=this.view.getRelativeTop(e+1);r=u?u-c/this.view.renderHeight:null}if(r===null)return t;const s=this.view.element(e),o=this.treeDelegate.getHeight(s),l=r*this.view.renderHeight+o;return t+i>l&&t<=l?l-i:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const r=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!r.length)return[];const s=r[r.length-1];if(r.length>this.stickyScrollMaxItemCount||s.position+s.height>t)throw new Error("stickyScrollDelegate violates constraints");return r}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");const r=this.model.getListRenderCount(t),s=i+r-1;return{startIndex:i,endIndex:s}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let r=0;for(let s=0;s<t.length&&s<this.stickyScrollMaxItemCount;s++)r+=this.treeDelegate.getHeight(t[s]);return r}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}class crt{constructor(e,t,i,r,s,o){this.view=t,this.tree=i,this.treeRenderers=r,this.treeDelegate=s,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new dt,this._rootDomNode=xt(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=xt(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new urt(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const r=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${r.position}px`;else{this._previousStateDisposables.clear();const s=Array(e.count);for(let o=e.count-1;o>=0;o--){const a=e.stickyNodes[o],{element:l,disposable:c}=this.createElement(a,o,e.count);s[o]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(s,e),this._previousElements=s}this._previousState=e,this._rootDomNode.style.height=`${r.position+r.height}px`}createElement(e,t,i){const r=e.startIndex,s=document.createElement("div");s.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(s.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(s.style.lineHeight=`${e.height}px`),s.classList.add("monaco-tree-sticky-row"),s.classList.add("monaco-list-row"),s.setAttribute("data-index",`${r}`),s.setAttribute("data-parity",r%2===0?"even":"odd"),s.setAttribute("id",this.view.getElementID(r));const o=this.setAccessibilityAttributes(s,e.node.element,t,i),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(h=>h.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const u=l.renderTemplate(s);l.renderElement(c,e.startIndex,u,e.height);const d=Pt(()=>{o.dispose(),l.disposeElement(c,e.startIndex,u,e.height),l.disposeTemplate(u),s.remove()});return{element:s,disposable:d}}setAccessibilityAttributes(e,t,i,r){if(!this.accessibilityProvider)return ke.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,r))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const s=this.accessibilityProvider.getAriaLabel(t),o=s&&typeof s!="string"?s:gN(s),a=xn(c=>{const u=c.readObservable(o);u?e.setAttribute("aria-label",u):e.removeAttribute("aria-label")});typeof s=="string"||s&&e.setAttribute("aria-label",s.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class urt extends ke{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new ae,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new ae,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(_e(this.container,"focus",()=>this.onFocus())),this._register(_e(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}handleContextMenu(e){const t=e.browserEvent.target;if(!hw(t)&&!xC(t)){this.focusedLast()&&this.view.domFocus();return}if(!td(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const o=this.state.stickyNodes.findIndex(a=>{var l;return a.node.element===((l=e.element)==null?void 0:l.element)});if(o===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(o);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const r=this.state.stickyNodes[this.focusedIndex].node.element,s=this.elements[this.focusedIndex];this._onContextMenu.fire({element:r,anchor:s,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!hw(t)&&!xC(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const r=Qs(i,0,t.count-1);this.setFocus(r)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],r=t.count>1?t.stickyNodes[t.count-2]:void 0,s=this.view.getElementTop(e),o=r?r.position+r.height+i.height:i.height;this.view.scrollTop=s-o}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function Ck(n){let e=Xg.Unknown;return BR(n.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Xg.Twistie:BR(n.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=Xg.Element:BR(n.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=Xg.Filter),{browserEvent:n.browserEvent,element:n.element?n.element.element:null,target:e}}function drt(n){const e=hw(n.browserEvent.target);return{element:n.element?n.element.element:null,browserEvent:n.browserEvent,anchor:n.anchor,isStickyScroll:e}}function DE(n,e){e(n),n.children.forEach(t=>DE(t,e))}class EA{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new ae,this.onDidChange=this._onDidChange.event}set(e,t){!(t!=null&&t.__forceEvent)&&rr(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const r=this;this._onDidChange.fire({get elements(){return r.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=u=>l.delete(u);t.forEach(u=>DE(u,c)),this.set([...l.values()]);return}const i=new Set,r=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>DE(l,r));const s=new Map,o=l=>s.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>DE(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const d=s.get(c);d&&d.visible&&a.push(d)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class hrt extends Dfe{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(Lfe(e.browserEvent.target)||mf(e.browserEvent.target)||R_(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,r=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,s=xC(e.browserEvent.target);let o=!1;if(s?o=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,s)this.handleStickyScrollMouseEvent(e,t);else{if(o&&!r&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!s||r)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),r){e.browserEvent.isHandledByList=!0;return}}s||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(ret(e.browserEvent.target)||set(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const r=this.list.indexOf(t),s=this.list.getElementTop(r),o=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=s-o,this.list.domFocus(),this.list.setFocus([r]),this.list.setSelection([r])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!hw(t)&&!xC(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!hw(t)&&!xC(t)){super.onContextMenu(e);return}}}class frt extends Nc{constructor(e,t,i,r,s,o,a,l){super(e,t,i,r,l),this.focusTrait=s,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new hrt(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const r=[],s=[];let o;i.forEach((a,l)=>{this.focusTrait.has(a)&&r.push(e+l),this.selectionTrait.has(a)&&s.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),r.length>0&&super.setFocus(Gp([...super.getFocus(),...r])),s.length>0&&super.setSelection(Gp([...super.getSelection(),...s])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(r=>this.element(r)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(r=>this.element(r)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class yge{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Be.filter(Be.map(this.view.onMouseDblClick,Ck),e=>e.target!==Xg.Filter)}get onMouseOver(){return Be.map(this.view.onMouseOver,Ck)}get onMouseOut(){return Be.map(this.view.onMouseOut,Ck)}get onContextMenu(){var e;return Be.any(Be.filter(Be.map(this.view.onContextMenu,drt),t=>!t.isStickyScroll),((e=this.stickyScrollController)==null?void 0:e.onContextMenu)??Be.None)}get onPointer(){return Be.map(this.view.onPointer,Ck)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Be.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e;return((e=this.findController)==null?void 0:e.mode)??bd.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e;return((e=this.findController)==null?void 0:e.matchType)??rm.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,r,s={}){this._user=e,this._options=s,this.eventBufferer=new cS,this.onDidChangeFindOpenState=Be.None,this.onDidChangeStickyScrollFocused=Be.None,this.disposables=new dt,this._onWillRefilter=new ae,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new ae,this.treeDelegate=new WV(i);const o=new EG,a=new EG,l=this.disposables.add(new irt(a.event)),c=new nhe;this.renderers=r.map(g=>new j6(g,()=>this.model,o.event,l,c,s));for(const g of this.renderers)this.disposables.add(g);let u;s.keyboardNavigationLabelProvider&&(u=new rrt(this,s.keyboardNavigationLabelProvider,s.filter),s={...s,filter:u},this.disposables.add(u)),this.focus=new EA(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new EA(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new EA(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new frt(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...nrt(()=>this.model,s),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,s),o.input=this.model.onDidChangeCollapseState;const d=Be.forEach(this.model.onDidSplice,g=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(g),this.selection.onDidModelSplice(g)})},this.disposables);d(()=>null,null,this.disposables);const h=this.disposables.add(new ae),f=this.disposables.add(new hS(0));if(this.disposables.add(Be.any(d,this.focus.onDidChange,this.selection.onDidChange)(()=>{f.trigger(()=>{const g=new Set;for(const p of this.focus.getNodes())g.add(p);for(const p of this.selection.getNodes())g.add(p);h.fire([...g.values()])})})),a.input=h.event,s.keyboardSupport!==!1){const g=Be.chain(this.view.onKeyDown,p=>p.filter(v=>!mf(v.target)).map(v=>new ii(v)));Be.chain(g,p=>p.filter(v=>v.keyCode===15))(this.onLeftArrow,this,this.disposables),Be.chain(g,p=>p.filter(v=>v.keyCode===17))(this.onRightArrow,this,this.disposables),Be.chain(g,p=>p.filter(v=>v.keyCode===10))(this.onSpace,this,this.disposables)}if((s.findWidgetEnabled??!0)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider){const g=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new srt(this,this.model,this.view,u,s.contextViewProvider,g),this.focusNavigationFilter=p=>this.findController.shouldAllowFocus(p),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Be.None,this.onDidChangeFindMatchType=Be.None;s.enableStickyScroll&&(this.stickyScrollController=new ZX(this,this.model,this.view,this.renderers,this.treeDelegate,s),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=Fa(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===$1.Always)}updateOptions(e={}){var t;this._options={...this._options,...e};for(const i of this.renderers)i.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)==null||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===$1.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new ZX(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=Be.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(t=this.stickyScrollController)==null||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){var e;(e=this.stickyScrollController)!=null&&e.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),hb(t)&&((i=this.findController)==null||i.layout(t))}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const r=e.treeStickyScrollBackground??e.listBackground;r&&(i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${r}; }`),i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${r}; }`)),e.treeStickyScrollBorder&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const s=kd(e.listFocusAndSelectionOutline,kd(e.listSelectionOutline,e.listFocusOutline??""));s&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=i.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(s=>this.model.getNode(s));this.selection.set(i,t);const r=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(r,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(s=>this.model.getNode(s));this.focus.set(i,t);const r=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(r,t,!0)})}focusNext(e=1,t=!1,i,r=td(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,i,r)}focusPrevious(e=1,t=!1,i,r=td(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,i,r)}focusNextPage(e,t=td(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=td(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>{var i;return((i=this.stickyScrollController)==null?void 0:i.height)??0})}focusLast(e,t=td(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=td(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(i!==-1)if(!this.stickyScrollController)this.view.reveal(i,t);else{const r=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,r)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],r=this.model.getNodeLocation(i);if(!this.model.setCollapsed(r,!0)){const o=this.model.getParentNodeLocation(r);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],r=this.model.getNodeLocation(i);if(!this.model.setCollapsed(r,!1)){if(!i.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],r=this.model.getNodeLocation(i),s=e.browserEvent.altKey;this.model.setCollapsed(r,void 0,s)}dispose(){var e;zr(this.disposables),(e=this.stickyScrollController)==null||e.dispose(),this.view.dispose()}}class $V{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new Jit(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(r,s){return i.sorter.compare(r.element,s.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=Sn.empty(),i={}){const r=this.getElementLocation(e);this._setChildren(r,this.preserveCollapseState(t),i)}_setChildren(e,t=Sn.empty(),i){const r=new Set,s=new Set,o=l=>{var u;if(l.element===null)return;const c=l;if(r.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const d=this.identityProvider.getId(c.element).toString();s.add(d),this.nodesByIdentity.set(d,c)}(u=i.onDidCreateNode)==null||u.call(i,c)},a=l=>{var u;if(l.element===null)return;const c=l;if(r.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const d=this.identityProvider.getId(c.element).toString();s.has(d)||this.nodesByIdentity.delete(d)}(u=i.onDidDeleteNode)==null||u.call(i,c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:o,onDidDeleteNode:a})}preserveCollapseState(e=Sn.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Sn.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(o)}if(!i){let o;return typeof t.collapsed>"u"?o=void 0:t.collapsed===Uo.Collapsed||t.collapsed===Uo.PreserveOrCollapsed?o=!0:t.collapsed===Uo.Expanded||t.collapsed===Uo.PreserveOrExpanded?o=!1:o=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:o}}const r=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let s;return typeof t.collapsed>"u"||t.collapsed===Uo.PreserveOrCollapsed||t.collapsed===Uo.PreserveOrExpanded?s=i.collapsed:t.collapsed===Uo.Collapsed?s=!0:t.collapsed===Uo.Expanded?s=!1:s=!!t.collapsed,{...t,collapsible:r,collapsed:s,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const r=this.getElementLocation(e);return this.model.setCollapsed(r,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Zo(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Zo(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Zo(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),r=this.model.getParentNodeLocation(i);return this.model.getNode(r).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Zo(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function ME(n){const e=[n.element],t=n.incompressible||!1;return{element:{elements:e,incompressible:t},children:Sn.map(Sn.from(n.children),ME),collapsible:n.collapsible,collapsed:n.collapsed}}function RE(n){const e=[n.element],t=n.incompressible||!1;let i,r;for(;[r,i]=Sn.consume(Sn.from(n.children),2),!(r.length!==1||r[0].incompressible);)n=r[0],e.push(n.element);return{element:{elements:e,incompressible:t},children:Sn.map(Sn.concat(r,i),RE),collapsible:n.collapsible,collapsed:n.collapsed}}function K6(n,e=0){let t;return e<n.element.elements.length-1?t=[K6(n,e+1)]:t=Sn.map(Sn.from(n.children),i=>K6(i,0)),e===0&&n.element.incompressible?{element:n.element.elements[e],children:t,incompressible:!0,collapsible:n.collapsible,collapsed:n.collapsed}:{element:n.element.elements[e],children:t,collapsible:n.collapsible,collapsed:n.collapsed}}function XX(n){return K6(n,0)}function wge(n,e,t){return n.element===e?{...n,children:t}:{...n,children:Sn.map(Sn.from(n.children),i=>wge(i,e,t))}}const grt=n=>({getId(e){return e.elements.map(t=>n.getId(t).toString()).join("\0")}});class prt{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new $V(e,t,i),this.enabled=typeof i.compressionEnabled>"u"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=Sn.empty(),i){const r=i.diffIdentityProvider&&grt(i.diffIdentityProvider);if(e===null){const g=Sn.map(t,this.enabled?RE:ME);this._setChildren(null,g,{diffIdentityProvider:r,diffDepth:1/0});return}const s=this.nodes.get(e);if(!s)throw new Zo(this.user,"Unknown compressed tree node");const o=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),c=XX(o),u=wge(c,e,t),d=(this.enabled?RE:ME)(u),h=i.diffIdentityProvider?(g,p)=>i.diffIdentityProvider.getId(g)===i.diffIdentityProvider.getId(p):void 0;if(rr(d.element.elements,o.element.elements,h)){this._setChildren(s,d.children||Sn.empty(),{diffIdentityProvider:r,diffDepth:1});return}const f=l.children.map(g=>g===o?d:g);this._setChildren(l.element,f,{diffIdentityProvider:r,diffDepth:o.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,r=Sn.map(i,XX),s=Sn.map(r,e?RE:ME);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const r=new Set,s=a=>{for(const l of a.element.elements)r.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)r.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...i,onDidCreateNode:s,onDidDeleteNode:o})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const r=this.getCompressedNode(e);return this.model.setCollapsed(r,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Zo(this.user,`Tree element not found: ${e}`);return t}}const mrt=n=>n[n.length-1];class UV{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new UV(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function vrt(n,e){return{splice(t,i,r){e.splice(t,i,r.map(s=>n.map(s)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function brt(n,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(n(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(n(t),i)}}}}class _rt{get onDidSplice(){return Be.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return Be.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Be.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||mrt;const r=s=>this.elementMapper(s.elements);this.nodeMapper=new VV(s=>new UV(r,s)),this.model=new prt(e,vrt(this.nodeMapper,t),brt(r,i))}setChildren(e,t=Sn.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var Crt=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s};class jV extends yge{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,r,s={}){super(e,t,i,r,s),this.user=e}setChildren(e,t=Sn.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new $V(e,t,i)}}class Sge{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,r){let s=this.stickyScrollDelegate.getCompressedNode(e);s||(s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),s.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,r)):(i.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,i.data,r))}disposeElement(e,t,i,r){var s,o,a,l;i.compressedTreeNode?(o=(s=this.renderer).disposeCompressedElements)==null||o.call(s,i.compressedTreeNode,t,i.data,r):(l=(a=this.renderer).disposeElement)==null||l.call(a,e,t,i.data,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}Crt([Ii],Sge.prototype,"compressedTreeNodeProvider",null);class yrt{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let r=0;r<e.length;r++){const s=e[r],o=s.position+s.height;if(r+1<e.length&&o+e[r+1].height>i||r>=t-1&&t<e.length){const l=e.slice(0,r),c=e.slice(r),u=this.compressStickyNodes(c);return[...l,u]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const i=[];for(let c=0;c<e.length;c++){const u=e[c],d=t.getCompressedTreeNode(u.node.element);if(d.element){if(c!==0&&d.element.incompressible)break;i.push(...d.element.elements)}}if(i.length<2)return e[0];const r=e[e.length-1],s={elements:i,incompressible:!1},o={...r.node,children:[],element:s},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:r.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,o),l}}function wrt(n,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=n().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}}}class xge extends jV{constructor(e,t,i,r,s={}){const o=()=>this,a=new yrt(()=>this.model),l=r.map(c=>new Sge(o,a,c));super(e,t,i,l,{...wrt(o,s),stickyScrollDelegate:a})}setChildren(e,t=Sn.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new _rt(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function LA(n){return{...n,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function q6(n,e){return e.parent?e.parent===n?!0:q6(n,e.parent):!1}function Srt(n,e){return n===e||q6(n,e)||q6(e,n)}class KV{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new KV(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class xrt{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,r){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(...vn.asClassNameArray(rt.treeItemLoading)),!0):(t.classList.remove(...vn.asClassNameArray(rt.treeItemLoading)),!1)}disposeElement(e,t,i,r){var s,o;(o=(s=this.renderer).disposeElement)==null||o.call(s,this.nodeMapper.map(e),t,i.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function QX(n){return{browserEvent:n.browserEvent,elements:n.elements.map(e=>e.element)}}function JX(n){return{browserEvent:n.browserEvent,element:n.element&&n.element.element,target:n.target}}class krt extends kS{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function NA(n){return n instanceof kS?new krt(n):n}class Ert{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,r;(r=(i=this.dnd).onDragStart)==null||r.call(i,NA(e),t)}onDragOver(e,t,i,r,s,o=!0){return this.dnd.onDragOver(NA(e),t&&t.element,i,r,s)}drop(e,t,i,r,s){this.dnd.drop(NA(e),t&&t.element,i,r,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}dispose(){this.dnd.dispose()}}function kge(n){return n&&{...n,collapseByDefault:!0,identityProvider:n.identityProvider&&{getId(e){return n.identityProvider.getId(e.element)}},dnd:n.dnd&&new Ert(n.dnd),multipleSelectionController:n.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return n.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return n.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:n.accessibilityProvider&&{...n.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:n.accessibilityProvider.getRole?e=>n.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:n.accessibilityProvider.isChecked?e=>{var t;return!!((t=n.accessibilityProvider)!=null&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return n.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return n.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:n.accessibilityProvider.getWidgetRole?()=>n.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:n.accessibilityProvider.getAriaLevel&&(e=>n.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:n.accessibilityProvider.getActiveDescendantId&&(e=>n.accessibilityProvider.getActiveDescendantId(e.element))},filter:n.filter&&{filter(e,t){return n.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&{...n.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof n.expandOnlyOnTwistieClick>"u"?void 0:typeof n.expandOnlyOnTwistieClick!="function"?n.expandOnlyOnTwistieClick:e=>n.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof n.defaultFindVisibility=="number"?n.defaultFindVisibility:typeof n.defaultFindVisibility>"u"?2:n.defaultFindVisibility(e.element)}}function G6(n,e){e(n),n.children.forEach(t=>G6(t,e))}class Ege{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Be.map(this.tree.onDidChangeFocus,QX)}get onDidChangeSelection(){return Be.map(this.tree.onDidChangeSelection,QX)}get onMouseDblClick(){return Be.map(this.tree.onMouseDblClick,JX)}get onPointer(){return Be.map(this.tree.onPointer,JX)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,r,s,o={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new ae,this._onDidChangeNodeSlowState=new ae,this.nodeMapper=new VV(a=>new KV(a)),this.disposables=new dt,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=a=>o.collapseByDefault?o.collapseByDefault(a)?Uo.PreserveOrCollapsed:Uo.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,r,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=LA({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,r,s){const o=new WV(i),a=r.map(c=>new xrt(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=kge(s)||{};return new jV(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(r=>r.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,i=!1,r,s){if(typeof this.root.element>"u")throw new Zo(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Be.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(await this.refreshAndRenderNode(o,t,r,s),i)try{this.tree.rerender(o)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new Zo(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Be.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await this.root.refreshPromise,await Be.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const r=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await Be.toPromise(this._onDidRender.event)),r}setSelection(e,t){const i=e.map(r=>this.getDataNode(r));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(r=>this.getDataNode(r));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Zo(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,r){await this.refreshNode(e,t,i),!this.disposables.isDisposed&&this.render(e,i,r)}async refreshNode(e,t,i){let r;if(this.subTreeRefreshPromises.forEach((s,o)=>{!r&&Srt(o,e)&&(r=s.then(()=>this.refreshNode(e,t,i)))}),r)return r;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,i);return}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let r;e.refreshPromise=new Promise(s=>r=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=await this.doRefreshNode(e,t,i);e.stale=!1,await Y5.settled(s.map(o=>this.doRefreshSubTree(o,t,i)))}finally{r()}}async doRefreshNode(e,t,i){e.hasChildren=!!this.dataSource.hasChildren(e.element);let r;if(!e.hasChildren)r=Promise.resolve(Sn.empty());else{const s=this.doGetChildren(e);if(_G(s))r=Promise.resolve(s);else{const o=Qy(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),r=s.finally(()=>o.cancel())}}try{const s=await r;return this.setChildren(e,s,t,i)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),aS(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return _G(i)?this.processChildren(i):(t=dde(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch($n))}setChildren(e,t,i,r){const s=[...t];if(e.children.length===0&&s.length===0)return[];const o=new Map,a=new Map;for(const u of e.children)o.set(u.element,u),this.identityProvider&&a.set(u.id,{node:u,collapsed:this.tree.hasElement(u)&&this.tree.isCollapsed(u)});const l=[],c=s.map(u=>{const d=!!this.dataSource.hasChildren(u);if(!this.identityProvider){const p=LA({element:u,parent:e,hasChildren:d,defaultCollapseState:this.getDefaultCollapseState(u)});return d&&p.defaultCollapseState===Uo.PreserveOrExpanded&&l.push(p),p}const h=this.identityProvider.getId(u).toString(),f=a.get(h);if(f){const p=f.node;return o.delete(p.element),this.nodes.delete(p.element),this.nodes.set(u,p),p.element=u,p.hasChildren=d,i?f.collapsed?(p.children.forEach(v=>G6(v,b=>this.nodes.delete(b.element))),p.children.splice(0,p.children.length),p.stale=!0):l.push(p):d&&!f.collapsed&&l.push(p),p}const g=LA({element:u,parent:e,id:h,hasChildren:d,defaultCollapseState:this.getDefaultCollapseState(u)});return r&&r.viewState.focus&&r.viewState.focus.indexOf(h)>-1&&r.focus.push(g),r&&r.viewState.selection&&r.viewState.selection.indexOf(h)>-1&&r.selection.push(g),(r&&r.viewState.expanded&&r.viewState.expanded.indexOf(h)>-1||d&&g.defaultCollapseState===Uo.PreserveOrExpanded)&&l.push(g),g});for(const u of o.values())G6(u,d=>this.nodes.delete(d.element));for(const u of c)this.nodes.set(u.element,u);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,i){const r=e.children.map(o=>this.asTreeElement(o,t)),s=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId(o){return i.diffIdentityProvider.getId(o.element)}}};this.tree.setChildren(e===this.root?null:e,r,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?Sn.map(e.children,r=>this.asTreeElement(r,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class qV{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new qV(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class Lrt{constructor(e,t,i,r){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=r,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,r){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,r)}renderCompressedElements(e,t,i,r){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(...vn.asClassNameArray(rt.treeItemLoading)),!0):(t.classList.remove(...vn.asClassNameArray(rt.treeItemLoading)),!1)}disposeElement(e,t,i,r){var s,o;(o=(s=this.renderer).disposeElement)==null||o.call(s,this.nodeMapper.map(e),t,i.templateData,r)}disposeCompressedElements(e,t,i,r){var s,o;(o=(s=this.renderer).disposeCompressedElements)==null||o.call(s,this.compressibleNodeMapperProvider().map(e),t,i.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=zr(this.disposables)}}function Nrt(n){const e=n&&kge(n);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return n.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}}}}class Trt extends Ege{constructor(e,t,i,r,s,o,a={}){super(e,t,i,s,o,a),this.compressionDelegate=r,this.compressibleNodeMapper=new VV(l=>new qV(l)),this.filter=a.filter}createTree(e,t,i,r,s){const o=new WV(i),a=r.map(c=>new Lrt(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=Nrt(s)||{};return new xge(e,t,o,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const r=f=>this.identityProvider.getId(f).toString(),s=f=>{const g=new Set;for(const p of f){const v=this.tree.getCompressedTreeNode(p===this.root?null:p);if(v.element)for(const b of v.element.elements)g.add(r(b.element))}return g},o=s(this.tree.getSelection()),a=s(this.tree.getFocus());super.render(e,t,i);const l=this.getSelection();let c=!1;const u=this.getFocus();let d=!1;const h=f=>{const g=f.element;if(g)for(let p=0;p<g.elements.length;p++){const v=r(g.elements[p].element),b=g.elements[g.elements.length-1].element;o.has(v)&&l.indexOf(b)===-1&&(l.push(b),c=!0),a.has(v)&&u.indexOf(b)===-1&&(u.push(b),d=!0)}f.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),d&&this.setFocus(u)}processChildren(e){return this.filter&&(e=Sn.filter(e,t=>{const i=this.filter.filter(t,1),r=Irt(i);if(r===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return r===1})),super.processChildren(e)}}function Irt(n){return typeof n=="boolean"?n?1:0:zV(n)?_w(n.visibility):_w(n)}class Drt extends yge{constructor(e,t,i,r,s,o={}){super(e,t,i,r,o),this.user=e,this.dataSource=s,this.identityProvider=o.identityProvider}createModel(e,t,i){return new $V(e,t,i)}}new ht("isMac",hn,S("isMac","Whether the operating system is macOS"));new ht("isLinux",co,S("isLinux","Whether the operating system is Linux"));new ht("isWindows",Ao,S("isWindows","Whether the operating system is Windows"));new ht("isWeb",fb,S("isWeb","Whether the platform is a web browser"));new ht("isMacNative",hn&&!fb,S("isMacNative","Whether the operating system is macOS on a non-browser platform"));new ht("isIOS",Yp,S("isIOS","Whether the operating system is iOS"));new ht("isMobile",Mue,S("isMobile","Whether the platform is a mobile web browser"));new ht("isDevelopment",!1,!0);new ht("productQualityType","",S("productQualityType","Quality type of VS Code"));const Lge="inputFocus",Mrt=new ht(Lge,!1,S("inputFocus","Whether keyboard focus is inside an input box"));var Jd=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ei=function(n,e){return function(t,i){e(t,i,n)}};const Nu=cn("listService");class Rrt{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new dt,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,i;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)==null||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(i=this._lastFocusedWidget)==null||i.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new Mfe(Fa(),"").style(yb)),this.lists.some(r=>r.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),MH(e.getHTMLElement())&&this.setLastFocusedList(e),du(e.onDidFocus(()=>this.setLastFocusedList(e)),Pt(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(r=>r!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const Cw=new ht("listScrollAtBoundary","none");Ln.or(Cw.isEqualTo("top"),Cw.isEqualTo("both"));Ln.or(Cw.isEqualTo("bottom"),Cw.isEqualTo("both"));const Nge=new ht("listFocus",!0),Tge=new ht("treestickyScrollFocused",!1),vM=new ht("listSupportsMultiselect",!0);Ln.and(Nge,Ln.not(Lge),Tge.negate());const GV=new ht("listHasSelectionOrFocus",!1),YV=new ht("listDoubleSelection",!1),ZV=new ht("listMultiSelection",!1),bM=new ht("listSelectionNavigation",!1),Art=new ht("listSupportsFind",!0),Ort=new ht("treeElementCanCollapse",!1),Prt=new ht("treeElementHasParent",!1),Frt=new ht("treeElementCanExpand",!1),Brt=new ht("treeElementHasChild",!1),Hrt=new ht("treeFindOpen",!1),Ige="listTypeNavigationMode",Dge="listAutomaticKeyboardNavigation";function _M(n,e){const t=n.createScoped(e.getHTMLElement());return Nge.bindTo(t),t}function CM(n,e){const t=Cw.bindTo(n),i=()=>{const r=e.scrollTop===0,s=e.scrollHeight-e.renderHeight-e.scrollTop<1;r&&s?t.set("both"):r?t.set("top"):s?t.set("bottom"):t.set("none")};return i(),e.onDidScroll(i)}const Lm="workbench.list.multiSelectModifier",AE="workbench.list.openMode",Ra="workbench.list.horizontalScrolling",XV="workbench.list.defaultFindMode",QV="workbench.list.typeNavigationMode",TN="workbench.list.keyboardNavigation",bc="workbench.list.scrollByPage",JV="workbench.list.defaultFindMatchType",yw="workbench.tree.indent",IN="workbench.tree.renderIndentGuides",_c="workbench.list.smoothScrolling",yu="workbench.list.mouseWheelScrollSensitivity",wu="workbench.list.fastScrollSensitivity",DN="workbench.tree.expandMode",MN="workbench.tree.enableStickyScroll",RN="workbench.tree.stickyScrollMaxItemCount";function Su(n){return n.getValue(Lm)==="alt"}class Vrt extends ke{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Su(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Lm)&&(this.useAltAsMultipleSelectionModifier=Su(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:Tfe(e)}isSelectionRangeChangeEvent(e){return Ife(e)}}function yM(n,e){const t=n.get(Ti),i=n.get(Wr),r=new dt;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return i.mightProducePrintableCharacter(o)}},smoothScrolling:!!t.getValue(_c),mouseWheelScrollSensitivity:t.getValue(yu),fastScrollSensitivity:t.getValue(wu),multipleSelectionController:e.multipleSelectionController??r.add(new Vrt(t)),keyboardNavigationEventFilter:$rt(i),scrollByPage:!!t.getValue(bc)},r]}let eQ=class extends Nc{constructor(e,t,i,r,s,o,a,l,c){const u=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(Ra),[d,h]=c.invokeFunction(yM,s);super(e,t,i,r,{keyboardSupport:!1,...d,horizontalScrolling:u}),this.disposables.add(h),this.contextKeyService=_M(o,this),this.disposables.add(CM(this.contextKeyService,this)),this.listSupportsMultiSelect=vM.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),bM.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=GV.bindTo(this.contextKeyService),this.listDoubleSelection=YV.bindTo(this.contextKeyService),this.listMultiSelection=ZV.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Su(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const g=this.getSelection(),p=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(g.length>0||p.length>0),this.listMultiSelection.set(g.length>1),this.listDoubleSelection.set(g.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const g=this.getSelection(),p=this.getFocus();this.listHasSelectionOrFocus.set(g.length>0||p.length>0)})),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(Lm)&&(this._useAltAsMultipleSelectionModifier=Su(l));let p={};if(g.affectsConfiguration(Ra)&&this.horizontalScrolling===void 0){const v=!!l.getValue(Ra);p={...p,horizontalScrolling:v}}if(g.affectsConfiguration(bc)){const v=!!l.getValue(bc);p={...p,scrollByPage:v}}if(g.affectsConfiguration(_c)){const v=!!l.getValue(_c);p={...p,smoothScrolling:v}}if(g.affectsConfiguration(yu)){const v=l.getValue(yu);p={...p,mouseWheelScrollSensitivity:v}}if(g.affectsConfiguration(wu)){const v=l.getValue(wu);p={...p,fastScrollSensitivity:v}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new Mge(this,{configurationService:l,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?LS(e):yb)}};eQ=Jd([ei(5,In),ei(6,Nu),ei(7,Ti),ei(8,Fn)],eQ);let tQ=class extends zit{constructor(e,t,i,r,s,o,a,l,c){const u=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(Ra),[d,h]=c.invokeFunction(yM,s);super(e,t,i,r,{keyboardSupport:!1,...d,horizontalScrolling:u}),this.disposables=new dt,this.disposables.add(h),this.contextKeyService=_M(o,this),this.disposables.add(CM(this.contextKeyService,this.widget)),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=vM.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),bM.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this._useAltAsMultipleSelectionModifier=Su(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(Lm)&&(this._useAltAsMultipleSelectionModifier=Su(l));let p={};if(g.affectsConfiguration(Ra)&&this.horizontalScrolling===void 0){const v=!!l.getValue(Ra);p={...p,horizontalScrolling:v}}if(g.affectsConfiguration(bc)){const v=!!l.getValue(bc);p={...p,scrollByPage:v}}if(g.affectsConfiguration(_c)){const v=!!l.getValue(_c);p={...p,smoothScrolling:v}}if(g.affectsConfiguration(yu)){const v=l.getValue(yu);p={...p,mouseWheelScrollSensitivity:v}}if(g.affectsConfiguration(wu)){const v=l.getValue(wu);p={...p,fastScrollSensitivity:v}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new Mge(this,{configurationService:l,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?LS(e):yb)}dispose(){this.disposables.dispose(),super.dispose()}};tQ=Jd([ei(5,In),ei(6,Nu),ei(7,Ti),ei(8,Fn)],tQ);let nQ=class extends U6{constructor(e,t,i,r,s,o,a,l,c,u){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!c.getValue(Ra),[h,f]=u.invokeFunction(yM,o);super(e,t,i,r,s,{keyboardSupport:!1,...h,horizontalScrolling:d}),this.disposables.add(f),this.contextKeyService=_M(a,this),this.disposables.add(CM(this.contextKeyService,this)),this.listSupportsMultiSelect=vM.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),bM.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=GV.bindTo(this.contextKeyService),this.listDoubleSelection=YV.bindTo(this.contextKeyService),this.listMultiSelection=ZV.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Su(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),v=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||v.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),v=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||v.length>0)})),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(Lm)&&(this._useAltAsMultipleSelectionModifier=Su(c));let v={};if(p.affectsConfiguration(Ra)&&this.horizontalScrolling===void 0){const b=!!c.getValue(Ra);v={...v,horizontalScrolling:b}}if(p.affectsConfiguration(bc)){const b=!!c.getValue(bc);v={...v,scrollByPage:b}}if(p.affectsConfiguration(_c)){const b=!!c.getValue(_c);v={...v,smoothScrolling:b}}if(p.affectsConfiguration(yu)){const b=c.getValue(yu);v={...v,mouseWheelScrollSensitivity:b}}if(p.affectsConfiguration(wu)){const b=c.getValue(wu);v={...v,fastScrollSensitivity:b}}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new zrt(this,{configurationService:c,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?LS(e):yb)}dispose(){this.disposables.dispose(),super.dispose()}};nQ=Jd([ei(6,In),ei(7,Nu),ei(8,Ti),ei(9,Fn)],nQ);class ez extends ke{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new ae),this.onDidOpen=this._onDidOpen.event,this._register(Be.filter(this.widget.onDidChangeSelection,i=>td(i.browserEvent))(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(AE))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(AE)&&(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(AE))!=="doubleClick")}))):this.openOnSingleClick=(t==null?void 0:t.openOnSingleClick)??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,r=typeof t.pinned=="boolean"?t.pinned:!i;this._open(this.getSelectedElement(),i,r,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const r=t.button===1,s=!0,o=r,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,o,a,t)}_open(e,t,i,r,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:r,element:e,browserEvent:s})}}class Mge extends ez{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class zrt extends ez{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class Wrt extends ez{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function $rt(n){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const i=n.softDispatch(t,t.target);return i.kind===1?(e=!0,!1):(e=!1,i.kind===0)}}let Y6=class extends jV{constructor(e,t,i,r,s,o,a,l,c){const{options:u,getTypeNavigationMode:d,disposable:h}=o.invokeFunction(DS,s);super(e,t,i,r,u),this.disposables.add(h),this.internals=new sm(this,s,d,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Y6=Jd([ei(5,Fn),ei(6,In),ei(7,Nu),ei(8,Ti)],Y6);let iQ=class extends xge{constructor(e,t,i,r,s,o,a,l,c){const{options:u,getTypeNavigationMode:d,disposable:h}=o.invokeFunction(DS,s);super(e,t,i,r,u),this.disposables.add(h),this.internals=new sm(this,s,d,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};iQ=Jd([ei(5,Fn),ei(6,In),ei(7,Nu),ei(8,Ti)],iQ);let rQ=class extends Drt{constructor(e,t,i,r,s,o,a,l,c,u){const{options:d,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(DS,o);super(e,t,i,r,s,d),this.disposables.add(f),this.internals=new sm(this,o,h,o.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};rQ=Jd([ei(6,Fn),ei(7,In),ei(8,Nu),ei(9,Ti)],rQ);let sQ=class extends Ege{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,r,s,o,a,l,c,u){const{options:d,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(DS,o);super(e,t,i,r,s,d),this.disposables.add(f),this.internals=new sm(this,o,h,o.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};sQ=Jd([ei(6,Fn),ei(7,In),ei(8,Nu),ei(9,Ti)],sQ);let oQ=class extends Trt{constructor(e,t,i,r,s,o,a,l,c,u,d){const{options:h,getTypeNavigationMode:f,disposable:g}=l.invokeFunction(DS,a);super(e,t,i,r,s,o,h),this.disposables.add(g),this.internals=new sm(this,a,f,a.overrideStyles,c,u,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};oQ=Jd([ei(7,Fn),ei(8,In),ei(9,Nu),ei(10,Ti)],oQ);function Rge(n){const e=n.getValue(XV);if(e==="highlight")return bd.Highlight;if(e==="filter")return bd.Filter;const t=n.getValue(TN);if(t==="simple"||t==="highlight")return bd.Highlight;if(t==="filter")return bd.Filter}function Age(n){const e=n.getValue(JV);if(e==="fuzzy")return rm.Fuzzy;if(e==="contiguous")return rm.Contiguous}function DS(n,e){const t=n.get(Ti),i=n.get(wS),r=n.get(In),s=n.get(Fn),o=()=>{const h=r.getContextKeyValue(Ige);if(h==="automatic")return nu.Automatic;if(h==="trigger"||r.getContextKeyValue(Dge)===!1)return nu.Trigger;const g=t.getValue(QV);if(g==="automatic")return nu.Automatic;if(g==="trigger")return nu.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(Ra),[l,c]=s.invokeFunction(yM,e),u=e.paddingBottom,d=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(IN);return{getTypeNavigationMode:o,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(yw)=="number"?t.getValue(yw):void 0,renderIndentGuides:d,smoothScrolling:!!t.getValue(_c),defaultFindMode:Rge(t),defaultFindMatchType:Age(t),horizontalScrolling:a,scrollByPage:!!t.getValue(bc),paddingBottom:u,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(DN)==="doubleClick",contextViewProvider:i,findWidgetStyles:Met,enableStickyScroll:!!t.getValue(MN),stickyScrollMaxItemCount:Number(t.getValue(RN))}}}let sm=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,r,s,o,a){this.tree=e,this.disposables=[],this.contextKeyService=_M(s,e),this.disposables.push(CM(this.contextKeyService,e)),this.listSupportsMultiSelect=vM.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),bM.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=Art.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=GV.bindTo(this.contextKeyService),this.hasDoubleSelection=YV.bindTo(this.contextKeyService),this.hasMultiSelection=ZV.bindTo(this.contextKeyService),this.treeElementCanCollapse=Ort.bindTo(this.contextKeyService),this.treeElementHasParent=Prt.bindTo(this.contextKeyService),this.treeElementCanExpand=Frt.bindTo(this.contextKeyService),this.treeElementHasChild=Brt.bindTo(this.contextKeyService),this.treeFindOpen=Hrt.bindTo(this.contextKeyService),this.treeStickyScrollFocused=Tge.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Su(a),this.updateStyleOverrides(r);const c=()=>{const d=e.getFocus()[0];if(!d)return;const h=e.getNode(d);this.treeElementCanCollapse.set(h.collapsible&&!h.collapsed),this.treeElementHasParent.set(!!e.getParentElement(d)),this.treeElementCanExpand.set(h.collapsible&&h.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(d))},u=new Set;u.add(Ige),u.add(Dge),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const d=e.getSelection(),h=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(d.length>0||h.length>0),this.hasMultiSelection.set(d.length>1),this.hasDoubleSelection.set(d.length===2)})}),e.onDidChangeFocus(()=>{const d=e.getSelection(),h=e.getFocus();this.hasSelectionOrFocus.set(d.length>0||h.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(d=>this.treeFindOpen.set(d)),e.onDidChangeStickyScrollFocused(d=>this.treeStickyScrollFocused.set(d)),a.onDidChangeConfiguration(d=>{let h={};if(d.affectsConfiguration(Lm)&&(this._useAltAsMultipleSelectionModifier=Su(a)),d.affectsConfiguration(yw)){const f=a.getValue(yw);h={...h,indent:f}}if(d.affectsConfiguration(IN)&&t.renderIndentGuides===void 0){const f=a.getValue(IN);h={...h,renderIndentGuides:f}}if(d.affectsConfiguration(_c)){const f=!!a.getValue(_c);h={...h,smoothScrolling:f}}if(d.affectsConfiguration(XV)||d.affectsConfiguration(TN)){const f=Rge(a);h={...h,defaultFindMode:f}}if(d.affectsConfiguration(QV)||d.affectsConfiguration(TN)){const f=i();h={...h,typeNavigationMode:f}}if(d.affectsConfiguration(JV)){const f=Age(a);h={...h,defaultFindMatchType:f}}if(d.affectsConfiguration(Ra)&&t.horizontalScrolling===void 0){const f=!!a.getValue(Ra);h={...h,horizontalScrolling:f}}if(d.affectsConfiguration(bc)){const f=!!a.getValue(bc);h={...h,scrollByPage:f}}if(d.affectsConfiguration(DN)&&t.expandOnlyOnTwistieClick===void 0&&(h={...h,expandOnlyOnTwistieClick:a.getValue(DN)==="doubleClick"}),d.affectsConfiguration(MN)){const f=a.getValue(MN);h={...h,enableStickyScroll:f}}if(d.affectsConfiguration(RN)){const f=Math.max(1,a.getValue(RN));h={...h,stickyScrollMaxItemCount:f}}if(d.affectsConfiguration(yu)){const f=a.getValue(yu);h={...h,mouseWheelScrollSensitivity:f}}if(d.affectsConfiguration(wu)){const f=a.getValue(wu);h={...h,fastScrollSensitivity:f}}Object.keys(h).length>0&&e.updateOptions(h)}),this.contextKeyService.onDidChangeContext(d=>{d.affectsSome(u)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new Wrt(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?LS(e):yb)}dispose(){this.disposables=zr(this.disposables)}};sm=Jd([ei(4,In),ei(5,Nu),ei(6,Ti)],sm);const Urt=Lr.as(xm.Configuration);Urt.registerConfiguration({id:"workbench",order:7,title:S("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Lm]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[S("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),S("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:S({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[AE]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:S({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Ra]:{type:"boolean",default:!1,description:S("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[bc]:{type:"boolean",default:!1,description:S("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[yw]:{type:"number",default:8,minimum:4,maximum:40,description:S("tree indent setting","Controls tree indentation in pixels.")},[IN]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:S("render tree indent guides","Controls whether the tree should render indent guides.")},[_c]:{type:"boolean",default:!1,description:S("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[yu]:{type:"number",default:1,markdownDescription:S("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[wu]:{type:"number",default:5,markdownDescription:S("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[XV]:{type:"string",enum:["highlight","filter"],enumDescriptions:[S("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),S("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:S("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[TN]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[S("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),S("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),S("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:S("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:S("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[JV]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[S("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),S("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:S("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[DN]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:S("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[MN]:{type:"boolean",default:!0,description:S("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[RN]:{type:"number",minimum:1,default:7,markdownDescription:S("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[QV]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:S("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class wp extends ke{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(t==null?void 0:t.supportIcons)??!1,this.domNode=ct(e,xt("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",r){e||(e=""),r&&(e=wp.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&No(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){var i,r,s;const e=[];let t=0;for(const o of this.highlights){if(o.end===o.start)continue;if(t<o.start){const c=this.text.substring(t,o.start);this.supportIcons?e.push(...vp(c)):e.push(c),t=o.start}const a=this.text.substring(t,o.end),l=xt("span.highlight",void 0,...this.supportIcons?vp(a):[a]);o.extraClasses&&l.classList.add(...o.extraClasses),e.push(l),t=o.end}if(t<this.text.length){const o=this.text.substring(t);this.supportIcons?e.push(...vp(o)):e.push(o)}if(Fs(this.domNode,...e),(r=(i=this.options)==null?void 0:i.hoverDelegate)!=null&&r.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const o=((s=this.options)==null?void 0:s.hoverDelegate)??Wa("mouse");this.customHover=this._register(Lu().setupManagedHover(o,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let i=0,r=0;return e.replace(/\r\n|\r|\n/g,(s,o)=>{r=s===`\r
`?-1:0,o+=i;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=r),a.end>=o&&(a.end+=r));return i+=r,""})}}class h_{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||No(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class aQ extends ke{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new h_(ct(e,xt(".monaco-icon-label")))),this.labelContainer=ct(this.domNode.element,xt(".monaco-icon-label-container")),this.nameContainer=ct(this.labelContainer,xt("span.monaco-icon-name-container")),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=this._register(new qrt(this.nameContainer,!!t.supportIcons)):this.nameNode=new jrt(this.nameContainer),this.hoverDelegate=(t==null?void 0:t.hoverDelegate)??Wa("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){const r=["monaco-icon-label"],s=["monaco-icon-label-container"];let o="";i&&(i.extraClasses&&r.push(...i.extraClasses),i.italic&&r.push("italic"),i.strikethrough&&r.push("strikethrough"),i.disabledCommand&&s.push("disabled"),i.title&&(typeof i.title=="string"?o+=i.title:o+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(i!=null&&i.iconPath){let l;!a||!kr(a)?(l=xt(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=$d(i==null?void 0:i.iconPath)}else a&&a.remove();if(this.domNode.classNames=r,this.domNode.element.setAttribute("aria-label",o),this.labelContainer.classList.value="",this.labelContainer.classList.add(...s),this.setupHover(i!=null&&i.descriptionTitle?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof wp?(l.set(t||"",i?i.descriptionMatches:void 0,void 0,i==null?void 0:i.labelEscapeNewLines),this.setupHover(l.element,i==null?void 0:i.descriptionTitle)):(l.textContent=t&&(i!=null&&i.labelEscapeNewLines)?wp.escapeNewLines(t,[]):t||"",this.setupHover(l.element,(i==null?void 0:i.descriptionTitle)||""),l.empty=!t)}if(i!=null&&i.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=(i==null?void 0:i.suffix)??""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(function(s,o){aa(o)?s.title=cfe(o):o!=null&&o.markdownNotSupportedFallback?s.title=o.markdownNotSupportedFallback:s.removeAttribute("title")})(e,t);else{const r=Lu().setupManagedHover(this.hoverDelegate,e,t);r&&this.customHovers.set(e,r)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new h_(Ije(this.nameContainer,xt("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new h_(ct(e.element,xt("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new h_(ct(this.labelContainer,xt("span.monaco-icon-description-container"))));(e=this.creationOptions)!=null&&e.supportDescriptionHighlights?this.descriptionNode=this._register(new wp(ct(t.element,xt("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new h_(ct(t.element,xt("span.label-description"))))}return this.descriptionNode}}class jrt{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&No(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=ct(this.container,xt("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const r=e[i],s=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${i}`;ct(this.container,xt("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},r)),i<e.length-1&&ct(this.container,xt("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function Krt(n,e,t){if(!t)return;let i=0;return n.map(r=>{const s={start:i,end:i+r.length},o=t.map(a=>Ur.intersect(s,a)).filter(a=>!Ur.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=s.end+e.length,o})}class qrt extends ke{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&No(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new wp(ct(this.container,xt("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=(t==null?void 0:t.separator)||"/",r=Krt(e,i,t==null?void 0:t.matches);for(let s=0;s<e.length;s++){const o=e[s],a=r?r[s]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${s}`,c=xt("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});this._register(new wp(ct(this.container,c),{supportIcons:this.supportIcons})).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),s<e.length-1&&ct(c,xt("span.label-separator",void 0,i))}}}}const yk=xt;class tz extends ke{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const r=this.options.keybindingLabelForeground;this.domNode=ct(e,yk(".monaco-keybinding")),r&&(this.domNode.style.color=r),this.hover=this._register(Lu().setupManagedHover(Wa("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&tz.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let i=1;i<e.length;i++)ct(this.domNode,yk("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[i],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){pc(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const r=mV.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,r.ctrlKey,!!(i!=null&&i.ctrlKey),r.separator),t.shiftKey&&this.renderKey(e,r.shiftKey,!!(i!=null&&i.shiftKey),r.separator),t.altKey&&this.renderKey(e,r.altKey,!!(i!=null&&i.altKey),r.separator),t.metaKey&&this.renderKey(e,r.metaKey,!!(i!=null&&i.metaKey),r.separator);const s=t.keyLabel;s&&this.renderKey(e,s,!!(i!=null&&i.keyCode),"")}renderKey(e,t,i,r){ct(e,this.createKeyElement(t,i?".highlight":"")),r&&ct(e,yk("span.monaco-keybinding-key-separator",void 0,r))}renderUnbound(e){ct(e,this.createKeyElement(S("unbound","Unbound")))}createKeyElement(e,t=""){const i=yk("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&No(e.firstPart,t.firstPart)&&No(e.chordPart,t.chordPart)}}const lQ=new kf(()=>{const n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:n,collatorIsNumeric:n.resolvedOptions().numeric}});function Grt(n,e,t=!1){const i=n||"",r=e||"",s=lQ.value.collator.compare(i,r);return lQ.value.collatorIsNumeric&&s===0&&i!==r?i<r?-1:1:s}function Yrt(n,e,t){const i=n.toLowerCase(),r=e.toLowerCase(),s=Zrt(n,e,t);if(s)return s;const o=i.endsWith(t),a=r.endsWith(t);if(o!==a)return o?-1:1;const l=Grt(i,r);return l!==0?l:i.localeCompare(r)}function Zrt(n,e,t){const i=n.toLowerCase(),r=e.toLowerCase(),s=i.startsWith(t),o=r.startsWith(t);if(s!==o)return s?-1:1;if(s&&o){if(i.length<r.length)return-1;if(i.length>r.length)return 1}return 0}var wM=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Z6=function(n,e){return function(t,i){e(t,i,n)}},X6;const Pl=xt;class Oge{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new kf(()=>{const r=i.label??"",s=D_(r).text.trim(),o=i.ariaLabel||[r,this.saneDescription,this.saneDetail].map(a=>zXe(a)).filter(a=>!!a).join(", ");return{saneLabel:r,saneSortLabel:s,saneAriaLabel:o}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class Dr extends Oge{constructor(e,t,i,r,s,o){var a,l,c;super(e,t,s),this.fireButtonTriggered=i,this._onChecked=r,this.item=s,this._separator=o,this._checked=!1,this.onChecked=t?Be.map(Be.filter(this._onChecked.event,u=>u.element===this),u=>u.checked):Be.None,this._saneDetail=s.detail,this._labelHighlights=(a=s.highlights)==null?void 0:a.label,this._descriptionHighlights=(l=s.highlights)==null?void 0:l.description,this._detailHighlights=(c=s.highlights)==null?void 0:c.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var Yc;(function(n){n[n.NONE=0]="NONE",n[n.MOUSE_HOVER=1]="MOUSE_HOVER",n[n.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(Yc||(Yc={}));class dg extends Oge{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=Yc.NONE}}class Xrt{getHeight(e){return e instanceof dg?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof Dr?AN.ID:ON.ID}}class Qrt{getWidgetAriaLabel(){return S("quickInput","Quick Input")}getAriaLabel(e){var t;return(t=e.separator)!=null&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof Dr)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class Pge{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new dt,t.toDisposeTemplate=new dt,t.entry=ct(e,Pl(".quick-input-list-entry"));const i=ct(t.entry,Pl("label.quick-input-list-label"));t.toDisposeTemplate.add(vr(i,We.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=ct(i,Pl("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const r=ct(i,Pl(".quick-input-list-rows")),s=ct(r,Pl(".quick-input-list-row")),o=ct(r,Pl(".quick-input-list-row"));t.label=new aQ(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=OH(t.label.element,Pl(".quick-input-list-icon"));const a=ct(s,Pl(".quick-input-list-entry-keybinding"));t.keybinding=new tz(a,al),t.toDisposeTemplate.add(t.keybinding);const l=ct(o,Pl(".quick-input-list-label-meta"));return t.detail=new aQ(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=ct(t.entry,Pl(".quick-input-list-separator")),t.actionBar=new Td(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}var Ep;let AN=(Ep=class extends Pge{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return X6.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(vr(t.checkbox,We.CHANGE,i=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,i){var h;const r=e.element;i.element=r,r.element=i.entry??void 0;const s=r.item;i.checkbox.checked=r.checked,i.toDisposeElement.add(r.onChecked(f=>i.checkbox.checked=f)),i.checkbox.disabled=r.checkboxDisabled;const{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=r;if(s.iconPath){const f=ZD(this.themeService.getColorTheme().type)?s.iconPath.dark:s.iconPath.light??s.iconPath.dark,g=Ut.revive(f);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=$d(g)}else i.icon.style.backgroundImage="",i.icon.className=s.iconClass?`quick-input-list-icon ${s.iconClass}`:"";let c;!r.saneTooltip&&r.saneDescription&&(c={markdown:{value:r.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDescription});const u={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(u.extraClasses=s.iconClasses,u.italic=s.italic,u.strikethrough=s.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(r.saneLabel,r.saneDescription,u),i.keybinding.set(s.keybinding),r.saneDetail){let f;r.saneTooltip||(f={markdown:{value:r.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(r.saneDetail,void 0,{matches:l,title:f,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";(h=r.separator)!=null&&h.label?(i.separator.textContent=r.separator.label,i.separator.style.display="",this.addItemWithSeparator(r)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!r.separator);const d=s.buttons;d&&d.length?(i.actionBar.push(d.map((f,g)=>DC(f,`id-${g}`,()=>r.fireButtonTriggered({button:f,item:r.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},X6=Ep,Ep.ID="quickpickitem",Ep);AN=X6=wM([Z6(1,Nl)],AN);const VT=class VT extends Pge{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return VT.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,i){const r=e.element;i.element=r,r.element=i.entry??void 0,r.element.classList.toggle("focus-inside",!!r.focusInsideSeparator);const s=r.separator,{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=r;i.icon.style.backgroundImage="",i.icon.className="";let c;!r.saneTooltip&&r.saneDescription&&(c={markdown:{value:r.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDescription});const u={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(r.saneLabel,r.saneDescription,u),r.saneDetail){let h;r.saneTooltip||(h={markdown:{value:r.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(r.saneDetail,void 0,{matches:l,title:h,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const d=s.buttons;d&&d.length?(i.actionBar.push(d.map((h,f)=>DC(h,`id-${f}`,()=>r.fireSeparatorButtonTriggered({button:h,separator:r.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(r)}disposeElement(e,t,i){var r;this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||(r=e.element.element)==null||r.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};VT.ID="quickpickseparator";let ON=VT,ww=class extends ke{constructor(e,t,i,r,s,o){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=o,this._onKeyDown=new ae,this._onLeave=new ae,this.onLeave=this._onLeave.event,this._visibleCountObservable=mn("VisibleCount",0),this.onChangedVisibleCount=Be.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=mn("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=Be.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=mn("CheckedCount",0),this.onChangedCheckedCount=Be.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=d6({equalsFn:rr},new Array),this.onChangedCheckedElements=Be.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new ae,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new ae,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new ae,this._elementCheckedEventBufferer=new cS,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new dt),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=ct(this.parent,Pl(".quick-input-list")),this._separatorRenderer=new ON(t),this._itemRenderer=s.createInstance(AN,t),this._tree=this._register(s.createInstance(Y6,"QuickInput",this._container,new Xrt,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?0:a instanceof dg?2:1}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return est(a,l,c)}},accessibilityProvider:new Qrt,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:$1.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=r,this._registerListeners()}get onDidChangeFocus(){return Be.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof Dr).map(t=>t.item),this._store)}get onDidChangeSelection(){return Be.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof Dr).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new ii(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(_e(this._container,We.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(_e(this._container,We.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new hde(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{var i;if(rY(t.browserEvent.target)){e.cancel();return}if(!(!rY(t.browserEvent.relatedTarget)&&mr(t.browserEvent.relatedTarget,(i=t.element)==null?void 0:i.element)))try{await e.trigger(async()=>{t.element instanceof Dr&&this.showHover(t.element)})}catch(r){if(!aS(r))throw r}})),this._register(this._tree.onMouseOut(t=>{var i;mr(t.browserEvent.relatedTarget,(i=t.element)==null?void 0:i.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const i of this._separatorRenderer.visibleSeparators){const r=i===t;!!(i.focusInsideSeparator&Yc.ACTIVE_ITEM)!==r&&(r?i.focusInsideSeparator|=Yc.ACTIVE_ITEM:i.focusInsideSeparator&=~Yc.ACTIVE_ITEM,this._tree.rerender(i))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&Yc.MOUSE_HOVER)||(i.focusInsideSeparator|=Yc.MOUSE_HOVER,this._tree.rerender(i))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&Yc.MOUSE_HOVER)&&(i.focusInsideSeparator&=~Yc.MOUSE_HOVER,this._tree.rerender(i))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(i=>i instanceof Dr);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof dg&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((i,r,s)=>{let o;if(r.type==="separator"){if(!r.buttons)return i;t=new dg(s,a=>this._onSeparatorButtonTriggered.fire(a),r),o=t}else{const a=s>0?e[s-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(t=void 0,l=a);const c=new Dr(s,this._hasCheckboxes,u=>this._onButtonTriggered.fire(u),this._elementChecked,r,l);if(this._itemElements.push(c),t)return t.children.push(c),i;o=c}return i.push(o),i},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const i=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),r=i==null?void 0:i.parentNode;if(i&&r){const s=i.nextSibling;i.remove(),r.insertBefore(i,s)}},0)}setFocusedElements(e){const t=e.map(i=>this._itemElements.find(r=>r.item===i)).filter(i=>!!i).filter(i=>!i.hidden);if(this._tree.setFocus(t),e.length>0){const i=this._tree.getFocus()[0];i&&this._tree.reveal(i)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(i=>this._itemElements.find(r=>r.item===i)).filter(i=>!!i);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const i of e)t.add(i);for(const i of this._itemElements)i.checked=t.has(i.item)})}focus(e){var t;if(this._itemElements.length)switch(e===Xn.Second&&this._itemElements.length<2&&(e=Xn.First),e){case Xn.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,i=>i.element instanceof Dr);break;case Xn.Second:{this._tree.scrollTop=0;let i=!1;this._tree.focusFirst(void 0,r=>r.element instanceof Dr?i?!0:(i=!i,!1):!1);break}case Xn.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,i=>i.element instanceof Dr);break;case Xn.Next:{const i=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,s=>s.element instanceof Dr?(this._tree.reveal(s.element),!0):!1);const r=this._tree.getFocus();i.length&&i[0]===r[0]&&i[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case Xn.Previous:{const i=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,s=>{if(!(s.element instanceof Dr))return!1;const o=this._tree.getParentElement(s.element);return o===null||o.children[0]!==s.element?this._tree.reveal(s.element):this._tree.reveal(o),!0});const r=this._tree.getFocus();i.length&&i[0]===r[0]&&i[0]===this._itemElements[0]&&this._onLeave.fire();break}case Xn.NextPage:this._tree.focusNextPage(void 0,i=>i.element instanceof Dr?(this._tree.reveal(i.element),!0):!1);break;case Xn.PreviousPage:this._tree.focusPreviousPage(void 0,i=>{if(!(i.element instanceof Dr))return!1;const r=this._tree.getParentElement(i.element);return r===null||r.children[0]!==i.element?this._tree.reveal(i.element):this._tree.reveal(r),!0});break;case Xn.NextSeparator:{let i=!1;const r=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,o=>{if(i)return!0;if(o.element instanceof dg)i=!0,this._separatorRenderer.isSeparatorVisible(o.element)?this._tree.reveal(o.element.children[0]):this._tree.reveal(o.element,0);else if(o.element instanceof Dr){if(o.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(o.element)?this._tree.reveal(o.element):this._tree.reveal(o.element,0),!0;if(o.element===this._elementTree[0])return this._tree.reveal(o.element,0),!0}return!1});const s=this._tree.getFocus()[0];r===s&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,o=>o.element instanceof Dr));break}case Xn.PreviousSeparator:{let i,r=!!((t=this._tree.getFocus()[0])!=null&&t.separator);this._tree.focusPrevious(void 0,!0,void 0,s=>{if(s.element instanceof dg)r?i||(this._separatorRenderer.isSeparatorVisible(s.element)?this._tree.reveal(s.element):this._tree.reveal(s.element,0),i=s.element.children[0]):r=!0;else if(s.element instanceof Dr&&!i){if(s.element.separator)this._itemRenderer.isItemWithSeparatorVisible(s.element)?this._tree.reveal(s.element):this._tree.reveal(s.element,0),i=s.element;else if(s.element===this._elementTree[0])return this._tree.reveal(s.element,0),!0}return!1}),i&&this._tree.setFocus([i]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const r=i.index&&this._inputElements[i.index-1];i.item&&(i.separator=r&&r.type==="separator"&&!r.buttons?r:void 0)});else{let i;this._itemElements.forEach(r=>{let s;this.matchOnLabelMode==="fuzzy"?s=this.matchOnLabel?oA(e,D_(r.saneLabel))??void 0:void 0:s=this.matchOnLabel?Jrt(t,D_(r.saneLabel))??void 0:void 0;const o=this.matchOnDescription?oA(e,D_(r.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?oA(e,D_(r.saneDetail||""))??void 0:void 0;if(s||o||a?(r.labelHighlights=s,r.descriptionHighlights=o,r.detailHighlights=a,r.hidden=!1):(r.labelHighlights=void 0,r.descriptionHighlights=void 0,r.detailHighlights=void 0,r.hidden=r.item?!r.item.alwaysShow:!0),r.item?r.separator=void 0:r.separator&&(r.hidden=!0),!this.sortByLabel){const l=r.index&&this._inputElements[r.index-1]||void 0;(l==null?void 0:l.type)==="separator"&&!l.buttons&&(i=l),i&&!r.hidden&&(r.separator=i,i=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(i=>i instanceof Dr),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!(e!=null&&e.saneTooltip)||!(e instanceof Dr))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new dt;t.add(this._tree.onDidChangeFocus(i=>{i.elements[0]instanceof Dr&&this.showHover(i.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const i of e)i instanceof dg?t.push({element:i,collapsible:!1,collapsed:!1,children:i.children.map(r=>({element:r,collapsible:!1,collapsed:!1}))}):t.push({element:i,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let i=0,r=e.length;i<r;i++){const s=e[i];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}_updateCheckedObservables(){tr(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(i=>i.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){var t,i,r;this._lastHover&&!this._lastHover.isDisposed&&((i=(t=this.hoverDelegate).onDidHideHover)==null||i.call(t),(r=this._lastHover)==null||r.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:s=>{this.linkOpenerDelegate(s)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};wM([Ii],ww.prototype,"onDidChangeFocus",null);wM([Ii],ww.prototype,"onDidChangeSelection",null);ww=wM([Z6(4,Fn),Z6(5,Lc)],ww);function Jrt(n,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return cQ(n,t);const r=MD(t," "),s=t.length-r.length,o=cQ(n,r);if(o)for(const a of o){const l=i[a.start+s]+s;a.start+=l,a.end+=l}return o}function cQ(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t!==-1?[{start:t,end:t+n.length}]:null}function est(n,e,t){const i=n.labelHighlights||[],r=e.labelHighlights||[];return i.length&&!r.length?-1:!i.length&&r.length?1:i.length===0&&r.length===0?0:Yrt(n.saneSortLabel,e.saneSortLabel,t)}const Fge={weight:200,when:Ln.and(Ln.equals(vge,"quickPick"),_it),metadata:{description:S("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function wo(n,e={}){gS.registerCommandAndKeybindingRule({...Fge,...n,secondary:tst(n.primary,n.secondary??[],e)})}const PN=hn?256:2048;function tst(n,e,t={}){return t.withAltMod&&e.push(512+n),t.withCtrlMod&&(e.push(PN+n),t.withAltMod&&e.push(512+PN+n)),t.withCmdMod&&hn&&(e.push(2048+n),t.withCtrlMod&&e.push(2304+n),t.withAltMod&&(e.push(2560+n),t.withCtrlMod&&e.push(2816+n))),e}function jo(n,e){return t=>{const i=t.get(pM).currentQuickInput;if(i)return e&&i.quickNavigate?i.focus(e):i.focus(n)}}wo({id:"quickInput.pageNext",primary:12,handler:jo(Xn.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});wo({id:"quickInput.pagePrevious",primary:11,handler:jo(Xn.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});wo({id:"quickInput.first",primary:PN+14,handler:jo(Xn.First)},{withAltMod:!0,withCmdMod:!0});wo({id:"quickInput.last",primary:PN+13,handler:jo(Xn.Last)},{withAltMod:!0,withCmdMod:!0});wo({id:"quickInput.next",primary:18,handler:jo(Xn.Next)},{withCtrlMod:!0});wo({id:"quickInput.previous",primary:16,handler:jo(Xn.Previous)},{withCtrlMod:!0});const uQ=S("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),dQ=S("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");hn?(wo({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:jo(Xn.NextSeparator,Xn.Next),metadata:{description:uQ}}),wo({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:jo(Xn.NextSeparator)},{withCtrlMod:!0}),wo({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:jo(Xn.PreviousSeparator,Xn.Previous),metadata:{description:dQ}}),wo({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:jo(Xn.PreviousSeparator)},{withCtrlMod:!0})):(wo({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:jo(Xn.NextSeparator,Xn.Next),metadata:{description:uQ}}),wo({id:"quickInput.nextSeparator",primary:2578,handler:jo(Xn.NextSeparator)}),wo({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:jo(Xn.PreviousSeparator,Xn.Previous),metadata:{description:dQ}}),wo({id:"quickInput.previousSeparator",primary:2576,handler:jo(Xn.PreviousSeparator)}));wo({id:"quickInput.acceptInBackground",when:Ln.and(Fge.when,Ln.or(Mrt.negate(),wit)),primary:17,weight:250,handler:n=>{const e=n.get(pM).currentQuickInput;e==null||e.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var nst=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},TA=function(n,e){return function(t,i){e(t,i,n)}},Q6;const bo=xt;var Lp;let J6=(Lp=class extends ke{get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,i,r){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.contextKeyService=r,this.enabled=!0,this.onDidAcceptEmitter=this._register(new ae),this.onDidCustomEmitter=this._register(new ae),this.onDidTriggerButtonEmitter=this._register(new ae),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new ae),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new ae),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=bit.bindTo(this.contextKeyService),this.quickInputTypeContext=Cit.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=yit.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(Be.runAndSubscribe(OD,({window:s,disposables:o})=>this.registerKeyModsListeners(s,o),{window:zn,disposables:this._store})),this._register(gje(s=>{this.ui&&bt(this.ui.container)===s&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const i=r=>{this.keyMods.ctrlCmd=r.ctrlKey||r.metaKey,this.keyMods.alt=r.altKey};for(const r of[We.KEY_DOWN,We.KEY_UP,We.MOUSE_DOWN])t.add(_e(e,r,i,!0))}getUI(e){if(this.ui)return e&&bt(this._container)!==bt(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=ct(this._container,bo(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=Fa(t),r=ct(t,bo(".quick-input-titlebar")),s=this._register(new Td(r,{hoverDelegate:this.options.hoverDelegate}));s.domNode.classList.add("quick-input-left-action-bar");const o=ct(r,bo(".quick-input-title")),a=this._register(new Td(r,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=ct(t,bo(".quick-input-header")),c=ct(l,bo("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",S("quickInput.checkAll","Toggle all checkboxes")),this._register(vr(c,We.CHANGE,R=>{const V=c.checked;O.setAllVisibleChecked(V)})),this._register(_e(c,We.CLICK,R=>{(R.x||R.y)&&f.setFocus()}));const u=ct(l,bo(".quick-input-description")),d=ct(l,bo(".quick-input-and-message")),h=ct(d,bo(".quick-input-filter")),f=this._register(new Fit(h,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=ct(h,bo(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const p=new $X(g,{countFormat:S({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),v=ct(h,bo(".quick-input-count"));v.setAttribute("aria-live","polite");const b=new $X(v,{countFormat:S({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),_=this._register(new Td(l,{hoverDelegate:this.options.hoverDelegate}));_.domNode.classList.add("quick-input-inline-action-bar");const y=ct(l,bo(".quick-input-action")),C=this._register(new W6(y,this.styles.button));C.label=S("ok","OK"),this._register(C.onDidClick(R=>{this.onDidAcceptEmitter.fire()}));const w=ct(l,bo(".quick-input-action")),x=this._register(new W6(w,{...this.styles.button,supportIcons:!0}));x.label=S("custom","Custom"),this._register(x.onDidClick(R=>{this.onDidCustomEmitter.fire()}));const k=ct(d,bo(`#${this.idPrefix}message.quick-input-message`)),E=this._register(new $6(t,this.styles.progressBar));E.getContainer().classList.add("quick-input-progress");const L=ct(t,bo(".quick-input-html-widget"));L.tabIndex=-1;const M=ct(t,bo(".quick-input-description")),D=this.idPrefix+"list",O=this._register(this.instantiationService.createInstance(ww,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,D));f.setAttribute("aria-controls",D),this._register(O.onDidChangeFocus(()=>{f.setAttribute("aria-activedescendant",O.getActiveDescendant()??"")})),this._register(O.onChangedAllVisibleChecked(R=>{c.checked=R})),this._register(O.onChangedVisibleCount(R=>{p.setCount(R)})),this._register(O.onChangedCheckedCount(R=>{b.setCount(R)})),this._register(O.onLeave(()=>{setTimeout(()=>{this.controller&&(f.setFocus(),this.controller instanceof EN&&this.controller.canSelectMany&&O.clearFocus())},0)}));const A=Jy(t);return this._register(A),this._register(_e(t,We.FOCUS,R=>{const V=this.getUI();if(mr(R.relatedTarget,V.inputContainer)){const F=V.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==F&&this.endOfQuickInputBoxContext.set(F)}mr(R.relatedTarget,V.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=kr(R.relatedTarget)?R.relatedTarget:void 0)},!0)),this._register(A.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(W1.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(f.onKeyDown(R=>{const V=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==V&&this.endOfQuickInputBoxContext.set(V)})),this._register(_e(t,We.FOCUS,R=>{f.setFocus()})),this._register(vr(t,We.KEY_DOWN,R=>{if(!mr(R.target,L))switch(R.keyCode){case 3:en.stop(R,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:en.stop(R,!0),this.hide(W1.Gesture);break;case 2:if(!R.altKey&&!R.ctrlKey&&!R.metaKey){const V=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?V.push("input"):V.push("input[type=text]"),this.getUI().list.displayed&&V.push(".monaco-list"),this.getUI().message&&V.push(".quick-input-message a"),this.getUI().widget){if(mr(R.target,this.getUI().widget))break;V.push(".quick-input-html-widget")}const F=t.querySelectorAll(V.join(", "));R.shiftKey&&R.target===F[0]?(en.stop(R,!0),O.clearFocus()):!R.shiftKey&&mr(R.target,F[F.length-1])&&(en.stop(R,!0),F[0].focus())}break;case 10:R.ctrlKey&&(en.stop(R,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:i,leftActionBar:s,titleBar:r,title:o,description1:M,description2:u,widget:L,rightActionBar:a,inlineActionBar:_,checkAll:c,inputContainer:d,filterContainer:h,inputBox:f,visibleCountContainer:g,visibleCount:p,countContainer:v,count:b,okContainer:y,ok:C,message:k,customButtonContainer:w,customButton:x,list:O,progressBar:E,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:R=>this.show(R),hide:()=>this.hide(),setVisibilities:R=>this.setVisibilities(R),setEnabled:R=>this.setEnabled(R),setContextKey:R=>this.options.setContextKey(R),linkOpenerDelegate:R=>this.options.linkOpenerDelegate(R)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,ct(this._container,this.ui.container))}pick(e,t={},i=wl.None){return new Promise((r,s)=>{let o=u=>{var d;o=r,(d=t.onKeyMods)==null||d.call(t,a.keyMods),r(u)};if(i.isCancellationRequested){o(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const u=a.activeItems[0];u&&(o(u),a.hide())}}),a.onDidChangeActive(u=>{const d=u[0];d&&t.onDidFocus&&t.onDidFocus(d)}),a.onDidChangeSelection(u=>{if(!a.canSelectMany){const d=u[0];d&&(o(d),a.hide())}}),a.onDidTriggerItemButton(u=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...u,removeItem:()=>{const d=a.items.indexOf(u.item);if(d!==-1){const h=a.items.slice(),f=h.splice(d,1),g=a.activeItems.filter(v=>v!==f[0]),p=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=h,g&&(a.activeItems=g),a.keepScrollPosition=p}}})),a.onDidTriggerSeparatorButton(u=>{var d;return(d=t.onDidTriggerSeparatorButton)==null?void 0:d.call(t,u)}),a.onDidChangeValue(u=>{l&&!u&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{zr(c),o(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([u,d])=>{l=d,a.busy=!1,a.items=u,a.canSelectMany&&(a.selectedItems=u.filter(h=>h.type!=="separator"&&h.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,u=>{s(u),a.hide()})})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new EN(t)}createInputBox(){const e=this.getUI(!0);return new Sit(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i==null||i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",Fs(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Ki.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Fs(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const r=this.options.backKeybindingLabel();V6.tooltip=r?S("quickInput.backWithKeybinding","Back ({0})",r):S("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var s;const t=this.controller;if(!t)return;t.willHide(e);const i=(s=this.ui)==null?void 0:s.container,r=i&&!Tde(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!r){let o=this.previousFocusElement;for(;o&&!o.offsetParent;)o=o.parentElement??void 0;o!=null&&o.offsetParent?(o.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,Q6.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:r,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=r?`1px solid ${r}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.list.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}},Q6=Lp,Lp.MAX_WIDTH=600,Lp);J6=Q6=nst([TA(1,jf),TA(2,Fn),TA(3,In)],J6);var ist=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},f_=function(n,e){return function(t,i){e(t,i,n)}};let e7=class extends IGe{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(H6))),this._quickAccess}constructor(e,t,i,r,s){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=r,this.configurationService=s,this._onShow=this._register(new ae),this._onHide=this._register(new ae),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:s=>this.setContextKey(s),linkOpenerDelegate:s=>{this.instantiationService.invokeFunction(o=>{o.get(SS).open(s,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(z6))},r=this._register(this.instantiationService.createInstance(J6,{...i,...t}));return r.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(s=>{bt(e.activeContainer)===bt(r.container)&&r.layout(s,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{r.isVisible()||r.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(r.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(r.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),r}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new ht(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,i=wl.None){return this.controller.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:$e(kZ),quickInputForeground:$e(jZe),quickInputTitleBackground:$e(KZe),widgetBorder:$e(TYe),widgetShadow:$e(CS)},inputBox:Ofe,toggle:Afe,countBadge:Ret,button:Iet,progressBar:Det,keybindingLabel:Tet,list:LS({listBackground:kZ,listFocusBackground:$8,listFocusForeground:W8,listInactiveFocusForeground:W8,listInactiveSelectionIconForeground:Xhe,listInactiveFocusBackground:$8,listFocusOutline:Fi,listInactiveFocusOutline:Fi}),pickerGroup:{pickerGroupBorder:$e(qZe),pickerGroupForeground:$e(Zhe)}}}};e7=ist([f_(0,Fn),f_(1,In),f_(2,Nl),f_(3,jf),f_(4,Ti)],e7);var Bge=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Ng=function(n,e){return function(t,i){e(t,i,n)}};let t7=class extends e7{constructor(e,t,i,r,s,o){super(t,i,r,new L8(e.getContainerDomNode(),s),o),this.host=void 0;const a=Sw.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return Be.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return Be.None},get onDidAddContainer(){return Be.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};t7=Bge([Ng(1,Fn),Ng(2,In),Ng(3,Nl),Ng(4,or),Ng(5,Ti)],t7);let n7=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(t7,e);this.mapEditorToService.set(e,t),L1(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,i=wl.None){return this.activeService.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}};n7=Bge([Ng(0,Fn),Ng(1,or)],n7);const zT=class zT{static get(e){return e.getContribution(zT.ID)}constructor(e){this.editor=e,this.widget=new i7(this.editor)}dispose(){this.widget.dispose()}};zT.ID="editor.controller.quickInput";let Sw=zT;const WT=class WT{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return WT.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};WT.ID="editor.contrib.quickInputWidget";let i7=WT;Vde(Sw.ID,Sw,4);class rst{constructor(e,t,i,r,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=r,this.background=s}}function sst(n){if(!n||!Array.isArray(n))return[];const e=[];let t=0;for(let i=0,r=n.length;i<r;i++){const s=n[i];let o=-1;if(typeof s.fontStyle=="string"){o=0;const c=s.fontStyle.split(" ");for(let u=0,d=c.length;u<d;u++)switch(c[u]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break;case"strikethrough":o=o|8;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let l=null;typeof s.background=="string"&&(l=s.background),e[t++]=new rst(s.token||"",i,o,a,l)}return e}function ost(n,e){n.sort((u,d)=>{const h=dst(u.token,d.token);return h!==0?h:u.index-d.index});let t=0,i="000000",r="ffffff";for(;n.length>=1&&n[0].token==="";){const u=n.shift();u.fontStyle!==-1&&(t=u.fontStyle),u.foreground!==null&&(i=u.foreground),u.background!==null&&(r=u.background)}const s=new lst;for(const u of e)s.getId(u);const o=s.getId(i),a=s.getId(r),l=new nz(t,o,a),c=new iz(l);for(let u=0,d=n.length;u<d;u++){const h=n[u];c.insert(h.token,h.fontStyle,s.getId(h.foreground),s.getId(h.background))}return new Hge(s,c)}const ast=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class lst{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(ast);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=De.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class Hge{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(sst(e),t)}static createFromParsedTokenTheme(e,t){return ost(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const r=this._match(t),s=ust(t);i=(r.metadata|s<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const cst=/\b(comment|string|regex|regexp)\b/;function ust(n){const e=n.match(cst);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function dst(n,e){return n<e?-1:n>e?1:0}class nz{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new nz(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class iz{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,r;t===-1?(i=e,r=""):(i=e.substring(0,t),r=e.substring(t+1));const s=this._children.get(i);return typeof s<"u"?s.match(r):this._mainRule}insert(e,t,i,r){if(e===""){this._mainRule.acceptOverwrite(t,i,r);return}const s=e.indexOf(".");let o,a;s===-1?(o=e,a=""):(o=e.substring(0,s),a=e.substring(s+1));let l=this._children.get(o);typeof l>"u"&&(l=new iz(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,i,r)}}function hst(n){const e=[];for(let t=1,i=n.length;t<i;t++){const r=n[t];e[t]=`.mtk${t} { color: ${r}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const fst={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[mc]:"#FFFFFE",[_S]:"#000000",[Fhe]:"#E5EBF1",[TS]:"#D3D3D3",[IS]:"#939393",[Bhe]:"#ADD6FF4D"}},gst={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[mc]:"#1E1E1E",[_S]:"#D4D4D4",[Fhe]:"#3A3D41",[TS]:"#404040",[IS]:"#707070",[Bhe]:"#ADD6FF26"}},pst={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[mc]:"#000000",[_S]:"#FFFFFF",[TS]:"#FFFFFF",[IS]:"#FFFFFF"}},mst={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[mc]:"#FFFFFF",[_S]:"#292929",[TS]:"#292929",[IS]:"#292929"}},vst={IconContribution:"base.contributions.icons"};var hQ;(function(n){function e(t,i){let r=t.defaults;for(;vn.isThemeIcon(r);){const s=Nm.getIcon(r.id);if(!s)return;r=s.defaults}return r}n.getDefinition=e})(hQ||(hQ={}));var fQ;(function(n){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(r=>({format:r.format,location:r.location.toString()}))}}n.toJSONObject=e;function t(i){const r=s=>aa(s)?s:void 0;if(i&&Array.isArray(i.src)&&i.src.every(s=>aa(s.format)&&aa(s.location)))return{weight:r(i.weight),style:r(i.style),src:i.src.map(s=>({format:s.format,location:Ut.parse(s.location)}))}}n.fromJSONObject=t})(fQ||(fQ={}));class bst{constructor(){this._onDidChange=new ae,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:S("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:S("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${vn.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,r){const s=this.iconsById[e];if(s){if(i&&!s.description){s.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return s}const o={id:e,description:i,defaults:t,deprecationMessage:r};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return r&&(a.deprecationMessage=r),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(s,o)=>s.id.localeCompare(o.id),t=s=>{for(;vn.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of r.filter(o=>!!o.description).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${vn.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of r.filter(o=>!vn.isThemeIcon(o.defaults)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join(`
`)}}const Nm=new bst;Lr.add(vst.IconContribution,Nm);function Gf(n,e,t,i){return Nm.registerIcon(n,e,t,i)}function Vge(){return Nm}function _st(){const n=Que();for(const e in n){const t="\\"+n[e].toString(16);Nm.registerIcon(e,{fontCharacter:t})}}_st();const zge="vscode://schemas/icons",Wge=Lr.as(YD.JSONContribution);Wge.registerSchema(zge,Nm.getIconSchema());const gQ=new bs(()=>Wge.notifySchemaChanged(zge),200);Nm.onDidChange(()=>{gQ.isScheduled()||gQ.schedule()});Gf("widget-close",rt.close,S("widgetClose","Icon for the close action in widgets."));Gf("goto-previous-location",rt.arrowUp,S("previousChangeIcon","Icon for goto previous editor location."));Gf("goto-next-location",rt.arrowDown,S("nextChangeIcon","Icon for goto next editor location."));vn.modify(rt.sync,"spin");vn.modify(rt.loading,"spin");function Cst(n){const e=new dt,t=e.add(new ae),i=Vge();return e.add(i.onDidChange(()=>t.fire())),n&&e.add(n.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const r=n?n.getProductIconTheme():new $ge,s={},o=[],a=[];for(const l of i.getIcons()){const c=r.getIcon(l);if(!c)continue;const u=c.font,d=`--vscode-icon-${l.id}-font-family`,h=`--vscode-icon-${l.id}-content`;u?(s[u.id]=u.definition,a.push(`${d}: ${VR(u.id)};`,`${h}: '${c.fontCharacter}';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${VR(u.id)}; }`)):(a.push(`${h}: '${c.fontCharacter}'; ${d}: 'codicon';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`))}for(const l in s){const c=s[l],u=c.weight?`font-weight: ${c.weight};`:"",d=c.style?`font-style: ${c.style};`:"",h=c.src.map(f=>`${$d(f.location)} format('${f.format}')`).join(", ");o.push(`@font-face { src: ${h}; font-family: ${VR(l)};${u}${d} font-display: block; }`)}return o.push(`:root { ${a.join(" ")} }`),o.join(`
`)}}}class $ge{getIcon(e){const t=Vge();let i=e.defaults;for(;vn.isThemeIcon(i);){const r=t.getIcon(i.id);if(!r)return;i=r.defaults}return i}}const Dh="vs",MC="vs-dark",U0="hc-black",j0="hc-light",Uge=Lr.as(Ihe.ColorContribution),yst=Lr.as(fhe.ThemingContribution);class jge{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(OE(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,De.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=r7(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,De.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=Uge.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Dh:return Ia.LIGHT;case U0:return Ia.HIGH_CONTRAST_DARK;case j0:return Ia.HIGH_CONTRAST_LIGHT;default:return Ia.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const s=r7(this.themeData.base);e=s.rules,s.encodedTokensColors&&(t=s.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],r=this.themeData.colors["editor.background"];if(i||r){const s={token:""};i&&(s.foreground=i),r&&(s.background=r),e.push(s)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=Hge.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=Yl.getForeground(s),a=Yl.getFontStyle(s);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function OE(n){return n===Dh||n===MC||n===U0||n===j0}function r7(n){switch(n){case Dh:return fst;case MC:return gst;case U0:return pst;case j0:return mst}}function wk(n){const e=r7(n);return new jge(n,e)}class wst extends ke{constructor(){super(),this._onColorThemeChange=this._register(new ae),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new ae),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new $ge,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Dh,wk(Dh)),this._knownThemes.set(MC,wk(MC)),this._knownThemes.set(U0,wk(U0)),this._knownThemes.set(j0,wk(j0));const e=this._register(Cst(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Dh),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),ade(zn,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return HL(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Fa(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),ke.None}_registerShadowDomContainer(e){const t=Fa(e,i=>{i.className="monaco-colors",i.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!OE(t.base)&&!OE(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new jge(e,t)),OE(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Dh),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=zn.matchMedia("(forced-colors: active)").matches;if(e!==A0(this._theme.type)){let t;ZD(this._theme.type)?t=e?U0:MC:t=e?j0:Dh,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};yst.getThemingParticipants().forEach(o=>o(this._theme,i,this._environment));const r=[];for(const o of Uge.getColors()){const a=this._theme.getColor(o.id,!0);a&&r.push(`${XH(o.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${r.join(`
`)} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(hst(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Hi.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const Tl=cn("themeService");var Sst=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},IA=function(n,e){return function(t,i){e(t,i,n)}};let s7=class extends ke{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new ae,this._onDidChangeReducedMotion=new ae,this._onDidChangeLinkUnderline=new ae,this._accessibilityModeEnabledContext=LQe.bindTo(this._contextKeyService);const r=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("editor.accessibilitySupport")&&(r(),this._onDidChangeScreenReaderOptimized.fire()),o.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),r(),this._register(this.onDidChangeScreenReaderOptimized(()=>r()));const s=zn.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(s),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(_e(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",i),this._layoutService.mainContainer.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const i=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=i,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};s7=Sst([IA(0,In),IA(1,jf),IA(2,Ti)],s7);var SM=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},fu=function(n,e){return function(t,i){e(t,i,n)}},hv,P_;let o7=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new a7(i)}createMenu(e,t,i){return new FN(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t)}getMenuActions(e,t,i){const r=new FN(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t),s=r.getActions(i);return r.dispose(),s}resetHiddenStates(e){this._hiddenStates.reset(e)}};o7=SM([fu(0,ga),fu(1,Wr),fu(2,hM)],o7);var Np;let a7=(Np=class{constructor(e){this._storageService=e,this._disposables=new dt,this._onDidChange=new ae,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(hv._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,hv._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(hv._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){var s;const i=this._isHiddenByDefault(e,t),r=((s=this._data[e.id])==null?void 0:s.includes(t))??!1;return i?!r:r}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const s=this._data[e.id];if(i)s?s.indexOf(t)<0&&s.push(t):this._data[e.id]=[t];else if(s){const o=s.indexOf(t);o>=0&&Jze(s,o),s.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(hv._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},hv=Np,Np._key="menu.hiddenCommands",Np);a7=hv=SM([fu(0,hM)],a7);class RC{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(I1.getMenuItems(this._id));let t;for(const i of e){const r=i.group||"";(!t||t[0]!==r)&&(t=[r,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeysAndSubmenuIds(i)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(RC._fillInKbExprKeys(e.when,this._structureContextKeys),bC(e)){if(e.command.precondition&&RC._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;RC._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(I1.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}}let l7=P_=class extends RC{constructor(e,t,i,r,s,o){super(e,i),this._hiddenStates=t,this._commandService=r,this._keybindingService=s,this._contextKeyService=o,this.refresh()}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[r,s]=i;let o;for(const a of s)if(this._contextKeyService.contextMatchesRules(a.when)){const l=bC(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=xst(this._id,l?a.command:a,this._hiddenStates);if(l){const u=Kge(this._commandService,this._keybindingService,a.command.id,a.when);(o??(o=[])).push(new Ld(a.command,a.alt,e,c,u,this._contextKeyService,this._commandService))}else{const u=new P_(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),d=Cs.join(...u.map(h=>h[1]));d.length>0&&(o??(o=[])).push(new _C(a,c,d))}}o&&o.length>0&&t.push([r,o])}return t}_sort(e){return e.sort(P_._compareMenuItems)}static _compareMenuItems(e,t){const i=e.group,r=t.group;if(i!==r){if(i){if(!r)return-1}else return 1;if(i==="navigation")return-1;if(r==="navigation")return 1;const a=i.localeCompare(r);if(a!==0)return a}const s=e.order||0,o=t.order||0;return s<o?-1:s>o?1:P_._compareTitles(bC(e)?e.command.title:e.title,bC(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,r=typeof t=="string"?t:t.original;return i.localeCompare(r)}};l7=P_=SM([fu(3,ga),fu(4,Wr),fu(5,In)],l7);let FN=class{constructor(e,t,i,r,s,o){this._disposables=new dt,this._menuInfo=new l7(e,t,i.emitEventsForSubmenuChanges,r,s,o);const a=new bs(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(a),this._disposables.add(I1.onDidChangeMenu(d=>{for(const h of this._menuInfo.allMenuIds)if(d.has(h)){a.schedule();break}}));const l=this._disposables.add(new dt),c=d=>{let h=!1,f=!1,g=!1;for(const p of d)if(h=h||p.isStructuralChange,f=f||p.isEnablementChange,g=g||p.isToggleChange,h&&f&&g)break;return{menu:this,isStructuralChange:h,isEnablementChange:f,isToggleChange:g}},u=()=>{l.add(o.onDidChangeContext(d=>{const h=d.affectsSome(this._menuInfo.structureContextKeys),f=d.affectsSome(this._menuInfo.preconditionContextKeys),g=d.affectsSome(this._menuInfo.toggledContextKeys);(h||f||g)&&this._onDidChange.fire({menu:this,isStructuralChange:h,isEnablementChange:f,isToggleChange:g})})),l.add(t.onDidChange(d=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new Wue({onWillAddFirstListener:u,onDidRemoveLastListener:l.clear.bind(l),delay:i.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};FN=SM([fu(3,ga),fu(4,Wr),fu(5,In)],FN);function xst(n,e,t){const i=uKe(e)?e.submenu.id:e.id,r=typeof e.title=="string"?e.title:e.title.value,s=I0({id:`hide/${n.id}/${i}`,label:S("hide.label","Hide '{0}'",r),run(){t.updateHidden(n,i,!0)}}),o=I0({id:`toggle/${n.id}/${i}`,label:r,get checked(){return!t.isHidden(n,i)},run(){t.updateHidden(n,i,!!this.checked)}});return{hide:s,toggle:o,get isHidden(){return!o.checked}}}function Kge(n,e,t,i=void 0,r=!0){return I0({id:`configureKeybinding/${t}`,label:S("configure keybinding","Configure Keybinding"),enabled:r,run(){const o=!!!e.lookupKeybinding(t)&&i?i.serialize():void 0;n.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(o?` +when:${o}`:""))}})}var kst=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},pQ=function(n,e){return function(t,i){e(t,i,n)}},c7;const mQ="application/vnd.code.resources";var Tp;let u7=(Tp=class extends ke{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(Wd||lde)&&this.installWebKitWriteTextWorkaround(),this._register(Be.runAndSubscribe(OD,({window:i,disposables:r})=>{r.add(_e(i.document,"copy",()=>this.clearResourcesState()))},{window:zn,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new gde;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,L_().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async i=>{(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)})};this._register(Be.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:i})=>{i.add(_e(t,"click",e)),i.add(_e(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await L_().navigator.clipboard.writeText(e)}catch(i){console.error(i)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=RH(),i=t.activeElement,r=t.body.appendChild(xt("textarea",{"aria-hidden":!0}));r.style.height="1px",r.style.width="1px",r.style.position="absolute",r.value=e,r.focus(),r.select(),t.execCommand("copy"),kr(i)&&i.focus(),r.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await L_().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async readResources(){try{const t=await L_().navigator.clipboard.read();for(const i of t)if(i.types.includes(`web ${mQ}`)){const r=await i.getType(`web ${mQ}`);return JSON.parse(await r.text()).map(o=>Ut.from(o))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return xde(e.substring(0,c7.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},c7=Tp,Tp.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,Tp);u7=c7=kst([pQ(0,jf),pQ(1,kc)],u7);const rz=cn("clipboardService");var Est=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Lst=function(n,e){return function(t,i){e(t,i,n)}};const AC="data-keybinding-context";class sz{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}}const $T=class $T extends sz{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};$T.INSTANCE=new $T;let U1=$T;const JC=class JC extends sz{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=SC.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(r=>{if(r.source===7){const s=Array.from(this._values,([o])=>o);this._values.clear(),i.fire(new bQ(s))}else{const s=[];for(const o of r.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(s.push(...Sn.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}i.fire(new bQ(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(JC._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(JC._keyPrefix.length),i=this._configurationService.getValue(t);let r;switch(typeof i){case"number":case"boolean":case"string":r=i;break;default:Array.isArray(i)?r=JSON.stringify(i):r=i}return this._values.set(e,r),r}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};JC._keyPrefix="config.";let d7=JC;class Nst{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class vQ{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class bQ{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class Tst{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function Ist(n,e){return n.allKeysContainedIn(new Set(Object.keys(e)))}class qge extends ke{constructor(e){super(),this._onDidChangeContext=this._register(new Gy({merge:t=>new Tst(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Nst(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Dst(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new vQ(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new vQ(e))}getContext(e){return this._isDisposed?U1.INSTANCE:this.getContextValuesContainer(Mst(e))}dispose(){super.dispose(),this._isDisposed=!0}}let h7=class extends qge{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new d7(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?U1.INSTANCE:this._contexts.get(e)||U1.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new sz(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};h7=Est([Lst(0,Ti)],h7);class Dst extends qge{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new Vd),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(AC)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(AC,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;Ist(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(AC),super.dispose())}getContextValuesContainer(e){return this._isDisposed?U1.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function Mst(n){for(;n;){if(n.hasAttribute(AC)){const e=n.getAttribute(AC);return e?parseInt(e,10):NaN}n=n.parentElement}return 0}function Rst(n,e,t){n.get(In).createKey(String(e),Ast(t))}function Ast(n){return Nue(n,e=>{if(typeof e=="object"&&e.$mid===1)return Ut.revive(e).toString();if(e instanceof Ut)return e.toString()})}po.registerCommand("_setContext",Rst);po.registerCommand({id:"getContextKeyInfo",handler(){return[...ht.all()].sort((n,e)=>n.key.localeCompare(e.key))},metadata:{description:S("getContextKeyInfo","A command that returns information about context keys"),args:[]}});po.registerCommand("_generateContextKeyInfo",function(){const n=[],e=new Set;for(const t of ht.all())e.has(t.key)||(e.add(t.key),n.push(t));n.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(n,void 0,2))});let Ost=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class _Q{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);i.outgoing.set(r.key,r),r.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new Ost(t,e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),r=this._findCycle(t,i);if(r)return r}}_findCycle(e,t){for(const[i,r]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const s=this._findCycle(r,t);if(s)return s;t.delete(i)}}}class Sb{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}const Pst=!1;class CQ extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class BN{constructor(e=new Sb,t=!1,i,r=Pst){this._services=e,this._strict=t,this._parent=i,this._enableTracing=r,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(Fn,this),this._globalGraph=r?(i==null?void 0:i._globalGraph)??new _Q(s=>s):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,zr(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)Vue(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const i=this,r=new class extends BN{dispose(){i._children.delete(r),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(r),t==null||t.add(r),r}invokeFunction(e,...t){this._throwIfDisposed();const i=OC.traceInvocation(this._enableTracing,e);let r=!1;try{return e({get:o=>{if(r)throw hH("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{r=!0,i.stop()}}createInstance(e,...t){this._throwIfDisposed();let i,r;return e instanceof Xc?(i=OC.traceCreation(this._enableTracing,e.ctor),r=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=OC.traceCreation(this._enableTracing,e),r=this._createInstance(e,t,i)),i.stop(),r}_createInstance(e,t=[],i){const r=ic.getServiceDependencies(e).sort((a,l)=>a.index-l.index),s=[];for(const a of r){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),s.push(l)}const o=r.length>0?r[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return Reflect.construct(e,t.concat(s))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof Xc)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof Xc?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){var l;const r=new _Q(c=>c.id.toString());let s=0;const o=[{id:e,desc:t,_trace:i}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),r.lookupOrInsertNode(c),s++>1e3)throw new CQ(r);for(const u of ic.getServiceDependencies(c.desc.ctor)){const d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),(l=this._globalGraph)==null||l.insertEdge(String(c.id),String(u.id)),d instanceof Xc){const h={id:u.id,desc:d,_trace:c._trace.branch(u.id,!0)};r.insertEdge(c,h),o.push(h)}}}}for(;;){const c=r.roots();if(c.length===0){if(!r.isEmpty())throw new CQ(r);break}for(const{data:u}of c){if(this._getServiceInstanceOrDescriptor(u.id)instanceof Xc){const h=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,h)}r.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],r,s){if(this._services.get(e)instanceof Xc)return this._createServiceInstance(e,t,i,r,s,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,r,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],r,s,o){if(r){const a=new BN(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new VUe(()=>{const u=a._createInstance(t,i,s);for(const[d,h]of l){const f=u[d];if(typeof f=="function")for(const g of h)g.disposable=f.apply(u,g.listener)}return l.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,d){if(!c.isInitialized&&typeof d=="string"&&(d.startsWith("onDid")||d.startsWith("onWill"))){let g=l.get(d);return g||(g=new Eo,l.set(d,g)),(v,b,_)=>{if(c.isInitialized)return c.value[d](v,b,_);{const y={listener:[v,b,_],disposable:void 0},C=g.push(y);return Pt(()=>{var x;C(),(x=y.disposable)==null||x.dispose()})}}}if(d in u)return u[d];const h=c.value;let f=h[d];return typeof f!="function"||(f=f.bind(h),u[d]=f),f},set(u,d,h){return c.value[d]=h,!0},getPrototypeOf(u){return t.prototype}})}else{const a=this._createInstance(t,i,s);return o.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const Wo=class Wo{static traceInvocation(e,t){return e?new Wo(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Wo._None}static traceCreation(e,t){return e?new Wo(1,t.name):Wo._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new Wo(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;Wo._totals+=e;let t=!1;function i(s,o){const a=[],l=new Array(s+1).join("	");for(const[c,u,d]of o._dep)if(u&&d){t=!0,a.push(`${l}CREATES -> ${c}`);const h=i(s+1,d);h&&a.push(h)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const r=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Wo._totals.toFixed(2)}ms)`];(e>2||t)&&Wo.all.add(r.join(`
`))}};Wo.all=new Set,Wo._None=new class extends Wo{constructor(){super(0,null)}stop(){}branch(){return this}},Wo._totals=0;let OC=Wo;const Fst=new Set([Wt.inMemory,Wt.vscodeSourceControl,Wt.walkThrough,Wt.walkThroughSnippet,Wt.vscodeChatCodeBlock]);class Bst{constructor(){this._byResource=new ca,this._byOwner=new Map}set(e,t,i){let r=this._byResource.get(e);r||(r=new Map,this._byResource.set(e,r)),r.set(t,i);let s=this._byOwner.get(t);s||(s=new ca,this._byOwner.set(t,s)),s.set(e,i)}get(e,t){const i=this._byResource.get(e);return i==null?void 0:i.get(t)}delete(e,t){let i=!1,r=!1;const s=this._byResource.get(e);s&&(i=s.delete(t));const o=this._byOwner.get(t);if(o&&(r=o.delete(e)),i!==r)throw new Error("illegal state");return i&&r}values(e){var t,i;return typeof e=="string"?((t=this._byOwner.get(e))==null?void 0:t.values())??Sn.empty():Ut.isUri(e)?((i=this._byResource.get(e))==null?void 0:i.values())??Sn.empty():Sn.map(Sn.concat(...this._byOwner.values()),r=>r[1])}}class Hst{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new ca,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const r=this._resourceStats(t);this._add(r),this._data.set(t,r)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(Fst.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===ka.Error?t.errors+=1:i===ka.Warning?t.warnings+=1:i===ka.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Ch{constructor(){this._onMarkerChanged=new Wue({delay:0,merge:Ch._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new Bst,this._stats=new Hst(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(iWe(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const r=[];for(const s of i){const o=Ch._toMarker(e,t,s);o&&r.push(o)}this._data.set(t,e,r),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:r,severity:s,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:d,relatedInformation:h,tags:f}=i;if(o)return l=l>0?l:1,c=c>0?c:1,u=u>=l?u:l,d=d>0?d:c,{resource:t,owner:e,code:r,severity:s,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:d,relatedInformation:h,tags:f}}changeAll(e,t){const i=[],r=this._data.values(e);if(r)for(const s of r){const o=Sn.first(s);o&&(i.push(o.resource),this._data.delete(o.resource,e))}if(LD(t)){const s=new ca;for(const{resource:o,marker:a}of t){const l=Ch._toMarker(e,o,a);if(!l)continue;const c=s.get(o);c?c.push(l):(s.set(o,[l]),i.push(o))}for(const[o,a]of s)this._data.set(o,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:r,take:s}=e;if((!s||s<0)&&(s=-1),t&&i){const o=this._data.get(i,t);if(o){const a=[];for(const l of o)if(Ch._accept(l,r)){const c=a.push(l);if(s>0&&c===s)break}return a}else return[]}else if(!t&&!i){const o=[];for(const a of this._data.values())for(const l of a)if(Ch._accept(l,r)){const c=o.push(l);if(s>0&&c===s)return o}return o}else{const o=this._data.values(i??t),a=[];for(const l of o)for(const c of l)if(Ch._accept(c,r)){const u=a.push(c);if(s>0&&u===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new ca;for(const i of e)for(const r of i)t.set(r,!0);return Array.from(t.keys())}}class Vst extends ke{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=xr.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=xr.createEmptyModel(this.logService);const e=Lr.as(xm.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const r of e){const s=i[r],o=t[r];s!==void 0?this._configurationModel.setValue(r,s):o?this._configurationModel.setValue(r,o.default):this._configurationModel.removeValue(r)}}}const xM=cn("accessibilitySignalService"),rn=class rn{static register(e){return new rn(e.fileName)}constructor(e){this.fileName=e}};rn.error=rn.register({fileName:"error.mp3"}),rn.warning=rn.register({fileName:"warning.mp3"}),rn.success=rn.register({fileName:"success.mp3"}),rn.foldedArea=rn.register({fileName:"foldedAreas.mp3"}),rn.break=rn.register({fileName:"break.mp3"}),rn.quickFixes=rn.register({fileName:"quickFixes.mp3"}),rn.taskCompleted=rn.register({fileName:"taskCompleted.mp3"}),rn.taskFailed=rn.register({fileName:"taskFailed.mp3"}),rn.terminalBell=rn.register({fileName:"terminalBell.mp3"}),rn.diffLineInserted=rn.register({fileName:"diffLineInserted.mp3"}),rn.diffLineDeleted=rn.register({fileName:"diffLineDeleted.mp3"}),rn.diffLineModified=rn.register({fileName:"diffLineModified.mp3"}),rn.chatRequestSent=rn.register({fileName:"chatRequestSent.mp3"}),rn.chatResponseReceived1=rn.register({fileName:"chatResponseReceived1.mp3"}),rn.chatResponseReceived2=rn.register({fileName:"chatResponseReceived2.mp3"}),rn.chatResponseReceived3=rn.register({fileName:"chatResponseReceived3.mp3"}),rn.chatResponseReceived4=rn.register({fileName:"chatResponseReceived4.mp3"}),rn.clear=rn.register({fileName:"clear.mp3"}),rn.save=rn.register({fileName:"save.mp3"}),rn.format=rn.register({fileName:"format.mp3"}),rn.voiceRecordingStarted=rn.register({fileName:"voiceRecordingStarted.mp3"}),rn.voiceRecordingStopped=rn.register({fileName:"voiceRecordingStopped.mp3"}),rn.progress=rn.register({fileName:"progress.mp3"});let ai=rn;class zst{constructor(e){this.randomOneOf=e}}const Ft=class Ft{constructor(e,t,i,r,s,o){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=r,this.legacyAnnouncementSettingsKey=s,this.announcementMessage=o}static register(e){const t=new zst("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new Ft(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return Ft._signals.add(i),i}};Ft._signals=new Set,Ft.errorAtPosition=Ft.register({name:S("accessibilitySignals.positionHasError.name","Error at Position"),sound:ai.error,announcementMessage:S("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),Ft.warningAtPosition=Ft.register({name:S("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:ai.warning,announcementMessage:S("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),Ft.errorOnLine=Ft.register({name:S("accessibilitySignals.lineHasError.name","Error on Line"),sound:ai.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:S("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),Ft.warningOnLine=Ft.register({name:S("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:ai.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:S("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),Ft.foldedArea=Ft.register({name:S("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:ai.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:S("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),Ft.break=Ft.register({name:S("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:ai.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:S("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),Ft.inlineSuggestion=Ft.register({name:S("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:ai.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),Ft.terminalQuickFix=Ft.register({name:S("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:ai.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:S("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),Ft.onDebugBreak=Ft.register({name:S("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:ai.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:S("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),Ft.noInlayHints=Ft.register({name:S("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:ai.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:S("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),Ft.taskCompleted=Ft.register({name:S("accessibilitySignals.taskCompleted","Task Completed"),sound:ai.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:S("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),Ft.taskFailed=Ft.register({name:S("accessibilitySignals.taskFailed","Task Failed"),sound:ai.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:S("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),Ft.terminalCommandFailed=Ft.register({name:S("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:ai.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:S("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),Ft.terminalCommandSucceeded=Ft.register({name:S("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:ai.success,announcementMessage:S("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),Ft.terminalBell=Ft.register({name:S("accessibilitySignals.terminalBell","Terminal Bell"),sound:ai.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:S("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),Ft.notebookCellCompleted=Ft.register({name:S("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:ai.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:S("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),Ft.notebookCellFailed=Ft.register({name:S("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:ai.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:S("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),Ft.diffLineInserted=Ft.register({name:S("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:ai.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),Ft.diffLineDeleted=Ft.register({name:S("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:ai.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),Ft.diffLineModified=Ft.register({name:S("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:ai.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),Ft.chatRequestSent=Ft.register({name:S("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:ai.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:S("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),Ft.chatResponseReceived=Ft.register({name:S("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[ai.chatResponseReceived1,ai.chatResponseReceived2,ai.chatResponseReceived3,ai.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),Ft.progress=Ft.register({name:S("accessibilitySignals.progress","Progress"),sound:ai.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:S("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}),Ft.clear=Ft.register({name:S("accessibilitySignals.clear","Clear"),sound:ai.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:S("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),Ft.save=Ft.register({name:S("accessibilitySignals.save","Save"),sound:ai.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:S("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),Ft.format=Ft.register({name:S("accessibilitySignals.format","Format"),sound:ai.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:S("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}),Ft.voiceRecordingStarted=Ft.register({name:S("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:ai.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),Ft.voiceRecordingStopped=Ft.register({name:S("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:ai.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});let Qc=Ft;class Wst extends ke{constructor(e,t=[]){super(),this.logger=new hKe([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const $st=[];function Ust(){return $st.slice(0)}class jst{getParseResult(e){}}var Tu=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Oi=function(n,e){return function(t,i){e(t,i,n)}};class Kst{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new ae}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let f7=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new S$e(new Kst(t))):Promise.reject(new Error("Model not found"))}};f7=Tu([Oi(0,$s)],f7);const UT=class UT{show(){return UT.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};UT.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let g7=UT;class qst{withProgress(e,t,i){return t({report:()=>{}})}}class Gst{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class Yst{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+`

`+t),zn.confirm(i)}async prompt(e){var r;let t;if(this.doConfirm(e.message,e.detail)){const s=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&s.push(e.cancelButton),t=await((r=s[0])==null?void 0:r.run({checkboxChecked:!1}))}return{result:t}}async error(e,t){await this.prompt({type:Ki.Error,message:e,detail:t})}}const ey=class ey{info(e){return this.notify({severity:Ki.Info,message:e})}warn(e){return this.notify({severity:Ki.Warning,message:e})}error(e){return this.notify({severity:Ki.Error,message:e})}notify(e){switch(e.severity){case Ki.Error:console.error(e.message);break;case Ki.Warning:console.warn(e.message);break;default:console.log(e.message);break}return ey.NO_OP}prompt(e,t,i,r){return ey.NO_OP}status(e,t){return ke.None}};ey.NO_OP=new OGe;let p7=ey,m7=class{constructor(e){this._onWillExecuteCommand=new ae,this._onDidExecuteCommand=new ae,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=po.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const r=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(r)}catch(r){return Promise.reject(r)}}};m7=Tu([Oi(0,Fn)],m7);let j1=class extends JQe{constructor(e,t,i,r,s,o){super(e,t,i,r,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=f=>{const g=new dt;g.add(_e(f,We.KEY_DOWN,p=>{const v=new ii(p);this._dispatch(v,v.target)&&(v.preventDefault(),v.stopPropagation())})),g.add(_e(f,We.KEY_UP,p=>{const v=new ii(p);this._singleModifierDispatch(v,v.target)&&v.preventDefault()})),this._domNodeListeners.push(new Zst(f,g))},l=f=>{for(let g=0;g<this._domNodeListeners.length;g++){const p=this._domNodeListeners[g];p.domNode===f&&(this._domNodeListeners.splice(g,1),p.dispose())}},c=f=>{f.getOption(61)||a(f.getContainerDomNode())},u=f=>{f.getOption(61)||l(f.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove(u)),o.listCodeEditors().forEach(c);const d=f=>{a(f.getContainerDomNode())},h=f=>{l(f.getContainerDomNode())};this._register(o.onDiffEditorAdd(d)),this._register(o.onDiffEditorRemove(h)),o.listDiffEditors().forEach(d)}addDynamicKeybinding(e,t,i,r){return du(po.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:r}]))}addDynamicKeybindings(e){const t=e.map(i=>({keybinding:K5(i.keybinding,al),command:i.command??null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),Pt(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(gS.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new wC(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return zn.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let r=0;for(const s of e){const o=s.when||void 0,a=s.keybinding;if(!a)i[r++]=new GZ(void 0,s.command,s.commandArgs,o,t,null,!1);else{const l=dw.resolveKeybinding(a,al);for(const c of l)i[r++]=new GZ(c,s.command,s.commandArgs,o,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new Xp(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new dw([t],al)}};j1=Tu([Oi(0,In),Oi(1,ga),Oi(2,wm),Oi(3,Ec),Oi(4,kc),Oi(5,or)],j1);class Zst extends ke{constructor(e,t){super(),this.domNode=e,this._register(t)}}function yQ(n){return n&&typeof n=="object"&&(!n.overrideIdentifier||typeof n.overrideIdentifier=="string")&&(!n.resource||n.resource instanceof Ut)}let HN=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new ae,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new Vst(e);this._configuration=new rM(t.reload(),xr.createEmptyModel(e),xr.createEmptyModel(e),xr.createEmptyModel(e),xr.createEmptyModel(e),xr.createEmptyModel(e),new ca,xr.createEmptyModel(e),new ca,e),t.dispose()}getValue(e,t){const i=typeof e=="string"?e:void 0,r=yQ(e)?e:yQ(t)?t:{};return this._configuration.getValue(i,r,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const r of e){const[s,o]=r;this.getValue(s)!==o&&(this._configuration.updateValue(s,o),i.push(s))}if(i.length>0){const r=new GQe({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);r.source=8,this._onDidChangeConfiguration.fire(r)}return Promise.resolve()}updateValue(e,t,i,r){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};HN=Tu([Oi(0,kc)],HN);let v7=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new ae,this.configurationService.onDidChangeConfiguration(r=>{this._onDidChangeConfiguration.fire({affectedKeys:r.affectedKeys,affectsConfiguration:(s,o)=>r.affectsConfiguration(o)})})}getValue(e,t,i){const r=de.isIPosition(t)?t:null,s=r?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0,o=e?this.getLanguage(e,r):void 0;return typeof s>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(s,{resource:e,overrideIdentifier:o})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};v7=Tu([Oi(0,Ti),Oi(1,$s),Oi(2,br)],v7);let b7=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:co||hn?`
`:`\r
`}};b7=Tu([Oi(0,Ti)],b7);class Xst{publicLog2(){}}const ty=class ty{constructor(){const e=Ut.from({scheme:ty.SCHEME,authority:"model",path:"/"});this.workspace={id:gJe,folders:[new hJe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===ty.SCHEME?this.workspace.folders[0]:null}};ty.SCHEME="inmemory";let _7=ty;function VN(n,e,t){if(!e||!(n instanceof HN))return;const i=[];Object.keys(e).forEach(r=>{WQe(r)&&i.push([`editor.${r}`,e[r]]),t&&$Qe(r)&&i.push([`diffEditor.${r}`,e[r]])}),i.length>0&&n.updateValues(i)}let C7=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const i=Array.isArray(e)?e:pV.convert(e),r=new Map;for(const a of i){if(!(a instanceof bp))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=r.get(l);c||(c=[],r.set(l,c)),c.push(jQe.replaceMove(te.lift(a.textEdit.range),a.textEdit.text))}let s=0,o=0;for(const[a,l]of r)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),o+=1,s+=l.length;return{ariaSummary:z5(a6.bulkEditServiceSummary,s,o),isApplied:s>0}}};C7=Tu([Oi(0,$s)],C7);class Qst{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return dV(e)}}let y7=class extends OQe{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const r=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();r&&(t=r.getContainerDomNode())}return super.showContextView(e,t,i)}};y7=Tu([Oi(0,jf),Oi(1,or)],y7);class Jst{constructor(){this._neverEmitter=new ae,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class eot extends h6{constructor(){super()}}class tot extends Wst{constructor(){super(new dKe)}}let w7=class extends w6{constructor(e,t,i,r,s,o){super(e,t,i,r,s,o),this.configure({blockMouse:!1})}};w7=Tu([Oi(0,wm),Oi(1,Ec),Oi(2,wS),Oi(3,Wr),Oi(4,ym),Oi(5,In)],w7);const S7={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let x7=class extends S8{constructor(e,t,i,r,s){super(S7,e,t,i,r,s)}};x7=Tu([Oi(0,$s),Oi(1,qH),Oi(2,kc),Oi(3,Eu),Oi(4,Yn)],x7);class not{async playSignal(e,t){}}yn(kc,tot,0);yn(Ti,HN,0);yn(qH,v7,0);yn(hhe,b7,0);yn(dJe,_7,0);yn(sJe,Qst,0);yn(wm,Xst,0);yn(vhe,Yst,0);yn(She,Gst,0);yn(Ec,p7,0);yn(Em,Ch,0);yn(br,eot,0);yn(Tl,wst,0);yn($s,P6,0);yn(qfe,L6,0);yn(In,h7,0);yn(oJe,qst,0);yn(vV,g7,0);yn(hM,Let,0);yn(NS,x7,0);yn(HQe,C7,0);yn(pJe,Jst,0);yn(PD,f7,0);yn(Lc,s7,0);yn(Nu,Rrt,0);yn(ga,m7,0);yn(Wr,j1,0);yn(pM,n7,0);yn(wS,y7,0);yn(SS,E6,0);yn(rz,u7,0);yn(Zd,w7,0);yn(ym,o7,0);yn(xM,not,0);yn(dge,jst,0);var yt;(function(n){const e=new Sb;for(const[l,c]of CY())e.set(l,c);const t=new BN(e,!0);e.set(Fn,t);function i(l){r||o({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof Xc?t.invokeFunction(u=>u.get(l)):c}n.get=i;let r=!1;const s=new ae;function o(l){if(r)return t;r=!0;for(const[u,d]of CY())e.get(u)||e.set(u,d);for(const u in l)if(l.hasOwnProperty(u)){const d=cn(u);e.get(d)instanceof Xc&&e.set(d,l[u])}const c=Ust();for(const u of c)try{t.createInstance(u)}catch(d){$n(d)}return s.fire(),t}n.initialize=o;function a(l){if(r)return l();const c=new dt,u=c.add(s.event(()=>{u.dispose(),c.add(l())}));return c}n.withServices=a})(yt||(yt={}));function iot(n,e){return new rot(n,e)}class rot extends XL{constructor(e,t){const i={amdModuleId:S7.amdModuleId,esmModuleLocation:S7.esmModuleLocation,label:t.label};super(i,t.keepIdleModels||!1,e),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?OP(this._foreignModuleHost):[];return e.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const r=(a,l)=>e.$fmr(a,l),s=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},o={};for(const a of i)o[a]=s(a,r);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}const oz={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};class cl{constructor(e,t,i,r){this.startColumn=e,this.endColumn=t,this.className=i,this.type=r,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,r=t.length;if(i!==r)return!1;for(let s=0;s<i;s++)if(!cl._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const r=t+1,s=i+1,o=i-t,a=[];let l=0;for(const c of e)c.endColumn<=r||c.startColumn>=s||(a[l++]=new cl(Math.max(1,c.startColumn-r+1),Math.min(o+1,c.endColumn-r+1),c.className,c.type));return a}static filter(e,t,i,r){if(e.length===0)return[];const s=[];let o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.range;if(u.endLineNumber<t||u.startLineNumber>t||u.isEmpty()&&(c.type===0||c.type===3))continue;const d=u.startLineNumber===t?u.startColumn:i,h=u.endLineNumber===t?u.endColumn:r;s[o++]=new cl(d,h,c.inlineClassName,c.type)}return s}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=cl._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class wQ{constructor(e,t,i,r){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=r}}class zN{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,r=e.length;i<r;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let r=0;for(;r+1<this.count&&this.stopOffsets[r]===this.stopOffsets[r+1];)r++;i.push(new wQ(t,this.stopOffsets[r],this.classNames.join(" "),zN._metadata(this.metadata))),t=this.stopOffsets[r]+1,this.stopOffsets.splice(0,r+1),this.classNames.splice(0,r+1),this.metadata.splice(0,r+1),this.count-=r+1}return this.count>0&&t<e&&(i.push(new wQ(t,e-1,this.classNames.join(" "),zN._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let r=0;r<this.count;r++)if(this.stopOffsets[r]>=e){this.stopOffsets.splice(r,0,e),this.classNames.splice(r,0,t),this.metadata.splice(r,0,i);break}this.count++}}class sot{static normalize(e,t){if(t.length===0)return[];const i=[],r=new zN;let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,u=l.endColumn;const d=l.className,h=l.type===1?2:l.type===2?4:0;if(c>1){const p=e.charCodeAt(c-2);gr(p)&&c--}if(u>1){const p=e.charCodeAt(u-2);gr(p)&&u--}const f=c-1,g=u-2;s=r.consumeLowerThan(f,s,i),r.count===0&&(s=f),r.insert(g,d,h)}return r.consumeLowerThan(1073741824,s,i),i}}class pr{constructor(e,t,i,r){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=r,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class Gge{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class xb{constructor(e,t,i,r,s,o,a,l,c,u,d,h,f,g,p,v,b,_,y){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=r,this.isBasicASCII=s,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(cl.compare),this.tabSize=u,this.startVisibleColumn=d,this.spaceWidth=h,this.stopRenderingLineAfter=p,this.renderWhitespace=v==="all"?4:v==="boundary"?1:v==="selection"?2:v==="trailing"?3:0,this.renderControlCharacters=b,this.fontLigatures=_,this.selectionsOnLine=y&&y.sort((x,k)=>x.startOffset<k.startOffset?-1:1);const C=Math.abs(g-h),w=Math.abs(f-h);C<w?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&cl.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class Yge{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Jc{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,r){const s=(t<<16|i<<0)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=r}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=Jc.getPartIndex(t),r=Jc.getCharIndex(t);return new Yge(i,r)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const r=(e<<16|i<<0)>>>0;let s=0,o=this.length-1;for(;s+1<o;){const p=s+o>>>1,v=this._data[p];if(v===r)return p;v>r?o=p:s=p}if(s===o)return s;const a=this._data[s],l=this._data[o];if(a===r)return s;if(l===r)return o;const c=Jc.getPartIndex(a),u=Jc.getCharIndex(a),d=Jc.getPartIndex(l);let h;c!==d?h=t:h=Jc.getCharIndex(l);const f=i-u,g=h-i;return f<=g?s:o}}class k7{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function az(n,e){if(n.lineContent.length===0){if(n.lineDecorations.length>0){e.appendString("<span>");let t=0,i=0,r=0;for(const o of n.lineDecorations)(o.type===1||o.type===2)&&(e.appendString('<span class="'),e.appendString(o.className),e.appendString('"></span>'),o.type===1&&(r|=1,t++),o.type===2&&(r|=2,i++));e.appendString("</span>");const s=new Jc(1,t+i);return s.setColumnInfo(1,t,0,0),new k7(s,!1,r)}return e.appendString("<span><span></span></span>"),new k7(new Jc(0,0),!1,0)}return got(lot(n),e)}class oot{constructor(e,t,i,r){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=r}}function kM(n){const e=new qD(1e4),t=az(n,e);return new oot(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class aot{constructor(e,t,i,r,s,o,a,l,c,u,d,h,f,g,p,v){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=r,this.isOverflowing=s,this.overflowingCharCount=o,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=u,this.startVisibleColumn=d,this.containsRTL=h,this.spaceWidth=f,this.renderSpaceCharCode=g,this.renderWhitespace=p,this.renderControlCharacters=v}}function lot(n){const e=n.lineContent;let t,i,r;n.stopRenderingLineAfter!==-1&&n.stopRenderingLineAfter<e.length?(t=!0,i=e.length-n.stopRenderingLineAfter,r=n.stopRenderingLineAfter):(t=!1,i=0,r=e.length);let s=cot(e,n.containsRTL,n.lineTokens,n.fauxIndentLength,r);n.renderControlCharacters&&!n.isBasicASCII&&(s=dot(e,s)),(n.renderWhitespace===4||n.renderWhitespace===1||n.renderWhitespace===2&&n.selectionsOnLine||n.renderWhitespace===3&&!n.continuesWithWrappedLine)&&(s=hot(n,e,r,s));let o=0;if(n.lineDecorations.length>0){for(let a=0,l=n.lineDecorations.length;a<l;a++){const c=n.lineDecorations[a];c.type===3||c.type===1?o|=1:c.type===2&&(o|=2)}s=fot(e,r,s,n.lineDecorations)}return n.containsRTL||(s=uot(e,s,!n.isBasicASCII||n.fontLigatures)),new aot(n.useMonospaceOptimizations,n.canUseHalfwidthRightwardsArrow,e,r,t,i,s,o,n.fauxIndentLength,n.tabSize,n.startVisibleColumn,n.containsRTL,n.spaceWidth,n.renderSpaceCharCode,n.renderWhitespace,n.renderControlCharacters)}function cot(n,e,t,i,r){const s=[];let o=0;i>0&&(s[o++]=new pr(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const u=t.getEndOffset(l);if(u<=i)continue;const d=t.getClassName(l);if(u>=r){const f=e?Zy(n.substring(a,r)):!1;s[o++]=new pr(r,d,0,f);break}const h=e?Zy(n.substring(a,u)):!1;s[o++]=new pr(u,d,0,h),a=u}return s}function uot(n,e,t){let i=0;const r=[];let s=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(i+50<c){const u=l.type,d=l.metadata,h=l.containsRTL;let f=-1,g=i;for(let p=i;p<c;p++)n.charCodeAt(p)===32&&(f=p),f!==-1&&p-g>=50&&(r[s++]=new pr(f+1,u,d,h),g=f+1,f=-1);g!==c&&(r[s++]=new pr(c,u,d,h))}else r[s++]=l;i=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex,u=c-i;if(u>50){const d=l.type,h=l.metadata,f=l.containsRTL,g=Math.ceil(u/50);for(let p=1;p<g;p++){const v=i+p*50;r[s++]=new pr(v,d,h,f)}r[s++]=new pr(c,d,h,f)}else r[s++]=l;i=c}return r}function Zge(n){return n<32?n!==9:n===127||n>=8234&&n<=8238||n>=8294&&n<=8297||n>=8206&&n<=8207||n===1564}function dot(n,e){const t=[];let i=new pr(0,"",0,!1),r=0;for(const s of e){const o=s.endIndex;for(;r<o;r++){const a=n.charCodeAt(r);Zge(a)&&(r>i.endIndex&&(i=new pr(r,s.type,s.metadata,s.containsRTL),t.push(i)),i=new pr(r+1,"mtkcontrol",s.metadata,!1),t.push(i))}r>i.endIndex&&(i=new pr(o,s.type,s.metadata,s.containsRTL),t.push(i))}return t}function hot(n,e,t,i){const r=n.continuesWithWrappedLine,s=n.fauxIndentLength,o=n.tabSize,a=n.startVisibleColumn,l=n.useMonospaceOptimizations,c=n.selectionsOnLine,u=n.renderWhitespace===1,d=n.renderWhitespace===3,h=n.renderSpaceWidth!==n.spaceWidth,f=[];let g=0,p=0,v=i[p].type,b=i[p].containsRTL,_=i[p].endIndex;const y=i.length;let C=!1,w=To(e),x;w===-1?(C=!0,w=t,x=t):x=mm(e);let k=!1,E=0,L=c&&c[E],M=a%o;for(let O=s;O<t;O++){const A=e.charCodeAt(O);L&&O>=L.endOffset&&(E++,L=c&&c[E]);let R;if(O<w||O>x)R=!0;else if(A===9)R=!0;else if(A===32)if(u)if(k)R=!0;else{const V=O+1<t?e.charCodeAt(O+1):0;R=V===32||V===9}else R=!0;else R=!1;if(R&&c&&(R=!!L&&L.startOffset<=O&&L.endOffset>O),R&&d&&(R=C||O>x),R&&b&&O>=w&&O<=x&&(R=!1),k){if(!R||!l&&M>=o){if(h){const V=g>0?f[g-1].endIndex:s;for(let F=V+1;F<=O;F++)f[g++]=new pr(F,"mtkw",1,!1)}else f[g++]=new pr(O,"mtkw",1,!1);M=M%o}}else(O===_||R&&O>s)&&(f[g++]=new pr(O,v,0,b),M=M%o);for(A===9?M=o:Ef(A)?M+=2:M++,k=R;O===_&&(p++,p<y);)v=i[p].type,b=i[p].containsRTL,_=i[p].endIndex}let D=!1;if(k)if(r&&u){const O=t>0?e.charCodeAt(t-1):0,A=t>1?e.charCodeAt(t-2):0;O===32&&A!==32&&A!==9||(D=!0)}else D=!0;if(D)if(h){const O=g>0?f[g-1].endIndex:s;for(let A=O+1;A<=t;A++)f[g++]=new pr(A,"mtkw",1,!1)}else f[g++]=new pr(t,"mtkw",1,!1);else f[g++]=new pr(t,v,0,b);return f}function fot(n,e,t,i){i.sort(cl.compare);const r=sot.normalize(n,i),s=r.length;let o=0;const a=[];let l=0,c=0;for(let d=0,h=t.length;d<h;d++){const f=t[d],g=f.endIndex,p=f.type,v=f.metadata,b=f.containsRTL;for(;o<s&&r[o].startOffset<g;){const _=r[o];if(_.startOffset>c&&(c=_.startOffset,a[l++]=new pr(c,p,v,b)),_.endOffset+1<=g)c=_.endOffset+1,a[l++]=new pr(c,p+" "+_.className,v|_.metadata,b),o++;else{c=g,a[l++]=new pr(c,p+" "+_.className,v|_.metadata,b);break}}g>c&&(c=g,a[l++]=new pr(c,p,v,b))}const u=t[t.length-1].endIndex;if(o<s&&r[o].startOffset===u)for(;o<s&&r[o].startOffset===u;){const d=r[o];a[l++]=new pr(c,d.className,d.metadata,!1),o++}return a}function got(n,e){const t=n.fontIsMonospace,i=n.canUseHalfwidthRightwardsArrow,r=n.containsForeignElements,s=n.lineContent,o=n.len,a=n.isOverflowing,l=n.overflowingCharCount,c=n.parts,u=n.fauxIndentLength,d=n.tabSize,h=n.startVisibleColumn,f=n.containsRTL,g=n.spaceWidth,p=n.renderSpaceCharCode,v=n.renderWhitespace,b=n.renderControlCharacters,_=new Jc(o+1,c.length);let y=!1,C=0,w=h,x=0,k=0,E=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let L=0,M=c.length;L<M;L++){const D=c[L],O=D.endIndex,A=D.type,R=D.containsRTL,V=v!==0&&D.isWhitespace(),F=V&&!t&&(A==="mtkw"||!r),T=C===O&&D.isPseudoAfter();if(x=0,e.appendString("<span "),R&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(F?"mtkz":A),e.appendASCIICharCode(34),V){let N=0;{let B=C,$=w;for(;B<O;B++){const Y=(s.charCodeAt(B)===9?d-$%d:1)|0;N+=Y,B>=u&&($+=Y)}}for(F&&(e.appendString(' style="width:'),e.appendString(String(g*N)),e.appendString('px"')),e.appendASCIICharCode(62);C<O;C++){_.setColumnInfo(C+1,L-E,x,k),E=0;const B=s.charCodeAt(C);let $,j;if(B===9){$=d-w%d|0,j=$,!i||j>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let Y=2;Y<=j;Y++)e.appendCharCode(160)}else $=2,j=1,e.appendCharCode(p),e.appendCharCode(8204);x+=$,k+=j,C>=u&&(w+=j)}}else for(e.appendASCIICharCode(62);C<O;C++){_.setColumnInfo(C+1,L-E,x,k),E=0;const N=s.charCodeAt(C);let B=1,$=1;switch(N){case 9:B=d-w%d,$=B;for(let j=1;j<=B;j++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:b?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:Ef(N)&&$++,b&&N<32?e.appendCharCode(9216+N):b&&N===127?e.appendCharCode(9249):b&&Zge(N)?(e.appendString("[U+"),e.appendString(pot(N)),e.appendString("]"),B=8,$=B):e.appendCharCode(N)}x+=B,k+=$,C>=u&&(w+=$)}T?E++:E=0,C>=o&&!y&&D.isPseudoAfter()&&(y=!0,_.setColumnInfo(C+1,L,x,k)),e.appendString("</span>")}return y||_.setColumnInfo(o+1,c.length-1,x,k),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(S("showMore","Show more ({0})",mot(l))),e.appendString("</span>")),e.appendString("</span>"),new k7(_,f,r)}function pot(n){return n.toString(16).toUpperCase().padStart(4,"0")}function mot(n){return n<1024?S("overflow.chars","{0} chars",n):n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/1024/1024).toFixed(1)} MB`}class SQ{constructor(e,t,i,r){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=r|0}}class vot{constructor(e,t){this.tabSize=e,this.data=t}}class lz{constructor(e,t,i,r,s,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=r,this.startVisibleColumn=s,this.tokens=o,this.inlineDecorations=a}}class fa{constructor(e,t,i,r,s,o,a,l,c,u){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=r,this.isBasicASCII=fa.isBasicASCII(i,o),this.containsRTL=fa.containsRTL(i,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=u}static isBasicASCII(e,t){return t?SH(e):!0}static containsRTL(e,t,i){return!t&&i?Zy(e):!1}}class PC{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class bot{constructor(e,t,i,r){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=r}toInlineDecoration(e){return new PC(new te(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class Xge{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class xw{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&rr(e.data,t.data)}static equalsArr(e,t){return rr(e,t,xw.equals)}}function _ot(n){return Array.isArray(n)}function Cot(n){return!_ot(n)}function Qge(n){return typeof n=="string"}function xQ(n){return!Qge(n)}function Tg(n){return!n}function Id(n,e){return n.ignoreCase&&e?e.toLowerCase():e}function kQ(n){return n.replace(/[&<>'"_]/g,"-")}function yot(n,e){console.log(`${n.languageId}: ${e}`)}function ni(n,e){return new Error(`${n.languageId}: ${e}`)}function Mh(n,e,t,i,r){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(s,function(a,l,c,u,d,h,f,g,p){return Tg(c)?Tg(u)?!Tg(d)&&d<i.length?Id(n,i[d]):!Tg(f)&&n&&typeof n[f]=="string"?n[f]:(o===null&&(o=r.split("."),o.unshift(r)),!Tg(h)&&h<o.length?Id(n,o[h]):""):Id(n,t):"$"})}function wot(n,e,t){const i=/\$[sS](\d\d?)/g;let r=null;return e.replace(i,function(s,o){return r===null&&(r=t.split("."),r.unshift(t)),!Tg(o)&&o<r.length?Id(n,r[o]):""})}function Sk(n,e){let t=e;for(;t&&t.length>0;){const i=n.tokenizer[t];if(i)return i;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return null}function Sot(n,e){let t=e;for(;t&&t.length>0;){if(n.stateNames[t])return!0;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return!1}var xot=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},kot=function(n,e){return function(t,i){e(t,i,n)}},E7;const Jge=5,jT=class jT{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new K0(e,t);let i=K0.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let r=this._entries[i];return r||(r=new K0(e,t),this._entries[i]=r,r)}};jT._INSTANCE=new jT(Jge);let kw=jT;class K0{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return K0._equals(this,e)}push(e){return kw.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return kw.create(this.parent,e)}}class Gv{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new Gv(this.languageId,this.state)}}const KT=class KT{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new FC(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new FC(e,t);const i=K0.getStackElementId(e);let r=this._entries[i];return r||(r=new FC(e,null),this._entries[i]=r,r)}};KT._INSTANCE=new KT(Jge);let Rh=KT;class FC{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Rh.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof FC)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class Eot{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new Yy(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,r){const s=i.languageId,o=i.state,a=Hi.get(s);if(!a)return this.enterLanguage(s),this.emit(r,""),o;const l=a.tokenize(e,t,o);if(r!==0)for(const c of l.tokens)this._tokens.push(new Yy(c.offset+r,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new vH(this._tokens,e)}}class WN{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const r=e!==null?e.length:0,s=t.length,o=i!==null?i.length:0;if(r===0&&s===0&&o===0)return new Uint32Array(0);if(r===0&&s===0)return i;if(s===0&&o===0)return e;const a=new Uint32Array(r+s+o);e!==null&&a.set(e);for(let l=0;l<s;l++)a[r+l]=t[l];return i!==null&&a.set(i,r+s),a}nestedLanguageTokenize(e,t,i,r){const s=i.languageId,o=i.state,a=Hi.get(s);if(!a)return this.enterLanguage(s),this.emit(r,""),o;const l=a.tokenizeEncoded(e,t,o);if(r!==0)for(let c=0,u=l.tokens.length;c<u;c+=2)l.tokens[c]+=r;return this._prependTokens=WN._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new DD(WN._merge(this._prependTokens,this._tokens,null),e)}}let Ew=E7=class extends ke{constructor(e,t,i,r,s){super(),this._configurationService=s,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=r,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._register(Hi.onDidChange(a=>{if(o)return;let l=!1;for(let c=0,u=a.changedLanguages.length;c<u;c++){const d=a.changedLanguages[c];if(this._embeddedLanguages[d]){l=!0;break}}l&&(o=!0,Hi.handleChange([this._languageId]),o=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=Hi.get(t);if(i){if(i instanceof E7){const r=i.getLoadStatus();r.loaded===!1&&e.push(r.promise)}continue}Hi.isResolved(t)||e.push(Hi.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=kw.create(null,this._lexer.start);return Rh.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return pfe(this._languageId,i);const r=new Eot,s=this._tokenize(e,t,i,r);return r.finalize(s)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return gV(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const r=new WN(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,i,r);return r.finalize(s)}_tokenize(e,t,i,r){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,r):this._myTokenize(e,t,i,0,r)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=Sk(this._lexer,t.stack.state),!i))throw ni(this._lexer,"tokenizer state is not defined: "+t.stack.state);let r=-1,s=!1;for(const o of i){if(!xQ(o.action)||o.action.nextEmbedded!=="@pop")continue;s=!0;let a=o.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const u=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),u)}const c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(r===-1||c<r)&&(r=c)}if(!s)throw ni(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return r}_nestedTokenize(e,t,i,r,s){const o=this._findLeavingNestedLanguageOffset(e,i);if(o===-1){const c=s.nestedLanguageTokenize(e,t,i.embeddedLanguageData,r);return Rh.create(i.stack,new Gv(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,o);a.length>0&&s.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,r);const l=e.substring(o);return this._myTokenize(l,t,i,r+o,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,r,s){s.enterLanguage(this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,u=i.stack,d=0,h=null,f=!0;for(;f||d<l;){const g=d,p=u.depth,v=h?h.groups.length:0,b=u.state;let _=null,y=null,C=null,w=null,x=null;if(h){_=h.matches;const L=h.groups.shift();y=L.matched,C=L.action,w=h.rule,h.groups.length===0&&(h=null)}else{if(!f&&d>=l)break;f=!1;let L=this._lexer.tokenizer[b];if(!L&&(L=Sk(this._lexer,b),!L))throw ni(this._lexer,"tokenizer state is not defined: "+b);const M=a.substr(d);for(const D of L)if((d===0||!D.matchOnlyAtLineStart)&&(_=M.match(D.resolveRegex(b)),_)){y=_[0],C=D.action;break}}if(_||(_=[""],y=""),C||(d<l&&(_=[a.charAt(d)],y=_[0]),C=this._lexer.defaultToken),y===null)break;for(d+=y.length;Cot(C)&&xQ(C)&&C.test;)C=C.test(y,_,b,d===l);let k=null;if(typeof C=="string"||Array.isArray(C))k=C;else if(C.group)k=C.group;else if(C.token!==null&&C.token!==void 0){if(C.tokenSubst?k=Mh(this._lexer,C.token,y,_,b):k=C.token,C.nextEmbedded)if(C.nextEmbedded==="@pop"){if(!c)throw ni(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw ni(this._lexer,"cannot enter embedded language from within an embedded language");x=Mh(this._lexer,C.nextEmbedded,y,_,b)}if(C.goBack&&(d=Math.max(0,d-C.goBack)),C.switchTo&&typeof C.switchTo=="string"){let L=Mh(this._lexer,C.switchTo,y,_,b);if(L[0]==="@"&&(L=L.substr(1)),Sk(this._lexer,L))u=u.switchTo(L);else throw ni(this._lexer,"trying to switch to a state '"+L+"' that is undefined in rule: "+this._safeRuleName(w))}else{if(C.transform&&typeof C.transform=="function")throw ni(this._lexer,"action.transform not supported");if(C.next)if(C.next==="@push"){if(u.depth>=this._lexer.maxStack)throw ni(this._lexer,"maximum tokenizer stack size reached: ["+u.state+","+u.parent.state+",...]");u=u.push(b)}else if(C.next==="@pop"){if(u.depth<=1)throw ni(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(w));u=u.pop()}else if(C.next==="@popall")u=u.popall();else{let L=Mh(this._lexer,C.next,y,_,b);if(L[0]==="@"&&(L=L.substr(1)),Sk(this._lexer,L))u=u.push(L);else throw ni(this._lexer,"trying to set a next state '"+L+"' that is undefined in rule: "+this._safeRuleName(w))}}C.log&&typeof C.log=="string"&&yot(this._lexer,this._lexer.languageId+": "+Mh(this._lexer,C.log,y,_,b))}if(k===null)throw ni(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(w));const E=L=>{const M=this._languageService.getLanguageIdByLanguageName(L)||this._languageService.getLanguageIdByMimeType(L)||L,D=this._getNestedEmbeddedLanguageData(M);if(d<l){const O=e.substr(d);return this._nestedTokenize(O,t,Rh.create(u,D),r+d,s)}else return Rh.create(u,D)};if(Array.isArray(k)){if(h&&h.groups.length>0)throw ni(this._lexer,"groups cannot be nested: "+this._safeRuleName(w));if(_.length!==k.length+1)throw ni(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(w));let L=0;for(let M=1;M<_.length;M++)L+=_[M].length;if(L!==y.length)throw ni(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(w));h={rule:w,matches:_,groups:[]};for(let M=0;M<k.length;M++)h.groups[M]={action:k[M],matched:_[M+1]};d-=y.length;continue}else{if(k==="@rematch"&&(d-=y.length,y="",_=null,k="",x!==null))return E(x);if(y.length===0){if(l===0||p!==u.depth||b!==u.state||(h?h.groups.length:0)!==v)continue;throw ni(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(w))}let L=null;if(Qge(k)&&k.indexOf("@brackets")===0){const M=k.substr(9),D=Lot(this._lexer,y);if(!D)throw ni(this._lexer,"@brackets token returned but no bracket defined as: "+y);L=kQ(D.token+M)}else{const M=k===""?"":k+this._lexer.tokenPostfix;L=kQ(M)}g<o&&s.emit(g+r,L)}if(x!==null)return E(x)}return Rh.create(u,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new Gv(e,cw);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),Hi.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Hi.get(e);return t?new Gv(e,t.getInitialState()):new Gv(e,cw)}};Ew=E7=xot([kot(4,Ti)],Ew);function Lot(n,e){if(!e)return null;e=Id(n,e);const t=n.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}const DA=Sm("standaloneColorizer",{createHTML:n=>n});class cz{static colorizeElement(e,t,i,r){r=r||{};const s=r.theme||"vs",o=r.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(o)||o;e.setTheme(s);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+s;const c=u=>{const d=(DA==null?void 0:DA.createHTML(u))??u;i.innerHTML=d};return this.colorize(t,l||"",a,r).then(c,u=>console.error(u))}static async colorize(e,t,i,r){const s=e.languageIdCodec;let o=4;r&&typeof r.tabSize=="number"&&(o=r.tabSize),kH(t)&&(t=t.substr(1));const a=mb(t);if(!e.isRegisteredLanguageId(i))return EQ(a,o,s);const l=await Hi.getOrCreate(i);return l?Not(a,o,l,s):EQ(a,o,s)}static colorizeLine(e,t,i,r,s=4){const o=fa.isBasicASCII(e,t),a=fa.containsRTL(e,o,i);return kM(new xb(!1,!0,e,!1,o,a,0,r,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){const r=e.getLineContent(t);e.tokenization.forceTokenization(t);const o=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(r,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,i)}}function Not(n,e,t,i){return new Promise((r,s)=>{const o=()=>{const a=Tot(n,e,t,i);if(t instanceof Ew){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,s);return}}r(a)};o()})}function EQ(n,e,t){let i=[];const s=new Uint32Array(2);s[0]=0,s[1]=33587200;for(let o=0,a=n.length;o<a;o++){const l=n[o];s[0]=l.length;const c=new Er(s,l,t),u=fa.isBasicASCII(l,!0),d=fa.containsRTL(l,u,!0),h=kM(new xb(!1,!0,l,!1,u,d,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(h.html),i.push("<br/>")}return i.join("")}function Tot(n,e,t,i){let r=[],s=t.getInitialState();for(let o=0,a=n.length;o<a;o++){const l=n[o],c=t.tokenizeEncoded(l,!0,s);Er.convertToEndOffset(c.tokens,l.length);const u=new Er(c.tokens,l,i),d=fa.isBasicASCII(l,!0),h=fa.containsRTL(l,d,!0),f=kM(new xb(!1,!0,l,!1,d,h,0,u.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));r=r.concat(f.html),r.push("<br/>"),s=c.endState}return r.join("")}var Iot=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Dot=function(n,e){return function(t,i){e(t,i,n)}},X0;let $N=(X0=class{constructor(e,t){}dispose(){}},X0.ID="editor.contrib.markerDecorations",X0);$N=Iot([Dot(1,qfe)],$N);Vde($N.ID,$N,0);class epe extends ke{constructor(e,t){super(),this._onDidChange=this._register(new ae),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,r=!1;const s=()=>{if(i&&!r)try{i=!1,r=!0,t()}finally{Po(bt(this._referenceDomElement),()=>{r=!1,s()})}};this._resizeObserver=new ResizeObserver(o=>{o&&o[0]&&o[0].contentRect?e={width:o[0].contentRect.width,height:o[0].contentRect.height}:e=null,i=!0,s()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,r=0;t?(i=t.width,r=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,r=this._referenceDomElement.clientHeight),i=Math.max(5,i),r=Math.max(5,r),(this._width!==i||this._height!==r)&&(this._width=i,this._height=r,e&&this._onDidChange.fire())}}const c0=class c0{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=c0._read(e,this.key),i=s=>c0._read(e,s),r=(s,o)=>c0._write(e,s,o);this.migrate(t,i,r)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const r=t.substring(0,i);return this._read(e[r],t.substring(i+1))}return e[t]}static _write(e,t,i){const r=t.indexOf(".");if(r>=0){const s=t.substring(0,r);e[s]=e[s]||{},this._write(e[s],t.substring(r+1),i);return}e[t]=i}};c0.items=[];let Lw=c0;function Tc(n,e){Lw.items.push(new Lw(n,e))}function Ho(n,e){Tc(n,(t,i,r)=>{if(typeof t<"u"){for(const[s,o]of e)if(t===s){r(n,o);return}}})}function Mot(n){Lw.items.forEach(e=>e.apply(n))}Ho("wordWrap",[[!0,"on"],[!1,"off"]]);Ho("lineNumbers",[[!0,"on"],[!1,"off"]]);Ho("cursorBlinking",[["visible","solid"]]);Ho("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Ho("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Ho("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Ho("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Ho("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Ho("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Ho("autoIndent",[[!1,"advanced"],[!0,"full"]]);Ho("matchBrackets",[[!0,"always"],[!1,"never"]]);Ho("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Ho("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);Ho("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);Ho("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);Tc("autoClosingBrackets",(n,e,t)=>{n===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Tc("renderIndentGuides",(n,e,t)=>{typeof n<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!n))});Tc("highlightActiveIndentGuide",(n,e,t)=>{typeof n<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!n))});const Rot={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Tc("suggest.filteredTypes",(n,e,t)=>{if(n&&typeof n=="object"){for(const i of Object.entries(Rot))n[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});Tc("quickSuggestions",(n,e,t)=>{if(typeof n=="boolean"){const i=n?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});Tc("experimental.stickyScroll.enabled",(n,e,t)=>{typeof n=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",n))});Tc("experimental.stickyScroll.maxLineCount",(n,e,t)=>{typeof n=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",n))});Tc("codeActionsOnSave",(n,e,t)=>{if(n&&typeof n=="object"){let i=!1;const r={};for(const s of Object.entries(n))typeof s[1]=="boolean"?(i=!0,r[s[0]]=s[1]?"explicit":"never"):r[s[0]]=s[1];i&&t("codeActionsOnSave",r)}});Tc("codeActionWidget.includeNearbyQuickfixes",(n,e,t)=>{typeof n=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",n))});Tc("lightbulb.enabled",(n,e,t)=>{typeof n=="boolean"&&t("lightbulb.enabled",n?void 0:"off")});class Aot{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new ae,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const UN=new Aot;var Oot=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Pot=function(n,e){return function(t,i){e(t,i,n)}};let L7=class extends ke{constructor(e,t,i,r,s){super(),this._accessibilityService=s,this._onDidChange=this._register(new ae),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new ae),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Bue,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new epe(r,i.dimension)),this._targetWindowId=bt(r).vscodeWindowId,this._rawOptions=LQ(i),this._validatedOptions=Ah.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Th.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(UN.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(s8.onDidChange(()=>this._recomputeOptions())),this._register(zL.getInstance(bt(r)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=Ah.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=mp.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),r={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:UN.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Ah.computeOptions(this._validatedOptions,r)}_readEnvConfiguration(){return{extraEditorClassName:Bot(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:pp||Sl,pixelRatio:zL.getInstance(iY(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return s8.readFontInfo(iY(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=LQ(e);Ah.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Ah.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=Fot(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};L7=Oot([Pot(4,Lc)],L7);function Fot(n){let e=0;for(;n;)n=Math.floor(n/10),e++;return e||1}function Bot(){let n="";return!Wd&&!lde&&(n+="no-user-select "),Wd&&(n+="no-minimap-shadow ",n+="enable-user-select "),hn&&(n+="mac "),n}class Hot{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Vot{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class Ah{static validateOptions(e){const t=new Hot;for(const i of Rv){const r=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(r))}return t}static computeOptions(e,t){const i=new Vot;for(const r of Rv)i._write(r.id,r.compute(t,i,e._read(r.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?rr(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Ah._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let r=!1;for(const s of Rv){const o=!Ah._deepEquals(e._read(s.id),t._read(s.id));i[s.id]=o,o&&(r=!0)}return r?new Fue(i):null}static applyUpdate(e,t){let i=!1;for(const r of Rv)if(t.hasOwnProperty(r.name)){const s=r.applyUpdate(e[r.name],t[r.name]);e[r.name]=s.newValue,i=i||s.didChange}return i}}function LQ(n){const e=bh(n);return Mot(e),e}var Zh;(function(n){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},r={...e};let s=0;const o={keydown:0,input:0,render:0};function a(){b(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),o.keydown=1,queueMicrotask(l)}n.onKeyDown=a;function l(){o.keydown===1&&(performance.mark("keydown/end"),o.keydown=2)}function c(){performance.mark("input/start"),o.input=1,v()}n.onBeforeInput=c;function u(){o.input===0&&c(),queueMicrotask(d)}n.onInput=u;function d(){o.input===1&&(performance.mark("input/end"),o.input=2)}function h(){b()}n.onKeyUp=h;function f(){b()}n.onSelectionChange=f;function g(){o.keydown===2&&o.input===2&&o.render===0&&(performance.mark("render/start"),o.render=1,queueMicrotask(p),v())}n.onRenderStart=g;function p(){o.render===1&&(performance.mark("render/end"),o.render=2)}function v(){setTimeout(b)}function b(){o.keydown===2&&o.input===2&&o.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),_("keydown",e),_("input",t),_("render",i),_("inputlatency",r),s++,y())}function _(k,E){const L=performance.getEntriesByName(k)[0].duration;E.total+=L,E.min=Math.min(E.min,L),E.max=Math.max(E.max,L)}function y(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),o.keydown=0,o.input=0,o.render=0}function C(){if(s===0)return;const k={keydown:w(e),input:w(t),render:w(i),total:w(r),sampleCount:s};return x(e),x(t),x(i),x(r),s=0,k}n.getAndClearMeasurements=C;function w(k){return{average:k.total/s,max:k.max,min:k.min}}function x(k){k.total=0,k.min=Number.MAX_VALUE,k.max=0}})(Zh||(Zh={}));class EM{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new tpe(this.x-e.scrollX,this.y-e.scrollY)}}class tpe{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new EM(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class zot{constructor(e,t,i,r){this.x=e,this.y=t,this.width=i,this.height=r,this._editorPagePositionBrand=void 0}}class Wot{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function uz(n){const e=Ta(n);return new zot(e.left,e.top,e.width,e.height)}function dz(n,e,t){const i=e.width/n.offsetWidth,r=e.height/n.offsetHeight,s=(t.x-e.x)/i,o=(t.y-e.y)/r;return new Wot(s,o)}class Mf extends nc{constructor(e,t,i){super(bt(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new EM(this.posx,this.posy),this.editorPos=uz(i),this.relativePos=dz(i,this.editorPos,this.pos)}}class $ot{constructor(e){this._editorViewDomNode=e}_create(e){return new Mf(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return _e(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return _e(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return _e(e,We.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return _e(e,We.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return _e(e,We.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return _e(e,"mousemove",i=>t(this._create(i)))}}class Uot{constructor(e){this._editorViewDomNode=e}_create(e){return new Mf(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return _e(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return _e(e,We.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return _e(e,We.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return _e(e,"pointermove",i=>t(this._create(i)))}}class jot extends ke{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new eM),this._keydownListener=null}startMonitoring(e,t,i,r,s){this._keydownListener=vr(e.ownerDocument,"keydown",o=>{o.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,o.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,o=>{r(new Mf(o,!0,this._editorViewDomNode))},o=>{this._keydownListener.dispose(),s(o)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}const qT=class qT{constructor(e){this._editor=e,this._instanceId=++qT._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new bs(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let i=this._rules.get(t);if(!i){const r=this._counter++;i=new Kot(t,`dyn-rule-${this._instanceId}-${r}`,HL(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,i)}return i}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}};qT._idPool=0;let NQ=qT;class Kot{constructor(e,t,i,r){this.key=e,this.className=t,this.properties=r,this._referenceCount=0,this._styleElementDisposables=new dt,this._styleElement=Fa(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let i=`.${e} {`;for(const r in t){const s=t[r];let o;typeof s=="object"?o=$e(s.id):o=s;const a=qot(r);i+=`
	${a}: ${o};`}return i+=`
}`,i}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function qot(n){return n.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class MS extends ke{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,r=e.length;i<r;i++){const s=e[i];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}class Vo extends MS{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class Cc{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let r=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[r++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(r);for(let o=0;o<r;o++)s[o]=i[r-o-1];return s}}class Got{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class Yot extends Got{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class Zot{constructor(e,t,i,r){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=r}}class LM{static from(e){const t=new Array(e.length);for(let i=0,r=e.length;i<r;i++){const s=e[i];t[i]=new LM(s.left,s.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class Sp{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class Xot{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class TQ{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class PE{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,r,s){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(i,r),o.getClientRects()}catch{return null}finally{this._detachRange(o,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Sp.compare);const t=[];let i=0,r=e[0];for(let s=1,o=e.length;s<o;s++){const a=e[s];r.left+r.width+.9>=a.left?r.width=Math.max(r.width,a.left+a.width-r.left):(t[i++]=r,r=a)}return t[i++]=r,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s];r[s]=new Sp(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(r)}static readHorizontalRanges(e,t,i,r,s,o){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),r=Math.min(l,Math.max(0,r)),t===r&&i===s&&i===0&&!e.children[t].firstChild){const h=e.children[t].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,o.clientRectDeltaLeft,o.clientRectScale)}t!==r&&r>0&&s===0&&(r--,s=1073741824);let c=e.children[t].firstChild,u=e.children[r].firstChild;if((!c||!u)&&(!c&&i===0&&t>0&&(c=e.children[t-1].firstChild,i=1073741824),!u&&s===0&&r>0&&(u=e.children[r-1].firstChild,s=1073741824)),!c||!u)return null;i=Math.min(c.textContent.length,Math.max(0,i)),s=Math.min(u.textContent.length,Math.max(0,s));const d=this._readClientRects(c,i,u,s,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(d,o.clientRectDeltaLeft,o.clientRectScale)}}const Qot=function(){return hC?!0:!(co||Sl||Wd)}();let q0=!0;class IQ{constructor(e,t){this.themeType=t;const i=e.options,r=i.get(50);i.get(38)==="off"?this.renderWhitespace=i.get(100):this.renderWhitespace="none",this.renderControlCharacters=i.get(95),this.spaceWidth=r.spaceWidth,this.middotWidth=r.middotWidth,this.wsmiddotWidth=r.wsmiddotWidth,this.useMonospaceOptimizations=r.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=r.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(118),this.fontLigatures=i.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}const GT=class GT{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Cn(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return A0(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,r,s){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=r.getViewLineRenderingData(e),a=this._options,l=cl.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let c=null;if(A0(a.themeType)||this._options.renderWhitespace==="selection"){const f=r.selections;for(const g of f){if(g.endLineNumber<e||g.startLineNumber>e)continue;const p=g.startLineNumber===e?g.startColumn:o.minColumn,v=g.endLineNumber===e?g.endColumn:o.maxColumn;p<v&&(A0(a.themeType)&&l.push(new cl(p,v,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new Gge(p-1,v-1))))}}const u=new xb(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,l,o.tabSize,o.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==Zp.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(u))return!1;s.appendString('<div style="top:'),s.appendString(String(t)),s.appendString("px;height:"),s.appendString(String(i)),s.appendString('px;" class="'),s.appendString(GT.CLASS_NAME),s.appendString('">');const d=az(u,s);s.appendString("</div>");let h=null;return q0&&Qot&&o.isBasicASCII&&a.useMonospaceOptimizations&&d.containsForeignElements===0&&(h=new xk(this._renderedViewLine?this._renderedViewLine.domNode:null,u,d.characterMapping)),h||(h=ipe(this._renderedViewLine?this._renderedViewLine.domNode:null,u,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof xk:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof xk?this._renderedViewLine.monospaceAssumptionsAreValid():q0}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof xk&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,r){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const s=this._renderedViewLine.input.stopRenderingLineAfter;if(s!==-1&&t>s+1&&i>s+1)return new TQ(!0,[new Sp(this.getWidth(r),0)]);s!==-1&&t>s+1&&(t=s+1),s!==-1&&i>s+1&&(i=s+1);const o=this._renderedViewLine.getVisibleRangesForRange(e,t,i,r);return o&&o.length>0?new TQ(!1,o):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};GT.CLASS_NAME="view-line";let ud=GT;class xk{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const r=Math.floor(t.lineContent.length/300);if(r>0){this._keyColumnPixelOffsetCache=new Float32Array(r);for(let s=0;s<r;s++)this._keyColumnPixelOffsetCache[s]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return q0;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),q0=!1)}return q0}toSlowRenderedLine(){return ipe(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,r){const s=this._getColumnPixelOffset(e,t,r),o=this._getColumnPixelOffset(e,i,r);return[new Sp(s,o-s)]}_getColumnPixelOffset(e,t,i){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const r=Math.floor((t-1)/300)-1,s=(r+1)*300+1;let o=-1;if(this._keyColumnPixelOffsetCache&&(o=this._keyColumnPixelOffsetCache[r],o===-1&&(o=this._actualReadPixelOffset(e,s,i),this._keyColumnPixelOffsetCache[r]=o)),o===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(s),l=this._characterMapping.getHorizontalOffset(t);return o+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const r=this._characterMapping.getDomPosition(t),s=PE.readHorizontalRanges(this._getReadingTarget(this.domNode),r.partIndex,r.charIndex,r.partIndex,r.charIndex,i);return!s||s.length===0?-1:s[0].left}getColumnOfNodeOffset(e,t){return rpe(this._characterMapping,e,t)}}class npe{constructor(e,t,i,r,s){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!r||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,r){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const s=this._readPixelOffset(this.domNode,e,t,r);if(s===-1)return null;const o=this._readPixelOffset(this.domNode,e,i,r);return o===-1?null:[new Sp(s,o-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,r)}_readVisibleRangesForRange(e,t,i,r,s){if(i===r){const o=this._readPixelOffset(e,t,i,s);return o===-1?null:[new Sp(o,0)]}else return this._readRawVisibleRangesForRange(e,i,r,s)}_readPixelOffset(e,t,i,r){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(r);const s=this._getReadingTarget(e);return s.firstChild?(r.markDidDomLayout(),s.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const s=this._pixelOffsetCache[i];if(s!==-1)return s;const o=this._actualReadPixelOffset(e,t,i,r);return this._pixelOffsetCache[i]=o,o}return this._actualReadPixelOffset(e,t,i,r)}_actualReadPixelOffset(e,t,i,r){if(this._characterMapping.length===0){const l=PE.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,r);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(r);const s=this._characterMapping.getDomPosition(i),o=PE.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,r);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,r){if(t===1&&i===this._characterMapping.length)return[new Sp(0,this.getWidth(r))];const s=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(i);return PE.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,o.partIndex,o.charIndex,r)}getColumnOfNodeOffset(e,t){return rpe(this._characterMapping,e,t)}}class Jot extends npe{_readVisibleRangesForRange(e,t,i,r,s){const o=super._readVisibleRangesForRange(e,t,i,r,s);if(!o||o.length===0||i===r||i===1&&r===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,r,s);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const ipe=function(){return pp?eat:tat}();function eat(n,e,t,i,r){return new Jot(n,e,t,i,r)}function tat(n,e,t,i,r){return new npe(n,e,t,i,r)}function rpe(n,e,t){const i=e.textContent.length;let r=-1;for(;e;)e=e.previousSibling,r++;return n.getColumn(new Yge(r,t),i)}class Nw{static whitespaceVisibleColumn(e,t,i){const r=e.length;let s=0,o=-1,a=-1;for(let l=0;l<r;l++){if(l===t)return[o,a,s];switch(s%i===0&&(o=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=er.nextRenderTabStop(s,i);break;default:return[-1,-1,-1]}}return t===r?[o,a,s]:[-1,-1,-1]}static atomicPosition(e,t,i,r){const s=e.length,[o,a,l]=Nw.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(r){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(o===-1)return-1;let h=a;for(let f=o;f<s;++f){if(h===a+i)return o;switch(e.charCodeAt(f)){case 32:h+=1;break;case 9:h=er.nextRenderTabStop(h,i);break;default:return-1}}return h===a+i?o:-1}const u=er.nextRenderTabStop(l,i);let d=l;for(let h=t;h<s;h++){if(d===u)return h;switch(e.charCodeAt(h)){case 32:d+=1;break;case 9:d=er.nextRenderTabStop(d,i);break;default:return-1}}return d===u?s:-1}}class hh{constructor(e=null){this.hitTarget=e,this.type=0}}class spe{get hitTarget(){return this.spanNode}constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var Ig;(function(n){function e(t,i,r){const s=t.getPositionFromDOMInfo(i,r);return s?new spe(s,i,null):new hh(i)}n.createFromDOMInfo=e})(Ig||(Ig={}));class nat{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class rs{static _deduceRage(e,t=null){return!t&&e?new te(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,r,s,o){return{type:e,element:t,mouseColumn:i,position:r,range:s,detail:o}}static createViewZone(e,t,i,r,s){return{type:e,element:t,mouseColumn:i,position:r,range:this._deduceRage(r),detail:s}}static createContentText(e,t,i,r,s){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,r),detail:s}}static createContentEmpty(e,t,i,r){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:r}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,r){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:r}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class Ss{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class K1{constructor(e,t,i){this.viewModel=e.viewModel;const r=e.configuration.options;this.layoutInfo=r.get(146),this.viewDomNode=t.viewDomNode,this.lineHeight=r.get(67),this.stickyTabStops=r.get(117),this.typicalHalfwidthCharacterWidth=r.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return K1.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const r=i.verticalOffset+i.height/2,s=e.viewModel.getLineCount();let o=null,a,l=null;return i.afterLineNumber!==s&&(l=new de(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(o=new de(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=o:o===null?a=l:t<r?a=o:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const r=this._context.viewModel.getLineCount(),s=this._context.viewModel.getLineMaxColumn(r);return{range:new te(r,s,r,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new te(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return K1._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class iat{constructor(e,t,i,r){this.editorPos=t,this.pos=i,this.relativePos=r,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,is._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class rat extends iat{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=Cc.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,i,r,s){super(e,t,i,r),this.hitTestResult=new kf(()=>is.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=s;const o=!!this._eventTarget;this._useHitTestTarget=!o}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?er.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return rs.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return rs.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,r){return rs.createMargin(e,this.target,this._getMouseColumn(t),t,i,r)}fulfillViewZone(e,t,i){return rs.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return rs.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return rs.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return rs.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return rs.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return rs.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const DQ={isAfterLines:!0};function MA(n){return{isAfterLines:!1,horizontalDistanceToText:n}}class is{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=Cc.collect(t,this._viewHelper.viewDomNode);return!!(Ss.isChildOfContentWidgets(i)||Ss.isChildOfOverflowingContentWidgets(i)||Ss.isChildOfOverlayWidgets(i)||Ss.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,r,s){const o=new K1(this._context,this._viewHelper,e),a=new rat(o,t,i,r,s);try{const l=is._createMouseTarget(o,a);if(l.type===6&&o.stickyTabStops&&l.position!==null){const c=is._snapToSoftTabBoundary(l.position,o.viewModel),u=te.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,u,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const i=t;let r=null;return!Ss.isChildOfOverflowGuard(t.targetPath)&&!Ss.isChildOfOverflowingContentWidgets(t.targetPath)&&!Ss.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(r=r||t.fulfillUnknown()),r=r||is._hitTestContentWidget(e,i),r=r||is._hitTestOverlayWidget(e,i),r=r||is._hitTestMinimap(e,i),r=r||is._hitTestScrollbarSlider(e,i),r=r||is._hitTestViewZone(e,i),r=r||is._hitTestMargin(e,i),r=r||is._hitTestViewCursor(e,i),r=r||is._hitTestTextArea(e,i),r=r||is._hitTestViewLines(e,i),r=r||is._hitTestScrollbar(e,i),r||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(Ss.isChildOfContentWidgets(t.targetPath)||Ss.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(Ss.isChildOfOverlayWidgets(t.targetPath)||Ss.isChildOfOverflowingOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const r of i)if(t.target===r.domNode)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,r=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const o of i){if(r<o.contentLeft||r>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=s&&s<=a+o.height)return t.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const r=t.isInContentArea?8:5;return t.fulfillViewZone(r,i.position,i)}return null}static _hitTestTextArea(e,t){return Ss.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),r=i.range.getStartPosition();let s=Math.abs(t.relativePos.x);const o={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};if(s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return o.glyphMarginLane=l[Math.floor(s/e.lineHeight)],t.fulfillMargin(2,r,i.range,o)}return s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,r,i.range,o):(s-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,r,i.range,o))}return null}static _hitTestViewLines(e,t){if(!Ss.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new de(1,1),DQ);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const r=e.viewModel.getLineCount(),s=e.viewModel.getLineMaxColumn(r);return t.fulfillContentEmpty(new de(r,s),DQ)}if(Ss.isStrictChildOfViewLines(t.targetPath)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(r)===0){const o=e.getLineWidth(r),a=MA(t.mouseContentHorizontalOffset-o);return t.fulfillContentEmpty(new de(r,1),a)}const s=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>=s){const o=MA(t.mouseContentHorizontalOffset-s),a=new de(r,e.viewModel.getLineMaxColumn(r));return t.fulfillContentEmpty(a,o)}}const i=t.hitTestResult.value;return i.type===1?is.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(Ss.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new de(i,r))}return null}static _hitTestScrollbarSlider(e,t){if(Ss.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(r);return t.fulfillScrollbar(new de(r,s))}}return null}static _hitTestScrollbar(e,t){if(Ss.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new de(i,r))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(146),r=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return is._getMouseColumn(r,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,r,s){const o=r.lineNumber,a=r.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const b=MA(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(r,b)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfillUnknown(r);const u=c.left;if(Math.abs(t.mouseContentHorizontalOffset-u)<1)return t.fulfillContentText(r,null,{mightBeForeignElement:!!s,injectedText:s});const d=[];if(d.push({offset:c.left,column:a}),a>1){const b=e.visibleRangeForPosition(o,a-1);b&&d.push({offset:b.left,column:a-1})}const h=e.viewModel.getLineMaxColumn(o);if(a<h){const b=e.visibleRangeForPosition(o,a+1);b&&d.push({offset:b.left,column:a+1})}d.sort((b,_)=>b.offset-_.offset);const f=t.pos.toClientCoordinates(bt(e.viewDomNode)),g=i.getBoundingClientRect(),p=g.left<=f.clientX&&f.clientX<=g.right;let v=null;for(let b=1;b<d.length;b++){const _=d[b-1],y=d[b];if(_.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=y.offset){v=new te(o,_.column,o,y.column);const C=Math.abs(_.offset-t.mouseContentHorizontalOffset),w=Math.abs(y.offset-t.mouseContentHorizontalOffset);r=C<w?new de(o,_.column):new de(o,y.column);break}}return t.fulfillContentText(r,v,{mightBeForeignElement:!p||!!s,injectedText:s})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.getVerticalOffsetForLineNumber(i),s=r+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>s)){const a=Math.floor((r+s)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new EM(t.pos.x,l),u=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(bt(e.viewDomNode)));if(u.type===1)return u}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(bt(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=T1(e.viewDomNode);let r;if(i?typeof i.caretRangeFromPoint>"u"?r=sat(i,t.clientX,t.clientY):r=i.caretRangeFromPoint(t.clientX,t.clientY):r=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!r||!r.startContainer)return new hh;const s=r.startContainer;if(s.nodeType===s.TEXT_NODE){const o=s.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===ud.CLASS_NAME?Ig.createFromDOMInfo(e,o,r.startOffset):new hh(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const o=s.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===ud.CLASS_NAME?Ig.createFromDOMInfo(e,s,s.textContent.length):new hh(s)}return new hh}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const r=i.offsetNode.parentNode,s=r?r.parentNode:null,o=s?s.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===ud.CLASS_NAME?Ig.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new hh(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const r=i.offsetNode.parentNode,s=r&&r.nodeType===r.ELEMENT_NODE?r.className:null,o=r?r.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(s===ud.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return Ig.createFromDOMInfo(e,l,0)}else if(a===ud.CLASS_NAME)return Ig.createFromDOMInfo(e,i.offsetNode,0)}return new hh(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:r}=t.model.getOptions(),s=Nw.atomicPosition(i,e.column-1,r,2);return s!==-1?new de(e.lineNumber,s+1):e}static doHitTest(e,t){let i=new hh;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(bt(e.viewDomNode)))),i.type===1){const r=e.viewModel.getInjectedTextAt(i.position),s=e.viewModel.normalizePosition(i.position,2);(r||!s.equals(i.position))&&(i=new spe(s,i.spanNode,r))}return i}}function sat(n,e,t){const i=document.createRange();let r=n.elementFromPoint(e,t);if(r!==null){for(;r&&r.firstChild&&r.firstChild.nodeType!==r.firstChild.TEXT_NODE&&r.lastChild&&r.lastChild.firstChild;)r=r.lastChild;const s=r.getBoundingClientRect(),o=bt(r),a=o.getComputedStyle(r,null).getPropertyValue("font-style"),l=o.getComputedStyle(r,null).getPropertyValue("font-variant"),c=o.getComputedStyle(r,null).getPropertyValue("font-weight"),u=o.getComputedStyle(r,null).getPropertyValue("font-size"),d=o.getComputedStyle(r,null).getPropertyValue("line-height"),h=o.getComputedStyle(r,null).getPropertyValue("font-family"),f=`${a} ${l} ${c} ${u}/${d} ${h}`,g=r.innerText;let p=s.left,v=0,b;if(e>s.left+s.width)v=g.length;else{const _=N7.getInstance();for(let y=0;y<g.length+1;y++){if(b=_.getCharWidth(g.charAt(y),f)/2,p+=b,e<p){v=y;break}p+=b}}i.setStart(r.firstChild,v),i.setEnd(r.firstChild,v)}return i}const Fg=class Fg{static getInstance(){return Fg._INSTANCE||(Fg._INSTANCE=new Fg),Fg._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const r=this._canvas.getContext("2d");r.font=t;const o=r.measureText(e).width;return this._cache[i]=o,o}};Fg._INSTANCE=null;let N7=Fg;class hz extends MS{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new is(this._context,i),this._mouseDownOperation=this._register(new oat(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const r=new $ot(this.viewHelper.viewDomNode);this._register(r.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(r.onMouseMove(this.viewHelper.viewDomNode,o=>{this._onMouseMove(o),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=_e(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new Mf(a,!1,this.viewHelper.viewDomNode))}))})),this._register(r.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(r.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o)));let s=0;this._register(r.onPointerDown(this.viewHelper.viewDomNode,(o,a)=>{s=a})),this._register(_e(this.viewHelper.viewDomNode,We.POINTER_UP,o=>{this._mouseDownOperation.onPointerUp()})),this._register(r.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o,s))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=rN.INSTANCE;let t=0,i=Th.getZoomLevel(),r=!1,s=0;const o=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new Qp(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const u=Th.getZoomLevel(),d=c.deltaY>0?1:-1;Th.setZoomLevel(u+d),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(i=Th.getZoomLevel(),r=a(l),s=0),t=Date.now(),s+=c.deltaY,r&&(Th.setZoomLevel(i+s/5),c.preventDefault(),c.stopPropagation())};this._register(_e(this.viewHelper.viewDomNode,We.MOUSE_WHEEL,o,{capture:!0,passive:!1}));function a(l){return hn?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(146)){const t=this._context.configuration.options.get(146).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const r=new tpe(e,t).toPageCoordinates(bt(this.viewHelper.viewDomNode)),s=uz(this.viewHelper.viewDomNode);if(r.y<s.y||r.y>s.y+s.height||r.x<s.x||r.x>s.x+s.width)return null;const o=dz(this.viewHelper.viewDomNode,s,r);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,r,o,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const r=T1(this.viewHelper.viewDomNode);r&&(i=r.elementsFromPoint(e.posx,e.posy).find(s=>this.viewHelper.viewDomNode.contains(s)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),r=i.type===6||i.type===7,s=i.type===2||i.type===3||i.type===4,o=i.type===3,a=this._context.configuration.options.get(110),l=i.type===8||i.type===5,c=i.type===9;let u=e.leftButton||e.middleButton;hn&&e.leftButton&&e.ctrlKey&&(u=!1);const d=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(u&&(r||o&&a))d(),this._mouseDownOperation.start(i.type,e,t);else if(s)e.preventDefault();else if(l){const h=i.detail;u&&this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(d(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(d(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class oat extends ke{constructor(e,t,i,r,s,o){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=r,this._createMouseTarget=s,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new jot(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new aat(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new T7,this._currentSelection=new an(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const r=this._findMousePosition(t,!0);if(!r||!r.position)return;this._mouseState.trySetCount(t.detail,r.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(92)&&s.get(35)&&!s.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&r.type===6&&r.position&&this._currentSelection.containsPosition(r.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),o=>{const a=this._findMousePosition(this._lastMouseEvent,!1);td(o)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(r,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,r=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(r.getCurrentScrollTop()-a,0),c=K1.getZoneAtCoord(this._context,l);if(c){const d=this._helpPositionJumpOverViewZone(c);if(d)return rs.createOutsideEditor(s,d,"above",a)}const u=r.getLineNumberAtVerticalOffset(l);return rs.createOutsideEditor(s,new de(u,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=r.getCurrentScrollTop()+e.relativePos.y,c=K1.getZoneAtCoord(this._context,l);if(c){const d=this._helpPositionJumpOverViewZone(c);if(d)return rs.createOutsideEditor(s,d,"below",a)}const u=r.getLineNumberAtVerticalOffset(l);return rs.createOutsideEditor(s,new de(u,i.getLineMaxColumn(u)),"below",a)}const o=r.getLineNumberAtVerticalOffset(r.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return rs.createOutsideEditor(s,new de(o,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return rs.createOutsideEditor(s,new de(o,i.getLineMaxColumn(o)),"right",a)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const r=this._createMouseTarget(e,t);if(!r.position)return null;if(r.type===8||r.type===5){const o=this._helpPositionJumpOverViewZone(r.detail);if(o)return rs.createViewZone(r.type,r.element,r.mouseColumn,o,r.detail)}return r}_helpPositionJumpOverViewZone(e){const t=new de(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,r=e.positionAfter;return i&&r?i.isBefore(t)?i:r:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class aat extends ke{constructor(e,t,i,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=r,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new lat(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class lat extends ke{constructor(e,t,i,r,s,o){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=r,this._position=s,this._mouseEvent=o,this._lastTime=Date.now(),this._animationFrameDisposable=Po(bt(o.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),i=this._tick(),r=t*(i/1e3)*e,s=this._position.outsidePosition==="above"?-r:r;this._context.viewModel.viewLayout.deltaScrollNow(0,s),this._viewHelper.renderNow();const o=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?o.startLineNumber:o.endLineNumber;let l;{const c=uz(this._viewHelper.viewDomNode),u=this._context.configuration.options.get(146).horizontalScrollbarHeight,d=new EM(this._mouseEvent.pos.x,c.y+c.height-u-.1),h=dz(this._viewHelper.viewDomNode,c,d);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,d,h,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=rs.createOutsideEditor(this._position.mouseColumn,new de(a,1),"above",this._position.outsideDistance):l=rs.createOutsideEditor(this._position.mouseColumn,new de(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=Po(bt(l.element),()=>this._execute())}}const YT=class YT{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>YT.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};YT.CLEAR_MOUSE_DOWN_COUNT_TIME=400;let T7=YT;const u0=class u0{constructor(e,t,i,r,s){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=r,this.newlineCountBeforeSelection=s}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),r=e.getSelectionStart(),s=e.getSelectionEnd();let o;if(t){const a=i.substring(0,r),l=t.value.substring(0,t.selectionStart);a===l&&(o=t.newlineCountBeforeSelection)}return new u0(i,r,s,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new u0(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var r,s,o,a;if(e<=this.selectionStart){const l=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(((r=this.selection)==null?void 0:r.getStartPosition())??null,l,-1)}if(e>=this.selectionEnd){const l=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(((s=this.selection)==null?void 0:s.getEndPosition())??null,l,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("")===-1)return this._finishDeduceEditorPosition(((o=this.selection)==null?void 0:o.getStartPosition())??null,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(((a=this.selection)==null?void 0:a.getEndPosition())??null,i,-1)}_finishDeduceEditorPosition(e,t,i){let r=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)r++;return[e,i*t.length,r]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const r=Math.min($5(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min(U5(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(r,e.value.length-s);const o=t.value.substring(r,t.value.length-s),a=e.selectionStart-r,l=e.selectionEnd-r,c=t.selectionStart-r,u=t.selectionEnd-r;if(c===u){const h=e.selectionStart-r;return{text:o,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}const d=l-a;return{text:o,replacePrevCharCnt:d,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min($5(e.value,t.value),e.selectionEnd),r=Math.min(U5(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(i,e.value.length-r),o=t.value.substring(i,t.value.length-r);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:s.length-a,positionDelta:l-o.length}}};u0.EMPTY=new u0("",0,0,null,void 0);let ss=u0;class Yv{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,r=i+1,s=i+t;return new te(r,1,s+1,1)}static fromEditorSelection(e,t,i,r){const o=Yv._getPageOfLine(t.startLineNumber,i),a=Yv._getRangeForPage(o,i),l=Yv._getPageOfLine(t.endLineNumber,i),c=Yv._getRangeForPage(l,i);let u=a.intersectRanges(new te(1,1,t.startLineNumber,t.startColumn));if(r&&e.getValueLengthInRange(u,1)>500){const b=e.modifyPosition(u.getEndPosition(),-500);u=te.fromPositions(b,u.getEndPosition())}const d=e.getValueInRange(u,1),h=e.getLineCount(),f=e.getLineMaxColumn(h);let g=c.intersectRanges(new te(t.endLineNumber,t.endColumn,h,f));if(r&&e.getValueLengthInRange(g,1)>500){const b=e.modifyPosition(g.getStartPosition(),500);g=te.fromPositions(g.getStartPosition(),b)}const p=e.getValueInRange(g,1);let v;if(o===l||o+1===l)v=e.getValueInRange(t,1);else{const b=a.intersectRanges(t),_=c.intersectRanges(t);v=e.getValueInRange(b,1)+""+e.getValueInRange(_,1)}return r&&v.length>2*500&&(v=v.substring(0,500)+""+v.substring(v.length-500,v.length)),new ss(d+v+p,d.length,d.length+v.length,t,u.endLineNumber-u.startLineNumber)}}var cat=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},MQ=function(n,e){return function(t,i){e(t,i,n)}},jN;(function(n){n.Tap="-monaco-textarea-synthetic-tap"})(jN||(jN={}));const ZT=class ZT{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};ZT.INSTANCE=new ZT;let KN=ZT;class uat{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let I7=class extends ke{get textAreaState(){return this._textAreaState}constructor(e,t,i,r,s,o){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=r,this._accessibilityService=s,this._logService=o,this._onFocus=this._register(new ae),this.onFocus=this._onFocus.event,this._onBlur=this._register(new ae),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new ae),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new ae),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new ae),this.onCut=this._onCut.event,this._onPaste=this._register(new ae),this.onPaste=this._onPaste.event,this._onType=this._register(new ae),this.onType=this._onType.event,this._onCompositionStart=this._register(new ae),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new ae),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new ae),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new ae),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new Vd),this._asyncTriggerCut=this._register(new bs(()=>this._onCut.fire(),0)),this._textAreaState=ss.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(Be.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new bs(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new ii(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new ii(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new uat;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const d=ss.readFromTextArea(this._textArea,this._textAreaState),h=ss.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionUpdate.fire(l);return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=ss.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const d=ss.readFromTextArea(this._textArea,this._textAreaState),h=ss.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionEnd.fire();return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=ss.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=ss.readFromTextArea(this._textArea,this._textAreaState),u=ss.deduceInput(this._textAreaState,c,this._OS===2);u.replacePrevCharCnt===0&&u.text.length===1&&(gr(u.text.charCodeAt(0))||u.text.charCodeAt(0)===127)||(this._textAreaState=c,(u.text!==""||u.replacePrevCharCnt!==0||u.replaceNextCharCnt!==0||u.positionDelta!==0)&&this._onType.fire(u))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,u]=RQ.getTextData(l.clipboardData);c&&(u=u||KN.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:u}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new bs(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return _e(this._textArea.ownerDocument,"selectionchange",t=>{if(Zh.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),r=i-e;if(e=i,r<5)return;const s=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selection)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),u=this._host.deduceModelPosition(c[0],c[1],c[2]),d=this._textAreaState.deduceEditorPosition(l),h=this._host.deduceModelPosition(d[0],d[1],d[2]),f=new an(u.lineNumber,u.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};KN.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,i),e.preventDefault(),e.clipboardData&&RQ.setTextData(e.clipboardData,t.text,t.html,i)}};I7=cat([MQ(4,Lc),MQ(5,kc)],I7);const RQ={getTextData(n){const e=n.getData(ad.text);let t=null;const i=n.getData("vscode-editor-data");if(typeof i=="string")try{t=JSON.parse(i),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&n.files.length>0?[Array.prototype.slice.call(n.files,0).map(s=>s.name).join(`
`),null]:[e,t]},setTextData(n,e,t,i){n.setData(ad.text,e),typeof t=="string"&&n.setData("text/html",t),n.setData("vscode-editor-data",JSON.stringify(i))}};class dat extends ke{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new qt(this._actual,"keydown")).event,this.onKeyUp=this._register(new qt(this._actual,"keyup")).event,this.onCompositionStart=this._register(new qt(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new qt(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new qt(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new qt(this._actual,"beforeinput")).event,this.onInput=this._register(new qt(this._actual,"input")).event,this.onCut=this._register(new qt(this._actual,"cut")).event,this.onCopy=this._register(new qt(this._actual,"copy")).event,this.onPaste=this._register(new qt(this._actual,"paste")).event,this.onFocus=this._register(new qt(this._actual,"focus")).event,this.onBlur=this._register(new qt(this._actual,"blur")).event,this._onSyntheticTap=this._register(new ae),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Zh.onKeyDown())),this._register(this.onBeforeInput(()=>Zh.onBeforeInput())),this._register(this.onInput(()=>Zh.onInput())),this._register(this.onKeyUp(()=>Zh.onKeyUp())),this._register(_e(this._actual,jN.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=T1(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?_s()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const r=this._actual;let s=null;const o=T1(r);o?s=o.activeElement:s=_s();const a=bt(s),l=s===r,c=r.selectionStart,u=r.selectionEnd;if(l&&c===t&&u===i){Sl&&a.parent!==a&&r.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),r.setSelectionRange(t,i),Sl&&a.parent!==a&&r.focus();return}try{const d=Nje(r);this.setIgnoreSelectionChangeTime("setSelectionRange"),r.focus(),r.setSelectionRange(t,i),Tje(r,d)}catch{}}}class hat extends hz{constructor(e,t,i){super(e,t,i),this._register(zs.addTarget(this.viewHelper.linesContentDomNode)),this._register(_e(this.viewHelper.linesContentDomNode,Qn.Tap,s=>this.onTap(s))),this._register(_e(this.viewHelper.linesContentDomNode,Qn.Change,s=>this.onChange(s))),this._register(_e(this.viewHelper.linesContentDomNode,Qn.Contextmenu,s=>this._onContextMenu(new Mf(s,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(_e(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const o=s.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const r=new Uot(this.viewHelper.viewDomNode);this._register(r.onPointerMove(this.viewHelper.viewDomNode,s=>this._onMouseMove(s))),this._register(r.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(r.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(r.onPointerDown(this.viewHelper.viewDomNode,(s,o)=>this._onMouseDown(s,o)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const i=this._createMouseTarget(new Mf(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class fat extends hz{constructor(e,t,i){super(e,t,i),this._register(zs.addTarget(this.viewHelper.linesContentDomNode)),this._register(_e(this.viewHelper.linesContentDomNode,Qn.Tap,r=>this.onTap(r))),this._register(_e(this.viewHelper.linesContentDomNode,Qn.Change,r=>this.onChange(r))),this._register(_e(this.viewHelper.linesContentDomNode,Qn.Contextmenu,r=>this._onContextMenu(new Mf(r,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Mf(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(jN.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class gat extends ke{constructor(e,t,i){super(),(Yp||EWe&&Mue)&&cde.pointerEvents?this.handler=this._register(new hat(e,t,i)):zn.TouchEvent?this.handler=this._register(new fat(e,t,i)):this.handler=this._register(new hz(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class Tm extends MS{}const XT=class XT extends Tm{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new de(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);const i=e.get(146);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new de(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const r=Math.abs(this._lastCursorModelPosition.lineNumber-i);return r===0?'<span class="relative-current-line-number">'+i+"</span>":String(r)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===i||i%10===0)return String(i);const r=this._context.viewModel.getLineCount();return i===r?String(i):""}return String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=co?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);s.sort((c,u)=>te.compareRangesUsingEnds(c.range,u.range));let o=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=i;c<=r;c++){const u=c-i;let d=this._getLineRenderLineNumber(c),h="";for(;o<s.length&&s[o].range.endLineNumber<c;)o++;for(let f=o;f<s.length;f++){const{range:g,options:p}=s[f];g.startLineNumber<=c&&(h+=" "+p.lineNumberClassName)}if(!d&&!h){l[u]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(d=""),this._renderFinalNewline==="dimmed"&&(h+=" dimmed-line-number")),c===this._activeLineNumber&&(h+=" active-line-number"),l[u]=`<div class="${XT.CLASS_NAME}${t}${h}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${d}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};XT.CLASS_NAME="line-numbers";let qN=XT;Yd((n,e)=>{const t=n.getColor(jet),i=n.getColor(stt);i?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const d0=class d0 extends Vo{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=Cn(document.createElement("div")),this._domNode.setClassName(d0.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Cn(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(d0.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}};d0.CLASS_NAME="glyph-margin",d0.OUTER_CLASS_NAME="margin";let GN=d0;const G0="monaco-mouse-cursor-text";var pat=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},AQ=function(n,e){return function(t,i){e(t,i,n)}};class mat{constructor(e,t,i,r,s){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=r,this.distanceToModelLineEnd=s,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new de(this.modelLineNumber,this.distanceToModelLineStart+1),i=new de(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const RA=Sl;let D7=class extends Vo{constructor(e,t,i,r,s){super(e),this._keybindingService=r,this._instantiationService=s,this._primaryCursorPosition=new de(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const o=this._context.configuration.options,a=o.get(146);this._setAccessibilityOptions(o),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=o.get(50),this._lineHeight=o.get(67),this._emptySelectionClipboard=o.get(37),this._copyWithSyntaxHighlighting=o.get(25),this._visibleTextArea=null,this._selections=[new an(1,1,1,1)],this._modelSelections=[new an(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Cn(document.createElement("textarea")),Cc.write(this.textArea,7),this.textArea.setClassName(`inputarea ${G0}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(o)),this.textArea.setAttribute("aria-required",o.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(o.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",S("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",o.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=Cn(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:h=>this._context.viewModel.getLineMaxColumn(h),getValueInRange:(h,f)=>this._context.viewModel.getValueInRange(h,f),getValueLengthInRange:(h,f)=>this._context.viewModel.getValueLengthInRange(h,f),modifyPosition:(h,f)=>this._context.viewModel.modifyPosition(h,f)},u={getDataToCopy:()=>{const h=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Ao),f=this._context.viewModel.model.getEOL(),g=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),p=Array.isArray(h)?h:null,v=Array.isArray(h)?h.join(f):h;let b,_=null;if(this._copyWithSyntaxHighlighting&&v.length<65536){const y=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);y&&(b=y.html,_=y.mode)}return{isFromEmptySelection:g,multicursorText:p,text:v,html:b,mode:_}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const h=this._selections[0];if(hn&&h.isEmpty()){const g=h.getStartPosition();let p=this._getWordBeforePosition(g);if(p.length===0&&(p=this._getCharacterBeforePosition(g)),p.length>0)return new ss(p,p.length,p.length,te.fromPositions(g),0)}if(hn&&!h.isEmpty()&&c.getValueLengthInRange(h,0)<500){const g=c.getValueInRange(h,0);return new ss(g,0,g.length,h,0)}if(Wd&&!h.isEmpty()){const g="vscode-placeholder";return new ss(g,0,g.length,null,void 0)}return ss.EMPTY}if(UG){const h=this._selections[0];if(h.isEmpty()){const f=h.getStartPosition(),[g,p]=this._getAndroidWordAtPosition(f);if(g.length>0)return new ss(g,p,p,te.fromPositions(f),0)}return ss.EMPTY}return Yv.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(h,f,g)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(h,f,g)},d=this._register(new dat(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(I7,u,d,al,{isAndroid:UG,isChrome:dS,isFirefox:Sl,isSafari:Wd})),this._register(this._textAreaInput.onKeyDown(h=>{this._viewController.emitKeyDown(h)})),this._register(this._textAreaInput.onKeyUp(h=>{this._viewController.emitKeyUp(h)})),this._register(this._textAreaInput.onPaste(h=>{let f=!1,g=null,p=null;h.metadata&&(f=this._emptySelectionClipboard&&!!h.metadata.isFromEmptySelection,g=typeof h.metadata.multicursorText<"u"?h.metadata.multicursorText:null,p=h.metadata.mode),this._viewController.paste(h.text,f,g,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(h=>{h.replacePrevCharCnt||h.replaceNextCharCnt||h.positionDelta?this._viewController.compositionType(h.text,h.replacePrevCharCnt,h.replaceNextCharCnt,h.positionDelta):this._viewController.type(h.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(h=>{this._viewController.setSelection(h)})),this._register(this._textAreaInput.onCompositionStart(h=>{const f=this.textArea.domNode,g=this._modelSelections[0],{distanceToModelLineStart:p,widthOfHiddenTextBefore:v}=(()=>{const _=f.value.substring(0,Math.min(f.selectionStart,f.selectionEnd)),y=_.lastIndexOf(`
`),C=_.substring(y+1),w=C.lastIndexOf("	"),x=C.length-w-1,k=g.getStartPosition(),E=Math.min(k.column-1,x),L=k.column-1-E,M=C.substring(0,C.length-E),{tabSize:D}=this._context.viewModel.model.getOptions(),O=vat(this.textArea.domNode.ownerDocument,M,this._fontInfo,D);return{distanceToModelLineStart:L,widthOfHiddenTextBefore:O}})(),{distanceToModelLineEnd:b}=(()=>{const _=f.value.substring(Math.max(f.selectionStart,f.selectionEnd)),y=_.indexOf(`
`),C=y===-1?_:_.substring(0,y),w=C.indexOf("	"),x=w===-1?C.length:C.length-w-1,k=g.getEndPosition(),E=Math.min(this._context.viewModel.model.getLineMaxColumn(k.lineNumber)-k.column,x);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(k.lineNumber)-k.column-E}})();this._context.viewModel.revealRange("keyboard",!0,te.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new mat(this._context,g.startLineNumber,p,v,b),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${G0} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(h=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${G0}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(yC.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),r=M1(t,[]);let s=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(s||a);){if(s&&o<=1&&(s=!1),s){const u=i.charCodeAt(o-2);r.get(u)!==0?s=!1:o--}if(a&&l>i.length&&(a=!1),a){const u=i.charCodeAt(l-1);r.get(u)!==0?a=!1:l++}c++}return[i.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=M1(this._context.configuration.options.get(132),[]);let r=e.column,s=0;for(;r>1;){const o=t.charCodeAt(r-2);if(i.get(o)!==0||s>50)return t.substring(r-1,e.column-1);s++,r--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!gr(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){var i,r,s;if(e.get(2)===1){const o=(i=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))==null?void 0:i.getAriaLabel(),a=(r=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))==null?void 0:r.getAriaLabel(),l=(s=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))==null?void 0:s.getAriaLabel(),c=S("accessibilityModeOff","The editor is not accessible at this time.");return o?S("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,o):a?S("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?S("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===gm.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const r=e.get(146).wrappingColumn;if(r!==-1&&this._accessibilitySupport!==1){const s=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(r*s.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=RA?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:r}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${r*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!yC.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new de(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)==null||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const i=this._visibleTextArea.visibleTextareaStart,r=this._visibleTextArea.visibleTextareaEnd,s=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(s&&o&&i&&r&&r.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,u=this._contentLeft+i.left-this._scrollLeft,d=r.left-i.left+1;if(u<this._contentLeft){const b=this._contentLeft-u;u+=b,c+=b,d-=b}d>this._contentWidth&&(d=this._contentWidth);const h=this._context.viewModel.getViewLineData(s.lineNumber),f=h.tokens.findTokenIndexAtOffset(s.column-1),g=h.tokens.findTokenIndexAtOffset(o.column-1),p=f===g,v=this._visibleTextArea.definePresentation(p?h.tokens.getPresentation(f):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:u,width:d,height:this._lineHeight,useCover:!1,color:(Hi.getColorMap()||[])[v.foreground],italic:v.italic,bold:v.bold,underline:v.underline,strikethrough:v.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(hn||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:RA?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;do{if(i=e.indexOf(`
`,i+1),i===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:RA?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;Gr(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?De.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const r=this._context.configuration.options;r.get(57)?i.setClassName("monaco-editor-background textAreaCover "+GN.OUTER_CLASS_NAME):r.get(68).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+qN.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};D7=pat([AQ(3,Wr),AQ(4,Fn)],D7);function vat(n,e,t,i){if(e.length===0)return 0;const r=n.createElement("div");r.style.position="absolute",r.style.top="-50000px",r.style.width="50000px";const s=n.createElement("span");Gr(s,t),s.style.whiteSpace="pre",s.style.tabSize=`${i*t.spaceWidth}px`,s.append(e),r.appendChild(s),n.body.appendChild(r);const o=s.offsetWidth;return r.remove(),o}const bat=()=>!0,_at=()=>!1,Cat=n=>n===" "||n==="	";class ev{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,i,r){this.languageConfigurationService=r,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=i.options,o=s.get(146),a=s.get(50);this.readOnly=s.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(117),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=s.get(129),this.wordSeparators=s.get(132),this.emptySelectionClipboard=s.get(37),this.copyWithSyntaxHighlighting=s.get(25),this.multiCursorMergeOverlapping=s.get(77),this.multiCursorPaste=s.get(79),this.multiCursorLimit=s.get(80),this.autoClosingBrackets=s.get(6),this.autoClosingComments=s.get(7),this.autoClosingQuotes=s.get(11),this.autoClosingDelete=s.get(9),this.autoClosingOvertype=s.get(10),this.autoSurround=s.get(14),this.autoIndent=s.get(12),this.wordSegmenterLocales=s.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const u of l)this.surroundingPairs[u.open]=u.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(c==null?void 0:c.blockCommentStartToken)??null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)==null?void 0:e.getElectricCharacters();if(t)for(const i of t)this._electricChars[i]=!0}return this._electricChars}onElectricCharacter(e,t,i){const r=Gg(t,i-1),s=this.languageConfigurationService.getLanguageConfiguration(r.languageId).electricCharacter;return s?s.onElectricCharacter(e,r,i-r.firstCharOffset):null}normalizeIndentation(e){return Gfe(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return Cat;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return bat;case"never":return _at}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return r=>i.indexOf(r)!==-1}visibleColumnFromColumn(e,t){return er.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const r=er.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),s=e.getLineMinColumn(t);if(r<s)return s;const o=e.getLineMaxColumn(t);return r>o?o:r}}class Xt{static fromModelState(e){return new yat(e)}static fromViewState(e){return new wat(e)}static fromModelSelection(e){const t=an.liftSelection(e),i=new yr(te.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return Xt.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,r=e.length;i<r;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class yat{constructor(e){this.modelState=e,this.viewState=null}}class wat{constructor(e){this.modelState=null,this.viewState=e}}class yr{constructor(e,t,i,r,s){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=r,this.leftoverVisibleColumns=s,this._singleCursorStateBrand=void 0,this.selection=yr._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,r){return e?new yr(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new de(t,i),r):new yr(new te(t,i,t,i),0,r,new de(t,i),r)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?an.fromPositions(e.getStartPosition(),t):an.fromPositions(e.getEndPosition(),t)}}class ho{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function Rf(n){return n==="'"||n==='"'||n==="`"}class Dg{static columnSelect(e,t,i,r,s,o){const a=Math.abs(s-i)+1,l=i>s,c=r>o,u=r<o,d=[];for(let h=0;h<a;h++){const f=i+(l?-h:h),g=e.columnFromVisibleColumn(t,f,r),p=e.columnFromVisibleColumn(t,f,o),v=e.visibleColumnFromColumn(t,new de(f,g)),b=e.visibleColumnFromColumn(t,new de(f,p));u&&(v>o||b<r)||c&&(b>r||v<o)||d.push(new yr(new te(f,g,f,g),0,0,new de(f,p),0))}if(d.length===0)for(let h=0;h<a;h++){const f=i+(l?-h:h),g=t.getLineMaxColumn(f);d.push(new yr(new te(f,g,f,g),0,0,new de(f,g),0))}return{viewStates:d,reversed:l,fromLineNumber:i,fromVisualColumn:r,toLineNumber:s,toVisualColumn:o}}static columnSelectLeft(e,t,i){let r=i.toViewVisualColumn;return r>0&&r--,Dg.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,r)}static columnSelectRight(e,t,i){let r=0;const s=Math.min(i.fromViewLineNumber,i.toViewLineNumber),o=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=s;l<=o;l++){const c=t.getLineMaxColumn(l),u=e.visibleColumnFromColumn(t,new de(l,c));r=Math.max(r,u)}let a=i.toViewVisualColumn;return a<r&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,r){const s=r?e.pageSize:1,o=Math.max(1,i.toViewLineNumber-s);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}static columnSelectDown(e,t,i,r){const s=r?e.pageSize:1,o=Math.min(t.getLineCount(),i.toViewLineNumber+s);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}}class ko{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return an.fromPositions(r.getEndPosition())}}class FE{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return an.fromPositions(r.getStartPosition())}}class YN{constructor(e,t,i,r,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=r,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return an.fromPositions(r.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class Sat{constructor(e,t,i,r=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=r,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class AA{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class An{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-ide(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new de(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const r=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),o=Nw.atomicPosition(s,t.column-1,i,0);if(o!==-1&&o+1>=r)return new de(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,i){const r=e.stickyTabStops?An.leftPositionAtomicSoftTabs(t,i,e.tabSize):An.leftPosition(t,i);return new AA(r.lineNumber,r.column,0)}static moveLeft(e,t,i,r,s){let o,a;if(i.hasSelection()&&!r)o=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(s-1)),c=t.normalizePosition(An.clipPositionColumn(l,t),0),u=An.left(e,t,c);o=u.lineNumber,a=u.column}return i.move(r,o,a,0)}static clipPositionColumn(e,t){return new de(e.lineNumber,An.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+wH(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new de(t,i)}static rightPositionAtomicSoftTabs(e,t,i,r,s){if(i<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=Nw.atomicPosition(o,i-1,r,1);if(a!==-1)return new de(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const r=e.stickyTabStops?An.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):An.rightPosition(t,i.lineNumber,i.column);return new AA(r.lineNumber,r.column,0)}static moveRight(e,t,i,r,s){let o,a;if(i.hasSelection()&&!r)o=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,s-1),c=t.normalizePosition(An.clipPositionColumn(l,t),1),u=An.right(e,t,c);o=u.lineNumber,a=u.column}return i.move(r,o,a,0)}static vertical(e,t,i,r,s,o,a,l){const c=er.visibleColumnFromColumn(t.getLineContent(i),r,e.tabSize)+s,u=t.getLineCount(),d=i===1&&r===1,h=i===u&&r===t.getLineMaxColumn(i),f=o<i?d:h;if(i=o,i<1?(i=1,a?r=t.getLineMinColumn(i):r=Math.min(t.getLineMaxColumn(i),r)):i>u?(i=u,a?r=t.getLineMaxColumn(i):r=Math.min(t.getLineMaxColumn(i),r)):r=e.columnFromVisibleColumn(t,i,c),f?s=0:s=c-er.visibleColumnFromColumn(t.getLineContent(i),r,e.tabSize),l!==void 0){const g=new de(i,r),p=t.normalizePosition(g,l);s=s+(r-p.column),i=p.lineNumber,r=p.column}return new AA(i,r,s)}static down(e,t,i,r,s,o,a){return this.vertical(e,t,i,r,s,i+o,a,4)}static moveDown(e,t,i,r,s){let o,a;i.hasSelection()&&!r?(o=i.selection.endLineNumber,a=i.selection.endColumn):(o=i.position.lineNumber,a=i.position.column);let l=0,c;do if(c=An.down(e,t,o+l,a,i.leftoverVisibleColumns,s,!0),t.normalizePosition(new de(c.lineNumber,c.column),2).lineNumber>o)break;while(l++<10&&o+l<t.getLineCount());return i.move(r,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,i){const r=i.selection,s=An.down(e,t,r.selectionStartLineNumber,r.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=An.down(e,t,r.positionLineNumber,r.positionColumn,i.leftoverVisibleColumns,1,!1);return new yr(new te(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new de(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,i,r,s,o,a){return this.vertical(e,t,i,r,s,i-o,a,3)}static moveUp(e,t,i,r,s){let o,a;i.hasSelection()&&!r?(o=i.selection.startLineNumber,a=i.selection.startColumn):(o=i.position.lineNumber,a=i.position.column);const l=An.up(e,t,o,a,i.leftoverVisibleColumns,s,!0);return i.move(r,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const r=i.selection,s=An.up(e,t,r.selectionStartLineNumber,r.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=An.up(e,t,r.positionLineNumber,r.positionColumn,i.leftoverVisibleColumns,1,!1);return new yr(new te(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new de(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,r){let s=i.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return i.move(r,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,i,r){const s=t.getLineCount();let o=i.position.lineNumber;for(;o<s&&this._isBlankLine(t,o);)o++;for(;o<s&&!this._isBlankLine(t,o);)o++;return i.move(r,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,i,r){const s=i.position.lineNumber,o=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||o;let l;return i.position.column===a?l=o:l=a,i.move(r,s,l,0)}static moveToEndOfLine(e,t,i,r,s){const o=i.position.lineNumber,a=t.getLineMaxColumn(o);return i.move(r,o,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,r){return i.move(r,1,1,0)}static moveToEndOfBuffer(e,t,i,r){const s=t.getLineCount(),o=t.getLineMaxColumn(s);return i.move(r,s,o,0)}}class om{static deleteRight(e,t,i,r){const s=[];let o=e!==3;for(let a=0,l=r.length;a<l;a++){const c=r[a];let u=c;if(u.isEmpty()){const d=c.getPosition(),h=An.right(t,i,d);u=new te(h.lineNumber,h.column,d.lineNumber,d.column)}if(u.isEmpty()){s[a]=null;continue}u.startLineNumber!==u.endLineNumber&&(o=!0),s[a]=new ko(u,"")}return[o,s]}static isAutoClosingPairDelete(e,t,i,r,s,o,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const u=o[l],d=u.getPosition();if(!u.isEmpty())return!1;const h=s.getLineContent(d.lineNumber);if(d.column<2||d.column>=h.length+1)return!1;const f=h.charAt(d.column-2),g=r.get(f);if(!g)return!1;if(Rf(f)){if(i==="never")return!1}else if(t==="never")return!1;const p=h.charAt(d.column-1);let v=!1;for(const b of g)b.open===f&&b.close===p&&(v=!0);if(!v)return!1;if(e==="auto"){let b=!1;for(let _=0,y=a.length;_<y;_++){const C=a[_];if(d.lineNumber===C.startLineNumber&&d.column===C.startColumn){b=!0;break}}if(!b)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const r=[];for(let s=0,o=i.length;s<o;s++){const a=i[s].getPosition(),l=new te(a.lineNumber,a.column-1,a.lineNumber,a.column+1);r[s]=new ko(l,"")}return[!0,r]}static deleteLeft(e,t,i,r,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,r,s))return this._runAutoClosingPairDelete(t,i,r);const o=[];let a=e!==2;for(let l=0,c=r.length;l<c;l++){const u=om.getDeleteRange(r[l],i,t);if(u.isEmpty()){o[l]=null;continue}u.startLineNumber!==u.endLineNumber&&(a=!0),o[l]=new ko(u,"")}return[a,o]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const r=e.getPosition();if(i.useTabStops&&r.column>1){const s=t.getLineContent(r.lineNumber),o=To(s),a=o===-1?s.length+1:o+1;if(r.column<=a){const l=i.visibleColumnFromColumn(t,r),c=er.prevIndentTabStop(l,i.indentSize),u=i.columnFromVisibleColumn(t,r.lineNumber,c);return new te(r.lineNumber,u,r.lineNumber,r.column)}}return te.fromPositions(om.getPositionAfterDeleteLeft(r,t),r)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=wUe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new de(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const r=[];let s=null;i.sort((o,a)=>de.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=i.length;o<a;o++){const l=i[o];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let u,d,h,f;c.lineNumber<t.getLineCount()?(u=c.lineNumber,d=1,h=c.lineNumber+1,f=1):c.lineNumber>1&&(s==null?void 0:s.endLineNumber)!==c.lineNumber?(u=c.lineNumber-1,d=t.getLineMaxColumn(c.lineNumber-1),h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(u=c.lineNumber,d=1,h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const g=new te(u,d,h,f);s=g,g.isEmpty()?r[o]=null:r[o]=new ko(g,"")}else r[o]=null;else r[o]=new ko(l,"")}return new ho(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Mi{static _createWord(e,t,i,r,s){return{start:r,end:s,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){const r=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(r,e,i)}static _doFindPreviousWordOnLine(e,t,i){let r=0;const s=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let o=i.column-2;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(s&&o===s.index)return this._createIntlWord(s,l);if(l===0){if(r===2)return this._createWord(e,r,l,o+1,this._findEndOfWord(e,t,r,o+1));r=1}else if(l===2){if(r===1)return this._createWord(e,r,l,o+1,this._findEndOfWord(e,t,r,o+1));r=2}else if(l===1&&r!==0)return this._createWord(e,r,l,o+1,this._findEndOfWord(e,t,r,o+1))}return r!==0?this._createWord(e,r,1,0,this._findEndOfWord(e,t,r,0)):null}static _findEndOfWord(e,t,i,r){const s=t.findNextIntlWordAtOrAfterOffset(e,r),o=e.length;for(let a=r;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(s&&a===s.index+s.segment.length||c===1||i===1&&c===2||i===2&&c===0)return a}return o}static _findNextWordOnLine(e,t,i){const r=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(r,e,i)}static _doFindNextWordOnLine(e,t,i){let r=0;const s=e.length,o=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let a=i.column-1;a<s;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index)return this._createIntlWord(o,c);if(c===0){if(r===2)return this._createWord(e,r,c,this._findStartOfWord(e,t,r,a-1),a);r=1}else if(c===2){if(r===1)return this._createWord(e,r,c,this._findStartOfWord(e,t,r,a-1),a);r=2}else if(c===1&&r!==0)return this._createWord(e,r,c,this._findStartOfWord(e,t,r,a-1),a)}return r!==0?this._createWord(e,r,1,this._findStartOfWord(e,t,r,s-1),s):null}static _findStartOfWord(e,t,i,r){const s=t.findPrevIntlWordBeforeOrAtOffset(e,r);for(let o=r;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(s&&o===s.index)return o;if(l===1||i===1&&l===2||i===2&&l===0)return o+1}return 0}static moveWordLeft(e,t,i,r,s){let o=i.lineNumber,a=i.column;a===1&&o>1&&(o=o-1,a=t.getLineMaxColumn(o));let l=Mi._findPreviousWordOnLine(e,t,new de(o,a));if(r===0)return new de(o,l?l.start+1:1);if(r===1)return!s&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Mi._findPreviousWordOnLine(e,t,new de(o,l.start+1))),new de(o,l?l.start+1:1);if(r===3){for(;l&&l.wordType===2;)l=Mi._findPreviousWordOnLine(e,t,new de(o,l.start+1));return new de(o,l?l.start+1:1)}return l&&a<=l.end+1&&(l=Mi._findPreviousWordOnLine(e,t,new de(o,l.start+1))),new de(o,l?l.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,r=e.getLineMaxColumn(i);if(t.column===1)return i>1?new de(i-1,e.getLineMaxColumn(i-1)):t;const s=e.getLineContent(i);for(let o=t.column-1;o>1;o--){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a===95&&l!==95)return new de(i,o);if(a===45&&l!==45)return new de(i,o);if((Av(a)||jx(a))&&_h(l))return new de(i,o);if(_h(a)&&_h(l)&&o+1<r){const c=s.charCodeAt(o);if(Av(c)||jx(c))return new de(i,o)}}return new de(i,1)}static moveWordRight(e,t,i,r){let s=i.lineNumber,o=i.column,a=!1;o===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,o=1);let l=Mi._findNextWordOnLine(e,t,new de(s,o));if(r===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Mi._findNextWordOnLine(e,t,new de(s,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(s);else if(r===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=Mi._findNextWordOnLine(e,t,new de(s,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(s)}else l&&!a&&o>=l.start+1&&(l=Mi._findNextWordOnLine(e,t,new de(s,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(s);return new de(s,o)}static _moveWordPartRight(e,t){const i=t.lineNumber,r=e.getLineMaxColumn(i);if(t.column===r)return i<e.getLineCount()?new de(i+1,1):t;const s=e.getLineContent(i);for(let o=t.column+1;o<r;o++){const a=s.charCodeAt(o-2),l=s.charCodeAt(o-1);if(a!==95&&l===95)return new de(i,o);if(a!==45&&l===45)return new de(i,o);if((Av(a)||jx(a))&&_h(l))return new de(i,o);if(_h(a)&&_h(l)&&o+1<r){const c=s.charCodeAt(o);if(Av(c)||jx(c))return new de(i,o)}}return new de(i,r)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),r=t.column-2,s=mm(i,r);return s+1<r?new te(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,r=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(om.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const d=e.selection.getPosition();return new te(d.lineNumber,d.column-1,d.lineNumber,d.column+1)}const a=new de(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){const d=this._deleteWordLeftWhitespace(r,a);if(d)return d}let u=Mi._findPreviousWordOnLine(i,r,a);return t===0?u?c=u.start+1:c>1?c=1:(l--,c=r.getLineMaxColumn(l)):(u&&c<=u.end+1&&(u=Mi._findPreviousWordOnLine(i,r,new de(l,u.start+1))),u?c=u.end+1:c>1?c=1:(l--,c=r.getLineMaxColumn(l))),new te(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const r=new de(i.positionLineNumber,i.positionColumn),s=this._deleteInsideWordWhitespace(t,r);return s||this._deleteInsideWordDetermineDeleteRange(e,t,r)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),r=i.length;if(r===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,s))return null;let o=Math.min(t.column-1,r-1);if(!this._charAtIsWhitespace(i,o))return null;for(;s>0&&this._charAtIsWhitespace(i,s-1);)s--;for(;o+1<r&&this._charAtIsWhitespace(i,o+1);)o++;return new te(t.lineNumber,s+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const r=t.getLineContent(i.lineNumber),s=r.length;if(s===0)return i.lineNumber>1?new te(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new te(i.lineNumber,1,i.lineNumber+1,1):new te(i.lineNumber,1,i.lineNumber,1);const o=d=>d.start+1<=i.column&&i.column<=d.end+1,a=(d,h)=>(d=Math.min(d,i.column),h=Math.max(h,i.column),new te(i.lineNumber,d,i.lineNumber,h)),l=d=>{let h=d.start+1,f=d.end+1,g=!1;for(;f-1<s&&this._charAtIsWhitespace(r,f-1);)g=!0,f++;if(!g)for(;h>1&&this._charAtIsWhitespace(r,h-2);)h--;return a(h,f)},c=Mi._findPreviousWordOnLine(e,t,i);if(c&&o(c))return l(c);const u=Mi._findNextWordOnLine(e,t,i);return u&&o(u)?l(u):c&&u?a(c.end+1,u.start+1):c?a(c.start+1,c.end+1):u?a(u.start+1,u.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),r=Mi._moveWordPartLeft(e,i);return new te(i.lineNumber,i.column,r.lineNumber,r.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let r=t;r<i;r++){const s=e.charAt(r);if(s!==" "&&s!=="	")return r}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),r=t.column-1,s=this._findFirstNonWhitespaceChar(i,r);return r+1<s?new te(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,r=e.model,s=e.selection,o=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new de(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;const u=r.getLineCount(),d=r.getLineMaxColumn(l);if(l===u&&c===d)return null;if(o){const f=this._deleteWordRightWhitespace(r,a);if(f)return f}let h=Mi._findNextWordOnLine(i,r,a);return t===2?h?c=h.end+1:c<d||l===u?c=d:(l++,h=Mi._findNextWordOnLine(i,r,new de(l,1)),h?c=h.start+1:c=r.getLineMaxColumn(l)):(h&&c>=h.start+1&&(h=Mi._findNextWordOnLine(i,r,new de(l,h.end+1))),h?c=h.start+1:c<d||l===u?c=d:(l++,h=Mi._findNextWordOnLine(i,r,new de(l,1)),h?c=h.start+1:c=r.getLineMaxColumn(l))),new te(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),r=Mi._moveWordPartRight(e,i);return new te(i.lineNumber,i.column,r.lineNumber,r.column)}static _createWordAtPosition(e,t,i){const r=new te(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(r),startColumn:r.startColumn,endColumn:r.endColumn}}static getWordAtPosition(e,t,i,r){const s=M1(t,i),o=Mi._findPreviousWordOnLine(s,e,r);if(o&&o.wordType===1&&o.start<=r.column-1&&r.column-1<=o.end)return Mi._createWordAtPosition(e,r.lineNumber,o);const a=Mi._findNextWordOnLine(s,e,r);return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?Mi._createWordAtPosition(e,r.lineNumber,a):null}static word(e,t,i,r,s){const o=M1(e.wordSeparators,e.wordSegmenterLocales),a=Mi._findPreviousWordOnLine(o,t,s),l=Mi._findNextWordOnLine(o,t,s);if(!r){let f,g;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=s.column-1&&s.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(s.lineNumber)),new yr(new te(s.lineNumber,f,s.lineNumber,g),1,0,new de(s.lineNumber,g),0)}let c,u;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(c=a.start+1,u=a.end+1):l&&l.wordType===1&&l.start<s.column-1&&s.column-1<l.end?(c=l.start+1,u=l.end+1):(c=s.column,u=s.column);const d=s.lineNumber;let h;if(i.selectionStart.containsPosition(s))h=i.selectionStart.endColumn;else if(s.isBeforeOrEqual(i.selectionStart.getStartPosition())){h=c;const f=new de(d,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.endColumn)}else{h=u;const f=new de(d,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.startColumn)}return i.move(!0,d,h,0)}}class es{static addCursorDown(e,t,i){const r=[];let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];r[s++]=new Xt(l.modelState,l.viewState),i?r[s++]=Xt.fromModelState(An.translateDown(e.cursorConfig,e.model,l.modelState)):r[s++]=Xt.fromViewState(An.translateDown(e.cursorConfig,e,l.viewState))}return r}static addCursorUp(e,t,i){const r=[];let s=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];r[s++]=new Xt(l.modelState,l.viewState),i?r[s++]=Xt.fromModelState(An.translateUp(e.cursorConfig,e.model,l.modelState)):r[s++]=Xt.fromViewState(An.translateUp(e.cursorConfig,e,l.viewState))}return r}static moveToBeginningOfLine(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=this._moveToLineStart(e,a,i)}return r}static _moveToLineStart(e,t,i){const r=t.viewState.position.column,s=t.modelState.position.column,o=r===s,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(r===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return Xt.fromViewState(An.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return Xt.fromModelState(An.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=this._moveToLineEnd(e,l,i,r)}return s}static _moveToLineEnd(e,t,i,r){const s=t.viewState.position,o=e.getLineMaxColumn(s.lineNumber),a=s.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),u=o-s.column===c-l.column;return a||u?this._moveToLineEndByModel(e,t,i,r):this._moveToLineEndByView(e,t,i,r)}static _moveToLineEndByView(e,t,i,r){return Xt.fromViewState(An.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,r))}static _moveToLineEndByModel(e,t,i,r){return Xt.fromModelState(An.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,r))}static expandLineSelection(e,t){const i=[];for(let r=0,s=t.length;r<s;r++){const o=t[r],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,u;c===l?u=e.model.getLineMaxColumn(l):(c++,u=1),i[r]=Xt.fromModelState(new yr(new te(a,1,a,1),0,0,new de(c,u),0))}return i}static moveToBeginningOfBuffer(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=Xt.fromModelState(An.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return r}static moveToEndOfBuffer(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];r[s]=Xt.fromModelState(An.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return r}static selectAll(e,t){const i=e.model.getLineCount(),r=e.model.getLineMaxColumn(i);return Xt.fromModelState(new yr(new te(1,1,1,1),0,0,new de(i,r),0))}static line(e,t,i,r,s){const o=e.model.validatePosition(r),a=s?e.coordinatesConverter.validateViewPosition(new de(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!i){const c=e.model.getLineCount();let u=o.lineNumber+1,d=1;return u>c&&(u=c,d=e.model.getLineMaxColumn(u)),Xt.fromModelState(new yr(new te(o.lineNumber,1,u,d),2,0,new de(u,d),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return Xt.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let u=a.lineNumber+1,d=1;return u>c&&(u=c,d=e.getLineMaxColumn(u)),Xt.fromViewState(t.viewState.move(!0,u,d,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Xt.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,i,r){const s=e.model.validatePosition(r);return Xt.fromModelState(Mi.word(e.cursorConfig,e.model,t.modelState,i,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Xt(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,r=t.viewState.position.column;return Xt.fromViewState(new yr(new te(i,r,i,r),0,0,new de(i,r),0))}static moveTo(e,t,i,r,s){if(i){if(t.modelState.selectionStartKind===1)return this.word(e,t,i,r);if(t.modelState.selectionStartKind===2)return this.line(e,t,i,r,s)}const o=e.model.validatePosition(r),a=s?e.coordinatesConverter.validateViewPosition(new de(s.lineNumber,s.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Xt.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,r,s,o){switch(i){case 0:return o===4?this._moveHalfLineLeft(e,t,r):this._moveLeft(e,t,r,s);case 1:return o===4?this._moveHalfLineRight(e,t,r):this._moveRight(e,t,r,s);case 2:return o===2?this._moveUpByViewLines(e,t,r,s):this._moveUpByModelLines(e,t,r,s);case 3:return o===2?this._moveDownByViewLines(e,t,r,s):this._moveDownByModelLines(e,t,r,s);case 4:return o===2?t.map(a=>Xt.fromViewState(An.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>Xt.fromModelState(An.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 5:return o===2?t.map(a=>Xt.fromViewState(An.moveToNextBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>Xt.fromModelState(An.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 6:return this._moveToViewMinColumn(e,t,r);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,r);case 8:return this._moveToViewCenterColumn(e,t,r);case 9:return this._moveToViewMaxColumn(e,t,r);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,r);default:return null}}static viewportMove(e,t,i,r,s){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],r,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],r,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],r,l,c)]}case 14:{const l=[];for(let c=0,u=t.length;c<u;c++){const d=t[c];l[c]=this.findPositionInViewportIfOutside(e,d,o,r)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,r){const s=t.viewState.position.lineNumber;if(i.startLineNumber<=s&&s<=i.endLineNumber-1)return new Xt(t.modelState,t.viewState);{let o;s>i.endLineNumber-1?o=i.endLineNumber-1:s<i.startLineNumber?o=i.startLineNumber:o=s;const a=An.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Xt.fromViewState(t.viewState.move(r,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.min(t.endLineNumber,r+i-1)}static _lastLineNumberInRange(e,t,i){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.max(r,t.endLineNumber-i+1)}static _moveLeft(e,t,i,r){return t.map(s=>Xt.fromViewState(An.moveLeft(e.cursorConfig,e,s.viewState,i,r)))}static _moveHalfLineLeft(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);r[s]=Xt.fromViewState(An.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return r}static _moveRight(e,t,i,r){return t.map(s=>Xt.fromViewState(An.moveRight(e.cursorConfig,e,s.viewState,i,r)))}static _moveHalfLineRight(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);r[s]=Xt.fromViewState(An.moveRight(e.cursorConfig,e,a.viewState,i,c))}return r}static _moveDownByViewLines(e,t,i,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Xt.fromViewState(An.moveDown(e.cursorConfig,e,l.viewState,i,r))}return s}static _moveDownByModelLines(e,t,i,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Xt.fromModelState(An.moveDown(e.cursorConfig,e.model,l.modelState,i,r))}return s}static _moveUpByViewLines(e,t,i,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Xt.fromViewState(An.moveUp(e.cursorConfig,e,l.viewState,i,r))}return s}static _moveUpByModelLines(e,t,i,r){const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];s[o]=Xt.fromModelState(An.moveUp(e.cursorConfig,e.model,l.modelState,i,r))}return s}static _moveToViewPosition(e,t,i,r,s){return Xt.fromViewState(t.viewState.move(i,r,s,0))}static _moveToModelPosition(e,t,i,r,s){return Xt.fromModelState(t.modelState.move(i,r,s,0))}static _moveToViewMinColumn(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);r[s]=this._moveToViewPosition(e,a,i,l,c)}return r}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);r[s]=this._moveToViewPosition(e,a,i,l,c)}return r}static _moveToViewCenterColumn(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);r[s]=this._moveToViewPosition(e,a,i,l,c)}return r}static _moveToViewMaxColumn(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);r[s]=this._moveToViewPosition(e,a,i,l,c)}return r}static _moveToViewLastNonWhitespaceColumn(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);r[s]=this._moveToViewPosition(e,a,i,l,c)}return r}}var ZN;(function(n){const e=function(i){if(!no(i))return!1;const r=i;return!(!aa(r.to)||!Na(r.select)&&!kue(r.select)||!Na(r.by)&&!aa(r.by)||!Na(r.value)&&!hb(r.value))};n.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},n.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let r;switch(i.to){case n.RawDirection.Left:r=0;break;case n.RawDirection.Right:r=1;break;case n.RawDirection.Up:r=2;break;case n.RawDirection.Down:r=3;break;case n.RawDirection.PrevBlankLine:r=4;break;case n.RawDirection.NextBlankLine:r=5;break;case n.RawDirection.WrappedLineStart:r=6;break;case n.RawDirection.WrappedLineFirstNonWhitespaceCharacter:r=7;break;case n.RawDirection.WrappedLineColumnCenter:r=8;break;case n.RawDirection.WrappedLineEnd:r=9;break;case n.RawDirection.WrappedLineLastNonWhitespaceCharacter:r=10;break;case n.RawDirection.ViewPortTop:r=11;break;case n.RawDirection.ViewPortBottom:r=13;break;case n.RawDirection.ViewPortCenter:r=12;break;case n.RawDirection.ViewPortIfOutside:r=14;break;default:return null}let s=0;switch(i.by){case n.RawUnit.Line:s=1;break;case n.RawUnit.WrappedLine:s=2;break;case n.RawUnit.Character:s=3;break;case n.RawUnit.HalfLine:s=4;break}return{direction:r,unit:s,select:!!i.select,value:i.value||1}}n.parse=t})(ZN||(ZN={}));class xat{constructor(e,t,i){this._indentRulesSupport=t,this._indentationLineProcessor=new ope(e,i)}shouldIncrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(i)}shouldDecrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(i)}shouldIgnore(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(i)}shouldIndentNextLine(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(i)}}class fz{constructor(e,t){this.model=e,this.indentationLineProcessor=new ope(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),i=this._getProcessedTokensAfterRange(e),r=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:i,previousLineProcessedTokens:r}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),i=Gg(t,e.startColumn-1);let r;if(gz(this.model,e.getStartPosition())){const o=e.startColumn-1-i.firstCharOffset,a=i.firstCharOffset,l=a+o;r=t.sliceAndInflate(a,l,0)}else{const o=e.startColumn-1;r=t.sliceAndInflate(0,o,0)}return this.indentationLineProcessor.getProcessedTokens(r)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const i=this.model.tokenization.getLineTokens(t.lineNumber),r=Gg(i,t.column-1),s=t.column-1-r.firstCharOffset,o=r.firstCharOffset+s,a=r.firstCharOffset+r.getLineLength(),l=i.sliceAndInflate(o,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=f=>{this.model.tokenization.forceTokenization(f);const g=this.model.tokenization.getLineTokens(f),p=this.model.getLineMaxColumn(f)-1;return Gg(g,p)};this.model.tokenization.forceTokenization(e.startLineNumber);const i=this.model.tokenization.getLineTokens(e.startLineNumber),r=Gg(i,e.startColumn-1),s=Er.createEmpty("",r.languageIdCodec),o=e.startLineNumber-1;if(o===0||!(r.firstCharOffset===0))return s;const c=t(o);if(!(r.languageId===c.languageId))return s;const d=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(d)}}class ope{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){var o,a;const i=(l,c)=>{const u=Ts(l);return c+l.substring(u.length)};(a=(o=this.model.tokenization).forceTokenization)==null||a.call(o,e);const r=this.model.tokenization.getLineTokens(e);let s=this.getProcessedTokens(r).getLineContent();return t!==void 0&&(s=i(s,t)),s}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,i=e.getLanguageId(0),s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew.getBracketRegExp({global:!0}),o=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let u=e.getTokenText(l);t(c)&&(u=u.replace(s,""));const d=e.getMetadata(l);o.push({text:u,metadata:d})}),Er.createFromTextAndMetadata(o,e.languageIdCodec)}}function gz(n,e){n.tokenization.forceTokenization(e.lineNumber);const t=n.tokenization.getLineTokens(e.lineNumber),i=Gg(t,e.column-1),r=i.firstCharOffset===0,s=t.getLanguageId(0)===i.languageId;return!r&&!s}function pz(n,e,t,i){e.tokenization.forceTokenization(t.startLineNumber);const r=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),s=i.getLanguageConfiguration(r);if(!s)return null;const a=new fz(e,i).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),u=a.afterRangeProcessedTokens.getLineContent(),d=s.onEnter(n,l,c,u);if(!d)return null;const h=d.indentAction;let f=d.appendText;const g=d.removeText||0;f?h===Rs.Indent&&(f="	"+f):h===Rs.Indent||h===Rs.IndentOutdent?f="	":f="";let p=ehe(e,t.startLineNumber,t.startColumn);return g&&(p=p.substring(0,p.length-g)),{indentAction:h,appendText:f,removeText:g,indentation:p}}var kat=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Eat=function(n,e){return function(t,i){e(t,i,n)}},BE;const OA=Object.create(null);function ng(n,e){if(e<=0)return"";OA[n]||(OA[n]=["",n]);const t=OA[n];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+n;return t[e]}let am=BE=class{static unshiftIndent(e,t,i,r,s){const o=er.visibleColumnFromColumn(e,t,i);if(s){const a=ng(" ",r),c=er.prevIndentTabStop(o,r)/r;return ng(a,c)}else{const a="	",c=er.prevRenderTabStop(o,i)/i;return ng(a,c)}}static shiftIndent(e,t,i,r,s){const o=er.visibleColumnFromColumn(e,t,i);if(s){const a=ng(" ",r),c=er.nextIndentTabStop(o,r)/r;return ng(a,c)}else{const a="	",c=er.nextRenderTabStop(o,i)/i;return ng(a,c)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let r=this._selection.endLineNumber;this._selection.endColumn===1&&i!==r&&(r=r-1);const{tabSize:s,indentSize:o,insertSpaces:a}=this._opts,l=i===r;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,u=0;for(let d=i;d<=r;d++,c=u){u=0;const h=e.getLineContent(d);let f=To(h);if(this._opts.isUnshift&&(h.length===0||f===0)||!l&&!this._opts.isUnshift&&h.length===0)continue;if(f===-1&&(f=h.length),d>1&&er.visibleColumnFromColumn(h,f+1,s)%o!==0&&e.tokenization.isCheapToTokenize(d-1)){const v=pz(this._opts.autoIndent,e,new te(d-1,e.getLineMaxColumn(d-1),d-1,e.getLineMaxColumn(d-1)),this._languageConfigurationService);if(v){if(u=c,v.appendText)for(let b=0,_=v.appendText.length;b<_&&u<o&&v.appendText.charCodeAt(b)===32;b++)u++;v.removeText&&(u=Math.max(0,u-v.removeText));for(let b=0;b<u&&!(f===0||h.charCodeAt(f-1)!==32);b++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=BE.unshiftIndent(h,f+1,s,o,a):g=BE.shiftIndent(h,f+1,s,o,a),this._addEditOperation(t,new te(d,1,d,f+1),g),d===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?ng(" ",o):"	";for(let u=i;u<=r;u++){const d=e.getLineContent(u);let h=To(d);if(!(this._opts.isUnshift&&(d.length===0||h===0))&&!(!l&&!this._opts.isUnshift&&d.length===0)&&(h===-1&&(h=d.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,o);for(let f=0;f<h;f++)if(d.charCodeAt(f)===9){h=f+1;break}this._addEditOperation(t,new te(u,1,u,h+1),"")}else this._addEditOperation(t,new te(u,1,u,1),c),u===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const r=t.getInverseEditOperations()[0];return new an(r.range.endLineNumber,r.range.endColumn,r.range.endLineNumber,r.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const r=this._selection.startColumn;return i.startColumn<=r?i:i.getDirection()===0?new an(i.startLineNumber,r,i.endLineNumber,i.endColumn):new an(i.endLineNumber,i.endColumn,i.startLineNumber,r)}return i}};am=BE=kat([Eat(2,Eu)],am);class Lat{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new te(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new te(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),r=i[0].range,s=i[1].range;return new an(r.endLineNumber,r.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}class Nat{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new te(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return new an(r.endLineNumber,r.startColumn,r.endLineNumber,r.endColumn-this._charAfter.length)}}function Tat(n,e,t){const i=n.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let r,s=-1;for(r=e-1;r>=1;r--){if(n.tokenization.getLanguageIdAtPosition(r,0)!==i)return s;const o=n.getLineContent(r);if(t.shouldIgnore(r)||/^\s+$/.test(o)||o===""){s=r;continue}return r}}return-1}function XN(n,e,t,i=!0,r){if(n<4)return null;const s=r.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!s)return null;const o=new xat(e,s,r);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=Tat(e,t,o);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(o.shouldIncrease(a)||o.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:Ts(l),action:Rs.Indent,line:a}}else if(o.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:Ts(l),action:null,line:a}}else{if(a===1)return{indentation:Ts(e.getLineContent(a)),action:null,line:a};const l=a-1,c=s.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let u=0;for(let d=l-1;d>0;d--)if(!o.shouldIndentNextLine(d)){u=d;break}return{indentation:Ts(e.getLineContent(u+1)),action:null,line:u+1}}if(i)return{indentation:Ts(e.getLineContent(a)),action:null,line:a};for(let u=a;u>0;u--){if(o.shouldIncrease(u))return{indentation:Ts(e.getLineContent(u)),action:Rs.Indent,line:u};if(o.shouldIndentNextLine(u)){let d=0;for(let h=u-1;h>0;h--)if(!o.shouldIndentNextLine(u)){d=h;break}return{indentation:Ts(e.getLineContent(d+1)),action:null,line:d+1}}else if(o.shouldDecrease(u))return{indentation:Ts(e.getLineContent(u)),action:null,line:u}}return{indentation:Ts(e.getLineContent(1)),action:null,line:1}}}function Iat(n,e,t,i,r){if(n<4)return null;const s=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=r.getLanguageConfiguration(s).indentRulesSupport;if(!o)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new fz(e,r).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,u=l.beforeRangeProcessedTokens,d=Ts(u.getLineContent()),h=Mat(e,t.startLineNumber,u),f=gz(e,t.getStartPosition()),g=e.getLineContent(t.startLineNumber),p=Ts(g),v=XN(n,h,t.startLineNumber+1,void 0,r);if(!v){const _=f?p:d;return{beforeEnter:_,afterEnter:_}}let b=f?p:v.indentation;return v.action===Rs.Indent&&(b=i.shiftIndent(b)),o.shouldDecrease(c.getLineContent())&&(b=i.unshiftIndent(b)),{beforeEnter:f?p:d,afterEnter:b}}function Dat(n,e,t,i,r,s){const o=n.autoIndent;if(o<4||gz(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=s.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const d=new fz(e,s).getProcessedTokenContextAroundRange(t),h=d.beforeRangeProcessedTokens.getLineContent(),f=d.afterRangeProcessedTokens.getLineContent(),g=h+f,p=h+i+f;if(!c.shouldDecrease(g)&&c.shouldDecrease(p)){const b=XN(o,e,t.startLineNumber,!1,s);if(!b)return null;let _=b.indentation;return b.action!==Rs.Indent&&(_=r.unshiftIndent(_)),_}const v=t.startLineNumber-1;if(v>0){const b=e.getLineContent(v);if(c.shouldIndentNextLine(b)&&c.shouldIncrease(p)){const _=XN(o,e,t.startLineNumber,!1,s),y=_==null?void 0:_.indentation;if(y!==void 0){const C=e.getLineContent(t.startLineNumber),w=Ts(C),k=r.shiftIndent(y)===w,E=/^\s*$/.test(g),L=n.autoClosingPairs.autoClosingPairsOpenByEnd.get(i),D=L&&L.length>0&&E;if(k&&D)return y}}}return null}function Mat(n,e,t){return{tokenization:{getLineTokens:r=>r===e?t:n.tokenization.getLineTokens(r),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(r,s)=>n.getLanguageIdAtPosition(r,s)},getLineContent:r=>r===e?t.getLineContent():n.getLineContent(r)}}class Rat{static getEdits(e,t,i,r,s){if(!s&&this._isAutoIndentType(e,t,i)){const o=[];for(const l of i){const c=this._findActualIndentationForSelection(e,t,l,r);if(c===null)return;o.push({selection:l,indentation:c})}const a=M7.getAutoClosingPairClose(e,t,i,r,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,o,r,a)}}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let r=0,s=i.length;r<s;r++)if(!t.tokenization.isCheapToTokenize(i[r].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,i,r){const s=Dat(e,t,i,r,{shiftIndent:a=>bz(e,a),unshiftIndent:a=>QN(e,a)},e.languageConfigurationService);if(s===null)return null;const o=ehe(t,i.startLineNumber,i.startColumn);return s===e.normalizeIndentation(o)?null:s}static _getIndentationAndAutoClosingPairEdits(e,t,i,r,s){const o=i.map(({selection:l,indentation:c})=>{if(s!==null){const u=this._getEditFromIndentationAndSelection(e,t,c,l,r,!1);return new Uat(u,l,r,s)}else{const u=this._getEditFromIndentationAndSelection(e,t,c,l,r,!0);return hg(u.range,u.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new ho(4,o,a)}static _getEditFromIndentationAndSelection(e,t,i,r,s,o=!0){const a=r.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(i);if(l!==0){const d=t.getLineContent(a);c+=d.substring(l-1,r.startColumn-1)}return c+=o?s:"",{range:new te(a,1,r.endLineNumber,r.endColumn),text:c}}}class Aat{static getEdits(e,t,i,r,s,o){if(lpe(t,i,r,s,o))return this._runAutoClosingOvertype(e,r,o)}static _runAutoClosingOvertype(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const l=t[s].getPosition(),c=new te(l.lineNumber,l.column,l.lineNumber,l.column+1);r[s]=new ko(c,i)}return new ho(4,r,{shouldPushStackElementBefore:NM(e,4),shouldPushStackElementAfter:!1})}}class Oat{static getEdits(e,t,i,r,s){if(lpe(e,t,i,r,s)){const o=i.map(a=>new ko(new te(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new ho(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class M7{static getEdits(e,t,i,r,s,o){if(!o){const a=this.getAutoClosingPairClose(e,t,i,r,s);if(a!==null)return this._runAutoClosingOpenCharType(i,r,s,a)}}static _runAutoClosingOpenCharType(e,t,i,r){const s=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];s[o]=new $at(l,t,!i,r)}return new ho(4,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,i,r,s){for(const g of i)if(!g.isEmpty())return null;const o=i.map(g=>{const p=g.getPosition();return s?{lineNumber:p.lineNumber,beforeColumn:p.column-r.length,afterColumn:p.column}:{lineNumber:p.lineNumber,beforeColumn:p.column,afterColumn:p.column}}),a=this._findAutoClosingPairOpen(e,t,o.map(g=>new de(g.lineNumber,g.beforeColumn)),r);if(!a)return null;let l,c;if(Rf(r)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const d=this._findContainedAutoClosingPair(e,a),h=d?d.close:"";let f=!0;for(const g of o){const{lineNumber:p,beforeColumn:v,afterColumn:b}=g,_=t.getLineContent(p),y=_.substring(0,v-1),C=_.substring(b-1);if(C.startsWith(h)||(f=!1),C.length>0){const E=C.charAt(0);if(!this._isBeforeClosingBrace(e,C)&&!c(E))return null}if(a.open.length===1&&(r==="'"||r==='"')&&l!=="always"){const E=M1(e.wordSeparators,[]);if(y.length>0){const L=y.charCodeAt(y.length-1);if(E.get(L)===0)return null}}if(!t.tokenization.isCheapToTokenize(p))return null;t.tokenization.forceTokenization(p);const w=t.tokenization.getLineTokens(p),x=Gg(w,v-1);if(!a.shouldAutoClose(x,v-x.firstCharOffset))return null;const k=a.findNeutralCharacter();if(k){const E=t.tokenization.getTokenTypeIfInsertingCharacter(p,v,k);if(!a.isOK(E))return null}}return f?a.close.substring(0,a.close.length-h.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),r=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let s=null;for(const o of r)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!s||o.open.length>s.open.length)&&(s=o);return s}static _findAutoClosingPairOpen(e,t,i,r){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(r);if(!s)return null;let o=null;for(const a of s)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new te(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+r!==a.open){l=!1;break}l&&(o=a)}return o}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),r=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],o=r.some(l=>t.startsWith(l.open)),a=s.some(l=>t.startsWith(l.close));return!o&&a}}class Pat{static getEdits(e,t,i,r,s){if(!s&&this._isSurroundSelectionType(e,t,i,r))return this._runSurroundSelectionType(e,i,r)}static _runSurroundSelectionType(e,t,i){const r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=e.surroundingPairs[i];r[s]=new Lat(a,i,l)}return new ho(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,i,r){if(!cpe(e,r)||!e.surroundingPairs.hasOwnProperty(r))return!1;const s=Rf(r);for(const o of i){if(o.isEmpty())return!1;let a=!0;for(let l=o.startLineNumber;l<=o.endLineNumber;l++){const c=t.getLineContent(l),u=l===o.startLineNumber?o.startColumn-1:0,d=l===o.endLineNumber?o.endColumn-1:c.length,h=c.substring(u,d);if(/[^ \t]/.test(h)){a=!1;break}}if(a)return!1;if(s&&o.startLineNumber===o.endLineNumber&&o.startColumn+1===o.endColumn){const l=t.getValueInRange(o);if(Rf(l))return!1}}return!0}}class Fat{static getEdits(e,t,i,r,s,o){if(!o&&this._isTypeInterceptorElectricChar(t,i,r)){const a=this._typeInterceptorElectricChar(e,t,i,r[0],s);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,r,s){if(!t.electricChars.hasOwnProperty(s)||!r.isEmpty())return null;const o=r.getPosition();i.tokenization.forceTokenization(o.lineNumber);const a=i.tokenization.getLineTokens(o.lineNumber);let l;try{l=t.onElectricCharacter(s,a,o.column)}catch(c){return $n(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+s).lastIndexOf(l.matchOpenBracket)+1,u=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c},500);if(u){if(u.startLineNumber===o.lineNumber)return null;const d=i.getLineContent(u.startLineNumber),h=Ts(d),f=t.normalizeIndentation(h),g=i.getLineContent(o.lineNumber),p=i.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,v=g.substring(p-1,o.column-1),b=f+v+s,_=new te(o.lineNumber,1,o.lineNumber,o.column),y=new ko(_,b);return new ho(vz(b,e),[y],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class Bat{static getEdits(e,t,i){const r=[];for(let o=0,a=t.length;o<a;o++)r[o]=new ko(t[o],i);const s=vz(i,e);return new ho(s,r,{shouldPushStackElementBefore:NM(e,s),shouldPushStackElementAfter:!1})}}class ape{static getEdits(e,t,i,r,s){if(!s&&r===`
`){const o=[];for(let a=0,l=i.length;a<l;a++)o[a]=this._enter(e,t,!1,i[a]);return new ho(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,i,r){if(e.autoIndent===0)return hg(r,`
`,i);if(!t.tokenization.isCheapToTokenize(r.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(r.startLineNumber),c=Ts(l).substring(0,r.startColumn-1);return hg(r,`
`+e.normalizeIndentation(c),i)}const s=pz(e.autoIndent,t,r,e.languageConfigurationService);if(s){if(s.indentAction===Rs.None)return hg(r,`
`+e.normalizeIndentation(s.indentation+s.appendText),i);if(s.indentAction===Rs.Indent)return hg(r,`
`+e.normalizeIndentation(s.indentation+s.appendText),i);if(s.indentAction===Rs.IndentOutdent){const l=e.normalizeIndentation(s.indentation),c=e.normalizeIndentation(s.indentation+s.appendText),u=`
`+c+`
`+l;return i?new FE(r,u,!0):new YN(r,u,-1,c.length-l.length,!0)}else if(s.indentAction===Rs.Outdent){const l=QN(e,s.indentation);return hg(r,`
`+e.normalizeIndentation(l+s.appendText),i)}}const o=t.getLineContent(r.startLineNumber),a=Ts(o).substring(0,r.startColumn-1);if(e.autoIndent>=4){const l=Iat(e.autoIndent,t,r,{unshiftIndent:c=>QN(e,c),shiftIndent:c=>bz(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,r.getEndPosition());const u=r.endColumn,d=t.getLineContent(r.endLineNumber),h=To(d);if(h>=0?r=r.setEndPosition(r.endLineNumber,Math.max(r.endColumn,h+1)):r=r.setEndPosition(r.endLineNumber,t.getLineMaxColumn(r.endLineNumber)),i)return new FE(r,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return u<=h+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new YN(r,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return hg(r,`
`+e.normalizeIndentation(a),i)}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const r=[];for(let s=0,o=i.length;s<o;s++){let a=i[s].positionLineNumber;if(a===1)r[s]=new FE(new te(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);r[s]=this._enter(e,t,!1,new te(a,l,a,l))}}return r}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const r=[];for(let s=0,o=i.length;s<o;s++){const a=i[s].positionLineNumber,l=t.getLineMaxColumn(a);r[s]=this._enter(e,t,!1,new te(a,l,a,l))}return r}static lineBreakInsert(e,t,i){const r=[];for(let s=0,o=i.length;s<o;s++)r[s]=this._enter(e,t,!0,i[s]);return r}}class Hat{static getEdits(e,t,i,r,s,o){const a=this._distributePasteToCursors(e,i,r,s,o);return a?(i=i.sort(te.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,r,s)}static _distributePasteToCursors(e,t,i,r,s){if(r||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substring(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substring(0,i.length-1));const o=mb(i);if(o.length===t.length)return o}return null}static _distributedPaste(e,t,i,r){const s=[];for(let o=0,a=i.length;o<a;o++)s[o]=new ko(i[o],r[o]);return new ho(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,r,s){const o=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],u=c.getPosition();if(s&&!c.isEmpty()&&(s=!1),s&&r.indexOf(`
`)!==r.length-1&&(s=!1),s){const d=new te(u.lineNumber,1,u.lineNumber,1);o[a]=new Sat(d,r,c,!0)}else o[a]=new ko(c,r)}return new ho(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Vat{static getEdits(e,t,i,r,s,o,a,l){const c=r.map(u=>this._compositionType(i,u,s,o,a,l));return new ho(4,c,{shouldPushStackElementBefore:NM(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,r,s,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-r),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),u=new te(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(u)===i&&o===0?null:new YN(u,i,0,o)}}class zat{static getEdits(e,t,i){const r=[];for(let o=0,a=t.length;o<a;o++)r[o]=new ko(t[o],i);const s=vz(i,e);return new ho(s,r,{shouldPushStackElementBefore:NM(e,s),shouldPushStackElementAfter:!1})}}class Wat{static getCommands(e,t,i){const r=[];for(let s=0,o=i.length;s<o;s++){const a=i[s];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const u=e.normalizeIndentation(c);if(!l.startsWith(u)){r[s]=new ko(new te(a.startLineNumber,1,a.startLineNumber,l.length+1),u,!0);continue}}r[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){r[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}r[s]=new am(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return r}static _goodIndentForLine(e,t,i){let r=null,s="";const o=XN(e.autoIndent,t,i,!1,e.languageConfigurationService);if(o)r=o.action,s=o.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const u=t.getLineContent(a);if(mm(u)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=pz(e.autoIndent,t,new te(a,l,a,l),e.languageConfigurationService);c&&(s=c.indentation+c.appendText)}return r&&(r===Rs.Indent&&(s=bz(e,s)),r===Rs.Outdent&&(s=QN(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,i,r){let s="";const o=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,o),l=e.indentSize,c=l-a%l;for(let u=0;u<c;u++)s+=" "}else s="	";return new ko(i,s,r)}}class mz extends YN{constructor(e,t,i,r,s,o){super(e,t,i,r),this._openCharacter=s,this._closeCharacter=o,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,i){return this.closeCharacterRange=new te(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new te(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,i)}}class $at extends mz{constructor(e,t,i,r){const s=(i?t:"")+r,o=0,a=-r.length;super(e,s,o,a,t,r)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,r,t)}}class Uat extends mz{constructor(e,t,i,r){const s=i+r,o=0,a=i.length;super(t,s,o,a,i,r),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:s}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length!==2)throw new Error("There should be two inverse edit operations!");const r=i[0].range,s=i[1].range,o=r.plusRange(s);return this._computeCursorStateWithRange(e,o,t)}}function vz(n,e){return n===" "?e===5||e===6?6:5:4}function NM(n,e){return PQ(n)&&!PQ(e)?!0:n===5?!1:OQ(n)!==OQ(e)}function OQ(n){return n===6||n===5?"space":n}function PQ(n){return n===4||n===5||n===6}function lpe(n,e,t,i,r){if(n.autoClosingOvertype==="never"||!n.autoClosingPairs.autoClosingPairsCloseSingleChar.has(r))return!1;for(let s=0,o=t.length;s<o;s++){const a=t[s];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==r)return!1;const d=Rf(r);if((l.column>2?c.charCodeAt(l.column-2):0)===92&&d)return!1;if(n.autoClosingOvertype==="auto"){let f=!1;for(let g=0,p=i.length;g<p;g++){const v=i[g];if(l.lineNumber===v.startLineNumber&&l.column===v.startColumn){f=!0;break}}if(!f)return!1}}return!0}function hg(n,e,t){return t?new FE(n,e,!0):new ko(n,e,!0)}function bz(n,e,t){return t=t||1,am.shiftIndent(e,e.length+t,n.tabSize,n.indentSize,n.insertSpaces)}function QN(n,e,t){return t=t||1,am.unshiftIndent(e,e.length+t,n.tabSize,n.indentSize,n.insertSpaces)}function cpe(n,e){return Rf(e)?n.autoSurround==="quotes"||n.autoSurround==="languageDefined":n.autoSurround==="brackets"||n.autoSurround==="languageDefined"}class Mg{static indent(e,t,i){if(t===null||i===null)return[];const r=[];for(let s=0,o=i.length;s<o;s++)r[s]=new am(i[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return r}static outdent(e,t,i){const r=[];for(let s=0,o=i.length;s<o;s++)r[s]=new am(i[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return r}static paste(e,t,i,r,s,o){return Hat.getEdits(e,t,i,r,s,o)}static tab(e,t,i){return Wat.getCommands(e,t,i)}static compositionType(e,t,i,r,s,o,a,l){return Vat.getEdits(e,t,i,r,s,o,a,l)}static compositionEndWithInterceptors(e,t,i,r,s,o){if(!r)return null;let a=null;for(const h of r)if(a===null)a=h.insertedText;else if(a!==h.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const h of r)if(h.deletedText.length!==0){c=!0;break}if(c){if(!cpe(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const h=Rf(l);for(const p of r)if(p.deletedSelectionStart!==0||p.deletedSelectionEnd!==p.deletedText.length||/^[ \t]+$/.test(p.deletedText)||h&&Rf(p.deletedText))return null;const f=[];for(const p of s){if(!p.isEmpty())return null;f.push(p.getPosition())}if(f.length!==r.length)return null;const g=[];for(let p=0,v=f.length;p<v;p++)g.push(new Nat(f[p],r[p].deletedText,t.surroundingPairs[l]));return new ho(4,g,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const u=Oat.getEdits(t,i,s,o,l);if(u!==void 0)return u;const d=M7.getEdits(t,i,s,l,!0,!1);return d!==void 0?d:null}static typeWithInterceptors(e,t,i,r,s,o,a){const l=ape.getEdits(i,r,s,a,e);if(l!==void 0)return l;const c=Rat.getEdits(i,r,s,a,e);if(c!==void 0)return c;const u=Aat.getEdits(t,i,r,s,o,a);if(u!==void 0)return u;const d=M7.getEdits(i,r,s,a,!1,e);if(d!==void 0)return d;const h=Pat.getEdits(i,r,s,a,e);if(h!==void 0)return h;const f=Fat.getEdits(t,i,r,s,a,e);return f!==void 0?f:Bat.getEdits(t,s,a)}static typeWithoutInterceptors(e,t,i,r,s){return zat.getEdits(e,r,s)}}class jat{constructor(e,t,i,r,s,o){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=r,this.insertedSelectionStart=s,this.insertedSelectionEnd=o}}var et;(function(n){n.editorSimpleInput=new ht("editorSimpleInput",!1,!0),n.editorTextFocus=new ht("editorTextFocus",!1,S("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),n.focus=new ht("editorFocus",!1,S("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),n.textInputFocus=new ht("textInputFocus",!1,S("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),n.readOnly=new ht("editorReadonly",!1,S("editorReadonly","Whether the editor is read-only")),n.inDiffEditor=new ht("inDiffEditor",!1,S("inDiffEditor","Whether the context is a diff editor")),n.isEmbeddedDiffEditor=new ht("isEmbeddedDiffEditor",!1,S("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),n.inMultiDiffEditor=new ht("inMultiDiffEditor",!1,S("inMultiDiffEditor","Whether the context is a multi diff editor")),n.multiDiffEditorAllCollapsed=new ht("multiDiffEditorAllCollapsed",void 0,S("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),n.hasChanges=new ht("diffEditorHasChanges",!1,S("diffEditorHasChanges","Whether the diff editor has changes")),n.comparingMovedCode=new ht("comparingMovedCode",!1,S("comparingMovedCode","Whether a moved code block is selected for comparison")),n.accessibleDiffViewerVisible=new ht("accessibleDiffViewerVisible",!1,S("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),n.diffEditorRenderSideBySideInlineBreakpointReached=new ht("diffEditorRenderSideBySideInlineBreakpointReached",!1,S("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),n.diffEditorInlineMode=new ht("diffEditorInlineMode",!1,S("diffEditorInlineMode","Whether inline mode is active")),n.diffEditorOriginalWritable=new ht("diffEditorOriginalWritable",!1,S("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),n.diffEditorModifiedWritable=new ht("diffEditorModifiedWritable",!1,S("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),n.diffEditorOriginalUri=new ht("diffEditorOriginalUri","",S("diffEditorOriginalUri","The uri of the original document")),n.diffEditorModifiedUri=new ht("diffEditorModifiedUri","",S("diffEditorModifiedUri","The uri of the modified document")),n.columnSelection=new ht("editorColumnSelection",!1,S("editorColumnSelection","Whether `editor.columnSelection` is enabled")),n.writable=n.readOnly.toNegated(),n.hasNonEmptySelection=new ht("editorHasSelection",!1,S("editorHasSelection","Whether the editor has text selected")),n.hasOnlyEmptySelection=n.hasNonEmptySelection.toNegated(),n.hasMultipleSelections=new ht("editorHasMultipleSelections",!1,S("editorHasMultipleSelections","Whether the editor has multiple selections")),n.hasSingleSelection=n.hasMultipleSelections.toNegated(),n.tabMovesFocus=new ht("editorTabMovesFocus",!1,S("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),n.tabDoesNotMoveFocus=n.tabMovesFocus.toNegated(),n.isInEmbeddedEditor=new ht("isInEmbeddedEditor",!1,!0),n.canUndo=new ht("canUndo",!1,!0),n.canRedo=new ht("canRedo",!1,!0),n.hoverVisible=new ht("editorHoverVisible",!1,S("editorHoverVisible","Whether the editor hover is visible")),n.hoverFocused=new ht("editorHoverFocused",!1,S("editorHoverFocused","Whether the editor hover is focused")),n.stickyScrollFocused=new ht("stickyScrollFocused",!1,S("stickyScrollFocused","Whether the sticky scroll is focused")),n.stickyScrollVisible=new ht("stickyScrollVisible",!1,S("stickyScrollVisible","Whether the sticky scroll is visible")),n.standaloneColorPickerVisible=new ht("standaloneColorPickerVisible",!1,S("standaloneColorPickerVisible","Whether the standalone color picker is visible")),n.standaloneColorPickerFocused=new ht("standaloneColorPickerFocused",!1,S("standaloneColorPickerFocused","Whether the standalone color picker is focused")),n.inCompositeEditor=new ht("inCompositeEditor",void 0,S("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),n.notInCompositeEditor=n.inCompositeEditor.toNegated(),n.languageId=new ht("editorLangId","",S("editorLangId","The language identifier of the editor")),n.hasCompletionItemProvider=new ht("editorHasCompletionItemProvider",!1,S("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),n.hasCodeActionsProvider=new ht("editorHasCodeActionsProvider",!1,S("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),n.hasCodeLensProvider=new ht("editorHasCodeLensProvider",!1,S("editorHasCodeLensProvider","Whether the editor has a code lens provider")),n.hasDefinitionProvider=new ht("editorHasDefinitionProvider",!1,S("editorHasDefinitionProvider","Whether the editor has a definition provider")),n.hasDeclarationProvider=new ht("editorHasDeclarationProvider",!1,S("editorHasDeclarationProvider","Whether the editor has a declaration provider")),n.hasImplementationProvider=new ht("editorHasImplementationProvider",!1,S("editorHasImplementationProvider","Whether the editor has an implementation provider")),n.hasTypeDefinitionProvider=new ht("editorHasTypeDefinitionProvider",!1,S("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),n.hasHoverProvider=new ht("editorHasHoverProvider",!1,S("editorHasHoverProvider","Whether the editor has a hover provider")),n.hasDocumentHighlightProvider=new ht("editorHasDocumentHighlightProvider",!1,S("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),n.hasDocumentSymbolProvider=new ht("editorHasDocumentSymbolProvider",!1,S("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),n.hasReferenceProvider=new ht("editorHasReferenceProvider",!1,S("editorHasReferenceProvider","Whether the editor has a reference provider")),n.hasRenameProvider=new ht("editorHasRenameProvider",!1,S("editorHasRenameProvider","Whether the editor has a rename provider")),n.hasSignatureHelpProvider=new ht("editorHasSignatureHelpProvider",!1,S("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),n.hasInlayHintsProvider=new ht("editorHasInlayHintsProvider",!1,S("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),n.hasDocumentFormattingProvider=new ht("editorHasDocumentFormattingProvider",!1,S("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),n.hasDocumentSelectionFormattingProvider=new ht("editorHasDocumentSelectionFormattingProvider",!1,S("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),n.hasMultipleDocumentFormattingProvider=new ht("editorHasMultipleDocumentFormattingProvider",!1,S("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),n.hasMultipleDocumentSelectionFormattingProvider=new ht("editorHasMultipleDocumentSelectionFormattingProvider",!1,S("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(et||(et={}));const gn=0;class mi extends tm{runEditorCommand(e,t,i){const r=t._getViewModel();r&&this.runCoreEditorCommand(r,i||{})}}var Mr;(function(n){const e=function(i){if(!no(i))return!1;const r=i;return!(!aa(r.to)||!Na(r.by)&&!aa(r.by)||!Na(r.value)&&!hb(r.value)||!Na(r.revealCursor)&&!kue(r.revealCursor))};n.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},n.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(i){let r;switch(i.to){case n.RawDirection.Up:r=1;break;case n.RawDirection.Right:r=2;break;case n.RawDirection.Down:r=3;break;case n.RawDirection.Left:r=4;break;default:return null}let s;switch(i.by){case n.RawUnit.Line:s=1;break;case n.RawUnit.WrappedLine:s=2;break;case n.RawUnit.Page:s=3;break;case n.RawUnit.HalfPage:s=4;break;case n.RawUnit.Editor:s=5;break;case n.RawUnit.Column:s=6;break;default:s=2}const o=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:r,unit:s,value:o,revealCursor:a,select:!!i.select}}n.parse=t})(Mr||(Mr={}));var Zv;(function(n){const e=function(t){if(!no(t))return!1;const i=t;return!(!hb(i.lineNumber)&&!aa(i.lineNumber)||!Na(i.at)&&!aa(i.at))};n.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Zv||(Zv={}));class R7{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const r=t.get(or).getFocusedCodeEditor();return r&&r.hasTextFocus()?this._runEditorCommand(t,r,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const r=_s();return r&&["input","textarea"].indexOf(r.tagName.toLowerCase())>=0?(this.runDOMCommand(r),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const r=t.get(or).getActiveCodeEditor();return r?(r.focus(),this._runEditorCommand(t,r,i)):!1})}_runEditorCommand(e,t,i){const r=this.runEditorCommand(e,t,i);return r||!0}}var lr;(function(n){class e extends mi{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,y){if(!y.position)return;_.model.pushStackElement(),_.setCursorStates(y.source,3,[es.moveTo(_,_.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)])&&y.revealType!==2&&_.revealAllCursors(y.source,!0,!0)}}n.MoveTo=At(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),n.MoveToSelect=At(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends mi{runCoreEditorCommand(_,y){_.model.pushStackElement();const C=this._getColumnSelectResult(_,_.getPrimaryCursorState(),_.getCursorColumnSelectData(),y);C!==null&&(_.setCursorStates(y.source,3,C.viewStates.map(w=>Xt.fromViewState(w))),_.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:C.fromLineNumber,fromViewVisualColumn:C.fromVisualColumn,toViewLineNumber:C.toLineNumber,toViewVisualColumn:C.toVisualColumn}),C.reversed?_.revealTopMostCursor(y.source):_.revealBottomMostCursor(y.source))}}n.ColumnSelect=At(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(b,_,y,C){if(typeof C.position>"u"||typeof C.viewPosition>"u"||typeof C.mouseColumn>"u")return null;const w=b.model.validatePosition(C.position),x=b.coordinatesConverter.validateViewPosition(new de(C.viewPosition.lineNumber,C.viewPosition.column),w),k=C.doColumnSelect?y.fromViewLineNumber:x.lineNumber,E=C.doColumnSelect?y.fromViewVisualColumn:C.mouseColumn-1;return Dg.columnSelect(b.cursorConfig,b,k,E,x.lineNumber,C.mouseColumn-1)}}),n.CursorColumnSelectLeft=At(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(b,_,y,C){return Dg.columnSelectLeft(b.cursorConfig,b,y)}}),n.CursorColumnSelectRight=At(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(b,_,y,C){return Dg.columnSelectRight(b.cursorConfig,b,y)}});class i extends t{constructor(_){super(_),this._isPaged=_.isPaged}_getColumnSelectResult(_,y,C,w){return Dg.columnSelectUp(_.cursorConfig,_,C,this._isPaged)}}n.CursorColumnSelectUp=At(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:3600,linux:{primary:0}}})),n.CursorColumnSelectPageUp=At(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:3595,linux:{primary:0}}}));class r extends t{constructor(_){super(_),this._isPaged=_.isPaged}_getColumnSelectResult(_,y,C,w){return Dg.columnSelectDown(_.cursorConfig,_,C,this._isPaged)}}n.CursorColumnSelectDown=At(new r({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:3602,linux:{primary:0}}})),n.CursorColumnSelectPageDown=At(new r({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:3596,linux:{primary:0}}}));class s extends mi{constructor(){super({id:"cursorMove",precondition:void 0,metadata:ZN.metadata})}runCoreEditorCommand(_,y){const C=ZN.parse(y);C&&this._runCursorMove(_,y.source,C)}_runCursorMove(_,y,C){_.model.pushStackElement(),_.setCursorStates(y,3,s._move(_,_.getCursorStates(),C)),_.revealAllCursors(y,!0)}static _move(_,y,C){const w=C.select,x=C.value;switch(C.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return es.simpleMove(_,y,C.direction,w,x,C.unit);case 11:case 13:case 12:case 14:return es.viewportMove(_,y,C.direction,w,x);default:return null}}}n.CursorMoveImpl=s,n.CursorMove=At(new s);class o extends mi{constructor(_){super(_),this._staticArgs=_.args}runCoreEditorCommand(_,y){let C=this._staticArgs;this._staticArgs.value===-1&&(C={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:y.pageSize||_.cursorConfig.pageSize}),_.model.pushStackElement(),_.setCursorStates(y.source,3,es.simpleMove(_,_.getCursorStates(),C.direction,C.select,C.value,C.unit)),_.revealAllCursors(y.source,!0)}}n.CursorLeft=At(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),n.CursorLeftSelect=At(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:1039}})),n.CursorRight=At(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),n.CursorRightSelect=At(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:1041}})),n.CursorUp=At(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),n.CursorUpSelect=At(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),n.CursorPageUp=At(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:11}})),n.CursorPageUpSelect=At(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:1035}})),n.CursorDown=At(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),n.CursorDownSelect=At(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),n.CursorPageDown=At(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:12}})),n.CursorPageDownSelect=At(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:1036}})),n.CreateCursor=At(new class extends mi{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(b,_){if(!_.position)return;let y;_.wholeLine?y=es.line(b,b.getPrimaryCursorState(),!1,_.position,_.viewPosition):y=es.moveTo(b,b.getPrimaryCursorState(),!1,_.position,_.viewPosition);const C=b.getCursorStates();if(C.length>1){const w=y.modelState?y.modelState.position:null,x=y.viewState?y.viewState.position:null;for(let k=0,E=C.length;k<E;k++){const L=C[k];if(!(w&&!L.modelState.selection.containsPosition(w))&&!(x&&!L.viewState.selection.containsPosition(x))){C.splice(k,1),b.model.pushStackElement(),b.setCursorStates(_.source,3,C);return}}}C.push(y),b.model.pushStackElement(),b.setCursorStates(_.source,3,C)}}),n.LastCursorMoveToSelect=At(new class extends mi{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(b,_){if(!_.position)return;const y=b.getLastAddedCursorIndex(),C=b.getCursorStates(),w=C.slice(0);w[y]=es.moveTo(b,C[y],!0,_.position,_.viewPosition),b.model.pushStackElement(),b.setCursorStates(_.source,3,w)}});class a extends mi{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,y){_.model.pushStackElement(),_.setCursorStates(y.source,3,es.moveToBeginningOfLine(_,_.getCursorStates(),this._inSelectionMode)),_.revealAllCursors(y.source,!0)}}n.CursorHome=At(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),n.CursorHomeSelect=At(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends mi{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,y){_.model.pushStackElement(),_.setCursorStates(y.source,3,this._exec(_.getCursorStates())),_.revealAllCursors(y.source,!0)}_exec(_){const y=[];for(let C=0,w=_.length;C<w;C++){const x=_[C],k=x.modelState.position.lineNumber;y[C]=Xt.fromModelState(x.modelState.move(this._inSelectionMode,k,1,0))}return y}}n.CursorLineStart=At(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:0,mac:{primary:287}}})),n.CursorLineStartSelect=At(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends mi{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,y){_.model.pushStackElement(),_.setCursorStates(y.source,3,es.moveToEndOfLine(_,_.getCursorStates(),this._inSelectionMode,y.sticky||!1)),_.revealAllCursors(y.source,!0)}}n.CursorEnd=At(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:gn,kbExpr:et.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:S("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),n.CursorEndSelect=At(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:gn,kbExpr:et.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:S("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class u extends mi{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,y){_.model.pushStackElement(),_.setCursorStates(y.source,3,this._exec(_,_.getCursorStates())),_.revealAllCursors(y.source,!0)}_exec(_,y){const C=[];for(let w=0,x=y.length;w<x;w++){const k=y[w],E=k.modelState.position.lineNumber,L=_.model.getLineMaxColumn(E);C[w]=Xt.fromModelState(k.modelState.move(this._inSelectionMode,E,L,0))}return C}}n.CursorLineEnd=At(new u({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:0,mac:{primary:291}}})),n.CursorLineEndSelect=At(new u({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:0,mac:{primary:1315}}}));class d extends mi{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,y){_.model.pushStackElement(),_.setCursorStates(y.source,3,es.moveToBeginningOfBuffer(_,_.getCursorStates(),this._inSelectionMode)),_.revealAllCursors(y.source,!0)}}n.CursorTop=At(new d({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:2062,mac:{primary:2064}}})),n.CursorTopSelect=At(new d({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:3086,mac:{primary:3088}}}));class h extends mi{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,y){_.model.pushStackElement(),_.setCursorStates(y.source,3,es.moveToEndOfBuffer(_,_.getCursorStates(),this._inSelectionMode)),_.revealAllCursors(y.source,!0)}}n.CursorBottom=At(new h({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:2061,mac:{primary:2066}}})),n.CursorBottomSelect=At(new h({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends mi{constructor(){super({id:"editorScroll",precondition:void 0,metadata:Mr.metadata})}determineScrollMethod(_){const y=[6],C=[1,2,3,4,5,6],w=[4,2],x=[1,3];return y.includes(_.unit)&&w.includes(_.direction)?this._runHorizontalEditorScroll.bind(this):C.includes(_.unit)&&x.includes(_.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(_,y){const C=Mr.parse(y);if(!C)return;const w=this.determineScrollMethod(C);w&&w(_,y.source,C)}_runVerticalEditorScroll(_,y,C){const w=this._computeDesiredScrollTop(_,C);if(C.revealCursor){const x=_.getCompletelyVisibleViewRangeAtScrollTop(w);_.setCursorStates(y,3,[es.findPositionInViewportIfOutside(_,_.getPrimaryCursorState(),x,C.select)])}_.viewLayout.setScrollPosition({scrollTop:w},0)}_computeDesiredScrollTop(_,y){if(y.unit===1){const x=_.viewLayout.getFutureViewport(),k=_.getCompletelyVisibleViewRangeAtScrollTop(x.top),E=_.coordinatesConverter.convertViewRangeToModelRange(k);let L;y.direction===1?L=Math.max(1,E.startLineNumber-y.value):L=Math.min(_.model.getLineCount(),E.startLineNumber+y.value);const M=_.coordinatesConverter.convertModelPositionToViewPosition(new de(L,1));return _.viewLayout.getVerticalOffsetForLineNumber(M.lineNumber)}if(y.unit===5){let x=0;return y.direction===3&&(x=_.model.getLineCount()-_.cursorConfig.pageSize),_.viewLayout.getVerticalOffsetForLineNumber(x)}let C;y.unit===3?C=_.cursorConfig.pageSize*y.value:y.unit===4?C=Math.round(_.cursorConfig.pageSize/2)*y.value:C=y.value;const w=(y.direction===1?-1:1)*C;return _.viewLayout.getCurrentScrollTop()+w*_.cursorConfig.lineHeight}_runHorizontalEditorScroll(_,y,C){const w=this._computeDesiredScrollLeft(_,C);_.viewLayout.setScrollPosition({scrollLeft:w},0)}_computeDesiredScrollLeft(_,y){const C=(y.direction===4?-1:1)*y.value;return _.viewLayout.getCurrentScrollLeft()+C*_.cursorConfig.typicalHalfwidthCharacterWidth}}n.EditorScrollImpl=f,n.EditorScroll=At(new f),n.ScrollLineUp=At(new class extends mi{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(b,_){n.EditorScroll.runCoreEditorCommand(b,{to:Mr.RawDirection.Up,by:Mr.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:_.source})}}),n.ScrollPageUp=At(new class extends mi{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(b,_){n.EditorScroll.runCoreEditorCommand(b,{to:Mr.RawDirection.Up,by:Mr.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:_.source})}}),n.ScrollEditorTop=At(new class extends mi{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus}})}runCoreEditorCommand(b,_){n.EditorScroll.runCoreEditorCommand(b,{to:Mr.RawDirection.Up,by:Mr.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:_.source})}}),n.ScrollLineDown=At(new class extends mi{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(b,_){n.EditorScroll.runCoreEditorCommand(b,{to:Mr.RawDirection.Down,by:Mr.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:_.source})}}),n.ScrollPageDown=At(new class extends mi{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(b,_){n.EditorScroll.runCoreEditorCommand(b,{to:Mr.RawDirection.Down,by:Mr.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:_.source})}}),n.ScrollEditorBottom=At(new class extends mi{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus}})}runCoreEditorCommand(b,_){n.EditorScroll.runCoreEditorCommand(b,{to:Mr.RawDirection.Down,by:Mr.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:_.source})}}),n.ScrollLeft=At(new class extends mi{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus}})}runCoreEditorCommand(b,_){n.EditorScroll.runCoreEditorCommand(b,{to:Mr.RawDirection.Left,by:Mr.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:_.source})}}),n.ScrollRight=At(new class extends mi{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus}})}runCoreEditorCommand(b,_){n.EditorScroll.runCoreEditorCommand(b,{to:Mr.RawDirection.Right,by:Mr.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:_.source})}});class g extends mi{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,y){y.position&&(_.model.pushStackElement(),_.setCursorStates(y.source,3,[es.word(_,_.getPrimaryCursorState(),this._inSelectionMode,y.position)]),y.revealType!==2&&_.revealAllCursors(y.source,!0,!0))}}n.WordSelect=At(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),n.WordSelectDrag=At(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),n.LastCursorWordSelect=At(new class extends mi{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(b,_){if(!_.position)return;const y=b.getLastAddedCursorIndex(),C=b.getCursorStates(),w=C.slice(0),x=C[y];w[y]=es.word(b,x,x.modelState.hasSelection(),_.position),b.model.pushStackElement(),b.setCursorStates(_.source,3,w)}});class p extends mi{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,y){y.position&&(_.model.pushStackElement(),_.setCursorStates(y.source,3,[es.line(_,_.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)]),y.revealType!==2&&_.revealAllCursors(y.source,!1,!0))}}n.LineSelect=At(new p({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),n.LineSelectDrag=At(new p({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class v extends mi{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,y){if(!y.position)return;const C=_.getLastAddedCursorIndex(),w=_.getCursorStates(),x=w.slice(0);x[C]=es.line(_,w[C],this._inSelectionMode,y.position,y.viewPosition),_.model.pushStackElement(),_.setCursorStates(y.source,3,x)}}n.LastCursorLineSelect=At(new v({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),n.LastCursorLineSelectDrag=At(new v({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),n.CancelSelection=At(new class extends mi{constructor(){super({id:"cancelSelection",precondition:et.hasNonEmptySelection,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,_){b.model.pushStackElement(),b.setCursorStates(_.source,3,[es.cancelSelection(b,b.getPrimaryCursorState())]),b.revealAllCursors(_.source,!0)}}),n.RemoveSecondaryCursors=At(new class extends mi{constructor(){super({id:"removeSecondaryCursors",precondition:et.hasMultipleSelections,kbOpts:{weight:gn+1,kbExpr:et.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,_){b.model.pushStackElement(),b.setCursorStates(_.source,3,[b.getPrimaryCursorState()]),b.revealAllCursors(_.source,!0),cN(S("removedCursor","Removed secondary cursors"))}}),n.RevealLine=At(new class extends mi{constructor(){super({id:"revealLine",precondition:void 0,metadata:Zv.metadata})}runCoreEditorCommand(b,_){const y=_,C=y.lineNumber||0;let w=typeof C=="number"?C+1:parseInt(C)+1;w<1&&(w=1);const x=b.model.getLineCount();w>x&&(w=x);const k=new te(w,1,w,b.model.getLineMaxColumn(w));let E=0;if(y.at)switch(y.at){case Zv.RawAtArgument.Top:E=3;break;case Zv.RawAtArgument.Center:E=1;break;case Zv.RawAtArgument.Bottom:E=4;break}const L=b.coordinatesConverter.convertModelRangeToViewRange(k);b.revealRange(_.source,!1,L,E,0)}}),n.SelectAll=new class extends R7{constructor(){super(pKe)}runDOMCommand(b){Sl&&(b.focus(),b.select()),b.ownerDocument.execCommand("selectAll")}runEditorCommand(b,_,y){const C=_._getViewModel();C&&this.runCoreEditorCommand(C,y)}runCoreEditorCommand(b,_){b.model.pushStackElement(),b.setCursorStates("keyboard",3,[es.selectAll(b,b.getPrimaryCursorState())])}},n.SetSelection=At(new class extends mi{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(b,_){_.selection&&(b.model.pushStackElement(),b.setCursorStates(_.source,3,[Xt.fromModelSelection(_.selection)]))}})})(lr||(lr={}));const Kat=Ln.and(et.textInputFocus,et.columnSelection);function kb(n,e){gS.registerKeybindingRule({id:n,primary:e,when:Kat,weight:gn+1})}kb(lr.CursorColumnSelectLeft.id,1039);kb(lr.CursorColumnSelectRight.id,1041);kb(lr.CursorColumnSelectUp.id,1040);kb(lr.CursorColumnSelectPageUp.id,1035);kb(lr.CursorColumnSelectDown.id,1042);kb(lr.CursorColumnSelectPageDown.id,1036);function FQ(n){return n.register(),n}var BQ;(function(n){class e extends tm{runEditorCommand(i,r,s){const o=r._getViewModel();o&&this.runCoreEditingCommand(r,o,s||{})}}n.CoreEditingCommand=e,n.LineBreakInsert=At(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:et.writable,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,r){t.pushUndoStop(),t.executeCommands(this.id,ape.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection)))}}),n.Outdent=At(new class extends e{constructor(){super({id:"outdent",precondition:et.writable,kbOpts:{weight:gn,kbExpr:Ln.and(et.editorTextFocus,et.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,r){t.pushUndoStop(),t.executeCommands(this.id,Mg.outdent(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),n.Tab=At(new class extends e{constructor(){super({id:"tab",precondition:et.writable,kbOpts:{weight:gn,kbExpr:Ln.and(et.editorTextFocus,et.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,r){t.pushUndoStop(),t.executeCommands(this.id,Mg.tab(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),n.DeleteLeft=At(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,r){const[s,o]=om.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(2)}}),n.DeleteRight=At(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:gn,kbExpr:et.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,r){const[s,o]=om.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));s&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(3)}}),n.Undo=new class extends R7{constructor(){super(zde)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,i,r){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().undo()}},n.Redo=new class extends R7{constructor(){super(Wde)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,i,r){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().redo()}}})(BQ||(BQ={}));class HQ extends KD{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(or).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function Im(n,e){FQ(new HQ("default:"+n,n)),FQ(new HQ(n,n,e))}Im("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Im("replacePreviousChar");Im("compositionType");Im("compositionStart");Im("compositionEnd");Im("paste");Im("cut");class qat{constructor(e,t,i,r){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=r}paste(e,t,i,r){this.commandDelegate.paste(e,t,i,r)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,r){this.commandDelegate.compositionType(e,t,i,r)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){lr.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new de(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=co&&t.get(108),r=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):r?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){lr.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){lr.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),lr.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),lr.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){lr.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){lr.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){lr.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){lr.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){lr.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){lr.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){lr.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){lr.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){lr.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class upe{constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Tn("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),r=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>r)return null;let s=0,o=0;for(let l=i;l<=r;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(s=c,o=1):o++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(s,o)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const r=this.getStartLineNumber(),s=this.getEndLineNumber();let o=!1;for(let a=e;a<=i;a++)a>=r&&a<=s&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,r=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=r)return this._rendLineNumberStart+=i,null;if(e>s)return null;if(i+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const o=[];for(let d=0;d<i;d++)o[d]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),u=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(o).concat(c),u}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let r=!1;for(let s=0,o=e.length;s<o;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let u=l;u<=c;u++){const d=u-this._rendLineNumberStart;this._lines[d].onTokensChanged(),r=!0}}return r}}class dpe{constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new upe(this._lineFactory)}_createDomNode(){const e=Cn(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,r=t.length;i<r;i++){const s=t[i].getDomNode();s==null||s.remove()}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,r=t.length;i<r;i++){const s=t[i].getDomNode();s==null||s.remove()}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new A7(this.domNode.domNode,this._lineFactory,e),r={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=i.render(r,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}const Ju=class Ju{constructor(e,t,i){this._domNode=e,this._lineFactory=t,this._viewportData=i}render(e,t,i,r){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||i<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=i-t+1,s.lines=[];for(let o=t;o<=i;o++)s.lines[o-t]=this._lineFactory.createLine();return this._finishRendering(s,!0,r),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(i-s.rendLineNumberStart,s.linesLength-1),r,t),s.rendLineNumberStart>t){const o=t,a=Math.min(i,s.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(s,o,a,r,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart<t){const o=Math.min(s.linesLength,t-s.rendLineNumberStart);o>0&&(this._removeLinesBefore(s,o),s.linesLength-=o)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<i){const o=s.rendLineNumberStart+s.linesLength,a=i;o<=a&&(this._insertLinesAfter(s,o,a,r,t),s.linesLength+=a-o+1)}else if(s.rendLineNumberStart+s.linesLength-1>i){const o=Math.max(0,i-s.rendLineNumberStart+1),l=s.linesLength-1-o+1;l>0&&(this._removeLinesAfter(s,l),s.linesLength-=l)}return this._finishRendering(s,!1,r),s}_renderUntouchedLines(e,t,i,r,s){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=o+l;a[l].layoutLine(c,r[c-s],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,i,r,s){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this._lineFactory.createLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const r=e.lines[i].getDomNode();r==null||r.remove()}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,r,s){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let r=0;r<t;r++){const s=e.lines[i+r].getDomNode();s==null||s.remove()}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,r){Ju._ttPolicy&&(i=Ju._ttPolicy.createHTML(i));const s=this._domNode.lastChild;t||!s?this._domNode.innerHTML=i:s.insertAdjacentHTML("afterend",i);let o=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];r[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const r=document.createElement("div");Ju._ttPolicy&&(t=Ju._ttPolicy.createHTML(t)),r.innerHTML=t;for(let s=0;s<e.linesLength;s++){const o=e.lines[s];if(i[s]){const a=r.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,i){const r=Ju._sb,s=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{r.reset();let c=!1;for(let u=0;u<s;u++){const d=o[u];l[u]=!1,!(d.getDomNode()||!d.renderLine(u+a,i[u],this._viewportData.lineHeight,this._viewportData,r))&&(l[u]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,r.build(),l)}{r.reset();let c=!1;const u=[];for(let d=0;d<s;d++){const h=o[d];u[d]=!1,!(l[d]||!h.renderLine(d+a,i[d],this._viewportData.lineHeight,this._viewportData,r))&&(u[d]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,r.build(),u)}}};Ju._ttPolicy=Sm("editorViewLayer",{createHTML:e=>e}),Ju._sb=new qD(1e5);let A7=Ju;class hpe extends Vo{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new dpe({createLine:()=>new Gat(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);Gr(this.domNode,i),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._context.configuration.options.get(50);return Gr(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,r=t.length;i<r;i++){const s=t[i];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class Gat{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Cn(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,r,s){let o="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];o+=c.render(r.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,s.appendString('<div style="top:'),s.appendString(String(t)),s.appendString("px;height:"),s.appendString(String(i)),s.appendString('px;">'),s.appendString(o),s.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i))}}class Yat extends hpe{constructor(e){super(e);const i=this._context.configuration.options.get(146);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class Zat extends hpe{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Gr(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;Gr(this.domNode,t.get(50));const i=t.get(146);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class TM{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)==null||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)==null||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)==null||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)==null||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return TM.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(i.type===5||i.type===8)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new de(e.afterLineNumber,1)).lineNumber}}}class Xat extends Vo{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=Cn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(146),r=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==r&&(this.contentWidth=r,e=!0);const s=i.contentLeft;return this.contentLeft!==s&&(this.contentLeft=s,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const i=e.getDecorationsInViewport();for(const r of i){if(!r.options.blockClassName)continue;let s=this.blocks[t];s||(s=this.blocks[t]=Cn(document.createElement("div")),this.domNode.appendChild(s));let o,a;r.options.blockIsAfterEnd?(o=e.getVerticalOffsetAfterLineNumber(r.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(r.range.endLineNumber,!0)):(o=e.getVerticalOffsetForLineNumber(r.range.startLineNumber,!0),a=r.range.isEmpty()&&!r.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(r.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(r.range.endLineNumber,!0));const[l,c,u,d]=r.options.blockPadding??[0,0,0,0];s.setClassName("blockDecorations-block "+r.options.blockClassName),s.setLeft(this.contentLeft-d),s.setWidth(this.contentWidth+d+c),s.setTop(o-e.scrollTop-l),s.setHeight(a-o+l+u),t++}for(let r=t;r<this.blocks.length;r++)this.blocks[r].domNode.remove();this.blocks.length=t}}class Qat extends Vo{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Cn(document.createElement("div")),Cc.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Cn(document.createElement("div")),Cc.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new Jat(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,r,s){this._widgets[e.getId()].setPosition(t,i,r,s),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const r=i.domNode.domNode;r.remove(),r.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class Jat{constructor(e,t,i){this._primaryAnchor=new g_(null,null),this._secondaryAnchor=new g_(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=Cn(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const r=this._context.configuration.options,s=r.get(146);this._fixedOverflowWidgets=r.get(42),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=r.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){const i=t.get(146);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){this._affinity=e,this._primaryAnchor=r(t,this._context.viewModel,this._affinity),this._secondaryAnchor=r(i,this._context.viewModel,this._affinity);function r(s,o,a){if(!s)return new g_(null,null);const l=o.model.validatePosition(s);if(o.coordinatesConverter.modelPositionIsVisible(l)){const c=o.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new g_(s,c)}return new g_(s,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(t==null?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,r){this._setPosition(r,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,r){const s=e.top,o=s,a=e.top+e.height,l=r.viewportHeight-a,c=s-i,u=o>=i,d=a,h=l>=i;let f=e.left;return f+t>r.scrollLeft+r.viewportWidth&&(f=r.scrollLeft+r.viewportWidth-t),f<r.scrollLeft&&(f=r.scrollLeft),{fitsAbove:u,aboveTop:c,fitsBelow:h,belowTop:d,left:f}}_layoutHorizontalSegmentInPage(e,t,i,r){const a=Math.max(15,t.left-r),l=Math.min(t.left+t.width+r,e.width-15),u=this._viewDomNode.domNode.ownerDocument.defaultView;let d=t.left+i-((u==null?void 0:u.scrollX)??0);if(d+r>l){const h=d-(l-r);d-=h,i-=h}if(d<a){const h=d-a;d-=h,i-=h}return[i,d]}_layoutBoxInPage(e,t,i,r){const s=e.top-i,o=e.top+e.height,a=Ta(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,u=a.top+s-((c==null?void 0:c.scrollY)??0),d=a.top+o-((c==null?void 0:c.scrollY)??0),h=t8(l.body),[f,g]=this._layoutHorizontalSegmentInPage(h,a,e.left-r.scrollLeft+this._contentLeft,t),p=22,v=22,b=u>=p,_=d+i<=h.height-v;return this._fixedOverflowWidgets?{fitsAbove:b,aboveTop:Math.max(u,p),fitsBelow:_,belowTop:d,left:g}:{fitsAbove:b,aboveTop:s,fitsBelow:_,belowTop:o,left:f}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new p_(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var o,a;const t=s(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),i=((o=this._secondaryAnchor.viewPosition)==null?void 0:o.lineNumber)===((a=this._primaryAnchor.viewPosition)==null?void 0:a.lineNumber)?this._secondaryAnchor.viewPosition:null,r=s(i,this._affinity,this._lineHeight);return{primary:t,secondary:r};function s(l,c,u){if(!l)return null;const d=e.visibleRangeForPosition(l);if(!d)return null;const h=l.column===1&&c===3?0:d.left,f=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new VQ(f,h,u)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const r=this._context.configuration.options.get(50);let s=t.left;return s<e.left?s=Math.max(s,e.left-i+r.typicalFullwidthCharacterWidth):s=Math.min(s,e.left+i-r.typicalFullwidthCharacterWidth),new VQ(e.top,s,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=PA(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const r=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let s;this.allowEditorOverflow?s=this._layoutBoxInPage(r,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):s=this._layoutBoxInViewport(r,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let o=1;o<=2;o++)for(const a of this._preference)if(a===1){if(!s)return null;if(o===2||s.fitsAbove)return{kind:"inViewport",coordinate:new p_(s.aboveTop,s.left),position:1}}else if(a===2){if(!s)return null;if(o===2||s.fitsBelow)return{kind:"inViewport",coordinate:new p_(s.belowTop,s.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new p_(r.top,r.left)),position:0}:{kind:"inViewport",coordinate:new p_(r.top,r.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){var t;if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,((t=this._renderData)==null?void 0:t.kind)==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&PA(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&PA(this._actual.afterRender,this._actual,this._renderData.position)}}class g_{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class p_{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class VQ{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function PA(n,e,...t){try{return n.call(e,...t)}catch{return null}}class fpe extends Tm{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new an(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const s of this._selections)t.add(s.positionLineNumber);const i=Array.from(t);i.sort((s,o)=>s-o),rr(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const r=this._selections.every(s=>s.isEmpty());return this._selectionIsEmpty!==r&&(this._selectionIsEmpty=r,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,r=[];for(let o=t;o<=i;o++){const a=o-t;r[a]=""}if(this._wordWrap){const o=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new de(a,1)).lineNumber,u=l.convertModelPositionToViewPosition(new de(c,1)).lineNumber,d=l.convertModelPositionToViewPosition(new de(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,h=Math.max(u,t),f=Math.min(d,i);for(let g=h;g<=f;g++){const p=g-t;r[p]=o}}}const s=this._renderOne(e,!0);for(const o of this._cursorLineNumbers){if(o<t||o>i)continue;const a=o-t;r[a]=s}this._renderData=r}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class elt extends fpe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class tlt extends fpe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}Yd((n,e)=>{const t=n.getColor(Bfe);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||n.defines(bX)){const i=n.getColor(bX);i&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),A0(n.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class nlt extends Tm{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],r=0;for(let l=0,c=t.length;l<c;l++){const u=t[l];u.options.className&&(i[r++]=u)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const u=l.options.className,d=c.options.className;return u<d?-1:u>d?1:te.compareRangesUsingStarts(l.range,c.range)});const s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=s;l<=o;l++){const c=l-s;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const r=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let o=0,a=t.length;o<a;o++){const l=t[o];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',u=Math.max(l.range.startLineNumber,r),d=Math.min(l.range.endLineNumber,s);for(let h=u;h<=d;h++){const f=h-r;i[f]+=c}}}_renderNormalDecorations(e,t,i){const r=e.visibleRange.startLineNumber;let s=null,o=!1,a=null,l=!1;for(let c=0,u=t.length;c<u;c++){const d=t[c];if(d.options.isWholeLine)continue;const h=d.options.className,f=!!d.options.showIfCollapsed;let g=d.range;if(f&&g.endColumn===1&&g.endLineNumber!==g.startLineNumber&&(g=new te(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.viewModel.getLineMaxColumn(g.endLineNumber-1))),s===h&&o===f&&te.areIntersectingOrTouching(a,g)){a=te.plusRange(a,g);continue}s!==null&&this._renderNormalDecoration(e,a,s,l,o,r,i),s=h,o=f,a=g,l=d.options.shouldFillLineOnLineBreak??!1}s!==null&&this._renderNormalDecoration(e,a,s,l,o,r,i)}_renderNormalDecoration(e,t,i,r,s,o,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(l)for(let c=0,u=l.length;c<u;c++){const d=l[c];if(d.outsideRenderedLine)continue;const h=d.lineNumber-o;if(s&&d.ranges.length===1){const f=d.ranges[0];if(f.width<this._typicalHalfwidthCharacterWidth){const g=Math.round(f.left+f.width/2),p=Math.max(0,Math.round(g-this._typicalHalfwidthCharacterWidth/2));d.ranges[0]=new LM(p,this._typicalHalfwidthCharacterWidth)}}for(let f=0,g=d.ranges.length;f<g;f++){const p=r&&d.continuesOnNextLine&&g===1,v=d.ranges[f],b='<div class="cdr '+i+'" style="left:'+String(v.left)+"px;width:"+(p?"100%;":String(v.width)+"px;")+'"></div>';a[h]+=b}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class ilt extends Vo{constructor(e,t,i,r){super(e);const s=this._context.configuration.options,o=s.get(104),a=s.get(75),l=s.get(40),c=s.get(107),u={listenOnDomNode:i.domNode,className:"editor-scrollable "+k8(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new tM(t.domNode,u,this._context.viewLayout.getScrollable())),Cc.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=Cn(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const d=(h,f,g)=>{const p={};{const v=h.scrollTop;v&&(p.scrollTop=this._context.viewLayout.getCurrentScrollTop()+v,h.scrollTop=0)}if(g){const v=h.scrollLeft;v&&(p.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+v,h.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(p,1)};this._register(_e(i.domNode,"scroll",h=>d(i.domNode,!0,!0))),this._register(_e(t.domNode,"scroll",h=>d(t.domNode,!0,!1))),this._register(_e(r.domNode,"scroll",h=>d(r.domNode,!0,!1))),this._register(_e(this.scrollbarDomNode.domNode,"scroll",h=>d(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,i=t.get(104),r=t.get(75),s=t.get(40),o=t.get(107),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:r,fastScrollSensitivity:s,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+k8(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class O7{constructor(e,t,i,r,s){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=r,this._decorationToRenderBrand=void 0,this.zIndex=s??0}}class rlt{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class slt{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class gpe extends Tm{_render(e,t,i){const r=[];for(let a=e;a<=t;a++){const l=a-e;r[l]=new slt}if(i.length===0)return r;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let s=null,o=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],u=c.className,d=c.zIndex;let h=Math.max(c.startLineNumber,e)-e;const f=Math.min(c.endLineNumber,t)-e;s===u?(h=Math.max(o+1,h),o=Math.max(o,f)):(s=u,o=f);for(let g=h;g<=o;g++)r[g].add(new rlt(u,d,c.tooltip))}return r}}class olt extends Vo{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(146);this.domNode=Cn(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=Cn(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&te.equalsRange(i.preference.range,t.range)?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const r=this._widgets[t].domNode.domNode;delete this._widgets[t],r.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var o;const i=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s=e.getDecorationsInViewport();for(const a of s){const l=a.options.glyphMarginClassName;if(!l)continue;const c=Math.max(a.range.startLineNumber,i),u=Math.min(a.range.endLineNumber,r),d=((o=a.options.glyphMargin)==null?void 0:o.position)??Nf.Center,h=a.options.zIndex??0;for(let f=c;f<=u;f++){const g=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new de(f,0)),p=this._context.viewModel.glyphLanes.getLanesAtLine(g.lineNumber).indexOf(d);t.push(new alt(f,p,h,l))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(const s of Object.values(this._widgets)){const o=s.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(te.lift(o));if(!a||!l||l<i||a>r)continue;const c=Math.max(a,i),u=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new de(c,0)),d=this._context.viewModel.glyphLanes.getLanesAtLine(u.lineNumber).indexOf(s.preference.lane);t.push(new llt(c,d,s.preference.zIndex,s))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((i,r)=>i.lineNumber===r.lineNumber?i.laneIndex===r.laneIndex?i.zIndex===r.zIndex?r.type===i.type?i.type===0&&r.type===0?i.className<r.className?-1:1:0:r.type-i.type:r.zIndex-i.zIndex:i.laneIndex-r.laneIndex:i.lineNumber-r.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const r of Object.values(this._widgets))r.renderInfo=null;const t=new Hd(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const r=t.peek();if(!r)break;const s=t.takeWhile(a=>a.lineNumber===r.lineNumber&&a.laneIndex===r.laneIndex);if(!s||s.length===0)break;const o=s[0];if(o.type===0){const a=[];for(const l of s){if(l.zIndex!==o.zIndex||l.type!==o.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}i.push(o.accept(a.join(" ")))}else o.widget.renderInfo={lineNumber:o.lineNumber,laneIndex:o.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const i of Object.values(this._widgets))i.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(!i.renderInfo)i.domNode.setDisplay("none");else{const r=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],s=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(r),i.domNode.setLeft(s),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}for(let i=0;i<this._decorationGlyphsToRender.length;i++){const r=this._decorationGlyphsToRender[i],s=e.viewportData.relativeVerticalOffset[r.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+r.laneIndex*this._lineHeight;let a;i<this._managedDomNodes.length?a=this._managedDomNodes[i]:(a=Cn(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+r.combinedClassName),a.setPosition("absolute"),a.setTop(s),a.setLeft(o),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}}}class alt{constructor(e,t,i,r){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=r,this.type=0}accept(e){return new clt(this.lineNumber,this.laneIndex,e)}}class llt{constructor(e,t,i,r){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=r,this.type=1}}class clt{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}class ult extends Tm{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(147),r=t.get(50);this._spaceWidth=r.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(147),r=t.get(50);return this._spaceWidth=r.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var r;const i=e.selections[0].getPosition();return(r=this._primaryPosition)!=null&&r.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var l,c;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,r=e.scrollWidth,s=this._primaryPosition,o=this.getGuidesByLine(t,Math.min(i+1,this._context.viewModel.getLineCount()),s),a=[];for(let u=t;u<=i;u++){const d=u-t,h=o[d];let f="";const g=((l=e.visibleRangeForPosition(new de(u,1)))==null?void 0:l.left)??0;for(const p of h){const v=p.column===-1?g+(p.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new de(u,p.column)).left;if(v>r||this._maxIndentLeft>0&&v>this._maxIndentLeft)break;const b=p.horizontalLine?p.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",_=p.horizontalLine?(((c=e.visibleRangeForPosition(new de(u,p.horizontalLine.endColumn)))==null?void 0:c.left)??v+this._spaceWidth)-v:this._spaceWidth;f+=`<div class="core-guide ${p.className} ${b}" style="left:${v}px;width:${_}px"></div>`}a[d]=f}this._renderResult=a}getGuidesByLine(e,t,i){const r=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Cp.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Cp.EnabledForActive:Cp.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,s=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const d=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);o=d.startLineNumber,a=d.endLineNumber,l=d.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),u=[];for(let d=e;d<=t;d++){const h=new Array;u.push(h);const f=r?r[d-e]:[],g=new Hd(f),p=s?s[d-e]:0;for(let v=1;v<=p;v++){const b=(v-1)*c+1,_=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&o<=d&&d<=a&&v===l;h.push(...g.takeWhile(C=>C.visibleColumn<b)||[]);const y=g.peek();(!y||y.visibleColumn!==b||y.horizontalLine)&&h.push(new Zg(b,-1,`core-guide-indent lvl-${(v-1)%30}`+(_?" indent-active":""),null,-1,-1))}h.push(...g.takeWhile(v=>!0)||[])}return u}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function tv(n){if(!(n&&n.isTransparent()))return n}Yd((n,e)=>{const t=[{bracketColor:zfe,guideColor:gtt,guideColorActive:Ctt},{bracketColor:Wfe,guideColor:ptt,guideColorActive:ytt},{bracketColor:$fe,guideColor:mtt,guideColorActive:wtt},{bracketColor:Ufe,guideColor:vtt,guideColorActive:Stt},{bracketColor:jfe,guideColor:btt,guideColorActive:xtt},{bracketColor:Kfe,guideColor:_tt,guideColorActive:ktt}],i=new nge,r=[{indentColor:TS,indentColorActive:IS},{indentColor:Get,indentColorActive:Jet},{indentColor:Yet,indentColorActive:ett},{indentColor:Zet,indentColorActive:ttt},{indentColor:Xet,indentColorActive:ntt},{indentColor:Qet,indentColorActive:itt}],s=t.map(a=>{const l=n.getColor(a.bracketColor),c=n.getColor(a.guideColor),u=n.getColor(a.guideColorActive),d=tv(tv(c)??(l==null?void 0:l.transparent(.3))),h=tv(tv(u)??l);if(!(!d||!h))return{guideColor:d,guideColorActive:h}}).filter(k1),o=r.map(a=>{const l=n.getColor(a.indentColor),c=n.getColor(a.indentColorActive),u=tv(l),d=tv(c);if(!(!u||!d))return{indentColor:u,indentColorActive:d}}).filter(k1);if(s.length>0){for(let a=0;a<30;a++){const l=s[a%s.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${i.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${i.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${i.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class FA{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class dlt{constructor(){this._currentVisibleRange=new te(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class hlt{constructor(e,t,i,r,s,o,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=r,this.startScrollTop=s,this.stopScrollTop=o,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class flt{constructor(e,t,i,r,s){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=r,this.scrollType=s,this.type="selections";let o=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const u=t[l];o=Math.min(o,u.startLineNumber),a=Math.max(a,u.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=a}}const QT=class QT extends Vo{constructor(e,t){super(e);const i=this._context.configuration,r=this._context.configuration.options,s=r.get(50),o=r.get(147);this._lineHeight=r.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=r.get(101),this._cursorSurroundingLines=r.get(29),this._cursorSurroundingLinesStyle=r.get(30),this._canUseLayerHinting=!r.get(32),this._viewLineOptions=new IQ(i,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new dpe({createLine:()=>new ud(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,Cc.write(this.domNode,8),this.domNode.setClassName(`view-lines ${G0}`),Gr(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new bs(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new bs(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new dlt,this._horizontalRevealRequest=null,this._stickyScrollEnabled=r.get(116).enabled,this._maxNumberStickyLines=r.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(50),r=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,Gr(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new IQ(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=i;s<=r;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let r=!1;for(let s=t;s<=i;s++)r=this._visibleLines.getVisibleLine(s).onSelectionChanged()||r;return r}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let r=t;r<=i;r++)this._visibleLines.getVisibleLine(r).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new hlt(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new flt(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const r=this._getLineNumberFor(i);if(r===-1||r<1||r>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(r)===1)return new de(r,1);const s=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(r<s||r>o)return null;let a=this._visibleLines.getVisibleLine(r).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(r);return a<l&&(a=l),new de(r,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===ud.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let r=t;r<=i;r++){const s=this._visibleLines.getVisibleLine(r);if(e===s.getDomNode())return r}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const r=new FA(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getWidth(r);return this._updateLineWidthsSlowIfDomDidLayout(r),s}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,r=te.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!r)return null;const s=[];let o=0;const a=new FA(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new de(r.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),u=this._visibleLines.getEndLineNumber();for(let d=r.startLineNumber;d<=r.endLineNumber;d++){if(d<c||d>u)continue;const h=d===r.startLineNumber?r.startColumn:1,f=d!==r.endLineNumber,g=f?this._context.viewModel.getLineMaxColumn(d):r.endColumn,p=this._visibleLines.getVisibleLine(d).getVisibleRangesForRange(d,h,g,a);if(p){if(t&&d<i){const v=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new de(d+1,1)).lineNumber,v!==l&&(p.ranges[p.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[o++]=new Zot(p.outsideRenderedLine,d,LM.from(p.ranges),f)}}return this._updateLineWidthsSlowIfDomDidLayout(a),o===0?null:s}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const r=new FA(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,r);return this._updateLineWidthsSlowIfDomDidLayout(r),s}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new Xot(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let r=1,s=!0;for(let o=t;o<=i;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){s=!1;continue}r=Math.max(r,a.getWidth(null))}return s&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(r),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=i;s<=r;s++){const o=this._visibleLines.getVisibleLine(s);if(o.needsMonospaceFontCheck()){const a=o.getWidth(null);a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=i;s<=r;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const r=this._computeScrollLeftToReveal(i);r&&(this._isViewportWrapping||this._ensureMaxLineWidth(r.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:r.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),co&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let s=i;s<=r;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,r,s,o){const a=e.top,l=e.height,c=a+l;let u,d,h;if(s&&s.length>0){let b=s[0].startLineNumber,_=s[0].endLineNumber;for(let y=1,C=s.length;y<C;y++){const w=s[y];b=Math.min(b,w.startLineNumber),_=Math.max(_,w.endLineNumber)}u=!1,d=this._context.viewLayout.getVerticalOffsetForLineNumber(b),h=this._context.viewLayout.getVerticalOffsetForLineNumber(_)+this._lineHeight}else if(r)u=!0,d=this._context.viewLayout.getVerticalOffsetForLineNumber(r.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(r.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default";let g=0,p=0;if(f)i||(g=this._lineHeight);else{const b=l/this._lineHeight,_=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),y=Math.min(b/2,_);g=y*this._lineHeight,p=Math.max(0,y-1)*this._lineHeight}i||(o===0||o===4)&&(p+=this._lineHeight),d-=g,h+=p;let v;if(h-d>l){if(!u)return-1;v=d}else if(o===5||o===6)if(o===6&&a<=d&&h<=c)v=a;else{const b=Math.max(5*this._lineHeight,l*.2),_=d-b,y=h-l;v=Math.max(y,_)}else if(o===1||o===2)if(o===2&&a<=d&&h<=c)v=a;else{const b=(d+h)/2;v=Math.max(0,b-l/2)}else v=this._computeMinimumScrolling(a,c,d,h,o===3,o===4);return v}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(146),r=t.left,s=r+t.width-i.verticalScrollbarWidth;let o=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const u of c.ranges)o=Math.min(o,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const u=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!u)return null;for(const d of u.ranges)o=Math.min(o,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}return e.minimalReveal||(o=Math.max(0,o-QT.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(r,s,o,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,i,r,s,o){e=e|0,t=t|0,i=i|0,r=r|0,s=!!s,o=!!o;const a=t-e;if(r-i<a){if(s)return i;if(o)return Math.max(0,r-a);if(i<e)return i;if(r>t)return Math.max(0,r-a)}else return i;return e}};QT.HORIZONTAL_EXTRA_PX=30;let P7=QT;class glt extends gpe{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(146);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let r=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(i[r++]=new O7(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const u=a.options.firstLineDecorationClassName;u&&(i[r++]=new O7(a.range.startLineNumber,a.range.startLineNumber,u,a.options.linesDecorationsTooltip??null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,r=this._render(t,i,this._getDecorations(e)),s=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=i;c++){const u=c-t,d=r[u].getDecorations();let h="";for(const f of d){let g='<div class="cldr '+f.className;f.tooltip!==null&&(g+='" title="'+f.tooltip),g+=a,h+=g}l[u]=h}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class plt extends gpe{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let r=0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.options.marginClassName,c=a.options.zIndex;l&&(i[r++]=new O7(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,r=this._render(t,i,this._getDecorations(e)),s=[];for(let o=t;o<=i;o++){const a=o-t,l=r[a].getDecorations();let c="";for(const u of l)c+='<div class="cmdr '+u.className+'" style=""></div>';s[a]=c}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const wh=class wh{constructor(e,t,i,r){this._rgba8Brand=void 0,this.r=wh._clamp(e),this.g=wh._clamp(t),this.b=wh._clamp(i),this.a=wh._clamp(r)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};wh.Empty=new wh(0,0,0,0);let Dd=wh;const JT=class JT extends ke{static getInstance(){return this._INSTANCE||(this._INSTANCE=new JT),this._INSTANCE}constructor(){super(),this._onDidChange=new ae,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Hi.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=Hi.getColorMap();if(!e){this._colors=[Dd.Empty],this._backgroundIsLight=!0;return}this._colors=[Dd.Empty];for(let i=1;i<e.length;i++){const r=e[i].rgba;this._colors[i]=new Dd(r.r,r.g,r.b,Math.round(r.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};JT._INSTANCE=null;let JN=JT;const mlt=(()=>{const n=[];for(let e=32;e<=126;e++)n.push(e);return n.push(65533),n})(),vlt=(n,e)=>(n-=32,n<0||n>96?e<=2?(n+96)%96:95:n);class Tw{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Tw.soften(e,12/15),this.charDataLight=Tw.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let r=0,s=e.length;r<s;r++)i[r]=UL(e[r]*t);return i}renderChar(e,t,i,r,s,o,a,l,c,u,d){const h=1*this.scale,f=2*this.scale,g=d?1:f;if(t+h>e.width||i+g>e.height){console.warn("bad render request outside image data");return}const p=u?this.charDataLight:this.charDataNormal,v=vlt(r,c),b=e.width*4,_=a.r,y=a.g,C=a.b,w=s.r-_,x=s.g-y,k=s.b-C,E=Math.max(o,l),L=e.data;let M=v*h*f,D=i*b+t*4;for(let O=0;O<g;O++){let A=D;for(let R=0;R<h;R++){const V=p[M++]/255*(o/255);L[A++]=_+w*V,L[A++]=y+x*V,L[A++]=C+k*V,L[A++]=E}D+=b}}blockRenderChar(e,t,i,r,s,o,a,l){const c=1*this.scale,u=2*this.scale,d=l?1:u;if(t+c>e.width||i+d>e.height){console.warn("bad render request outside image data");return}const h=e.width*4,f=.5*(s/255),g=o.r,p=o.g,v=o.b,b=r.r-g,_=r.g-p,y=r.b-v,C=g+b*f,w=p+_*f,x=v+y*f,k=Math.max(s,a),E=e.data;let L=i*h+t*4;for(let M=0;M<d;M++){let D=L;for(let O=0;O<c;O++)E[D++]=C,E[D++]=w,E[D++]=x,E[D++]=k;L+=h}}}const zQ={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},WQ=n=>{const e=new Uint8ClampedArray(n.length/2);for(let t=0;t<n.length;t+=2)e[t>>1]=zQ[n[t]]<<4|zQ[n[t+1]]&15;return e},$Q={1:L1(()=>WQ("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:L1(()=>WQ("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class BC{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return $Q[e]?i=new Tw($Q[e](),e):i=BC.createFromSampleData(BC.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let r=0;for(const s of mlt)i.fillText(String.fromCharCode(s),r,16/2),r+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const r=BC._downsample(e,t);return new Tw(r,t)}static _downsampleChar(e,t,i,r,s){const o=1*s,a=2*s;let l=r,c=0;for(let u=0;u<a;u++){const d=u/a*16,h=(u+1)/a*16;for(let f=0;f<o;f++){const g=f/o*10,p=(f+1)/o*10;let v=0,b=0;for(let y=d;y<h;y++){const C=t+Math.floor(y)*3840,w=1-(y-Math.floor(y));for(let x=g;x<p;x++){const k=1-(x-Math.floor(x)),E=C+Math.floor(x)*4,L=k*w;b+=L,v+=e[E]*e[E+3]/255*L}}const _=v/b;c=Math.max(c,_),i[l++]=UL(_)}}return c}static _downsample(e,t){const i=2*t*1*t,r=i*96,s=new Uint8ClampedArray(r);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,s,o,t)),o+=i,a+=10*4;if(l>0){const c=255/l;for(let u=0;u<r;u++)s[u]*=c}return s}}const blt=Ao?'"Segoe WPC", "Segoe UI", sans-serif':hn?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',_lt=140,Clt=2;class Y0{constructor(e,t,i){const r=e.options,s=r.get(144),o=r.get(146),a=o.minimap,l=r.get(50),c=r.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=r.get(106),this.paddingTop=r.get(84).top,this.paddingBottom=r.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=r.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=blt,this.sectionHeaderFontSize=c.sectionHeaderFontSize*s,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=Y0._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=L1(()=>BC.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=Y0._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=Y0._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(VYe);return i?new Dd(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(zYe);return t?Dd._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const i=e.getColor(_S);return i?new Dd(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class HC{constructor(e,t,i,r,s,o,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=r,this.sliderTop=s,this.sliderHeight=o,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,r,s,o,a,l,c,u,d){const h=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){let x=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(x+=Math.max(0,s-e.lineHeight-e.paddingBottom));const k=Math.max(1,Math.floor(s*s/x)),E=Math.max(0,e.minimapHeight-k),L=E/(u-s),M=c*L,D=E>0,O=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),A=Math.floor(e.paddingTop/e.lineHeight);return new HC(c,u,D,L,M,k,A,1,Math.min(a,O))}let v;if(o&&i!==a){const x=i-t+1;v=Math.floor(x*f/h)}else{const x=s/p;v=Math.floor(x*f/h)}const b=Math.floor(e.paddingTop/p);let _=Math.floor(e.paddingBottom/p);if(e.scrollBeyondLastLine){const x=s/p;_=Math.max(_,x-1)}let y;if(_>0){const x=s/p;y=(b+a+_-x-1)*f/h}else y=Math.max(0,(b+a)*f/h-v);y=Math.min(e.minimapHeight-v,y);const C=y/(u-s),w=c*C;if(g>=b+a+_){const x=y>0;return new HC(c,u,x,C,w,v,b,1,a)}else{let x;t>1?x=t+b:x=Math.max(1,c/p);let k,E=Math.max(1,Math.floor(x-w*h/f));E<b?(k=b-E+1,E=1):(k=0,E=Math.max(1,E-b)),d&&d.scrollHeight===u&&(d.scrollTop>c&&(E=Math.min(E,d.startLineNumber),k=Math.max(k,d.topPaddingLineCount)),d.scrollTop<c&&(E=Math.max(E,d.startLineNumber),k=Math.min(k,d.topPaddingLineCount)));const L=Math.min(a,E-k+g-1),M=(c-r)/p;let D;return c>=e.paddingTop?D=(t-E+k+M)*f/h:D=c/e.paddingTop*(k+M)*f/h,new HC(c,u,!0,C,D,v,k,E,L)}}}const eI=class eI{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};eI.INVALID=new eI(-1);let eT=eI;class UQ{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new upe({createLine:()=>eT.INVALID}),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let r=0,s=i.length;r<s;r++)if(i[r].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class _z{constructor(e,t,i,r){this._backgroundFillData=_z._createBackgroundFillData(t,i,r),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const r=i.r,s=i.g,o=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let u=0;u<t;u++)for(let d=0;d<e;d++)l[c]=r,l[c+1]=s,l[c+2]=o,l[c+3]=a,c+=4;return l}}class Iw{static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:r}=L0.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),s=t/r,o=s/2;if(!i||i.minimapLines.length===0){const v=[];if(v[0]=1,r>1){for(let b=0,_=r-1;b<_;b++)v[b]=Math.round(b*s+o);v[r-1]=t}return[new Iw(s,v),[]]}const a=i.minimapLines,l=a.length,c=[];let u=0,d=0,h=1;const f=10;let g=[],p=null;for(let v=0;v<r;v++){const b=Math.max(h,Math.round(v*s)),_=Math.max(b,Math.round((v+1)*s));for(;u<l&&a[u]<b;){if(g.length<f){const C=u+1+d;p&&p.type==="deleted"&&p._oldIndex===u-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:u,deleteFromLineNumber:C,deleteToLineNumber:C},g.push(p)),d--}u++}let y;if(u<l&&a[u]<=_)y=a[u],u++;else if(v===0?y=1:v+1===r?y=t:y=Math.round(v*s+o),g.length<f){const C=u+1+d;p&&p.type==="inserted"&&p._i===v-1?p.insertToLineNumber++:(p={type:"inserted",_i:v,insertFromLineNumber:C,insertToLineNumber:C},g.push(p)),d++}c[v]=y,h=y}if(g.length<f)for(;u<l;){const v=u+1+d;p&&p.type==="deleted"&&p._oldIndex===u-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:u,deleteFromLineNumber:v,deleteToLineNumber:v},g.push(p)),d--,u++}else g=[{type:"flush"}];return[new Iw(s,c),g]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let r=this.modelLineToMinimapLine(t)-1;for(;r+1<this.minimapLines.length&&this.minimapLines[r+1]<=t;)r++;if(i===r){const s=this.minimapLines[i];if(s<e||s>t)return null}return[i+1,r+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),r=this.modelLineToMinimapLine(t);return e!==t&&r===i&&(r===this.minimapLines.length?i>1&&i--:r++),[i,r]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,r=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,s),r=Math.max(r,s)):this.minimapLines[s]-=t;return[i,r]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class ylt extends Vo{constructor(e){super(e),this._sectionHeaderCache=new bS(10,1.5),this.tokensColorTracker=JN.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Y0(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Iw.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new Xv(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Y0(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const r=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);r&&t.push({fromLineNumber:r[0],toLineNumber:r[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const r={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(r)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,i]=Iw.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const r of i)switch(r.type){case"deleted":this._actual.onLinesDeleted(r.deleteFromLineNumber,r.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(r.insertFromLineNumber,r.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const r=[];for(let s=0,o=t-e+1;s<o;s++)i[s]?r[s]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+s-1]):r[s]=null;return r}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new an(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const i=this._getMinimapDecorationsInViewport(e,t).filter(r=>{var s;return!((s=r.options.minimap)!=null&&s.sectionHeaderStyle)});if(this._samplingState){const r=[];for(const s of i){if(!s.options.minimap)continue;const o=s.range,a=this._samplingState.modelLineToMinimapLine(o.startLineNumber),l=this._samplingState.modelLineToMinimapLine(o.endLineNumber);r.push(new Xge(new te(a,o.startColumn,l,o.endColumn),s.options))}return r}return i}getSectionHeaderDecorationsInViewport(e,t){const i=this.options.minimapLineHeight,s=this.options.sectionHeaderFontSize/i;return e=Math.floor(Math.max(1,e-s)),this._getMinimapDecorationsInViewport(e,t).filter(o=>{var a;return!!((a=o.options.minimap)!=null&&a.sectionHeaderStyle)})}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const r=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];i=new te(r,1,s,this._context.viewModel.getLineMaxColumn(s))}else i=new te(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(i)}getSectionHeaderText(e,t){var o;const i=(o=e.options.minimap)==null?void 0:o.sectionHeaderText;if(!i)return null;const r=this._sectionHeaderCache.get(i);if(r)return r;const s=t(i);return this._sectionHeaderCache.set(i,s),s}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new te(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class Xv extends ke{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(xZ),this._domNode=Cn(document.createElement("div")),Cc.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Cn(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Cn(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Cn(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Cn(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Cn(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=vr(this._domNode.domNode,We.POINTER_DOWN,i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.button===0&&this._lastRenderData){const c=Ta(this._slider.domNode),u=c.top+c.height/2;this._startSliderDragging(i,u,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let l=Math.floor(o/s)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new eM,this._sliderPointerDownListener=vr(this._slider.domNode,We.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=zs.addTarget(this._domNode.domNode),this._sliderTouchStartListener=_e(this._domNode.domNode,Qn.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=_e(this._domNode.domNode,Qn.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=vr(this._domNode.domNode,Qn.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const r=e.pageX;this._slider.toggleClassName("active",!0);const s=(o,a)=>{const l=Ta(this._domNode.domNode),c=Math.min(Math.abs(a-r),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(Ao&&c>_lt){this._model.setScrollTop(i.scrollTop);return}const u=o-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(u))};e.pageY!==t&&s(e.pageY,r),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>s(o.pageY,o.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new _z(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var i;return(i=this._lastRenderData)==null||i.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var i;return(i=this._lastRenderData)==null||i.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(xZ),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=HC.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(te.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((h,f)=>(h.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:r,canvasInnerHeight:s}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,r,s);const u=new jQ(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,u,e,o),this._renderDecorationsLineHighlights(c,i,u,e,o);const d=new jQ(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,d,e,o,l,a,r),this._renderDecorationsHighlights(c,i,d,e,o,l,a,r),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,r,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=r.intersectWithViewport(l);if(!c)continue;const[u,d]=c;for(let g=u;g<=d;g++)i.set(g,!0);const h=r.getYForLineNumber(u,s),f=r.getYForLineNumber(d,s);a>=h||(a>o&&e.fillRect(Oc,o,e.canvas.width,a-o),o=h),a=f}a>o&&e.fillRect(Oc,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,i,r,s){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const u=r.intersectWithViewport(l.range);if(!u)continue;const[d,h]=u,f=c.getColor(this._theme.value);if(!f||f.isTransparent())continue;let g=o.get(f.toString());g||(g=f.transparent(.5).toString(),o.set(f.toString(),g)),e.fillStyle=g;for(let p=d;p<=h;p++){if(i.has(p))continue;i.set(p,!0);const v=r.getYForLineNumber(d,s);e.fillRect(Oc,v,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,i,r,s,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const u=r.intersectWithViewport(c);if(!u)continue;const[d,h]=u;for(let f=d;f<=h;f++)this.renderDecorationOnLine(e,i,c,this._selectionColor,r,f,s,s,o,a,l)}}_renderDecorationsHighlights(e,t,i,r,s,o,a,l){for(const c of t){const u=c.options.minimap;if(!u)continue;const d=r.intersectWithViewport(c.range);if(!d)continue;const[h,f]=d,g=u.getColor(this._theme.value);if(!(!g||g.isTransparent()))for(let p=h;p<=f;p++)switch(u.position){case 1:this.renderDecorationOnLine(e,i,c.range,g,r,p,s,s,o,a,l);continue;case 2:{const v=r.getYForLineNumber(p,s);this.renderDecoration(e,g,2,v,Clt,s);continue}}}}renderDecorationOnLine(e,t,i,r,s,o,a,l,c,u,d){const h=s.getYForLineNumber(o,l);if(h+a<0||h>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=i,p=f===o?i.startColumn:1,v=g===o?i.endColumn:this._model.getLineMaxColumn(o),b=this.getXOffsetForPosition(t,o,p,c,u,d),_=this.getXOffsetForPosition(t,o,v,c,u,d);this.renderDecoration(e,r,b,h,_-b,a)}getXOffsetForPosition(e,t,i,r,s,o){if(i===1)return Oc;if((i-1)*s>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Oc];let u=Oc;for(let d=1;d<c.length+1;d++){const h=c.charCodeAt(d-1),f=h===9?r*s:Ef(h)?2*s:s,g=u+f;if(g>=o){l[d]=o;break}l[d]=g,u=g}e.set(t,l)}return i-1<l.length?l[i-1]:o}renderDecoration(e,t,i,r,s,o){e.fillStyle=t&&t.toString()||"",e.fillRect(i,r,s,o)}_renderSectionHeaders(e){var p;const t=this._model.options.minimapLineHeight,i=this._model.options.sectionHeaderFontSize,r=this._model.options.sectionHeaderLetterSpacing,s=i*1.5,{canvasInnerWidth:o}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,u=`rgb(${c.r} ${c.g} ${c.b})`,d=u,h=this._decorationsCanvas.domNode.getContext("2d");h.letterSpacing=r+"px",h.font="500 "+i+"px "+this._model.options.sectionHeaderFontFamily,h.strokeStyle=d,h.lineWidth=.2;const f=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);f.sort((v,b)=>v.range.startLineNumber-b.range.startLineNumber);const g=Xv._fitSectionHeader.bind(null,h,o-Oc);for(const v of f){const b=e.getYForLineNumber(v.range.startLineNumber,t)+i,_=b-i,y=_+2,C=this._model.getSectionHeaderText(v,g);Xv._renderSectionLabel(h,C,((p=v.options.minimap)==null?void 0:p.sectionHeaderStyle)===2,l,u,o,_,s,b,y)}}static _fitSectionHeader(e,t,i){if(!i)return i;const r="",s=e.measureText(i).width,o=e.measureText(r).width;if(s<=t||s<=o)return i;const a=i.length,l=s/i.length,c=Math.floor((t-o)/l)-1;let u=Math.ceil(c/2);for(;u>0&&/\s/.test(i[u-1]);)--u;return i.substring(0,u)+r+i.substring(a-(c-u))}static _renderSectionLabel(e,t,i,r,s,o,a,l,c,u){t&&(e.fillStyle=r,e.fillRect(0,a,o,l),e.fillStyle=s,e.fillText(t,Oc,c)),i&&(e.beginPath(),e.moveTo(0,u),e.lineTo(o,u),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,r=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const V=this._lastRenderData._get();return new UQ(e,V.imageData,V.lines)}const s=this._getBuffer();if(!s)return null;const[o,a,l]=Xv._renderUntouchedLines(s,e.topPaddingLineCount,t,i,r,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),u=this._model.getOptions().tabSize,d=this._model.options.defaultBackgroundColor,h=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,p=g.backgroundIsLight(),v=this._model.options.renderMinimap,b=this._model.options.charRenderer(),_=this._model.options.fontScale,y=this._model.options.minimapCharWidth,w=(v===1?2:3)*_,x=r>w?Math.floor((r-w)/2):0,k=h.a/255,E=new Dd(Math.round((h.r-d.r)*k+d.r),Math.round((h.g-d.g)*k+d.g),Math.round((h.b-d.b)*k+d.b),255);let L=e.topPaddingLineCount*r;const M=[];for(let V=0,F=i-t+1;V<F;V++)l[V]&&Xv._renderLine(s,E,h.a,p,v,y,g,f,b,L,x,u,c[V],_,r),M[V]=new eT(L),L+=r;const D=o===-1?0:o,A=(a===-1?s.height:a)-D;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,D,s.width,A),new UQ(e,s,M)}static _renderUntouchedLines(e,t,i,r,s,o){const a=[];if(!o){for(let L=0,M=r-i+1;L<M;L++)a[L]=!0;return[-1,-1,a]}const l=o._get(),c=l.imageData.data,u=l.rendLineNumberStart,d=l.lines,h=d.length,f=e.width,g=e.data,p=(r-i+1)*s*f*4;let v=-1,b=-1,_=-1,y=-1,C=-1,w=-1,x=t*s;for(let L=i;L<=r;L++){const M=L-i,D=L-u,O=D>=0&&D<h?d[D].dy:-1;if(O===-1){a[M]=!0,x+=s;continue}const A=O*f*4,R=(O+s)*f*4,V=x*f*4,F=(x+s)*f*4;y===A&&w===V?(y=R,w=F):(_!==-1&&(g.set(c.subarray(_,y),C),v===-1&&_===0&&_===C&&(v=y),b===-1&&y===p&&_===C&&(b=_)),_=A,y=R,C=V,w=F),a[M]=!1,x+=s}_!==-1&&(g.set(c.subarray(_,y),C),v===-1&&_===0&&_===C&&(v=y),b===-1&&y===p&&_===C&&(b=_));const k=v===-1?-1:v/(f*4),E=b===-1?-1:b/(f*4);return[k,E,a]}static _renderLine(e,t,i,r,s,o,a,l,c,u,d,h,f,g,p){const v=f.content,b=f.tokens,_=e.width-o,y=p===1;let C=Oc,w=0,x=0;for(let k=0,E=b.getCount();k<E;k++){const L=b.getEndOffset(k),M=b.getForeground(k),D=a.getColor(M);for(;w<L;w++){if(C>_)return;const O=v.charCodeAt(w);if(O===9){const A=h-(w+x)%h;x+=A-1,C+=A*o}else if(O===32)C+=o;else{const A=Ef(O)?2:1;for(let R=0;R<A;R++)if(s===2?c.blockRenderChar(e,C,u+d,D,l,t,i,y):c.renderChar(e,C,u+d,O,D,l,t,i,g,r,y),C+=o,C>_)return}}}}}class jQ{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let r=0,s=this._endLineNumber-this._startLineNumber+1;r<s;r++)this._values[r]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class wlt extends Vo{constructor(e,t){super(e),this._viewDomNode=t;const r=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=r.verticalScrollbarWidth,this._minimapWidth=r.minimap.minimapWidth,this._horizontalScrollbarHeight=r.horizontalScrollbarHeight,this._editorHeight=r.height,this._editorWidth=r.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=Cn(document.createElement("div")),Cc.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=Cn(document.createElement("div")),Cc.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=Cn(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()],r=t?t.preference:null,s=t==null?void 0:t.stackOridinal;return i.preference===r&&i.stack===s?(this._updateMaxMinWidth(),!1):(i.preference=r,i.stack=s,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const r=this._widgets[t].domNode.domNode;delete this._widgets[t],r.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var i,r;let e=0;const t=Object.keys(this._widgets);for(let s=0,o=t.length;s<o;s++){const a=t[s],c=(r=(i=this._widgets[a].widget).getMinContentWidthInPx)==null?void 0:r.call(i);typeof c<"u"&&(e=Math.max(e,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const i=e.domNode;if(e.preference===null){i.setTop("");return}const r=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const s=i.domNode.clientHeight;i.setTop(this._editorHeight-s-2*this._horizontalScrollbarHeight)}else i.setTop(0);e.stack!==void 0?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(r)}else if(e.preference===2)i.domNode.style.right="50%",e.stack!==void 0?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{const{top:s,left:o}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;i.setTop(s+l.top),i.setLeft(o+l.left),i.setPosition("fixed")}else i.setTop(s),i.setLeft(o),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=Ta(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),i=Array.from({length:3},()=>0);t.sort((r,s)=>(this._widgets[r].stack||0)-(this._widgets[s].stack||0));for(let r=0,s=t.length;r<s;r++){const o=t[r];this._renderWidget(this._widgets[o],i)}}}class Slt{constructor(e,t){const i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(144),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);const r=t.getColor(ott);this.borderColor=r?r.toString():null,this.hideCursor=i.get(59);const s=t.getColor(gM);this.cursorColorSingle=s?s.transparent(.7).toString():null;const o=t.getColor(Hfe);this.cursorColorPrimary=o?o.transparent(.7).toString():null;const a=t.getColor(Vfe);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=i.get(73),c=l.enabled,u=l.side,d=t.getColor(att),h=Hi.getDefaultBackground();d?this.backgroundColor=d:c&&u==="right"?this.backgroundColor=h:this.backgroundColor=null;const g=i.get(146).overviewRuler;this.top=g.top,this.right=g.right,this.domWidth=g.width,this.domHeight=g.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[p,v]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=p,this.w=v}_initLanes(e,t,i){const r=t-e;if(i>=3){const s=Math.floor(r/3),o=Math.floor(r/3),a=r-s-o,l=e,c=l+s,u=l+s+a;return[[0,l,c,l,u,l,c,l],[0,s,a,s+a,o,s+a+o,a+o,s+a+o]]}else if(i===2){const s=Math.floor(r/2),o=r-s,a=e,l=a+s;return[[0,a,a,a,l,a,a,a],[0,s,s,s,o,s+o,s+o,s+o]]}else{const s=e,o=r;return[[0,s,s,s,s,s,s,s],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&De.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class xlt extends Vo{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=Cn(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Hi.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new de(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new Slt(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let r=this._settings.cursorColorSingle;i>1&&(r=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:r})}return this._cursorPositions.sort((t,i)=>de.compare(t.position,i.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?De.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(xw.compareByRenderingProps),this._actualShouldRender===1&&!xw.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!rr(this._renderedCursorPositions,this._cursorPositions,(g,p)=>g.position.lineNumber===p.position.lineNumber&&g.color===p.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,r=this._settings.canvasHeight,s=this._settings.lineHeight,o=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=r/a,c=6*this._settings.pixelRatio|0,u=c/2|0,d=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(d.fillStyle=De.Format.CSS.formatHexA(e),d.fillRect(0,0,i,r)):(d.clearRect(0,0,i,r),d.fillStyle=De.Format.CSS.formatHexA(e),d.fillRect(0,0,i,r)):d.clearRect(0,0,i,r);const h=this._settings.x,f=this._settings.w;for(const g of t){const p=g.color,v=g.data;d.fillStyle=p;let b=0,_=0,y=0;for(let C=0,w=v.length/3;C<w;C++){const x=v[3*C],k=v[3*C+1],E=v[3*C+2];let L=o.getVerticalOffsetForLineNumber(k)*l|0,M=(o.getVerticalOffsetForLineNumber(E)+s)*l|0;if(M-L<c){let O=(L+M)/2|0;O<u?O=u:O+u>r&&(O=r-u),L=O-u,M=O+u}L>y+1||x!==b?(C!==0&&d.fillRect(h[b],_,f[b],y-_),b=x,_=L,y=M):M>y&&(y=M)}d.fillRect(h[b],_,f[b],y-_)}if(!this._settings.hideCursor){const g=2*this._settings.pixelRatio|0,p=g/2|0,v=this._settings.x[7],b=this._settings.w[7];let _=-100,y=-100,C=null;for(let w=0,x=this._cursorPositions.length;w<x;w++){const k=this._cursorPositions[w].color;if(!k)continue;const E=this._cursorPositions[w].position;let L=o.getVerticalOffsetForLineNumber(E.lineNumber)*l|0;L<p?L=p:L+p>r&&(L=r-p);const M=L-p,D=M+g;M>y+1||k!==C?(w!==0&&C&&d.fillRect(v,_,b,y-_),_=M,y=D):D>y&&(y=D),C=k,d.fillStyle=k}C&&d.fillRect(v,_,b,y-_)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,r),d.moveTo(1,0),d.lineTo(i,0),d.stroke())}}class KQ{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class ppe{constructor(e,t,i,r){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=r,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class klt{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(ppe.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),r=Math.floor(this._outerHeight),s=i/r,o=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const u=this._zones[l];if(!e){const C=u.getColorZones();if(C){a.push(C);continue}}const d=this._getVerticalOffsetForLine(u.startLineNumber),h=u.heightInLines===0?this._getVerticalOffsetForLine(u.endLineNumber)+t:d+u.heightInLines*t,f=Math.floor(s*d),g=Math.floor(s*h);let p=Math.floor((f+g)/2),v=g-p;v<o&&(v=o),p-v<0&&(p=v),p+v>i&&(p=i-v);const b=u.color;let _=this._color2Id[b];_||(_=++this._lastAssignedId,this._color2Id[b]=_,this._id2Color[_]=b);const y=new KQ(p-v,p+v,_);u.setColorZone(y),a.push(y)}return this._colorZonesInvalid=!1,a.sort(KQ.compare),a}}class Elt extends MS{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=Cn(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new klt(r=>this._context.viewLayout.getVerticalOffsetForLineNumber(r)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),r=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(s,i,r,e),!0}_renderOneLane(e,t,i,r){let s=0,o=0,a=0;for(const l of t){const c=l.colorId,u=l.from,d=l.to;c!==s?(e.fillRect(0,o,r,a-o),s=c,e.fillStyle=i[s],o=u,a=d):a>=u?a=Math.max(a,d):(e.fillRect(0,o,r,a-o),o=u,a=d)}e.fillRect(0,o,r,a-o)}}class Llt extends Vo{constructor(e){super(e),this.domNode=Cn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:r}=this._context.viewModel.model.getOptions(),s=r;let o=t-e;for(;o>0;){const a=Cn(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let i=e-t;for(;i>0;){const r=this._renderedRulers.pop();this.domNode.removeChild(r),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const r=this._renderedRulers[t],s=this._rulers[t];r.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),r.setHeight(Math.min(e.scrollHeight,1e6)),r.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}class Nlt extends Vo{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(104);this._useShadows=i.useShadows,this._domNode=Cn(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(146);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(104);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class Tlt{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class Ilt{constructor(e,t){this.lineNumber=e,this.ranges=t}}function Dlt(n){return new Tlt(n)}function Mlt(n){return new Ilt(n.lineNumber,n.ranges.map(Dlt))}const Si=class Si extends Tm{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const r=this._typicalHalfwidthCharacterWidth/4;let s=null,o=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!s&&c<i.length;c++)i[c].lineNumber===a&&(s=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!o&&c>=0;c--)i[c].lineNumber===l&&(o=i[c].ranges[0]);s&&!s.startStyle&&(s=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],u=c.left,d=c.left+c.width,h={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,p=t[a-1].ranges[0].left+t[a-1].ranges[0].width;kk(u-g)<r?h.top=2:u>g&&(h.top=1),kk(d-p)<r?f.top=2:g<d&&d<p&&(f.top=1)}else s&&(h.top=s.startStyle.top,f.top=s.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,p=t[a+1].ranges[0].left+t[a+1].ranges[0].width;kk(u-g)<r?h.bottom=2:g<u&&u<p&&(h.bottom=1),kk(d-p)<r?f.bottom=2:d<p&&(f.bottom=1)}else o&&(h.bottom=o.startStyle.bottom,f.bottom=o.endStyle.bottom);c.startStyle=h,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,i){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(Mlt);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,i),s}_createSelectionPiece(e,t,i,r,s){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+r.toString()+"px;width:"+s.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,r){if(r.length===0)return;const s=!!r[0].ranges[0].startStyle,o=r[0].lineNumber,a=r[r.length-1].lineNumber;for(let l=0,c=r.length;l<c;l++){const u=r[l],d=u.lineNumber,h=d-t,f=i&&d===o?1:0,g=i&&d!==o&&d===a?1:0;let p="",v="";for(let b=0,_=u.ranges.length;b<_;b++){const y=u.ranges[b];if(s){const w=y.startStyle,x=y.endStyle;if(w.top===1||w.bottom===1){p+=this._createSelectionPiece(f,g,Si.SELECTION_CLASS_NAME,y.left-Si.ROUNDED_PIECE_WIDTH,Si.ROUNDED_PIECE_WIDTH);let k=Si.EDITOR_BACKGROUND_CLASS_NAME;w.top===1&&(k+=" "+Si.SELECTION_TOP_RIGHT),w.bottom===1&&(k+=" "+Si.SELECTION_BOTTOM_RIGHT),p+=this._createSelectionPiece(f,g,k,y.left-Si.ROUNDED_PIECE_WIDTH,Si.ROUNDED_PIECE_WIDTH)}if(x.top===1||x.bottom===1){p+=this._createSelectionPiece(f,g,Si.SELECTION_CLASS_NAME,y.left+y.width,Si.ROUNDED_PIECE_WIDTH);let k=Si.EDITOR_BACKGROUND_CLASS_NAME;x.top===1&&(k+=" "+Si.SELECTION_TOP_LEFT),x.bottom===1&&(k+=" "+Si.SELECTION_BOTTOM_LEFT),p+=this._createSelectionPiece(f,g,k,y.left+y.width,Si.ROUNDED_PIECE_WIDTH)}}let C=Si.SELECTION_CLASS_NAME;if(s){const w=y.startStyle,x=y.endStyle;w.top===0&&(C+=" "+Si.SELECTION_TOP_LEFT),w.bottom===0&&(C+=" "+Si.SELECTION_BOTTOM_LEFT),x.top===0&&(C+=" "+Si.SELECTION_TOP_RIGHT),x.bottom===0&&(C+=" "+Si.SELECTION_BOTTOM_RIGHT)}v+=this._createSelectionPiece(f,g,C,y.left,y.width)}e[h][0]+=p,e[h][1]+=v}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let o=i;o<=r;o++){const a=o-i;t[a]=["",""]}const s=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){s[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);s[o]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};Si.SELECTION_CLASS_NAME="selected-text",Si.SELECTION_TOP_LEFT="top-left-radius",Si.SELECTION_BOTTOM_LEFT="bottom-left-radius",Si.SELECTION_TOP_RIGHT="top-right-radius",Si.SELECTION_BOTTOM_RIGHT="bottom-right-radius",Si.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",Si.ROUNDED_PIECE_WIDTH=10;let F7=Si;Yd((n,e)=>{const t=n.getColor(wYe);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function kk(n){return n<0?-n:n}class qQ{constructor(e,t,i,r,s,o,a){this.top=e,this.left=t,this.paddingLeft=i,this.width=r,this.height=s,this.textContent=o,this.textContentClassName=a}}var _d;(function(n){n[n.Single=0]="Single",n[n.MultiPrimary=1]="MultiPrimary",n[n.MultiSecondary=2]="MultiSecondary"})(_d||(_d={}));class GQ{constructor(e,t){this._context=e;const i=this._context.configuration.options,r=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Cn(document.createElement("div")),this._domNode.setClassName(`cursor ${G0}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Gr(this._domNode,r),this._domNode.setDisplay("none"),this._position=new de(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case _d.Single:this._pluralityClass="";break;case _d.MultiPrimary:this._pluralityClass="cursor-primary";break;case _d.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),Gr(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[r,s]=vUe(i,t-1);return[new de(e,r+1),i.substring(r,s)]}_prepareRender(e){let t="",i="";const[r,s]=this._getGraphemeAwarePosition();if(this._cursorStyle===Sr.Line||this._cursorStyle===Sr.LineThin){const h=e.visibleRangeForPosition(r);if(!h||h.outsideRenderedLine)return null;const f=bt(this._domNode.domNode);let g;this._cursorStyle===Sr.Line?(g=oY(f,this._lineCursorWidth>0?this._lineCursorWidth:2),g>2&&(t=s,i=this._getTokenClassName(r))):g=oY(f,1);let p=h.left,v=0;g>=2&&p>=1&&(v=1,p-=v);const b=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.bigNumbersDelta;return new qQ(b,p,v,g,this._lineHeight,t,i)}const o=e.linesVisibleRangesForRange(new te(r.lineNumber,r.column,r.lineNumber,r.column+s.length),!1);if(!o||o.length===0)return null;const a=o[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=s==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===Sr.Block&&(t=s,i=this._getTokenClassName(r));let u=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.bigNumbersDelta,d=this._lineHeight;return(this._cursorStyle===Sr.Underline||this._cursorStyle===Sr.UnderlineThin)&&(u+=this._lineHeight-2,d=2),new qQ(u,l.left,0,c,d,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${G0} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}const ny=class ny extends Vo{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new GQ(this._context,_d.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=Cn(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new vm,this._cursorFlatBlinkInterval=new TH,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,r=this._secondaryCursors.length;i<r;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const r=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.setPlurality(t.length?_d.MultiPrimary:_d.Single),this._primaryCursor.onCursorPositionChanged(e,r),this._updateBlinking(),this._secondaryCursors.length<t.length){const s=t.length-this._secondaryCursors.length;for(let o=0;o<s;o++){const a=new GQ(this._context,_d.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const s=this._secondaryCursors.length-t.length;for(let o=0;o<s;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let s=0;s<t.length;s++)this._secondaryCursors[s].onCursorPositionChanged(t[s],r)}onCursorStateChanged(e){const t=[];for(let r=0,s=e.selections.length;r<s;r++)t[r]=e.selections[r].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let r=0,s=e.ranges.length;r<s;r++)if(e.ranges[r].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[r].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},ny.BLINK_INTERVAL,bt(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},ny.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Sr.Line:e+=" cursor-line-style";break;case Sr.Block:e+=" cursor-block-style";break;case Sr.Underline:e+=" cursor-underline-style";break;case Sr.LineThin:e+=" cursor-line-thin-style";break;case Sr.BlockOutline:e+=" cursor-block-outline-style";break;case Sr.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const r=this._primaryCursor.render(e);r&&(t[i++]=r);for(let s=0,o=this._secondaryCursors.length;s<o;s++){const a=this._secondaryCursors[s].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};ny.BLINK_INTERVAL=500;let B7=ny;Yd((n,e)=>{const t=[{class:".cursor",foreground:gM,background:LV},{class:".cursor-primary",foreground:Hfe,background:$et},{class:".cursor-secondary",foreground:Vfe,background:Uet}];for(const i of t){const r=n.getColor(i.foreground);if(r){let s=n.getColor(i.background);s||(s=r.opposite()),e.addRule(`.monaco-editor .cursors-layer ${i.class} { background-color: ${r}; border-color: ${r}; color: ${s}; }`),A0(n.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${i.class} { border-left: 1px solid ${s}; border-right: 1px solid ${s}; }`)}}});const BA=()=>{throw new Error("Invalid change accessor")};class Rlt extends Vo{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=Cn(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Cn(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const r of e)t.set(r.id,r);let i=!1;return this._context.viewModel.changeWhitespace(r=>{const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._zones[l],u=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=u.isInHiddenArea;const d=t.get(l);d&&(d.afterLineNumber!==u.afterViewLineNumber||d.height!==u.heightInPx)&&(r.changeOneWhitespace(l,u.afterViewLineNumber,u.heightInPx),this._safeCallOnComputedHeight(c.delegate,u.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new de(o,this._context.viewModel.model.getLineMaxColumn(o))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const r=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),s=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!s,afterViewLineNumber:r.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const r={addZone:s=>(t=!0,this._addZone(i,s)),removeZone:s=>{s&&(t=this._removeZone(i,s)||t)},layoutZone:s=>{s&&(t=this._layoutZone(i,s)||t)}};Alt(e,r),r.addZone=BA,r.removeZone=BA,r.layoutZone=BA}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:Cn(t.domNode),marginDomNode:t.marginDomNode?Cn(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,i.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.remove(),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],r=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=r.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,r.afterViewLineNumber,r.heightInPx),this._safeCallOnComputedHeight(i.delegate,r.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){$n(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){$n(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let r=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(i[o.id]=o,r=!0);const s=Object.keys(this._zones);for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._zones[l];let u=0,d=0,h="none";i.hasOwnProperty(l)?(u=i[l].verticalOffset-e.bigNumbersDelta,d=i[l].height,h="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(u),c.domNode.setHeight(d),c.domNode.setDisplay(h),c.marginDomNode&&(c.marginDomNode.setTop(u),c.marginDomNode.setHeight(d),c.marginDomNode.setDisplay(h))}r&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function Alt(n,e){try{return n(e)}catch(t){$n(t)}}class Olt extends Tm{constructor(e){super(),this._context=e,this._options=new YQ(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new YQ(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber-t+1,s=new Array(r);for(let a=0;a<r;a++)s[a]=!0;const o=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,s);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=o.data[l];let u=null;if(this._options.renderWhitespace==="selection"){const d=this._selection;for(const h of d){if(h.endLineNumber<a||h.startLineNumber>a)continue;const f=h.startLineNumber===a?h.startColumn:c.minColumn,g=h.endLineNumber===a?h.endColumn:c.maxColumn;f<g&&(u||(u=[]),u.push(new Gge(f-1,g-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,u,c)}}_applyRenderWhitespace(e,t,i,r){if(this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&r.continuesWithWrappedLine)return"";const s=this._context.theme.getColor(NV),o=this._options.renderWithSVG,a=r.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=r.continuesWithWrappedLine,u=r.minColumn-1,d=this._options.renderWhitespace==="boundary",h=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,g=this._options.middotWidth,p=this._options.wsmiddotWidth,v=this._options.spaceWidth,b=Math.abs(p-v),_=Math.abs(g-v),y=b<_?11825:183,C=this._options.canUseHalfwidthRightwardsArrow;let w="",x=!1,k=To(a),E;k===-1?(x=!0,k=l,E=l):E=mm(a);let L=0,M=i&&i[L],D=0;for(let O=u;O<l;O++){const A=a.charCodeAt(O);if(M&&O>=M.endOffset&&(L++,M=i&&i[L]),A!==9&&A!==32||h&&!x&&O<=E)continue;if(d&&O>=k&&O<=E&&A===32){const V=O-1>=0?a.charCodeAt(O-1):0,F=O+1<l?a.charCodeAt(O+1):0;if(V!==32&&F!==32)continue}if(d&&c&&O===l-1){const V=O-1>=0?a.charCodeAt(O-1):0;if(A===32&&V!==32&&V!==9)continue}if(i&&(!M||M.startOffset>O||M.endOffset<=O))continue;const R=e.visibleRangeForPosition(new de(t,O+1));R&&(o?(D=Math.max(D,R.left),A===9?w+=this._renderArrow(f,v,R.left):w+=`<circle cx="${(R.left+v/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(v/7).toFixed(2)}" />`):A===9?w+=`<div class="mwh" style="left:${R.left}px;height:${f}px;">${C?"":""}</div>`:w+=`<div class="mwh" style="left:${R.left}px;height:${f}px;">${String.fromCharCode(y)}</div>`)}return o?(D=Math.round(D+v),`<svg style="bottom:0;position:absolute;width:${D}px;height:${f}px" viewBox="0 0 ${D} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${s}">`+w+"</svg>"):w}_renderArrow(e,t,i){const r=t/7,s=t,o=e/2,a=i,l={x:0,y:r/2},c={x:100/125*s,y:l.y},u={x:c.x-.2*c.x,y:c.y+.2*c.x},d={x:u.x+.1*c.x,y:u.y+.1*c.x},h={x:d.x+.35*c.x,y:d.y-.35*c.x},f={x:h.x,y:-h.y},g={x:d.x,y:-d.y},p={x:u.x,y:-u.y},v={x:c.x,y:-c.y},b={x:l.x,y:-l.y};return`<path d="M ${[l,c,u,d,h,f,g,p,v,b].map(C=>`${(a+C.x).toFixed(2)} ${(o+C.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class YQ{constructor(e){const t=e.options,i=t.get(50),r=t.get(38);r==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):r==="svg"?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class Plt{constructor(e,t,i,r){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=i,this._model=r,this.visibleRange=new te(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class Flt{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class Blt{constructor(e,t,i){this.configuration=e,this.theme=new Flt(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var Hlt=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Vlt=function(n,e){return function(t,i){e(t,i,n)}};let H7=class extends MS{constructor(e,t,i,r,s,o,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new an(1,1,1,1)],this._renderAnimationFrame=null;const l=new qat(t,r,s,e);this._context=new Blt(t,i,r),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(D7,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Cn(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Cn(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Cn(document.createElement("div")),Cc.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new ilt(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new P7(this._context,this._linesContent),this._viewZones=new Rlt(this._context),this._viewParts.push(this._viewZones);const c=new xlt(this._context);this._viewParts.push(c);const u=new Nlt(this._context);this._viewParts.push(u);const d=new Yat(this._context);this._viewParts.push(d),d.addDynamicOverlay(new elt(this._context)),d.addDynamicOverlay(new F7(this._context)),d.addDynamicOverlay(new ult(this._context)),d.addDynamicOverlay(new nlt(this._context)),d.addDynamicOverlay(new Olt(this._context));const h=new Zat(this._context);this._viewParts.push(h),h.addDynamicOverlay(new tlt(this._context)),h.addDynamicOverlay(new plt(this._context)),h.addDynamicOverlay(new glt(this._context)),h.addDynamicOverlay(new qN(this._context)),this._glyphMarginWidgets=new olt(this._context),this._viewParts.push(this._glyphMarginWidgets);const f=new GN(this._context);f.getDomNode().appendChild(this._viewZones.marginDomNode),f.getDomNode().appendChild(h.getDomNode()),f.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(f),this._contentWidgets=new Qat(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new B7(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new wlt(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const g=new Llt(this._context);this._viewParts.push(g);const p=new Xat(this._context);this._viewParts.push(p);const v=new ylt(this._context);if(this._viewParts.push(v),c){const b=this._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(c.getDomNode(),b.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(v.getDomNode()),this._overflowGuardContainer.appendChild(p.domNode),this.domNode.appendChild(this._overflowGuardContainer),o?(o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),o.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new gat(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let i=[],r=0;i=i.concat(e.getAllMarginDecorations().map(s=>{var a,l;const o=((a=s.options.glyphMargin)==null?void 0:a.position)??Nf.Center;return r=Math.max(r,s.range.endLineNumber),{range:s.range,lane:o,persist:(l=s.options.glyphMargin)==null?void 0:l.persistLane}})),i=i.concat(this._glyphMarginWidgets.getWidgets().map(s=>{const o=e.validateRange(s.preference.range);return r=Math.max(r,o.endLineNumber),{range:o,lane:s.preference.lane}})),i.sort((s,o)=>te.compareRangesUsingStarts(s.range,o.range)),t.reset(r);for(const s of i)t.push(s.lane,s.range,s.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new nat(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new de(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(146);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+k8(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){var e;if(this._store.isDisposed)throw new Tn;if(this._renderAnimationFrame===null){const t=this._createCoordinatedRendering();this._renderAnimationFrame=V7.INSTANCE.scheduleCoordinatedRendering({window:bt((e=this.domNode)==null?void 0:e.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new Tn;try{return t.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new Tn;return t.renderText()},prepareRender:(i,r)=>{if(this._store.isDisposed)throw new Tn;return t.prepareRender(i,r)},render:(i,r)=>{if(this._store.isDisposed)throw new Tn;return t.render(i,r)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();Xh(()=>e.prepareRenderText());const t=Xh(()=>e.renderText());if(t){const[i,r]=t;Xh(()=>e.prepareRender(i,r)),Xh(()=>e.render(i,r))}}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}Zh.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new Plt(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new Yot(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(const i of e)i.prepareRender(t)},render:(e,t)=>{for(const i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),r=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new de(r.lineNumber,r.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?TM.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new Elt(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,i,r,s;this._contentWidgets.setWidgetPosition(e.widget,((t=e.position)==null?void 0:t.position)??null,((i=e.position)==null?void 0:i.secondaryPosition)??null,((r=e.position)==null?void 0:r.preference)??null,((s=e.position)==null?void 0:s.positionAffinity)??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};H7=Hlt([Vlt(6,Fn)],H7);function Xh(n){try{return n()}catch(e){return $n(e),null}}const tI=class tI{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[i,r]of this._animationFrameRunners)r.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,Ede(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of e)Xh(()=>i.prepareRenderText());const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t[i]=Xh(()=>s.renderText())}for(let i=0,r=e.length;i<r;i++){const s=e[i],o=t[i];if(!o)continue;const[a,l]=o;Xh(()=>s.prepareRender(a,l))}for(let i=0,r=e.length;i<r;i++){const s=e[i],o=t[i];if(!o)continue;const[a,l]=o;Xh(()=>s.render(a,l))}}};tI.INSTANCE=new tI;let V7=tI;class VC{constructor(e,t,i,r,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=r,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let r=this.breakOffsets[e]-t;return e>0&&(r+=this.wrappedTextIndentLength),r}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let r=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&r>this.injectionOffsets[s];s++)r<this.injectionOffsets[s]+this.injectionOptions[s].content.length?r=this.injectionOffsets[s]:r-=this.injectionOptions[s].content.length;return r}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&!(e<this.injectionOffsets[r]||t!==1&&e===this.injectionOffsets[r]);r++)i+=this.injectionOptions[r].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,r=this.breakOffsets.length-1,s=0,o=0;for(;i<=r;){s=i+(r-i)/2|0;const l=this.breakOffsets[s];if(o=s>0?this.breakOffsets[s-1]:0,t===0)if(e<=o)r=s-1;else if(e>l)i=s+1;else break;else if(e<o)r=s-1;else if(e>=l)i=s+1;else break}let a=e-o;return s>0&&(a+=this.wrappedTextIndentLength),new Ek(s,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const r=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(r,i);if(s!==r)return this.offsetInInputWithInjectionsToOutputPosition(s,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new Ek(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const r=this.getOutputLineCount()-1;if(e<r&&t===this.getMaxOutputOffset(e))return new Ek(e+1,this.getMinOutputOffset(e+1))}return new Ek(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&ZQ(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let r=i.offsetInInputWithInjections;if(XQ(this.injectionOptions[i.injectedTextIndex].cursorStops))return r;let s=i.injectedTextIndex-1;for(;s>=0&&this.injectionOffsets[s]===this.injectionOffsets[i.injectedTextIndex]&&!(ZQ(this.injectionOptions[s].cursorStops)||(r-=this.injectionOptions[s].content.length,XQ(this.injectionOptions[s].cursorStops)));)s--;return r}}else if(t===1||t===4){let r=i.offsetInInputWithInjections+i.length,s=i.injectedTextIndex;for(;s+1<this.injectionOffsets.length&&this.injectionOffsets[s+1]===this.injectionOffsets[s];)r+=this.injectionOptions[s+1].content.length,s++;return r}else if(t===0||t===3){let r=i.offsetInInputWithInjections,s=i.injectedTextIndex;for(;s-1>=0&&this.injectionOffsets[s-1]===this.injectionOffsets[s];)r-=this.injectionOptions[s-1].content.length,s--;return r}BH()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.getInjectedTextAtOffset(i);return r?{options:this.injectionOptions[r.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let r=0;for(let s=0;s<t.length;s++){const o=i[s].content.length,a=t[s]+r,l=t[s]+r+o;if(a>e)break;if(e<=l)return{injectedTextIndex:s,offsetInInputWithInjections:a,length:o};r+=o}}}}function ZQ(n){return n==null?!0:n===R1.Right||n===R1.Both}function XQ(n){return n==null?!0:n===R1.Left||n===R1.Both}class Ek{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new de(e+this.outputLineIndex,this.outputOffset+1)}}const HA=Sm("domLineBreaksComputer",{createHTML:n=>n});class Cz{static create(e){return new Cz(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,r,s){const o=[],a=[];return{addRequest:(l,c,u)=>{o.push(l),a.push(c)},finalize:()=>zlt(Eue(this.targetWindow.deref()),o,e,t,i,r,s,a)}}}function zlt(n,e,t,i,r,s,o,a){function l(L){const M=a[L];if(M){const D=vc.applyInjectedText(e[L],M),O=M.map(R=>R.options),A=M.map(R=>R.column-1);return new VC(A,O,[D.length],[],0)}else return null}if(r===-1){const L=[];for(let M=0,D=e.length;M<D;M++)L[M]=l(M);return L}const c=Math.round(r*t.typicalHalfwidthCharacterWidth),d=Math.round(i*(s===3?2:s===2?1:0)),h=Math.ceil(t.spaceWidth*d),f=document.createElement("div");Gr(f,t);const g=new qD(1e4),p=[],v=[],b=[],_=[],y=[];for(let L=0;L<e.length;L++){const M=vc.applyInjectedText(e[L],a[L]);let D=0,O=0,A=c;if(s!==0)if(D=To(M),D===-1)D=0;else{for(let T=0;T<D;T++){const N=M.charCodeAt(T)===9?i-O%i:1;O+=N}const F=Math.ceil(t.spaceWidth*O);F+t.typicalFullwidthCharacterWidth>c?(D=0,O=0):A=c-F}const R=M.substr(D),V=Wlt(R,O,i,A,g,h);p[L]=D,v[L]=O,b[L]=R,_[L]=V[0],y[L]=V[1]}const C=g.build(),w=(HA==null?void 0:HA.createHTML(C))??C;f.innerHTML=w,f.style.position="absolute",f.style.top="10000",o==="keepAll"?(f.style.wordBreak="keep-all",f.style.overflowWrap="anywhere"):(f.style.wordBreak="inherit",f.style.overflowWrap="break-word"),n.document.body.appendChild(f);const x=document.createRange(),k=Array.prototype.slice.call(f.children,0),E=[];for(let L=0;L<e.length;L++){const M=k[L],D=$lt(x,M,b[L],_[L]);if(D===null){E[L]=l(L);continue}const O=p[L],A=v[L]+d,R=y[L],V=[];for(let B=0,$=D.length;B<$;B++)V[B]=R[D[B]];if(O!==0)for(let B=0,$=D.length;B<$;B++)D[B]+=O;let F,T;const N=a[L];N?(F=N.map(B=>B.options),T=N.map(B=>B.column-1)):(F=null,T=null),E[L]=new VC(T,F,D,V,A)}return f.remove(),E}function Wlt(n,e,t,i,r,s){if(s!==0){const h=String(s);r.appendString('<div style="text-indent: -'),r.appendString(h),r.appendString("px; padding-left: "),r.appendString(h),r.appendString("px; box-sizing: border-box; width:")}else r.appendString('<div style="width:');r.appendString(String(i)),r.appendString('px;">');const o=n.length;let a=e,l=0;const c=[],u=[];let d=0<o?n.charCodeAt(0):0;r.appendString("<span>");for(let h=0;h<o;h++){h!==0&&h%16384===0&&r.appendString("</span><span>"),c[h]=l,u[h]=a;const f=d;d=h+1<o?n.charCodeAt(h+1):0;let g=1,p=1;switch(f){case 9:g=t-a%t,p=g;for(let v=1;v<=g;v++)v<g?r.appendCharCode(160):r.appendASCIICharCode(32);break;case 32:d===32?r.appendCharCode(160):r.appendASCIICharCode(32);break;case 60:r.appendString("&lt;");break;case 62:r.appendString("&gt;");break;case 38:r.appendString("&amp;");break;case 0:r.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:r.appendCharCode(65533);break;default:Ef(f)&&p++,f<32?r.appendCharCode(9216+f):r.appendCharCode(f)}l+=g,a+=p}return r.appendString("</span>"),c[n.length]=l,u[n.length]=a,r.appendString("</div>"),[c,u]}function $lt(n,e,t,i){if(t.length<=1)return null;const r=Array.prototype.slice.call(e.children,0),s=[];try{z7(n,r,i,0,null,t.length-1,null,s)}catch(o){return console.log(o),null}return s.length===0?null:(s.push(t.length),s)}function z7(n,e,t,i,r,s,o,a){if(i===s||(r=r||VA(n,e,t[i],t[i+1]),o=o||VA(n,e,t[s],t[s+1]),Math.abs(r[0].top-o[0].top)<=.1))return;if(i+1===s){a.push(s);return}const l=i+(s-i)/2|0,c=VA(n,e,t[l],t[l+1]);z7(n,e,t,i,r,l,c,a),z7(n,e,t,l,c,s,o,a)}function VA(n,e,t,i){return n.setStart(e[t/16384|0].firstChild,t%16384),n.setEnd(e[i/16384|0].firstChild,i%16384),n.getClientRects()}class Ult extends ke{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new fH),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const r of t){if(this._pending.has(r.id)){$n(new Error(`Cannot have two contributions with the same id ${r.id}`));continue}this._pending.set(r.id,r)}this._instantiateSome(0),this._register(Yx(bt(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(Yx(bt(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(Yx(bt(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)typeof i.saveViewState=="function"&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)typeof i.restoreViewState=="function"&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return Yx(bt((e=this._editor)==null?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),typeof i.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){$n(i)}}}}class mpe{constructor(e,t,i,r,s,o,a){this.id=e,this.label=t,this.alias=i,this.metadata=r,this._precondition=s,this._run=o,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}class yz{static create(e){return new yz(e.get(135),e.get(134))}constructor(e,t){this.classifier=new jlt(e,t)}createLineBreaksComputer(e,t,i,r,s){const o=[],a=[],l=[];return{addRequest:(c,u,d)=>{o.push(c),a.push(u),l.push(d)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,u=[];for(let d=0,h=o.length;d<h;d++){const f=a[d],g=l[d];g&&!g.injectionOptions&&!f?u[d]=Klt(this.classifier,g,o[d],t,i,c,r,s):u[d]=qlt(this.classifier,o[d],f,t,i,c,r,s)}return W7.length=0,$7.length=0,u}}}}class jlt extends vS{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let W7=[],$7=[];function Klt(n,e,t,i,r,s,o,a){if(r===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",u=e.breakOffsets,d=e.breakOffsetsVisibleColumn,h=vpe(t,i,r,s,o),f=r-h,g=W7,p=$7;let v=0,b=0,_=0,y=r;const C=u.length;let w=0;if(w>=0){let x=Math.abs(d[w]-y);for(;w+1<C;){const k=Math.abs(d[w+1]-y);if(k>=x)break;x=k,w++}}for(;w<C;){let x=w<0?0:u[w],k=w<0?0:d[w];b>x&&(x=b,k=_);let E=0,L=0,M=0,D=0;if(k<=y){let A=k,R=x===0?0:t.charCodeAt(x-1),V=x===0?0:n.get(R),F=!0;for(let T=x;T<l;T++){const N=T,B=t.charCodeAt(T);let $,j;if(gr(B)?(T++,$=0,j=2):($=n.get(B),j=zC(B,A,i,s)),N>b&&U7(R,V,B,$,c)&&(E=N,L=A),A+=j,A>y){N>b?(M=N,D=A-j):(M=T+1,D=A),A-L>f&&(E=0),F=!1;break}R=B,V=$}if(F){v>0&&(g[v]=u[u.length-1],p[v]=d[u.length-1],v++);break}}if(E===0){let A=k,R=t.charCodeAt(x),V=n.get(R),F=!1;for(let T=x-1;T>=b;T--){const N=T+1,B=t.charCodeAt(T);if(B===9){F=!0;break}let $,j;if(N1(B)?(T--,$=0,j=2):($=n.get(B),j=Ef(B)?s:1),A<=y){if(M===0&&(M=N,D=A),A<=y-f)break;if(U7(B,$,R,V,c)){E=N,L=A;break}}A-=j,R=B,V=$}if(E!==0){const T=f-(D-L);if(T<=i){const N=t.charCodeAt(M);let B;gr(N)?B=2:B=zC(N,D,i,s),T-B<0&&(E=0)}}if(F){w--;continue}}if(E===0&&(E=M,L=D),E<=b){const A=t.charCodeAt(b);gr(A)?(E=b+2,L=_+2):(E=b+1,L=_+zC(A,_,i,s))}for(b=E,g[v]=E,_=L,p[v]=L,v++,y=L+f;w<0||w<C&&d[w]<L;)w++;let O=Math.abs(d[w]-y);for(;w+1<C;){const A=Math.abs(d[w+1]-y);if(A>=O)break;O=A,w++}}return v===0?null:(g.length=v,p.length=v,W7=e.breakOffsets,$7=e.breakOffsetsVisibleColumn,e.breakOffsets=g,e.breakOffsetsVisibleColumn=p,e.wrappedTextIndentLength=h,e)}function qlt(n,e,t,i,r,s,o,a){const l=vc.applyInjectedText(e,t);let c,u;if(t&&t.length>0?(c=t.map(L=>L.options),u=t.map(L=>L.column-1)):(c=null,u=null),r===-1)return c?new VC(u,c,[l.length],[],0):null;const d=l.length;if(d<=1)return c?new VC(u,c,[l.length],[],0):null;const h=a==="keepAll",f=vpe(l,i,r,s,o),g=r-f,p=[],v=[];let b=0,_=0,y=0,C=r,w=l.charCodeAt(0),x=n.get(w),k=zC(w,0,i,s),E=1;gr(w)&&(k+=1,w=l.charCodeAt(1),x=n.get(w),E++);for(let L=E;L<d;L++){const M=L,D=l.charCodeAt(L);let O,A;gr(D)?(L++,O=0,A=2):(O=n.get(D),A=zC(D,k,i,s)),U7(w,x,D,O,h)&&(_=M,y=k),k+=A,k>C&&((_===0||k-y>g)&&(_=M,y=k-A),p[b]=_,v[b]=y,b++,C=y+g,_=0),w=D,x=O}return b===0&&(!t||t.length===0)?null:(p[b]=d,v[b]=k,new VC(u,c,p,v,f))}function zC(n,e,t,i){return n===9?t-e%t:Ef(n)||n<32?i:1}function QQ(n,e){return e-n%e}function U7(n,e,t,i,r){return t!==32&&(e===2&&i!==2||e!==1&&i===1||!r&&e===3&&i!==2||!r&&i===3&&e!==1)}function vpe(n,e,t,i,r){let s=0;if(r!==0){const o=To(n);if(o!==-1){for(let l=0;l<o;l++){const c=n.charCodeAt(l)===9?QQ(s,e):1;s+=c}const a=r===3?2:r===2?1:0;for(let l=0;l<a;l++){const c=QQ(s,e);s+=c}s+i>t&&(s=0)}}return s}class tT{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new yr(new te(1,1,1,1),0,0,new de(1,1),0),new yr(new te(1,1,1,1),0,0,new de(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Xt(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?an.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):an.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,r){return t.equals(i)?r:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,r=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),o=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,r,i,o),l=this._validatePositionWithCache(e,s,r,a);return i.equals(o)&&r.equals(a)&&s.equals(l)?t:new yr(te.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+r.column-a.column,o,t.leftoverVisibleColumns+i.column-o.column)}_setState(e,t,i){if(i&&(i=tT._validateViewState(e.viewModel,i)),t){const r=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(r)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new yr(r,t.selectionStartKind,s,o,a)}else{if(!i)return;const r=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new yr(r,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,s,i.leftoverVisibleColumns)}if(i){const r=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new yr(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const r=e.coordinatesConverter.convertModelPositionToViewPosition(new de(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new de(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new te(r.lineNumber,r.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new yr(o,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class JQ{constructor(e){this.context=e,this.cursors=[new tT(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return Fqe(this.cursors,fl(e=>e.viewState.position,de.compare)).viewState.position}getBottomMostViewPosition(){return Pqe(this.cursors,fl(e=>e.viewState.position,de.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Xt.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const r=i-t;for(let s=0;s<r;s++)this._addSecondaryCursor()}else if(t>i){const r=t-i;for(let s=0;s<r;s++)this._removeSecondaryCursor(this.cursors.length-2)}for(let r=0;r<i;r++)this.cursors[r+1].setState(this.context,e[r].modelState,e[r].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new tT(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,r=e.length;i<r;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(fl(i=>i.selection,te.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const r=t[i],s=t[i+1],o=r.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=r.index<s.index?i:i+1,u=r.index<s.index?i+1:i,d=t[u].index,h=t[c].index,f=t[u].selection,g=t[c].selection;if(!f.equalsSelection(g)){const p=f.plusRange(g),v=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,b=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let _;d===this.lastAddedCursorIndex?(_=v,this.lastAddedCursorIndex=h):_=b;let y;_?y=new an(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn):y=new an(p.endLineNumber,p.endColumn,p.startLineNumber,p.startColumn),t[c].selection=y;const C=Xt.fromModelSelection(y);e[h].setState(this.context,C.modelState,C.viewState)}for(const p of t)p.index>d&&p.index--;e.splice(d,1),t.splice(u,1),this._removeSecondaryCursor(d-1),i--}}}}class eJ{constructor(e,t,i,r){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=r}}class Glt{constructor(){this.type=0}}class Ylt{constructor(){this.type=1}}class Zlt{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class Xlt{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class ig{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class Lk{constructor(){this.type=5}}class Qlt{constructor(e){this.type=6,this.isFocused=e}}class Jlt{constructor(){this.type=7}}class Nk{constructor(){this.type=8}}class bpe{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class j7{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class K7{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class WC{constructor(e,t,i,r,s,o,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=r,this.verticalType=s,this.revealHorizontal=o,this.scrollType=a,this.type=12}}class ect{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class tct{constructor(e){this.theme=e,this.type=14}}class nct{constructor(e){this.type=15,this.ranges=e}}class ict{constructor(){this.type=16}}let rct=class{constructor(){this.type=17}};class sct extends ke{constructor(){super(),this._onEvent=this._register(new ae),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const r=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(r){this._outgoingEvents[t]=r;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new oct),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class oct{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class wz{constructor(e,t,i,r){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=r,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new wz(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class Sz{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new Sz(this.oldHasFocus,e.hasFocus)}}class xz{constructor(e,t,i,r,s,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=r,this.scrollWidth=s,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new xz(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class act{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class lct{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class nT{constructor(e,t,i,r,s,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=r,this.source=s,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,r=t.length;if(i!==r)return!1;for(let s=0;s<i;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return nT._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new nT(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class cct{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class uct{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class dct{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class hct{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class fct{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class gct{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class pct{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class mct extends ke{constructor(e,t,i,r){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new eJ(this._model,this._viewModel,this._coordinatesConverter,r),this._cursors=new JQ(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=zr(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new eJ(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,r){let s=!1;const o=this.context.cursorConfig.multiCursorLimit;r!==null&&r.length>o&&(r=r.slice(0,o),s=!0);const a=$C.from(this._model,this);return this._cursors.setStates(r),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,a,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,r,s,o){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=te.fromPositions(a[0],a[0]),e.emitViewEvent(new WC(t,i,l,c,r,s,o))}revealPrimary(e,t,i,r,s,o){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new WC(t,i,null,l,r,s,o))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,r=t.length;i<r;i++){const s=t[i];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){const i=[];for(let r=0,s=t.length;r<s;r++){const o=t[r];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,u=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(u=o.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:u,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Xt.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof hge){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const r=i.containsEvent(1);if(this._prevEditOperationType=0,r)this._cursors.dispose(),this._cursors=new JQ(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const s=Xt.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,s)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Xt.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,r){this.setStates(e,t,r,Xt.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],r=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),r.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],i),o=this._model.deltaDecorations([],r);this._autoClosedActions.push(new tJ(this._model,s,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=vct.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],r=[];for(let s=0;s<e.commands.length;s++){const o=e.commands[s];o instanceof mz&&o.enclosingRange&&o.closeCharacterRange&&(i.push(o.closeCharacterRange),r.push(o.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,r),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,r,s){const o=$C.from(this._model,this);if(o.equals(r))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new Xlt(l,a,i)),!r||r.cursorState.length!==o.cursorState.length||o.cursorState.some((c,u)=>!c.modelState.equals(r.cursorState[u].modelState))){const c=r?r.cursorState.map(d=>d.modelState.selection):null,u=r?r.modelVersionId:0;e.emitOutgoingEvent(new nT(c,a,u,o.modelVersionId,t||"keyboard",i,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];if(!s.text||s.text.indexOf(`
`)>=0)return null;const o=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,u=s.text.length-o[2].length-1,d=s.text.lastIndexOf(c,u-1);if(d===-1)return null;t.push([d,u])}return t}executeEdits(e,t,i,r){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(i)),s&&(i[0]._isTracked=!0);const o=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(s)for(let d=0,h=s.length;d<h;d++){const[f,g]=s[d],p=c[d],v=p.range.startLineNumber,b=p.range.startColumn-1+f,_=p.range.startColumn-1+g;o.push(new te(v,_+1,v,_+2)),a.push(new te(v,b+1,v,_+2))}const u=r(c);return u&&(this._isHandling=!0),u});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,i,r=0){if(this.context.cursorConfig.readOnly)return;const s=$C.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){$n(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,r,s,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return tJ.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new UC(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(Mg.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const r=t.length;let s=0;for(;s<r;){const o=wH(t,s),a=t.substr(s,o);this._executeEditOperation(Mg.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=o}}else this._executeEditOperation(Mg.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,r,s,o){if(t.length===0&&i===0&&r===0){if(s!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new an(c.lineNumber,c.column+s,c.lineNumber,c.column+s)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Mg.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,r,s))},e,o)}paste(e,t,i,r,s){this._executeEdit(()=>{this._executeEditOperation(Mg.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,r||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(om.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new ho(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new ho(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}class $C{static from(e,t){return new $C(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class tJ{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const r=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(r&&(t.push(r),r.startLineNumber!==r.endLineNumber))return!1}t.sort(te.compareRangesUsingStarts),e.sort(te.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class vct{static executeCommands(e,t,i){const r={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(r,i);for(let o=0,a=r.trackedRanges.length;o<a;o++)r.model._setTrackedRange(r.trackedRanges[o],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const r=i.operations,s=this._getLoserCursorMap(r);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const o=[];for(let c=0,u=r.length;c<u;c++)s.hasOwnProperty(r[c].identifier.major.toString())||o.push(r[c]);i.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{const u=[];for(let f=0;f<e.selectionsBefore.length;f++)u[f]=[];for(const f of c)f.identifier&&u[f.identifier.major].push(f);const d=(f,g)=>f.identifier.minor-g.identifier.minor,h=[];for(let f=0;f<e.selectionsBefore.length;f++)u[f].length>0?(u[f].sort(d),h[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>u[f],getTrackedSelection:g=>{const p=parseInt(g,10),v=e.model._getTrackedRange(e.trackedRanges[p]);return e.trackedRangesDirection[p]===0?new an(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn):new an(v.endLineNumber,v.endColumn,v.startLineNumber,v.startColumn)}})):h[f]=e.selectionsBefore[f];return h});a||(a=e.selectionsBefore);const l=[];for(const c in s)s.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,u)=>u-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],r=!1;for(let s=0,o=t.length;s<o;s++){const a=t[s];if(a){const l=this._getEditOperationsFromCommand(e,s,a);i=i.concat(l.operations),r=r||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:r}}static _getEditOperationsFromCommand(e,t,i){const r=[];let s=0;const o=(d,h,f=!1)=>{te.isEmpty(d)&&h===""||r.push({identifier:{major:t,minor:s++},range:d,text:h,forceMoveMarkers:f,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const u={addEditOperation:o,addTrackedEditOperation:(d,h,f)=>{a=!0,o(d,h,f)},trackSelection:(d,h)=>{const f=an.liftSelection(d);let g;if(f.isEmpty())if(typeof h=="boolean")h?g=2:g=3;else{const b=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===b?g=2:g=3}else g=1;const p=e.trackedRanges.length,v=e.model._setTrackedRange(null,f,g);return e.trackedRanges[p]=v,e.trackedRangesDirection[p]=f.getDirection(),p.toString()}};try{i.getEditOperations(e.model,u)}catch(d){return $n(d),{operations:[],hadTrackedEditOperation:!1}}return{operations:r,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,r)=>-te.compareRangesUsingEnds(i.range,r.range));const t={};for(let i=1;i<e.length;i++){const r=e[i-1],s=e[i];if(te.getStartPosition(r.range).isBefore(te.getEndPosition(s.range))){let o;r.identifier.major>s.identifier.major?o=r.identifier.major:o=s.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class bct{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class UC{static _capture(e,t){const i=[];for(const r of t){if(r.startLineNumber!==r.endLineNumber)return null;i.push(new bct(e.getLineContent(r.startLineNumber),r.startColumn-1,r.endColumn-1))}return i}constructor(e,t){this._original=UC._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=UC._capture(e,t);if(!i||this._original.length!==i.length)return null;const r=[];for(let s=0,o=this._original.length;s<o;s++)r.push(UC._deduceOutcome(this._original[s],i[s]));return r}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,$5(e.text,t.text)),r=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,U5(e.text,t.text)),s=e.text.substring(i,e.text.length-r),o=t.text.substring(i,t.text.length-r);return new jat(s,e.startSelection-i,e.endSelection-i,o,t.startSelection-i,t.endSelection-i)}}class _ct{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,r=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,r)}}class Cct{constructor(e,t,i,r,s){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=r,this.minWidth=s,this.prefixSum=0}}var vf;let yct=(vf=class{constructor(e,t,i,r){this._instanceId=ode(++vf.INSTANCE_COUNT),this._pendingChanges=new _ct,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=r}static findInsertionIndex(e,t,i){let r=0,s=e.length;for(;r<s;){const o=r+s>>>1;t===e[o].afterLineNumber?i<e[o].ordinal?s=o:r=o+1:t<e[o].afterLineNumber?s=o:r=o+1}return r}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(r,s,o,a)=>{t=!0,r=r|0,s=s|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new Cct(l,r,s,o,a)),l},changeOneWhitespace:(r,s,o)=>{t=!0,s=s|0,o=o|0,this._pendingChanges.change({id:r,newAfterLineNumber:s,newHeight:o})},removeWhitespace:r=>{t=!0,this._pendingChanges.remove({id:r})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const r=new Set;for(const l of i)r.add(l.id);const s=new Map;for(const l of t)s.set(l.id,l);const o=l=>{const c=[];for(const u of l)if(!r.has(u.id)){if(s.has(u.id)){const d=s.get(u.id);u.afterLineNumber=d.newAfterLineNumber,u.height=d.newHeight}c.push(u)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=vf.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,r=t.length;i<r;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const r=this._findWhitespaceIndex(e);if(r!==-1&&(this._arr[r].height!==i&&(this._arr[r].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,r-1)),this._arr[r].afterLineNumber!==t)){const s=this._arr[r];this._removeWhitespace(r),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,r=this._arr.length;i<r;i++){const s=this._arr[i].afterLineNumber;e<=s&&s<=t?this._arr[i].afterLineNumber=e-1:s>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,r=this._arr.length;i<r;i++){const s=this._arr[i].afterLineNumber;e<=s&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,r=t.length-1;for(;i<=r;){const o=(r-i|0)/2|0,a=i+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else r=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let i;e>1?i=this._lineHeight*(e-1):i=0;const r=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+r+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const i=this._lineHeight*e,r=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+r+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let r=1,s=t;for(;r<s;){const o=(r+s)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+i)r=o+1;else{if(e>=a)return o;s=o}}return r>t?t:r}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,r=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(r)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(r)|0;const l=this.getWhitespacesCount()|0;let c,u;a===-1?(a=l,u=o+1,c=0):(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let d=s,h=d;const f=5e5;let g=0;s>=f&&(g=Math.floor(s/f)*f,g=Math.floor(g/i)*i,h-=g);const p=[],v=e+(t-e)/2;let b=-1;for(let w=r;w<=o;w++){if(b===-1){const x=d,k=d+i;(x<=v&&v<k||x>v)&&(b=w)}for(d+=i,p[w-r]=h,h+=i;u===w;)h+=c,d+=c,a++,a>=l?u=o+1:(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(d>=t){o=w;break}}b===-1&&(b=o);const _=this.getVerticalOffsetForLineNumber(o)|0;let y=r,C=o;return y<C&&s<e&&y++,y<C&&_+i>t&&C--,{bigNumbersDelta:g,startLineNumber:r,endLineNumber:o,relativeVerticalOffset:p,centeredLineNumber:b,completelyVisibleStartLineNumber:y,completelyVisibleEndLineNumber:C,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let r;return e>0?r=this.getWhitespacesAccumulatedHeight(e-1):r=0,i+r+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const r=this.getVerticalOffsetForWhitespaceIndex(i),s=this.getHeightForWhitespaceIndex(i);if(e>=r+s)return-1;for(;t<i;){const o=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;i=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const r=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:o,verticalOffset:i,height:r}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),r=this.getWhitespacesCount()-1;if(i<0)return[];const s=[];for(let o=i;o<=r;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}},vf.INSTANCE_COUNT=0,vf);const wct=125;class F_{constructor(e,t,i,r){e=e|0,t=t|0,i=i|0,r=r|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),r<0&&(r=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=r,this.scrollHeight=Math.max(i,r)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class Sct extends ke{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new ae),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new F_(0,0,0,0),this._scrollable=this._register(new bb({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,r=t.contentHeight!==e.contentHeight;(i||r)&&this._onDidContentSizeChange.fire(new wz(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class xct extends ke{constructor(e,t,i){super(),this._configuration=e;const r=this._configuration.options,s=r.get(146),o=r.get(84);this._linesLayout=new yct(t,r.get(67),o.top,o.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new Sct(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new F_(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?wct:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const i=t.get(84);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(146)){const i=t.get(146),r=i.contentWidth,s=i.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new F_(r,o.contentWidth,s,this._getContentHeight(r,s,a)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const r=this._configuration.options.get(104);return r.horizontal===2||e>=t?0:r.horizontalScrollbarSize}_getContentHeight(e,t,i){const r=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return r.get(106)?s+=Math.max(0,t-r.get(67)-r.get(84).bottom):r.get(104).ignoreHorizontalScrollbarInContentHeight||(s+=this._getHorizontalScrollbarHeight(e,i)),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,r=e.contentWidth;this._scrollable.setScrollDimensions(new F_(t,e.contentWidth,i,this._getContentHeight(t,i,r)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new SQ(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new SQ(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(147),r=e.get(50),s=e.get(146);if(i.isViewportWrapping){const o=e.get(73);return t>s.contentWidth+r.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?t+s.verticalScrollbarWidth:t}else{const o=e.get(105)*r.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+o+s.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new F_(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),r=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-r,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class kct{constructor(e,t,i,r,s){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=r,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const r=e.range,s=e.options;let o;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new de(r.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new de(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);o=new te(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(r,1);i=new Xge(o,s),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,i=!1){const r=new te(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(r,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){const r=this._linesCollection.getDecorationsInRange(e,this.editorId,IL(this.configuration.options),t,i),s=e.startLineNumber,o=e.endLineNumber,a=[];let l=0;const c=[];for(let u=s;u<=o;u++)c[u-s]=[];for(let u=0,d=r.length;u<d;u++){const h=r[u],f=h.options;if(!Ect(this.model,h))continue;const g=this._getOrCreateViewModelDecoration(h),p=g.range;if(a[l++]=g,f.inlineClassName){const v=new PC(p,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),b=Math.max(s,p.startLineNumber),_=Math.min(o,p.endLineNumber);for(let y=b;y<=_;y++)c[y-s].push(v)}if(f.beforeContentClassName&&s<=p.startLineNumber&&p.startLineNumber<=o){const v=new PC(new te(p.startLineNumber,p.startColumn,p.startLineNumber,p.startColumn),f.beforeContentClassName,1);c[p.startLineNumber-s].push(v)}if(f.afterContentClassName&&s<=p.endLineNumber&&p.endLineNumber<=o){const v=new PC(new te(p.endLineNumber,p.endColumn,p.endLineNumber,p.endColumn),f.afterContentClassName,2);c[p.endLineNumber-s].push(v)}}return{decorations:a,inlineDecorations:c}}}function Ect(n,e){return!(e.options.hideInCommentTokens&&Lct(n,e)||e.options.hideInStringTokens&&Nct(n,e))}function Lct(n,e){return _pe(n,e.range,t=>t===1)}function Nct(n,e){return _pe(n,e.range,t=>t===2)}function _pe(n,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const r=n.tokenization.getLineTokens(i),s=i===e.startLineNumber,o=i===e.endLineNumber;let a=s?r.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<r.getCount()&&!(o&&r.getStartOffset(a)>e.endColumn-1);){if(!t(r.getStandardTokenType(a)))return!1;a++}}return!0}function zA(n,e){return n===null?e?iT.INSTANCE:rT.INSTANCE:new Tct(n,e)}class Tct{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const r=i>0?this._projectionData.breakOffsets[i-1]:0,s=this._projectionData.breakOffsets[i];let o;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,u)=>new vc(0,0,c+1,this._projectionData.injectionOptions[u],0));o=vc.applyInjectedText(e.getLineContent(t),a).substring(r,s)}else o=e.getValueInRange({startLineNumber:t,startColumn:r+1,endLineNumber:t,endColumn:s+1});return i>0&&(o=nJ(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const r=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],r),r[0]}getViewLinesData(e,t,i,r,s,o,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,u=l.injectionOptions;let d=null;if(c){d=[];let f=0,g=0;for(let p=0;p<l.getOutputLineCount();p++){const v=new Array;d[p]=v;const b=p>0?l.breakOffsets[p-1]:0,_=l.breakOffsets[p];for(;g<c.length;){const y=u[g].content.length,C=c[g]+f,w=C+y;if(C>_)break;if(b<w){const x=u[g];if(x.inlineClassName){const k=p>0?l.wrappedTextIndentLength:0,E=k+Math.max(C-b,0),L=k+Math.min(w-b,_-b);E!==L&&v.push(new bot(E,L,x.inlineClassName,x.inlineClassNameAffectsLetterSpacing))}}if(w<=_)f+=y,g++;else break}}}let h;c?h=e.tokenization.getLineTokens(t).withInserted(c.map((f,g)=>({offset:f,text:u[g].content,tokenMetadata:Er.defaultTokenMetadata}))):h=e.tokenization.getLineTokens(t);for(let f=i;f<i+r;f++){const g=s+f-i;if(!o[g]){a[g]=null;continue}a[g]=this._getViewLineData(h,d?d[f]:null,f)}}_getViewLineData(e,t,i){this._assertVisible();const r=this._projectionData,s=i>0?r.wrappedTextIndentLength:0,o=i>0?r.breakOffsets[i-1]:0,a=r.breakOffsets[i],l=e.sliceAndInflate(o,a,s);let c=l.getLineContent();i>0&&(c=nJ(r.wrappedTextIndentLength)+c);const u=this._projectionData.getMinOutputOffset(i)+1,d=c.length+1,h=i+1<this.getViewLineCount(),f=i===0?0:r.breakOffsetsVisibleColumn[i-1];return new lz(c,h,u,d,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const r=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(r)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}const nI=class nI{constructor(){}isVisible(){return!0}setVisible(e){return e?this:rT.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const r=e.tokenization.getLineTokens(t),s=r.getLineContent();return new lz(s,!1,1,s.length+1,0,r.inflate(),null)}getViewLinesData(e,t,i,r,s,o,a){if(!o[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new de(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}};nI.INSTANCE=new nI;let iT=nI;const iI=class iI{constructor(){}isVisible(){return!1}setVisible(e){return e?iT.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,r,s,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};iI.INSTANCE=new iI;let rT=iI;const WA=[""];function nJ(n){if(n>=WA.length)for(let e=1;e<=n;e++)WA[e]=Ict(e);return WA[n]}function Ict(n){return new Array(n+1).join(" ")}class Dct{constructor(e,t,i,r,s,o,a,l,c,u){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=r,this.fontInfo=s,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=u,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new Rct(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),r=this.model.getInjectedTextDecorations(this._editorId),s=i.length,o=this.createLineBreaksComputer(),a=new Hd(vc.fromDecorations(r));for(let p=0;p<s;p++){const v=a.takeWhile(b=>b.lineNumber===p+1);o.addRequest(i[p],v,t?t[p]:null)}const l=o.finalize(),c=[],u=this.hiddenAreasDecorationIds.map(p=>this.model.getDecorationRange(p)).sort(te.compareRangesUsingStarts);let d=1,h=0,f=-1,g=f+1<u.length?h+1:s+2;for(let p=0;p<s;p++){const v=p+1;v===g&&(f++,d=u[f].startLineNumber,h=u[f].endLineNumber,g=f+1<u.length?h+1:s+2);const b=v>=d&&v<=h,_=zA(l[p],!b);c[p]=_.getViewLineCount(),this.modelLineProjections[p]=_}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new wGe(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(h=>this.model.validateRange(h)),i=Mct(t),r=this.hiddenAreasDecorationIds.map(h=>this.model.getDecorationRange(h)).sort(te.compareRangesUsingStarts);if(i.length===r.length){let h=!1;for(let f=0;f<i.length;f++)if(!i[f].equalsRange(r[f])){h=!0;break}if(!h)return!1}const s=i.map(h=>({range:h,options:nr.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);const o=i;let a=1,l=0,c=-1,u=c+1<o.length?l+1:this.modelLineProjections.length+2,d=!1;for(let h=0;h<this.modelLineProjections.length;h++){const f=h+1;f===u&&(c++,a=o[c].startLineNumber,l=o[c].endLineNumber,u=c+1<o.length?l+1:this.modelLineProjections.length+2);let g=!1;if(f>=a&&f<=l?this.modelLineProjections[h].isVisible()&&(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!1),g=!0):(d=!0,this.modelLineProjections[h].isVisible()||(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!0),g=!0)),g){const p=this.modelLineProjections[h].getViewLineCount();this.projectedModelLineLineCounts.setValue(h,p)}}return d||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,r,s){const o=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===i,c=this.wrappingIndent===r,u=this.wordBreak===s;if(o&&a&&l&&c&&u)return!1;const d=o&&a&&!l&&c&&u;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=r,this.wordBreak=s;let h=null;if(d){h=[];for(let f=0,g=this.modelLineProjections.length;f<g;f++)h[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new j7(r,s)}onModelLinesInserted(e,t,i,r){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let u=0,d=r.length;u<d;u++){const h=zA(r[u],!s);l.push(h);const f=h.getViewLineCount();a+=f,c[u]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new K7(o,o+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const r=t-1,s=this.modelLineProjections[r].getViewLineCount(),o=this.modelLineProjections[r].isVisible(),a=zA(i,o);this.modelLineProjections[r]=a;const l=this.modelLineProjections[r].getViewLineCount();let c=!1,u=0,d=-1,h=0,f=-1,g=0,p=-1;s>l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=u+l-1,g=d+1,p=g+(s-l)-1,c=!0):s<l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=u+s-1,h=d+1,f=h+(l-s)-1,c=!0):(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=u+l-1),this.projectedModelLineLineCounts.setValue(r,l);const v=u<=d?new bpe(u,d-u+1):null,b=h<=f?new K7(h,f):null,_=g<=p?new j7(g,p):null;return[c,v,b,_]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const r=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(r.lineNumber,s.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,r=t.remainder;return new iJ(i+1,r)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new de(e.modelLineNumber,r)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new de(e.modelLineNumber,r)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),r=this.getViewLineInfo(t),s=new Array;let o=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=r.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const u=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,d=l===r.modelLineNumber?r.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let h=u;h<d;h++)a.push(new iJ(l,h))}if(!c.isVisible()&&o){const u=new de(l-1,this.model.getLineMaxColumn(l-1)+1),d=te.fromPositions(o,u);s.push(new rJ(d,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new de(l,1))}if(o){const l=te.fromPositions(o,this.getModelEndPositionOfViewLine(r));s.push(new rJ(l,a))}return s}getViewLinesBracketGuides(e,t,i,r){const s=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,s,r);for(const u of a.viewLines){const h=c[u.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=u.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<u.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let g=-1;if(f.column!==-1){const b=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(b.lineNumber===u.modelLineWrappedLineIdx)g=b.column;else if(b.lineNumber<u.modelLineWrappedLineIdx)g=this.getMinColumnOfViewLine(u);else if(b.lineNumber>u.modelLineWrappedLineIdx)return}const p=this.convertModelPositionToViewPosition(u.modelLineNumber,f.horizontalLine.endColumn),v=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return v.lineNumber===u.modelLineWrappedLineIdx?new Zg(f.visibleColumn,g,f.className,new EC(f.horizontalLine.top,p.column),-1,-1):v.lineNumber<u.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new Zg(f.visibleColumn,g,f.className,new EC(f.horizontalLine.top,this.getMaxColumnOfViewLine(u)),-1,-1)});o.push(h.filter(f=>!!f))}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const o=[],a=[],l=i.lineNumber-1,c=r.lineNumber-1;let u=null;for(let g=l;g<=c;g++){const p=this.modelLineProjections[g];if(p.isVisible()){const v=p.getViewLineNumberOfModelPosition(0,g===l?i.column:1),b=p.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),_=b-v+1;let y=0;_>1&&p.getViewLineMinColumn(this.model,g+1,b)===1&&(y=v===0?1:2),o.push(_),a.push(y),u===null&&(u=new de(g+1,0))}else u!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,g)),u=null)}u!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,r.lineNumber)),u=null);const d=t-e+1,h=new Array(d);let f=0;for(let g=0,p=s.length;g<p;g++){let v=s[g];const b=Math.min(d-f,o[g]),_=a[g];let y;_===2?y=0:_===1?y=1:y=b;for(let C=0;C<b;C++)C===y&&(v=0),h[f++]=v}return h}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const r=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const o=r.index,a=r.remainder,l=[];for(let c=o,u=this.model.getLineCount();c<u;c++){const d=this.modelLineProjections[c];if(!d.isVisible())continue;const h=c===o?a:0;let f=d.getViewLineCount()-h,g=!1;if(s+f>t&&(g=!0,f=t-s+1),d.getViewLinesData(this.model,c+1,h,f,s-e,i,l),s+=f,g)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const r=this.projectedModelLineLineCounts.getIndexOf(e-1),s=r.index,o=r.remainder,a=this.modelLineProjections[s],l=a.getViewLineMinColumn(this.model,s+1,o),c=a.getViewLineMaxColumn(this.model,s+1,o);t<l&&(t=l),t>c&&(t=c);const u=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new de(s+1,u)).equals(i)?new de(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),r=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new te(i.lineNumber,i.column,r.lineNumber,r.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),r=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new de(i.modelLineNumber,r))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new te(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,r=!1,s=!1){const o=this.model.validatePosition(new de(e,t)),a=o.lineNumber,l=o.column;let c=a-1,u=!1;if(s)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,u=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,u=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new de(r?0:1,1);const d=1+this.projectedModelLineLineCounts.getPrefixSum(c);let h;return u?s?h=this.modelLineProjections[c].getViewPositionOfModelPosition(d,1,i):h=this.modelLineProjections[c].getViewPositionOfModelPosition(d,this.model.getLineMaxColumn(c+1),i):h=this.modelLineProjections[a-1].getViewPositionOfModelPosition(d,l,i),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return te.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),r=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new te(i.lineNumber,i.column,r.lineNumber,r.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const s=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(s,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const r=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(r,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,r,s){const o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-o.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new te(o.lineNumber,1,a.lineNumber,a.column),t,i,r,s);let l=[];const c=o.lineNumber-1,u=a.lineNumber-1;let d=null;for(let p=c;p<=u;p++)if(this.modelLineProjections[p].isVisible())d===null&&(d=new de(p+1,p===c?o.column:1));else if(d!==null){const b=this.model.getLineMaxColumn(p);l=l.concat(this.model.getDecorationsInRange(new te(d.lineNumber,d.column,p,b),t,i,r)),d=null}d!==null&&(l=l.concat(this.model.getDecorationsInRange(new te(d.lineNumber,d.column,a.lineNumber,a.column),t,i,r)),d=null),l.sort((p,v)=>{const b=te.compareRangesUsingStarts(p.range,v.range);return b===0?p.id<v.id?-1:p.id>v.id?1:0:b});const h=[];let f=0,g=null;for(const p of l){const v=p.id;g!==v&&(g=v,h[f++]=p)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function Mct(n){if(n.length===0)return[];const e=n.slice();e.sort(te.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,r=e[0].endLineNumber;for(let s=1,o=e.length;s<o;s++){const a=e[s];a.startLineNumber>r+1?(t.push(new te(i,1,r,1)),i=a.startLineNumber,r=a.endLineNumber):a.endLineNumber>r&&(r=a.endLineNumber)}return t.push(new te(i,1,r,1)),t}class iJ{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class rJ{constructor(e,t){this.modelRange=e,this.viewLines=t}}class Rct{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,r){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,r)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class Act{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new Oct(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,r){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,r)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new j7(t,i)}onModelLinesInserted(e,t,i,r){return new K7(t,i)}onModelLineChanged(e,t,i){return[!1,new bpe(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,r=new Array(i);for(let s=0;s<i;s++)r[s]=0;return r}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new lz(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const r=this.model.getLineCount();e=Math.min(Math.max(1,e),r),t=Math.min(Math.max(1,t),r);const s=[];for(let o=e;o<=t;o++){const a=o-e;s[a]=i[a]?this.getViewLineData(o):null}return s}getDecorationsInRange(e,t,i,r,s){return this.model.getDecorationsInRange(e,t,i,r,s)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class Oct{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const rg=Nf.Right;class Pct{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*rg/8))}reset(e){const t=Math.ceil((e+1)*rg/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let r=t.startLineNumber;r<=t.endLineNumber;r++){const s=rg*r+(e-1);this.lanes[s>>>3]|=1<<s%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(r))}}getLanesAtLine(e){const t=[];let i=rg*e;for(let r=0;r<rg;r++)(this.persist&1<<r||this.lanes[i>>>3]&1<<i%8)&&t.push(r+1),i++;return t.length?t:[Nf.Center]}countAtLine(e){let t=rg*e,i=0;for(let r=0;r<rg;r++)(this.persist&1<<r||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}}let Fct=class extends ke{constructor(e,t,i,r,s,o,a,l,c,u){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=u,this.hiddenAreasModel=new Hct,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new sct,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new ev(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new bs(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=kz.create(this.model),this.glyphLanes=new Pct(0),this.model.isTooLargeForTokenization())this._lines=new Act(this.model);else{const d=this._configuration.options,h=d.get(50),f=d.get(140),g=d.get(147),p=d.get(139),v=d.get(130);this._lines=new Dct(this._editorId,this.model,r,s,h,this.model.getOptions().tabSize,f,g.wrappingColumn,p,v)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new mct(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new xct(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(d=>{d.scrollTopChanged&&this._handleVisibleLinesChanged(),d.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new ect(d)),this._eventDispatcher.emitOutgoingEvent(new xz(d.oldScrollWidth,d.oldScrollLeft,d.oldScrollHeight,d.oldScrollTop,d.scrollWidth,d.scrollLeft,d.scrollHeight,d.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(d=>{this._eventDispatcher.emitOutgoingEvent(d)})),this._decorations=new kct(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(d=>{try{const h=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(h,d)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(JN.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new ict)})),this._register(this._themeService.onDidColorThemeChange(d=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new tct(d))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new te(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new Qlt(e)),this._eventDispatcher.emitOutgoingEvent(new Sz(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new Glt)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new Ylt)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new de(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new oJ(t,this._viewportStart.startLineDelta)}return new oJ(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),r=this._configuration.options,s=r.get(50),o=r.get(140),a=r.get(147),l=r.get(139),c=r.get(130);this._lines.setWrappingSettings(s,o,a.wrappingColumn,l,c)&&(e.emitViewEvent(new Lk),e.emitViewEvent(new Nk),e.emitViewEvent(new ig(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new ig(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new ig(null))),e.emitViewEvent(new Zlt(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),ev.shouldRecreate(t)&&(this.cursorConfig=new ev(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let r=!1,s=!1;const o=e instanceof yp?e.rawContentChangedEvent.changes:e.changes,a=e instanceof yp?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const d of o)switch(d.changeType){case 4:{for(let h=0;h<d.detail.length;h++){const f=d.detail[h];let g=d.injectedTexts[h];g&&(g=g.filter(p=>!p.ownerId||p.ownerId===this._editorId)),l.addRequest(f,g,null)}break}case 2:{let h=null;d.injectedText&&(h=d.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(d.detail,h,null);break}}const c=l.finalize(),u=new Hd(c);for(const d of o)switch(d.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new Lk),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),r=!0;break}case 3:{const h=this._lines.onModelLinesDeleted(a,d.fromLineNumber,d.toLineNumber);h!==null&&(i.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),r=!0;break}case 4:{const h=u.takeCount(d.detail.length),f=this._lines.onModelLinesInserted(a,d.fromLineNumber,d.toLineNumber,h);f!==null&&(i.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),r=!0;break}case 2:{const h=u.dequeue(),[f,g,p,v]=this._lines.onModelLineChanged(a,d.lineNumber,h);s=f,g&&i.emitViewEvent(g),p&&(i.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),v&&(i.emitViewEvent(v),this.viewLayout.onLinesDeleted(v.fromLineNumber,v.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!r&&s&&(i.emitViewEvent(new Nk),i.emitViewEvent(new ig(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){const r=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();e instanceof yp&&i.emitOutgoingEvent(new fct(e.contentChangedEvent)),this._cursor.onModelContentChanged(i,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let i=0,r=e.ranges.length;i<r;i++){const s=e.ranges[i],o=this.coordinatesConverter.convertModelPositionToViewPosition(new de(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new de(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[i]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new nct(t)),this._eventDispatcher.emitOutgoingEvent(new pct(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new Jlt),this.cursorConfig=new ev(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new hct(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new ev(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new dct(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new Lk),t.emitViewEvent(new Nk),t.emitViewEvent(new ig(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new ev(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new gct(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new ig(e)),this._eventDispatcher.emitOutgoingEvent(new uct(e))}))}setHiddenAreas(e,t){var o;this.hiddenAreasModel.setHiddenAreas(t,e);const i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;const r=this._captureStableViewport();let s=!1;try{const a=this._eventDispatcher.beginEmitViewEvents();s=this._lines.setHiddenAreas(i),s&&(a.emitViewEvent(new Lk),a.emitViewEvent(new Nk),a.emitViewEvent(new ig(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const l=(o=r.viewportStartModelPosition)==null?void 0:o.lineNumber;l&&i.some(u=>u.startLineNumber<=l&&l<=u.endLineNumber)||r.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),s&&this._eventDispatcher.emitOutgoingEvent(new lct)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(146),t=this._configuration.options.get(67),i=Math.max(20,Math.round(e.height/t)),r=this.viewLayout.getLinesViewportData(),s=Math.max(1,r.completelyVisibleStartLineNumber-i),o=Math.min(this.getLineCount(),r.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new te(s,this.getLineMinColumn(s),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const r=[];let s=0,o=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let u=0,d=i.length;u<d;u++){const h=i[u].startLineNumber,f=i[u].endLineNumber;f<o||h>l||(o<h&&(r[s++]=new te(o,a,h-1,this.model.getLineMaxColumn(h-1))),o=f+1,a=1)}return(o<l||o===l&&a<c)&&(r[s++]=new te(o,a,l,c)),r}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new te(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,r=t.completelyVisibleEndLineNumber;return new te(i,this.getLineMinColumn(i),r,this.getLineMaxColumn(r))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),r=this.coordinatesConverter.convertViewPositionToModelPosition(new de(i,this.getLineMinColumn(i))),s=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:r,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),r=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:r}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,r){return this._lines.getViewLinesBracketGuides(e,t,i,r)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=To(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=mm(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const r=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,r)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),r=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),o=this._lines.getViewLineData(e);return o.inlineDecorations&&(t=[...t,...o.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new fa(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,i,r,o.tokens,t,s,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const r=this._lines.getViewLinesData(e,t,i);return new vot(this.getTabSize(),r)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,IL(this._configuration.options)),i=new Bct;for(const r of t){const s=r.options,o=s.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.startLineNumber,r.range.startColumn),u=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.endLineNumber,r.range.endColumn);i.accept(l,s.zIndex,c,u,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const i=t.options.overviewRuler;i==null||i.invalidateCachedColor();const r=t.options.minimap;r==null||r.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e),r=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(r)}deduceModelPositionRelativeToViewPosition(e,t,i){const r=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const o=this.model.getOffsetAt(r)+t;return this.model.getPositionAt(o)}getPlainTextToCopy(e,t,i){const r=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(te.compareRangesUsingStarts);let s=!1,o=!1;for(const l of e)l.isEmpty()?s=!0:o=!0;if(!o){if(!t)return"";const l=e.map(u=>u.startLineNumber);let c="";for(let u=0;u<l.length;u++)u>0&&l[u-1]===l[u]||(c+=this.model.getLineContent(l[u])+r);return c}if(s&&t){const l=[];let c=0;for(const u of e){const d=u.startLineNumber;u.isEmpty()?d!==c&&l.push(this.model.getLineContent(d)):l.push(this.model.getValueInRange(u,i?2:0)),c=d}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===gl||e.length!==1)return null;let r=e[0];if(r.isEmpty()){if(!t)return null;const u=r.startLineNumber;r=new te(u,this.model.getLineMinColumn(u),u,this.model.getLineMaxColumn(u))}const s=this._configuration.options.get(50),o=this._getColorMap(),l=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===la.fontFamily;let c;return l?c=la.fontFamily:(c=s.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${la.fontFamily}`),{mode:i,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(r,o)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,r=e.startColumn,s=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=s;c++){const u=this.model.tokenization.getLineTokens(c),d=u.getLineContent(),h=c===i?r-1:0,f=c===s?o-1:d.length;d===""?l+="<br>":l+=xQe(d,u.inflate(),t,h,f,a,Ao)}return l}_getColorMap(){const e=Hi.getColorMap(),t=["#000000"];if(e)for(let i=1,r=e.length;i<r;i++)t[i]=De.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(r=>this._cursor.setStates(r,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(r=>this._cursor.setSelections(r,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new cct);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(r=>this._cursor.executeEdits(r,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,r,s){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,i,r,s))}paste(e,t,i,r){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,i,r))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealAllCursors(e,t,i=!1){this._withViewEventsCollector(r=>this._cursor.revealAll(r,e,i,0,t,0))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(r=>this._cursor.revealPrimary(r,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new te(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new WC(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new te(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new WC(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,r,s){this._withViewEventsCollector(o=>o.emitViewEvent(new WC(e,!1,i,null,r,t,s)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new rct),this._eventDispatcher.emitOutgoingEvent(new act))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class kz{static create(e){const t=e._setTrackedRange(null,new te(1,1,1,1),1);return new kz(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,r,s){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=r,this._startLineDelta=s}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new de(t,e.getLineMinColumn(t))),r=e.model._setTrackedRange(this._modelTrackedRange,new te(i.lineNumber,i.column,i.lineNumber,i.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=r,this._startLineDelta=o-s}invalidate(){this._isValid=!1}}class Bct{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,r,s){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===s&&c+1>=i){r>c&&(a[a.length-1]=r);return}a.push(s,i,r)}else{const a=new xw(e,t,[s,i,r]);this._asMap[e]=a,this.asArray.push(a)}}}class Hct{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&sJ(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,i)=>Vct(t,i),[]);return sJ(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function Vct(n,e){const t=[];let i=0,r=0;for(;i<n.length&&r<e.length;){const s=n[i],o=e[r];if(s.endLineNumber<o.startLineNumber-1)t.push(n[i++]);else if(o.endLineNumber<s.startLineNumber-1)t.push(e[r++]);else{const a=Math.min(s.startLineNumber,o.startLineNumber),l=Math.max(s.endLineNumber,o.endLineNumber);t.push(new te(a,1,l,1)),i++,r++}}for(;i<n.length;)t.push(n[i++]);for(;r<e.length;)t.push(e[r++]);return t}function sJ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].equalsRange(e[t]))return!1;return!0}class oJ{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),r=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:r+this.startLineDelta},1)}}var zct=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Fu=function(n,e){return function(t,i){e(t,i,n)}},fg,Ip;let sT=(Ip=class extends ke{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,i,r,s,o,a,l,c,u,d,h){super(),this.languageConfigurationService=d,this._deliveryQueue=T$e(),this._contributions=this._register(new Ult),this._onDidDispose=this._register(new ae),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new ts(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new aJ({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new aJ({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new ts(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new ts(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new ts(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new ts(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new ts(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new ts(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new ts(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new ts(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new ts(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new ts(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new ts(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new ts(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new ts(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new ts(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new ts(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new ts(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new ts(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new ae({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new ae),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new ae),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),s.willCreateCodeEditor();const f={...t};this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++Wct,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,i.contextMenuId??(i.isSimpleWidget?Br.SimpleEditorContext:Br.EditorContext),f,u)),this._register(this._configuration.onDidChange(v=>{this._onDidChangeConfiguration.fire(v);const b=this._configuration.options;if(v.hasChanged(146)){const _=b.get(146);this._onDidLayoutChange.fire(_)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=s,this._commandService=o,this._themeService=l,this._register(new Uct(this,this._contextKeyService)),this._register(new jct(this,this._contextKeyService,h)),this._instantiationService=this._register(r.createChild(new Sb([In,this._contextKeyService]))),this._modelData=null,this._focusTracker=new Kct(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let g;Array.isArray(i.contributions)?g=i.contributions:g=D0.getEditorContributions(),this._contributions.initialize(this,g,this._instantiationService);for(const v of D0.getEditorActions()){if(this._actions.has(v.id)){$n(new Error(`Cannot have two actions with the same id ${v.id}`));continue}const b=new mpe(v.id,v.label,v.alias,v.metadata,v.precondition??void 0,_=>this._instantiationService.invokeFunction(y=>Promise.resolve(v.runEditorCommand(y,this,_))),this._contextKeyService);this._actions.set(b.id,b)}const p=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new Oje(this._domElement,{onDragOver:v=>{if(!p())return;const b=this.getTargetAtClientPoint(v.clientX,v.clientY);b!=null&&b.position&&this.showDropIndicatorAt(b.position)},onDrop:async v=>{if(!p()||(this.removeDropIndicator(),!v.dataTransfer))return;const b=this.getTargetAtClientPoint(v.clientX,v.clientY);b!=null&&b.position&&this._onDropIntoEditor.fire({position:b.position,event:v})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)==null||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i,r){return new L7(e,t,i,this._domElement,r)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return oz.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Mi.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){var t;try{this._beginUpdate();const i=e;if(this._modelData===null&&i===null||this._modelData&&this._modelData.model===i)return;const r={oldModelUrl:((t=this._modelData)==null?void 0:t.model.uri)||null,newModelUrl:(i==null?void 0:i.uri)||null};this._onWillChangeModel.fire(r);const s=this.hasTextFocus(),o=this._detachModel();this._attachModel(i),s&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(r),this._postDetachModelCleanup(o),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,r){const s=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,r)}getTopForLineNumber(e,t=!1){return this._modelData?fg._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?fg._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,r=!1){const s=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,r)}getBottomForLineNumber(e,t=!1){if(!this._modelData)return-1;const i=this._modelData.model.getLineMaxColumn(e);return fg._getVerticalOffsetAfterPosition(this._modelData,e,i,t)}setHiddenAreas(e,t){var i;(i=this._modelData)==null||i.viewModel.setHiddenAreas(e.map(r=>te.lift(r)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return er.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!de.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,r){if(!this._modelData)return;if(!te.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",i,o,t,r)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new te(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,r){if(!de.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new te(e.lineNumber,e.column,e.lineNumber,e.column),t,i,r)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=an.isISelection(e),r=te.isIRange(e);if(!i&&!r)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(r){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new an(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,r){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new te(e,1,t,1),i,!1,r)}revealRange(e,t=0,i=!1,r=!0){this._revealRange(e,i?1:0,r,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,r){if(!te.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(te.lift(e),t,i,r)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let r=0,s=e.length;r<s;r++)if(!an.isISelection(e[r]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});const r=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(r)}}handleInitialized(){var e;(e=this._getViewModel())==null||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){i=i||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=i;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=i;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=i;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=i;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null,s.clipboardEvent);return}case"cut":this._cut(e);return}const r=this.getAction(t);if(r){Promise.resolve(r.run(i)).then(void 0,$n);return}if(!this._modelData||this._triggerEditorCommand(e,t,i))return;this._triggerCommand(t,i)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,r,s){this._modelData&&this._modelData.viewModel.compositionType(t,i,r,s,e)}_paste(e,t,i,r,s,o){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,i,r,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:o,range:new te(l.lineNumber,l.column,c.lineNumber,c.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const r=D0.getEditorCommand(t);return r?(i=i||{},i.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(r.runEditorCommand(s,this,i)).then(void 0,$n)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(92))return!1;let r;return i?Array.isArray(i)?r=()=>i:r=i:r=()=>null,this._modelData.viewModel.executeEdits(e,t,r),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new qct(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,IL(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,IL(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(i=>i.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,r=i.get(146),s=fg._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+r.glyphMarginWidth+r.lineNumbersWidth+r.decorationsWidth-this.getScrollLeft();return{top:s,left:o,height:i.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Gr(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),r=new Fct(this._id,this._configuration,e,Cz.create(bt(this._domElement)),yz.create(this._configuration.options),a=>Po(bt(this._domElement),a),this.languageConfigurationService,this._themeService,i,{batchChanges:a=>{try{return this._beginUpdate(),a()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(r.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const d=this.getOption(80),h=S("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",d);this._notificationService.prompt(AGe.Warning,h,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:S("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let d=0,h=a.selections.length;d<h;d++)l[d]=a.selections[d].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const u={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(u);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[s,o]=this._createView(r);if(o){this._domElement.appendChild(s.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];s.addContentWidget(this._contentWidgets[u])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];s.addOverlayWidget(this._overlayWidgets[u])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];s.addGlyphMarginWidget(this._glyphMarginWidgets[u])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new $ct(e,r,s,o,t,i)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,o,a,l)=>{this._paste("keyboard",s,o,a,l)},type:s=>{this._type("keyboard",s)},compositionType:(s,o,a,l)=>{this._compositionType("keyboard",s,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,o,a,l)=>{const c={text:s,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:s=>{const o={text:s};this._commandService.executeCommand("type",o)},compositionType:(s,o,a,l)=>{if(a||l){const c={text:s,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:s,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new TM(e.coordinatesConverter);return i.onKeyDown=s=>this._onKeyDown.fire(s),i.onKeyUp=s=>this._onKeyUp.fire(s),i.onContextMenu=s=>this._onContextMenu.fire(s),i.onMouseMove=s=>this._onMouseMove.fire(s),i.onMouseLeave=s=>this._onMouseLeave.fire(s),i.onMouseDown=s=>this._onMouseDown.fire(s),i.onMouseUp=s=>this._onMouseUp.fire(s),i.onMouseDrag=s=>this._onMouseDrag.fire(s),i.onMouseDrop=s=>this._onMouseDrop.fire(s),i.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),i.onMouseWheel=s=>this._onMouseWheel.fire(s),[new H7(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var i;if((i=this._contributionsDisposable)==null||i.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new te(e.lineNumber,e.column,e.lineNumber,e.column),options:fg.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}},fg=Ip,Ip.dropIntoEditorDecorationOptions=nr.register({description:"workbench-dnd-target",className:"dnd-target"}),Ip);sT=fg=zct([Fu(3,Fn),Fu(4,or),Fu(5,ga),Fu(6,In),Fu(7,Nl),Fu(8,Ec),Fu(9,Lc),Fu(10,Eu),Fu(11,Yn)],sT);let Wct=0;class $ct{constructor(e,t,i,r,s,o){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=r,this.listenersToRemove=s,this.attachedView=o}dispose(){zr(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class aJ extends ke{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new ae(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new ae(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class ts extends ae{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class Uct extends ke{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=et.editorSimpleInput.bindTo(t),this._editorFocus=et.focus.bindTo(t),this._textInputFocus=et.textInputFocus.bindTo(t),this._editorTextFocus=et.editorTextFocus.bindTo(t),this._tabMovesFocus=et.tabMovesFocus.bindTo(t),this._editorReadonly=et.readOnly.bindTo(t),this._inDiffEditor=et.inDiffEditor.bindTo(t),this._editorColumnSelection=et.columnSelection.bindTo(t),this._hasMultipleSelections=et.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=et.hasNonEmptySelection.bindTo(t),this._canUndo=et.canUndo.bindTo(t),this._canRedo=et.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(UN.onDidChangeTabFocus(i=>this._tabMovesFocus.set(i))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(UN.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class jct extends ke{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=et.languageId.bindTo(t),this._hasCompletionItemProvider=et.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=et.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=et.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=et.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=et.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=et.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=et.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=et.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=et.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=et.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=et.hasReferenceProvider.bindTo(t),this._hasRenameProvider=et.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=et.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=et.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=et.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=et.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=et.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=et.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=et.isInEmbeddedEditor.bindTo(t);const r=()=>this._update();this._register(e.onDidChangeModel(r)),this._register(e.onDidChangeModelLanguage(r)),this._register(i.completionProvider.onDidChange(r)),this._register(i.codeActionProvider.onDidChange(r)),this._register(i.codeLensProvider.onDidChange(r)),this._register(i.definitionProvider.onDidChange(r)),this._register(i.declarationProvider.onDidChange(r)),this._register(i.implementationProvider.onDidChange(r)),this._register(i.typeDefinitionProvider.onDidChange(r)),this._register(i.hoverProvider.onDidChange(r)),this._register(i.documentHighlightProvider.onDidChange(r)),this._register(i.documentSymbolProvider.onDidChange(r)),this._register(i.referenceProvider.onDidChange(r)),this._register(i.renameProvider.onDidChange(r)),this._register(i.documentFormattingEditProvider.onDidChange(r)),this._register(i.documentRangeFormattingEditProvider.onDidChange(r)),this._register(i.signatureHelpProvider.onDidChange(r)),this._register(i.inlayHintsProvider.onDidChange(r)),r()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===Wt.walkThroughSnippet||e.uri.scheme===Wt.vscodeChatCodeBlock)})}}class Kct extends ke{constructor(e,t){super(),this._onChange=this._register(new ae),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(Jy(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(Jy(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class qct{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(r=>{this._isChangingDecorations||e.call(t,r)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const r=e.getDecorationRange(i);r&&t.push(r)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const Gct=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),Yct=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function $A(n){return Gct+encodeURIComponent(n.toString())+Yct}const Zct=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),Xct=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function Qct(n){return Zct+encodeURIComponent(n.toString())+Xct}Yd((n,e)=>{const t=n.getColor(JH);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${$A(t)}") repeat-x bottom left; }`);const i=n.getColor(If);i&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${$A(i)}") repeat-x bottom left; }`);const r=n.getColor(nm);r&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${$A(r)}") repeat-x bottom left; }`);const s=n.getColor(yYe);s&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${Qct(s)}") no-repeat bottom left; }`);const o=n.getColor(ltt);o&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${o.rgba.a}; }`)});class oT{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new oT(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const r=e.getVisibleRanges();if(r.length>0){t=r[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-s}return new oT(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,r,s){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=r,this._cursorPosition=s}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}}function Jct(n,e,t,i){if(n.length===0)return e;if(e.length===0)return n;const r=[];let s=0,o=0;for(;s<n.length&&o<e.length;){const a=n[s],l=e[o],c=t(a),u=t(l);c<u?(r.push(a),s++):c>u?(r.push(l),o++):(r.push(i(a,l)),s++,o++)}for(;s<n.length;)r.push(n[s]),s++;for(;o<e.length;)r.push(e[o]),o++;return r}function aT(n,e){const t=new dt,i=n.createDecorationsCollection();return t.add(aM({debugName:()=>`Apply decorations from ${e.debugName}`},r=>{const s=e.read(r);i.set(s)})),t.add({dispose:()=>{i.clear()}}),t}function B_(n,e){return n.appendChild(e),Pt(()=>{e.remove()})}function eut(n,e){return n.prepend(e),Pt(()=>{e.remove()})}class Cpe extends ke{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new epe(e,t)),this._width=mn(this,this.elementSizeObserver.getWidth()),this._height=mn(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(i=>tr(r=>{this._width.set(this.elementSizeObserver.getWidth(),r),this._height.set(this.elementSizeObserver.getHeight(),r)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function lJ(n,e,t){let i=e.get(),r=i,s=i;const o=mn("animatedValue",i);let a=-1;const l=300;let c;t.add(lM({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(d,h)=>(d.didChange(e)&&(h.animate=h.animate||d.change),!0)},(d,h)=>{c!==void 0&&(n.cancelAnimationFrame(c),c=void 0),r=s,i=e.read(d),a=Date.now()-(h.animate?0:l),u()}));function u(){const d=Date.now()-a;s=Math.floor(tut(d,r,i-r,l)),d<l?c=n.requestAnimationFrame(u):s=i,o.set(s,void 0)}return o}function tut(n,e,t,i){return n===i?e+t:t*(-Math.pow(2,-10*n/i)+1)+e}class Ez extends ke{constructor(e,t,i){super(),this._register(new q7(e,i)),this._register(Af(i,{height:t.actualHeight,top:t.actualTop}))}}class Qv{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=mn(this,void 0),this._actualHeight=mn(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=i=>{this._actualTop.set(i,void 0)},this.onComputedHeight=i=>{this._actualHeight.set(i,void 0)}}}const rI=class rI{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${rI._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};rI._counter=0;let q7=rI;function Af(n,e){return xn(t=>{for(let[i,r]of Object.entries(e))r&&typeof r=="object"&&"read"in r&&(r=r.read(t)),typeof r=="number"&&(r=`${r}px`),i=i.replace(/[A-Z]/g,s=>"-"+s.toLowerCase()),n.style[i]=r})}function lT(n,e,t,i){const r=new dt,s=[];return r.add(lc((o,a)=>{const l=e.read(o),c=new Map,u=new Map;t&&t(!0),n.changeViewZones(d=>{for(const h of s)d.removeZone(h),i==null||i.delete(h);s.length=0;for(const h of l){const f=d.addZone(h);h.setZoneId&&h.setZoneId(f),s.push(f),i==null||i.add(f),c.set(h,f)}}),t&&t(!1),a.add(lM({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(d,h){const f=u.get(d.changedObservable);return f!==void 0&&h.zoneIds.push(f),!0}},(d,h)=>{for(const f of l)f.onChange&&(u.set(f.onChange,c.get(f)),f.onChange.read(d));t&&t(!0),n.changeViewZones(f=>{for(const g of h.zoneIds)f.layoutZone(g)}),t&&t(!1)}))})),r.add({dispose(){t&&t(!0),n.changeViewZones(o=>{for(const a of s)o.removeZone(a)}),i==null||i.clear(),t&&t(!1)}}),r}function cJ(n,e){const t=qL(e,r=>r.original.startLineNumber<=n.lineNumber);if(!t)return te.fromPositions(n);if(t.original.endLineNumberExclusive<=n.lineNumber){const r=n.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return te.fromPositions(new de(r,n.column))}if(!t.innerChanges)return te.fromPositions(new de(t.modified.startLineNumber,1));const i=qL(t.innerChanges,r=>r.originalRange.getStartPosition().isBeforeOrEqual(n));if(!i){const r=n.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return te.fromPositions(new de(r,n.column))}if(i.originalRange.containsPosition(n))return i.modifiedRange;{const r=nut(i.originalRange.getEndPosition(),n);return te.fromPositions(r.addToPosition(i.modifiedRange.getEndPosition()))}}function nut(n,e){return n.lineNumber===e.lineNumber?new Tf(0,e.column-n.column):new Tf(e.lineNumber-n.lineNumber,e.column-1)}function iut(n,e){let t;return n.filter(i=>{const r=e(i,t);return t=i,r})}class cT{static create(e,t=void 0){return new uJ(e,e,t)}static createWithDisposable(e,t,i=void 0){const r=new dt;return r.add(t),r.add(e),new uJ(e,r,i)}}class uJ extends cT{constructor(e,t,i){super(),this.object=e,this._disposable=t,this._debugOwner=i,this._refCount=1,this._isDisposed=!1,this._owners=[],i&&this._addOwner(i)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new rut(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class rut extends cT{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var Lz=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Nz=function(n,e){return function(t,i){e(t,i,n)}};const sut=Gf("diff-review-insert",rt.add,S("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),out=Gf("diff-review-remove",rt.remove,S("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),aut=Gf("diff-review-close",rt.close,S("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));var Q0;let Qg=(Q0=class extends ke{constructor(e,t,i,r,s,o,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=r,this._width=s,this._height=o,this._diffs=a,this._models=l,this._instantiationService=c,this._state=Cb(this,(u,d)=>{const h=this._visible.read(u);if(this._parentNode.style.visibility=h?"visible":"hidden",!h)return null;const f=d.add(this._instantiationService.createInstance(G7,this._diffs,this._models,this._setVisible,this._canClose)),g=d.add(this._instantiationService.createInstance(Y7,this._parentNode,f,this._width,this._height,this._models));return{model:f,view:g}}).recomputeInitiallyAndOnChange(this._store)}next(){tr(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){tr(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){tr(e=>{this._setVisible(!1,e)})}},Q0._ttPolicy=Sm("diffReview",{createHTML:e=>e}),Q0);Qg=Lz([Nz(8,Fn)],Qg);let G7=class extends ke{constructor(e,t,i,r,s){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=r,this._accessibilitySignalService=s,this._groups=mn(this,[]),this._currentGroupIdx=mn(this,0),this._currentElementIdx=mn(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((o,a)=>this._groups.read(a)[o]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((o,a)=>{var l;return(l=this.currentGroup.read(a))==null?void 0:l.lines[o]}),this._register(xn(o=>{const a=this._diffs.read(o);if(!a){this._groups.set([],void 0);return}const l=lut(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());tr(c=>{const u=this._models.getModifiedPosition();if(u){const d=l.findIndex(h=>(u==null?void 0:u.lineNumber)<h.range.modified.endLineNumberExclusive);d!==-1&&this._currentGroupIdx.set(d,c)}this._groups.set(l,c)})})),this._register(xn(o=>{const a=this.currentElement.read(o);(a==null?void 0:a.type)===Ms.Deleted?this._accessibilitySignalService.playSignal(Qc.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(a==null?void 0:a.type)===Ms.Added&&this._accessibilitySignalService.playSignal(Qc.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(xn(o=>{const a=this.currentElement.read(o);if(a&&a.type!==Ms.Header){const l=a.modifiedLineNumber??a.diff.modified.startLineNumber;this._models.modifiedSetSelection(te.fromPositions(new de(l,1)))}}))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||CV(t,r=>{this._currentGroupIdx.set(Ht.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),r),this._currentElementIdx.set(0,r)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||tr(i=>{this._currentElementIdx.set(Ht.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);i!==-1&&tr(r=>{this._currentElementIdx.set(i,r)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===Ms.Deleted?this._models.originalReveal(te.fromPositions(new de(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==Ms.Header?te.fromPositions(new de(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};G7=Lz([Nz(4,xM)],G7);const m_=3;function lut(n,e,t){const i=[];for(const r of iH(n,(s,o)=>o.modified.startLineNumber-s.modified.endLineNumberExclusive<2*m_)){const s=[];s.push(new uut);const o=new It(Math.max(1,r[0].original.startLineNumber-m_),Math.min(r[r.length-1].original.endLineNumberExclusive+m_,e+1)),a=new It(Math.max(1,r[0].modified.startLineNumber-m_),Math.min(r[r.length-1].modified.endLineNumberExclusive+m_,t+1));Sue(r,(u,d)=>{const h=new It(u?u.original.endLineNumberExclusive:o.startLineNumber,d?d.original.startLineNumber:o.endLineNumberExclusive),f=new It(u?u.modified.endLineNumberExclusive:a.startLineNumber,d?d.modified.startLineNumber:a.endLineNumberExclusive);h.forEach(g=>{s.push(new fut(g,f.startLineNumber+(g-h.startLineNumber)))}),d&&(d.original.forEach(g=>{s.push(new dut(d,g))}),d.modified.forEach(g=>{s.push(new hut(d,g))}))});const l=r[0].modified.join(r[r.length-1].modified),c=r[0].original.join(r[r.length-1].original);i.push(new cut(new ds(l,c),s))}return i}var Ms;(function(n){n[n.Header=0]="Header",n[n.Unchanged=1]="Unchanged",n[n.Deleted=2]="Deleted",n[n.Added=3]="Added"})(Ms||(Ms={}));class cut{constructor(e,t){this.range=e,this.lines=t}}class uut{constructor(){this.type=Ms.Header}}class dut{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=Ms.Deleted,this.modifiedLineNumber=void 0}}class hut{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=Ms.Added,this.originalLineNumber=void 0}}class fut{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=Ms.Unchanged}}let Y7=class extends ke{constructor(e,t,i,r,s,o){super(),this._element=e,this._model=t,this._width=i,this._height=r,this._models=s,this._languageService=o,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new Td(a)),this._register(xn(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new Ed("diffreview.close",S("label.close","Close"),"close-diff-review "+vn.asClassName(aut),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new rV(this._content,{})),Fs(this.domNode,this._scrollbar.getDomNode(),a),this._register(xn(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(Pt(()=>{Fs(this.domNode)})),this._register(Af(this.domNode,{width:this._width,height:this._height})),this._register(Af(this._content,{width:this._width,height:this._height})),this._register(lc((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(vr(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),r=document.createElement("div");r.className="diff-review-table",r.setAttribute("role","list"),r.setAttribute("aria-label",S("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),Gr(r,i.get(50)),Fs(this._content,r);const s=this._models.getOriginalModel(),o=this._models.getModifiedModel();if(!s||!o)return;const a=s.getOptions(),l=o.getOptions(),c=i.get(67),u=this._model.currentGroup.get();for(const d of(u==null?void 0:u.lines)||[]){if(!u)break;let h;if(d.type===Ms.Header){const g=document.createElement("div");g.className="diff-review-row",g.setAttribute("role","listitem");const p=u.range,v=this._model.currentGroupIndex.get(),b=this._model.groups.get().length,_=x=>x===0?S("no_lines_changed","no lines changed"):x===1?S("one_line_changed","1 line changed"):S("more_lines_changed","{0} lines changed",x),y=_(p.original.length),C=_(p.modified.length);g.setAttribute("aria-label",S({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",v+1,b,p.original.startLineNumber,y,p.modified.startLineNumber,C));const w=document.createElement("div");w.className="diff-review-cell diff-review-summary",w.appendChild(document.createTextNode(`${v+1}/${b}: @@ -${p.original.startLineNumber},${p.original.length} +${p.modified.startLineNumber},${p.modified.length} @@`)),g.appendChild(w),h=g}else h=this._createRow(d,c,this._width.get(),t,s,a,i,o,l);r.appendChild(h);const f=Ot(g=>this._model.currentElement.read(g)===d);e.add(xn(g=>{const p=f.read(g);h.tabIndex=p?0:-1,p&&h.focus()})),e.add(_e(h,"focus",()=>{this._model.goToLine(d)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,r,s,o,a,l,c){const u=r.get(146),d=u.glyphMarginWidth+u.lineNumbersWidth,h=a.get(146),f=10+h.glyphMarginWidth+h.lineNumbersWidth;let g="diff-review-row",p="";const v="diff-review-spacer";let b=null;switch(e.type){case Ms.Added:g="diff-review-row line-insert",p=" char-insert",b=sut;break;case Ms.Deleted:g="diff-review-row line-delete",p=" char-delete",b=out;break}const _=document.createElement("div");_.style.minWidth=i+"px",_.className=g,_.setAttribute("role","listitem"),_.ariaLevel="";const y=document.createElement("div");y.className="diff-review-cell",y.style.height=`${t}px`,_.appendChild(y);const C=document.createElement("span");C.style.width=d+"px",C.style.minWidth=d+"px",C.className="diff-review-line-number"+p,e.originalLineNumber!==void 0?C.appendChild(document.createTextNode(String(e.originalLineNumber))):C.innerText="",y.appendChild(C);const w=document.createElement("span");w.style.width=f+"px",w.style.minWidth=f+"px",w.style.paddingRight="10px",w.className="diff-review-line-number"+p,e.modifiedLineNumber!==void 0?w.appendChild(document.createTextNode(String(e.modifiedLineNumber))):w.innerText="",y.appendChild(w);const x=document.createElement("span");if(x.className=v,b){const L=document.createElement("span");L.className=vn.asClassName(b),L.innerText="",x.appendChild(L)}else x.innerText="";y.appendChild(x);let k;if(e.modifiedLineNumber!==void 0){let L=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);Qg._ttPolicy&&(L=Qg._ttPolicy.createHTML(L)),y.insertAdjacentHTML("beforeend",L),k=l.getLineContent(e.modifiedLineNumber)}else{let L=this._getLineHtml(s,r,o.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);Qg._ttPolicy&&(L=Qg._ttPolicy.createHTML(L)),y.insertAdjacentHTML("beforeend",L),k=s.getLineContent(e.originalLineNumber)}k.length===0&&(k=S("blankLine","blank"));let E="";switch(e.type){case Ms.Unchanged:e.originalLineNumber===e.modifiedLineNumber?E=S({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",k,e.originalLineNumber):E=S("equalLine","{0} original line {1} modified line {2}",k,e.originalLineNumber,e.modifiedLineNumber);break;case Ms.Added:E=S("insertLine","+ {0} modified line {1}",k,e.modifiedLineNumber);break;case Ms.Deleted:E=S("deleteLine","- {0} original line {1}",k,e.originalLineNumber);break}return _.setAttribute("aria-label",E),_}_getLineHtml(e,t,i,r,s){const o=e.getLineContent(r),a=t.get(50),l=Er.createEmpty(o,s),c=fa.isBasicASCII(o,e.mightContainNonBasicASCII()),u=fa.containsRTL(o,c,e.mightContainRTL());return kM(new xb(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,o,!1,c,u,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==Zp.OFF,null)).html}};Y7=Lz([Nz(5,br)],Y7);class gut{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}Z("diffEditor.move.border","#8b8b8b9c",S("diffEditor.move.border","The border color for text that got moved in the diff editor."));Z("diffEditor.moveActive.border","#FFA500",S("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));Z("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},S("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const put=Gf("diff-insert",rt.add,S("diffInsertIcon","Line decoration for inserts in the diff editor.")),ype=Gf("diff-remove",rt.remove,S("diffRemoveIcon","Line decoration for removals in the diff editor.")),dJ=nr.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+vn.asClassName(put),marginClassName:"gutter-insert"}),hJ=nr.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+vn.asClassName(ype),marginClassName:"gutter-delete"}),fJ=nr.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),gJ=nr.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),pJ=nr.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),mut=nr.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),vut=nr.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),Z7=nr.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),but=nr.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),_ut=nr.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var wpe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},X7=function(n,e){return function(t,i){e(t,i,n)}},gg;const Spe=cn("diffProviderFactoryService");let Q7=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(J7,e)}};Q7=wpe([X7(0,Fn)],Q7);yn(Spe,Q7,1);var Dp;let J7=(Dp=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new ae,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)==null||e.dispose()}async computeDiff(e,t,i,r){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,i,r);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new ua(new It(1,2),new It(1,t.getLineCount()+1),[new Go(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const s=JSON.stringify([e.uri.toString(),t.uri.toString()]),o=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),a=gg.diffCache.get(s);if(a&&a.context===o)return a.result;const l=pm.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),u=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:u,timedOut:(c==null?void 0:c.quitEarly)??!0,detectedMoves:i.computeMoves?(c==null?void 0:c.moves.length)??0:-1}),r.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw new Error("no diff result available");return gg.diffCache.size>10&&gg.diffCache.delete(gg.diffCache.keys().next().value),gg.diffCache.set(s,{result:c,context:o}),c}setOptions(e){var i;let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((i=this.diffAlgorithmOnDidChangeSubscription)==null||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0),t&&this.onDidChangeEventEmitter.fire()}},gg=Dp,Dp.diffCache=new Map,Dp);J7=gg=wpe([X7(1,NS),X7(2,wm)],J7);function Tz(){return zP&&!!zP.VSCODE_DEV}function xpe(n){if(Tz()){const e=Cut();return e.add(n),{dispose(){e.delete(n)}}}else return{dispose(){}}}function Cut(){Tk||(Tk=new Set);const n=globalThis;return n.$hotReload_applyNewExports||(n.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},i=[];for(const r of Tk){const s=r(t);s&&i.push(s)}if(i.length>0)return r=>{let s=!1;for(const o of i)o(r)&&(s=!0);return s}}),Tk}let Tk;Tz()&&xpe(({oldExports:n,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return i=>{var r,s;for(const o in i){const a=i[o];if(console.log(`[hot-reload] Patching prototype methods of '${o}'`,{exportedItem:a}),typeof a=="function"&&a.prototype){const l=n[o];if(l){for(const c of Object.getOwnPropertyNames(a.prototype)){const u=Object.getOwnPropertyDescriptor(a.prototype,c),d=Object.getOwnPropertyDescriptor(l.prototype,c);((r=u==null?void 0:u.value)==null?void 0:r.toString())!==((s=d==null?void 0:d.value)==null?void 0:s.toString())&&console.log(`[hot-reload] Patching prototype method '${o}.${c}'`),Object.defineProperty(l.prototype,c,u)}i[o]=l}}}return!0}});function Xa(n,e){return yut([n],e),n}function yut(n,e){Tz()&&xa("reload",i=>xpe(({oldExports:r})=>{if([...Object.values(r)].some(s=>n.includes(s)))return s=>(i(void 0),!0)})).read(e)}var wut=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Sut=function(n,e){return function(t,i){e(t,i,n)}};let e9=class extends ke{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=mn(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=mn(this,void 0),this.diff=this._diff,this._unchangedRegions=mn(this,void 0),this.unchangedRegions=Ot(this,a=>{var l;return this._options.hideUnchangedRegions.read(a)?((l=this._unchangedRegions.read(a))==null?void 0:l.regions)??[]:(tr(c=>{var u;for(const d of((u=this._unchangedRegions.get())==null?void 0:u.regions)||[])d.collapseAll(c)}),[])}),this.movedTextToCompare=mn(this,void 0),this._activeMovedText=mn(this,void 0),this._hoveredMovedText=mn(this,void 0),this.activeMovedText=Ot(this,a=>this.movedTextToCompare.read(a)??this._hoveredMovedText.read(a)??this._activeMovedText.read(a)),this._cancellationTokenSource=new pb,this._diffProvider=Ot(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=xa("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(Pt(()=>this._cancellationTokenSource.cancel()));const r=SV("contentChangedSignal"),s=this._register(new bs(()=>r.trigger(void 0),200));this._register(xn(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(g=>g.isDragged.read(a)))return;const c=l.originalDecorationIds.map(g=>e.original.getDecorationRange(g)).map(g=>g?It.fromRangeInclusive(g):void 0),u=l.modifiedDecorationIds.map(g=>e.modified.getDecorationRange(g)).map(g=>g?It.fromRangeInclusive(g):void 0),d=l.regions.map((g,p)=>!c[p]||!u[p]?void 0:new Qh(c[p].startLineNumber,u[p].startLineNumber,c[p].length,g.visibleLineCountTop.read(a),g.visibleLineCountBottom.read(a))).filter(k1),h=[];let f=!1;for(const g of iH(d,(p,v)=>p.getHiddenModifiedRange(a).endLineNumberExclusive===v.getHiddenModifiedRange(a).startLineNumber))if(g.length>1){f=!0;const p=g.reduce((b,_)=>b+_.lineCount,0),v=new Qh(g[0].originalLineNumber,g[0].modifiedLineNumber,p,g[0].visibleLineCountTop.get(),g[g.length-1].visibleLineCountBottom.get());h.push(v)}else h.push(g[0]);if(f){const g=e.original.deltaDecorations(l.originalDecorationIds,h.map(v=>({range:v.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=e.modified.deltaDecorations(l.modifiedDecorationIds,h.map(v=>({range:v.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));tr(v=>{this._unchangedRegions.set({regions:h,originalDecorationIds:g,modifiedDecorationIds:p},v)})}}));const o=(a,l,c)=>{const u=Qh.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let d;const h=this._unchangedRegions.get();if(h){const v=h.originalDecorationIds.map(C=>e.original.getDecorationRange(C)).map(C=>C?It.fromRangeInclusive(C):void 0),b=h.modifiedDecorationIds.map(C=>e.modified.getDecorationRange(C)).map(C=>C?It.fromRangeInclusive(C):void 0);let y=iut(h.regions.map((C,w)=>{if(!v[w]||!b[w])return;const x=v[w].length;return new Qh(v[w].startLineNumber,b[w].startLineNumber,x,Math.min(C.visibleLineCountTop.get(),x),Math.min(C.visibleLineCountBottom.get(),x-C.visibleLineCountTop.get()))}).filter(k1),(C,w)=>!w||C.modifiedLineNumber>=w.modifiedLineNumber+w.lineCount&&C.originalLineNumber>=w.originalLineNumber+w.lineCount).map(C=>new ds(C.getHiddenOriginalRange(c),C.getHiddenModifiedRange(c)));y=ds.clip(y,It.ofLength(1,e.original.getLineCount()),It.ofLength(1,e.modified.getLineCount())),d=ds.inverse(y,e.original.getLineCount(),e.modified.getLineCount())}const f=[];if(d)for(const v of u){const b=d.filter(_=>_.original.intersectsStrict(v.originalUnchangedRange)&&_.modified.intersectsStrict(v.modifiedUnchangedRange));f.push(...v.setVisibleRanges(b,l))}else f.push(...u);const g=e.original.deltaDecorations((h==null?void 0:h.originalDecorationIds)||[],f.map(v=>({range:v.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=e.modified.deltaDecorations((h==null?void 0:h.modifiedDecorationIds)||[],f.map(v=>({range:v.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:f,originalDecorationIds:g,modifiedDecorationIds:p},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=vd.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),s.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=vd.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),s.schedule()})),this._register(lc(async(a,l)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),s.cancel(),r.read(a);const c=this._diffProvider.read(a);c.onChangeSignal.read(a),Xa(lhe,a),Xa(y8,a),this._isDiffUpToDate.set(!1,void 0);let u=[];l.add(e.original.onDidChangeContent(f=>{const g=vd.fromModelContentChanges(f.changes);u=SN(u,g)}));let d=[];l.add(e.modified.onDidChangeContent(f=>{const g=vd.fromModelContentChanges(f.changes);d=SN(d,g)}));let h=await c.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(h=xut(h,e.original,e.modified),h=(e.original,e.modified,void 0)??h,h=(e.original,e.modified,void 0)??h,tr(f=>{o(h,f),this._lastDiff=h;const g=Iz.fromDiffResult(h);this._diff.set(g,f),this._isDiffUpToDate.set(!0,f);const p=this.movedTextToCompare.get();this.movedTextToCompare.set(p?this._lastDiff.moves.find(v=>v.lineRangeMapping.modified.intersect(p.lineRangeMapping.modified)):void 0,f)}))}))}ensureModifiedLineIsVisible(e,t,i){var s,o;if(((s=this.diff.get())==null?void 0:s.mappings.length)===0)return;const r=((o=this._unchangedRegions.get())==null?void 0:o.regions)||[];for(const a of r)if(a.getHiddenModifiedRange(void 0).contains(e)){a.showModifiedLine(e,t,i);return}}ensureOriginalLineIsVisible(e,t,i){var s,o;if(((s=this.diff.get())==null?void 0:s.mappings.length)===0)return;const r=((o=this._unchangedRegions.get())==null?void 0:o.regions)||[];for(const a of r)if(a.getHiddenOriginalRange(void 0).contains(e)){a.showOriginalLine(e,t,i);return}}async waitForDiff(){await VJe(this.isDiffUpToDate,e=>e)}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:e==null?void 0:e.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var r;const t=(r=e.collapsedRegions)==null?void 0:r.map(s=>It.deserialize(s.range)),i=this._unchangedRegions.get();!i||!t||tr(s=>{for(const o of i.regions)for(const a of t)if(o.modifiedUnchangedRange.intersect(a)){o.setHiddenModifiedRange(a,s);break}})}};e9=wut([Sut(2,Spe)],e9);function xut(n,e,t){return{changes:n.changes.map(i=>new ua(i.original,i.modified,i.innerChanges?i.innerChanges.map(r=>kut(r,e,t)):void 0)),moves:n.moves,identical:n.identical,quitEarly:n.quitEarly}}function kut(n,e,t){let i=n.originalRange,r=n.modifiedRange;return i.startColumn===1&&r.startColumn===1&&(i.endColumn!==1||r.endColumn!==1)&&i.endColumn===e.getLineMaxColumn(i.endLineNumber)&&r.endColumn===t.getLineMaxColumn(r.endLineNumber)&&i.endLineNumber<e.getLineCount()&&r.endLineNumber<t.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),r=r.setEndPosition(r.endLineNumber+1,1)),new Go(i,r)}class Iz{static fromDiffResult(e){return new Iz(e.changes.map(t=>new kpe(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,r){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=r}}class kpe{constructor(e){this.lineRangeMapping=e}}class Qh{static fromDiffs(e,t,i,r,s){const o=ua.inverse(e,t,i),a=[];for(const l of o){let c=l.original.startLineNumber,u=l.modified.startLineNumber,d=l.original.length;const h=c===1&&u===1,f=c+d===t+1&&u+d===i+1;(h||f)&&d>=s+r?(h&&!f&&(d-=s),f&&!h&&(c+=s,u+=s,d-=s),a.push(new Qh(c,u,d,0,0))):d>=s*2+r&&(c+=s,u+=s,d-=s*2,a.push(new Qh(c,u,d,0,0)))}return a}get originalUnchangedRange(){return It.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return It.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,r,s){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=mn(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=mn(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=Ot(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=mn(this,void 0);const o=Math.max(Math.min(r,this.lineCount),0),a=Math.max(Math.min(s,this.lineCount-r),0);dY(r===o),dY(s===a),this._visibleLineCountTop.set(o,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const i=[],r=new Sa(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let s=this.originalLineNumber,o=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(r.ranges.length===0)this.showAll(t),i.push(this);else{let l=0;for(const c of r.ranges){const u=l===r.ranges.length-1;l++;const d=(u?a:c.endLineNumberExclusive)-o,h=new Qh(s,o,d,0,0);h.setHiddenModifiedRange(c,t),i.push(h),s=h.originalUnchangedRange.endLineNumberExclusive,o=h.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return It.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return It.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,r=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,r,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){const r=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),s=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&r<s||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+r,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+s,i)}showOriginalLine(e,t,i){const r=e-this.originalLineNumber,s=this.originalLineNumber+this.lineCount-e;t===0&&r<s||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+s-r,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+r-s,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}class Eut extends ke{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,r,s,o,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=r,this._editor=s,this._viewLineCounts=o,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=vn.asClassName(rt.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const u=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${u}px`,this._diffActions.style.lineHeight=`${u}px`,this._marginDomNode.appendChild(this._diffActions);let d=0;const h=i.getOption(128)&&!Yp,f=(g,p)=>{this._contextMenuService.showContextMenu({domForShadowRoot:h?i.getDomNode()??void 0:void 0,getAnchor:()=>({x:g,y:p}),getActions:()=>{const v=[],b=r.modified.isEmpty;return v.push(new Ed("diff.clipboard.copyDeletedContent",b?r.original.length>1?S("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):S("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):r.original.length>1?S("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):S("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const y=this._originalTextModel.getValueInRange(r.original.toExclusiveRange());await this._clipboardService.writeText(y)})),r.original.length>1&&v.push(new Ed("diff.clipboard.copyDeletedLineContent",b?S("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.original.startLineNumber+d):S("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.original.startLineNumber+d),void 0,!0,async()=>{let y=this._originalTextModel.getLineContent(r.original.startLineNumber+d);y===""&&(y=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(y)})),i.getOption(92)||v.push(new Ed("diff.inline.revertChange",S("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),v},autoSelectFirstItem:!0})};this._register(vr(this._diffActions,"mousedown",g=>{if(!g.leftButton)return;const{top:p,height:v}=Ta(this._diffActions),b=Math.floor(u/3);g.preventDefault(),f(g.posx,p+v+b)})),this._register(i.onMouseMove(g=>{(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()?(d=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,u),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(g=>{g.event.leftButton&&(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()&&(g.event.preventDefault(),d=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,u),f(g.event.posx,g.event.posy+u))}))}_updateLightBulbPosition(e,t,i){const{top:r}=Ta(e),s=t-r,o=Math.floor(s/i),a=o*i;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],o<l)return c}return o}}const mJ=Sm("diffEditorWidget",{createHTML:n=>n});function Lut(n,e,t,i){Gr(i,e.fontInfo);const r=t.length>0,s=new qD(1e4);let o=0,a=0;const l=[];for(let h=0;h<n.lineTokens.length;h++){const f=h+1,g=n.lineTokens[h],p=n.lineBreakData[h],v=cl.filter(t,f,1,Number.MAX_SAFE_INTEGER);if(p){let b=0;for(const _ of p.breakOffsets){const y=g.sliceAndInflate(b,_,0);o=Math.max(o,vJ(a,y,cl.extractWrapped(v,b,_),r,n.mightContainNonBasicASCII,n.mightContainRTL,e,s)),a++,b=_}l.push(p.breakOffsets.length)}else l.push(1),o=Math.max(o,vJ(a,g,v,r,n.mightContainNonBasicASCII,n.mightContainRTL,e,s)),a++}o+=e.scrollBeyondLastColumn;const c=s.build(),u=mJ?mJ.createHTML(c):c;i.innerHTML=u;const d=o*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:d,viewLineCounts:l}}class Nut{constructor(e,t,i,r){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=r}}class Dz{static fromEditor(e){var s;const t=e.getOptions(),i=t.get(50),r=t.get(146);return new Dz(((s=e.getModel())==null?void 0:s.getOptions().tabSize)||0,i,t.get(33),i.typicalHalfwidthCharacterWidth,t.get(105),t.get(67),r.decorationsWidth,t.get(118),t.get(100),t.get(95),t.get(51))}constructor(e,t,i,r,s,o,a,l,c,u,d){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=r,this.scrollBeyondLastColumn=s,this.lineHeight=o,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=u,this.fontLigatures=d}}function vJ(n,e,t,i,r,s,o,a){a.appendString('<div class="view-line'),i||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(n*o.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=fa.isBasicASCII(l,r),u=fa.containsRTL(l,c,s),d=az(new xb(o.fontInfo.isMonospace&&!o.disableMonospaceOptimizations,o.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,u,0,e,t,o.tabSize,0,o.fontInfo.spaceWidth,o.fontInfo.middotWidth,o.fontInfo.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==Zp.OFF,null),a);return a.appendString("</div>"),d.characterMapping.getHorizontalOffset(d.characterMapping.length)}var Tut=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},bJ=function(n,e){return function(t,i){e(t,i,n)}};let t9=class extends ke{constructor(e,t,i,r,s,o,a,l,c,u){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=r,this._diffEditorWidget=s,this._canIgnoreViewZoneUpdateEvent=o,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=u,this._originalTopPadding=mn(this,0),this._originalScrollOffset=mn(this,0),this._originalScrollOffsetAnimated=lJ(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=mn(this,0),this._modifiedScrollOffset=mn(this,0),this._modifiedScrollOffsetAnimated=lJ(this._targetWindow,this._modifiedScrollOffset,this._store);const d=mn("invalidateAlignmentsState",0),h=this._register(new bs(()=>{d.set(d.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(y=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(y=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(y=>{(y.hasChanged(147)||y.hasChanged(67))&&h.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(y=>{(y.hasChanged(147)||y.hasChanged(67))&&h.schedule()}));const f=this._diffModel.map(y=>y?Ei(this,y.model.original.onDidChangeTokens,()=>y.model.original.tokenization.backgroundTokenizationState===2):void 0).map((y,C)=>y==null?void 0:y.read(C)),g=Ot(y=>{const C=this._diffModel.read(y),w=C==null?void 0:C.diff.read(y);if(!C||!w)return null;d.read(y);const k=this._options.renderSideBySide.read(y);return _J(this._editors.original,this._editors.modified,w.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,k)}),p=Ot(y=>{var x;const C=(x=this._diffModel.read(y))==null?void 0:x.movedTextToCompare.read(y);if(!C)return null;d.read(y);const w=C.changes.map(k=>new kpe(k));return _J(this._editors.original,this._editors.modified,w,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function v(){const y=document.createElement("div");return y.className="diagonal-fill",y}const b=this._register(new dt);this.viewZones=Cb(this,(y,C)=>{var B,$,j,Y;b.clear();const w=g.read(y)||[],x=[],k=[],E=this._modifiedTopPadding.read(y);E>0&&k.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:E,showInHiddenAreas:!0,suppressMouseDown:!0});const L=this._originalTopPadding.read(y);L>0&&x.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:L,showInHiddenAreas:!0,suppressMouseDown:!0});const M=this._options.renderSideBySide.read(y),D=M||(B=this._editors.modified._getViewModel())==null?void 0:B.createLineBreaksComputer();if(D){const G=this._editors.original.getModel();for(const X of w)if(X.diff)for(let q=X.originalRange.startLineNumber;q<X.originalRange.endLineNumberExclusive;q++){if(q>G.getLineCount())return{orig:x,mod:k};D==null||D.addRequest(G.getLineContent(q),null,null)}}const O=(D==null?void 0:D.finalize())??[];let A=0;const R=this._editors.modified.getOption(67),V=($=this._diffModel.read(y))==null?void 0:$.movedTextToCompare.read(y),F=((j=this._editors.original.getModel())==null?void 0:j.mightContainNonBasicASCII())??!1,T=((Y=this._editors.original.getModel())==null?void 0:Y.mightContainRTL())??!1,N=Dz.fromEditor(this._editors.modified);for(const G of w)if(G.diff&&!M&&(!this._options.useTrueInlineDiffRendering.read(y)||!Mz(G.diff))){if(!G.originalRange.isEmpty){f.read(y);const q=document.createElement("div");q.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const re=this._editors.original.getModel();if(G.originalRange.endLineNumberExclusive-1>re.getLineCount())return{orig:x,mod:k};const ge=new Nut(G.originalRange.mapToLineArray(ze=>re.tokenization.getLineTokens(ze)),G.originalRange.mapToLineArray(ze=>O[A++]),F,T),ye=[];for(const ze of G.diff.innerChanges||[])ye.push(new PC(ze.originalRange.delta(-(G.diff.original.startLineNumber-1)),Z7.className,0));const we=Lut(ge,N,ye,q),Ie=document.createElement("div");if(Ie.className="inline-deleted-margin-view-zone",Gr(Ie,N.fontInfo),this._options.renderIndicators.read(y))for(let ze=0;ze<we.heightInLines;ze++){const Me=document.createElement("div");Me.className=`delete-sign ${vn.asClassName(ype)}`,Me.setAttribute("style",`position:absolute;top:${ze*R}px;width:${N.lineDecorationsWidth}px;height:${R}px;right:0;`),Ie.appendChild(Me)}let Fe;b.add(new Eut(()=>Eue(Fe),Ie,this._editors.modified,G.diff,this._diffEditorWidget,we.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let ze=0;ze<we.viewLineCounts.length;ze++){const Me=we.viewLineCounts[ze];Me>1&&x.push({afterLineNumber:G.originalRange.startLineNumber+ze,domNode:v(),heightInPx:(Me-1)*R,showInHiddenAreas:!0,suppressMouseDown:!0})}k.push({afterLineNumber:G.modifiedRange.startLineNumber-1,domNode:q,heightInPx:we.heightInLines*R,minWidthInPx:we.minWidthInPx,marginDomNode:Ie,setZoneId(ze){Fe=ze},showInHiddenAreas:!0,suppressMouseDown:!0})}const X=document.createElement("div");X.className="gutter-delete",x.push({afterLineNumber:G.originalRange.endLineNumberExclusive-1,domNode:v(),heightInPx:G.modifiedHeightInPx,marginDomNode:X,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const X=G.modifiedHeightInPx-G.originalHeightInPx;if(X>0){if(V!=null&&V.lineRangeMapping.original.delta(-1).deltaLength(2).contains(G.originalRange.endLineNumberExclusive-1))continue;x.push({afterLineNumber:G.originalRange.endLineNumberExclusive-1,domNode:v(),heightInPx:X,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let q=function(){const ge=document.createElement("div");return ge.className="arrow-revert-change "+vn.asClassName(rt.arrowRight),C.add(_e(ge,"mousedown",ye=>ye.stopPropagation())),C.add(_e(ge,"click",ye=>{ye.stopPropagation(),s.revert(G.diff)})),xt("div",{},ge)};if(V!=null&&V.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(G.modifiedRange.endLineNumberExclusive-1))continue;let re;G.diff&&G.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(y)&&(re=q()),k.push({afterLineNumber:G.modifiedRange.endLineNumberExclusive-1,domNode:v(),heightInPx:-X,marginDomNode:re,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const G of p.read(y)??[]){if(!(V!=null&&V.lineRangeMapping.original.intersect(G.originalRange))||!(V!=null&&V.lineRangeMapping.modified.intersect(G.modifiedRange)))continue;const X=G.modifiedHeightInPx-G.originalHeightInPx;X>0?x.push({afterLineNumber:G.originalRange.endLineNumberExclusive-1,domNode:v(),heightInPx:X,showInHiddenAreas:!0,suppressMouseDown:!0}):k.push({afterLineNumber:G.modifiedRange.endLineNumberExclusive-1,domNode:v(),heightInPx:-X,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:x,mod:k}});let _=!1;this._register(this._editors.original.onDidScrollChange(y=>{y.scrollLeftChanged&&!_&&(_=!0,this._editors.modified.setScrollLeft(y.scrollLeft),_=!1)})),this._register(this._editors.modified.onDidScrollChange(y=>{y.scrollLeftChanged&&!_&&(_=!0,this._editors.original.setScrollLeft(y.scrollLeft),_=!1)})),this._originalScrollTop=Ei(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Ei(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(xn(y=>{const C=this._originalScrollTop.read(y)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(y))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(y));C!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(C,1)})),this._register(xn(y=>{const C=this._modifiedScrollTop.read(y)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(y))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(y));C!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(C,1)})),this._register(xn(y=>{var x;const C=(x=this._diffModel.read(y))==null?void 0:x.movedTextToCompare.read(y);let w=0;if(C){const k=this._editors.original.getTopForLineNumber(C.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();w=this._editors.modified.getTopForLineNumber(C.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-k}w>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(w,void 0)):w<0?(this._modifiedTopPadding.set(-w,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-w,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+w,void 0,!0)}))}};t9=Tut([bJ(8,rz),bJ(9,Zd)],t9);function _J(n,e,t,i,r,s){const o=new Hd(CJ(n,i)),a=new Hd(CJ(e,r)),l=n.getOption(67),c=e.getOption(67),u=[];let d=0,h=0;function f(g,p){for(;;){let v=o.peek(),b=a.peek();if(v&&v.lineNumber>=g&&(v=void 0),b&&b.lineNumber>=p&&(b=void 0),!v&&!b)break;const _=v?v.lineNumber-d:Number.MAX_VALUE,y=b?b.lineNumber-h:Number.MAX_VALUE;_<y?(o.dequeue(),b={lineNumber:v.lineNumber-d+h,heightInPx:0}):_>y?(a.dequeue(),v={lineNumber:b.lineNumber-h+d,heightInPx:0}):(o.dequeue(),a.dequeue()),u.push({originalRange:It.ofLength(v.lineNumber,1),modifiedRange:It.ofLength(b.lineNumber,1),originalHeightInPx:l+v.heightInPx,modifiedHeightInPx:c+b.heightInPx,diff:void 0})}}for(const g of t){let y=function(C,w,x=!1){var D,O;if(C<_||w<b)return;if(v)v=!1;else if(!x&&(C===_||w===b))return;const k=new It(_,C),E=new It(b,w);if(k.isEmpty&&E.isEmpty)return;const L=((D=o.takeWhile(A=>A.lineNumber<C))==null?void 0:D.reduce((A,R)=>A+R.heightInPx,0))??0,M=((O=a.takeWhile(A=>A.lineNumber<w))==null?void 0:O.reduce((A,R)=>A+R.heightInPx,0))??0;u.push({originalRange:k,modifiedRange:E,originalHeightInPx:k.length*l+L,modifiedHeightInPx:E.length*c+M,diff:g.lineRangeMapping}),_=C,b=w};const p=g.lineRangeMapping;f(p.original.startLineNumber,p.modified.startLineNumber);let v=!0,b=p.modified.startLineNumber,_=p.original.startLineNumber;if(s)for(const C of p.innerChanges||[]){C.originalRange.startColumn>1&&C.modifiedRange.startColumn>1&&y(C.originalRange.startLineNumber,C.modifiedRange.startLineNumber);const w=n.getModel(),x=C.originalRange.endLineNumber<=w.getLineCount()?w.getLineMaxColumn(C.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;C.originalRange.endColumn<x&&y(C.originalRange.endLineNumber,C.modifiedRange.endLineNumber)}y(p.original.endLineNumberExclusive,p.modified.endLineNumberExclusive,!0),d=p.original.endLineNumberExclusive,h=p.modified.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),u}function CJ(n,e){const t=[],i=[],r=n.getOption(147).wrappingColumn!==-1,s=n._getViewModel().coordinatesConverter,o=n.getOption(67);if(r)for(let l=1;l<=n.getModel().getLineCount();l++){const c=s.getModelLineViewLineCount(l);c>1&&i.push({lineNumber:l,heightInPx:o*(c-1)})}for(const l of n.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:s.convertViewPositionToModelPosition(new de(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return Jct(t,i,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}function Mz(n){return n.innerChanges?n.innerChanges.every(e=>yJ(e.modifiedRange)&&yJ(e.originalRange)||e.originalRange.equalsRange(new te(1,1,1,1))):!1}function yJ(n){return n.startLineNumber===n.endLineNumber}const iy=class iy extends ke{constructor(e,t,i,r,s){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=r,this._editors=s,this._originalScrollTop=Ei(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Ei(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=xa("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=mn(this,0),this._modifiedViewZonesChangedSignal=xa("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=xa("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=Cb(this,(u,d)=>{var k;this._element.replaceChildren();const h=this._diffModel.read(u),f=(k=h==null?void 0:h.diff.read(u))==null?void 0:k.movedTexts;if(!f||f.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(u);const g=this._originalEditorLayoutInfo.read(u),p=this._modifiedEditorLayoutInfo.read(u);if(!g||!p){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(u),this._originalViewZonesChangedSignal.read(u);const v=f.map(E=>{function L(N,B){const $=B.getTopForLineNumber(N.startLineNumber,!0),j=B.getTopForLineNumber(N.endLineNumberExclusive,!0);return($+j)/2}const M=L(E.lineRangeMapping.original,this._editors.original),D=this._originalScrollTop.read(u),O=L(E.lineRangeMapping.modified,this._editors.modified),A=this._modifiedScrollTop.read(u),R=M-D,V=O-A,F=Math.min(M,O),T=Math.max(M,O);return{range:new Ht(F,T),from:R,to:V,fromWithoutScroll:M,toWithoutScroll:O,move:E}});v.sort(sWe(fl(E=>E.fromWithoutScroll>E.toWithoutScroll,oWe),fl(E=>E.fromWithoutScroll>E.toWithoutScroll?E.fromWithoutScroll:-E.toWithoutScroll,df)));const b=Rz.compute(v.map(E=>E.range)),_=10,y=g.verticalScrollbarWidth,C=(b.getTrackCount()-1)*10+_*2,w=y+C+(p.contentLeft-iy.movedCodeBlockPadding);let x=0;for(const E of v){const L=b.getTrack(x),M=y+_+L*10,D=15,O=15,A=w,R=p.glyphMarginWidth+p.lineNumbersWidth,V=18,F=document.createElementNS("http://www.w3.org/2000/svg","rect");F.classList.add("arrow-rectangle"),F.setAttribute("x",`${A-R}`),F.setAttribute("y",`${E.to-V/2}`),F.setAttribute("width",`${R}`),F.setAttribute("height",`${V}`),this._element.appendChild(F);const T=document.createElementNS("http://www.w3.org/2000/svg","g"),N=document.createElementNS("http://www.w3.org/2000/svg","path");N.setAttribute("d",`M 0 ${E.from} L ${M} ${E.from} L ${M} ${E.to} L ${A-O} ${E.to}`),N.setAttribute("fill","none"),T.appendChild(N);const B=document.createElementNS("http://www.w3.org/2000/svg","polygon");B.classList.add("arrow"),d.add(xn($=>{N.classList.toggle("currentMove",E.move===h.activeMovedText.read($)),B.classList.toggle("currentMove",E.move===h.activeMovedText.read($))})),B.setAttribute("points",`${A-O},${E.to-D/2} ${A},${E.to} ${A-O},${E.to+D/2}`),T.appendChild(B),this._element.appendChild(T),x++}this.width.set(C,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(Pt(()=>this._element.remove())),this._register(xn(u=>{const d=this._originalEditorLayoutInfo.read(u),h=this._modifiedEditorLayoutInfo.read(u);!d||!h||(this._element.style.left=`${d.width-d.verticalScrollbarWidth}px`,this._element.style.height=`${d.height}px`,this._element.style.width=`${d.verticalScrollbarWidth+d.contentLeft-iy.movedCodeBlockPadding+this.width.read(u)}px`)})),this._register(uM(this._state));const o=Ot(u=>{const d=this._diffModel.read(u),h=d==null?void 0:d.diff.read(u);return h?h.movedTexts.map(f=>({move:f,original:new Qv(gN(f.lineRangeMapping.original.startLineNumber-1),18),modified:new Qv(gN(f.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(lT(this._editors.original,o.map(u=>u.map(d=>d.original)))),this._register(lT(this._editors.modified,o.map(u=>u.map(d=>d.modified)))),this._register(lc((u,d)=>{const h=o.read(u);for(const f of h)d.add(new wJ(this._editors.original,f.original,f.move,"original",this._diffModel.get())),d.add(new wJ(this._editors.modified,f.modified,f.move,"modified",this._diffModel.get()))}));const a=xa("original.onDidFocusEditorWidget",u=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0))),l=xa("modified.onDidFocusEditorWidget",u=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0)));let c="modified";this._register(lM({createEmptyChangeSummary:()=>{},handleChange:(u,d)=>(u.didChange(a)&&(c="original"),u.didChange(l)&&(c="modified"),!0)},u=>{a.read(u),l.read(u);const d=this._diffModel.read(u);if(!d)return;const h=d.diff.read(u);let f;if(h&&c==="original"){const g=this._editors.originalCursor.read(u);g&&(f=h.movedTexts.find(p=>p.lineRangeMapping.original.contains(g.lineNumber)))}if(h&&c==="modified"){const g=this._editors.modifiedCursor.read(u);g&&(f=h.movedTexts.find(p=>p.lineRangeMapping.modified.contains(g.lineNumber)))}f!==d.movedTextToCompare.get()&&d.movedTextToCompare.set(void 0,void 0),d.setActiveMovedText(f)}))}};iy.movedCodeBlockPadding=4;let Z0=iy;class Rz{static compute(e){const t=[],i=[];for(const r of e){let s=t.findIndex(o=>!o.intersectsStrict(r));s===-1&&(t.length>=6?s=Bqe(t,fl(a=>a.intersectWithRangeLength(r),df)):(s=t.length,t.push(new jH))),t[s].addRange(r),i.push(s)}return new Rz(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class wJ extends Ez{constructor(e,t,i,r,s){const o=pn("div.diff-hidden-lines-widget");super(e,t,o.root),this._editor=e,this._move=i,this._kind=r,this._diffModel=s,this._nodes=pn("div.diff-moved-code-block",{style:{marginRight:"4px"}},[pn("div.text-content@textContent"),pn("div.action-bar@actionBar")]),o.root.appendChild(this._nodes.root);const a=Ei(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(Af(this._nodes.root,{paddingRight:a.map(h=>h.verticalScrollbarWidth)}));let l;i.changes.length>0?l=this._kind==="original"?S("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):S("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?S("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):S("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new Td(this._nodes.actionBar,{highlightToggledItems:!0})),u=new Ed("",l,"",!1);c.push(u,{icon:!1,label:!0});const d=new Ed("","Compare",vn.asClassName(rt.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register(xn(h=>{const f=this._diffModel.movedTextToCompare.read(h)===i;d.checked=f})),c.push(d,{icon:!1,label:!0})}}class Iut extends ke{constructor(e,t,i,r){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=Ot(this,s=>{const o=this._diffModel.read(s),a=o==null?void 0:o.diff.read(s);if(!a)return null;const l=this._diffModel.read(s).movedTextToCompare.read(s),c=this._options.renderIndicators.read(s),u=this._options.showEmptyDecorations.read(s),d=[],h=[];if(!l)for(const g of a.mappings)if(g.lineRangeMapping.original.isEmpty||d.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:c?hJ:gJ}),g.lineRangeMapping.modified.isEmpty||h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:c?dJ:fJ}),g.lineRangeMapping.modified.isEmpty||g.lineRangeMapping.original.isEmpty)g.lineRangeMapping.original.isEmpty||d.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:but}),g.lineRangeMapping.modified.isEmpty||h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:mut});else{const p=this._options.useTrueInlineDiffRendering.read(s)&&Mz(g.lineRangeMapping);for(const v of g.lineRangeMapping.innerChanges||[])if(g.lineRangeMapping.original.contains(v.originalRange.startLineNumber)&&d.push({range:v.originalRange,options:v.originalRange.isEmpty()&&u?_ut:Z7}),g.lineRangeMapping.modified.contains(v.modifiedRange.startLineNumber)&&h.push({range:v.modifiedRange,options:v.modifiedRange.isEmpty()&&u&&!p?vut:pJ}),p){const b=o.model.original.getValueInRange(v.originalRange);h.push({range:v.modifiedRange,options:{description:"deleted-text",before:{content:b,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(l)for(const g of l.changes){const p=g.original.toInclusiveRange();p&&d.push({range:p,options:c?hJ:gJ});const v=g.modified.toInclusiveRange();v&&h.push({range:v,options:c?dJ:fJ});for(const b of g.innerChanges||[])d.push({range:b.originalRange,options:Z7}),h.push({range:b.modifiedRange,options:pJ})}const f=this._diffModel.read(s).activeMovedText.read(s);for(const g of a.movedTexts)d.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(g===f?" currentMove":""),blockPadding:[Z0.movedCodeBlockPadding,0,Z0.movedCodeBlockPadding,Z0.movedCodeBlockPadding]}}),h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(g===f?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:d,modifiedDecorations:h}}),this._register(aT(this._editors.original,this._decorations.map(s=>(s==null?void 0:s.originalDecorations)||[]))),this._register(aT(this._editors.modified,this._decorations.map(s=>(s==null?void 0:s.modifiedDecorations)||[])))}}class Dut{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=wV(this,i=>{const r=this._sashRatio.read(i)??this._options.splitViewDefaultRatio.read(i);return this._computeSashLeft(r,i)},(i,r)=>{const s=this.dimensions.width.get();this._sashRatio.set(i/s,r)}),this._sashRatio=mn(this,void 0)}_computeSashLeft(e,t){const i=this.dimensions.width.read(t),r=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),s=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):r,o=100;return i<=o*2?r:s<o?o:s>i-o?i-o:s}}class Epe extends ke{constructor(e,t,i,r,s,o){super(),this._domNode=e,this._dimensions=t,this._enabled=i,this._boundarySashes=r,this.sashLeft=s,this._resetSash=o,this._sash=this._register(new Ca(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(xn(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(xn(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}class Mut extends ke{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=Ei(this,this._editor.onDidScrollChange,o=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(o=>o===0),this.modelAttached=Ei(this,this._editor.onDidChangeModel,o=>this._editor.hasModel()),this.editorOnDidChangeViewZones=xa("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=xa("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=SV("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const r=this._domNode.appendChild(pn("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),s=new ResizeObserver(()=>{tr(o=>{this.domNodeSizeChanged.trigger(o)})});s.observe(this._domNode),this._register(Pt(()=>s.disconnect())),this._register(xn(o=>{r.className=this.isScrollTopZero.read(o)?"":"scroll-decoration"})),this._register(xn(o=>this.render(o)))}dispose(){super.dispose(),Fs(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),r=new Set(this.views.keys()),s=Ht.ofStartAndLength(0,this._domNode.clientHeight);if(!s.isEmpty)for(const o of i){const a=new It(o.startLineNumber,o.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);tr(c=>{for(const u of l){if(!u.range.intersect(a))continue;r.delete(u.id);let d=this.views.get(u.id);if(d)d.item.set(u,c);else{const p=document.createElement("div");this._domNode.appendChild(p);const v=mn("item",u),b=this.itemProvider.createView(v,p);d=new Rut(v,b,p),this.views.set(u.id,d)}const h=u.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(u.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(u.range.startLineNumber-1,!1)-t,g=(u.range.endLineNumberExclusive===1?Math.max(h,this._editor.getTopForLineNumber(u.range.startLineNumber,!1)-t):Math.max(h,this._editor.getBottomForLineNumber(u.range.endLineNumberExclusive-1,!0)-t))-h;d.domNode.style.top=`${h}px`,d.domNode.style.height=`${g}px`,d.gutterItemView.layout(Ht.ofStartAndLength(h,g),s)}})}for(const o of r){const a=this.views.get(o);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(o)}}}class Rut{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}class Lpe extends Jp{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}class SJ extends she{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new Tf(e-1,t)}}class Aut extends ke{constructor(e,t,i={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new D$e),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new dt),i.hoverDelegate=i.hoverDelegate??this._register(xV()),this.options=i,this.toggleMenuAction=this._register(new Dw(()=>{var r;return(r=this.toggleMenuActionViewItem)==null?void 0:r.show()},i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new Td(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(r,s)=>{if(r.id===Dw.ID)return this.toggleMenuActionViewItem=new mN(r,r.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:vn.asClassNameArray(i.moreIcon??rt.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){const o=i.actionViewItemProvider(r,s);if(o)return o}if(r instanceof FD){const o=new mN(r,r.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:r.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return o.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(o),this.disposables.add(this._onDidChangeDropdownVisibility.add(o.onDidChangeVisibility)),o}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach(r=>{this.actionBar.push(r,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(r)})})}getKeybindingLabel(e){var i,r;const t=(r=(i=this.options).getKeyBinding)==null?void 0:r.call(i,e);return(t==null?void 0:t.getLabel())??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}const sI=class sI extends Ed{constructor(e,t){t=t||S("moreActions","More Actions..."),super(sI.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};sI.ID="toolbar.toggle.more";let Dw=sI;var Npe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},nl=function(n,e){return function(t,i){e(t,i,n)}};let n9=class extends Aut{constructor(e,t,i,r,s,o,a,l){super(e,s,{getKeyBinding:u=>o.lookupKeybinding(u.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:typeof(t==null?void 0:t.telemetrySource)=="string"}),this._options=t,this._menuService=i,this._contextKeyService=r,this._contextMenuService=s,this._keybindingService=o,this._commandService=a,this._sessionDisposables=this._store.add(new dt);const c=t==null?void 0:t.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(u=>l.publicLog2("workbenchActionExecuted",{id:u.action.id,from:c})))}setActions(e,t=[],i){var u,d,h;this._sessionDisposables.clear();const r=e.slice(),s=t.slice(),o=[];let a=0;const l=[];let c=!1;if(((u=this._options)==null?void 0:u.hiddenItemStrategy)!==-1)for(let f=0;f<r.length;f++){const g=r[f];!(g instanceof Ld)&&!(g instanceof _C)||g.hideActions&&(o.push(g.hideActions.toggle),g.hideActions.toggle.checked&&a++,g.hideActions.isHidden&&(c=!0,r[f]=void 0,((d=this._options)==null?void 0:d.hiddenItemStrategy)!==0&&(l[f]=g)))}if(((h=this._options)==null?void 0:h.overflowBehavior)!==void 0){const f=Ltt(new Set(this._options.overflowBehavior.exempted),Sn.map(r,v=>v==null?void 0:v.id)),g=this._options.overflowBehavior.maxItems-f.size;let p=0;for(let v=0;v<r.length;v++){const b=r[v];b&&(p++,!f.has(b.id)&&p>=g&&(r[v]=void 0,l[v]=b))}}vG(r),vG(l),super.setActions(r,Cs.join(l,s)),(o.length>0||r.length>0)&&this._sessionDisposables.add(_e(this.getElement(),"contextmenu",f=>{var _,y,C,w,x;const g=new nc(bt(this.getElement()),f),p=this.getItemAction(g.target);if(!p)return;g.preventDefault(),g.stopPropagation();const v=[];if(p instanceof Ld&&p.menuKeybinding)v.push(p.menuKeybinding);else if(!(p instanceof _C||p instanceof Dw)){const k=!!this._keybindingService.lookupKeybinding(p.id);v.push(Kge(this._commandService,this._keybindingService,p.id,void 0,k))}if(o.length>0){let k=!1;if(a===1&&((_=this._options)==null?void 0:_.hiddenItemStrategy)===0){k=!0;for(let E=0;E<o.length;E++)if(o[E].checked){o[E]=I0({id:p.id,label:p.label,checked:!0,enabled:!1,run(){}});break}}if(!k&&(p instanceof Ld||p instanceof _C)){if(!p.hideActions)return;v.push(p.hideActions.hide)}else v.push(I0({id:"label",label:S("hide","Hide"),enabled:!1,run(){}}))}const b=Cs.join(v,o);(y=this._options)!=null&&y.resetMenu&&!i&&(i=[this._options.resetMenu]),c&&i&&(b.push(new Cs),b.push(I0({id:"resetThisMenu",label:S("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),b.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>g,getActions:()=>b,menuId:(C=this._options)==null?void 0:C.contextMenu,menuActionOptions:{renderShortTitle:!0,...(w=this._options)==null?void 0:w.menuOptions},skipTelemetry:typeof((x=this._options)==null?void 0:x.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}};n9=Npe([nl(2,ym),nl(3,In),nl(4,Zd),nl(5,Wr),nl(6,ga),nl(7,wm)],n9);let uT=class extends n9{constructor(e,t,i,r,s,o,a,l,c){super(e,{resetMenu:t,...i},r,s,o,a,l,c),this._onDidChangeMenuItems=this._store.add(new ae),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const u=this._store.add(r.createMenu(t,s,{emitEventsForSubmenuChanges:!0})),d=()=>{var g,p,v;const h=[],f=[];Fet(u,i==null?void 0:i.menuOptions,{primary:h,secondary:f},(g=i==null?void 0:i.toolbarOptions)==null?void 0:g.primaryGroup,(p=i==null?void 0:i.toolbarOptions)==null?void 0:p.shouldInlineSubmenu,(v=i==null?void 0:i.toolbarOptions)==null?void 0:v.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",h.length===0&&f.length===0),super.setActions(h,f)};this._store.add(u.onDidChange(()=>{d(),this._onDidChangeMenuItems.fire(this)})),d()}setActions(){throw new Tn("This toolbar is populated from a menu.")}};uT=Npe([nl(3,ym),nl(4,In),nl(5,Zd),nl(6,Wr),nl(7,ga),nl(8,wm)],uT);var Tpe=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},HE=function(n,e){return function(t,i){e(t,i,n)}};const UA=[],Ik=35;let i9=class extends ke{constructor(e,t,i,r,s,o,a,l,c){super(),this._diffModel=t,this._editors=i,this._options=r,this._sashLayout=s,this._boundarySashes=o,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(Br.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=Ei(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(u=>u.length>0),this._showSash=Ot(this,u=>this._options.renderSideBySide.read(u)&&this._hasActions.read(u)),this.width=Ot(this,u=>this._hasActions.read(u)?Ik:0),this.elements=pn("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:Ik+"px"}},[]),this._currentDiff=Ot(this,u=>{var g;const d=this._diffModel.read(u);if(!d)return;const h=(g=d.diff.read(u))==null?void 0:g.mappings,f=this._editors.modifiedCursor.read(u);if(f)return h==null?void 0:h.find(p=>p.lineRangeMapping.modified.contains(f.lineNumber))}),this._selectedDiffs=Ot(this,u=>{const d=this._diffModel.read(u),h=d==null?void 0:d.diff.read(u);if(!h)return UA;const f=this._editors.modifiedSelections.read(u);if(f.every(b=>b.isEmpty()))return UA;const g=new Sa(f.map(b=>It.fromRangeInclusive(b))),v=h.mappings.filter(b=>b.lineRangeMapping.innerChanges&&g.intersects(b.lineRangeMapping.modified)).map(b=>({mapping:b,rangeMappings:b.lineRangeMapping.innerChanges.filter(_=>f.some(y=>te.areIntersecting(_.modifiedRange,y)))}));return v.length===0||v.every(b=>b.rangeMappings.length===0)?UA:v}),this._register(eut(e,this.elements.root)),this._register(_e(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(Af(this.elements.root,{display:this._hasActions.map(u=>u?"block":"none")})),Wc(this,u=>this._showSash.read(u)?new Epe(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,wV(this,h=>this._sashLayout.sashLeft.read(h)-Ik,(h,f)=>this._sashLayout.sashLeft.set(h+Ik,f)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new Mut(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(u,d)=>{const h=this._diffModel.read(d);if(!h)return[];const f=h.diff.read(d);if(!f)return[];const g=this._selectedDiffs.read(d);if(g.length>0){const v=ua.fromRangeMappings(g.flatMap(b=>b.rangeMappings));return[new xJ(v,!0,Br.DiffEditorSelectionToolbar,void 0,h.model.original.uri,h.model.modified.uri)]}const p=this._currentDiff.read(d);return f.mappings.map(v=>new xJ(v.lineRangeMapping.withInnerChangesFromLineRanges(),v.lineRangeMapping===(p==null?void 0:p.lineRangeMapping),Br.DiffEditorHunkToolbar,void 0,h.model.original.uri,h.model.modified.uri))},createView:(u,d)=>this._instantiationService.createInstance(r9,u,d,this)})),this._register(_e(this.elements.gutter,We.MOUSE_WHEEL,u=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(u)},{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],i=new SJ(this._editors.modifiedModel.get()),r=new SJ(this._editors.original.getModel());return new Vqe(t.map(a=>a.toTextEdit(i))).apply(r)}layout(e){this.elements.gutter.style.left=e+"px"}};i9=Tpe([HE(6,Fn),HE(7,In),HE(8,ym)],i9);class xJ{constructor(e,t,i,r,s,o){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=r,this.originalUri=s,this.modifiedUri=o}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let r9=class extends ke{constructor(e,t,i,r){super(),this._item=e,this._elements=pn("div.gutterItem",{style:{height:"20px",width:"34px"}},[pn("div.background@background",{},[]),pn("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,o=>o.showAlways),this._menuId=this._item.map(this,o=>o.menuId),this._isSmall=mn(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const s=this._register(r.createInstance(aw,"element",!0,{position:{hoverPosition:1}}));this._register(B_(t,this._elements.root)),this._register(xn(o=>{const a=this._showAlways.read(o);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(lc((o,a)=>{this._elements.buttons.replaceChildren();const l=a.add(r.createInstance(uT,this._elements.buttons,this._menuId.read(o),{orientation:1,hoverDelegate:s,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(o)?1:3},hiddenItemStrategy:0,actionRunner:new Lpe(()=>{const c=this._item.get(),u=c.mapping;return{mapping:u,originalWithModifiedChanges:i.computeStagedValue(u),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),i=this._elements.buttons.clientHeight;const r=e.length/2-i/2,s=i;let o=e.start+r;const a=Ht.tryCreate(s,t.endExclusive-s-i),l=Ht.tryCreate(e.start+s,e.endExclusive-i-s);l&&a&&l.start<l.endExclusive&&(o=a.clip(o),o=l.clip(o)),this._elements.buttons.style.top=`${o-e.start}px`}};r9=Tpe([HE(3,Fn)],r9);function Mw(n){return s9.get(n)}const Sh=class Sh extends ke{static get(e){let t=Sh._map.get(e);if(!t){t=new Sh(e),Sh._map.set(e,t);const i=e.onDidDispose(()=>{const r=Sh._map.get(e);r&&(Sh._map.delete(e),r.dispose(),i.dispose())})}return t}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new xS(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){var t;super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=mn(this,this.editor.getModel()),this.model=this._model,this.isReadonly=Ei(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=d6({owner:this,lazy:!0},((t=this.editor.getModel())==null?void 0:t.getVersionId())??null),this.versionId=this._versionId,this._selections=d6({owner:this,equalsFn:rX(SJe(an.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=Ei(this,i=>{const r=this.editor.onDidFocusEditorWidget(i),s=this.editor.onDidBlurEditorWidget(i);return{dispose(){r.dispose(),s.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=wV(this,i=>{var r;return this.versionId.read(i),((r=this.model.read(i))==null?void 0:r.getValue())??""},(i,r)=>{const s=this.model.get();s!==null&&i!==s.getValue()&&s.setValue(i)}),this.valueIsEmpty=Ot(this,i=>{var r;return this.versionId.read(i),((r=this.editor.getModel())==null?void 0:r.getValueLength())===0}),this.cursorSelection=oM({owner:this,equalsFn:rX(an.selectionsEqual)},i=>{var r;return((r=this.selections.read(i))==null?void 0:r[0])??null}),this.onDidType=SV(this),this.scrollTop=Ei(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=Ei(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=Ei(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(i=>i.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(i=>i.decorationsLeft),this.contentWidth=Ei(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(i=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,i)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(i=>{var r;this._beginUpdate();try{this._versionId.set(((r=this.editor.getModel())==null?void 0:r.getVersionId())??null,this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(i=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){var e;this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(((e=this.editor.getModel())==null?void 0:e.getVersionId())??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return Ei(this,t=>this.editor.onDidChangeConfiguration(i=>{i.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){const t=new dt,i=this.editor.createDecorationsCollection();return t.add(aM({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},r=>{const s=e.read(r);i.set(s)})),t.add({dispose:()=>{i.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(i);const r=xn(s=>{e.position.read(s),e.minContentWidthInPx.read(s),this.editor.layoutOverlayWidget(i)});return Pt(()=>{r.dispose(),this.editor.removeOverlayWidget(i)})}};Sh._map=new Map;let s9=Sh;var Out=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Put=function(n,e){return function(t,i){e(t,i,n)}},VE,Mp;let o9=(Mp=class extends ke{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,r){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=r,this._modifiedOutlineSource=Wc(this,l=>{const c=this._editors.modifiedModel.read(l),u=VE._breadcrumbsSourceFactory.read(l);return!c||!u?void 0:u(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();tr(u=>{for(const d of this._editors.original.getSelections()||[])c==null||c.ensureOriginalLineIsVisible(d.getStartPosition().lineNumber,0,u),c==null||c.ensureOriginalLineIsVisible(d.getEndPosition().lineNumber,0,u)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();tr(u=>{for(const d of this._editors.modified.getSelections()||[])c==null||c.ensureModifiedLineIsVisible(d.getStartPosition().lineNumber,0,u),c==null||c.ensureModifiedLineIsVisible(d.getEndPosition().lineNumber,0,u)})}));const s=this._diffModel.map((l,c)=>{var d;const u=(l==null?void 0:l.unchangedRegions.read(c))??[];return u.length===1&&u[0].modifiedLineNumber===1&&u[0].lineCount===((d=this._editors.modifiedModel.read(c))==null?void 0:d.getLineCount())?[]:u});this.viewZones=Cb(this,(l,c)=>{const u=this._modifiedOutlineSource.read(l);if(!u)return{origViewZones:[],modViewZones:[]};const d=[],h=[],f=this._options.renderSideBySide.read(l),g=this._options.compactMode.read(l),p=s.read(l);for(let v=0;v<p.length;v++){const b=p[v];if(!b.shouldHideControls(l)&&!(g&&(v===0||v===p.length-1)))if(g){{const _=Ot(this,C=>b.getHiddenOriginalRange(C).startLineNumber-1),y=new Qv(_,12);d.push(y),c.add(new kJ(this._editors.original,y,b,!f))}{const _=Ot(this,C=>b.getHiddenModifiedRange(C).startLineNumber-1),y=new Qv(_,12);h.push(y),c.add(new kJ(this._editors.modified,y,b))}}else{{const _=Ot(this,C=>b.getHiddenOriginalRange(C).startLineNumber-1),y=new Qv(_,24);d.push(y),c.add(new EJ(this._editors.original,y,b,b.originalUnchangedRange,!f,u,C=>this._diffModel.get().ensureModifiedLineIsVisible(C,2,void 0),this._options))}{const _=Ot(this,C=>b.getHiddenModifiedRange(C).startLineNumber-1),y=new Qv(_,24);h.push(y),c.add(new EJ(this._editors.modified,y,b,b.modifiedUnchangedRange,!1,u,C=>this._diffModel.get().ensureModifiedLineIsVisible(C,2,void 0),this._options))}}}return{origViewZones:d,modViewZones:h}});const o={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new ufe(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(S("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+vn.asClassName(rt.fold),zIndex:10001};this._register(aT(this._editors.original,Ot(this,l=>{const c=s.read(l),u=c.map(d=>({range:d.originalUnchangedRange.toInclusiveRange(),options:o}));for(const d of c)d.shouldHideControls(l)&&u.push({range:te.fromPositions(new de(d.originalLineNumber,1)),options:a});return u}))),this._register(aT(this._editors.modified,Ot(this,l=>{const c=s.read(l),u=c.map(d=>({range:d.modifiedUnchangedRange.toInclusiveRange(),options:o}));for(const d of c)d.shouldHideControls(l)&&u.push({range:It.ofLength(d.modifiedLineNumber,1).toInclusiveRange(),options:a});return u}))),this._register(xn(l=>{const c=s.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(u=>u.getHiddenOriginalRange(l).toInclusiveRange()).filter(k1)),this._editors.modified.setHiddenAreas(c.map(u=>u.getHiddenModifiedRange(l).toInclusiveRange()).filter(k1))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const u=l.target.position.lineNumber,d=this._diffModel.get();if(!d)return;const h=d.unchangedRegions.get().find(f=>f.modifiedUnchangedRange.includes(u));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const u=l.target.position.lineNumber,d=this._diffModel.get();if(!d)return;const h=d.unchangedRegions.get().find(f=>f.originalUnchangedRange.includes(u));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}},VE=Mp,Mp._breadcrumbsSourceFactory=mn(VE,()=>({dispose(){},getBreadcrumbItems(e,t){return[]}})),Mp);o9=VE=Out([Put(3,Fn)],o9);class kJ extends Ez{constructor(e,t,i,r=!1){const s=pn("div.diff-hidden-lines-widget");super(e,t,s.root),this._unchangedRegion=i,this._hide=r,this._nodes=pn("div.diff-hidden-lines-compact",[pn("div.line-left",[]),pn("div.text@text",[]),pn("div.line-right",[])]),s.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(xn(o=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(o).length,l=S("hiddenLines","{0} hidden lines",a);this._nodes.text.innerText=l}}))}}class EJ extends Ez{constructor(e,t,i,r,s,o,a,l){const c=pn("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=r,this._hide=s,this._modifiedOutlineSource=o,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=pn("div.diff-hidden-lines",[pn("div.top@top",{title:S("diff.hiddenLines.top","Click or drag to show more above")}),pn("div.center@content",{style:{display:"flex"}},[pn("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[xt("a",{title:S("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...vp("$(unfold)"))]),pn("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),pn("div.bottom@bottom",{title:S("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?Fs(this._nodes.first):this._register(Af(this._nodes.first,{width:Mw(this._editor).layoutInfoContentLeft})),this._register(xn(d=>{const h=this._unchangedRegion.visibleLineCountTop.read(d)+this._unchangedRegion.visibleLineCountBottom.read(d)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!h),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(d)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(d)>0),this._nodes.top.classList.toggle("canMoveBottom",!h);const f=this._unchangedRegion.isDragged.read(d),g=this._editor.getDomNode();g&&(g.classList.toggle("draggingUnchangedRegion",!!f),f==="top"?(g.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(d)>0),g.classList.toggle("canMoveBottom",!h)):f==="bottom"?(g.classList.toggle("canMoveTop",!h),g.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(d)>0)):(g.classList.toggle("canMoveTop",!1),g.classList.toggle("canMoveBottom",!1)))}));const u=this._editor;this._register(_e(this._nodes.top,"mousedown",d=>{if(d.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),d.preventDefault();const h=d.clientY;let f=!1;const g=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const p=bt(this._nodes.top),v=_e(p,"mousemove",_=>{const C=_.clientY-h;f=f||Math.abs(C)>2;const w=Math.round(C/u.getOption(67)),x=Math.max(0,Math.min(g+w,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(x,void 0)}),b=_e(p,"mouseup",_=>{f||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),v.dispose(),b.dispose()})})),this._register(_e(this._nodes.bottom,"mousedown",d=>{if(d.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),d.preventDefault();const h=d.clientY;let f=!1;const g=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const p=bt(this._nodes.bottom),v=_e(p,"mousemove",_=>{const C=_.clientY-h;f=f||Math.abs(C)>2;const w=Math.round(C/u.getOption(67)),x=Math.max(0,Math.min(g-w,this._unchangedRegion.getMaxVisibleLineCountBottom())),k=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(x,void 0);const E=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(E-k))}),b=_e(p,"mouseup",_=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!f){const y=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const C=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(C-y))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),v.dispose(),b.dispose()})})),this._register(xn(d=>{const h=[];if(!this._hide){const f=i.getHiddenModifiedRange(d).length,g=S("hiddenLines","{0} hidden lines",f),p=xt("span",{title:S("diff.hiddenLines.expandAll","Double click to unfold")},g);p.addEventListener("dblclick",_=>{_.button===0&&(_.preventDefault(),this._unchangedRegion.showAll(void 0))}),h.push(p);const v=this._unchangedRegion.getHiddenModifiedRange(d),b=this._modifiedOutlineSource.getBreadcrumbItems(v,d);if(b.length>0){h.push(xt("span",void 0,"|"));for(let _=0;_<b.length;_++){const y=b[_],C=jP.toIcon(y.kind),w=pn("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[sN(C),"",y.name,..._===b.length-1?[]:[sN(rt.chevronRight)]]).root;h.push(w),w.onclick=()=>{this._revealModifiedHiddenLine(y.startLineNumber)}}}}Fs(this._nodes.others,...h)}))}}var Fut=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},But=function(n,e){return function(t,i){e(t,i,n)}},Fl,yd;let Rw=(yd=class extends ke{constructor(e,t,i,r,s,o,a){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=r,this._rootHeight=s,this._modifiedEditorLayoutInfo=o,this._themeService=a,this.width=Fl.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=Ei(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=Ot(h=>{const f=l.read(h),g=f.getColor(LYe)||(f.getColor(kYe)||P8).transparent(2),p=f.getColor(NYe)||(f.getColor(EYe)||F8).transparent(2);return{insertColor:g,removeColor:p}}),u=Cn(document.createElement("div"));u.setClassName("diffViewport"),u.setPosition("absolute");const d=pn("div.diffOverview",{style:{position:"absolute",top:"0px",width:Fl.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(B_(d,u.domNode)),this._register(vr(d,We.POINTER_DOWN,h=>{this._editors.modified.delegateVerticalScrollbarPointerDown(h)})),this._register(_e(d,We.MOUSE_WHEEL,h=>{this._editors.modified.delegateScrollFromMouseWheelEvent(h)},{passive:!1})),this._register(B_(this._rootElement,d)),this._register(lc((h,f)=>{const g=this._diffModel.read(h),p=this._editors.original.createOverviewRuler("original diffOverviewRuler");p&&(f.add(p),f.add(B_(d,p.getDomNode())));const v=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(v&&(f.add(v),f.add(B_(d,v.getDomNode()))),!p||!v)return;const b=xa("viewZoneChanged",this._editors.original.onDidChangeViewZones),_=xa("viewZoneChanged",this._editors.modified.onDidChangeViewZones),y=xa("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),C=xa("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);f.add(xn(w=>{var D;b.read(w),_.read(w),y.read(w),C.read(w);const x=c.read(w),k=(D=g==null?void 0:g.diff.read(w))==null?void 0:D.mappings;function E(O,A,R){const V=R._getViewModel();return V?O.filter(F=>F.length>0).map(F=>{const T=V.coordinatesConverter.convertModelPositionToViewPosition(new de(F.startLineNumber,1)),N=V.coordinatesConverter.convertModelPositionToViewPosition(new de(F.endLineNumberExclusive,1)),B=N.lineNumber-T.lineNumber;return new ppe(T.lineNumber,N.lineNumber,B,A.toString())}):[]}const L=E((k||[]).map(O=>O.lineRangeMapping.original),x.removeColor,this._editors.original),M=E((k||[]).map(O=>O.lineRangeMapping.modified),x.insertColor,this._editors.modified);p==null||p.setZones(L),v==null||v.setZones(M)})),f.add(xn(w=>{const x=this._rootHeight.read(w),k=this._rootWidth.read(w),E=this._modifiedEditorLayoutInfo.read(w);if(E){const L=Fl.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Fl.ONE_OVERVIEW_WIDTH;p.setLayout({top:0,height:x,right:L+Fl.ONE_OVERVIEW_WIDTH,width:Fl.ONE_OVERVIEW_WIDTH}),v.setLayout({top:0,height:x,right:0,width:Fl.ONE_OVERVIEW_WIDTH});const M=this._editors.modifiedScrollTop.read(w),D=this._editors.modifiedScrollHeight.read(w),O=this._editors.modified.getOption(104),A=new H1(O.verticalHasArrows?O.arrowSize:0,O.verticalScrollbarSize,0,E.height,D,M);u.setTop(A.getSliderPosition()),u.setHeight(A.getSliderSize())}else u.setTop(0),u.setHeight(0);d.style.height=x+"px",d.style.left=k-Fl.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",u.setWidth(Fl.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},Fl=yd,yd.ONE_OVERVIEW_WIDTH=15,yd.ENTIRE_DIFF_OVERVIEW_WIDTH=yd.ONE_OVERVIEW_WIDTH*2,yd);Rw=Fl=Fut([But(6,Nl)],Rw);const jA=[];class Hut extends ke{constructor(e,t,i,r){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=r,this._selectedDiffs=Ot(this,s=>{const o=this._diffModel.read(s),a=o==null?void 0:o.diff.read(s);if(!a)return jA;const l=this._editors.modifiedSelections.read(s);if(l.every(h=>h.isEmpty()))return jA;const c=new Sa(l.map(h=>It.fromRangeInclusive(h))),d=a.mappings.filter(h=>h.lineRangeMapping.innerChanges&&c.intersects(h.lineRangeMapping.modified)).map(h=>({mapping:h,rangeMappings:h.lineRangeMapping.innerChanges.filter(f=>l.some(g=>te.areIntersecting(f.modifiedRange,g)))}));return d.length===0||d.every(h=>h.rangeMappings.length===0)?jA:d}),this._register(lc((s,o)=>{if(!this._options.shouldRenderOldRevertArrows.read(s))return;const a=this._diffModel.read(s),l=a==null?void 0:a.diff.read(s);if(!a||!l||a.movedTextToCompare.read(s))return;const c=[],u=this._selectedDiffs.read(s),d=new Set(u.map(h=>h.mapping));if(u.length>0){const h=this._editors.modifiedSelections.read(s),f=o.add(new dT(h[h.length-1].positionLineNumber,this._widget,u.flatMap(g=>g.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}for(const h of l.mappings)if(!d.has(h)&&!h.lineRangeMapping.modified.isEmpty&&h.lineRangeMapping.innerChanges){const f=o.add(new dT(h.lineRangeMapping.modified.startLineNumber,this._widget,h.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}o.add(Pt(()=>{for(const h of c)this._editors.modified.removeGlyphMarginWidget(h)}))}))}}const oI=class oI extends ke{getId(){return this._id}constructor(e,t,i,r){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=r,this._id=`revertButton${oI.counter++}`,this._domNode=pn("div.revertButton",{title:this._revertSelection?S("revertSelectedChanges","Revert Selected Changes"):S("revertChange","Revert Change")},[sN(rt.arrowRight)]).root,this._register(_e(this._domNode,We.MOUSE_DOWN,s=>{s.button!==2&&(s.stopPropagation(),s.preventDefault())})),this._register(_e(this._domNode,We.MOUSE_UP,s=>{s.stopPropagation(),s.preventDefault()})),this._register(_e(this._domNode,We.CLICK,s=>{this._diffs instanceof ds?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),s.stopPropagation(),s.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:Nf.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};oI.counter=0;let dT=oI;function Bu(n,e,t){const i=n.bindTo(e);return aM({debugName:()=>`Set Context Key "${n.key}"`},r=>{i.set(t(r))})}var Vut=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},LJ=function(n,e){return function(t,i){e(t,i,n)}};let a9=class extends ke{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,r,s,o,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=r,this._createInnerEditor=s,this._instantiationService=o,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new ae),this.modifiedScrollTop=Ei(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=Ei(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=Mw(this.modified),this.originalObs=Mw(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=Ei(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=oM({owner:this,equalsFn:de.equals},l=>{var c;return((c=this.modifiedSelections.read(l)[0])==null?void 0:c.getPosition())??new de(1,1)}),this.originalCursor=Ei(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new de(1,1)),this._argCodeEditorWidgetOptions=null,this._register(lM({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(i.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{i.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),r=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return r.setContextValue("isInDiffLeftEditor",!0),r}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),r=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return r.setContextValue("isInDiffRightEditor",!0),r}_constructInnerEditor(e,t,i,r){const s=this._createInnerEditor(e,t,i,r);return this._register(s.onDidContentSizeChange(o=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+Rw.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),s}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=gm.revealHorizontalRightPadding.defaultValue+Rw.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var i;e||(e="");const t=S("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(i=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))==null?void 0:i.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};a9=Vut([LJ(5,Fn),LJ(6,Wr)],a9);const aI=class aI extends ke{constructor(){super(...arguments),this._id=++aI.idCounter,this._onDidDispose=this._register(new ae),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,r=!0){this._targetEditor.revealRange(e,t,i,r)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};aI.idCounter=0;let l9=aI;var zut=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Wut=function(n,e){return function(t,i){e(t,i,n)}};let c9=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=mn(this,0),this._screenReaderMode=Ei(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=Ot(this,r=>this._options.read(r).renderSideBySide&&this._diffEditorWidth.read(r)<=this._options.read(r).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=Ot(this,r=>this._options.read(r).renderOverviewRuler),this.renderSideBySide=Ot(this,r=>this.compactMode.read(r)&&this.shouldRenderInlineViewInSmartMode.read(r)?!1:this._options.read(r).renderSideBySide&&!(this._options.read(r).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(r)&&!this._screenReaderMode.read(r))),this.readOnly=Ot(this,r=>this._options.read(r).readOnly),this.shouldRenderOldRevertArrows=Ot(this,r=>!(!this._options.read(r).renderMarginRevertIcon||!this.renderSideBySide.read(r)||this.readOnly.read(r)||this.shouldRenderGutterMenu.read(r))),this.shouldRenderGutterMenu=Ot(this,r=>this._options.read(r).renderGutterMenu),this.renderIndicators=Ot(this,r=>this._options.read(r).renderIndicators),this.enableSplitViewResizing=Ot(this,r=>this._options.read(r).enableSplitViewResizing),this.splitViewDefaultRatio=Ot(this,r=>this._options.read(r).splitViewDefaultRatio),this.ignoreTrimWhitespace=Ot(this,r=>this._options.read(r).ignoreTrimWhitespace),this.maxComputationTimeMs=Ot(this,r=>this._options.read(r).maxComputationTime),this.showMoves=Ot(this,r=>this._options.read(r).experimental.showMoves&&this.renderSideBySide.read(r)),this.isInEmbeddedEditor=Ot(this,r=>this._options.read(r).isInEmbeddedEditor),this.diffWordWrap=Ot(this,r=>this._options.read(r).diffWordWrap),this.originalEditable=Ot(this,r=>this._options.read(r).originalEditable),this.diffCodeLens=Ot(this,r=>this._options.read(r).diffCodeLens),this.accessibilityVerbose=Ot(this,r=>this._options.read(r).accessibilityVerbose),this.diffAlgorithm=Ot(this,r=>this._options.read(r).diffAlgorithm),this.showEmptyDecorations=Ot(this,r=>this._options.read(r).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=Ot(this,r=>this._options.read(r).onlyShowAccessibleDiffViewer),this.compactMode=Ot(this,r=>this._options.read(r).compactMode),this.trueInlineDiffRenderingEnabled=Ot(this,r=>this._options.read(r).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=Ot(this,r=>!this.renderSideBySide.read(r)&&this.trueInlineDiffRenderingEnabled.read(r)),this.hideUnchangedRegions=Ot(this,r=>this._options.read(r).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=Ot(this,r=>this._options.read(r).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=Ot(this,r=>this._options.read(r).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=Ot(this,r=>this._options.read(r).hideUnchangedRegions.minimumLineCount),this._model=mn(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,r=>HJe(this,s=>{const o=r==null?void 0:r.diff.read(s);return o?$ut(o,this.trueInlineDiffRenderingEnabled.read(s)):void 0})).flatten().map(this,r=>!!r),this.inlineViewHideOriginalLineNumbers=this.compactMode;const i={...e,...NJ(e,Ir)};this._options=mn(this,i)}updateOptions(e){const t=NJ(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};c9=zut([Wut(1,Lc)],c9);function $ut(n,e){return n.mappings.every(t=>Uut(t.lineRangeMapping)||jut(t.lineRangeMapping)||e&&Mz(t.lineRangeMapping))}function Uut(n){return n.original.length===0}function jut(n){return n.modified.length===0}function NJ(n,e){var t,i,r,s,o,a,l,c;return{enableSplitViewResizing:it(n.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:TWe(n.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:it(n.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:it(n.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:lg(n.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:lg(n.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:it(n.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:it(n.renderIndicators,e.renderIndicators),originalEditable:it(n.originalEditable,e.originalEditable),diffCodeLens:it(n.diffCodeLens,e.diffCodeLens),renderOverviewRuler:it(n.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:gi(n.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:gi(n.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:it(n.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:it((t=n.experimental)==null?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:it((i=n.experimental)==null?void 0:i.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:it((r=n.experimental)==null?void 0:r.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:it(((s=n.hideUnchangedRegions)==null?void 0:s.enabled)??((o=n.experimental)==null?void 0:o.collapseUnchangedRegions),e.hideUnchangedRegions.enabled),contextLineCount:lg((a=n.hideUnchangedRegions)==null?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:lg((l=n.hideUnchangedRegions)==null?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:lg((c=n.hideUnchangedRegions)==null?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:it(n.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:it(n.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:lg(n.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:it(n.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:it(n.renderGutterMenu,e.renderGutterMenu),compactMode:it(n.compactMode,e.compactMode)}}var Kut=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},v_=function(n,e){return function(t,i){e(t,i,n)}};let hT=class extends l9{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,r,s,o,a,l){super(),this._domElement=e,this._parentContextKeyService=r,this._parentInstantiationService=s,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=pn("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[pn("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),pn("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),pn("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register(Sfe(this,void 0)),this._diffModel=Ot(this,C=>{var w;return(w=this._diffModelSrc.read(C))==null?void 0:w.object}),this.onDidChangeModel=Be.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new Sb([In,this._contextKeyService]))),this._boundarySashes=mn(this,void 0),this._accessibleDiffViewerShouldBeVisible=mn(this,!1),this._accessibleDiffViewerVisible=Ot(this,C=>this._options.onlyShowAccessibleDiffViewer.read(C)?!0:this._accessibleDiffViewerShouldBeVisible.read(C)),this._movedBlocksLinesPart=mn(this,void 0),this._layoutInfo=Ot(this,C=>{var T,N;const w=this._rootSizeObserver.width.read(C),x=this._rootSizeObserver.height.read(C);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=x+"px";const k=this._sash.read(C),E=this._gutter.read(C),L=(E==null?void 0:E.width.read(C))??0,M=((T=this._overviewRulerPart.read(C))==null?void 0:T.width)??0;let D,O,A,R,V;if(!!k){const B=k.sashLeft.read(C),$=((N=this._movedBlocksLinesPart.read(C))==null?void 0:N.width.read(C))??0;D=0,O=B-L-$,V=B-L,A=B,R=w-A-M}else{V=0;const B=this._options.inlineViewHideOriginalLineNumbers.read(C);D=L,B?O=0:O=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(C)),A=L+O,R=w-A-M}return this.elements.original.style.left=D+"px",this.elements.original.style.width=O+"px",this._editors.original.layout({width:O,height:x},!0),E==null||E.layout(V),this.elements.modified.style.left=A+"px",this.elements.modified.style.width=R+"px",this._editors.modified.layout({width:R,height:x},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((C,w)=>C==null?void 0:C.diff.read(w)),this.onDidUpdateDiff=Be.fromObservableLight(this._diffValue),o.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(Pt(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new Cpe(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(c9,t),this._register(xn(C=>{this._options.setWidth(this._rootSizeObserver.width.read(C))})),this._contextKeyService.createKey(et.isEmbeddedDiffEditor.key,!1),this._register(Bu(et.isEmbeddedDiffEditor,this._contextKeyService,C=>this._options.isInEmbeddedEditor.read(C))),this._register(Bu(et.comparingMovedCode,this._contextKeyService,C=>{var w;return!!((w=this._diffModel.read(C))!=null&&w.movedTextToCompare.read(C))})),this._register(Bu(et.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,C=>this._options.couldShowInlineViewBecauseOfSize.read(C))),this._register(Bu(et.diffEditorInlineMode,this._contextKeyService,C=>!this._options.renderSideBySide.read(C))),this._register(Bu(et.hasChanges,this._contextKeyService,C=>{var w,x;return(((x=(w=this._diffModel.read(C))==null?void 0:w.diff.read(C))==null?void 0:x.mappings.length)??0)>0})),this._editors=this._register(this._instantiationService.createInstance(a9,this.elements.original,this.elements.modified,this._options,i,(C,w,x,k)=>this._createInnerEditor(C,w,x,k))),this._register(Bu(et.diffEditorOriginalWritable,this._contextKeyService,C=>this._options.originalEditable.read(C))),this._register(Bu(et.diffEditorModifiedWritable,this._contextKeyService,C=>!this._options.readOnly.read(C))),this._register(Bu(et.diffEditorOriginalUri,this._contextKeyService,C=>{var w;return((w=this._diffModel.read(C))==null?void 0:w.model.original.uri.toString())??""})),this._register(Bu(et.diffEditorModifiedUri,this._contextKeyService,C=>{var w;return((w=this._diffModel.read(C))==null?void 0:w.model.modified.uri.toString())??""})),this._overviewRulerPart=Wc(this,C=>this._options.renderOverviewRuler.read(C)?this._instantiationService.createInstance(Xa(Rw,C),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(w=>w.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const c={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((C,w)=>{var x;return C-(((x=this._overviewRulerPart.read(w))==null?void 0:x.width)??0)})};this._sashLayout=new Dut(this._options,c),this._sash=Wc(this,C=>{const w=this._options.renderSideBySide.read(C);return this.elements.root.classList.toggle("side-by-side",w),w?new Epe(this.elements.root,c,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const u=Wc(this,C=>this._instantiationService.createInstance(Xa(o9,C),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);Wc(this,C=>this._instantiationService.createInstance(Xa(Iut,C),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const d=new Set,h=new Set;let f=!1;const g=Wc(this,C=>this._instantiationService.createInstance(Xa(t9,C),bt(this._domElement),this._editors,this._diffModel,this._options,this,()=>f||u.get().isUpdatingHiddenAreas,d,h)).recomputeInitiallyAndOnChange(this._store),p=Ot(this,C=>{const w=g.read(C).viewZones.read(C).orig,x=u.read(C).viewZones.read(C).origViewZones;return w.concat(x)}),v=Ot(this,C=>{const w=g.read(C).viewZones.read(C).mod,x=u.read(C).viewZones.read(C).modViewZones;return w.concat(x)});this._register(lT(this._editors.original,p,C=>{f=C},d));let b;this._register(lT(this._editors.modified,v,C=>{f=C,f?b=oT.capture(this._editors.modified):(b==null||b.restore(this._editors.modified),b=void 0)},h)),this._accessibleDiffViewer=Wc(this,C=>this._instantiationService.createInstance(Xa(Qg,C),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(w,x)=>this._accessibleDiffViewerShouldBeVisible.set(w,x),this._options.onlyShowAccessibleDiffViewer.map(w=>!w),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((w,x)=>{var k;return(k=w==null?void 0:w.diff.read(x))==null?void 0:k.mappings.map(E=>E.lineRangeMapping)}),new gut(this._editors))).recomputeInitiallyAndOnChange(this._store);const _=this._accessibleDiffViewerVisible.map(C=>C?"hidden":"visible");this._register(Af(this.elements.modified,{visibility:_})),this._register(Af(this.elements.original,{visibility:_})),this._createDiffEditorContributions(),o.addDiffEditor(this),this._gutter=Wc(this,C=>this._options.shouldRenderGutterMenu.read(C)?this._instantiationService.createInstance(Xa(i9,C),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(uM(this._layoutInfo)),Wc(this,C=>new(Xa(Z0,C))(this.elements.root,this._diffModel,this._layoutInfo.map(w=>w.originalEditor),this._layoutInfo.map(w=>w.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,C=>{this._movedBlocksLinesPart.set(C,void 0)}),this._register(Be.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,C=>this._handleCursorPositionChange(C,!0))),this._register(Be.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,C=>this._handleCursorPositionChange(C,!1)));const y=this._diffModel.map(this,(C,w)=>{if(C)return C.diff.read(w)===void 0&&!C.isDiffUpToDate.read(w)});this._register(lc((C,w)=>{if(y.read(C)===!0){const x=this._editorProgressService.show(!0,1e3);w.add(Pt(()=>x.done()))}})),this._register(lc((C,w)=>{w.add(new(Xa(Hut,C))(this._editors,this._diffModel,this._options,this))})),this._register(lc((C,w)=>{const x=this._diffModel.read(C);if(x)for(const k of[x.model.original,x.model.modified])w.add(k.onWillDispose(E=>{$n(new Tn("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(xn(C=>{this._options.setModel(this._diffModel.read(C))}))}_createInnerEditor(e,t,i,r){return e.createInstance(sT,t,i,r)}_createDiffEditorContributions(){const e=D0.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){$n(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return oz.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var i;const e=this._editors.original.saveViewState(),t=this._editors.modified.saveViewState();return{original:e,modified:t,modelState:(i=this._diffModel.get())==null?void 0:i.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const i=e;this._editors.original.restoreViewState(i.original),this._editors.modified.restoreViewState(i.modified),i.modelState&&((t=this._diffModel.get())==null||t.restoreSerializedState(i.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(e9,e,this._options)}getModel(){var e;return((e=this._diffModel.get())==null?void 0:e.model)??null}setModel(e){const t=e?"model"in e?cT.create(e).createNewRef(this):cT.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const i=this._diffModel.get();!e&&i&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==(e==null?void 0:e.object)&&CV(t,r=>{var a;const s=e==null?void 0:e.object;Ei.batchEventsGlobally(r,()=>{this._editors.original.setModel(s?s.model.original:null),this._editors.modified.setModel(s?s.model.modified:null)});const o=(a=this._diffModelSrc.get())==null?void 0:a.createNewRef(this);this._diffModelSrc.set(e==null?void 0:e.createNewRef(this),r),setTimeout(()=>{o==null||o.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var t;const e=(t=this._diffModel.get())==null?void 0:t.diff.get();return e?qut(e):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const i=e.map(r=>({range:r.modifiedRange,text:t.model.original.getValueInRange(r.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new de(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var s,o;const t=(o=(s=this._diffModel.get())==null?void 0:s.diff.get())==null?void 0:o.mappings;if(!t||t.length===0)return;const i=this._editors.modified.getPosition().lineNumber;let r;e==="next"?r=t.find(a=>a.lineRangeMapping.modified.startLineNumber>i)??t[0]:r=qL(t,a=>a.lineRangeMapping.modified.startLineNumber<i)??t[t.length-1],this._goTo(r),r.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Qc.diffLineDeleted,{source:"diffEditor.goToDiff"}):r.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Qc.diffLineInserted,{source:"diffEditor.goToDiff"}):r&&this._accessibilitySignalService.playSignal(Qc.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var i;const t=(i=e.diff.get())==null?void 0:i.mappings;!t||t.length===0||this._goTo(t[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var o,a;const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,i=e?this._editors.original:this._editors.modified;let r;const s=t.getSelection();if(s){const l=(a=(o=this._diffModel.get())==null?void 0:o.diff.get())==null?void 0:a.mappings.map(c=>e?c.lineRangeMapping.flip():c.lineRangeMapping);if(l){const c=cJ(s.getStartPosition(),l),u=cJ(s.getEndPosition(),l);r=te.plusRange(c,u)}}return{destination:i,destinationSelection:r}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&tr(i=>{for(const r of e)r.collapseAll(i)})}showAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&tr(i=>{for(const r of e)r.showAll(i)})}_handleCursorPositionChange(e,t){var i,r;if((e==null?void 0:e.reason)===3){const s=(r=(i=this._diffModel.get())==null?void 0:i.diff.get())==null?void 0:r.mappings.find(o=>t?o.lineRangeMapping.modified.contains(e.position.lineNumber):o.lineRangeMapping.original.contains(e.position.lineNumber));s!=null&&s.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Qc.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):s!=null&&s.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Qc.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):s&&this._accessibilitySignalService.playSignal(Qc.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};hT=Kut([v_(3,In),v_(4,Fn),v_(5,or),v_(6,xM),v_(7,vV)],hT);function qut(n){return n.mappings.map(e=>{const t=e.lineRangeMapping;let i,r,s,o,a=t.innerChanges;return t.original.isEmpty?(i=t.original.startLineNumber-1,r=0,a=void 0):(i=t.original.startLineNumber,r=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(s=t.modified.startLineNumber-1,o=0,a=void 0):(s=t.modified.startLineNumber,o=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:r,modifiedStartLineNumber:s,modifiedEndLineNumber:o,charChanges:a==null?void 0:a.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var Az=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},Zn=function(n,e){return function(t,i){e(t,i,n)}};let Gut=0,TJ=!1;function Yut(n){if(!n){if(TJ)return;TJ=!0}NQe(n||zn.document.body)}let fT=class extends sT{constructor(e,t,i,r,s,o,a,l,c,u,d,h,f){const g={...t};g.ariaLabel=g.ariaLabel||o6.editorViewAccessibleLabel,super(e,g,{},i,r,s,o,c,u,d,h,f),l instanceof j1?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,Yut(g.ariaContainerElement),jJe((p,v)=>i.createInstance(aw,p,v,{})),KJe(a)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const r="DYNAMIC_"+ ++Gut,s=Ln.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(r,e,t,s),r}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ke.None;const t=e.id,i=e.label,r=Ln.and(Ln.equals("editorId",this.getId()),Ln.deserialize(e.precondition)),s=e.keybindings,o=Ln.and(r,Ln.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),u=new dt,d=this.getId()+":"+t;if(u.add(po.registerCommand(d,c)),a){const f={command:{id:d,title:i},when:r,group:a,order:l};u.add(I1.appendMenuItem(Br.EditorContext,f))}if(Array.isArray(s))for(const f of s)u.add(this._standaloneKeybindingService.addDynamicKeybinding(d,f,c,o));const h=new mpe(d,i,i,void 0,r,(...f)=>Promise.resolve(e.run(this,...f)),this._contextKeyService);return this._actions.set(t,h),u.add(Pt(()=>{this._actions.delete(t)})),u}_triggerCommand(e,t){if(this._codeEditorService instanceof QL)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};fT=Az([Zn(2,Fn),Zn(3,or),Zn(4,ga),Zn(5,In),Zn(6,yS),Zn(7,Wr),Zn(8,Nl),Zn(9,Ec),Zn(10,Lc),Zn(11,Eu),Zn(12,Yn)],fT);let u9=class extends fT{constructor(e,t,i,r,s,o,a,l,c,u,d,h,f,g,p,v){const b={...t};VN(d,b,!1);const _=c.registerEditorContainer(e);typeof b.theme=="string"&&c.setTheme(b.theme),typeof b.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!b.autoDetectHighContrast);const y=b.model;delete b.model,super(e,b,i,r,s,o,a,l,c,u,h,p,v),this._configurationService=d,this._standaloneThemeService=c,this._register(_);let C;if(typeof y>"u"){const w=g.getLanguageIdByMimeType(b.language)||b.language||gl;C=Ipe(f,g,b.value||"",w,void 0),this._ownsModel=!0}else C=y,this._ownsModel=!1;if(this._attachModel(C),C){const w={oldModelUrl:null,newModelUrl:C.uri};this._onDidChangeModel.fire(w)}}dispose(){super.dispose()}updateOptions(e){VN(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};u9=Az([Zn(2,Fn),Zn(3,or),Zn(4,ga),Zn(5,In),Zn(6,yS),Zn(7,Wr),Zn(8,Tl),Zn(9,Ec),Zn(10,Ti),Zn(11,Lc),Zn(12,$s),Zn(13,br),Zn(14,Eu),Zn(15,Yn)],u9);let d9=class extends hT{constructor(e,t,i,r,s,o,a,l,c,u,d,h){const f={...t};VN(l,f,!0);const g=o.registerEditorContainer(e);typeof f.theme=="string"&&o.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&o.setAutoDetectHighContrast(!!f.autoDetectHighContrast),super(e,f,{},r,i,s,h,u),this._configurationService=l,this._standaloneThemeService=o,this._register(g)}dispose(){super.dispose()}updateOptions(e){VN(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(fT,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};d9=Az([Zn(2,Fn),Zn(3,In),Zn(4,or),Zn(5,Tl),Zn(6,Ec),Zn(7,Ti),Zn(8,Zd),Zn(9,vV),Zn(10,rz),Zn(11,xM)],d9);function Ipe(n,e,t,i,r){if(t=t||"",!i){const s=t.indexOf(`
`);let o=t;return s!==-1&&(o=t.substring(0,s)),IJ(n,t,e.createByFilepathOrFirstLine(r||null,o),r)}return IJ(n,t,e.createById(i),r)}function IJ(n,e,t,i){return n.createModel(e,t,i)}var Zut=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},DJ=function(n,e){return function(t,i){e(t,i,n)}};class Xut{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let gT=class extends ke{constructor(e,t,i,r,s){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=r,this._viewModel=mn(this,void 0),this._collapsed=Ot(this,l=>{var c;return(c=this._viewModel.read(l))==null?void 0:c.collapsed.read(l)}),this._editorContentHeight=mn(this,500),this.contentHeight=Ot(this,l=>(this._collapsed.read(l)?0:this._editorContentHeight.read(l))+this._outerEditorHeight),this._modifiedContentWidth=mn(this,0),this._modifiedWidth=mn(this,0),this._originalContentWidth=mn(this,0),this._originalWidth=mn(this,0),this.maxScroll=Ot(this,l=>{const c=this._modifiedContentWidth.read(l)-this._modifiedWidth.read(l),u=this._originalContentWidth.read(l)-this._originalWidth.read(l);return c>u?{maxScroll:c,width:this._modifiedWidth.read(l)}:{maxScroll:u,width:this._originalWidth.read(l)}}),this._elements=pn("div.multiDiffEntry",[pn("div.header@header",[pn("div.header-content",[pn("div.collapse-button@collapseButton"),pn("div.file-path",[pn("div.title.modified.show-file-icons@primaryPath",[]),pn("div.status.deleted@status",["R"]),pn("div.title.original.show-file-icons@secondaryPath",[])]),pn("div.actions@actions")])]),pn("div.editorParent",[pn("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(hT,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=Mw(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=Mw(this.editor.getOriginalEditor()).isFocused,this.isFocused=Ot(this,l=>this.isModifedFocused.read(l)||this.isOriginalFocused.read(l)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new dt),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const o=new W6(this._elements.collapseButton,{});this._register(xn(l=>{o.element.className="",o.icon=this._collapsed.read(l)?rt.chevronRight:rt.chevronDown})),this._register(o.onDidClick(()=>{var l;(l=this._viewModel.get())==null||l.collapsed.set(!this._collapsed.get(),void 0)})),this._register(xn(l=>{this._elements.editor.style.display=this._collapsed.read(l)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(l=>{const c=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(c,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(l=>{const c=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(c,void 0)})),this._register(this.editor.onDidContentSizeChange(l=>{M_(c=>{this._editorContentHeight.set(l.contentHeight,c),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),c),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),c)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(l=>{if(this._isSettingScrollTop||!l.scrollTopChanged||!this._data)return;const c=l.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(c)})),this._register(xn(l=>{var u;const c=(u=this._viewModel.read(l))==null?void 0:u.isActive.read(l);this._elements.root.classList.toggle("active",c)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(s.createScoped(this._elements.actions));const a=this._register(this._instantiationService.createChild(new Sb([In,this._contextKeyService])));this._register(a.createInstance(uT,this._elements.actions,Br.MultiDiffEditorFileToolbar,{actionRunner:this._register(new Lpe(()=>{var l;return(l=this._viewModel.get())==null?void 0:l.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:l=>l.startsWith("navigation")},actionViewItemProvider:(l,c)=>Bet(a,l,c)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(r){return{...r,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!e){M_(r=>{this._viewModel.set(void 0,r),this.editor.setDiffModel(null,r),this._dataStore.clear()});return}const i=e.viewModel.documentDiffItem;if(M_(r=>{var c,u;(c=this._resourceLabel)==null||c.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let s=!1,o=!1,a=!1,l="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(l="R",s=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(l="A",a=!0):(l="D",o=!0),this._elements.status.classList.toggle("renamed",s),this._elements.status.classList.toggle("deleted",o),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=l,(u=this._resourceLabel2)==null||u.setUri(s?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,r),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,r),this.editor.updateOptions(t(i.options??{}))}),i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange(()=>{this.editor.updateOptions(t(i.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,r=>{r||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(const[r,s]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(r,s)}render(e,t,i,r){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const s=e.length-this._headerHeight,o=Math.max(0,Math.min(r.start-e.start,s));this._elements.header.style.transform=`translateY(${o}px)`,M_(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",o>0||i>0),this._elements.header.classList.toggle("collapsed",o===s)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};gT=Zut([DJ(3,Fn),DJ(4,In)],gT);class Qut{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(this._unused.size===0)t=this._create(e),this._itemData.set(t,e);else{const i=[...this._unused.values()];t=i.find(r=>this._itemData.get(r).getId()===e.getId())??i[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var Jut=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},MJ=function(n,e){return function(t,i){e(t,i,n)}};let h9=class extends ke{constructor(e,t,i,r,s,o){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=r,this._parentContextKeyService=s,this._parentInstantiationService=o,this._scrollableElements=pn("div.scrollContent",[pn("div@content",{style:{overflow:"hidden"}}),pn("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new bb({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>Po(bt(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new tM(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=pn("div.monaco-component.multiDiffEditor",{},[pn("div",{},[this._scrollableElement.getDomNode()]),pn("div.placeholder@placeholder",{},[pn("div",[S("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new Cpe(this._element,void 0)),this._objectPool=this._register(new Qut(l=>{const c=this._instantiationService.createInstance(gT,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this.scrollTop=Ei(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=Ei(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=Cb(this,(l,c)=>{const u=this._viewModel.read(l);if(!u)return{items:[],getItem:g=>{throw new Tn}};const d=u.items.read(l),h=new Map;return{items:d.map(g=>{var b;const p=c.add(new edt(g,this._objectPool,this.scrollLeft,_=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+_})})),v=(b=this._lastDocStates)==null?void 0:b[p.getKey()];return v&&tr(_=>{p.setViewState(v,_)}),h.set(g,p),p}),getItem:g=>h.get(g)}}),this._viewItems=this._viewItemsInfo.map(this,l=>l.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((u,d)=>u+d.contentHeight.read(c)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new Sb([In,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(et.inMultiDiffEditor.key,!0),this._register(lc((l,c)=>{const u=this._viewModel.read(l);if(u&&u.contextKeys)for(const[d,h]of Object.entries(u.contextKeys)){const f=this._contextKeyService.createKey(d,void 0);f.set(h),c.add(Pt(()=>f.reset()))}}));const a=this._parentContextKeyService.createKey(et.multiDiffEditorAllCollapsed.key,!1);this._register(xn(l=>{const c=this._viewModel.read(l);if(c){const u=c.items.read(l).every(d=>d.collapsed.read(l));a.set(u)}})),this._register(xn(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._register(xn(l=>{const c=this._viewItems.read(l);this._elements.placeholder.classList.toggle("visible",c.length===0)})),this._scrollableElements.content.style.position="relative",this._register(xn(l=>{const c=this._sizeObserver.height.read(l);this._scrollableElements.root.style.height=`${c}px`;const u=this._totalHeight.read(l);this._scrollableElements.content.style.height=`${u}px`;const d=this._sizeObserver.width.read(l);let h=d;const f=this._viewItems.read(l),g=rhe(f,fl(p=>p.maxScroll.read(l).maxScroll,df));if(g){const p=g.maxScroll.read(l);h=d+p.maxScroll}this._scrollableElement.setScrollDimensions({width:d,height:c,scrollHeight:u,scrollWidth:h})})),e.replaceChildren(this._elements.root),this._register(Pt(()=>{e.replaceChildren()})),this._register(this._register(xn(l=>{M_(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let i=0,r=0,s=0;const o=this._sizeObserver.height.read(e),a=Ht.ofStartAndLength(t,o),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const u=c.contentHeight.read(e),d=Math.min(u,o),h=Ht.ofStartAndLength(r,d),f=Ht.ofStartAndLength(s,u);if(f.isBefore(a))i-=u-d,c.hide();else if(f.isAfter(a))c.hide();else{const g=Math.max(0,Math.min(a.start-f.start,u-d));i-=g;const p=Ht.ofStartAndLength(t+i,o);c.render(h,g,l,p)}r+=d+this._spaceBetweenPx,s+=u+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}};h9=Jut([MJ(4,In),MJ(5,Fn)],h9);class edt extends ke{constructor(e,t,i,r){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=r,this._templateRef=this._register(Sfe(this,void 0)),this.contentHeight=Ot(this,s=>{var o,a;return((a=(o=this._templateRef.read(s))==null?void 0:o.object.contentHeight)==null?void 0:a.read(s))??this.viewModel.lastTemplateData.read(s).contentHeight}),this.maxScroll=Ot(this,s=>{var o;return((o=this._templateRef.read(s))==null?void 0:o.object.maxScroll.read(s))??{maxScroll:0,scrollWidth:0}}),this.template=Ot(this,s=>{var o;return(o=this._templateRef.read(s))==null?void 0:o.object}),this._isHidden=mn(this,!1),this._isFocused=Ot(this,s=>{var o;return((o=this.template.read(s))==null?void 0:o.isFocused.read(s))??!1}),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(xn(s=>{var a;const o=this._scrollLeft.read(s);(a=this._templateRef.read(s))==null||a.object.setScrollLeft(o)})),this._register(xn(s=>{const o=this._templateRef.read(s);!o||!this._isHidden.read(s)||o.object.isFocused.read(s)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${(e=this.viewModel.documentDiffItem.modified)==null?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var o;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const i=this.viewModel.lastTemplateData.get(),r=(o=e.selections)==null?void 0:o.map(an.liftSelection);this.viewModel.lastTemplateData.set({...i,selections:r},t);const s=this._templateRef.get();s&&r&&s.object.editor.setSelections(r)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&tr(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,r){this._isHidden.set(!1,void 0);let s=this._templateRef.get();if(!s){s=this._objectPool.getUnusedObj(new Xut(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(s,void 0);const o=this.viewModel.lastTemplateData.get().selections;o&&s.object.editor.setSelections(o)}s.object.render(e,i,t,r)}}Z("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},S("multiDiffEditor.headerBackground","The background color of the diff editor's header"));Z("multiDiffEditor.background",mc,S("multiDiffEditor.background","The background color of the multi file diff editor"));Z("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},S("multiDiffEditor.border","The border color of the multi file diff editor"));var tdt=function(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s},ndt=function(n,e){return function(t,i){e(t,i,n)}};let f9=class extends ke{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=mn(this,void 0),this._viewModel=mn(this,void 0),this._widgetImpl=Cb(this,(r,s)=>(Xa(gT,r),s.add(this._instantiationService.createInstance(Xa(h9,r),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(uM(this._widgetImpl))}};f9=tdt([ndt(2,Fn)],f9);function idt(n,e,t){return yt.initialize(t||{}).createInstance(u9,n,e)}function rdt(n){return yt.get(or).onCodeEditorAdd(t=>{n(t)})}function sdt(n){return yt.get(or).onDiffEditorAdd(t=>{n(t)})}function odt(){return yt.get(or).listCodeEditors()}function adt(){return yt.get(or).listDiffEditors()}function ldt(n,e,t){return yt.initialize(t||{}).createInstance(d9,n,e)}function cdt(n,e){const t=yt.initialize(e||{});return new f9(n,{},t)}function udt(n){if(typeof n.id!="string"||typeof n.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return po.registerCommand(n.id,n.run)}function ddt(n){if(typeof n.id!="string"||typeof n.label!="string"||typeof n.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=Ln.deserialize(n.precondition),t=(r,...s)=>tm.runEditorCommand(r,s,e,(o,a,l)=>Promise.resolve(n.run(a,...l))),i=new dt;if(i.add(po.registerCommand(n.id,t)),n.contextMenuGroupId){const r={command:{id:n.id,title:n.label},when:e,group:n.contextMenuGroupId,order:n.contextMenuOrder||0};i.add(I1.appendMenuItem(Br.EditorContext,r))}if(Array.isArray(n.keybindings)){const r=yt.get(Wr);if(!(r instanceof j1))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const s=Ln.and(e,Ln.deserialize(n.keybindingContext));i.add(r.addDynamicKeybindings(n.keybindings.map(o=>({keybinding:o,command:n.id,when:s}))))}}return i}function hdt(n){return Dpe([n])}function Dpe(n){const e=yt.get(Wr);return e instanceof j1?e.addDynamicKeybindings(n.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:Ln.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ke.None)}function fdt(n,e,t){const i=yt.get(br),r=i.getLanguageIdByMimeType(e)||e;return Ipe(yt.get($s),i,n,r,t)}function gdt(n,e){const t=yt.get(br),i=t.getLanguageIdByMimeType(e)||e||gl;n.setLanguage(t.createById(i))}function pdt(n,e,t){n&&yt.get(Em).changeOne(e,n.uri,t)}function mdt(n){yt.get(Em).changeAll(n,[])}function vdt(n){return yt.get(Em).read(n)}function bdt(n){return yt.get(Em).onMarkerChanged(n)}function _dt(n){return yt.get($s).getModel(n)}function Cdt(){return yt.get($s).getModels()}function ydt(n){return yt.get($s).onModelAdded(n)}function wdt(n){return yt.get($s).onModelRemoved(n)}function Sdt(n){return yt.get($s).onModelLanguageChanged(t=>{n({model:t.model,oldLanguage:t.oldLanguageId})})}function xdt(n){return iot(yt.get($s),n)}function kdt(n,e){const t=yt.get(br),i=yt.get(Tl);return cz.colorizeElement(i,t,n,e).then(()=>{i.registerEditorContainer(n)})}function Edt(n,e,t){const i=yt.get(br);return yt.get(Tl).registerEditorContainer(zn.document.body),cz.colorize(i,n,e,t)}function Ldt(n,e,t=4){return yt.get(Tl).registerEditorContainer(zn.document.body),cz.colorizeModelLine(n,e,t)}function Ndt(n){const e=Hi.get(n);return e||{getInitialState:()=>cw,tokenize:(t,i,r)=>pfe(n,r)}}function Tdt(n,e){Hi.getOrCreate(e);const t=Ndt(e),i=mb(n),r=[];let s=t.getInitialState();for(let o=0,a=i.length;o<a;o++){const l=i[o],c=t.tokenize(l,!0,s);r[o]=c.tokens,s=c.endState}return r}function Idt(n,e){yt.get(Tl).defineTheme(n,e)}function Ddt(n){yt.get(Tl).setTheme(n)}function Mdt(){s8.clearAllFontInfos()}function Rdt(n,e){return po.registerCommand({id:n,handler:e})}function Adt(n){return yt.get(SS).registerOpener({async open(t){return typeof t=="string"&&(t=Ut.parse(t)),n.open(t)}})}function Odt(n){return yt.get(or).registerCodeEditorOpenHandler(async(t,i,r)=>{var a;if(!i)return null;const s=(a=t.options)==null?void 0:a.selection;let o;return s&&typeof s.endLineNumber=="number"&&typeof s.endColumn=="number"?o=s:s&&(o={lineNumber:s.startLineNumber,column:s.startColumn}),await n.openCodeEditor(i,t.resource,o)?i:null})}function Pdt(){return{create:idt,getEditors:odt,getDiffEditors:adt,onDidCreateEditor:rdt,onDidCreateDiffEditor:sdt,createDiffEditor:ldt,addCommand:udt,addEditorAction:ddt,addKeybindingRule:hdt,addKeybindingRules:Dpe,createModel:fdt,setModelLanguage:gdt,setModelMarkers:pdt,getModelMarkers:vdt,removeAllMarkers:mdt,onDidChangeMarkers:bdt,getModels:Cdt,getModel:_dt,onDidCreateModel:ydt,onWillDisposeModel:wdt,onDidChangeModelLanguage:Sdt,createWebWorker:xdt,colorizeElement:kdt,colorize:Edt,colorizeModelLine:Ldt,tokenize:Tdt,defineTheme:Idt,setTheme:Ddt,remeasureFonts:Mdt,registerCommand:Rdt,registerLinkOpener:Adt,registerEditorOpener:Odt,AccessibilitySupport:GP,ContentWidgetPositionPreference:e5,CursorChangeReason:t5,DefaultEndOfLine:n5,EditorAutoIndentStrategy:r5,EditorOption:s5,EndOfLinePreference:o5,EndOfLineSequence:a5,MinimapPosition:b5,MinimapSectionHeaderStyle:_5,MouseTargetType:C5,OverlayWidgetPositionPreference:S5,OverviewRulerLane:x5,GlyphMarginLane:l5,RenderLineNumbersType:L5,RenderMinimap:N5,ScrollbarVisibility:I5,ScrollType:T5,TextEditorCursorBlinkingStyle:P5,TextEditorCursorStyle:F5,TrackedRangeStickiness:B5,WrappingIndent:H5,InjectedTextCursorStops:d5,PositionAffinity:E5,ShowLightbulbIconMode:M5,ConfigurationChangedEvent:Fue,BareFontInfo:mp,FontInfo:r8,TextModelResolvedOptions:_E,FindMatch:nw,ApplyUpdateResult:fC,EditorZoom:Th,createMultiFileDiffEditor:cdt,EditorType:oz,EditorOptions:gm}}function Fdt(n,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!n(t))return!1;return!0}function Dk(n,e){return typeof n=="boolean"?n:e}function RJ(n,e){return typeof n=="string"?n:e}function Bdt(n){const e={};for(const t of n)e[t]=!0;return e}function AJ(n,e=!1){e&&(n=n.map(function(i){return i.toLowerCase()}));const t=Bdt(n);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function g9(n,e,t){e=e.replace(/@@/g,"");let i=0,r;do r=!1,e=e.replace(/@(\w+)/g,function(o,a){r=!0;let l="";if(typeof n[a]=="string")l=n[a];else if(n[a]&&n[a]instanceof RegExp)l=n[a].source;else throw n[a]===void 0?ni(n,"language definition does not contain attribute '"+a+"', used at: "+e):ni(n,"attribute reference '"+a+"' must be a string, used at: "+e);return Tg(l)?"":"(?:"+l+")"}),i++;while(r&&i<5);e=e.replace(/\x01/g,"@");const s=(n.ignoreCase?"i":"")+(n.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(wot(n,e,c),s)),l)}return new RegExp(e,s)}function Hdt(n,e,t,i){if(i<0)return n;if(i<e.length)return e[i];if(i>=100){i=i-100;const r=t.split(".");if(r.unshift(t),i<r.length)return r[i]}return null}function Vdt(n,e,t,i){let r=-1,s=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(r=parseInt(o[3]),o[2]&&(r=r+100)),s=o[4]);let a="~",l=s;!s||s.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const u=AJ(l.split("|"),n.ignoreCase);c=function(d){return a==="~"?u(d):!u(d)}}else if(a==="@"||a==="!@"){const u=n[l];if(!u)throw ni(n,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!Fdt(function(h){return typeof h=="string"},u))throw ni(n,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const d=AJ(u,n.ignoreCase);c=function(h){return a==="@"?d(h):!d(h)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const u=g9(n,"^"+l+"$",!1);c=function(d){return a==="~"?u.test(d):!u.test(d)}}else c=function(u,d,h,f){return g9(n,"^"+Mh(n,l,d,h,f)+"$",!1).test(u)};else if(l.indexOf("$")<0){const u=Id(n,l);c=function(d){return a==="=="?d===u:d!==u}}else{const u=Id(n,l);c=function(d,h,f,g,p){const v=Mh(n,u,h,f,g);return a==="=="?d===v:d!==v}}return r===-1?{name:t,value:i,test:function(u,d,h,f){return c(u,u,d,h,f)}}:{name:t,value:i,test:function(u,d,h,f){const g=Hdt(u,d,h,r);return c(g||"",u,d,h,f)}}}function p9(n,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw ni(n,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw ni(n,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw ni(n,"the next state must be a string value in rule: "+e);{let r=t.next;if(!/^(@pop|@push|@popall)$/.test(r)&&(r[0]==="@"&&(r=r.substr(1)),r.indexOf("$")<0&&!Sot(n,Mh(n,r,"",[],""))))throw ni(n,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=r}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,n.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let r=0,s=t.length;r<s;r++)i[r]=p9(n,e,t[r]);return{group:i}}else if(t.cases){const i=[];for(const s in t.cases)if(t.cases.hasOwnProperty(s)){const o=p9(n,e,t.cases[s]);s==="@default"||s==="@"||s===""?i.push({test:void 0,value:o,name:s}):s==="@eos"?i.push({test:function(a,l,c,u){return u},value:o,name:s}):i.push(Vdt(n,e,s,o))}const r=n.defaultToken;return{test:function(s,o,a,l){for(const c of i)if(!c.test||c.test(s,o,a,l))return c.value;return r}}}else throw ni(n,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class zdt{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw ni(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=g9(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)}setAction(e,t){this.action=p9(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function Mpe(n,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:n,includeLF:Dk(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:Dk(e.ignoreCase,!1),unicode:Dk(e.unicode,!1),tokenPostfix:RJ(e.tokenPostfix,"."+n),defaultToken:RJ(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},i=e;i.languageId=n,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function r(o,a,l){for(const c of l){let u=c.include;if(u){if(typeof u!="string")throw ni(t,"an 'include' attribute must be a string at: "+o);if(u[0]==="@"&&(u=u.substr(1)),!e.tokenizer[u])throw ni(t,"include target '"+u+"' is not defined at: "+o);r(o+"."+u,a,e.tokenizer[u])}else{const d=new zdt(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(d.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")d.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const h=c[1];h.next=c[2],d.setAction(i,h)}else throw ni(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else d.setAction(i,c[1]);else{if(!c.regex)throw ni(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(d.name=c.name),c.matchOnlyAtStart&&(d.matchOnlyAtLineStart=Dk(c.matchOnlyAtLineStart,!1)),d.setRegex(i,c.regex),d.setAction(i,c.action)}a.push(d)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw ni(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,r("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw ni(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const s=[];for(const o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw ni(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:Id(t,a.open),close:Id(t,a.close)});else throw ni(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}function Wdt(n){D1.registerLanguage(n)}function $dt(){let n=[];return n=n.concat(D1.getLanguages()),n}function Udt(n){return yt.get(br).languageIdCodec.encodeLanguageId(n)}function jdt(n,e){return yt.withServices(()=>{const i=yt.get(br).onDidRequestRichLanguageFeatures(r=>{r===n&&(i.dispose(),e())});return i})}function Kdt(n,e){return yt.withServices(()=>{const i=yt.get(br).onDidRequestBasicLanguageFeatures(r=>{r===n&&(i.dispose(),e())});return i})}function qdt(n,e){if(!yt.get(br).isRegisteredLanguageId(n))throw new Error(`Cannot set configuration for unknown language ${n}`);return yt.get(Eu).register(n,e,100)}class Gdt{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return Aw.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const r=this._actual.tokenizeEncoded(e,i);return new DD(r.tokens,r.endState)}}class Aw{constructor(e,t,i,r){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=r}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let r=0;for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=a.startIndex;s===0?l=0:l<r&&(l=r),i[s]=new Yy(l,a.scopes,t),r=l}return i}static adaptTokenize(e,t,i,r){const s=t.tokenize(i,r),o=Aw._toClassicTokens(s.tokens,e);let a;return s.endState.equals(r)?a=r:a=s.endState,new vH(o,a)}tokenize(e,t,i){return Aw.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),r=this._standaloneThemeService.getColorTheme().tokenTheme,s=[];let o=0,a=0;for(let c=0,u=t.length;c<u;c++){const d=t[c],h=r.match(i,d.scopes)|1024;if(o>0&&s[o-1]===h)continue;let f=d.startIndex;c===0?f=0:f<a&&(f=a),s[o++]=f,s[o++]=h,a=f}const l=new Uint32Array(o);for(let c=0;c<o;c++)l[c]=s[c];return l}tokenizeEncoded(e,t,i){const r=this._actual.tokenize(e,i),s=this._toBinaryTokens(this._languageService.languageIdCodec,r.tokens);let o;return r.endState.equals(i)?o=i:o=r.endState,new DD(s,o)}}function Ydt(n){return typeof n.getInitialState=="function"}function Zdt(n){return"tokenizeEncoded"in n}function Rpe(n){return n&&typeof n.then=="function"}function Xdt(n){const e=yt.get(Tl);if(n){const t=[null];for(let i=1,r=n.length;i<r;i++)t[i]=De.fromHex(n[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function Ape(n,e){return Zdt(e)?new Gdt(n,e):new Aw(n,e,yt.get(br),yt.get(Tl))}function Oz(n,e){const t=new aUe(async()=>{const i=await Promise.resolve(e.create());return i?Ydt(i)?Ape(n,i):new Ew(yt.get(br),yt.get(Tl),n,Mpe(n,i),yt.get(Ti)):null});return Hi.registerFactory(n,t)}function Qdt(n,e){if(!yt.get(br).isRegisteredLanguageId(n))throw new Error(`Cannot set tokens provider for unknown language ${n}`);return Rpe(e)?Oz(n,{create:()=>e}):Hi.register(n,Ape(n,e))}function Jdt(n,e){const t=i=>new Ew(yt.get(br),yt.get(Tl),n,Mpe(n,i),yt.get(Ti));return Rpe(e)?Oz(n,{create:()=>e}):Hi.register(n,t(e))}function eht(n,e){return yt.get(Yn).referenceProvider.register(n,e)}function tht(n,e){return yt.get(Yn).renameProvider.register(n,e)}function nht(n,e){return yt.get(Yn).newSymbolNamesProvider.register(n,e)}function iht(n,e){return yt.get(Yn).signatureHelpProvider.register(n,e)}function rht(n,e){return yt.get(Yn).hoverProvider.register(n,{provideHover:async(i,r,s,o)=>{const a=i.getWordAtPosition(r);return Promise.resolve(e.provideHover(i,r,s,o)).then(l=>{if(l)return!l.range&&a&&(l.range=new te(r.lineNumber,a.startColumn,r.lineNumber,a.endColumn)),l.range||(l.range=new te(r.lineNumber,r.column,r.lineNumber,r.column)),l})}})}function sht(n,e){return yt.get(Yn).documentSymbolProvider.register(n,e)}function oht(n,e){return yt.get(Yn).documentHighlightProvider.register(n,e)}function aht(n,e){return yt.get(Yn).linkedEditingRangeProvider.register(n,e)}function lht(n,e){return yt.get(Yn).definitionProvider.register(n,e)}function cht(n,e){return yt.get(Yn).implementationProvider.register(n,e)}function uht(n,e){return yt.get(Yn).typeDefinitionProvider.register(n,e)}function dht(n,e){return yt.get(Yn).codeLensProvider.register(n,e)}function hht(n,e,t){return yt.get(Yn).codeActionProvider.register(n,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(r,s,o,a)=>{const c=yt.get(Em).read({resource:r.uri}).filter(u=>te.areIntersectingOrTouching(u,s));return e.provideCodeActions(r,s,{markers:c,only:o.only,trigger:o.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function fht(n,e){return yt.get(Yn).documentFormattingEditProvider.register(n,e)}function ght(n,e){return yt.get(Yn).documentRangeFormattingEditProvider.register(n,e)}function pht(n,e){return yt.get(Yn).onTypeFormattingEditProvider.register(n,e)}function mht(n,e){return yt.get(Yn).linkProvider.register(n,e)}function vht(n,e){return yt.get(Yn).completionProvider.register(n,e)}function bht(n,e){return yt.get(Yn).colorProvider.register(n,e)}function _ht(n,e){return yt.get(Yn).foldingRangeProvider.register(n,e)}function Cht(n,e){return yt.get(Yn).declarationProvider.register(n,e)}function yht(n,e){return yt.get(Yn).selectionRangeProvider.register(n,e)}function wht(n,e){return yt.get(Yn).documentSemanticTokensProvider.register(n,e)}function Sht(n,e){return yt.get(Yn).documentRangeSemanticTokensProvider.register(n,e)}function xht(n,e){return yt.get(Yn).inlineCompletionsProvider.register(n,e)}function kht(n,e){return yt.get(Yn).inlineEditProvider.register(n,e)}function Eht(n,e){return yt.get(Yn).inlayHintsProvider.register(n,e)}function Lht(){return{register:Wdt,getLanguages:$dt,onLanguage:jdt,onLanguageEncountered:Kdt,getEncodedLanguageId:Udt,setLanguageConfiguration:qdt,setColorMap:Xdt,registerTokensProviderFactory:Oz,setTokensProvider:Qdt,setMonarchTokensProvider:Jdt,registerReferenceProvider:eht,registerRenameProvider:tht,registerNewSymbolNameProvider:nht,registerCompletionItemProvider:vht,registerSignatureHelpProvider:iht,registerHoverProvider:rht,registerDocumentSymbolProvider:sht,registerDocumentHighlightProvider:oht,registerLinkedEditingRangeProvider:aht,registerDefinitionProvider:lht,registerImplementationProvider:cht,registerTypeDefinitionProvider:uht,registerCodeLensProvider:dht,registerCodeActionProvider:hht,registerDocumentFormattingEditProvider:fht,registerDocumentRangeFormattingEditProvider:ght,registerOnTypeFormattingEditProvider:pht,registerLinkProvider:mht,registerColorProvider:bht,registerFoldingRangeProvider:_ht,registerDeclarationProvider:Cht,registerSelectionRangeProvider:yht,registerDocumentSemanticTokensProvider:wht,registerDocumentRangeSemanticTokensProvider:Sht,registerInlineCompletionsProvider:xht,registerInlineEditProvider:kht,registerInlayHintsProvider:Eht,DocumentHighlightKind:i5,CompletionItemKind:XP,CompletionItemTag:QP,CompletionItemInsertTextRule:ZP,SymbolKind:A5,SymbolTag:O5,IndentAction:u5,CompletionTriggerKind:JP,SignatureHelpTriggerKind:R5,InlayHintKind:h5,InlineCompletionTriggerKind:f5,InlineEditTriggerKind:g5,CodeActionTriggerType:YP,NewSymbolNameTag:y5,NewSymbolNameTriggerKind:w5,PartialAcceptTriggerKind:k5,HoverVerbosityAction:c5,FoldingRangeKind:KP,SelectedSuggestionInfo:oUe}}const Ope=cn("IEditorCancelService"),Ppe=new ht("cancellableOperation",!1,S("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));yn(Ope,class{constructor(){this._tokens=new WeakMap}add(n,e){let t=this._tokens.get(n);t||(t=n.invokeWithinContext(r=>{const s=Ppe.bindTo(r.get(In)),o=new Eo;return{key:s,tokens:o}}),this._tokens.set(n,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(n){const e=this._tokens.get(n);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);At(new class extends tm{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Ppe})}runEditorCommand(n,e){n.get(Ope).cancel(e)}});class OJ{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class Nht{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(OJ.toKey(e))}has(e){return this._set.has(OJ.toKey(e))}}function Tht(n,e,t){const i=[],r=new Nht,s=n.ordered(t);for(const a of s)i.push(a),a.extensionId&&r.add(a.extensionId);const o=e.ordered(t);for(const a of o){if(a.extensionId){if(r.has(a.extensionId))continue;r.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,u){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,u)}})}return i}const ry=class ry{static setFormatterSelector(e){return{dispose:ry._selectors.unshift(e)}}static async select(e,t,i,r){if(e.length===0)return;const s=Sn.first(ry._selectors);if(s)return await s(e,t,i,r)}};ry._selectors=new Eo;let m9=ry;async function Iht(n,e,t,i,r,s){const o=e.documentRangeFormattingEditProvider.ordered(t);for(const a of o){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,r,s)).catch(dH);if(LD(l))return await n.computeMoreMinimalEdits(t.uri,l)}}async function Dht(n,e,t,i,r){const s=Tht(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const o of s){const a=await Promise.resolve(o.provideDocumentFormattingEdits(t,i,r)).catch(dH);if(LD(a))return await n.computeMoreMinimalEdits(t.uri,a)}}function Mht(n,e,t,i,r,s,o){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(r)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,r,s,o)).catch(dH).then(l=>n.computeMoreMinimalEdits(t.uri,l))}po.registerCommand("_executeFormatRangeProvider",async function(n,...e){const[t,i,r]=e;hf(Ut.isUri(t)),hf(te.isIRange(i));const s=n.get(PD),o=n.get(NS),a=n.get(Yn),l=await s.createModelReference(t);try{return Iht(o,a,l.object.textEditorModel,te.lift(i),r,wl.None)}finally{l.dispose()}});po.registerCommand("_executeFormatDocumentProvider",async function(n,...e){const[t,i]=e;hf(Ut.isUri(t));const r=n.get(PD),s=n.get(NS),o=n.get(Yn),a=await r.createModelReference(t);try{return Dht(s,o,a.object.textEditorModel,i,wl.None)}finally{a.dispose()}});po.registerCommand("_executeFormatOnTypeProvider",async function(n,...e){const[t,i,r,s]=e;hf(Ut.isUri(t)),hf(de.isIPosition(i)),hf(typeof r=="string");const o=n.get(PD),a=n.get(NS),l=n.get(Yn),c=await o.createModelReference(t);try{return Mht(a,l,c.object.textEditorModel,de.lift(i),r,s,wl.None)}finally{c.dispose()}});gm.wrappingIndent.defaultValue=0;gm.glyphMargin.defaultValue=!1;gm.autoIndent.defaultValue=3;gm.overviewRulerLanes.defaultValue=2;m9.setFormatterSelector((n,e,t)=>Promise.resolve(n[0]));const Us=ede();Us.editor=Pdt();Us.languages=Lht();Us.CancellationTokenSource;Us.Emitter;Us.KeyCode;Us.KeyMod;Us.Position;Us.Range;Us.Selection;Us.SelectionDirection;Us.MarkerSeverity;Us.MarkerTag;Us.Uri;Us.Token;const Rht=Us.editor;Us.languages;const KA=globalThis.MonacoEnvironment;(KA!=null&&KA.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=Us);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const Aht=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:21.67,height:21.67,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"source-code_svg__a"},m.createElement("rect",{width:11.67,height:11.67,x:5,y:5,rx:0}))),m.createElement("g",{clipPath:"url(#source-code_svg__a)"},m.createElement("path",{fill:"#5C6270",d:"M5 6.111C5 5.498 5.498 5 6.111 5h3.335c.165 0 .321.073.427.2l1.221 1.467h4.464c.614 0 1.111.498 1.111 1.112v7.224c0 .614-.497 1.111-1.11 1.111H6.11A1.11 1.11 0 0 1 5 15.004zm4.186 0H6.11v8.893h9.448V7.779h-4.724a.56.56 0 0 1-.427-.2z"}),m.createElement("path",{fill:"#5C6270",d:"M11.553 9.608a.556.556 0 0 1 .786 0l1.39 1.39a.556.556 0 0 1 0 .785l-1.39 1.39a.556.556 0 0 1-.786-.786l.997-.996-.997-.997a.556.556 0 0 1 0-.786m-1.436 0a.556.556 0 0 1 0 .786l-.997.997.997.996a.556.556 0 1 1-.786.786l-1.39-1.39a.556.556 0 0 1 0-.785l1.39-1.39a.556.556 0 0 1 .786 0"}))),Oht=m.memo(Aht);function Pht(){const n=ln(),e=jt(),[t,i]=m.useState(!1),[r,s]=m.useState(null),o=m.useRef(null),a=()=>i(!0),l=u=>{i(!1)},c=u=>{i(!1)};return m.useEffect(()=>(o.current&&(console.log(o.current),s(u=>u||Rht.create(o.current,{value:["function x() {",'	console.log("Hello world!");',"}"].join(`
`),language:"typescript"}))),()=>r==null?void 0:r.dispose()),[t,o.current]),P.jsxs(P.Fragment,{children:[P.jsx(dn,{tooltip:e.code,icon:P.jsx(Oht,{}),disabled:!(n!=null&&n.isEditable),onClick:a}),P.jsx(xu,{width:"60vw",title:"HTML",open:t,onOk:l,onCancel:c,children:P.jsx("div",{style:{width:"100%",height:300},ref:o})})]})}const Fht=({editor:n})=>{if(!n||!n.isEditable)return!1;const{state:{doc:e,selection:{empty:t,from:i,to:r}}}=n,o=!e.textBetween(i,r).length;return!(t||o)},Bht=[uce.name,Hce.name,Fce.name,Bce.name,Vce.name,dle.name],Hht=()=>{const n=m.useRef(null),e=ln(),t=jt(),i=m.useMemo(()=>({fn(o){return{onCreate(){n.current=o},onDestroy(){n.current=null}}}}),[]),r=m.useCallback(({view:o,from:a})=>{var u;if(!o||!e||!a)return!1;const l=o.domAtPos(a).node;if((u=l.querySelector)!=null&&u.call(l,".search-result")||Bht.some(d=>e.isActive(d)))return!1;const{selection:c}=e.state;return c instanceof Li||c.jsonID==="cell"?!1:Fht({editor:e})},[e]),s=m.useCallback(o=>{e==null||e.chain().focus()[o]().run()},[e]);return{editor:e,locale:t,tippyPlugin:i,shouldShow:r,executeCommand:s}},qA=za.Item,Vht=()=>{const{editor:n,locale:e,tippyPlugin:t,shouldShow:i,executeCommand:r}=Hht();return n?P.jsx(vD,{editor:n,shouldShow:i,tippyOptions:{duration:200,placement:"bottom",animation:"shift-away",offset:[0,4],zIndex:3,plugins:[t]},children:P.jsx("div",{className:`${qe}-text-bubble-menu`,children:P.jsxs(db,{children:[P.jsx(Yce,{}),P.jsx(Xce,{}),P.jsx(Qce,{}),P.jsx(Jce,{}),P.jsx(eue,{}),P.jsx(due,{}),P.jsx(hue,{}),P.jsx(pue,{}),P.jsx(Cue,{}),P.jsxs(za,{tooltip:e.more,activeIcon:P.jsx(G9e,{}),disabled:!1,arrow:!1,className:`${qe}-menu__more`,children:[P.jsx(qA,{icon:P.jsx(fue,{}),selected:n.isActive("code"),disabled:!n.isEditable||!n.can().toggleCode(),onClick:()=>r("toggleCode"),children:e.code}),P.jsx(qA,{icon:P.jsx(tue,{}),selected:n.isActive("subscript"),disabled:!n.isEditable||!n.can().toggleSubscript(),onClick:()=>r("toggleSubscript"),children:e.subscript}),P.jsx(qA,{icon:P.jsx(nue,{}),selected:n.isActive("superscript"),disabled:!n.isEditable||!n.can().toggleSuperscript(),onClick:()=>r("toggleSuperscript"),children:e.superscript})]})]})})}):null},zht=n=>{const e=ln(),t=jt(),[i,r]=m.useState(dp),s=e!=null&&e.isActive("tableCell")?e.getAttributes("tableCell").bgColor:void 0,o=m.useCallback(l=>{r(l),e==null||e.chain().setCellAttribute("bgColor",l).run()},[e]),a=m.useCallback(()=>{r(dp),e==null||e.chain().setCellAttribute("bgColor",null).run()},[e]);return m.useEffect(()=>{s&&r(s)},[s]),{editor:e,locale:t,color:i,colorPreset:n,handleColorChange:o,handleColorReset:a}};function Wht({colorPreset:n=mle}){const{editor:e,locale:t,color:i,handleColorChange:r,handleColorReset:s}=zht(n);return P.jsx(fm,{tooltip:t.cellColor,icon:P.jsx(Sce,{style:{color:i}}),disabled:!(e!=null&&e.isEditable),children:P.jsx(tH,{value:i,colorPreset:n,onChange:r,onReset:s})})}const $ht=n=>{const{selection:e}=n.state;return e instanceof Li||e.jsonID==="cell"},Uht=()=>{const n=jt(),e=ln(),t=m.useCallback(()=>e!=null&&e.isEditable&&e?$ht(e):!1,[e]),i=m.useCallback(o=>{e==null||e.chain().focus()[o]().run()},[e]),r=m.useCallback(()=>{e==null||e.chain().focus().mergeOrSplit().run()},[e]),s=(e==null?void 0:e.can().splitCell())??!1;return{editor:e,locale:n,shouldShow:t,executeCommand:i,mergeOrSplit:r,canSplitCell:s}},jht=()=>{const{editor:n,locale:e,shouldShow:t,executeCommand:i,mergeOrSplit:r,canSplitCell:s}=Uht();return n?P.jsx(vD,{editor:n,shouldShow:t,tippyOptions:{duration:200,placement:"top",animation:"shift-away",offset:[0,16],zIndex:2},children:P.jsxs(db,{className:`${qe}-table-bubble-menu`,children:[P.jsx(dn,{tooltip:s?e.splitCell:e.mergeCell,icon:P.jsx(UFe,{}),selected:s,disabled:!1,onClick:r}),P.jsx(Wht,{}),P.jsx(dn,{tooltip:e.insertColumnBefore,icon:P.jsx(_Fe,{}),onClick:()=>i("addColumnBefore")}),P.jsx(dn,{tooltip:e.insertColumnAfter,icon:P.jsx(wFe,{}),onClick:()=>i("addColumnAfter")}),P.jsx(dn,{tooltip:e.insertRowBefore,icon:P.jsx(Tce,{}),onClick:()=>i("addRowBefore")}),P.jsx(dn,{tooltip:e.insertRowAfter,icon:P.jsx(mFe,{}),onClick:()=>i("addRowAfter")}),P.jsx(gd,{}),P.jsx(dn,{tooltip:e.deleteRow,icon:P.jsx(Ece,{}),onClick:()=>i("deleteRow")}),P.jsx(dn,{tooltip:e.deleteColumn,icon:P.jsx(H9e,{}),onClick:()=>i("deleteColumn")}),P.jsx(gd,{}),P.jsx(dn,{tooltip:e.deleteTable,icon:P.jsx(sS,{}),onClick:()=>i("deleteTable")})]})}):null},Kht=n=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",...n},m.createElement("defs",null,m.createElement("clipPath",{id:"table-row_svg__a"},m.createElement("rect",{width:14,height:14,rx:0}))),m.createElement("g",{clipPath:"url(#table-row_svg__a)"},m.createElement("rect",{width:10.527,height:2.058,x:1.711,y:1.856,fill:"#5C6270",rx:0}),m.createElement("path",{fill:"#5C6270",fillRule:"evenodd",d:"M1 4V1.599q0-.06.01-.117t.032-.112.052-.104q.03-.049.07-.09.038-.042.083-.075t.097-.055.104-.035T1.557 1h10.886q.055 0 .109.011.053.012.104.035.05.022.096.055t.085.074.07.091q.03.05.05.104.022.054.032.112t.011.117V12.4q0 .06-.01.117t-.032.112-.052.104q-.03.049-.07.09-.038.042-.084.075-.045.033-.096.055-.05.023-.104.034t-.109.012H1.557q-.055 0-.109-.012-.054-.011-.104-.034-.05-.022-.097-.055-.045-.033-.084-.074-.039-.042-.07-.091-.03-.05-.05-.104-.022-.054-.032-.112T1 12.401zm1.114-1.803h9.772v1.204H2.114zm0 2.401h2.515v3.003H2.114zm0 4.2h2.515v3.005H2.114zm3.629 3.005V8.799h2.514v3.004zm3.628 0V8.799h2.515v3.004zM11.886 7.6H9.371V4.598h2.515zM8.257 4.598v3.003H5.743V4.598z"}))),qht=m.memo(Kht),Ght=n=>{const{content:e,appendTo:t,x:i,y:r}=n,s=document.createElement("div"),o=document.body.scrollTop||document.documentElement.scrollTop;return s.style.position="absolute",s.style.left=`${i}px`,s.style.top=`${r+o}px`,document.body.appendChild(s),Uf(s,{duration:200,content:e,appendTo:t,trigger:"manual",interactive:!0,animation:"shift-away",placement:"bottom-start",showOnCreate:!0,offset:[20,-24],zIndex:2,onHidden(a){a.destroy(),document.body.removeChild(s)}})},Yht=(n,e,t)=>{const i=m.useRef(),r=m.useCallback(o=>{!(t!=null&&t.current)||!(e!=null&&e(o))||(o.preventDefault(),i.current=Ght({content:t.current,appendTo:()=>n==null?void 0:n.options.element.parentElement,x:o.clientX,y:o.clientY}))},[n,e,t]),s=m.useCallback(()=>{var o;(o=i.current)==null||o.destroy()},[]);return m.useEffect(()=>(document.addEventListener("contextmenu",r),()=>document.removeEventListener("contextmenu",r)),[r]),{closeTippy:s}},Zht=m.forwardRef(({children:n,editor:e,shouldShow:t},i)=>{const r=m.useRef(null),{closeTippy:s}=Yht(e,t,r);return m.useImperativeHandle(i,()=>({close:s})),m.useEffect(()=>{r.current&&r.current.remove()},[]),P.jsx("div",{ref:r,className:`${qe}-context-bubble`,children:n})}),Xht=(n,e=0)=>{for(let t=0;t<e;t++)n()},PJ=(n,e)=>{const t=e.map.cellsInRect({left:0,top:0,right:n==="row"?e.map.width:1,bottom:n==="column"?e.map.height:1});for(let i=0;i<t.length;i++){const r=e.table.nodeAt(t[i]);if(r&&r.type.name!=="tableHeader")return!1}return!0},Qht=(n,e)=>{let t=!1;const{clientX:i,clientY:r}=e,{view:s}=n,o=s.posAtCoords({left:i,top:r});if(o){const a=s.state.doc.resolve(o.pos);for(let{depth:l}=a;l>0;l--)if(a.node(l).type.name==="table"){t=!0;break}}return t},Mk="{num}",Rk=({value:n,onChange:e})=>P.jsx(RNe,{size:"small",min:1,max:10,controls:!1,value:n,style:{width:36,height:24,margin:"0 4px"},onClick:t=>t.stopPropagation(),onChange:t=>e(t)}),Jht=()=>{const[n,e]=m.useState({rowBefore:1,rowAfter:1,columnBefore:1,columnAfter:1}),[t,i]=m.useState({rowEnabled:!1,columnEnabled:!1}),r=m.useRef(null),s=jt(),o=ln(),a=m.useCallback((u,d)=>{e(h=>({...h,[u]:d}))},[]),l=m.useCallback(u=>{if(!o)return!1;try{const d=xc(o.state),h=PJ("row",d),f=PJ("column",d);return i({rowEnabled:h,columnEnabled:f}),Qht(o,u)&&o.isEditable}catch{return!1}},[o]),c=m.useCallback((u,d)=>{var f;if(!o)return;const h=()=>o.chain().focus()[u]().run();d!==void 0?Xht(h,d):h(),u==="deleteTable"&&((f=r.current)==null||f.close())},[o]);return{editor:o,locale:s,counts:n,headerState:t,contextBubbleRef:r,updateCount:a,shouldShow:l,executeTableCommand:c}},eft=()=>{const{editor:n,locale:e,counts:t,headerState:i,contextBubbleRef:r,updateCount:s,shouldShow:o,executeTableCommand:a}=Jht(),l=e.insertAnyColumnBefore.split(Mk),c=e.insertAnyColumnAfter.split(Mk),u=e.insertAnyRowBefore.split(Mk),d=e.insertAnyRowAfter.split(Mk);return P.jsx(Zht,{ref:r,editor:n,shouldShow:o,children:P.jsxs(Ar,{selectable:!1,mode:"vertical",children:[P.jsxs(Ar.SubMenu,{title:e.insertRowAndColumn,icon:P.jsx(Tce,{}),children:[P.jsxs(Ar.Item,{onClick:()=>a("addRowBefore",t.rowBefore),children:[u[0],P.jsx(Rk,{value:t.rowBefore,onChange:h=>s("rowBefore",h)}),u[1]]}),P.jsxs(Ar.Item,{onClick:()=>a("addRowAfter",t.rowAfter),children:[d[0],P.jsx(Rk,{value:t.rowAfter,onChange:h=>s("rowAfter",h)}),d[1]]}),P.jsxs(Ar.Item,{onClick:()=>a("addColumnBefore",t.columnBefore),children:[l[0],P.jsx(Rk,{value:t.columnBefore,onChange:h=>s("columnBefore",h)}),l[1]]}),P.jsxs(Ar.Item,{onClick:()=>a("addColumnAfter",t.columnAfter),children:[c[0],P.jsx(Rk,{value:t.columnAfter,onChange:h=>s("columnAfter",h)}),c[1]]})]},"insertRowAndColumn"),P.jsxs(Ar.SubMenu,{title:e.deleteRowAndColumn,icon:P.jsx(Ece,{}),children:[P.jsx(Ar.Item,{onClick:()=>a("deleteRow"),children:e.deleteCurrentRow}),P.jsx(Ar.Item,{onClick:()=>a("deleteColumn"),children:e.deleteCurrentColumn})]},"deleteRowAndColumn"),P.jsxs(Ar.SubMenu,{title:e.toggleTableHeader,icon:P.jsx(qht,{}),children:[P.jsx(Ar.Item,{onClick:()=>a("toggleHeaderRow"),children:i.rowEnabled?e.cancelTableHeaderRow:e.setTableHeaderRow}),P.jsx(Ar.Item,{onClick:()=>a("toggleHeaderColumn"),children:i.columnEnabled?e.cancelTableHeaderColumn:e.setTableHeaderColumn})]},"toggleTableHeader"),P.jsx(Ar.Item,{icon:P.jsx(sS,{}),onClick:()=>a("deleteTable"),children:e.deleteTable})]})})},tft=n=>{const{readonly:e=!1,editable:t=!0,editorDependencies:i=[],extensions:r=[],placeholder:s="",content:o}=n,a=zce({placeholder:s||"Please enter content"}),l=$ae({content:o,extensions:cce(a,r)},i);return m.useEffect(()=>{l==null||l.setEditable(e?!1:t)},[e,t,l]),l},nft=m.forwardRef((n,e)=>{const{readonly:t=!1,editable:i=!0,useTextMenu:r=!1,className:s,style:o,renderMenus:a,renderFloatMenus:l}=n,c=tft(n),u=l==null?void 0:l(c);m.useImperativeHandle(e,()=>({editor:c,getJSON:()=>(c==null?void 0:c.getJSON())??null,getHTML:()=>(c==null?void 0:c.getHTML())??null,getText:()=>(c==null?void 0:c.getText())??null,setContent:h=>c==null?void 0:c.commands.setContent(h),clearContent:()=>c==null?void 0:c.commands.clearContent(),setEditable:h=>c==null?void 0:c.setEditable(h)}));const d=i&&(r||m.isValidElement(u));return P.jsx($B.Provider,{value:c,children:P.jsxs("div",{style:o,className:Ee(s,{[`${qe}`]:!0,[`${qe}-disabled`]:!i}),children:[!t&&P.jsx(cHe,{children:a==null?void 0:a(c)}),P.jsx(zae,{className:`${qe}-content`,editor:c}),P.jsx(fHe,{}),P.jsx(vHe,{}),P.jsx(jht,{}),P.jsx(eft,{}),d&&P.jsx(Vht,{}),u]})})}),ift=m.forwardRef((n,e)=>{const{editorDependencies:t=[],extensions:i=[],editable:r=!0,className:s,style:o,...a}=n,l=zce({placeholder:""}),c=$ae({extensions:cce(l,i),...a},t);m.useImperativeHandle(e,()=>({editor:c,getJSON:()=>(c==null?void 0:c.getJSON())??null,getHTML:()=>(c==null?void 0:c.getHTML())??null,getText:()=>(c==null?void 0:c.getText())??null,setContent:d=>{c==null||c.commands.setContent(d),c==null||c.setEditable(!1)},clearContent:()=>c==null?void 0:c.commands.clearContent()})),m.useEffect(()=>{!c||c.isDestroyed||c.isEditable===r||c.setEditable(r)},[r,c]);const u=m.useRef(n.content);return m.useEffect(()=>{!c||c.isDestroyed||n.content===void 0||n.content===u.current||n.content!==void 0&&(c.commands.setContent(n.content),c==null||c.setEditable(!1))},[n.content,c]),m.useEffect(()=>{n.content!==void 0&&(c.commands.setContent(n.content),c==null||c.setEditable(!1));const d=document.querySelector(`#${qe}-render > [translate="no"]`);d&&d.removeAttribute("translate")},[]),P.jsx($B.Provider,{value:c,children:P.jsx("div",{style:o,className:Ee(s,{[`${qe}`]:!0,[`${qe}-readonly`]:!0}),children:P.jsx(zae,{id:`${qe}-render`,className:`${qe}-content`,editor:c})})})}),rft=new zi("fileHandler"),sft=pi.create({name:"fileHandler",addOptions(){return{onPaste:void 0,onDrop:void 0}},addProseMirrorPlugins(){return[new Ni({key:rft,props:{handlePaste:(n,e)=>{const{onPaste:t}=this.options;if(!t||typeof t!="function")return!1;const{clipboardData:i}=e;if(!i||i.files.length===0)return!1;const r=Array.from(i.files),s=i.getData("text/html");return r.length>0?(e.preventDefault(),e.stopPropagation(),t(this.editor,r,this.editor.state.tr.selection.from,s)):!(s.length>0)},handleDrop:(n,e)=>{const{onDrop:t}=this.options;if(!t||typeof t!="function")return!1;const i=e.dataTransfer;if(!i||i.files.length===0)return!1;const r=n.posAtCoords({left:e.clientX,top:e.clientY}),s=Array.from(i.files);return s.length>0?(e.preventDefault(),e.stopPropagation(),t(this.editor,s,r?r.pos:0),!0):!1}}})]}}),oft=({x:n,y:e,direction:t,editor:i})=>{let r=null,s=null,o=null,a=n;for(;s===null&&a<window.innerWidth&&a>0;){const l=document.elementsFromPoint(a,e),c=l.findIndex(d=>d.classList.contains("ProseMirror")),u=l.slice(0,c);if(u.length>0){const d=u[0];if(r=d,o=i.view.posAtDOM(d,0),o>=0){s=i.state.doc.nodeAt(Math.max(o-1,0)),s&&s.isText&&(s=i.state.doc.nodeAt(Math.max(o-1,0))),s||(s=i.state.doc.nodeAt(Math.max(o,0)));break}}t==="left"?a-=1:a+=1}return{resultElement:r,resultNode:s,pos:o!==null?o:null}};function aft(n){var e;(e=n.parentNode)==null||e.removeChild(n)}const FJ=(n,e)=>{const t=n.resolve(e),{depth:i}=t;return i===0?e:t.pos-t.parentOffset-1},BJ=(n,e)=>{const t=n.nodeAt(e),i=n.resolve(e);let{depth:r}=i,s=t;for(;r>0;){const o=i.node(r);r-=1,r===0&&(s=o)}return s},HJ=(n,e)=>{let t=e;for(;t&&t.parentNode&&t.parentNode!==n.dom;)t=t.parentNode;return t},zE=new zi("floatMenu"),Fpe=({pluginKey:n=zE,element:e,editor:t,tippyOptions:i={},onNodeChange:r})=>{const s=document.createElement("div");let o=null,a=!1,l=null,c=-1,u=null;return new Ni({key:typeof n=="string"?new zi(n):n,state:{init:()=>({locked:!1}),apply(d,h){const f=d.getMeta("lockFloatMenu"),g=d.getMeta("hideFloatMenu");if(f!==void 0&&(a=f),g&&o)return o.hide(),a=!1,l=null,c=-1,r==null||r({editor:t,node:null,pos:-1}),h;if(d.docChanged&&c!==-1&&e&&o){const p=d.mapping.map(c);p!==c&&(c=p,o=null)}return h}},view:d=>{var h;return e.style.pointerEvents="auto",(h=d.dom.parentElement)==null||h.appendChild(s),s.appendChild(e),s.style.pointerEvents="none",s.style.position="absolute",s.style.top="0",s.style.left="0",u=Uf(d.dom,{getReferenceClientRect:null,interactive:!0,trigger:"manual",placement:"left-start",hideOnClick:!1,duration:100,zIndex:2,popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",options:{rootBoundary:"document",mainAxis:!1}}]},...i,appendTo:s,content:e}),{update(f,g){if(!e||!u||f.state.doc.eq(g.doc)||c===-1)return;let p=f.nodeDOM(c);if(p=HJ(f,p),p===f.dom||(p==null?void 0:p.nodeType)!==1)return;const v=f.posAtDOM(p,0),b=BJ(f.state.doc,v),_=FJ(f.state.doc,v);l=b,c=_,r==null||r({editor:t,node:l,pos:c}),u.setProps({getReferenceClientRect:()=>p.getBoundingClientRect()})},destroy(){u==null||u.destroy(),aft(s)}}},props:{handleDOMEvents:{mouseleave:(d,h)=>(!a&&h.target&&!s.contains(h.relatedTarget)&&(u==null||u.hide(),l=null,c=-1,r==null||r({editor:t,node:null,pos:-1})),!1),mousemove(d,h){if(!e||!u||a)return!1;const{resultElement:f}=oft({x:h.clientX,y:h.clientY,direction:"right",editor:t});if(!f)return!1;let g=f;if(g=HJ(d,g),g===d.dom||(g==null?void 0:g.nodeType)!==1)return!1;const p=d.posAtDOM(g,0),v=BJ(d.state.doc,p),b=FJ(d.state.doc,p);return v!==l&&(l=v,c=b,r==null||r({editor:t,node:l,pos:c}),u.setProps({getReferenceClientRect:()=>g.getBoundingClientRect()}),u.show()),!1}}}})};pi.create({name:"floatMenu",addOptions(){return{render(){const n=document.createElement("div");return n.classList.add("float-menu"),n},tippyOptions:{},onNodeChange:()=>null}},addProseMirrorPlugins(){const n=this.options.render();return[Fpe({tippyOptions:this.options.tippyOptions,element:n,editor:this.editor,onNodeChange:this.options.onNodeChange})]}});const xs=n=>{const{visible:e,danger:t,icon:i,title:r,selected:s,children:o,onVisibleChange:a,onClick:l}=n,[c,u]=m.useState(!1),d=g=>{"visible"in n?a==null||a(g):u(g)},h=g=>{g.key.toLowerCase()==="escape"&&d(!1)};m.useEffect(()=>(e&&document.addEventListener("keydown",h,!1),u(e),()=>{document.removeEventListener("keydown",h,!1)}),[e]);const f=P.jsxs("div",{className:Ee(`${qe}-menu__block`,t&&`${qe}-menu__block-danger`,s&&`${qe}-menu__block-selected`),onClick:l,children:[i,r,o&&P.jsx(nBe,{className:`${qe}-menu__block-expand-icon`}),s&&P.jsx(xD,{style:{marginLeft:8}})]});return o?P.jsx(jI,{overlayInnerStyle:{padding:6},showArrow:!1,content:o,placement:"rightTop",destroyTooltipOnHide:!0,open:c,overlayStyle:{minWidth:172,padding:0},onOpenChange:d,children:f}):f},Ak=(n,e)=>e.type.name==="paragraph"&&!e.textContent?n:n+(e.nodeSize||0),lft=n=>{const e=m.useCallback(()=>n.chain().focus().setParagraph().run(),[n]),t=m.useCallback(C=>n.chain().focus().setHeading({level:C}).run(),[n]),i=m.useCallback(()=>n.chain().focus().toggleBlockquote().run(),[n]),r=m.useCallback(()=>n.chain().focus().toggleBulletList().run(),[n]),s=m.useCallback(()=>n.chain().focus().toggleOrderedList().run(),[n]),o=m.useCallback(()=>n.chain().focus().toggleTaskList().run(),[n]),a=m.useCallback(()=>n.chain().focus().toggleHighlightBlock().run(),[n]),l=m.useCallback(()=>n.chain().focus().toggleCodeBlock().run(),[n]),c=m.useCallback(C=>n.chain().focus().setNodeSelection(C).setHorizontalRule().run(),[n]),u=m.useCallback((C,w)=>n.chain().setNodeSelection(w).setTextAlign(C).run(),[n]),d=m.useCallback(C=>n.chain().setNodeSelection(C).setIndent().run(),[n]),h=m.useCallback(C=>n.chain().setNodeSelection(C).setOutdent().run(),[n]),f=m.useCallback((C,w,x)=>{n.chain().focus().setNodeSelection(Ak(w,x)).command(({commands:k})=>k.insertContent(C)).command(({commands:k})=>k.createParagraphNear()).run()},[n]),g=m.useCallback((C,w,x,k)=>{n.chain().focus().setNodeSelection(Ak(x,k)).insertTable({rows:C+1,cols:w+1,withHeaderRow:!1}).run()},[n]),p=m.useCallback((C,w,x)=>{n.chain().setNodeSelection(Ak(w,x)).setColumns({column:C}).focus(n.state.selection.head-1).run()},[n]),v=m.useCallback((C,w,x)=>{n.chain().setNodeSelection(Ak(w,x)).command(({commands:k})=>k.setIframe({src:C,width:500})).focus().run()},[n]),b=m.useCallback((C,w)=>{const x=n.chain();x.setNodeSelection(C).unsetAllMarks(),(w==null?void 0:w.type.name)!=="paragraph"&&x.setParagraph(),x.run()},[n]),_=m.useCallback((C,w)=>{n.commands.setNodeSelection(C);const{$anchor:x}=n.state.selection,k=x.node(1)||n.state.selection.node;n.chain().setMeta("hideFloatMenu",!0).insertContentAt(C+((w==null?void 0:w.nodeSize)||0),k.toJSON()).run()},[n]),y=m.useCallback(C=>{n.chain().setMeta("hideFloatMenu",!0).setNodeSelection(C).deleteSelection().run()},[n]);return{onParagraph:e,onHeading:t,onBlockquote:i,onBulletList:r,onOrderList:s,onTaskList:o,onHighlightBlock:a,onCodeBlock:l,onHorizontalLine:c,onAlign:u,onIndent:d,onOutdent:h,onInsertFile:f,onInsertTable:g,onInsertColumns:p,onInsertIframe:v,onClearFormat:b,onCopyNode:_,onDeleteNode:y}},cft=n=>{const{pos:e,node:t,config:i,onClose:r}=n,s=ln(),o=jt(),a=lft(s),l=m.useRef(null),c=m.useRef(null),u=m.useRef(null),[d,h]=m.useState(!1),[f,g]=m.useState(!1),[p,v]=m.useState(!1),[b,_]=m.useState(!1),[y,C]=m.useState(!1),w=m.useMemo(()=>[{label:o.heading1,level:1,icon:P.jsx($ce,{})},{label:o.heading2,level:2,icon:P.jsx(Uce,{})},{label:o.heading3,level:3,icon:P.jsx(jce,{})},{label:o.heading4,level:4,icon:P.jsx(Kce,{})},{label:o.heading5,level:5,icon:P.jsx(qce,{})},{label:o.heading6,level:6,icon:P.jsx(Gce,{})}],[o]),x=m.useMemo(()=>(i.heading||[1,2,3,4]).map(k=>w[k-1]),[i.heading]);return P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:`${qe}-float-menu-base-menu`,children:[P.jsx(dn,{tooltip:o.text,icon:P.jsx(qB,{}),selected:t.type.name==="paragraph",onClick:a.onParagraph}),x.map(({label:k,level:E,icon:L})=>P.jsx(dn,{tooltip:k,icon:L,selected:t.type.name==="heading"&&t.attrs.level===E,onClick:()=>a.onHeading(E)},E)),P.jsx(dn,{tooltip:o.blockquote,icon:P.jsx(Zce,{}),selected:t.type.name==="blockquote",onClick:a.onBlockquote}),P.jsx(dn,{tooltip:o.bulletList,icon:P.jsx(LP,{}),selected:t.type.name==="bulletList",onClick:a.onBulletList}),P.jsx(dn,{tooltip:o.orderedList,icon:P.jsx(EP,{}),selected:t.type.name==="orderedList",onClick:a.onOrderList}),P.jsx(dn,{tooltip:o.taskList,icon:P.jsx(xce,{}),selected:t.type.name==="taskList",onClick:a.onTaskList}),P.jsx(dn,{tooltip:o.highlightBlock,icon:P.jsx(wue,{}),selected:t.type.name==="highlightBlock",onClick:a.onHighlightBlock}),P.jsx(dn,{tooltip:o.codeBlock,icon:P.jsx(gue,{}),selected:t.type.name==="codeBlock",onClick:a.onCodeBlock}),P.jsx(dn,{tooltip:o.horizontalLine,icon:P.jsx(Dce,{}),selected:t.type.name==="horizontalRule",onClick:()=>a.onHorizontalLine(e)})]}),P.jsx(L4,{className:`${qe}-float-menu-divider`}),P.jsx(xs,{title:o.file,icon:P.jsx("span",{className:"anticon",children:P.jsx(MP,{})}),onClick:()=>{var k;return(k=u.current)==null?void 0:k.click()}}),P.jsx(xs,{title:o.image,icon:P.jsx(Ace,{}),onClick:()=>{var k;return(k=l.current)==null?void 0:k.click()}}),P.jsx(xs,{title:o.video,icon:P.jsx(SBe,{}),onClick:()=>{var k;return(k=c.current)==null?void 0:k.click()}}),P.jsx(L4,{className:`${qe}-float-menu-divider`}),P.jsx(xs,{title:o.table,icon:P.jsx(Oce,{}),visible:d,onVisibleChange:k=>h(k),children:P.jsx(vue,{onClick:(k,E)=>{a.onInsertTable(k,E,e,t),h(!1),r()}})}),P.jsx(xs,{title:o.columns,icon:P.jsx("span",{className:"anticon",children:P.jsx(MP,{})}),visible:f,onVisibleChange:k=>g(k),children:P.jsx(mue,{onClick:k=>{a.onInsertColumns(k,e,t),g(!1),r()}})}),P.jsx(xs,{title:o.iframe,icon:P.jsx(Ice,{}),visible:p,onVisibleChange:k=>v(k),children:P.jsx(XB,{title:o.editIframe,onCancel:r,onOk:k=>{a.onInsertIframe(k,e,t),v(!1),r()}})}),P.jsxs(xs,{title:o.align,icon:P.jsx(xL,{}),visible:b,onVisibleChange:k=>_(k),children:[P.jsx(xs,{title:o.alignLeft,icon:P.jsx(xL,{}),onClick:()=>{a.onAlign("left",e),_(!1),r()}}),P.jsx(xs,{title:o.alignCenter,icon:P.jsx(jB,{}),selected:s.isActive({textAlign:"center"}),onClick:()=>{a.onAlign("center",e),_(!1),r()}}),P.jsx(xs,{title:o.alignRight,icon:P.jsx(KB,{}),onClick:()=>{a.onAlign("right",e),_(!1),r()}}),P.jsx(xs,{title:o.alignJustify,icon:P.jsx(Rce,{}),onClick:()=>{a.onAlign("justify",e),_(!1),r()}})]}),P.jsxs(xs,{title:o.indentTitle,icon:P.jsx(kP,{}),visible:y,onVisibleChange:k=>C(k),children:[P.jsx(xs,{title:o.indent,icon:P.jsx(kP,{}),onClick:()=>{a.onIndent(e),C(!1),r()}}),P.jsx(xs,{title:o.outdent,icon:P.jsx(Mce,{}),onClick:()=>{a.onOutdent(e),C(!1),r()}})]}),P.jsx(L4,{className:`${qe}-float-menu-divider`}),P.jsx(xs,{title:o.clearFormat,icon:P.jsx(kce,{}),onClick:()=>{a.onClearFormat(e,t),r()}}),P.jsx(xs,{title:o.copyNode,icon:P.jsx(P9e,{}),onClick:()=>{a.onCopyNode(e,t),r()}}),P.jsx(xs,{title:o.delete,danger:!0,icon:P.jsx(sS,{}),onClick:()=>{a.onDeleteNode(e),r()}}),P.jsx(bue,{ref:l,...i.image,onChange:k=>{a.onInsertFile(k,e,t),r()}}),P.jsx(_ue,{ref:c,...i.video,onChange:k=>{a.onInsertFile(k,e,t),r()}}),P.jsx(yue,{ref:u,...i.file,onChange:k=>{a.onInsertFile(k,e,t),r()}})]})},uft=n=>{const{className:e,config:t}=n,i=ln(),[r,s]=m.useState(!1),[o,a]=m.useState(null),[l,c]=m.useState(null),[u,d]=m.useState(-1),h=m.useRef(null);m.useEffect(()=>o?i.isDestroyed?()=>null:(h.current||(h.current=Fpe({editor:i,element:o,pluginKey:zE,onNodeChange:g=>{g.node&&c(g.node),d(g.pos)}}),i.registerPlugin(h.current)),()=>{i.unregisterPlugin(zE)}):()=>null,[o,i,zE]);const f=g=>{g.key.toLowerCase()==="escape"&&s(!1)};return m.useEffect(()=>(r&&document.addEventListener("keydown",f,!1),s(r),i.commands.setMeta("lockFloatMenu",r),()=>{document.removeEventListener("keydown",f,!1)}),[r]),P.jsx("div",{className:e,ref:a,children:P.jsx(jI,{trigger:["click"],placement:"rightTop",overlayClassName:`${qe}-float-menu`,open:r,onOpenChange:g=>s(g),showArrow:!1,content:P.jsx(cft,{pos:u,node:l,config:t,onClose:()=>s(!1)}),children:P.jsx(bi,{style:{display:"inline-flex",justifyContent:"center",alignItems:"center"},icon:P.jsx(uFe,{}),type:"text",size:"small",onClick:()=>s(!0)})})})},dft={locale:"zh-tw",messages:{undo:"",redo:"",fontStyle:"",text:"",heading1:"",heading2:"",heading3:"",heading4:"",heading5:"",heading6:"",fontSize:"",bold:"",italic:"",strike:"",underLine:"",color:"",highlightColor:"",subscript:"",superscript:"",list:"",orderedList:"",bulletList:"",align:"",alignLeft:"",alignCenter:"",alignRight:"",alignJustify:"",lineHeight:"",indentTitle:"",indent:"",outdent:"",link:"",insertLink:"",editLink:"",linkText:"",linkHref:"",linkPlaceholder:"",linkTarget:"",unLink:"",linkInvalid:"",iframe:"",insertIframe:"",editIframe:"",iframeSrc:"",columns:"",code:"",blockquote:"",horizontalLine:"",taskList:"",table:"",highlightBlock:"",codeBlock:"",language:"",image:"",imageLimit:" {limit}",imageLoadError:"",video:"",videoLimit:" {limit}",videoLoadError:"",file:"",fileLimit:" {limit}",gt:"GT",fullscreen:"",cancelFullscreen:"",edit:"",cancel:"",ok:"",mergeCell:"",splitCell:"",cellColor:"",insertRowAndColumn:"",deleteRowAndColumn:"",insertColumnBefore:"",insertAnyColumnBefore:"{num}",insertColumnAfter:"",insertAnyColumnAfter:"{num}",insertRowBefore:"",insertAnyRowBefore:"{num}",insertRowAfter:"",insertAnyRowAfter:"{num}",deleteColumn:"",deleteCurrentColumn:"",deleteRow:"",deleteCurrentRow:"",deleteTable:"",toggleTableHeader:"",setTableHeaderRow:"",setTableHeaderColumn:"",cancelTableHeaderRow:"",cancelTableHeaderColumn:"",delete:"",reset:"",download:"",preview:"",uploading:"",searchAndReplace:"",search:"",searchPlaceholder:"",replace:"",replacePlaceholder:"",replaceAs:"",replaceAll:"",searchPrevious:"",searchNext:"",fullInEditor:"",clearFormat:"",peopleEmoji:"",natureEmoji:"",foodsEmoji:"",activityEmoji:"",placesEmoji:"",objectsEmoji:"",symbolsEmoji:"",sizeLessThan:"{MIN_SIZE}px",sizeGreaterThan:"{MAX_SIZE}px",copyNode:"",more:""}},hft={locale:"en",messages:{undo:"Undo",redo:"Redo",fontStyle:"Font Style",text:"Text",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",fontSize:"Font Size",bold:"Bold",italic:"Italic",strike:"Strikethrough",underLine:"Underline",color:"Color",highlightColor:"Highlight Color",subscript:"Subscript",superscript:"Superscript",list:"List",orderedList:"Ordered List",bulletList:"Bullet List",align:"Align",alignLeft:"Align Left",alignCenter:"Align Center",alignRight:"Align Right",alignJustify:"Justify",lineHeight:"Line Height",indentTitle:"Indent",indent:"Increase Indent",outdent:"Decrease Indent",link:"Link",insertLink:"Insert Link",editLink:"Edit Link",linkText:"Text",linkHref:"Link URL",linkPlaceholder:"Paste or type a link",linkTarget:"Open in new window",unLink:"Unlink",linkInvalid:"Invalid link",iframe:"Iframe",insertIframe:"Insert Iframe",editIframe:"Edit Iframe",iframeSrc:"Iframe URL",columns:"Columns",code:"Code",blockquote:"Blockquote",horizontalLine:"Horizontal Line",taskList:"Task List",table:"Insert Table",highlightBlock:"Insert Highlight Block",codeBlock:"Insert Code Block",language:"Language",image:"Insert Image",imageLimit:"Image size must not exceed {limit}",imageLoadError:"Image load failed",video:"Insert Video",videoLimit:"Video size must not exceed {limit}",videoLoadError:"Video loading failed",file:"Insert File",fileLimit:"File size must not exceed {limit}",gt:"GT",fullscreen:"Fullscreen",cancelFullscreen:"Exit Fullscreen",edit:"Edit",cancel:"Cancel",ok:"OK",mergeCell:"Merge Cells",splitCell:"Split Cells",cellColor:"Cell Background Color",insertRowAndColumn:"Insert Rows and Columns",deleteRowAndColumn:"Delete Rows and Columns",insertColumnBefore:"Insert Column Before",insertAnyColumnBefore:"Insert {num} Columns Before",insertColumnAfter:"Insert Column After",insertAnyColumnAfter:"Insert {num} Columns After",insertRowBefore:"Insert Row Before",insertAnyRowBefore:"Insert {num} Rows Before",insertRowAfter:"Insert Row After",insertAnyRowAfter:"Insert {num} Rows After",deleteColumn:"Delete Column",deleteCurrentColumn:"Delete Current Column",deleteRow:"Delete Row",deleteCurrentRow:"Delete Current Row",deleteTable:"Delete Table",toggleTableHeader:"Toggle Header",setTableHeaderRow:"Set Header Row",setTableHeaderColumn:"Set Header Column",cancelTableHeaderRow:"Cancel Header Row",cancelTableHeaderColumn:"Cancel Header Column",delete:"Delete",reset:"Reset",download:"Download",preview:"Preview",uploading:"Uploading, please wait",searchAndReplace:"Search and Replace",search:"Search",searchPlaceholder:"Enter keywords to search",replace:"Replace",replacePlaceholder:"Enter replacement text",replaceAs:"Replace with",replaceAll:"Replace all",searchPrevious:"Previous",searchNext:"Next",fullInEditor:"Adaptive",clearFormat:"Clear Formatting",peopleEmoji:"People",natureEmoji:"Nature",foodsEmoji:"Foods",activityEmoji:"Activity",placesEmoji:"Places",objectsEmoji:"Objects",symbolsEmoji:"Symbols",sizeLessThan:"Size must be greater than {MIN_SIZE}px",sizeGreaterThan:"Size must be less than {MAX_SIZE}px",copyNode:"Copy Node",more:"More"}},fft={locale:"ja",messages:{undo:"",redo:"",fontStyle:"",text:"",heading1:"1",heading2:"2",heading3:"3",heading4:"4",heading5:"5",heading6:"6",fontSize:"",bold:"",italic:"",strike:"",underLine:"",color:"",highlightColor:"",subscript:"",superscript:"",list:"",orderedList:"",bulletList:"",align:"",alignLeft:"",alignCenter:"",alignRight:"",alignJustify:"",lineHeight:"",indentTitle:"",indent:"",outdent:"",link:"",insertLink:"",editLink:"",linkText:"",linkHref:"",linkPlaceholder:"",linkTarget:"",unLink:"",linkInvalid:"",iframe:"",insertIframe:"",editIframe:"",iframeSrc:"URL",columns:"",code:"",blockquote:"",horizontalLine:"",taskList:"",table:"",highlightBlock:"",codeBlock:"",language:"",image:"",imageLimit:" {limit} ",imageLoadError:"",video:"",videoLimit:" {limit} ",videoLoadError:"",file:"",fileLimit:" {limit} ",gt:"GT",fullscreen:"",cancelFullscreen:"",edit:"",cancel:"",ok:"OK",mergeCell:"",splitCell:"",cellColor:"",insertRowAndColumn:"",deleteRowAndColumn:"",insertColumnBefore:"",insertAnyColumnBefore:"{num}",insertColumnAfter:"",insertAnyColumnAfter:"{num}",insertRowBefore:"",insertAnyRowBefore:"{num}",insertRowAfter:"",insertAnyRowAfter:"{num}",deleteColumn:"",deleteCurrentColumn:"",deleteRow:"",deleteCurrentRow:"",deleteTable:"",toggleTableHeader:"",setTableHeaderRow:"",setTableHeaderColumn:"",cancelTableHeaderRow:"",cancelTableHeaderColumn:"",delete:"",reset:"",download:"",preview:"",uploading:",",searchAndReplace:"",search:"",searchPlaceholder:"",replace:"",replacePlaceholder:"",replaceAs:"",replaceAll:"",searchPrevious:"",searchNext:"",fullInEditor:"",clearFormat:"",peopleEmoji:"",natureEmoji:"",foodsEmoji:"",activityEmoji:"",placesEmoji:"",objectsEmoji:"",symbolsEmoji:"",sizeLessThan:"{MIN_SIZE}px",sizeGreaterThan:"{MAX_SIZE}px",copyNode:"",more:""}},gft={locale:"ko",messages:{undo:" ",redo:" ",fontStyle:" ",text:"",heading1:" 1",heading2:" 2",heading3:" 3",heading4:" 4",heading5:" 5",heading6:" 6",fontSize:" ",bold:"",italic:"",strike:"",underLine:"",color:"",highlightColor:"",subscript:" ",superscript:" ",list:"",orderedList:" ",bulletList:"  ",align:"",alignLeft:" ",alignCenter:" ",alignRight:" ",alignJustify:" ",lineHeight:" ",indentTitle:"",indent:" ",outdent:" ",link:"",insertLink:" ",editLink:" ",linkText:"",linkHref:" ",linkPlaceholder:"  ",linkTarget:"  ",unLink:" ",linkInvalid:" ",iframe:" ",insertIframe:"  ",editIframe:"  ",iframeSrc:"  ",columns:"",code:"",blockquote:"",horizontalLine:"",taskList:" ",table:" ",highlightBlock:"  ",codeBlock:"  ",language:"",image:" ",imageLimit:"  {limit}    ",imageLoadError:"  ",video:" ",videoLimit:"  {limit}    ",videoLoadError:"  ",file:" ",fileLimit:"  {limit}    ",gt:"GT",fullscreen:" ",cancelFullscreen:"  ",edit:"",cancel:"",ok:"",mergeCell:" ",splitCell:"  ",cellColor:" ",insertRowAndColumn:"  ",deleteRowAndColumn:"  ",insertColumnBefore:"  ",insertAnyColumnBefore:" {num}  ",insertColumnAfter:"  ",insertAnyColumnAfter:" {num}  ",insertRowBefore:"  ",insertAnyRowBefore:" {num}  ",insertRowAfter:"  ",insertAnyRowAfter:" {num}  ",deleteColumn:" ",deleteCurrentColumn:"  ",deleteRow:" ",deleteCurrentRow:"  ",deleteTable:" ",toggleTableHeader:" ",setTableHeaderRow:"  ",setTableHeaderColumn:"  ",cancelTableHeaderRow:"  ",cancelTableHeaderColumn:"  ",delete:"",reset:"",download:"",preview:"",uploading:" .   ",searchAndReplace:"  ",search:"",searchPlaceholder:"  ",replace:"",replacePlaceholder:"  ",replaceAs:" ",replaceAll:" ",searchPrevious:"",searchNext:"",fullInEditor:"",clearFormat:" ",peopleEmoji:"",natureEmoji:"",foodsEmoji:"",activityEmoji:"",placesEmoji:"",objectsEmoji:"",symbolsEmoji:"",sizeLessThan:" {MIN_SIZE}px  ",sizeGreaterThan:" {MAX_SIZE}px  ",copyNode:" ",more:""}};var pft="Expected a function";function mft(n,e,t){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(pft);return kL(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),eH(n,e,{leading:i,maxWait:e,trailing:r})}const v9=()=>qe+"-"+[...Math.random().toString(36).slice(2)].map(n=>Math.random()>.5?n:n.toUpperCase()).join(""),vft=({getId:n,anchorTypes:e=["heading"]})=>new Ni({key:new zi("tableOfContent"),appendTransaction(t,i,r){const s=r.tr;let o=!1;if(t.some(a=>a.docChanged)){const a=[];r.doc.descendants((l,c)=>{const u=l.attrs["data-toc-id"];if(e.includes(l.type.name)&&l.textContent.length!==0){if(u==null||a.includes(u)){let d="";d=n?n(l.textContent):v9(),s.setNodeMarkup(c,void 0,{...l.attrs,"data-toc-id":d,id:d}),o=!0}a.push(u)}})}return o?s:null}}),VJ=(n,e)=>{let t=1;const i=e.at(-1),r=[...e].reverse().find(o=>o.originalLevel<=n.node.attrs.level),s=(r==null?void 0:r.level)||1;return t=n.node.attrs.level>((i==null?void 0:i.originalLevel)||1)?((i==null?void 0:i.level)||1)+1:n.node.attrs.level<((i==null?void 0:i.originalLevel)||1)?s:(i==null?void 0:i.level)||1,t},zJ=(n,e)=>{const t=e.at(-1);return t?((t==null?void 0:t.itemIndex)||1)+1:1},Bpe=(n,e)=>{const{editor:t}=e,i=[],r=[];let s=null;if(t.state.doc.descendants((o,a)=>{e.anchorTypes.includes(o.type.name)&&i.push({node:o,pos:a})}),i.forEach(o=>{const a=t.view.domAtPos(o.pos+1).node;e.storage.scrollPosition>=a.offsetTop&&(s=o.node.attrs["data-toc-id"],r.push(o.node.attrs["data-toc-id"]))}),n=n.map(o=>({...o,isActive:o.id===s,isScrolledOver:r.includes(o.id)})),e.onUpdate){const o=e.storage.content.length===0;e.onUpdate(n,o)}return n},WJ=eH(n=>{const{editor:e,onUpdate:t}=n,i=[];let r=[];const s=[];if(e.state.doc.descendants((o,a)=>{n.anchorTypes.includes(o.type.name)&&i.push({node:o,pos:a})}),i.forEach((o,a)=>{if(o.node.textContent.length===0)return;const l=e.view.domAtPos(o.pos+1).node,c=n.storage.scrollPosition>=l.offsetTop;s.push(l);const u=o.node.attrs.level,d=i[a-1],h=n.getLevelFn(o,r),f=n.getIndexFn(o,r,h);r=d?[...r,{itemIndex:f,id:o.node.attrs["data-toc-id"],originalLevel:u,level:h,textContent:o.node.textContent,pos:o.pos,editor:e,isActive:!1,isScrolledOver:c,node:o.node,dom:l}]:[...r,{itemIndex:f,id:o.node.attrs["data-toc-id"],originalLevel:u,level:h,textContent:o.node.textContent,pos:o.pos,editor:e,isActive:!1,isScrolledOver:c,node:o.node,dom:l}]}),r=Bpe(r,n),t){const o=n.storage.content.length===0;t(r,o)}n.storage.anchors=s,n.storage.content=r,e.state.tr.setMeta("toc",r),e.view.dispatch(e.state.tr)},500),bft=pi.create({name:"tableOfContents",addStorage:()=>({content:[],anchors:[],scrollHandler:()=>null,scrollPosition:0}),addGlobalAttributes(){return[{types:this.options.anchorTypes||["headline"],attributes:{id:{default:null,renderHTML:n=>({id:n.id}),parseHTML:n=>n.id||null},"data-toc-id":{default:null,renderHTML:n=>({"data-toc-id":n["data-toc-id"]}),parseHTML:n=>n.dataset.tocId||null}}}]},addOptions:()=>({onUpdate:()=>{},getId:n=>v9(),scrollParent:typeof window<"u"?()=>window:void 0,anchorTypes:["heading"]}),onUpdate(){var n;WJ({editor:this.editor,storage:this.storage,onUpdate:(n=this.options.onUpdate)==null?void 0:n.bind(this),getIndexFn:this.options.getIndex||zJ,getLevelFn:this.options.getLevel||VJ,anchorTypes:this.options.anchorTypes})},onCreate(){var i;const{tr:n}=this.editor.state,e=[];if(this.options.scrollParent&&typeof this.options.scrollParent!="function"&&console.warn("[Tiptap Table of Contents Deprecation Notice]: The 'scrollParent' option must now be provided as a callback function that returns the 'scrollParent' element. The ability to pass this option directly will be deprecated in future releases."),this.editor.state.doc.descendants((r,s)=>{const o=r.attrs["data-toc-id"];if(this.options.anchorTypes.includes(r.type.name)&&r.textContent.length!==0){if(o==null||e.includes(o)){let a="";a=this.options.getId?this.options.getId(r.textContent):v9(),n.setNodeMarkup(s,void 0,{...r.attrs,"data-toc-id":a,id:a})}e.push(o)}}),this.editor.view.dispatch(n),WJ({editor:this.editor,storage:this.storage,onUpdate:(i=this.options.onUpdate)==null?void 0:i.bind(this),getIndexFn:this.options.getIndex||zJ,getLevelFn:this.options.getLevel||VJ,anchorTypes:this.options.anchorTypes}),this.storage.scrollHandler=mft(()=>{var a;if(!this.options.scrollParent)return;const r=typeof this.options.scrollParent=="function"?this.options.scrollParent():this.options.scrollParent,s=r instanceof HTMLElement?r.scrollTop:r.scrollY;this.storage.scrollPosition=s||0;const o=Bpe(this.storage.content,{editor:this.editor,anchorTypes:this.options.anchorTypes,storage:this.storage,onUpdate:(a=this.options.onUpdate)==null?void 0:a.bind(this)});this.storage.content=o},300),!this.options.scrollParent)return;const t=typeof this.options.scrollParent=="function"?this.options.scrollParent():this.options.scrollParent;t&&t.addEventListener("scroll",this.storage.scrollHandler)},onDestroy(){if(!this.options.scrollParent)return;const n=typeof this.options.scrollParent=="function"?this.options.scrollParent():this.options.scrollParent;n&&n.removeEventListener("scroll",this.storage.scrollHandler)},addProseMirrorPlugins(){return[vft({getId:this.options.getId,anchorTypes:this.options.anchorTypes})]}}),Hpe={maxSize:1024*1024*10,onUploadFile:n=>{console.log(n)}},Vpe={maxSize:1024*1024*300,onUploadFile:n=>{console.log(n);const{file:e,onSuccess:t}=n;t({src:URL.createObjectURL(e)})}},zpe={maxSize:1024*1024*300,beforeUpload:n=>n.some(e=>e.name.endsWith(".zip"))?(bl.error(""),!1):!0,onDownloadFile:n=>{console.log(n)},onUploadFile:n=>{console.log(n);const{file:e,onSuccess:t}=n;t({src:URL.createObjectURL(e)})}};function _ft(){return P.jsxs(db,{children:[P.jsx(_He,{}),P.jsx(yHe,{}),P.jsx(gd,{}),P.jsx(MHe,{}),P.jsx(Yce,{}),P.jsx(Xce,{}),P.jsx(Qce,{}),P.jsx(Jce,{}),P.jsx(eue,{}),P.jsx(UHe,{}),P.jsx(qHe,{}),P.jsx(due,{}),P.jsx(hue,{}),P.jsx(XVe,{}),P.jsx(gd,{}),P.jsx(nze,{}),P.jsx(pue,{}),P.jsx(aze,{}),P.jsx(dze,{}),P.jsx(cze,{}),P.jsx(gd,{}),P.jsx(Ize,{...Hpe}),P.jsx(Rze,{...Vpe}),P.jsx(Bze,{...zpe}),P.jsx(eze,{}),P.jsx(zze,{}),P.jsx(FHe,{}),P.jsx(Cue,{}),P.jsx(Cze,{}),P.jsx(Sze,{}),P.jsx(mze,{}),P.jsx(bze,{}),P.jsx(jze,{}),P.jsx(Yze,{}),P.jsx(Xze,{}),P.jsx(gd,{}),P.jsx(Pht,{}),P.jsx($ze,{onFullscreenChange:n=>{n?document.body.classList.add("hidden"):document.body.classList.remove("hidden")}}),P.jsx(dn,{tooltip:"gitlab",style:{marginLeft:"auto"},icon:P.jsx(lFe,{}),onClick:()=>{window.open("https://github.com/Nice-PLQ/antd-richtext")}})]})}function Cft(){return P.jsx(uft,{config:{image:Hpe,video:Vpe,file:zpe}})}const yft=({items:n=[],editor:e})=>{const t=(i,r)=>{if(i.preventDefault(),e){const s=e.view.dom.querySelector(`[data-toc-id="${r}"`);window.scrollTo({top:s.getBoundingClientRect().top+window.scrollY-44,behavior:"smooth"})}};return P.jsx("div",{className:"table-of-contents",children:n.map(i=>P.jsx("a",{href:`#${i.id}`,onClick:r=>t(r,i.id),className:Ee({"title-item":!0,active:i.isActive,"scrolled-over":i.isScrolledOver}),style:{"--level":i.level},children:i.textContent},i.id))})},wft=`<h1 class="block at-heading" id="at-NhrWkkhKxCO" data-toc-id="at-NhrWkkhKxCO">for <a target="_blank" rel="noopener noreferrer nofollow" class="at-link" href="https://4x-ant-design.antgroup.com/">Antd@4.x</a></h1><h2 class="block at-heading" id="o8zrkajVtH" data-toc-id="o8zrkajVtH"></h2><hr class="block at-horizontal-rule"><pre class="block at-code-block"><code class="language-bash">npm install antd-richtext</code></pre><p class="block at-block"></p><pre class="block at-code-block"><code class="language-bash">yarn add antd-richtext</code></pre><p class="block at-block"><code>Undo</code><code>Redo</code><code>Heading</code><code>Bold</code> ...<a target="_blank" rel="noopener noreferrer nofollow" class="at-link" href="https://github.com/Nice-PLQ/antd-richtext/blob/master/src/menus/index.ts"></a></p><pre class="block at-code-block"><code class="language-typescript">import { useRef } from 'react';
import {
  Editor,
  type EditorRef,
  MenuContainer,
  Undo,
  Redo,
  Divider // 
  Heading,
  Bold,
  ...
} from 'antd-richtext';

// 
const MenuItems = () =&gt; (
  &lt;MenuContainer&gt;
    &lt;Undo /&gt;
    &lt;Redo /&gt;

    &lt;Divider /&gt;

    &lt;Heading /&gt;
    &lt;Bold /&gt;
    ...
  &lt;/MenuContainer&gt;
);

const YourComponent = () =&gt; {
  const editorRef = useRef&lt;EditorRef | null&gt;(null);
  return (
    &lt;&gt;
      &lt;Editor
        placeholder=""
        ref={editorRef}
        renderMenus={() =&gt; &lt;MenuItems /&gt;}
      /&gt;
      &lt;button onClick={() =&gt; editorRef.current?.getJSON()}&gt;JSON&lt;/button&gt;
      &lt;button onClick={() =&gt; editorRef.current?.getHTML()}&gt;HTML&lt;/button&gt;
      &lt;button onClick={() =&gt; editorRef.current?.getText()}&gt;Text&lt;/button&gt;
    &lt;/&gt;
  );
};</code></pre><p class="block at-block"><code>EditorRender</code></p><pre class="block at-code-block"><code class="language-typescript">import { useRef } from 'react';
import { EditorRender, type EditorRenderRef } from 'antd-richtext';

const YourComponent = () =&gt; {
  const content = '&lt;h1&gt;antd-richtext&lt;/h1&gt;';
  const editorRef = useRef&lt;EditorRenderRef | null&gt;(null);

  return &lt;EditorRender ref={editorRef} content={content} /&gt;;
};</code></pre><h2 class="block at-heading" id="rtRISErqAX" data-toc-id="rtRISErqAX"></h2><hr class="block at-horizontal-rule"><p class="block at-block">5</p><pre class="block at-code-block"><code class="language-typescript">import { useState, useRef, useMemo } from 'react';
import { useLocale } from 'umi';
import {
  Editor,
  type EditorRef,
  LocaleProvider,
  MenuContainer,
  Heading,
  Bold,
  ...
} from 'antd-richtext';
import zh_CN from 'antd-richtext/esm/i18n/locale/zh_CN';
import zh_TW from 'antd-richtext/esm/i18n/locale/zh_TW';
import en_US from 'antd-richtext/esm/i18n/locale/en_US';
import ja_JP from 'antd-richtext/esm/i18n/locale/ja_JP';
import ko_KR from 'antd-richtext/esm/i18n/locale/ko_KR';

const locales = {
  zh: zh_CN,
  zhTw: zh_TW,
  en: en_US,
  ja: ja_JP,
  ko: ko_KR,
};

const YourComponent = () =&gt; {
  const content = '&lt;h1&gt;antd-richtext&lt;/h1&gt;';
  const editorRef = useRef&lt;EditorRef | null&gt;(null);
  const [locale] = useLocale();
  const editorLocale = useMemo(() =&gt; locales[locale] || zh_CN, [locale]);
  return (
    &lt;LocaleProvider locale={editorLocale}&gt;
      &lt;Editor
        placeholder=""
        content={content}
        ref={editorRef}
        renderMenus={() =&gt; &lt;MenuItems /&gt;}
      /&gt;
    &lt;/LocaleProvider&gt;
  );
};</code></pre><h2 class="block at-heading" id="jW8cAuj0lub" data-toc-id="jW8cAuj0lub">Menu</h2><hr class="block at-horizontal-rule"><p class="block at-block"><span style="font-size: 20px; color: rgb(31, 31, 31)"></span></p><h4 class="block at-heading" id="at-41d0Nd99rv8" data-toc-id="at-41d0Nd99rv8">1. Heading</h4><pre class="block at-code-block"><code class="language-typescript">// 1-6
&lt;Heading levels={[1, 2, 3, 4, 5, 6]} /&gt;</code></pre><h4 class="block at-heading" id="at-9EHxQGER8Cr" data-toc-id="at-9EHxQGER8Cr">2. LineHeight</h4><pre class="block at-code-block"><code class="language-typescript">// 
&lt;LineHeight lineHeights={[1, 1.15, 1.3, 1.5, 2, 3]} /&gt;</code></pre><h4 class="block at-heading" id="at-tGOZNGnDKMB" data-toc-id="at-tGOZNGnDKMB">3. FontSize</h4><pre class="block at-code-block"><code class="language-typescript">// px
&lt;FontSize fontSize={['14px', '18px', '22px']} /&gt;</code></pre><h4 class="block at-heading" id="at-CWo960Wg1YC" data-toc-id="at-CWo960Wg1YC">4. </h4><p class="block at-block">ImageVideoFileImage</p><p class="block at-block">1<code>uploadAction</code>  <span style="color: rgb(51, 85, 255)"><strong>src</strong> </span></p><pre class="block at-code-block"><code class="language-typescript">&lt;Image
  // 
  // { src: 'http://test.com/test.png' }
  // 
  // { data: { src: 'http://test.com/test.png' } }
  uploadAction="https://test.com/upload"
/&gt;</code></pre><p class="block at-block">2<code>onUploadFile</code></p><pre class="block at-code-block"><code class="language-typescript">&lt;Image
  maxSize={1024 * 1024 * 300} // size
  onUploadFile={(fileData) =&gt; {
    const { file, onProgress, onSuccess } = fileData;
    // uploadFileonSuccess
    // onProgress0-100
    uploadFile({ file, onProgress }).then((url) =&gt; {
      onSuccess({ src: url });
    });
  }}
/&gt;</code></pre><h4 class="block at-heading" id="at-Y3l61kSbfVd" data-toc-id="at-Y3l61kSbfVd">5. </h4><p class="block at-block"></p><pre class="block at-code-block"><code class="language-typescript">&lt;Color colorPreset={['red', 'blue']} /&gt;</code></pre><pre class="block at-code-block"><code class="language-typescript">&lt;HighlightColor colorPreset={['red', 'blue']} /&gt;</code></pre><h4 class="block at-heading" id="at-ARezTHDBFR8" data-toc-id="at-ARezTHDBFR8">6. Fullscreen</h4><p class="block at-block"><span style="color: rgb(51, 85, 255)"><strong>onFullscreenChange</strong></span><code>fullscreen</code>className</p><pre class="block at-code-block"><code class="language-typescript">&lt;Fullscreen
  onFullscreenChange={(fullscreen) =&gt; {
    if (fullscreen) {
      document.body.classList.add('overflow-hidden');
    } else {
      document.body.classList.remove('overflow-hidden');
    }
  }}
/&gt;</code></pre><h2 class="block at-heading" id="at-c08JhP17eUC" data-toc-id="at-c08JhP17eUC"></h2><p class="block at-block"><code>FloatMenu</code> <a target="_blank" rel="noopener noreferrer nofollow" class="at-link" href="https://github.com/Nice-PLQ/antd-richtext/blob/master/src/menus/FloatMenu/types.ts">config</a></p><pre class="block at-code-block"><code class="language-typescript">import { useRef } from 'react';
import { Editor, type EditorRef, FloatMenu } from 'antd-richtext';

// 
const FloatMenuItems = () =&gt; (
  &lt;FloatMenu
    config={{
      image: {
        maxSize: 1024 * 1024 * 10,
        onUploadFile: (fileData) =&gt; {
          console.log(fileData);
        },
      },
      video: {
        maxSize: 1024 * 1024 * 300,
        onUploadFile: (fileData) =&gt; {
          const { file, onSuccess } = fileData;
          onSuccess({ src: URL.createObjectURL(file) });
        },
      },
      file: {
        maxSize: 1024 * 1024 * 300,
        beforeUpload: (files) =&gt; {
          if (files.some((file) =&gt; file.name.endsWith('.zip'))) {
            return false;
          }
          return true;
        },
        onDownloadFile: (fileData) =&gt; {
          console.log(fileData);
        },
        onUploadFile: (fileData) =&gt; {
          console.log(fileData);
          const { file, onSuccess } = fileData;
          onSuccess({ src: URL.createObjectURL(file) });
        },
      },
    }}
  /&gt;
);

const YourComponent = () =&gt; {
  const editorRef = useRef&lt;EditorRef | null&gt;(null);
  return (
    &lt;Editor
      placeholder=""
      ref={editorRef}
      renderFloatMenus={() =&gt; &lt;FloatMenuItems /&gt;}
    /&gt;
  );
};
</code></pre><h2 class="block at-heading" id="2aS4tnzMkKT" data-toc-id="2aS4tnzMkKT"></h2><hr class="block at-horizontal-rule"><p class="block at-block"><span style="font-size: 20px; color: rgb(31, 31, 31)"> </span><code>TableOfContents</code>Editor <span style="color: rgb(51, 85, 255)"><strong>extensions </strong></span>UI</p><pre class="block at-code-block"><code class="language-typescript">import { useState, MouseEvent } from 'react';
import {
  Editor,
  type EditorRef,
  MenuContainer,
  Heading,
  Bold,
  ...
} from 'antd-richtext';
// 
import {
  TableOfContents,
} from 'antd-richtext/esm/extensions/TableOfContents';

interface ToCItem {
  id: string;
  isActive: boolean;
  isScrolledOver: boolean;
  itemIndex: number;
  level: number;
  textContent: string;
}

// 
const TableOfContent = ({
  items = [],
  editor,
}: {
  items: ToCItem[];
  editor?: Editor;
}) =&gt; {
  if (items.length === 0) {
    return null;
  }

  const onItemClick = (e: MouseEvent&lt;HTMLAnchorElement&gt;, id: string) =&gt; {
    e.preventDefault();

    if (editor) {
      const element = editor.view.dom.querySelector(\`[data-toc-id="\${id}"\`);
      element.scrollIntoView({
        behavior: 'smooth',
        block: 'start',
      });
    }
  };

  return (
    &lt;div className="table-of-contents"&gt;
      {items.map((item) =&gt; (
        &lt;a
          key={item.id}
          href={\`#\${item.id}\`}
          onClick={(e) =&gt; onItemClick(e, item.id)}
          className={item.isActive &amp;&amp; active}
          style={{ '--level': item.level }}
        &gt;
          {item.textContent}
        &lt;/a&gt;
      ))}
    &lt;/div&gt;
  );
};

const YourComponent = () =&gt; {
  const content = '&lt;h1&gt;antd-richtext&lt;/h1&gt;';
  const [items, setItems] = useState([]);
  const editorRef = useRef&lt;EditorRef | null&gt;(null);

  const extensions = [
    // 
    TableOfContents.configure({
      onUpdate: (toc: ToCItem[]) =&gt; setItems(toc),
    }),
  ];

  return (
    &lt;&gt;
      &lt;TableOfContent
        editor={editorRef.current?.editor}
        items={items}
      /&gt;
      &lt;Editor
        placeholder=""
        content={content}
        ref={editorRef}
        extensions={extensions}
      /&gt;
    &lt;/&gt;
  );
};</code></pre><h2 class="block at-heading" id="at-VJhuVk7YMk" data-toc-id="at-VJhuVk7YMk"></h2><hr class="block at-horizontal-rule"><p class="block at-block"><code>FileHandler</code></p><pre class="block at-code-block"><code class="language-typescript">// FileHandler
import { Editor, FileHandler } from 'antd-richtext';

const insertContent = (editor, files, pos) =&gt; {
  editor
    .chain()
    .insertContentAt(
      pos,
      files.map((file) =&gt; ({
        type: 'image', // image-video-file-
        attrs: {
          src: URL.createObjectURL(file),
          size: file.size,
          name: file.name,
          rowFile: file,
          // 
          uploadAction: 'https://your_upload_url',
          // uploadAction
          uploadFileHandler: (fileData) =&gt; {
            const { onProgress, onSuccess } = fileData;
            // uploadFileonSuccess
            // onProgress0-100
            uploadFile({ file, onProgress }).then((url) =&gt; {
              onSuccess({ src: url });
            });
          },
        },
      })),
    )
    .focus()
    .run();
};

const YourComponent = () =&gt; {
  const content = '&lt;h1&gt;antd-richtext&lt;/h1&gt;';

  const extensions = [
    // 
    FileHandler.configure({
      onDrop: insertContent,
      onPaste: insertContent,
    }),
  ];

  return (
    &lt;Editor
      placeholder=""
      content={content}
      extensions={extensions}
    /&gt;
  );
};
</code></pre><h2 class="block at-heading" id="Z27ci1sA55" data-toc-id="Z27ci1sA55">API</h2><hr class="block at-horizontal-rule"><p class="block at-block">1<strong>Editor </strong>API</p><table class="block at-table" style="min-width: 600px"><colgroup><col><col><col><col></colgroup><tbody><tr><th colspan="1" rowspan="1"><p class="block at-block"></p></th><th colspan="1" rowspan="1"><p class="block at-block"></p></th><th colspan="1" rowspan="1"><p class="block at-block"></p></th><th colspan="1" rowspan="1"><p class="block at-block"></p></th></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>placeholder</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">string</p></td><td colspan="1" rowspan="1"><p class="block at-block">-</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>editable</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">boolean</p></td><td colspan="1" rowspan="1"><p class="block at-block">true</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>readonly</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">boolean</p></td><td colspan="1" rowspan="1"><p class="block at-block">false</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>className</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"> className</p></td><td colspan="1" rowspan="1"><p class="block at-block">string</p></td><td colspan="1" rowspan="1"><p class="block at-block">-</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>extensions</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">Array&lt;Extension&gt;</p></td><td colspan="1" rowspan="1"><p class="block at-block">[]</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>useTextMenu</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">boolean</p></td><td colspan="1" rowspan="1"><p class="block at-block">false</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>renderMenus</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">() =&gt; React.ReactNode</p></td><td colspan="1" rowspan="1"><p class="block at-block">-</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>renderFloatMenus</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">() =&gt; &lt;FloatMenu <a target="_blank" rel="noopener noreferrer nofollow" class="at-link" href="https://github.com/Nice-PLQ/antd-richtext/blob/master/src/menus/FloatMenu/types.ts">config={...}</a> /&gt;</p></td><td colspan="1" rowspan="1"><p class="block at-block">-</p></td></tr></tbody></table><p class="block at-block">2<strong>Editor </strong></p><table class="block at-table" style="min-width: 450px"><colgroup><col><col><col></colgroup><tbody><tr><th colspan="1" rowspan="1"><p class="block at-block"></p></th><th colspan="1" rowspan="1"><p class="block at-block"></p></th><th colspan="1" rowspan="1"><p class="block at-block"></p></th></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>editor</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">Editor | null</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>getJSON</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"> JSON </p></td><td colspan="1" rowspan="1"><p class="block at-block">JSONContent</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>getHTML</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"> HTML </p></td><td colspan="1" rowspan="1"><p class="block at-block">string</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>getText</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">string</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>setContent</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">(content: JSONContent | string) =&gt; void</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>clearContent</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">() =&gt; void</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>setEditable</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">(editable: boolean) =&gt; void</p></td></tr></tbody></table><p class="block at-block">3<strong>EditorRender</strong> API</p><table class="block at-table" style="min-width: 600px"><colgroup><col><col><col><col></colgroup><tbody><tr><th colspan="1" rowspan="1"><p class="block at-block"></p></th><th colspan="1" rowspan="1"><p class="block at-block"></p></th><th colspan="1" rowspan="1"><p class="block at-block"></p></th><th colspan="1" rowspan="1"><p class="block at-block"></p></th></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>className</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"> className</p></td><td colspan="1" rowspan="1"><p class="block at-block">string</p></td><td colspan="1" rowspan="1"><p class="block at-block">-</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>extensions</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">Array&lt;Extension&gt;</p></td><td colspan="1" rowspan="1"><p class="block at-block">[]</p></td></tr></tbody></table><p class="block at-block">4<strong>EditorRender</strong> </p><table class="block at-table" style="min-width: 450px"><colgroup><col><col><col></colgroup><tbody><tr><th colspan="1" rowspan="1"><p class="block at-block"></p></th><th colspan="1" rowspan="1"><p class="block at-block"></p></th><th colspan="1" rowspan="1"><p class="block at-block"></p></th></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>editor</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">Editor | null</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>getJSON</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"> JSON </p></td><td colspan="1" rowspan="1"><p class="block at-block">JSONContent</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>getHTML</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"> HTML </p></td><td colspan="1" rowspan="1"><p class="block at-block">string</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>getText</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">string</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>setContent</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">(content: JSONContent | string) =&gt; void</p></td></tr><tr><td colspan="1" rowspan="1"><p class="block at-block"><strong>clearContent</strong></p></td><td colspan="1" rowspan="1"><p class="block at-block"></p></td><td colspan="1" rowspan="1"><p class="block at-block">() =&gt; void</p></td></tr></tbody></table><p class="block at-block"></p>`,$J=[{key:"zh_CN",label:"",locale:SD},{key:"zh_TW",label:"",locale:dft},{key:"ja_JP",label:"",locale:fft},{key:"ko_KR",label:"",locale:gft},{key:"en_US",label:"English",locale:hft}],Sft=n=>n.includes("image")?"image":["video/mp4","video/webm"].includes(n)?"video":"file",UJ=(n,e,t)=>{n.chain().insertContentAt(t,e.map(i=>({type:Sft(i.type),attrs:{src:URL.createObjectURL(i),size:i.size,name:i.name}}))).focus().run()},xft=()=>{var c;const[n,e]=m.useState([]),[t,i]=m.useState(),[r,s]=m.useState(SD),o=m.useRef(null),a=[bft.configure({onUpdate:u=>e(u)}),sft.configure({onDrop:UJ,onPaste:UJ})],l=u=>{const{locale:d}=$J.find(({key:h})=>h===u);s(d)};return P.jsxs("div",{className:"page",children:[P.jsx("div",{className:"sidebar",children:P.jsxs("div",{className:"sidebar-options",children:[P.jsx("div",{className:"label-large",children:""}),P.jsx(yft,{editor:(c=o.current)==null?void 0:c.editor,items:n})]})}),P.jsxs("div",{className:"editor-box",children:[P.jsx(E7e,{locale:r,children:P.jsx(nft,{content:wft,ref:o,extensions:a,useTextMenu:!0,renderMenus:()=>P.jsx(_ft,{}),renderFloatMenus:()=>P.jsx(Cft,{})})}),P.jsxs(d1,{wrap:!0,style:{marginTop:16,marginBottom:16},children:[P.jsx(bi,{type:"primary",onClick:()=>{var d;const u=(d=o.current)==null?void 0:d.getJSON();console.log(u),i(u)},children:"JSON"}),P.jsx(bi,{type:"primary",onClick:()=>{var d;const u=(d=o.current)==null?void 0:d.getHTML();console.log(u),i(u)},children:"HTML"}),P.jsx(bi,{type:"primary",onClick:()=>{var u;console.log((u=o.current)==null?void 0:u.getText())},children:"Text"}),P.jsx(zp,{style:{width:150},placeholder:"",onChange:l,children:$J.map(({key:u,label:d})=>P.jsx(zp.Option,{value:u,children:d},u))})]}),t&&P.jsxs(P.Fragment,{children:[P.jsx("hr",{}),P.jsx(ift,{content:t,style:{marginTop:24}})]})]}),P.jsx(Oke,{})]})},kft=lne(document.getElementById("root"));kft.render(P.jsx(xft,{}));export{bi as B,Ee as c,P as j,qe as p,m as r,jt as u};
